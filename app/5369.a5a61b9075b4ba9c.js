"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5369],{4670(F,x,h){h.d(x,{k:()=>g});var b=h(2615),_=h(3664);let g=(()=>{var M;class m{static#t=M=()=>(this.\u0275fac=function(y){return new(y||m)},this.\u0275mod=_.$C({type:m}),this.\u0275inj=b.G2t({}))}return M(),m})()},5369(F,x,h){h.d(x,{OutplantingPageModule:()=>Dt});var b=h(2200),_=h(4341),g=h(7343),M=h(8132),m=h(467),T=h(152),P=h(7762),y=h(4718),w=h(5083),I=h(5415),t=h(3664),d=h(2615),j=h(5921),D=h(3205),$=h(5735),E=h(918),S=h(9187),N=h(7643),G=h(6845),z=h(7314);const A=()=>({standalone:!0});function V(i,c){if(1&i){const a=t.RV6();t.j41(0,"span",55),t.bIt("click",function(){d.eBV(a),t.XpG();const n=t.sdS(15);return d.Njj(n.showPicker())}),t.EFF(1),t.k0s()}if(2&i){const a=t.XpG();t.R7$(),t.JRh(a.currentDateDisplay)}}function Y(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const a=t.XpG();t.R7$(),t.JRh(a.currentDateDisplay)}}function X(i,c){if(1&i){const a=t.RV6();t.j41(0,"span",55),t.bIt("click",function(){d.eBV(a),t.XpG();const n=t.sdS(17);return d.Njj(n.showPicker())}),t.EFF(1),t.k0s()}if(2&i){const a=t.XpG();t.R7$(),t.JRh(a.currentTimeDisplay)}}function B(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const a=t.XpG();t.R7$(),t.JRh(a.currentTimeDisplay)}}function L(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const a=t.XpG();t.R7$(),t.SpI(" (edited: ",a.getEditedDateTime(),")")}}function U(i,c){1&i&&t.nrm(0,"ion-icon",56)}function J(i,c){if(1&i){const a=t.RV6();t.j41(0,"div",13),t.bIt("click",function(){d.eBV(a);const n=t.XpG();return d.Njj(!n.viewMode&&n.editZone())}),t.nrm(1,"ion-icon",57),t.j41(2,"span",15),t.EFF(3),t.k0s()()}if(2&i){let a;const e=t.XpG();t.R7$(3),t.JRh(e.getZoneName(null==(a=e.outplantingForm.get("zoneNumber"))?null:a.value))}}function H(i,c){if(1&i){const a=t.RV6();t.j41(0,"span",58),t.bIt("click",function(){d.eBV(a);const n=t.XpG();return d.Njj(n.editLocationAdmin())}),t.EFF(1),t.nI1(2,"t"),t.k0s()}2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Edit location")," "))}function Z(i,c){1&i&&(t.j41(0,"ion-error",59),t.EFF(1),t.nI1(2,"t"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Location is required")," "))}function q(i,c){if(1&i){const a=t.RV6();t.j41(0,"div",60)(1,"ion-button",61),t.bIt("click",function(){d.eBV(a);const n=t.XpG();return d.Njj(n.enableEditMode())}),t.nrm(2,"ion-icon",62),t.EFF(3),t.nI1(4,"t"),t.k0s()()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"Edit This Entry")," "))}function K(i,c){1&i&&(t.j41(0,"div",63),t.nrm(1,"ion-icon",64),t.j41(2,"span"),t.EFF(3),t.nI1(4,"t"),t.k0s()()),2&i&&(t.R7$(3),t.JRh(t.bMT(4,1,"Editing Entry - Changes will replace the original submission")))}function W(i,c){if(1&i&&(t.j41(0,"ion-card-subtitle"),t.EFF(1),t.nI1(2,"t"),t.nI1(3,"t"),t.k0s()),2&i){const a=t.XpG(2);t.R7$(),t.E5c(" ",t.bMT(2,3,"Check-in")," #",a.currentSequenceNumber," ",t.bMT(3,5,"for ongoing project")," ")}}function Q(i,c){1&i&&(t.j41(0,"ion-note",75),t.nrm(1,"ion-icon",76),t.EFF(2),t.nI1(3,"t"),t.k0s()),2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"Outplanting activity will be marked as closed and removed from the active outplanting monitoring list.")," "))}function tt(i,c){if(1&i){const a=t.RV6();t.j41(0,"ion-card",65)(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3),t.nI1(4,"t"),t.k0s(),t.DNE(5,W,4,7,"ion-card-subtitle",8),t.k0s(),t.j41(6,"ion-card-content")(7,"ion-item",66),t.nrm(8,"ion-icon",67),t.j41(9,"ion-label",68)(10,"h3",69),t.EFF(11),t.nI1(12,"t"),t.k0s(),t.j41(13,"p"),t.EFF(14),t.nI1(15,"t"),t.k0s(),t.j41(16,"p",70),t.EFF(17),t.nI1(18,"t"),t.k0s()(),t.j41(19,"div",71)(20,"strong",72),t.EFF(21),t.nI1(22,"t"),t.nI1(23,"t"),t.k0s(),t.j41(24,"ion-toggle",73),t.mxI("ngModelChange",function(n){d.eBV(a);const o=t.XpG();return t.DH7(o.isProjectOngoing,n)||(o.isProjectOngoing=n),d.Njj(n)}),t.k0s()()(),t.DNE(25,Q,4,3,"ion-note",74),t.k0s()()}if(2&i){const a=t.XpG();t.R7$(3),t.JRh(t.bMT(4,11,"Project Status")),t.R7$(2),t.Y8G("ngIf",a.isUpdatingProject),t.R7$(6),t.JRh(t.bMT(12,13,"Keep monitoring activity ongoing")),t.R7$(3),t.JRh(t.bMT(15,15,"Allow future check-ins for the outplanting at this specific location.")),t.R7$(3),t.SpI("(",t.bMT(18,17,"Toggle off to close monitoring activity for this specific location."),")"),t.R7$(3),t.xc7("color",a.isProjectOngoing?"#2d8659":"#e76f51"),t.R7$(),t.SpI(" ",a.isProjectOngoing?t.bMT(22,19,"Ongoing"):t.bMT(23,21,"Closed")," "),t.R7$(3),t.R50("ngModel",a.isProjectOngoing),t.Y8G("ngModelOptions",t.lJ4(23,A)),t.R7$(),t.Y8G("ngIf",!a.isProjectOngoing)}}function et(i,c){1&i&&(t.j41(0,"p",77),t.nrm(1,"ion-icon",78),t.EFF(2),t.nI1(3,"t"),t.k0s()),2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"Tap to get current GPS location")," "))}function nt(i,c){if(1&i&&(t.j41(0,"p",79),t.nrm(1,"ion-icon",80),t.EFF(2),t.k0s()),2&i){const a=t.XpG();t.R7$(2),t.Lme(" ",a.coordinates.latitude.toFixed(6),", ",a.coordinates.longitude.toFixed(6)," ")}}function ot(i,c){1&i&&(t.j41(0,"p",81),t.nrm(1,"ion-icon",82),t.EFF(2),t.nI1(3,"t"),t.k0s()),2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"GPS captured when creating new site")," "))}function it(i,c){if(1&i&&(t.j41(0,"div",89)(1,"span",90),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",91),t.EFF(4),t.k0s()()),2&i){const a=t.XpG().index,e=t.XpG();t.R7$(4),t.JRh(e.lastReportData.individualsOutplanted[a]||0)}}function at(i,c){if(1&i){const a=t.RV6();t.j41(0,"ion-button",92),t.bIt("click",function(){d.eBV(a);const n=t.XpG().index,o=t.XpG();return d.Njj(o.decrementValue("individualsOutplanted",n))}),t.nrm(1,"ion-icon",93),t.k0s()}}function rt(i,c){if(1&i&&t.nrm(0,"input",94),2&i){const a=t.XpG().index;t.Y8G("formControlName",a)}}function st(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const a=t.XpG().index,e=t.XpG();t.R7$(),t.JRh(e.individualsOutplanted.at(a).value)}}function ct(i,c){if(1&i){const a=t.RV6();t.j41(0,"ion-button",92),t.bIt("click",function(){d.eBV(a);const n=t.XpG().index,o=t.XpG();return d.Njj(o.incrementValue("individualsOutplanted",n))}),t.nrm(1,"ion-icon",95),t.k0s()}}function lt(i,c){if(1&i){const a=t.RV6();t.j41(0,"div",83)(1,"ion-item")(2,"div",84)(3,"ion-label")(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p")(7,"em"),t.EFF(8),t.k0s()()(),t.j41(9,"ion-icon",85),t.bIt("click",function(n){const o=d.eBV(a).$implicit,r=t.XpG();return d.Njj(r.showMangroveInfo(n,o))}),t.k0s()(),t.j41(10,"div",51),t.DNE(11,it,5,1,"div",42),t.j41(12,"div",86),t.DNE(13,at,2,0,"ion-button",87)(14,rt,1,1,"input",88)(15,st,2,1,"span",8)(16,ct,2,0,"ion-button",87),t.k0s()()()()}if(2&i){const a=c.$implicit,e=t.XpG();t.R7$(5),t.JRh(a.scientificName),t.R7$(3),t.JRh(a.commonName),t.R7$(3),t.Y8G("ngIf",e.isUpdatingProject&&e.lastReportData),t.R7$(2),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode)}}function dt(i,c){if(1&i&&(t.j41(0,"div",89)(1,"span",90),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",91),t.EFF(4),t.k0s()()),2&i){const a=t.XpG();t.R7$(4),t.JRh(a.lastIndividualsOutplantedTotal)}}function gt(i,c){if(1&i&&(t.j41(0,"div",89)(1,"span",90),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",91),t.EFF(4),t.k0s()()),2&i){const a=t.XpG().index,e=t.XpG();t.R7$(4),t.SpI("",e.lastReportData.averageHeight[a]||0," cm")}}function ut(i,c){if(1&i){const a=t.RV6();t.j41(0,"div",83)(1,"ion-item")(2,"div",84)(3,"ion-label")(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p")(7,"em"),t.EFF(8),t.k0s()()(),t.j41(9,"ion-icon",85),t.bIt("click",function(n){const o=d.eBV(a).$implicit,r=t.XpG();return d.Njj(r.showMangroveInfo(n,o))}),t.k0s()(),t.j41(10,"div",96),t.DNE(11,gt,5,1,"div",42),t.j41(12,"ion-input",97),t.bIt("ionChange",function(){const n=d.eBV(a).index,o=t.XpG();return d.Njj(o.onHeightChange(n))}),t.j41(13,"span",46),t.EFF(14,"cm"),t.k0s()()()()()}if(2&i){const a=c.$implicit,e=c.index,n=t.XpG();t.R7$(5),t.JRh(a.scientificName),t.R7$(3),t.JRh(a.commonName),t.R7$(3),t.Y8G("ngIf",n.isUpdatingProject&&n.lastReportData),t.R7$(),t.Y8G("formControl",n.averageHeight.at(e))("readonly",n.viewMode)}}function pt(i,c){if(1&i&&(t.j41(0,"div",89)(1,"span",90),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",91),t.EFF(4),t.k0s()()),2&i){const a=t.XpG();t.R7$(4),t.SpI("",a.lastAverageHeightOverall," cm")}}function mt(i,c){if(1&i&&(t.j41(0,"div",89)(1,"span",90),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",91),t.EFF(4),t.k0s()()),2&i){const a=t.XpG().index,e=t.XpG();t.R7$(4),t.JRh(e.lastReportData.mortality[a]||0)}}function ft(i,c){if(1&i){const a=t.RV6();t.j41(0,"ion-button",92),t.bIt("click",function(){d.eBV(a);const n=t.XpG().index,o=t.XpG();return d.Njj(o.decrementValue("mortality",n))}),t.nrm(1,"ion-icon",93),t.k0s()}}function ht(i,c){if(1&i&&t.nrm(0,"input",94),2&i){const a=t.XpG().index;t.Y8G("formControlName",a)}}function _t(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const a=t.XpG().index,e=t.XpG();t.R7$(),t.JRh(e.mortality.at(a).value)}}function bt(i,c){if(1&i){const a=t.RV6();t.j41(0,"ion-button",92),t.bIt("click",function(){d.eBV(a);const n=t.XpG().index,o=t.XpG();return d.Njj(o.incrementValue("mortality",n))}),t.nrm(1,"ion-icon",95),t.k0s()}}function vt(i,c){if(1&i&&(t.j41(0,"div",83)(1,"ion-item")(2,"div",84)(3,"ion-label")(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p")(7,"em"),t.EFF(8),t.k0s()()()(),t.j41(9,"div",51),t.DNE(10,mt,5,1,"div",42),t.j41(11,"div",86),t.DNE(12,ft,2,0,"ion-button",87)(13,ht,1,1,"input",88)(14,_t,2,1,"span",8)(15,bt,2,0,"ion-button",87),t.k0s()()()()),2&i){const a=c.$implicit,e=t.XpG();t.R7$(5),t.JRh(a.scientificName),t.R7$(3),t.JRh(a.commonName),t.R7$(2),t.Y8G("ngIf",e.isUpdatingProject&&e.lastReportData),t.R7$(2),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode)}}function Ot(i,c){if(1&i&&(t.j41(0,"div",89)(1,"span",90),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",91),t.EFF(4),t.k0s()()),2&i){const a=t.XpG();t.R7$(4),t.JRh(a.lastMortalityTotal)}}function Mt(i,c){if(1&i&&(t.j41(0,"div",105)(1,"span",90),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",106),t.EFF(4),t.k0s()()),2&i){const a=t.XpG().index,e=t.XpG();t.R7$(4),t.E5c(" ",null!=e.lastReportData.signsOfReproduction[a]&&e.lastReportData.signsOfReproduction[a].flowers?"\u{1f338}":"","",null!=e.lastReportData.signsOfReproduction[a]&&e.lastReportData.signsOfReproduction[a].fruits?"\u{1f347}":"","",null!=e.lastReportData.signsOfReproduction[a]&&e.lastReportData.signsOfReproduction[a].flowers||null!=e.lastReportData.signsOfReproduction[a]&&e.lastReportData.signsOfReproduction[a].fruits?"":"-"," ")}}function Pt(i,c){if(1&i){const a=t.RV6();t.j41(0,"div",83)(1,"ion-item",98)(2,"div",84)(3,"ion-label")(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p")(7,"em"),t.EFF(8),t.k0s()()(),t.j41(9,"ion-icon",85),t.bIt("click",function(n){const o=d.eBV(a).$implicit,r=t.XpG();return d.Njj(r.showMangroveInfo(n,o))}),t.k0s()(),t.j41(10,"div",99),t.DNE(11,Mt,5,3,"div",100),t.j41(12,"div",101)(13,"div",102)(14,"ion-label"),t.EFF(15),t.nI1(16,"t"),t.k0s(),t.nrm(17,"ion-checkbox",103),t.k0s(),t.j41(18,"div",102)(19,"ion-label"),t.EFF(20),t.nI1(21,"t"),t.k0s(),t.nrm(22,"ion-checkbox",104),t.k0s()()()()()}if(2&i){const a=c.$implicit,e=c.index,n=t.XpG();t.R7$(),t.Y8G("formGroupName",e),t.R7$(4),t.JRh(a.scientificName),t.R7$(3),t.JRh(a.commonName),t.R7$(3),t.Y8G("ngIf",n.isUpdatingProject&&n.lastReportData),t.R7$(4),t.JRh(t.bMT(16,6,"Flowers")),t.R7$(5),t.JRh(t.bMT(21,8,"Fruits"))}}function Ct(i,c){if(1&i&&(t.j41(0,"div",89)(1,"span",90),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",91),t.EFF(4),t.k0s()()),2&i){const a=t.XpG();t.R7$(4),t.JRh(a.lastReproductionSpeciesCount)}}function xt(i,c){if(1&i){const a=t.RV6();t.j41(0,"div",107)(1,"ion-button",108),t.nrm(2,"ion-icon",109),t.EFF(3),t.nI1(4,"t"),t.k0s(),t.j41(5,"ion-button",110),t.bIt("click",function(){d.eBV(a);const n=t.XpG();return d.Njj(n.saveDraft())}),t.nrm(6,"ion-icon",111),t.EFF(7),t.nI1(8,"t"),t.k0s(),t.j41(9,"ion-button",112),t.bIt("click",function(){d.eBV(a);const n=t.XpG();return d.Njj(n.discardForm())}),t.nrm(10,"ion-icon",113),t.EFF(11),t.nI1(12,"t"),t.k0s()()}if(2&i){const a=t.XpG();t.R7$(),t.Y8G("disabled",!a.outplantingForm.valid),t.R7$(2),t.SpI(" ",t.bMT(4,4,"Submit Outplanting Monitoring")," "),t.R7$(4),t.SpI(" ",t.bMT(8,6,"Save Draft")," "),t.R7$(4),t.SpI(" ",t.bMT(12,8,"Discard")," ")}}function yt(i,c){if(1&i){const a=t.RV6();t.j41(0,"div",114)(1,"ion-button",115),t.bIt("click",function(){d.eBV(a);const n=t.XpG();return d.Njj(n.deleteEntry())}),t.nrm(2,"ion-icon",113),t.EFF(3),t.nI1(4,"t"),t.k0s()()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"Delete Entry")," "))}function kt(i,c){if(1&i){const a=t.RV6();t.j41(0,"span",17),t.bIt("click",function(){const n=d.eBV(a).index,o=t.XpG(2);return d.Njj(o.goTo(n))}),t.k0s()}if(2&i){const a=c.index,e=t.XpG(2);t.AVh("active",a===e.currentIndex)}}function Rt(i,c){if(1&i){const a=t.RV6();t.j41(0,"div",11)(1,"button",12),t.bIt("click",function(){d.eBV(a);const n=t.XpG();return d.Njj(n.previous())}),t.nrm(2,"ion-icon",13),t.k0s(),t.j41(3,"div",14),t.DNE(4,kt,1,2,"span",15),t.k0s(),t.j41(5,"button",12),t.bIt("click",function(){d.eBV(a);const n=t.XpG();return d.Njj(n.next())}),t.nrm(6,"ion-icon",16),t.k0s()()}if(2&i){const a=t.XpG();t.R7$(4),t.Y8G("ngForOf",a.getImages())}}let Ft=(()=>{var i;class c{forceDeleteDraftFile(e){var n=this;return(0,m.A)(function*(){for(let o=0;o<3;o++)try{yield n.sharedDataService.deleteJsonFile(e),console.log(`Draft file force deleted successfully (attempt ${o+1})`);break}catch(r){if(console.error(`Error force deleting draft file (attempt ${o+1}):`,r),2===o)try{yield n.sharedDataService.writeJsonFile(e,null),console.log("Draft file cleared with null write")}catch(s){console.error("Failed to clear draft file with null write:",s)}yield new Promise(s=>setTimeout(s,100))}})()}constructor(e,n,o,r,s,l,p,u,f,v,O,C){this.formBuilder=e,this.alertController=n,this.loadingController=o,this.router=r,this.route=s,this.modalController=l,this.auth=p,this.outplantingSyncService=u,this.sharedDataService=f,this.entryDeletionService=v,this.siteSyncService=O,this.ts=C,this.progress=0,this.currentDateTime="",this.currentDateDisplay="",this.currentTimeDisplay="",this.viewMode=!1,this.currentUser=null,this.currentReportId="",this.loadedReport=null,this.coordinates=null,this.gpsFromLocation=!1,this.autosaveSub=null,this.isDiscarded=!1,this.isSubmitted=!1,this.isSubmitting=!1,this.isEditMode=!1,this.originalSubmittedBy="",this.isProjectOngoing=!0,this.isUpdatingProject=!1,this.currentProjectKey=null,this.currentSequenceNumber=1,this.parentReportId=null,this.lastReportData=null,this.mangroveSpecies=[{scientificName:"Mangliye Rouz",commonName:"Red Mangrove",latinName:"Rhizophora mucronata",imagePath:["assets/mangroves/Red-Man.webp","assets/mangroves/Red mangrove1.webp","assets/mangroves/Red mangrove2.webp"]},{scientificName:"Mangliye Blan",commonName:"White Mangrove",latinName:"Avicennia marina",imagePath:["assets/mangroves/White-Man.webp","assets/mangroves/White mangrove1.webp","assets/mangroves/White mangrove2.webp"]},{scientificName:"Mangliye Zonn",commonName:"Yellow Mangrove",latinName:"Ceriops tagal",imagePath:["assets/mangroves/Yellow-Man.webp","assets/mangroves/Yellow mangrove1.webp","assets/mangroves/Yellow mangrove2.webp"]},{scientificName:"Mangliye Pti Fey",commonName:"Black Mangrove",latinName:"Lumnitzera racemosa",imagePath:["assets/mangroves/Black-Man.webp","assets/mangroves/Black mangrove.webp"]},{scientificName:"Mangliye Lat",commonName:"Oriental Mangrove",latinName:"Bruguiera gymnorrhiza",imagePath:["assets/mangroves/Oriental-Man.webp","assets/mangroves/Oriental mangrove1.webp","assets/mangroves/Oriental mangrove2.webp"]},{scientificName:"Mangliye Fler",commonName:"Apple Mangrove",latinName:"Sonneratia alba",imagePath:["assets/mangroves/Apple-Man.webp","assets/mangroves/Apple mangrove.webp"]},{scientificName:"Mangliye Pasyans",commonName:"Puzzlenut Mangrove",latinName:"Xylocarpus granatum",imagePath:["assets/mangroves/Puzzlenut-Man.webp","assets/mangroves/Puzzlenut mangrove.webp"]}],this.availableLocations=[{name:"Ramsar",hasZones:!0,hasQuads:!1,zones:["1","2","3","4","5","6"],quads:[]},{name:"Grand Anse",hasZones:!0,hasQuads:!1,zones:["1","2","3","4"],quads:[]},{name:"Caiman",hasZones:!1,hasQuads:!1,zones:[],quads:[]},{name:"Canopy",hasZones:!1,hasQuads:!1,zones:[],quads:[]},{name:"Petit Barbarons",hasZones:!0,hasQuads:!1,zones:["1","2","3","4"],quads:[]},{name:"Kempinski",hasZones:!1,hasQuads:!1,zones:[],quads:[]},{name:"Roche Caiman",hasZones:!1,hasQuads:!1,zones:[],quads:[]}]}ngOnInit(){var e=this;return(0,m.A)(function*(){e.currentUser=e.auth.getCurrentUser(),e.initializeForm(),e.setCurrentDateTime(),yield e.loadDynamicSites();const n=e.route.snapshot.queryParams;if("true"!==n.viewMode||!n.reportId)return"true"===n.editMode&&n.reportId?(yield e.loadReportForViewing(n.reportId),void e.enableEditMode()):(e.route.queryParams.subscribe(function(){var o=(0,m.A)(function*(r){r.location&&e.outplantingForm.patchValue({siteLocation:r.location}),r.zone&&e.outplantingForm.patchValue({zoneNumber:r.zone}),r.lat&&r.lng&&(e.coordinates={latitude:parseFloat(r.lat),longitude:parseFloat(r.lng)},e.gpsFromLocation=!0,e.updateProgress()),r.projectKey&&(e.isUpdatingProject=!0,yield e.loadProjectForContinuation(r.projectKey))});return function(r){return o.apply(this,arguments)}}()),"true"!==n.fresh&&(yield e.restoreDraftIfAny(),e.setCurrentDateTime()),e.currentReportId||(e.currentReportId=e.outplantingSyncService.generateReportId()),e.subscribeToFormChanges(),void(navigator.onLine&&e.outplantingSyncService.processPendingQueue().catch(o=>{console.error("OutplantingPage: processPendingQueue failed:",o)})));yield e.loadReportForViewing(n.reportId)})()}ngOnDestroy(){this.autosaveSub&&(this.autosaveSub.unsubscribe(),this.autosaveSub=null),!this.isSubmitted&&!this.isDiscarded&&this.saveDraftOnExit().catch(e=>console.error("OutplantingPage: saveDraftOnExit failed:",e))}setCurrentDateTime(e){if(this.outplantingForm){const u=this.outplantingForm.get("date")?.value,f=this.outplantingForm.get("observationTime")?.value;if(u&&f){const[v,O,C]=u.split("-"),[k,R]=f.split(":");return this.currentDateDisplay=`${C}/${O}/${v}`,this.currentTimeDisplay=`${k}:${R}`,void(this.currentDateTime=`${this.currentDateDisplay}  \u2022  ${this.currentTimeDisplay}`)}}if(e){const u=this.extractDateTimeFromReportId(e);if(u){this.currentDateTime=u;const f=u.split("  \u2022  ");return void(2===f.length&&(this.currentDateDisplay=f[0],this.currentTimeDisplay=f[1]))}}const n=new Date,o=String(n.getDate()).padStart(2,"0"),r=String(n.getMonth()+1).padStart(2,"0"),s=n.getFullYear(),l=String(n.getHours()).padStart(2,"0"),p=String(n.getMinutes()).padStart(2,"0");this.currentDateDisplay=`${o}/${r}/${s}`,this.currentTimeDisplay=`${l}:${p}`,this.currentDateTime=`${this.currentDateDisplay}  \u2022  ${this.currentTimeDisplay}`}extractDateTimeFromReportId(e){const n=e.match(/(\d{2})(\d{2})(\d{4})_(\d{2})(\d{2})(\d{2})/);if(n){const[,o,r,s,l,p]=n;return`${o}/${r}/${s}  \u2022  ${l}:${p}`}return null}getCurrentDate(){return(new Date).toISOString().split("T")[0]}editLocation(){var e=this;return(0,m.A)(function*(){yield(yield e.alertController.create({header:e.ts.t("Site Location"),inputs:[{name:"siteLocation",type:"text",placeholder:e.ts.t("Enter site location"),value:e.outplantingForm.get("siteLocation")?.value||""}],buttons:[{text:e.ts.t("Cancel"),role:"cancel"},{text:e.ts.t("Save"),handler:o=>{e.outplantingForm.patchValue({siteLocation:o.siteLocation})}}]})).present()})()}editZone(){var e=this;return(0,m.A)(function*(){yield(yield e.alertController.create({header:e.ts.t("Zone Number"),inputs:[{name:"zoneNumber",type:"text",placeholder:e.ts.t("Enter zone number"),value:e.outplantingForm.get("zoneNumber")?.value||""}],buttons:[{text:e.ts.t("Cancel"),role:"cancel"},{text:e.ts.t("Save"),handler:o=>{e.outplantingForm.patchValue({zoneNumber:o.zoneNumber})}}]})).present()})()}getZoneName(e){return e?`Zone ${e}`:""}locationHasZones(){const e=this.outplantingForm.get("siteLocation")?.value;return!!e&&["Ramsar","Grand Anse","Petit Barbarons"].includes(e)}locationHasQuads(){const e=this.outplantingForm.get("siteLocation")?.value;return!!e&&["Ramsar","Grand Anse","Caiman","Canopy"].includes(e)}getQuadDisplay(e){if(!e)return"";const n=e.match(/\d+/);return n?n[0]:""}editLocationAdmin(){var e=this;return(0,m.A)(function*(){if(!e.currentUser||e.currentUser.level<4)return;const n=yield e.selectLocationStep();if(!n)return;const o=e.availableLocations.find(s=>s.name===n);let r="";if(o?.hasZones&&o.zones.length>0){const s=yield e.selectZoneStep(o);if(null===s)return;r=s}e.outplantingForm.patchValue({siteLocation:n,zoneNumber:r}),e.isEditMode&&e.outplantingForm.markAsDirty()})()}selectLocationStep(){var e=this;return new Promise(function(){var n=(0,m.A)(function*(o){const r=e.outplantingForm.get("siteLocation")?.value||"",s=e.availableLocations.map(p=>({name:"location",type:"radio",label:p.name,value:p.name,checked:p.name===r}));yield(yield e.alertController.create({header:e.ts.t("Select Location"),cssClass:"location-edit-alert",inputs:s,buttons:[{text:e.ts.t("Cancel"),role:"cancel",handler:()=>o(null)},{text:e.ts.t("Next"),handler:p=>o(p)}]})).present()});return function(o){return n.apply(this,arguments)}}())}selectZoneStep(e){var n=this;return new Promise(function(){var o=(0,m.A)(function*(r){const s=n.outplantingForm.get("zoneNumber")?.value||"",l=e.zones.map(u=>({name:"zone",type:"radio",label:`Zone ${u}`,value:u,checked:u===s}));yield(yield n.alertController.create({header:n.ts.t("Select Zone"),subHeader:e.name,cssClass:"location-edit-alert",inputs:l,buttons:[{text:n.ts.t("Cancel"),role:"cancel",handler:()=>r(null)},{text:n.ts.t("Save"),handler:u=>r(u)}]})).present()});return function(r){return o.apply(this,arguments)}}())}loadDynamicSites(){var e=this;return(0,m.A)(function*(){try{(yield e.siteSyncService.getAllSites()).forEach(o=>{e.availableLocations.some(r=>r.name===o.name)||e.availableLocations.push({name:o.name,hasZones:o.zones&&o.zones.length>0||!1,hasQuads:o.sample_points&&o.sample_points.length>0||!1,zones:o.zones?o.zones.map(r=>r.name?.replace("Zone ","")||r.id):[],quads:o.sample_points?o.sample_points.map(r=>r.id||r.label):[]})})}catch(n){console.error("Error loading dynamic sites:",n)}})()}getGPSCoordinates(){var e=this;return(0,m.A)(function*(){try{const n=yield e.loadingController.create({message:e.ts.t("Getting GPS coordinates...")});yield n.present();const o=yield P.L.getCurrentPosition({enableHighAccuracy:!0,timeout:15e3,maximumAge:0});e.coordinates={latitude:o.coords.latitude,longitude:o.coords.longitude},yield n.dismiss(),e.updateProgress(),yield(yield e.alertController.create({header:e.ts.t("GPS Captured"),message:`${e.ts.t("Location")}: ${e.coordinates.latitude.toFixed(6)}, ${e.coordinates.longitude.toFixed(6)}`,buttons:["OK"]})).present()}catch(n){console.error("Error getting GPS coordinates:",n),yield(yield e.alertController.create({header:e.ts.t("GPS Error"),message:e.ts.t("Failed to get GPS coordinates. Please ensure location services are enabled and try again."),buttons:["OK"]})).present()}})()}initializeForm(){const e=this.getCurrentDate(),n=new Date,o=`${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`;this.outplantingForm=this.formBuilder.group({siteLocation:["",_.k0.required],zoneNumber:[""],quadNumber:"",totalArea:[""],areaRestored:[""],date:[e,_.k0.required],observationTime:[o],individualsOutplanted:this.formBuilder.array(this.mangroveSpecies.map(()=>[null])),averageHeight:this.formBuilder.array(this.mangroveSpecies.map(()=>[null])),mortality:this.formBuilder.array(this.mangroveSpecies.map(()=>[null])),signsOfReproduction:this.formBuilder.array(this.mangroveSpecies.map(()=>this.formBuilder.group({flowers:[!1],fruits:[!1]}))),notes:[""]}),this.updateProgress()}get individualsOutplanted(){return this.outplantingForm.get("individualsOutplanted")}get averageHeight(){return this.outplantingForm.get("averageHeight")}get mortality(){return this.outplantingForm.get("mortality")}get signsOfReproduction(){return this.outplantingForm.get("signsOfReproduction")}get individualsOutplantedTotal(){return this.individualsOutplanted.value.reduce((e,n)=>e+(Number(n)||0),0)}get averageHeightOverall(){const e=this.averageHeight.value.filter(o=>o>0);return 0===e.length?"0.0":(e.reduce((o,r)=>o+(Number(r)||0),0)/e.length).toFixed(1)}get mortalityTotal(){return this.mortality.value.reduce((e,n)=>e+(Number(n)||0),0)}get reproductionCount(){return this.signsOfReproduction.value.filter(e=>e.flowers||e.fruits).length}updateProgress(){const e=this.outplantingForm.value;let n=0,o=2;e.siteLocation&&n++,e.date&&n++,e.totalArea&&(n++,o++),e.areaRestored&&(n++,o++),this.coordinates&&(n++,o++),this.individualsOutplantedTotal>0&&(n++,o++),this.averageHeight.value.some(s=>s>0)&&(n++,o++),this.mortalityTotal>0&&(n++,o++),this.reproductionCount>0&&(n++,o++),e.notes&&(n++,o++),this.progress=o>0?n/o:0}subscribeToFormChanges(){this.autosaveSub&&this.autosaveSub.unsubscribe(),this.autosaveSub=this.outplantingForm.valueChanges.pipe((0,T.B)(750)).subscribe(()=>{this.isSubmitted||this.isDiscarded||(this.updateProgress(),this.saveDraftOnExit().catch(e=>console.error("OutplantingPage: autosave failed:",e)))})}incrementValue(e,n,o=1){const r=this.outplantingForm.get(e);if(r&&r.at(n)){const s=r.at(n).value||0;r.at(n).setValue(Number((s+o).toFixed(1)))}}decrementValue(e,n,o=1){const r=this.outplantingForm.get(e);if(r&&r.at(n)){const s=r.at(n).value||0;s>0&&r.at(n).setValue(Math.max(0,Number((s-o).toFixed(1))))}}onHeightChange(e){const n=this.averageHeight.at(e).value;if(null!=n){const o=Number(n);!isNaN(o)&&o>=0?this.averageHeight.at(e).setValue(Number(o.toFixed(1))):this.averageHeight.at(e).setValue(0)}}onSubmit(){var e=this;return(0,m.A)(function*(){if(e.isSubmitting)return;if(e.isSubmitting=!0,e.outplantingForm.markAllAsTouched(),!e.outplantingForm.valid)return e.isSubmitting=!1,void(yield(yield e.alertController.create({header:e.ts.t("Incomplete Form"),message:e.ts.t("Please fill in all required fields (Location and Date)."),buttons:["OK"]})).present());e.isSubmitted=!0,e.autosaveSub&&(e.autosaveSub.unsubscribe(),e.autosaveSub=null);const n=yield e.loadingController.create({message:e.ts.t("Submitting outplanting data...")});yield n.present();try{const o={...e.outplantingForm.value,individualsOutplantedTotal:e.individualsOutplantedTotal,averageHeightOverall:e.averageHeightOverall,mortalityTotal:e.mortalityTotal,reproductionCount:e.reproductionCount};o.status={incomplete:!1,sent:!0,pending:!1};let r=e.currentProjectKey;if(!r){const f=o.siteLocation||"Unknown",v=o.zoneNumber||"",O=o.quadNumber||"";r=`OUTP${Array.from({length:3},()=>String.fromCharCode(65+Math.floor(26*Math.random()))).join("")}_${f.replace(/[^a-zA-Z0-9]/g,"_")}${v?"_Zone"+v:""}${O?"_Quad"+O:""}`}const s={formValue:o,coordinates:e.coordinates,photos:[],project_key:r,sequence_number:e.currentSequenceNumber,parent_report_id:e.parentReportId||void 0,is_ongoing:e.isProjectOngoing,existingReportId:e.currentReportId||void 0};e.isEditMode&&(s.originalSubmittedBy=e.originalSubmittedBy);const l=yield e.outplantingSyncService.submitFinal(s);yield n.dismiss();try{e.autosaveSub&&(e.autosaveSub.unsubscribe(),e.autosaveSub=null),yield new Promise(R=>setTimeout(R,1e3));const f=e.outplantingForm.value;yield e.outplantingSyncService.clearDraft(f);const v=(f?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),O=f?.zoneNumber||"",C=f?.quadNumber||"";let k=`outplanting_draft_${v}`;O&&(k+=`_zone${O}`),C&&(k+=`_quad${C}`),yield e.forceDeleteDraftFile(`${k}.json`),e.isSubmitted=!0,console.log("OutplantingPage: Draft cleared and form reset successfully")}catch(f){console.error("OutplantingPage: Failed to clear draft:",f)}const p=e.ts.t(e.isEditMode?l.queued?"Updated data saved locally and queued for upload when online.":"Outplanting data updated successfully!":l.queued?"Outplanting data saved locally and queued for upload when online.":"Outplanting data submitted successfully!");yield(yield e.alertController.create({header:e.ts.t("Success"),message:p,buttons:[{text:"OK",handler:()=>{e.router.navigate(["/health"])}}]})).present()}catch(o){yield n.dismiss(),console.error("Error submitting outplanting data:",o),yield(yield e.alertController.create({header:e.ts.t("Error"),message:e.ts.t("Failed to submit outplanting data. Please try again."),buttons:["OK"]})).present()}})()}discardForm(){var e=this;return(0,m.A)(function*(){const n=yield e.alertController.create({header:e.ts.t("Discard Form"),message:e.ts.t("Are you sure you want to discard this form? All entered data will be lost."),buttons:[{text:e.ts.t("Cancel"),role:"cancel"},{text:e.ts.t("Discard"),role:"destructive"}]});yield n.present();const{role:o}=yield n.onDidDismiss();if("destructive"!==o)return;const r=yield e.loadingController.create({message:e.ts.t("Discarding...")});yield r.present(),e.isDiscarded=!0,e.autosaveSub&&(e.autosaveSub.unsubscribe(),e.autosaveSub=null),yield new Promise(s=>setTimeout(s,1e3));try{const s=e.outplantingForm.value;yield e.outplantingSyncService.clearDraft(s);const l=(s?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),p=s?.zoneNumber||"",u=s?.quadNumber||"";let f=`outplanting_draft_${l}`;p&&(f+=`_zone${p}`),u&&(f+=`_quad${u}`),yield e.forceDeleteDraftFile(`${f}.json`)}catch(s){console.error("OutplantingPage: Error clearing draft during discard:",s)}yield r.dismiss(),e.initializeForm(),e.router.navigate(["/health"])})()}restoreDraftIfAny(){var e=this;return(0,m.A)(function*(){const n=e.route.snapshot.queryParams,o={location:n.location||e.outplantingForm.get("location")?.value,zoneNumber:n.zone||e.outplantingForm.get("zoneNumber")?.value,quadNumber:n.quad||e.outplantingForm.get("quadNumber")?.value},r=yield e.outplantingSyncService.loadDraft(o);if(r)try{r.reportId&&(e.currentReportId=r.reportId),r.form&&e.outplantingForm.patchValue(r.form),e.coordinates=r.coordinates||null,e.updateProgress()}catch(s){console.error("OutplantingPage: failed to restore draft:",s)}})()}saveDraft(){var e=this;return(0,m.A)(function*(){if(!e.outplantingForm)return;const n=yield e.alertController.create({header:e.ts.t("Save Draft"),message:e.ts.t("Are you sure you want to save this form as a draft? You can return to complete it later."),buttons:[{text:e.ts.t("Cancel"),role:"cancel"},{text:e.ts.t("Save Draft"),role:"confirm"}]});yield n.present();const{role:o}=yield n.onDidDismiss();if("confirm"!==o)return;const r=yield e.loadingController.create({message:e.ts.t("Saving draft...")});yield r.present();try{yield e.saveDraftOnExit(),yield r.dismiss();const s=yield e.alertController.create({header:e.ts.t("Draft Saved"),message:e.ts.t("Your form has been saved as a draft. You can access it from the health page."),buttons:[{text:"OK",role:"confirm"}]});yield s.present(),yield s.onDidDismiss(),e.router.navigate(["/health"])}catch(s){yield r.dismiss(),console.error("Failed to save draft:",s),yield(yield e.alertController.create({header:e.ts.t("Save Failed"),message:e.ts.t("Failed to save the draft. Please try again."),buttons:["OK"]})).present()}})()}saveDraftOnExit(){var e=this;return(0,m.A)(function*(){if(!e.outplantingForm||e.viewMode||e.isDiscarded||e.isSubmitted)return;const n=e.outplantingForm.value;(n?.siteLocation||e.individualsOutplantedTotal>0||e.mortalityTotal>0)&&(yield e.outplantingSyncService.saveDraft({reportId:e.currentReportId,form:{...n,individualsOutplantedTotal:e.individualsOutplantedTotal,averageHeightOverall:e.averageHeightOverall,mortalityTotal:e.mortalityTotal,reproductionCount:e.reproductionCount},coordinates:null,photos:[]}))})()}showMangroveInfo(e,n){var o=this;return(0,m.A)(function*(){if(e.stopPropagation(),w.Capacitor.isNativePlatform())try{yield I.Z.lock({orientation:"portrait"})}catch{}const r=yield o.modalController.create({component:wt,componentProps:{species:n},cssClass:"fullheight-info-modal"});r.onDidDismiss().then((0,m.A)(function*(){if(w.Capacitor.isNativePlatform())try{yield I.Z.unlock()}catch{}})),yield r.present()})()}setViewMode(e){this.viewMode=e,e?(this.outplantingForm.disable(),this.enableCheckboxControls()):this.outplantingForm.enable()}enableEditMode(){!this.currentUser||this.currentUser.level<4||(this.isEditMode=!0,this.viewMode=!1,this.outplantingForm.enable(),this.originalSubmittedBy=this.loadedReport?.submittedBy||"")}getEditedDateTime(){if(!this.loadedReport)return null;let e=this.loadedReport.editedAt||null;if(!e){const u=this.loadedReport.updatedAt,f=this.loadedReport.createdAt;u&&f&&u!==f&&Math.abs(new Date(u).getTime()-new Date(f).getTime())>5e3&&(e=u)}if(!e)return null;const n=new Date(e);return isNaN(n.getTime())?null:`${n.getDate().toString().padStart(2,"0")}/${(n.getMonth()+1).toString().padStart(2,"0")}/${n.getFullYear()} ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`}onDateChanged(e){const n=e.target;n.value&&(this.outplantingForm.get("date")?.setValue(n.value),this.setCurrentDateTime())}onTimeChanged(e){const n=e.target;n.value&&(this.outplantingForm.get("observationTime")?.setValue(n.value),this.setCurrentDateTime())}enableCheckboxControls(){const e=this.outplantingForm.get("species");e&&e.controls.forEach(n=>{n.get("flowers")?.enable(),n.get("fruits")?.enable()})}loadReportForViewing(e){var n=this;return(0,m.A)(function*(){try{const o=yield n.outplantingSyncService.getAllReports();console.log("OutplantingPage: All reports:",o);const r=o.find(l=>l.report.reportId===e);if(!r)return console.error("OutplantingPage: Report not found for viewing:",e),yield(yield n.alertController.create({header:n.ts.t("Report Not Found"),message:n.ts.t("The requested report could not be found."),buttons:["OK"]})).present(),void n.router.navigate(["/health"]);const s=r.report;if(console.log("OutplantingPage: Loading report for viewing:",s),n.loadedReport=s,n.outplantingForm.patchValue({siteLocation:s.form.siteLocation||"",date:s.form.date||"",observationTime:s.form.observationTime||"",zoneNumber:s.form.zoneNumber||"",notes:s.form.notes||""}),s.form.individualsOutplanted&&Array.isArray(s.form.individualsOutplanted)){const l=n.outplantingForm.get("individualsOutplanted");s.form.individualsOutplanted.forEach((p,u)=>{l.at(u)&&l.at(u).patchValue(void 0!==p?p:null)})}if(s.form.averageHeight&&Array.isArray(s.form.averageHeight)){const l=n.outplantingForm.get("averageHeight");s.form.averageHeight.forEach((p,u)=>{l.at(u)&&l.at(u).patchValue(void 0!==p?p:null)})}if(s.form.mortality&&Array.isArray(s.form.mortality)){const l=n.outplantingForm.get("mortality");s.form.mortality.forEach((p,u)=>{l.at(u)&&l.at(u).patchValue(void 0!==p?p:null)})}if(s.form.reproduction&&Array.isArray(s.form.reproduction)){const l=n.outplantingForm.get("reproduction");s.form.reproduction.forEach((p,u)=>{l.at(u)&&l.at(u).patchValue(void 0!==p?p:null)})}s.coordinates&&(n.coordinates=s.coordinates),n.currentReportId=e,n.setCurrentDateTime(e),n.updateProgress(),n.setViewMode(!0)}catch(o){console.error("OutplantingPage: Error loading report for viewing:",o),yield(yield n.alertController.create({header:n.ts.t("Error"),message:n.ts.t("Failed to load the report."),buttons:["OK"]})).present(),n.router.navigate(["/health"])}})()}deleteEntry(){var e=this;return(0,m.A)(function*(){const n=e.auth.getCurrentUser();var r;!n||n.level<4?yield(yield e.alertController.create({header:e.ts.t("Permission Denied"),message:e.ts.t("Only Level 4 users can delete entries."),buttons:["OK"]})).present():yield(yield e.alertController.create({header:e.ts.t("Delete Entry"),message:e.ts.t("Are you sure you want to permanently delete this entry? This will remove it from the database and back it up to deleted files storage. This action cannot be undone."),buttons:[{text:e.ts.t("Cancel"),role:"cancel"},{text:e.ts.t("Delete"),role:"destructive",handler:(r=(0,m.A)(function*(){yield e.performDeletion()}),function(){return r.apply(this,arguments)})}]})).present()})()}performDeletion(){var e=this;return(0,m.A)(function*(){const n=yield e.loadingController.create({message:e.ts.t("Deleting entry...")});yield n.present();try{const o=e.auth.getCurrentUser();yield e.entryDeletionService.deleteEntry({reportId:e.currentReportId,formType:"outplanting",tableName:"outplanting_reports",deletedBy:o?.username||"Unknown",deletedByEmail:o?.email||"",originalSubmittedBy:e.loadedReport?.submittedBy,originalSubmittedAt:e.loadedReport?.createdAt}),yield n.dismiss(),yield(yield e.alertController.create({header:e.ts.t("Success"),message:e.ts.t("Entry has been deleted and backed up successfully."),buttons:[{text:"OK",handler:()=>{e.router.navigate(["/health"])}}]})).present()}catch(o){yield n.dismiss(),console.error("Error deleting entry:",o),yield(yield e.alertController.create({header:e.ts.t("Error"),message:e.ts.t("Failed to delete entry. Please try again."),buttons:["OK"]})).present()}})()}loadProjectForContinuation(e){var n=this;return(0,m.A)(function*(){try{const r=(yield n.outplantingSyncService.getAllReports()).filter(p=>p.report.project_key===e||p.report.reportId===e);if(0===r.length)return void console.error("OutplantingPage: No reports found for project:",e);const l=r.reduce((p,u)=>(u.report.sequence_number||1)>(p.report.sequence_number||1)?u:p).report;console.log("OutplantingPage: Loading project for continuation:",l),n.currentProjectKey=e,n.currentSequenceNumber=(l.sequence_number||1)+1,n.parentReportId=l.reportId,n.isProjectOngoing=!1!==l.is_ongoing,n.lastReportData={individualsOutplanted:l.form.individualsOutplanted||n.mangroveSpecies.map(()=>null),averageHeight:l.form.averageHeight||n.mangroveSpecies.map(()=>null),mortality:l.form.mortality||n.mangroveSpecies.map(()=>null),signsOfReproduction:l.form.signsOfReproduction||n.mangroveSpecies.map(()=>({flowers:!1,fruits:!1})),notes:l.form.notes||"",date:l.form.date||""},n.outplantingForm.patchValue({siteLocation:l.form.siteLocation||"",date:n.getCurrentDate(),zoneNumber:l.form.zoneNumber||"",quadNumber:l.form.quadNumber||"",totalArea:l.form.totalArea||"",areaRestored:l.form.areaRestored||"",notes:""})}catch(o){console.error("OutplantingPage: Error loading project for continuation:",o)}})()}get lastIndividualsOutplantedTotal(){return this.lastReportData?.individualsOutplanted.reduce((e,n)=>e+(Number(n)||0),0)||0}get lastAverageHeightOverall(){if(!this.lastReportData)return"0.0";const e=this.lastReportData.averageHeight.filter(o=>Number(o)>0);return 0===e.length?"0.0":(e.reduce((o,r)=>o+(Number(r)||0),0)/e.length).toFixed(1)}get lastMortalityTotal(){return this.lastReportData?.mortality.reduce((e,n)=>e+(Number(n)||0),0)||0}get lastReproductionSpeciesCount(){return this.lastReportData?.signsOfReproduction?this.lastReportData.signsOfReproduction.filter(e=>!0===e.flowers||!0===e.fruits).length:0}static#t=i=()=>(this.\u0275fac=function(n){return new(n||c)(t.rXU(_.ok),t.rXU(g.hG),t.rXU(g.Xi),t.rXU(j.Ix),t.rXU(j.nX),t.rXU(g.W3),t.rXU(D.N),t.rXU($.Q),t.rXU(E.H),t.rXU(S.C),t.rXU(N.k),t.rXU(G.L))},this.\u0275cmp=t.VBU({type:c,selectors:[["app-outplanting"]],standalone:!1,decls:168,vars:119,consts:[["dateInput",""],["timeInput",""],[1,"outplanting-green"],["slot","start"],["defaultHref","/health"],[1,"outplanting-green","compact-toolbar"],[1,"date-time-text"],["style","cursor: pointer;",3,"click",4,"ngIf"],[4,"ngIf"],["type","date",2,"position","absolute","opacity","0","width","0","height","0","pointer-events","none",3,"change","value"],["type","time",2,"position","absolute","opacity","0","width","0","height","0","pointer-events","none",3,"change","value"],[1,"outplanting-green","metadata-toolbar"],[1,"metadata-container"],[1,"metadata-item",3,"click"],["name","location",1,"metadata-icon"],[1,"metadata-label"],["name","alert-circle","class","status-icon required",4,"ngIf"],["class","metadata-item",3,"click",4,"ngIf"],["class","edit-location-link",3,"click",4,"ngIf"],["style","padding: 0 16px; font-size: 0.75rem; color: #e76f51;",4,"ngIf"],["color","light",3,"value"],[1,"progress-text"],[3,"ngSubmit","formGroup"],["class","edit-mode-banner",4,"ngIf"],["class","edit-mode-banner editing",4,"ngIf"],["class","status-card",4,"ngIf"],[1,"gps-card"],["lines","none",1,"gps-item",3,"click","button"],["slot","start",1,"gps-icon-container"],["name","navigate",3,"color"],[1,"gps-title"],["class","gps-hint",4,"ngIf"],["class","coordinates-text",4,"ngIf"],["class","gps-source-hint",4,"ngIf"],["position","stacked"],["formControlName","totalArea","type","text",3,"placeholder"],["formControlName","areaRestored","type","text",3,"placeholder"],[1,"outplanting-header"],["formArrayName","individualsOutplanted",1,"species-list"],["class","species-row",4,"ngFor","ngForOf"],[1,"total-row"],[1,"total-value-section"],["class","last-value",4,"ngIf"],["readonly","",1,"total-input",3,"value"],[1,"growth-header"],["formArrayName","averageHeight",1,"species-list"],["slot","end"],[1,"mortality-header"],["formArrayName","mortality",1,"species-list"],[1,"reproduction-header"],["formArrayName","signsOfReproduction",1,"species-list"],[1,"value-section"],["formControlName","notes","rows","4",3,"placeholder"],["class","form-buttons",4,"ngIf"],["class","button-container",4,"ngIf"],[2,"cursor","pointer",3,"click"],["name","alert-circle",1,"status-icon","required"],["name","grid",1,"metadata-icon"],[1,"edit-location-link",3,"click"],[2,"padding","0 16px","font-size","0.75rem","color","#e76f51"],[1,"edit-mode-banner"],["expand","block","color","warning",3,"click"],["name","create-outline","slot","start"],[1,"edit-mode-banner","editing"],["name","create-outline"],[1,"status-card"],["lines","none"],["name","leaf-outline","slot","start",1,"toggle-icon"],[2,"min-width","70%","margin-right","15px"],[2,"width","100%"],[2,"margin-top","12px"],[2,"display","flex","flex-direction","column","align-items","center","flex-shrink","0","margin-right","15px"],[2,"font-size","0.8rem","margin-bottom","4px"],[1,"restoration-toggle",2,"--handle-border-radius","50%","--track-border-radius","15px","width","50px",3,"ngModelChange","ngModel","ngModelOptions"],["class","status-note warning",4,"ngIf"],[1,"status-note","warning"],["name","information-circle-outline"],[1,"gps-hint"],["name","location","size","small"],[1,"coordinates-text"],["name","pin","size","small"],[1,"gps-source-hint"],["name","information-circle","size","small"],[1,"species-row"],[1,"species-info"],["name","information-circle-outline","color","medium",1,"info-icon",3,"click"],[1,"tally-control"],["size","small","fill","clear",3,"click",4,"ngIf"],["type","number","min","0","class","tally-input","placeholder","0",3,"formControlName",4,"ngIf"],[1,"last-value"],[1,"last-label"],[1,"last-number"],["size","small","fill","clear",3,"click"],["name","remove"],["type","number","min","0","placeholder","0",1,"tally-input",3,"formControlName"],["name","add"],[1,"value-section","height-section"],["type","number","step","0.1","min","0","placeholder","0.0",1,"height-input-simple",3,"ionChange","formControl","readonly"],[3,"formGroupName"],[1,"value-section","reproduction-section"],["class","last-value reproduction-last",4,"ngIf"],[1,"reproduction-checkboxes"],[1,"checkbox-group"],["formControlName","flowers"],["formControlName","fruits"],[1,"last-value","reproduction-last"],[1,"last-reproduction"],[1,"form-buttons"],["expand","block","type","submit",1,"submit-button",3,"disabled"],["name","checkmark-circle","slot","start"],["expand","block","fill","outline","color","medium",1,"save-draft-button",3,"click"],["name","save-outline","slot","start"],["expand","block","fill","outline",1,"discard-button",3,"click"],["name","trash-outline","slot","start"],[1,"button-container"],["expand","block","color","danger",1,"delete-button",3,"click"]],template:function(n,o){if(1&n){const r=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-buttons",3),t.nrm(3,"ion-back-button",4),t.k0s(),t.j41(4,"ion-title"),t.EFF(5),t.nI1(6,"t"),t.k0s()(),t.j41(7,"ion-toolbar",5)(8,"ion-text",6),t.DNE(9,V,2,1,"span",7)(10,Y,2,1,"span",8),t.EFF(11," \xa0 \u2022 \xa0 "),t.DNE(12,X,2,1,"span",7)(13,B,2,1,"span",8),t.j41(14,"input",9,0),t.bIt("change",function(l){return d.eBV(r),d.Njj(o.onDateChanged(l))}),t.k0s(),t.j41(16,"input",10,1),t.bIt("change",function(l){return d.eBV(r),d.Njj(o.onTimeChanged(l))}),t.k0s(),t.DNE(18,L,2,1,"span",8),t.k0s()(),t.j41(19,"ion-toolbar",11)(20,"div",12)(21,"div",13),t.bIt("click",function(){return d.eBV(r),d.Njj(!o.viewMode&&o.editLocation())}),t.nrm(22,"ion-icon",14),t.j41(23,"span",15),t.EFF(24),t.nI1(25,"t"),t.k0s(),t.DNE(26,U,1,0,"ion-icon",16),t.k0s(),t.DNE(27,J,4,1,"div",17)(28,H,3,3,"span",18),t.k0s(),t.DNE(29,Z,3,3,"ion-error",19),t.k0s(),t.j41(30,"ion-toolbar",5),t.nrm(31,"ion-progress-bar",20),t.j41(32,"ion-text",21),t.EFF(33),t.nI1(34,"t"),t.k0s()()(),t.j41(35,"ion-content")(36,"form",22),t.bIt("ngSubmit",function(){return d.eBV(r),d.Njj(o.onSubmit())}),t.DNE(37,q,5,3,"div",23)(38,K,5,3,"div",24)(39,tt,26,24,"ion-card",25),t.j41(40,"ion-card",26)(41,"ion-card-header",2)(42,"ion-card-title"),t.EFF(43),t.nI1(44,"t"),t.k0s()(),t.j41(45,"ion-card-content")(46,"ion-item",27),t.bIt("click",function(){return d.eBV(r),d.Njj(!o.viewMode&&o.getGPSCoordinates())}),t.j41(47,"div",28),t.nrm(48,"ion-icon",29),t.k0s(),t.j41(49,"ion-label")(50,"h3",30),t.EFF(51),t.nI1(52,"t"),t.nI1(53,"t"),t.nI1(54,"t"),t.k0s(),t.DNE(55,et,4,3,"p",31)(56,nt,3,2,"p",32)(57,ot,4,3,"p",33),t.k0s()()()(),t.j41(58,"ion-card")(59,"ion-card-header",2)(60,"ion-card-title"),t.EFF(61),t.nI1(62,"t"),t.k0s()(),t.j41(63,"ion-card-content")(64,"ion-item")(65,"ion-label",34),t.EFF(66),t.nI1(67,"t"),t.k0s(),t.nrm(68,"ion-input",35),t.nI1(69,"t"),t.k0s(),t.j41(70,"ion-item")(71,"ion-label",34),t.EFF(72),t.nI1(73,"t"),t.k0s(),t.nrm(74,"ion-input",36),t.nI1(75,"t"),t.k0s()()(),t.j41(76,"ion-card")(77,"ion-card-header",37)(78,"ion-card-title"),t.EFF(79),t.nI1(80,"t"),t.k0s(),t.j41(81,"ion-card-subtitle"),t.EFF(82),t.nI1(83,"t"),t.k0s()(),t.j41(84,"ion-card-content")(85,"div",38),t.DNE(86,lt,17,7,"div",39),t.k0s(),t.j41(87,"ion-item",40)(88,"ion-label")(89,"strong"),t.EFF(90),t.nI1(91,"t"),t.k0s()(),t.j41(92,"div",41),t.DNE(93,dt,5,1,"div",42),t.nrm(94,"ion-input",43),t.k0s()()()(),t.j41(95,"ion-card")(96,"ion-card-header",44)(97,"ion-card-title"),t.EFF(98),t.nI1(99,"t"),t.k0s(),t.j41(100,"ion-card-subtitle"),t.EFF(101),t.nI1(102,"t"),t.k0s()(),t.j41(103,"ion-card-content")(104,"div",45),t.DNE(105,ut,15,5,"div",39),t.k0s(),t.j41(106,"ion-item",40)(107,"ion-label")(108,"strong"),t.EFF(109),t.nI1(110,"t"),t.k0s()(),t.j41(111,"div",41),t.DNE(112,pt,5,1,"div",42),t.j41(113,"ion-input",43)(114,"span",46),t.EFF(115,"cm"),t.k0s()()()()()(),t.j41(116,"ion-card")(117,"ion-card-header",47)(118,"ion-card-title"),t.EFF(119),t.nI1(120,"t"),t.k0s(),t.j41(121,"ion-card-subtitle"),t.EFF(122),t.nI1(123,"t"),t.k0s()(),t.j41(124,"ion-card-content")(125,"div",48),t.DNE(126,vt,16,7,"div",39),t.k0s(),t.j41(127,"ion-item",40)(128,"ion-label")(129,"strong"),t.EFF(130),t.nI1(131,"t"),t.k0s()(),t.j41(132,"div",41),t.DNE(133,Ot,5,1,"div",42),t.nrm(134,"ion-input",43),t.k0s()()()(),t.j41(135,"ion-card")(136,"ion-card-header",49)(137,"ion-card-title"),t.EFF(138),t.nI1(139,"t"),t.k0s(),t.j41(140,"ion-card-subtitle"),t.EFF(141),t.nI1(142,"t"),t.k0s()(),t.j41(143,"ion-card-content")(144,"div",50),t.DNE(145,Pt,23,10,"div",39),t.k0s(),t.j41(146,"ion-item",40)(147,"ion-label")(148,"strong"),t.EFF(149),t.nI1(150,"t"),t.k0s()(),t.j41(151,"div",51),t.DNE(152,Ct,5,1,"div",42),t.nrm(153,"ion-input",43),t.k0s()()()(),t.j41(154,"ion-card")(155,"ion-card-header",2)(156,"ion-card-title"),t.EFF(157),t.nI1(158,"t"),t.k0s()(),t.j41(159,"ion-card-content")(160,"ion-item")(161,"ion-label",34),t.EFF(162),t.nI1(163,"t"),t.k0s(),t.nrm(164,"ion-textarea",52),t.nI1(165,"t"),t.k0s()()(),t.DNE(166,xt,13,10,"div",53)(167,yt,5,3,"div",54),t.k0s()()}if(2&n){let r,s,l,p,u,f;t.R7$(5),t.JRh(t.bMT(6,65,"Outplanting Monitoring")),t.R7$(4),t.Y8G("ngIf",(null==o.currentUser?null:o.currentUser.level)>=4&&!o.viewMode),t.R7$(),t.Y8G("ngIf",!((null==o.currentUser?null:o.currentUser.level)>=4&&!o.viewMode)),t.R7$(2),t.Y8G("ngIf",(null==o.currentUser?null:o.currentUser.level)>=4&&!o.viewMode),t.R7$(),t.Y8G("ngIf",!((null==o.currentUser?null:o.currentUser.level)>=4&&!o.viewMode)),t.R7$(),t.Y8G("value",null==(r=o.outplantingForm.get("date"))?null:r.value),t.R7$(2),t.Y8G("value",null==(s=o.outplantingForm.get("observationTime"))?null:s.value),t.R7$(2),t.Y8G("ngIf",(o.viewMode||o.isEditMode)&&o.getEditedDateTime()),t.R7$(6),t.JRh((null==(l=o.outplantingForm.get("siteLocation"))?null:l.value)||t.bMT(25,67,"Add location")),t.R7$(2),t.Y8G("ngIf",!(null!=(p=o.outplantingForm.get("siteLocation"))&&p.value||o.viewMode)),t.R7$(),t.Y8G("ngIf",(null==(u=o.outplantingForm.get("zoneNumber"))?null:u.value)&&o.locationHasZones()),t.R7$(),t.Y8G("ngIf",o.isEditMode&&o.currentUser&&o.currentUser.level>=4),t.R7$(),t.Y8G("ngIf",(null==(f=o.outplantingForm.get("siteLocation"))?null:f.hasError("required"))&&(null==(f=o.outplantingForm.get("siteLocation"))?null:f.touched)),t.R7$(2),t.Y8G("value",o.progress),t.R7$(2),t.Lme(" ",(100*o.progress).toFixed(0),"% ",t.bMT(34,69,"Complete")," "),t.R7$(2),t.AVh("view-mode",o.viewMode),t.R7$(),t.Y8G("formGroup",o.outplantingForm),t.R7$(),t.Y8G("ngIf",o.viewMode&&o.currentUser&&o.currentUser.level>=4),t.R7$(),t.Y8G("ngIf",o.isEditMode),t.R7$(),t.Y8G("ngIf",!o.viewMode),t.R7$(4),t.JRh(t.bMT(44,71,"GPS Coordinates")),t.R7$(3),t.AVh("gps-captured",o.coordinates),t.Y8G("button",!o.viewMode),t.R7$(2),t.Y8G("color",o.coordinates?"success":"medium"),t.R7$(3),t.SpI(" ",o.coordinates?o.gpsFromLocation?t.bMT(52,73,"GPS Location from New Site"):t.bMT(53,75,"GPS Location Captured"):t.bMT(54,77,"Capture GPS Location")," "),t.R7$(4),t.Y8G("ngIf",!o.coordinates),t.R7$(),t.Y8G("ngIf",o.coordinates),t.R7$(),t.Y8G("ngIf",o.coordinates&&o.gpsFromLocation),t.R7$(4),t.JRh(t.bMT(62,79,"Site Information")),t.R7$(5),t.JRh(t.bMT(67,81,"Total Area of Restoration Site (m\xb2)")),t.R7$(2),t.Y8G("placeholder",t.bMT(69,83,"Optional")),t.R7$(4),t.JRh(t.bMT(73,85,"Area Restored (m\xb2)")),t.R7$(2),t.Y8G("placeholder",t.bMT(75,87,"Optional")),t.R7$(5),t.JRh(t.bMT(80,89,"Outplanting")),t.R7$(3),t.JRh(t.bMT(83,91,"Number of Individuals Outplanted per Species")),t.R7$(4),t.Y8G("ngForOf",o.mangroveSpecies),t.R7$(4),t.JRh(t.bMT(91,93,"Total")),t.R7$(3),t.Y8G("ngIf",o.isUpdatingProject&&o.lastReportData),t.R7$(),t.Y8G("value",o.individualsOutplantedTotal),t.R7$(4),t.JRh(t.bMT(99,95,"Growth Monitoring")),t.R7$(3),t.JRh(t.bMT(102,97,"Average Height per Species (cm)")),t.R7$(4),t.Y8G("ngForOf",o.mangroveSpecies),t.R7$(4),t.JRh(t.bMT(110,99,"Average Overall")),t.R7$(3),t.Y8G("ngIf",o.isUpdatingProject&&o.lastReportData),t.R7$(),t.Y8G("value",o.averageHeightOverall),t.R7$(6),t.JRh(t.bMT(120,101,"Mortality per Batch")),t.R7$(3),t.JRh(t.bMT(123,103,"Number of Dead/Failed Individuals")),t.R7$(4),t.Y8G("ngForOf",o.mangroveSpecies),t.R7$(4),t.JRh(t.bMT(131,105,"Total")),t.R7$(3),t.Y8G("ngIf",o.isUpdatingProject&&o.lastReportData),t.R7$(),t.Y8G("value",o.mortalityTotal),t.R7$(4),t.JRh(t.bMT(139,107,"Signs of Reproduction")),t.R7$(3),t.JRh(t.bMT(142,109,"Check if flowers or fruits are present")),t.R7$(4),t.Y8G("ngForOf",o.mangroveSpecies),t.R7$(4),t.JRh(t.bMT(150,111,"Species with Reproduction")),t.R7$(3),t.Y8G("ngIf",o.isUpdatingProject&&o.lastReportData),t.R7$(),t.Y8G("value",o.reproductionCount),t.R7$(4),t.JRh(t.bMT(158,113,"Additional Notes")),t.R7$(5),t.JRh(t.bMT(163,115,"Observations")),t.R7$(2),t.Y8G("placeholder",t.bMT(165,117,"Enter any observations about growth patterns, environmental conditions, or issues encountered")),t.R7$(2),t.Y8G("ngIf",!o.viewMode),t.R7$(),t.Y8G("ngIf",o.viewMode&&(null==o.currentUser?null:o.currentUser.level)>=4)}},dependencies:[b.Sq,b.bT,_.qT,_.me,_.Q0,_.BC,_.cb,_.VZ,_.vS,_.l_,_.j4,_.JD,_.$R,_.v8,g.Jm,g.QW,g.b_,g.I9,g.ME,g.HW,g.tN,g.eY,g.W9,g.eU,g.iq,g.$w,g.uz,g.he,g.JI,g.FH,g.IO,g.nc,g.BC,g.BY,g.ai,g.hB,g.su,g.Gw,g.el,g.T6,z.D],styles:[".outplanting-green[_ngcontent-%COMP%]{--background: #52a676;color:#fff}.outplanting-green[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{--color: white;transition:transform .2s}.outplanting-green[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]:hover{transform:translate(-4px)}.outplanting-green[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);width:100%;pointer-events:none}.outplanting-green.compact-toolbar[_ngcontent-%COMP%]{--min-height: 28px;--padding-top: 5px;--padding-bottom: 5px}.edit-mode-banner[_ngcontent-%COMP%]{padding:.75rem 1rem;margin:.5rem;border-radius:.5rem}.edit-mode-banner[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: .5rem;font-weight:600}.edit-mode-banner.editing[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffc107;display:flex;align-items:center;gap:.5rem;color:#856404;font-weight:500}.edit-mode-banner.editing[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.date-time-text[_ngcontent-%COMP%]{display:block;text-align:center;color:#fffffff2;font-size:14px;padding:0;margin:3px 0;font-weight:400;letter-spacing:.3px;line-height:1.2}.metadata-toolbar[_ngcontent-%COMP%]{--min-height: 40px;--padding-top: 6px;--padding-bottom: 6px}.metadata-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px;padding:0 12px;flex-wrap:wrap}.metadata-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;background:#ffffff26;border-radius:16px;padding:5px 10px;cursor:pointer;transition:all .2s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.metadata-item[_ngcontent-%COMP%]:active{transform:scale(.95);background:#ffffff40}.metadata-icon[_ngcontent-%COMP%]{font-size:14px;color:#ffffffe6;min-width:14px}.metadata-label[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:500;letter-spacing:.2px;white-space:nowrap;max-width:120px;overflow:hidden;text-overflow:ellipsis}.edit-location-link[_ngcontent-%COMP%]{color:#ffffffe6;font-size:11px;text-decoration:underline;cursor:pointer;margin-left:8px;padding:4px 8px}.edit-location-link[_ngcontent-%COMP%]:active{opacity:.7}.status-icon[_ngcontent-%COMP%]{font-size:14px;margin-left:2px}.status-icon.success[_ngcontent-%COMP%]{color:#52a676}.status-icon.required[_ngcontent-%COMP%]{color:#ffd93d;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}.progress-text[_ngcontent-%COMP%]{display:block;text-align:center;color:#fff;font-size:13px;padding:0;margin:0 0 4px;font-weight:400;line-height:1}ion-card[_ngcontent-%COMP%]{margin:16px;border-radius:12px;box-shadow:0 2px 8px #0000001a}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{border-radius:12px 12px 0 0;padding:16px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#fff}@media (min-width: 400px) and (max-width: 800px){ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.25rem}}@media (max-width: 399px) and (min-width: 360px){ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 359px){ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:.95rem}}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#fffffff2;font-size:.875rem;margin-top:4px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{background:#fff;padding:16px}.outplanting-header[_ngcontent-%COMP%]{--background: #D4A73C !important;--background-opacity: 1}.outplanting-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%], .outplanting-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#333}.growth-header[_ngcontent-%COMP%]{--background: #4fb3bf !important;--background-opacity: 1}.growth-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%], .growth-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#fff}.mortality-header[_ngcontent-%COMP%]{--background: #e76f51 !important;--background-opacity: 1}.mortality-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%], .mortality-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#333}.reproduction-header[_ngcontent-%COMP%]{--background: #4dbba7 !important;--background-opacity: 1}.reproduction-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%], .reproduction-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#333}.gps-card[_ngcontent-%COMP%]{margin:16px;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.gps-card[_ngcontent-%COMP%]   .gps-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;--background: #f8f9fa;--border-radius: 8px;margin:0;border-radius:8px;transition:all .2s ease}.gps-card[_ngcontent-%COMP%]   .gps-item[_ngcontent-%COMP%]:hover:not(.item-disabled){--background: #e9ecef;transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.gps-card[_ngcontent-%COMP%]   .gps-item.gps-captured[_ngcontent-%COMP%]{--background: #e8f5e9;border:1px solid #4caf50}.gps-card[_ngcontent-%COMP%]   .gps-item[_ngcontent-%COMP%]   .gps-icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background:#ffffffe6;margin:12px;box-shadow:0 2px 4px #0000001a}.gps-card[_ngcontent-%COMP%]   .gps-item[_ngcontent-%COMP%]   .gps-icon-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.gps-card[_ngcontent-%COMP%]   .gps-item[_ngcontent-%COMP%]   .gps-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#333;margin-bottom:4px}.gps-card[_ngcontent-%COMP%]   .gps-item[_ngcontent-%COMP%]   .gps-hint[_ngcontent-%COMP%]{display:flex;align-items:center;color:#666;font-size:.9rem}.gps-card[_ngcontent-%COMP%]   .gps-item[_ngcontent-%COMP%]   .gps-hint[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px;color:#999}.gps-card[_ngcontent-%COMP%]   .gps-item[_ngcontent-%COMP%]   .coordinates-text[_ngcontent-%COMP%]{display:flex;align-items:center;color:#52a676!important;font-weight:600;font-family:SF Mono,Monaco,Inconsolata,Roboto Mono,monospace;font-size:.9rem}.gps-card[_ngcontent-%COMP%]   .gps-item[_ngcontent-%COMP%]   .coordinates-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px;color:#52a676}.gps-card[_ngcontent-%COMP%]   .gps-item[_ngcontent-%COMP%]   .gps-source-hint[_ngcontent-%COMP%]{display:flex;align-items:center;color:#666;font-size:.8rem;font-style:italic;margin-top:4px}.gps-card[_ngcontent-%COMP%]   .gps-item[_ngcontent-%COMP%]   .gps-source-hint[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px;color:#999}.coordinates-text[_ngcontent-%COMP%]{color:#2e7d32!important;font-weight:600;font-family:SF Mono,Monaco,Inconsolata,Roboto Mono,monospace}.species-list[_ngcontent-%COMP%]{margin-top:8px}.species-row[_ngcontent-%COMP%]{margin-bottom:8px}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;--background: #f9f9f9;border-radius:8px;margin-bottom:8px}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .species-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex:1;min-width:170px}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .height-input-simple[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;text-align:center;max-width:140px;font-weight:500;margin-left:auto}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .height-input-simple.item-interactive[_ngcontent-%COMP%]{--background: #f5f5f5;--border-color: #ddd;--border-radius: 8px}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .height-input-simple[readonly][_ngcontent-%COMP%]{--background: transparent;pointer-events:none}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .input-with-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .input-with-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;--border-radius: 50%;width:36px;height:36px;--background: #e8f5e9;--color: #2e7d32}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .input-with-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .input-with-buttons[_ngcontent-%COMP%]   .height-input[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;text-align:center;max-width:100px;font-weight:500}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .input-with-buttons[_ngcontent-%COMP%]   .height-input.item-interactive[_ngcontent-%COMP%]{--background: #f5f5f5;--border-color: #ddd;--border-radius: 8px}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .input-with-buttons[_ngcontent-%COMP%]   .height-input[readonly][_ngcontent-%COMP%]{--background: transparent;pointer-events:none}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .input-with-buttons[_ngcontent-%COMP%]   .height-input[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .input-with-buttons[_ngcontent-%COMP%]   .height-input[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .input-with-buttons[_ngcontent-%COMP%]   .height-input[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;color:#0d3d2f;margin:0 0 4px;font-size:.95rem}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7c7a;font-size:.8rem;font-style:italic;margin:0}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:1.3rem;flex-shrink:0;margin-right:10px;cursor:pointer}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]:hover{opacity:.7}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--size: 24px;--border-radius: 4px;--checkbox-background-checked: #4fb3bf;--border-color-checked: #4fb3bf;--checkmark-color: white}.reproduction-checkboxes[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.reproduction-checkboxes[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.reproduction-checkboxes[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.9rem;color:#0d3d2f;margin:0}.reproduction-checkboxes[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--size: 24px;--border-radius: 4px;--checkbox-background-checked: #4fb3bf;--border-color-checked: #4fb3bf;--checkmark-color: white}.tally-control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.tally-control[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 4px;--padding-end: 4px;min-width:32px;height:32px;margin:0}.tally-control[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.tally-control[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:30px;text-align:center;font-weight:600;font-size:.95rem}.tally-control[_ngcontent-%COMP%]   .placeholder-value[_ngcontent-%COMP%]{color:#999;font-weight:400}.tally-control[_ngcontent-%COMP%]   .tally-input[_ngcontent-%COMP%]{width:50px;text-align:center;font-weight:600;font-size:.95rem;border:1px solid #ccc;border-radius:4px;padding:4px;appearance:textfield}.tally-control[_ngcontent-%COMP%]   .tally-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .tally-control[_ngcontent-%COMP%]   .tally-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.total-row[_ngcontent-%COMP%]{background:#e8f5f0!important;border-top:2px solid #52a676;margin-top:12px;padding:8px 0;--background: #e8f5f0}.total-row[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#52a676;font-size:1rem}.total-input[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;max-width:120px;text-align:center;font-weight:700;color:#52a676;border:2px solid #52a676;border-radius:6px;background:#fff;margin-left:8px}ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;margin-bottom:12px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:8px}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;border:1px solid #ddd;border-radius:8px;margin-top:4px}ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--padding-top: 12px;--padding-bottom: 12px}.form-buttons[_ngcontent-%COMP%]{padding:0 16px;margin-top:24px;margin-bottom:32px}.form-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:12px}.form-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-buttons[_ngcontent-%COMP%]   ion-button.save-draft-button[_ngcontent-%COMP%]{margin:10px 0 12px}.form-buttons[_ngcontent-%COMP%]   .save-draft-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-size:1rem;font-weight:500;--background: rgba(107, 124, 122, .1);--border-color: #6b7c7a;--color: #6b7c7a;--background-hover: rgba(107, 124, 122, .2);--background-activated: rgba(107, 124, 122, .3)}.form-buttons[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{margin:0;--border-radius: 8px;height:48px;font-size:1.125rem;font-weight:600;--background: #52a676;--background-hover: #458d63;--background-activated: #458d63}.form-buttons[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]:disabled{opacity:.5}.form-buttons[_ngcontent-%COMP%]   .discard-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-size:1rem;font-weight:500;--color: #e76f51;--border-color: #e76f51;--border-width: 2px;--background-hover: rgba(231, 111, 81, .1);--background-activated: rgba(231, 111, 81, .2);--ripple-color: rgba(231, 111, 81, .3)}.form-buttons[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{margin-top:20px;--background: #d32f2f;--background-hover: #b71c1c;--background-activated: #b71c1c;font-weight:600;height:48px;font-size:1rem}.submit-button[_ngcontent-%COMP%]{margin:24px 16px 32px;--border-radius: 8px;height:48px;font-size:1.125rem;font-weight:600;--background: #52a676;--background-hover: #458d63;--background-activated: #458d63}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.5}@media (max-width: 359px){.submit-button[_ngcontent-%COMP%]{font-size:1rem!important}}@media (max-width: 399px){.gps-title[_ngcontent-%COMP%]{font-size:.9rem!important}.gps-hint[_ngcontent-%COMP%], .coordinates-text[_ngcontent-%COMP%], .gps-source-hint[_ngcontent-%COMP%]{font-size:.75rem!important}}ion-error[_ngcontent-%COMP%]{color:#e76f51!important;font-size:.75rem!important;margin-top:4px;padding-left:16px}ion-item.item-disabled[_ngcontent-%COMP%], ion-item.item-interactive-disabled[_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important}ion-item.item-disabled[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-item.item-interactive-disabled[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{opacity:1!important;color:#000!important}  .item-disabled,   .item-interactive-disabled{opacity:1!important}  .item-disabled ion-label,   .item-disabled .label-text,   .item-disabled .native-input,   .item-disabled .select-text,   .item-disabled .select-icon,   .item-interactive-disabled ion-label,   .item-interactive-disabled .label-text,   .item-interactive-disabled .native-input,   .item-interactive-disabled .select-text,   .item-interactive-disabled .select-icon{opacity:1!important;color:#000!important}  ion-select.select-disabled{opacity:1!important}  ion-select.select-disabled .select-text,   ion-select.select-disabled .select-icon,   ion-select.select-disabled .select-placeholder{opacity:1!important;color:#000!important}  ion-toggle.toggle-disabled{opacity:1!important}  ion-checkbox.checkbox-disabled{opacity:1!important}  ion-input.input-disabled,   ion-textarea.textarea-disabled{opacity:1!important}  ion-input.input-disabled .native-input,   ion-input.input-disabled .native-textarea,   ion-textarea.textarea-disabled .native-input,   ion-textarea.textarea-disabled .native-textarea{opacity:1!important;color:#000!important;-webkit-text-fill-color:#000!important}  ion-content.view-mode ion-checkbox{pointer-events:none!important;cursor:default!important}  ion-content.view-mode .reproduction-checkboxes{pointer-events:none!important}.status-card[_ngcontent-%COMP%]{margin:16px;box-shadow:0 2px 8px #2d865926}.status-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.status-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#2d8659;font-size:1.1rem;font-weight:600}.status-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#666;font-size:.875rem;margin-top:4px}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{color:#2d8659;font-size:1.5rem;margin-right:8px}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.938rem;font-weight:500;color:#333;margin:0 0 4px}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.813rem;color:#666;margin:0}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{--handle-width: 26px;--handle-height: 26px;--handle-border-radius: 50%;--track-border-radius: 15px}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .status-note[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-top:12px;padding:8px 12px;background:#f0f9f4;border-radius:8px;font-size:.813rem;color:#2d8659}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .status-note.warning[_ngcontent-%COMP%]{background:#fff3e0;color:#e76f51}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .status-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1rem;flex-shrink:0}ion-toggle.restoration-toggle[_ngcontent-%COMP%]{--track-background: #e0e0e0;--track-background-checked: #e0e0e0;--handle-background: #ffffff;--handle-background-checked: #2d8659;--handle-border-radius: 50% !important;--track-border-radius: 15px !important}ion-toggle.restoration-toggle[_ngcontent-%COMP%]::part(handle){border-radius:50%!important}ion-toggle.restoration-toggle[_ngcontent-%COMP%]::part(track){border-radius:15px!important}.value-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.value-section.height-section[_ngcontent-%COMP%], .value-section.reproduction-section[_ngcontent-%COMP%]{gap:8px}.total-value-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.last-value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:4px 8px;background:#0000000d;border-radius:6px;min-width:60px}.last-value[_ngcontent-%COMP%]   .last-label[_ngcontent-%COMP%]{font-size:.7rem;color:#888;font-weight:500}.last-value[_ngcontent-%COMP%]   .last-number[_ngcontent-%COMP%]{font-size:.85rem;color:#666;font-weight:600}.last-value[_ngcontent-%COMP%]   .last-reproduction[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.last-value.reproduction-last[_ngcontent-%COMP%]{min-width:auto}@media (max-width: 768px){.total-input[_ngcontent-%COMP%]{max-width:100px;font-size:.9rem}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.85rem}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}ion-card[_ngcontent-%COMP%]{margin:12px}.status-card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{font-size:.8rem!important}.status-card[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem!important}.status-card[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem!important}.status-card[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{color:#888;font-size:.7rem!important;font-style:italic;margin-top:12px}.value-section[_ngcontent-%COMP%]{gap:8px}.last-value[_ngcontent-%COMP%]{min-width:50px;padding:3px 6px}.last-value[_ngcontent-%COMP%]   .last-label[_ngcontent-%COMP%]{font-size:.65rem}.last-value[_ngcontent-%COMP%]   .last-number[_ngcontent-%COMP%]{font-size:.8rem}}@media (max-width: 480px){ion-card[_ngcontent-%COMP%]{margin:8px}ion-card-content[_ngcontent-%COMP%]{padding:12px 8px!important}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 4px;--inner-padding-end: 4px}.species-info[_ngcontent-%COMP%]{min-width:100px!important;gap:4px!important}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.8rem}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem}.info-icon[_ngcontent-%COMP%]{font-size:1rem!important}.tally-control[_ngcontent-%COMP%]{gap:4px}.tally-control[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{min-width:28px;height:28px}.tally-control[_ngcontent-%COMP%]   .tally-input[_ngcontent-%COMP%]{width:40px;padding:2px;font-size:.85rem}.height-input-simple[_ngcontent-%COMP%]{max-width:100px!important;font-size:.85rem}.value-section[_ngcontent-%COMP%]{gap:6px}.last-value[_ngcontent-%COMP%]{min-width:50px;padding:2px 4px}.last-value[_ngcontent-%COMP%]   .last-label[_ngcontent-%COMP%]{font-size:.6rem}.last-value[_ngcontent-%COMP%]   .last-number[_ngcontent-%COMP%]{font-size:.75rem}.total-row[_ngcontent-%COMP%]{--padding-end: 10px}.total-row[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.9rem}.total-input[_ngcontent-%COMP%]{max-width:90px!important}.reproduction-section[_ngcontent-%COMP%]{flex-wrap:wrap;gap:4px}.reproduction-checkboxes[_ngcontent-%COMP%]{gap:8px}.reproduction-checkboxes[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--size: 18px}.reproduction-checkboxes[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.75rem}}"]}))}return i(),c})(),wt=(()=>{var i;class c{constructor(e){this.modalController=e,this.currentIndex=0,this.rotatedImages=new Set(["assets/mangroves/Red mangrove1.webp","assets/mangroves/Red mangrove2.webp","assets/mangroves/White mangrove2.webp","assets/mangroves/Black mangrove.webp","assets/mangroves/Oriental mangrove1.webp","assets/mangroves/Oriental mangrove2.webp","assets/mangroves/Puzzlenut mangrove.webp","assets/mangroves/Yellow mangrove1.webp","assets/mangroves/Yellow mangrove2.webp","assets/mangroves/Apple mangrove.webp"])}isCurrentImageRotated(){return this.rotatedImages.has(this.getCurrentImage())}getImages(){return Array.isArray(this.species.imagePath)?this.species.imagePath:[this.species.imagePath]}getCurrentImage(){return this.getImages()[this.currentIndex]||""}next(){const e=this.getImages();this.currentIndex=(this.currentIndex+1)%e.length}previous(){const e=this.getImages();this.currentIndex=(this.currentIndex-1+e.length)%e.length}goTo(e){this.currentIndex=e}dismiss(){this.modalController.dismiss()}static#t=i=()=>(this.\u0275fac=function(n){return new(n||c)(t.rXU(g.W3))},this.\u0275cmp=t.VBU({type:c,selectors:[["mangrove-info-modal"]],decls:18,vars:8,consts:[["slot","end"],[3,"click"],["name","close","slot","icon-only"],[1,"ion-padding"],[1,"popover-content"],[1,"common-name"],[1,"latin-name"],[1,"slideshow-container"],[1,"image-wrapper"],["appPinchZoom","",1,"mangrove-image",3,"src","alt"],["class","slideshow-controls",4,"ngIf"],[1,"slideshow-controls"],[1,"nav-button",3,"click"],["name","chevron-back"],[1,"slideshow-indicators"],["class","indicator-dot",3,"active","click",4,"ngFor","ngForOf"],["name","chevron-forward"],[1,"indicator-dot",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s(),t.j41(4,"ion-buttons",0)(5,"ion-button",1),t.bIt("click",function(){return o.dismiss()}),t.nrm(6,"ion-icon",2),t.k0s()()()(),t.j41(7,"ion-content",3)(8,"div",4)(9,"p",5),t.EFF(10),t.k0s(),t.j41(11,"p",6)(12,"em"),t.EFF(13),t.k0s()(),t.j41(14,"div",7)(15,"div",8),t.nrm(16,"img",9),t.k0s(),t.DNE(17,Rt,7,1,"div",10),t.k0s()()()),2&n&&(t.R7$(3),t.JRh(o.species.scientificName),t.R7$(7),t.JRh(o.species.commonName),t.R7$(3),t.JRh(o.species.latinName),t.R7$(2),t.AVh("rotated-wrapper",o.isCurrentImageRotated()),t.R7$(),t.Y8G("src",o.getCurrentImage(),t.B4B)("alt",o.species.scientificName),t.R7$(),t.Y8G("ngIf",o.getImages().length>1))},dependencies:[g.bv,g.Jm,g.QW,g.W9,g.eU,g.iq,g.BC,g.ai,b.MD,b.Sq,b.bT,y.h],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #52a676;--color: white}ion-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600}ion-button[_ngcontent-%COMP%]{--color: white}ion-content[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0}.popover-content[_ngcontent-%COMP%]{text-align:center;height:100%;display:flex;flex-direction:column;justify-content:flex-start;padding-top:20px;min-height:0;overflow:hidden}.common-name[_ngcontent-%COMP%]{margin:16px 16px 8px;font-size:16px;color:#666;font-weight:500}.latin-name[_ngcontent-%COMP%]{margin:0 16px 16px;font-size:14px;color:#888}.slideshow-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;min-height:0;overflow:hidden}.image-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;min-height:0;width:100%;overflow:hidden;position:relative}.mangrove-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;image-orientation:none}@media screen and (max-width: 768px){.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]{transform:rotate(-90deg);width:auto;height:100%}.mangrove-image[_ngcontent-%COMP%]{touch-action:none;user-select:none;-webkit-user-select:none}}@media screen and (min-width: 769px){.mangrove-image[_ngcontent-%COMP%]{margin-top:-20px;transition:transform .2s ease,filter .2s ease}.mangrove-image[_ngcontent-%COMP%]:hover{transform:scale(1.02);filter:brightness(1.1)}.mangrove-image[_ngcontent-%COMP%]:active{transform:scale(.98)}.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]   .mangrove-image[_ngcontent-%COMP%]{transform:rotate(-90deg);max-width:none;max-height:none;height:100%;width:auto;position:absolute;margin-top:0}.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]   .mangrove-image[_ngcontent-%COMP%]:hover{transform:rotate(-90deg) scale(1.02)}.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]   .mangrove-image[_ngcontent-%COMP%]:active{transform:rotate(-90deg) scale(.98)}}.slideshow-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:8px 0}.nav-button[_ngcontent-%COMP%]{background:#52a67626;border:none;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.nav-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#52a676}.nav-button[_ngcontent-%COMP%]:hover{background:#52a67640}.nav-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.slideshow-indicators[_ngcontent-%COMP%]{display:flex;gap:8px}.indicator-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:#52a67640;cursor:pointer;transition:all .3s ease}.indicator-dot.active[_ngcontent-%COMP%]{background:#52a676;transform:scale(1.3)}.indicator-dot[_ngcontent-%COMP%]:hover{background:#52a67680}"]}))}return i(),c})();const It=[{path:"",component:Ft}];let jt=(()=>{var i;class c{static#t=i=()=>(this.\u0275fac=function(n){return new(n||c)},this.\u0275mod=t.$C({type:c}),this.\u0275inj=d.G2t({imports:[M.iI.forChild(It),M.iI]}))}return i(),c})();var Tt=h(4670);let Dt=(()=>{var i;class c{static#t=i=()=>(this.\u0275fac=function(n){return new(n||c)},this.\u0275mod=t.$C({type:c}),this.\u0275inj=d.G2t({imports:[b.MD,_.YN,_.X1,g.bv,jt,Tt.k]}))}return i(),c})()},7314(F,x,h){h.d(x,{D:()=>g});var b=h(3664),_=h(6845);let g=(()=>{var M;class m{constructor(P){this.translationService=P}transform(P){return this.translationService.t(P)}static#t=M=()=>(this.\u0275fac=function(y){return new(y||m)(b.rXU(_.L,16))},this.\u0275pipe=b.EJ8({name:"t",type:m,pure:!1}))}return M(),m})()}}]);