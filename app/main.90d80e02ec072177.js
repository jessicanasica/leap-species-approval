(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{177(Wt,ut,b){"use strict";b.d(ut,{AJ:()=>S,Xr:()=>Je});var s=b(2615);const S="browser";let Je=(()=>{class be{static \u0275prov=(0,s.jDH)({token:be,providedIn:"root",factory:()=>new me((0,s.WQX)(s.qQL),window)})}return be})();class me{document;window;offset=()=>[0,0];constructor(We,Se){this.document=We,this.window=Se}setOffset(We){this.offset=Array.isArray(We)?()=>We:We}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(We,Se){this.window.scrollTo({...Se,left:We[0],top:We[1]})}scrollToAnchor(We,Se){const et=function ie(be,We){const Se=be.getElementById(We)||be.getElementsByName(We)[0];if(Se)return Se;if("function"==typeof be.createTreeWalker&&be.body&&"function"==typeof be.body.attachShadow){const et=be.createTreeWalker(be.body,NodeFilter.SHOW_ELEMENT);let St=et.currentNode;for(;St;){const Xt=St.shadowRoot;if(Xt){const vn=Xt.getElementById(We)||Xt.querySelector(`[name="${We}"]`);if(vn)return vn}St=et.nextNode()}}return null}(this.document,We);et&&(this.scrollToElement(et,Se),et.focus())}setHistoryScrollRestoration(We){try{this.window.history.scrollRestoration=We}catch{console.warn((0,s.OsK)(2400,!1))}}scrollToElement(We,Se){const et=We.getBoundingClientRect(),St=et.left+this.window.pageXOffset,Xt=et.top+this.window.pageYOffset,vn=this.offset();this.window.scrollTo({...Se,left:St-vn[0],top:Xt-vn[1]})}}},274(Wt,ut,b){"use strict";b.d(ut,{H:()=>S});var s=b(1397),o=b(8071);function S(Pe,Ce){return(0,o.T)(Ce)?(0,s.Z)(Pe,Ce,1):(0,s.Z)(Pe,1)}},467(Wt,ut,b){"use strict";function s(S,Pe,Ce,k,Le,Je,me){try{var ie=S[Je](me),we=ie.value}catch(l){return void Ce(l)}ie.done?Pe(we):Promise.resolve(we).then(k,Le)}function o(S){return function(){var Pe=this,Ce=arguments;return new Promise(function(k,Le){var Je=S.apply(Pe,Ce);function me(we){s(Je,k,Le,me,ie,"next",we)}function ie(we){s(Je,k,Le,me,ie,"throw",we)}me(void 0)})}}b.d(ut,{A:()=>o})},499(Wt,ut,b){"use strict";b.r(ut),b.d(ut,{iosTransitionAnimation:()=>m,shadow:()=>Je});var s=b(2541),o=b(1841);b(5705),b(9596),b(4674);const Le=_=>document.querySelector(`${_}.ion-cloned-element`),Je=_=>_.shadowRoot||_,me=_=>{const D="ION-TABS"===_.tagName?_:_.querySelector("ion-tabs"),L="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=D){const K=D.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=K?K.querySelector(L):null}return _.querySelector(L)},ie=(_,D)=>{const L="ION-TABS"===_.tagName?_:_.querySelector("ion-tabs");let K=[];if(null!=L){const ae=L.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ae&&(K=ae.querySelectorAll("ion-buttons"))}else K=_.querySelectorAll("ion-buttons");for(const ae of K){const B=ae.closest("ion-header"),Z=B&&!B.classList.contains("header-collapse-condense-inactive"),G=ae.querySelector("ion-back-button"),he=ae.classList.contains("buttons-collapse");if(null!==G&&("start"===ae.slot||""===ae.slot)&&(he&&Z&&D||!he))return G}return null},l=(_,D,L,K,ae,B,Z,G,he)=>{var fe,_e;const Re=D?`calc(100% - ${ae.right+4}px)`:ae.left-4+"px",ve=D?"right":"left",Ye=D?"left":"right",ge=D?"right":"left";let nt=1,ze=1,Fe=`scale(${ze})`;const xe="scale(1)";if(B&&Z){const en=(null===(fe=B.textContent)||void 0===fe?void 0:fe.trim())===(null===(_e=G.textContent)||void 0===_e?void 0:_e.trim());nt=he.width/Z.width,ze=(he.height-v)/Z.height,Fe=en?`scale(${nt}, ${ze})`:`scale(${ze})`}const Ve=Je(K).querySelector("ion-icon").getBoundingClientRect(),Ae=D?Ve.width/2-(Ve.right-ae.right)+"px":ae.left-Ve.width/2+"px",H=D?`-${window.innerWidth-ae.right}px`:`${ae.left}px`,ye=`${he.top}px`,Me=`${ae.top}px`,pt=L?[{offset:0,transform:`translate3d(${H}, ${Me}, 0)`},{offset:1,transform:`translate3d(${Ae}, ${ye}, 0)`}]:[{offset:0,transform:`translate3d(${Ae}, ${ye}, 0)`},{offset:1,transform:`translate3d(${H}, ${Me}, 0)`}],Ut=L?[{offset:0,opacity:1,transform:xe},{offset:1,opacity:0,transform:Fe}]:[{offset:0,opacity:0,transform:Fe},{offset:1,opacity:1,transform:xe}],ht=L?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],Nt=(0,s.c)(),Ot=(0,s.c)(),on=(0,s.c)(),ft=Le("ion-back-button"),yt=Je(ft).querySelector(".button-text"),Dt=Je(ft).querySelector("ion-icon");ft.text=K.text,ft.mode=K.mode,ft.icon=K.icon,ft.color=K.color,ft.disabled=K.disabled,ft.style.setProperty("display","block"),ft.style.setProperty("position","fixed"),Ot.addElement(Dt),Nt.addElement(yt),on.addElement(ft),on.beforeStyles({position:"absolute",top:"0px",[ge]:"0px"}).beforeAddWrite(()=>{K.style.setProperty("display","none"),ft.style.setProperty(ve,Re)}).afterAddWrite(()=>{K.style.setProperty("display",""),ft.style.setProperty("display","none"),ft.style.removeProperty(ve)}).keyframes(pt),Nt.beforeStyles({"transform-origin":`${ve} top`}).keyframes(Ut),Ot.beforeStyles({"transform-origin":`${Ye} center`}).keyframes(ht),_.addAnimation([Nt,Ot,on])},p=(_,D,L,K,ae,B,Z,G,he)=>{var fe,_e;const Re=D?"right":"left",ve=D?`calc(100% - ${ae.right}px)`:`${ae.left}px`,ge=`${ae.top}px`;let ze=D?`-${window.innerWidth-Z.right-8}px`:`${Z.x+8}px`,Fe=.5;const xe="scale(1)";let rt=`scale(${Fe})`;if(G&&he){ze=D?`-${window.innerWidth-he.right-8}px`:he.x-8+"px";const At=(null===(fe=G.textContent)||void 0===fe?void 0:fe.trim())===(null===(_e=K.textContent)||void 0===_e?void 0:_e.trim());Fe=he.height/(B.height-v),rt=At?`scale(${he.width/B.width}, ${Fe})`:`scale(${Fe})`}const H=Z.top+Z.height/2-ae.height*Fe/2+"px",He=L?[{offset:0,opacity:0,transform:`translate3d(${ze}, ${H}, 0) ${rt}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${ge}, 0) ${xe}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${ge}, 0) ${xe}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ze}, ${H}, 0) ${rt}`}],ot=Le("ion-title"),pt=(0,s.c)();ot.innerText=K.innerText,ot.size=K.size,ot.color=K.color,pt.addElement(ot),pt.beforeStyles({"transform-origin":`${Re} top`,height:`${ae.height}px`,display:"",position:"relative",[Re]:ve}).beforeAddWrite(()=>{K.style.setProperty("opacity","0")}).afterAddWrite(()=>{K.style.setProperty("opacity",""),ot.style.setProperty("display","none")}).keyframes(He),_.addAnimation(pt)},m=(_,D)=>{var L;try{const K="cubic-bezier(0.32,0.72,0,1)",ae="opacity",B="transform",he="rtl"===_.ownerDocument.dir,fe=he?"-99.5%":"99.5%",_e=he?"33%":"-33%",Re=D.enteringEl,ve=D.leavingEl,Ye="back"===D.direction,ge=Re.querySelector(":scope > ion-content"),nt=Re.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),ze=Re.querySelectorAll(":scope > ion-header > ion-toolbar"),Fe=(0,s.c)(),xe=(0,s.c)();if(Fe.addElement(Re).duration((null!==(L=D.duration)&&void 0!==L?L:0)||540).easing(D.easing||K).fill("both").beforeRemoveClass("ion-page-invisible"),ve&&null!=_){const H=(0,s.c)();H.addElement(_),Fe.addAnimation(H)}if(ge||0!==ze.length||0!==nt.length?(xe.addElement(ge),xe.addElement(nt)):xe.addElement(Re.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Fe.addAnimation(xe),Ye?xe.beforeClearStyles([ae]).fromTo("transform",`translateX(${_e})`,"translateX(0%)").fromTo(ae,.8,1):xe.beforeClearStyles([ae]).fromTo("transform",`translateX(${fe})`,"translateX(0%)"),ge){const H=Je(ge).querySelector(".transition-effect");if(H){const ye=H.querySelector(".transition-cover"),Me=H.querySelector(".transition-shadow"),He=(0,s.c)(),ot=(0,s.c)(),pt=(0,s.c)();He.addElement(H).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),ot.addElement(ye).beforeClearStyles([ae]).fromTo(ae,0,.1),pt.addElement(Me).beforeClearStyles([ae]).fromTo(ae,.03,.7),He.addAnimation([ot,pt]),xe.addAnimation([He])}}const rt=Re.querySelector("ion-header.header-collapse-condense"),{forward:Ve,backward:Ae}=((_,D,L,K,ae)=>{const B=ie(K,L),Z=me(ae),G=me(K),he=ie(ae,L),fe=null!==B&&null!==Z&&!L,_e=null!==G&&null!==he&&L;if(fe){const Re=Z.getBoundingClientRect(),ve=B.getBoundingClientRect(),Ye=Je(B).querySelector(".button-text"),ge=Ye?.getBoundingClientRect(),ze=Je(Z).querySelector(".toolbar-title").getBoundingClientRect();p(_,D,L,Z,Re,ze,ve,Ye,ge),l(_,D,L,B,ve,Ye,ge,Z,ze)}else if(_e){const Re=G.getBoundingClientRect(),ve=he.getBoundingClientRect(),Ye=Je(he).querySelector(".button-text"),ge=Ye?.getBoundingClientRect(),ze=Je(G).querySelector(".toolbar-title").getBoundingClientRect();p(_,D,L,G,Re,ze,ve,Ye,ge),l(_,D,L,he,ve,Ye,ge,G,ze)}return{forward:fe,backward:_e}})(Fe,he,Ye,Re,ve);if(ze.forEach(H=>{const ye=(0,s.c)();ye.addElement(H),Fe.addAnimation(ye);const Me=(0,s.c)();Me.addElement(H.querySelector("ion-title"));const He=(0,s.c)(),ot=Array.from(H.querySelectorAll("ion-buttons,[menuToggle]")),pt=H.closest("ion-header"),At=pt?.classList.contains("header-collapse-condense-inactive");let vt;vt=ot.filter(Ye?Nt=>{const Ot=Nt.classList.contains("buttons-collapse");return Ot&&!At||!Ot}:Nt=>!Nt.classList.contains("buttons-collapse")),He.addElement(vt);const Ut=(0,s.c)();Ut.addElement(H.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const dt=(0,s.c)();dt.addElement(Je(H).querySelector(".toolbar-background"));const Bt=(0,s.c)(),ht=H.querySelector("ion-back-button");if(ht&&Bt.addElement(ht),ye.addAnimation([Me,He,Ut,dt,Bt]),He.fromTo(ae,.01,1),Ut.fromTo(ae,.01,1),Ye)At||Me.fromTo("transform",`translateX(${_e})`,"translateX(0%)").fromTo(ae,.01,1),Ut.fromTo("transform",`translateX(${_e})`,"translateX(0%)"),Bt.fromTo(ae,.01,1);else if(rt||Me.fromTo("transform",`translateX(${fe})`,"translateX(0%)").fromTo(ae,.01,1),Ut.fromTo("transform",`translateX(${fe})`,"translateX(0%)"),dt.beforeClearStyles([ae,"transform"]),pt?.translucent?dt.fromTo("transform",he?"translateX(-100%)":"translateX(100%)","translateX(0px)"):dt.fromTo(ae,.01,"var(--opacity)"),Ve||Bt.fromTo(ae,.01,1),ht&&!Ve){const Ot=(0,s.c)();Ot.addElement(Je(ht).querySelector(".button-text")).fromTo("transform",he?"translateX(-100px)":"translateX(100px)","translateX(0px)"),ye.addAnimation(Ot)}}),ve){const H=(0,s.c)(),ye=ve.querySelector(":scope > ion-content"),Me=ve.querySelectorAll(":scope > ion-header > ion-toolbar"),He=ve.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(ye||0!==Me.length||0!==He.length?(H.addElement(ye),H.addElement(He)):H.addElement(ve.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Fe.addAnimation(H),Ye){H.beforeClearStyles([ae]).fromTo("transform","translateX(0%)",he?"translateX(-100%)":"translateX(100%)");const ot=(0,o.g)(ve);Fe.afterAddWrite(()=>{"normal"===Fe.getDirection()&&ot.style.setProperty("display","none")})}else H.fromTo("transform","translateX(0%)",`translateX(${_e})`).fromTo(ae,1,.8);if(ye){const ot=Je(ye).querySelector(".transition-effect");if(ot){const pt=ot.querySelector(".transition-cover"),At=ot.querySelector(".transition-shadow"),vt=(0,s.c)(),Ut=(0,s.c)(),dt=(0,s.c)();vt.addElement(ot).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Ut.addElement(pt).beforeClearStyles([ae]).fromTo(ae,.1,0),dt.addElement(At).beforeClearStyles([ae]).fromTo(ae,.7,.03),vt.addAnimation([Ut,dt]),H.addAnimation([vt])}}Me.forEach(ot=>{const pt=(0,s.c)();pt.addElement(ot);const At=(0,s.c)();At.addElement(ot.querySelector("ion-title"));const vt=(0,s.c)(),Ut=ot.querySelectorAll("ion-buttons,[menuToggle]"),dt=ot.closest("ion-header"),Bt=dt?.classList.contains("header-collapse-condense-inactive"),ht=Array.from(Ut).filter(Dt=>{const en=Dt.classList.contains("buttons-collapse");return en&&!Bt||!en});vt.addElement(ht);const Nt=(0,s.c)(),Ot=ot.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Ot.length>0&&Nt.addElement(Ot);const on=(0,s.c)();on.addElement(Je(ot).querySelector(".toolbar-background"));const ft=(0,s.c)(),yt=ot.querySelector("ion-back-button");if(yt&&ft.addElement(yt),pt.addAnimation([At,vt,Nt,ft,on]),Fe.addAnimation(pt),ft.fromTo(ae,.99,0),vt.fromTo(ae,.99,0),Nt.fromTo(ae,.99,0),Ye){if(Bt||At.fromTo("transform","translateX(0%)",he?"translateX(-100%)":"translateX(100%)").fromTo(ae,.99,0),Nt.fromTo("transform","translateX(0%)",he?"translateX(-100%)":"translateX(100%)"),on.beforeClearStyles([ae,"transform"]),dt?.translucent?on.fromTo("transform","translateX(0px)",he?"translateX(-100%)":"translateX(100%)"):on.fromTo(ae,"var(--opacity)",0),yt&&!Ae){const en=(0,s.c)();en.addElement(Je(yt).querySelector(".button-text")).fromTo("transform","translateX(0%)",`translateX(${(he?-124:124)+"px"})`),pt.addAnimation(en)}}else Bt||At.fromTo("transform","translateX(0%)",`translateX(${_e})`).fromTo(ae,.99,0).afterClearStyles([B,ae]),Nt.fromTo("transform","translateX(0%)",`translateX(${_e})`).afterClearStyles([B,ae]),ft.afterClearStyles([ae]),At.afterClearStyles([ae]),vt.afterClearStyles([ae])})}return Fe}catch(K){throw K}},v=10},591(Wt,ut,b){"use strict";function s(o){return new TypeError(`You provided ${null!==o&&"object"==typeof o?"an invalid object":`'${o}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}b.d(ut,{L:()=>s})},752(Wt,ut,b){"use strict";b.d(ut,{P:()=>Je});var s=b(467),o=b(2084),S=b(2615),Pe=b(918),Ce=b(5029),k=b(4938),Le=b(8863);let Je=(()=>{var me;class ie{constructor(l,p,m,v){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=v,this.REPORTS_BUCKET="biomass",this.IMAGES_BUCKET="biomass-images",this.DRAFT_FILE="biomass_draft_current.json",this.PENDING_QUEUE_FILE="biomass_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} BiomassSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} BiomassSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(_=>console.error("\u274c BiomassSyncService: processPendingQueue failed:",_))}),setTimeout(()=>{console.log("\u{1f680} BiomassSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(_=>console.error("\u274c BiomassSyncService: Initial queue check failed:",_))},6e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 BiomassSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(_=>console.error("\u274c BiomassSyncService: Periodic queue check failed:",_))},3e5),console.log("\u2705 BiomassSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Biomass${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];return l?.vegetationType&&m.push(`Vegetation: ${l.vegetationType}`),l?.biomassEstimate&&m.push(`Biomass: ${l.biomassEstimate}`),l?.samplingMethod&&m.push(`Method: ${l.samplingMethod}`),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"biomass"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",v=l?.quadNumber||"";let _=`biomass_draft_${p}`;return m&&(_+=`_zone${m}`),v&&(_+=`_quad${v}`),`${_}.json`}dataUrlToBlob(l){return(0,s.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,s.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,s.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("BiomassSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=l.reportId||p.generateReportId(),_={reportId:v,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos||[],status:l.status||{incomplete:!0,sent:!1,pending:!1}},D=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(D,_);const L=yield p.sharedDataService.readJsonFile(D);if(!L||L.reportId!==_.reportId)throw new Error("BiomassSyncService: draft verification failed");const K=yield p.storage.getUser(),ae=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(K?.username||"unknown","biomass",v,ae)})()}loadDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,s.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(_=>_.startsWith("biomass_draft_")),v=[];for(const _ of m)try{const D=yield l.sharedDataService.readJsonFile(_);if(D){const L=l.getLocationLabelFromFilename(_,D.form);v.push({draft:D,locationLabel:L})}}catch(D){console.warn("BiomassSyncService: Failed to read draft file",_,D)}return v})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,s.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,s.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:v}of m)p.push({report:v,status:"draft"});try{const _=(yield l.sharedDataService.listFiles()).filter(D=>{if(!D.startsWith("Biomass")||D.includes("_report_"))return!1;const L=D.replace(".json","");return/^Biomass\d{8}_\d{6}$/.test(L)&&!D.includes("_backup")&&!D.includes("_draft")&&!D.includes("_queue")});for(const D of _)try{const L=yield l.sharedDataService.readJsonFile(D);L&&p.push({report:L,status:L.status.sent?"submitted":"pending"})}catch(L){console.warn("BiomassSyncService: Failed to read report file",D,L)}}catch(v){console.error("BiomassSyncService: Failed to list files:",v)}return p.sort((v,_)=>{const D=new Date(v.report.updatedAt||v.report.createdAt).getTime();return new Date(_.report.updatedAt||_.report.createdAt).getTime()-D}),p})()}submitFinal(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=!0===l.isEditMode,_=l.existingReportId||p.generateReportId(),D={reportId:_,createdAt:m,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:[...l.photos||[]],status:{incomplete:!1,sent:!1,pending:!1}};v&&(D.editedAt=m);const L=`${_}.json`;yield p.sharedDataService.writeJsonFile(L,D);const K=yield p.sharedDataService.readJsonFile(L);if(!K||K.reportId!==_)throw new Error("BiomassSyncService: local report verification failed");const ae=yield p.storage.getUser(),B=ae?ae.organization||ae.username:null;let Z;if(l.originalSubmittedBy&&B&&l.originalSubmittedBy!==B?Z=`${l.originalSubmittedBy}, ${B}`:B&&(Z=B),D.submittedBy=Z,yield p.sharedDataService.writeJsonFile(L,D),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:_,localReportFile:L}),{reportId:_,queued:!0};try{yield p.uploadReportAndImages(D,l.originalSubmittedBy),D.status.sent=!0,D.status.pending=!1,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.clearDraft();const fe=(yield p.storage.getUser())?.username||"unknown",_e=p.getFormSummary(l.formValue),Re=D.submittedBy;return v?p.monitoringLog.recordFormEdited(fe,"biomass",_,!1,_e,Re):p.monitoringLog.recordFormSubmitted(fe,"biomass",_,!1,_e,Re),{reportId:_,queued:!1}}catch(he){const fe=String(he?.message?he.message:he);D.status.pending=!0,D.status.lastError=fe,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.enqueuePending({reportId:_,localReportFile:L});const Re=(yield p.storage.getUser())?.username||"unknown",ve=p.getFormSummary(l.formValue),Ye=D.submittedBy;return v?p.monitoringLog.recordFormEdited(Re,"biomass",_,!0,ve,Ye):p.monitoringLog.recordFormSubmitted(Re,"biomass",_,!0,ve,Ye),{reportId:_,queued:!0}}})()}enqueuePending(l){var p=this;return(0,s.A)(function*(){console.log("\u{1f4dd} BiomassSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(_=>_.reportId===l.reportId)?console.log("\u26a0\ufe0f BiomassSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 BiomassSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} BiomassSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,s.A)(function*(){if(console.log("\u{1f504} BiomassSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f BiomassSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f BiomassSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} BiomassSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 BiomassSyncService: Queue is empty, nothing to process");const m=[];for(const v of p.items){console.log("\u{1f50d} BiomassSyncService: Processing item:",v.reportId,"(attempt",v.attempts+1,")");try{const _=yield l.sharedDataService.readJsonFile(v.localReportFile);if(!_){console.error("\u274c BiomassSyncService: Local report file missing for",v.reportId),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(_),console.log("\u2705 BiomassSyncService: Upload succeeded for",v.reportId),_.status.sent=!0,_.status.pending=!1,_.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(v.localReportFile,_),console.log("\u{1f4be} BiomassSyncService: Marked report as sent")}catch(_){console.error("\u274c BiomassSyncService: Upload failed for",v.reportId,":",_),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} BiomassSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} BiomassSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,s.A)(function*(){console.log("\u{1f4e4} BiomassSyncService: Starting upload for report",l.reportId);const v=m.getClient(),_=[];for(let _e=0;_e<(l.photos||[]).length;_e++){const Re=l.photos[_e],ve=yield m.uploadImageDataUrl(`${l.reportId}/photo_${_e+1}.jpg`,Re);_.push(ve)}const D=JSON.parse(JSON.stringify(l));D.photos=_,D.status={incomplete:!1,sent:!0,pending:!1};const L=`${l.reportId}.json`,K=new Blob([JSON.stringify(D)],{type:"application/json"}),{error:ae}=yield v.storage.from(m.REPORTS_BUCKET).upload(L,K,{contentType:"application/json",upsert:!0});if(ae)throw console.error("\u274c BiomassSyncService: JSON upload error:",ae),ae;console.log("\u2705 BiomassSyncService: Successfully uploaded JSON to",L);const B=yield m.storage.getUser(),Z=B?B.organization||B.username:null;let G;G=p&&Z&&p!==Z?`${p}, ${Z}`:Z;const he={report_id:l.reportId,submitted_by:G,json_path:L,location:l.form.location||null,Biomass_date:l.form.observationDate||null,zone_number:l.form.zoneNumber?`Zone ${l.form.zoneNumber}`:null,quad_number:l.form.quadNumber?`Quad ${l.form.quadNumber.replace(/\D/g,"")}`:null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:fe}=yield v.from("biomass_reports").upsert(he,{onConflict:"report_id"});if(fe)throw console.error("\u274c BiomassSyncService: Database upsert error:",fe),fe;console.log("\u2705 BiomassSyncService: Successfully upserted into Biomass_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,s.A)(function*(){const v=m.getClient(),_=yield m.dataUrlToBlob(p),{error:D}=yield v.storage.from(m.IMAGES_BUCKET).upload(l,_,{contentType:_.type||"image/jpeg",upsert:!0});if(D)throw console.error("\u274c BiomassSyncService: Image upload error for",l,":",D),D;return console.log("\u2705 BiomassSyncService: Successfully uploaded image to",l),l})()}static#e=me=()=>(this.\u0275fac=function(p){return new(p||ie)(S.KVO(Pe.H),S.KVO(Ce.L),S.KVO(k.w),S.KVO(Le.u))},this.\u0275prov=S.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return me(),ie})()},918(Wt,ut,b){"use strict";b.d(ut,{H:()=>Ce});var s=b(467),o=b(5083),S=b(2739),Pe=b(2615);let Ce=(()=>{var k;class Le{constructor(){this.dbName="leapWetlandDatabase",this.dbVersion=1,this.defaultStoreName="leapDataStore",this.storesToEnsure=["leapDataStore","uploadProgress","pending_forms_metadata"],this.dbOpenPromise=null}isMobileFilesystemPlatform(){return(0,s.A)(function*(){const me=o.Ii.getPlatform();return"ios"===me||"android"===me})()}openDb(){var me=this;return(0,s.A)(function*(){return me.dbOpenPromise||(me.dbOpenPromise=new Promise((ie,we)=>{const l=indexedDB.open(me.dbName,me.dbVersion);l.onupgradeneeded=p=>{const m=p.target.result;me.storesToEnsure.forEach(v=>{m.objectStoreNames.contains(v)||m.createObjectStore(v,{keyPath:"fileName"})})},l.onsuccess=p=>{const m=p.target.result;m.onclose=()=>{me.dbOpenPromise=null},m.onversionchange=()=>{try{m.close()}finally{me.dbOpenPromise=null}},ie(m)},l.onerror=p=>{we(p.target.error)},l.onblocked=()=>{we(new Error("IndexedDB open blocked"))}})),me.dbOpenPromise})()}checkAndCreateDataStore(){var me=this;return(0,s.A)(function*(){yield me.openDb()})()}blobToString(me){return(0,s.A)(function*(){return yield me.text()})()}readdir(){return(0,s.A)(function*(){try{const ie=((yield S.YA.readdir({directory:S.__.External,path:"Leap Wetland Monitoring"})).files||[]).map(we=>"string"==typeof we?we:we.name);return console.log("\u{1f4c2} SharedDataService: Files in secure directory:",ie),ie}catch(me){return console.log("\u{1f4c2} SharedDataService: Directory not found or empty, error:",me),[]}})()}verifyIfExists(me,ie){return ie.includes(me)}writeJsonFile(me,ie){var we=this;return(0,s.A)(function*(){if(yield we.isMobileFilesystemPlatform()){const l=`Leap Wetland Monitoring/${me}`;try{yield S.YA.mkdir({path:"Leap Wetland Monitoring",directory:S.__.External,recursive:!0})}catch(p){console.log("Directory already exists or created:",p)}return void(yield S.YA.writeFile({path:l,directory:S.__.External,encoding:S.Wi.UTF8,data:JSON.stringify(ie)}))}yield we.saveDataToIndexedDB(me,JSON.stringify(ie))})()}readJsonFile(me){var ie=this;return(0,s.A)(function*(){if(yield ie.isMobileFilesystemPlatform())try{const l=`Leap Wetland Monitoring/${me}`,p=yield ie.readdir();if(!ie.verifyIfExists(me,p))return null;const m=yield S.YA.readFile({path:l,directory:S.__.External,encoding:S.Wi.UTF8}),v="string"==typeof m.data?m.data:yield ie.blobToString(m.data);return JSON.parse(v)}catch{return null}const we=yield ie.getDataFromIndexedDB(me);if(null==we)return null;if("string"==typeof we)try{return JSON.parse(we)}catch{return we}return we})()}deleteJsonFile(me){var ie=this;return(0,s.A)(function*(){if(yield ie.isMobileFilesystemPlatform())try{const we=`Leap Wetland Monitoring/${me}`;yield S.YA.deleteFile({path:we,directory:S.__.External}),console.log(`SharedDataService: Successfully deleted file: ${we}`)}catch(we){throw console.error(`SharedDataService: Failed to delete file ${me}:`,we),we}else try{yield ie.deleteDataFromIndexedDB(me),console.log(`SharedDataService: Successfully deleted from IndexedDB: ${me}`)}catch(we){throw console.error(`SharedDataService: Failed to delete from IndexedDB ${me}:`,we),we}})()}listFiles(){var me=this;return(0,s.A)(function*(){if(yield me.isMobileFilesystemPlatform())return yield me.readdir();yield me.checkAndCreateDataStore();const ie=yield me.openDb();return yield new Promise((we,l)=>{const v=ie.transaction(me.defaultStoreName,"readonly").objectStore(me.defaultStoreName).getAllKeys();v.onsuccess=()=>{we((v.result||[]).map(String))},v.onerror=()=>{l(v.error)}})})()}saveDataToIndexedDB(me,ie){var we=this;return(0,s.A)(function*(){yield we.checkAndCreateDataStore();const l=yield we.openDb();yield new Promise((p,m)=>{const v=l.transaction(we.defaultStoreName,"readwrite"),_=v.objectStore(we.defaultStoreName);let D=ie;if("string"==typeof ie&&(ie.trim().startsWith("{")||ie.trim().startsWith("[")))try{D=JSON.parse(ie)}catch{D=ie}_.put({fileName:me,content:D}),v.oncomplete=()=>p(),v.onerror=()=>m(v.error),v.onabort=()=>m(v.error)})})()}getDataFromIndexedDB(me){var ie=this;return(0,s.A)(function*(){yield ie.checkAndCreateDataStore();const we=yield ie.openDb();return yield new Promise((l,p)=>{const _=we.transaction(ie.defaultStoreName,"readonly").objectStore(ie.defaultStoreName).get(me);_.onsuccess=()=>{const D=_.result;l(D?D.content:null)},_.onerror=()=>{p(_.error)}})})()}deleteDataFromIndexedDB(me){var ie=this;return(0,s.A)(function*(){yield ie.checkAndCreateDataStore();const we=yield ie.openDb();yield new Promise((l,p)=>{const m=we.transaction(ie.defaultStoreName,"readwrite");m.objectStore(ie.defaultStoreName).delete(me),m.oncomplete=()=>l(),m.onerror=()=>p(m.error),m.onabort=()=>p(m.error)})})()}static#e=k=()=>(this.\u0275fac=function(ie){return new(ie||Le)},this.\u0275prov=Pe.jDH({token:Le,factory:Le.\u0275fac,providedIn:"root"}))}return k(),Le})()},980(Wt,ut,b){"use strict";b.d(ut,{j:()=>o});var s=b(9974);function o(S){return(0,s.N)((Pe,Ce)=>{try{Pe.subscribe(Ce)}finally{Ce.add(S)}})}},983(Wt,ut,b){"use strict";b.d(ut,{w:()=>o});const o=new(b(1985).c)(Ce=>Ce.complete())},1026(Wt,ut,b){"use strict";b.d(ut,{$:()=>s});const s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},1084(Wt,ut,b){"use strict";b.d(ut,{G:()=>Je});var s=b(467),o=b(2084),S=b(2615),Pe=b(918),Ce=b(5029),k=b(4938),Le=b(8863);let Je=(()=>{var me;class ie{constructor(l,p,m,v){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=v,this.REPORTS_BUCKET="flora-fauna",this.IMAGES_BUCKET="flora-fauna-images",this.DRAFT_FILE="flora_fauna_draft_current.json",this.PENDING_QUEUE_FILE="flora_fauna_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} FloraFaunaSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} FloraFaunaSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(_=>console.error("\u274c FloraFaunaSyncService: processPendingQueue failed:",_))}),setTimeout(()=>{console.log("\u{1f680} FloraFaunaSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(_=>console.error("\u274c FloraFaunaSyncService: Initial queue check failed:",_))},4e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 FloraFaunaSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(_=>console.error("\u274c FloraFaunaSyncService: Periodic queue check failed:",_))},3e5),console.log("\u2705 FloraFaunaSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}getZoneName(l){return l?`Zone ${l}`:""}getQuadDisplay(l){if(!l)return"";const p=l.match(/\d+/);return p?`Quad ${p[0]}`:""}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`FloraFauna${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];if(l?.mangroves&&Array.isArray(l.mangroves)){const v=l.mangroves.filter(_=>_.numAdults>0||_.recruitsPresent).length;v>0&&m.push(`${v} mangrove spp`)}if(l?.otherFlora&&Array.isArray(l.otherFlora)){const v=l.otherFlora.length;v>0&&m.push(`${v} flora spp`)}if(l?.fauna&&Array.isArray(l.fauna)){const v=l.fauna.length;v>0&&m.push(`${v} fauna spp`)}return m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"flora-fauna"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",v=l?.quadNumber||"";let _=`flora_fauna_draft_${p}`;return m&&(_+=`_zone${m}`),v&&(_+=`_quad${v}`),`${_}.json`}dataUrlToBlob(l){return(0,s.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,s.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,s.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("FloraFaunaSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=l.reportId||p.generateReportId(),_={reportId:v,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos||[],status:l.status||{incomplete:!0,sent:!1,pending:!1}},D=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(D,_);const L=yield p.sharedDataService.readJsonFile(D);if(!L||L.reportId!==_.reportId)throw new Error("FloraFaunaSyncService: draft verification failed");const K=yield p.storage.getUser(),ae=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(K?.username||"unknown","flora-fauna",v,ae)})()}loadDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,s.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(_=>_.startsWith("flora_fauna_draft_")),v=[];for(const _ of m)try{const D=yield l.sharedDataService.readJsonFile(_);if(D){const L=l.getLocationLabelFromFilename(_,D.form);v.push({draft:D,locationLabel:L})}}catch(D){console.warn("FloraFaunaSyncService: Failed to read draft file",_,D)}return v})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,s.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,s.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:v}of m)p.push({report:v,status:"draft"});try{const v=yield l.sharedDataService.listFiles();console.log("\u{1f4c1} FloraFaunaSyncService: All files found:",v);const _=v.filter(D=>{if(!D.startsWith("FloraFauna")||D.includes("_report_"))return!1;const L=D.replace(".json","");return/^FloraFauna\d{8}_\d{6}$/.test(L)&&!D.includes("_backup")&&!D.includes("_draft")&&!D.includes("_queue")});console.log("\u{1f4cb} FloraFaunaSyncService: Filtered report files:",_);for(const D of _)try{const L=yield l.sharedDataService.readJsonFile(D);L&&p.push({report:L,status:L.status.sent?"submitted":"pending"})}catch(L){console.warn("FloraFaunaSyncService: Failed to read report file",D,L)}}catch(v){console.error("FloraFaunaSyncService: Failed to list files:",v)}return p.sort((v,_)=>{const D=new Date(v.report.updatedAt||v.report.createdAt).getTime();return new Date(_.report.updatedAt||_.report.createdAt).getTime()-D}),p})()}submitFinal(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=!0===l.isEditMode,_=l.existingReportId||p.generateReportId(),D={reportId:_,createdAt:m,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:[...l.photos||[]],status:{incomplete:!1,sent:!1,pending:!1}};v&&(D.editedAt=m);const L=`${_}.json`;yield p.sharedDataService.writeJsonFile(L,D);const K=yield p.sharedDataService.readJsonFile(L);if(!K||K.reportId!==_)throw new Error("FloraFaunaSyncService: local report verification failed");const ae=yield p.storage.getUser(),B=ae?ae.organization||ae.username:null;let Z;if(l.originalSubmittedBy&&B&&l.originalSubmittedBy!==B?Z=`${l.originalSubmittedBy}, ${B}`:B&&(Z=B),D.submittedBy=Z,yield p.sharedDataService.writeJsonFile(L,D),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:_,localReportFile:L}),{reportId:_,queued:!0};try{yield p.uploadReportAndImages(D,l.originalSubmittedBy),D.status.sent=!0,D.status.pending=!1,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.clearDraft();const fe=(yield p.storage.getUser())?.username||"unknown",_e=p.getFormSummary(l.formValue),Re=D.submittedBy;return v?p.monitoringLog.recordFormEdited(fe,"flora-fauna",_,!1,_e,Re):p.monitoringLog.recordFormSubmitted(fe,"flora-fauna",_,!1,_e,Re),{reportId:_,queued:!1}}catch(he){const fe=String(he?.message?he.message:he);D.status.pending=!0,D.status.lastError=fe,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.enqueuePending({reportId:_,localReportFile:L});const Re=(yield p.storage.getUser())?.username||"unknown",ve=p.getFormSummary(l.formValue),Ye=D.submittedBy;return v?p.monitoringLog.recordFormEdited(Re,"flora-fauna",_,!0,ve,Ye):p.monitoringLog.recordFormSubmitted(Re,"flora-fauna",_,!0,ve,Ye),{reportId:_,queued:!0}}})()}enqueuePending(l){var p=this;return(0,s.A)(function*(){console.log("\u{1f4dd} FloraFaunaSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(_=>_.reportId===l.reportId)?console.log("\u26a0\ufe0f FloraFaunaSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 FloraFaunaSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} FloraFaunaSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,s.A)(function*(){if(console.log("\u{1f504} FloraFaunaSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f FloraFaunaSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f FloraFaunaSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} FloraFaunaSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 FloraFaunaSyncService: Queue is empty, nothing to process");const m=[];for(const v of p.items){console.log("\u{1f50d} FloraFaunaSyncService: Processing item:",v.reportId,"(attempt",v.attempts+1,")");try{const _=yield l.sharedDataService.readJsonFile(v.localReportFile);if(!_){console.error("\u274c FloraFaunaSyncService: Local report file missing for",v.reportId),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(_),console.log("\u2705 FloraFaunaSyncService: Upload succeeded for",v.reportId),_.status.sent=!0,_.status.pending=!1,_.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(v.localReportFile,_),console.log("\u{1f4be} FloraFaunaSyncService: Marked report as sent")}catch(_){console.error("\u274c FloraFaunaSyncService: Upload failed for",v.reportId,":",_),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} FloraFaunaSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} FloraFaunaSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,s.A)(function*(){console.log("\u{1f4e4} FloraFaunaSyncService: Starting upload for report",l.reportId);const v=m.getClient(),_=[];for(let _e=0;_e<(l.photos||[]).length;_e++){const Re=l.photos[_e],ve=yield m.uploadImageDataUrl(`${l.reportId}/photo_${_e+1}.jpg`,Re);_.push(ve)}const D=JSON.parse(JSON.stringify(l));D.photos=_,D.status={incomplete:!1,sent:!0,pending:!1};const L=`${l.reportId}.json`,K=new Blob([JSON.stringify(D)],{type:"application/json"}),{error:ae}=yield v.storage.from(m.REPORTS_BUCKET).upload(L,K,{contentType:"application/json",upsert:!0});if(ae)throw console.error("\u274c FloraFaunaSyncService: JSON upload error:",ae),ae;console.log("\u2705 FloraFaunaSyncService: Successfully uploaded JSON to",L);const B=yield m.storage.getUser(),Z=B?B.organization||B.username:null;let G;G=p&&Z&&p!==Z?`${p}, ${Z}`:Z;const he={report_id:l.reportId,submitted_by:G,json_path:L,location:l.form.location||null,assessment_date:l.form.observationDate||null,zone_number:m.getZoneName(l.form.zoneNumber)||null,quad_number:m.getQuadDisplay(l.form.quadNumber)||null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:fe}=yield v.from("flora_fauna_reports").upsert(he,{onConflict:"report_id"});if(fe)throw console.error("\u274c FloraFaunaSyncService: Database upsert error:",fe),fe;console.log("\u2705 FloraFaunaSyncService: Successfully upserted into flora_fauna_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,s.A)(function*(){const v=m.getClient(),_=yield m.dataUrlToBlob(p),{error:D}=yield v.storage.from(m.IMAGES_BUCKET).upload(l,_,{contentType:_.type||"image/jpeg",upsert:!0});if(D)throw console.error("\u274c FloraFaunaSyncService: Image upload error for",l,":",D),D;return console.log("\u2705 FloraFaunaSyncService: Successfully uploaded image to",l),l})()}static#e=me=()=>(this.\u0275fac=function(p){return new(p||ie)(S.KVO(Pe.H),S.KVO(Ce.L),S.KVO(k.w),S.KVO(Le.u))},this.\u0275prov=S.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return me(),ie})()},1169(Wt,ut,b){var s={"./pwa-action-sheet.entry.js":[6301,6301],"./pwa-camera-modal-instance.entry.js":[5640,5640],"./pwa-camera-modal.entry.js":[2982,2982],"./pwa-camera.entry.js":[6086,6086],"./pwa-toast.entry.js":[3574,3574]};function o(S){if(!b.o(s,S))return Promise.resolve().then(()=>{var k=new Error("Cannot find module '"+S+"'");throw k.code="MODULE_NOT_FOUND",k});var Pe=s[S],Ce=Pe[0];return b.e(Pe[1]).then(()=>b(Ce))}o.keys=()=>Object.keys(s),o.id=1169,Wt.exports=o},1203(Wt,ut,b){"use strict";b.d(ut,{F:()=>o,m:()=>S});var s=b(3669);function o(...Pe){return S(Pe)}function S(Pe){return 0===Pe.length?s.D:1===Pe.length?Pe[0]:function(k){return Pe.reduce((Le,Je)=>Je(Le),k)}}},1288(Wt,ut,b){"use strict";b.d(ut,{H:()=>L,b:()=>wn,c:()=>Z,f:()=>ht,g:()=>B,h:()=>_,p:()=>vr,r:()=>An});var s=b(467);let S,Pe,Ce=!1,k=!1;const ie={},m=Xe=>"object"==(Xe=typeof Xe)||"function"===Xe;function v(Xe){var Ze,It,_t;return null!==(_t=null===(It=null===(Ze=Xe.head)||void 0===Ze?void 0:Ze.querySelector('meta[name="csp-nonce"]'))||void 0===It?void 0:It.getAttribute("content"))&&void 0!==_t?_t:void 0}const _=(Xe,Ze,...It)=>{let _t=null,Ft=!1,Vt=!1;const Gt=[],cn=fn=>{for(let zn=0;zn<fn.length;zn++)_t=fn[zn],Array.isArray(_t)?cn(_t):null!=_t&&"boolean"!=typeof _t&&((Ft="function"!=typeof Xe&&!m(_t))&&(_t=String(_t)),Ft&&Vt?Gt[Gt.length-1].$text$+=_t:Gt.push(Ft?D(null,_t):_t),Vt=Ft)};if(cn(It),Ze){const fn=Ze.className||Ze.class;fn&&(Ze.class="object"!=typeof fn?fn:Object.keys(fn).filter(zn=>fn[zn]).join(" "))}const ln=D(Xe,null);return ln.$attrs$=Ze,Gt.length>0&&(ln.$children$=Gt),ln},D=(Xe,Ze)=>({$flags$:0,$tag$:Xe,$text$:Ze,$elm$:null,$children$:null,$attrs$:null}),L={},B=Xe=>pn(Xe).$hostElement$,Z=(Xe,Ze,It)=>{const _t=B(Xe);return{emit:Ft=>G(_t,Ze,{bubbles:!!(4&It),composed:!!(2&It),cancelable:!!(1&It),detail:Ft})}},G=(Xe,Ze,It)=>{const _t=er.ce(Ze,It);return Xe.dispatchEvent(_t),_t},he=new WeakMap,ve=(Xe,Ze)=>"sc-"+Xe.$tagName$,Ye=(Xe,Ze,It,_t,Ft,Vt)=>{if(It!==_t){let Gt=Zn(Xe,Ze),cn=Ze.toLowerCase();if("class"===Ze){const ln=Xe.classList,fn=nt(It),zn=nt(_t);ln.remove(...fn.filter(Tn=>Tn&&!zn.includes(Tn))),ln.add(...zn.filter(Tn=>Tn&&!fn.includes(Tn)))}else if("style"===Ze){for(const ln in It)(!_t||null==_t[ln])&&(ln.includes("-")?Xe.style.removeProperty(ln):Xe.style[ln]="");for(const ln in _t)(!It||_t[ln]!==It[ln])&&(ln.includes("-")?Xe.style.setProperty(ln,_t[ln]):Xe.style[ln]=_t[ln])}else if("ref"===Ze)_t&&_t(Xe);else if(Gt||"o"!==Ze[0]||"n"!==Ze[1]){const ln=m(_t);if((Gt||ln&&null!==_t)&&!Ft)try{if(Xe.tagName.includes("-"))Xe[Ze]=_t;else{const fn=_t??"";"list"===Ze?Gt=!1:(null==It||Xe[Ze]!=fn)&&(Xe[Ze]=fn)}}catch{}null==_t||!1===_t?(!1!==_t||""===Xe.getAttribute(Ze))&&Xe.removeAttribute(Ze):(!Gt||4&Vt||Ft)&&!ln&&Xe.setAttribute(Ze,_t=!0===_t?"":_t)}else Ze="-"===Ze[2]?Ze.slice(3):Zn(Ar,cn)?cn.slice(2):cn[2]+Ze.slice(3),It&&er.rel(Xe,Ze,It,!1),_t&&er.ael(Xe,Ze,_t,!1)}},ge=/\s/,nt=Xe=>Xe?Xe.split(ge):[],ze=(Xe,Ze,It,_t)=>{const Ft=11===Ze.$elm$.nodeType&&Ze.$elm$.host?Ze.$elm$.host:Ze.$elm$,Vt=Xe&&Xe.$attrs$||ie,Gt=Ze.$attrs$||ie;for(_t in Vt)_t in Gt||Ye(Ft,_t,Vt[_t],void 0,It,Ze.$flags$);for(_t in Gt)Ye(Ft,_t,Vt[_t],Gt[_t],It,Ze.$flags$)},Fe=(Xe,Ze,It,_t)=>{const Ft=Ze.$children$[It];let Gt,cn,Vt=0;if(null!==Ft.$text$)Gt=Ft.$elm$=Jn.createTextNode(Ft.$text$);else{if(Ce||(Ce="svg"===Ft.$tag$),Gt=Ft.$elm$=Jn.createElementNS(Ce?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",Ft.$tag$),Ce&&"foreignObject"===Ft.$tag$&&(Ce=!1),ze(null,Ft,Ce),(Xe=>null!=Xe)(S)&&Gt["s-si"]!==S&&Gt.classList.add(Gt["s-si"]=S),Ft.$children$)for(Vt=0;Vt<Ft.$children$.length;++Vt)cn=Fe(Xe,Ft,Vt),cn&&Gt.appendChild(cn);"svg"===Ft.$tag$?Ce=!1:"foreignObject"===Gt.tagName&&(Ce=!0)}return Gt},xe=(Xe,Ze,It,_t,Ft,Vt)=>{let cn,Gt=Xe;for(Gt.shadowRoot&&Gt.tagName===Pe&&(Gt=Gt.shadowRoot);Ft<=Vt;++Ft)_t[Ft]&&(cn=Fe(null,It,Ft),cn&&(_t[Ft].$elm$=cn,Gt.insertBefore(cn,Ze)))},rt=(Xe,Ze,It)=>{for(let _t=Ze;_t<=It;++_t){const Ft=Xe[_t];if(Ft){const Vt=Ft.$elm$;ye(Ft),Vt&&Vt.remove()}}},Ae=(Xe,Ze)=>Xe.$tag$===Ze.$tag$,H=(Xe,Ze)=>{const It=Ze.$elm$=Xe.$elm$,_t=Xe.$children$,Ft=Ze.$children$,Vt=Ze.$tag$,Gt=Ze.$text$;null===Gt?(Ce="svg"===Vt||"foreignObject"!==Vt&&Ce,ze(Xe,Ze,Ce),null!==_t&&null!==Ft?((Xe,Ze,It,_t)=>{let sr,Ft=0,Vt=0,Gt=Ze.length-1,cn=Ze[0],ln=Ze[Gt],fn=_t.length-1,zn=_t[0],Tn=_t[fn];for(;Ft<=Gt&&Vt<=fn;)null==cn?cn=Ze[++Ft]:null==ln?ln=Ze[--Gt]:null==zn?zn=_t[++Vt]:null==Tn?Tn=_t[--fn]:Ae(cn,zn)?(H(cn,zn),cn=Ze[++Ft],zn=_t[++Vt]):Ae(ln,Tn)?(H(ln,Tn),ln=Ze[--Gt],Tn=_t[--fn]):Ae(cn,Tn)?(H(cn,Tn),Xe.insertBefore(cn.$elm$,ln.$elm$.nextSibling),cn=Ze[++Ft],Tn=_t[--fn]):Ae(ln,zn)?(H(ln,zn),Xe.insertBefore(ln.$elm$,cn.$elm$),ln=Ze[--Gt],zn=_t[++Vt]):(sr=Fe(Ze&&Ze[Vt],It,Vt),zn=_t[++Vt],sr&&cn.$elm$.parentNode.insertBefore(sr,cn.$elm$));Ft>Gt?xe(Xe,null==_t[fn+1]?null:_t[fn+1].$elm$,It,_t,Vt,fn):Vt>fn&&rt(Ze,Ft,Gt)})(It,_t,Ze,Ft):null!==Ft?(null!==Xe.$text$&&(It.textContent=""),xe(It,null,Ze,Ft,0,Ft.length-1)):null!==_t&&rt(_t,0,_t.length-1),Ce&&"svg"===Vt&&(Ce=!1)):Xe.$text$!==Gt&&(It.data=Gt)},ye=Xe=>{Xe.$attrs$&&Xe.$attrs$.ref&&Xe.$attrs$.ref(null),Xe.$children$&&Xe.$children$.map(ye)},He=(Xe,Ze)=>{Ze&&!Xe.$onRenderResolve$&&Ze["s-p"]&&Ze["s-p"].push(new Promise(It=>Xe.$onRenderResolve$=It))},ot=(Xe,Ze)=>{if(Xe.$flags$|=16,!(4&Xe.$flags$))return He(Xe,Xe.$ancestorComponent$),bn(()=>pt(Xe,Ze));Xe.$flags$|=512},pt=(Xe,Ze)=>{const _t=Xe.$lazyInstance$;return Ze&&(Xe.$flags$|=256,Xe.$queuedListeners$&&(Xe.$queuedListeners$.map(([Vt,Gt])=>Ot(_t,Vt,Gt)),Xe.$queuedListeners$=void 0)),At(void 0,()=>Ut(Xe,_t,Ze))},At=(Xe,Ze)=>vt(Xe)?Xe.then(Ze):Ze(),vt=Xe=>Xe instanceof Promise||Xe&&Xe.then&&"function"==typeof Xe.then,Ut=function(){var Xe=(0,s.A)(function*(Ze,It,_t){var Ft;const Vt=Ze.$hostElement$,cn=Vt["s-rc"];_t&&(Xe=>{const Ze=Xe.$cmpMeta$,It=Xe.$hostElement$,_t=Ze.$flags$,Vt=((Xe,Ze)=>{var Ft;let Vt=ve(Ze);const Gt=Sr.get(Vt);if(Xe=11===Xe.nodeType?Xe:Jn,Gt)if("string"==typeof Gt){let ln,cn=he.get(Xe=Xe.head||Xe);if(cn||he.set(Xe,cn=new Set),!cn.has(Vt)){{ln=Jn.createElement("style"),ln.innerHTML=Gt;const fn=null!==(Ft=er.$nonce$)&&void 0!==Ft?Ft:v(Jn);null!=fn&&ln.setAttribute("nonce",fn),Xe.insertBefore(ln,Xe.querySelector("link"))}cn&&cn.add(Vt)}}else Xe.adoptedStyleSheets.includes(Gt)||(Xe.adoptedStyleSheets=[...Xe.adoptedStyleSheets,Gt]);return Vt})(It.shadowRoot?It.shadowRoot:It.getRootNode(),Ze);10&_t&&(It["s-sc"]=Vt,It.classList.add(Vt+"-h"))})(Ze);dt(Ze,It),cn&&(cn.map(fn=>fn()),Vt["s-rc"]=void 0);{const fn=null!==(Ft=Vt["s-p"])&&void 0!==Ft?Ft:[],zn=()=>Bt(Ze);0===fn.length?zn():(Promise.all(fn).then(zn),Ze.$flags$|=4,fn.length=0)}});return function(It,_t,Ft){return Xe.apply(this,arguments)}}(),dt=(Xe,Ze,It)=>{try{Ze=Ze.render(),Xe.$flags$&=-17,Xe.$flags$|=2,((Xe,Ze)=>{const It=Xe.$hostElement$,_t=Xe.$vnode$||D(null,null),Ft=(Xe=>Xe&&Xe.$tag$===L)(Ze)?Ze:_(null,null,Ze);Pe=It.tagName,Ft.$tag$=null,Ft.$flags$|=4,Xe.$vnode$=Ft,Ft.$elm$=_t.$elm$=It.shadowRoot||It,S=It["s-sc"],H(_t,Ft)})(Xe,Ze)}catch(_t){Hn(_t,Xe.$hostElement$)}return null},Bt=Xe=>{const It=Xe.$hostElement$,Ft=Xe.$lazyInstance$,Vt=Xe.$ancestorComponent$;64&Xe.$flags$||(Xe.$flags$|=64,on(It),Ot(Ft,"componentDidLoad"),Xe.$onReadyResolve$(It),Vt||Nt()),Xe.$onInstanceResolve$(It),Xe.$onRenderResolve$&&(Xe.$onRenderResolve$(),Xe.$onRenderResolve$=void 0),512&Xe.$flags$&&tr(()=>ot(Xe,!1)),Xe.$flags$&=-517},ht=Xe=>{{const Ze=pn(Xe),It=Ze.$hostElement$.isConnected;return It&&2==(18&Ze.$flags$)&&ot(Ze,!1),It}},Nt=Xe=>{on(Jn.documentElement),tr(()=>G(Ar,"appload",{detail:{namespace:"ionicpwaelements"}}))},Ot=(Xe,Ze,It)=>{if(Xe&&Xe[Ze])try{return Xe[Ze](It)}catch(_t){Hn(_t)}},on=Xe=>Xe.classList.add("hydrated"),Dt=(Xe,Ze,It)=>{if(Ze.$members$){const _t=Object.entries(Ze.$members$),Ft=Xe.prototype;if(_t.map(([Vt,[Gt]])=>{31&Gt||2&It&&32&Gt?Object.defineProperty(Ft,Vt,{get(){return((Xe,Ze)=>pn(this).$instanceValues$.get(Ze))(0,Vt)},set(cn){((Xe,Ze,It,_t)=>{const Ft=pn(Xe),Vt=Ft.$instanceValues$.get(Ze),Gt=Ft.$flags$,cn=Ft.$lazyInstance$;It=((Xe,Ze)=>null==Xe||m(Xe)?Xe:4&Ze?"false"!==Xe&&(""===Xe||!!Xe):2&Ze?parseFloat(Xe):1&Ze?String(Xe):Xe)(It,_t.$members$[Ze][0]);const ln=Number.isNaN(Vt)&&Number.isNaN(It);(!(8&Gt)||void 0===Vt)&&It!==Vt&&!ln&&(Ft.$instanceValues$.set(Ze,It),cn&&2==(18&Gt)&&ot(Ft,!1))})(this,Vt,cn,Ze)},configurable:!0,enumerable:!0}):1&It&&64&Gt&&Object.defineProperty(Ft,Vt,{value(...cn){const ln=pn(this);return ln.$onInstancePromise$.then(()=>ln.$lazyInstance$[Vt](...cn))}})}),1&It){const Vt=new Map;Ft.attributeChangedCallback=function(Gt,cn,ln){er.jmp(()=>{const fn=Vt.get(Gt);if(this.hasOwnProperty(fn))ln=this[fn],delete this[fn];else if(Ft.hasOwnProperty(fn)&&"number"==typeof this[fn]&&this[fn]==ln)return;this[fn]=(null!==ln||"boolean"!=typeof this[fn])&&ln})},Xe.observedAttributes=_t.filter(([Gt,cn])=>15&cn[0]).map(([Gt,cn])=>{const ln=cn[1]||Gt;return Vt.set(ln,Gt),ln})}}return Xe},en=function(){var Xe=(0,s.A)(function*(Ze,It,_t,Ft,Vt){if(!(32&It.$flags$)){It.$flags$|=32;{if((Vt=gr(_t)).then){const fn=()=>{};Vt=yield Vt,fn()}Vt.isProxied||(Dt(Vt,_t,2),Vt.isProxied=!0);const ln=()=>{};It.$flags$|=8;try{new Vt(It)}catch(fn){Hn(fn)}It.$flags$&=-9,ln()}if(Vt.style){let ln=Vt.style;const fn=ve(_t);if(!Sr.has(fn)){const zn=()=>{};((Xe,Ze,It)=>{let _t=Sr.get(Xe);Cr&&It?(_t=_t||new CSSStyleSheet,"string"==typeof _t?_t=Ze:_t.replaceSync(Ze)):_t=Ze,Sr.set(Xe,_t)})(fn,ln,!!(1&_t.$flags$)),zn()}}}const Gt=It.$ancestorComponent$,cn=()=>ot(It,!0);Gt&&Gt["s-rc"]?Gt["s-rc"].push(cn):cn()});return function(It,_t,Ft,Vt,Gt){return Xe.apply(this,arguments)}}(),wn=(Xe,Ze={})=>{var It;const Ft=[],Vt=Ze.exclude||[],Gt=Ar.customElements,cn=Jn.head,ln=cn.querySelector("meta[charset]"),fn=Jn.createElement("style"),zn=[];let Tn,sr=!0;Object.assign(er,Ze),er.$resourcesUrl$=new URL(Ze.resourcesUrl||"./",Jn.baseURI).href,Xe.map(Kn=>{Kn[1].map(Tr=>{const mr={$flags$:Tr[0],$tagName$:Tr[1],$members$:Tr[2],$listeners$:Tr[3]};mr.$members$=Tr[2],mr.$listeners$=Tr[3];const Mn=mr.$tagName$,gn=class extends HTMLElement{constructor(Br){super(Br),or(Br=this,mr),1&mr.$flags$&&Br.attachShadow({mode:"open"})}connectedCallback(){Tn&&(clearTimeout(Tn),Tn=null),sr?zn.push(this):er.jmp(()=>(Xe=>{if(!(1&er.$flags$)){const Ze=pn(Xe),It=Ze.$cmpMeta$,_t=()=>{};if(1&Ze.$flags$)hn(Xe,Ze,It.$listeners$);else{Ze.$flags$|=1;{let Ft=Xe;for(;Ft=Ft.parentNode||Ft.host;)if(Ft["s-p"]){He(Ze,Ze.$ancestorComponent$=Ft);break}}It.$members$&&Object.entries(It.$members$).map(([Ft,[Vt]])=>{if(31&Vt&&Xe.hasOwnProperty(Ft)){const Gt=Xe[Ft];delete Xe[Ft],Xe[Ft]=Gt}}),en(Xe,Ze,It)}_t()}})(this))}disconnectedCallback(){er.jmp(()=>(()=>{if(!(1&er.$flags$)){const Ze=pn(this),It=Ze.$lazyInstance$;Ze.$rmListeners$&&(Ze.$rmListeners$.map(_t=>_t()),Ze.$rmListeners$=void 0),Ot(It,"disconnectedCallback")}})())}componentOnReady(){return pn(this).$onReadyPromise$}};mr.$lazyBundleId$=Kn[0],!Vt.includes(Mn)&&!Gt.get(Mn)&&(Ft.push(Mn),Gt.define(Mn,Dt(gn,mr,1)))})});{fn.innerHTML=Ft+"{visibility:hidden}.hydrated{visibility:inherit}",fn.setAttribute("data-styles","");const Kn=null!==(It=er.$nonce$)&&void 0!==It?It:v(Jn);null!=Kn&&fn.setAttribute("nonce",Kn),cn.insertBefore(fn,ln?ln.nextSibling:cn.firstChild)}sr=!1,zn.length?zn.map(Kn=>Kn.connectedCallback()):er.jmp(()=>Tn=setTimeout(Nt,30))},hn=(Xe,Ze,It,_t)=>{It&&It.map(([Ft,Vt,Gt])=>{const cn=_n(Xe,Ft),ln=Pt(Ze,Gt),fn=Tt(Ft);er.ael(cn,Vt,ln,fn),(Ze.$rmListeners$=Ze.$rmListeners$||[]).push(()=>er.rel(cn,Vt,ln,fn))})},Pt=(Xe,Ze)=>It=>{try{256&Xe.$flags$?Xe.$lazyInstance$[Ze](It):(Xe.$queuedListeners$=Xe.$queuedListeners$||[]).push([Ze,It])}catch(_t){Hn(_t)}},_n=(Xe,Ze)=>16&Ze?Jn.body:Xe,Tt=Xe=>!!(2&Xe),an=new WeakMap,pn=Xe=>an.get(Xe),An=(Xe,Ze)=>an.set(Ze.$lazyInstance$=Xe,Ze),or=(Xe,Ze)=>{const It={$flags$:0,$hostElement$:Xe,$cmpMeta$:Ze,$instanceValues$:new Map};return It.$onInstancePromise$=new Promise(_t=>It.$onInstanceResolve$=_t),It.$onReadyPromise$=new Promise(_t=>It.$onReadyResolve$=_t),Xe["s-p"]=[],Xe["s-rc"]=[],hn(Xe,It,Ze.$listeners$),an.set(Xe,It)},Zn=(Xe,Ze)=>Ze in Xe,Hn=(Xe,Ze)=>(0,console.error)(Xe,Ze),ur=new Map,gr=(Xe,Ze,It)=>{const _t=Xe.$tagName$.replace(/-/g,"_"),Ft=Xe.$lazyBundleId$,Vt=ur.get(Ft);if(Vt)return Vt[_t];if(!It||!BUILD.hotModuleReplacement){const Gt=cn=>(ur.set(Ft,cn),cn[_t]);switch(Ft){case"pwa-action-sheet":return b.e(6301).then(b.bind(b,6301)).then(Gt,Hn);case"pwa-camera-modal":return b.e(2982).then(b.bind(b,2982)).then(Gt,Hn);case"pwa-toast":return b.e(3574).then(b.bind(b,3574)).then(Gt,Hn);case"pwa-camera-modal-instance":return b.e(5640).then(b.bind(b,5640)).then(Gt,Hn);case"pwa-camera":return b.e(6086).then(b.bind(b,6086)).then(Gt,Hn)}}return b(1169)(`./${Ft}.entry.js`).then(Gt=>(ur.set(Ft,Gt),Gt[_t]),Hn)},Sr=new Map,Ar=typeof window<"u"?window:{},Jn=Ar.document||{head:{}},er={$flags$:0,$resourcesUrl$:"",jmp:Xe=>Xe(),raf:Xe=>requestAnimationFrame(Xe),ael:(Xe,Ze,It,_t)=>Xe.addEventListener(Ze,It,_t),rel:(Xe,Ze,It,_t)=>Xe.removeEventListener(Ze,It,_t),ce:(Xe,Ze)=>new CustomEvent(Xe,Ze)},vr=Xe=>Promise.resolve(Xe),Cr=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),$r=[],Ir=[],Sn=(Xe,Ze)=>It=>{Xe.push(It),k||(k=!0,Ze&&4&er.$flags$?tr(Nr):er.raf(Nr))},wr=Xe=>{for(let Ze=0;Ze<Xe.length;Ze++)try{Xe[Ze](performance.now())}catch(It){Hn(It)}Xe.length=0},Nr=()=>{wr($r),wr(Ir),(k=$r.length>0)&&er.raf(Nr)},tr=Xe=>vr().then(Xe),bn=Sn(Ir,!0)},1397(Wt,ut,b){"use strict";b.d(ut,{Z:()=>Je});var s=b(6354),o=b(8750),S=b(9974),Pe=b(5225),Ce=b(4360),Le=b(8071);function Je(me,ie,we=1/0){return(0,Le.T)(ie)?Je((l,p)=>(0,s.T)((m,v)=>ie(l,m,p,v))((0,o.Tg)(me(l,p))),we):("number"==typeof ie&&(we=ie),(0,S.N)((l,p)=>function k(me,ie,we,l,p,m,v,_){const D=[];let L=0,K=0,ae=!1;const B=()=>{ae&&!D.length&&!L&&ie.complete()},Z=he=>L<l?G(he):D.push(he),G=he=>{m&&ie.next(he),L++;let fe=!1;(0,o.Tg)(we(he,K++)).subscribe((0,Ce._)(ie,_e=>{p?.(_e),m?Z(_e):ie.next(_e)},()=>{fe=!0},void 0,()=>{if(fe)try{for(L--;D.length&&L<l;){const _e=D.shift();v?(0,Pe.N)(ie,v,()=>G(_e)):G(_e)}B()}catch(_e){ie.error(_e)}}))};return me.subscribe((0,Ce._)(ie,Z,()=>{ae=!0,B()})),()=>{_?.()}}(l,p,me,we)))}},1413(Wt,ut,b){"use strict";b.d(ut,{B:()=>Le});var s=b(1985),o=b(8359);const Pe=(0,b(1853).L)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ce=b(7908),k=b(9786);let Le=(()=>{class me extends s.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(we){const l=new Je(this,this);return l.operator=we,l}_throwIfClosed(){if(this.closed)throw new Pe}next(we){(0,k.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const l of this.currentObservers)l.next(we)}})}error(we){(0,k.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=we;const{observers:l}=this;for(;l.length;)l.shift().error(we)}})}complete(){(0,k.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:we}=this;for(;we.length;)we.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var we;return(null===(we=this.observers)||void 0===we?void 0:we.length)>0}_trySubscribe(we){return this._throwIfClosed(),super._trySubscribe(we)}_subscribe(we){return this._throwIfClosed(),this._checkFinalizedStatuses(we),this._innerSubscribe(we)}_innerSubscribe(we){const{hasError:l,isStopped:p,observers:m}=this;return l||p?o.Kn:(this.currentObservers=null,m.push(we),new o.yU(()=>{this.currentObservers=null,(0,Ce.o)(m,we)}))}_checkFinalizedStatuses(we){const{hasError:l,thrownError:p,isStopped:m}=this;l?we.error(p):m&&we.complete()}asObservable(){const we=new s.c;return we.source=this,we}}return me.create=(ie,we)=>new Je(ie,we),me})();class Je extends Le{constructor(ie,we){super(),this.destination=ie,this.source=we}next(ie){var we,l;null===(l=null===(we=this.destination)||void 0===we?void 0:we.next)||void 0===l||l.call(we,ie)}error(ie){var we,l;null===(l=null===(we=this.destination)||void 0===we?void 0:we.error)||void 0===l||l.call(we,ie)}complete(){var ie,we;null===(we=null===(ie=this.destination)||void 0===ie?void 0:ie.complete)||void 0===we||we.call(ie)}_subscribe(ie){var we,l;return null!==(l=null===(we=this.source)||void 0===we?void 0:we.subscribe(ie))&&void 0!==l?l:o.Kn}}},1635(Wt,ut,b){"use strict";function Pe(H,ye){var Me={};for(var He in H)Object.prototype.hasOwnProperty.call(H,He)&&ye.indexOf(He)<0&&(Me[He]=H[He]);if(null!=H&&"function"==typeof Object.getOwnPropertySymbols){var ot=0;for(He=Object.getOwnPropertySymbols(H);ot<He.length;ot++)ye.indexOf(He[ot])<0&&Object.prototype.propertyIsEnumerable.call(H,He[ot])&&(Me[He[ot]]=H[He[ot]])}return Me}function Ce(H,ye,Me,He){var At,ot=arguments.length,pt=ot<3?ye:null===He?He=Object.getOwnPropertyDescriptor(ye,Me):He;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)pt=Reflect.decorate(H,ye,Me,He);else for(var vt=H.length-1;vt>=0;vt--)(At=H[vt])&&(pt=(ot<3?At(pt):ot>3?At(ye,Me,pt):At(ye,Me))||pt);return ot>3&&pt&&Object.defineProperty(ye,Me,pt),pt}function l(H,ye,Me,He){return new(Me||(Me=Promise))(function(pt,At){function vt(Bt){try{dt(He.next(Bt))}catch(ht){At(ht)}}function Ut(Bt){try{dt(He.throw(Bt))}catch(ht){At(ht)}}function dt(Bt){Bt.done?pt(Bt.value):function ot(pt){return pt instanceof Me?pt:new Me(function(At){At(pt)})}(Bt.value).then(vt,Ut)}dt((He=He.apply(H,ye||[])).next())})}function B(H){return this instanceof B?(this.v=H,this):new B(H)}function Z(H,ye,Me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,He=Me.apply(H,ye||[]),pt=[];return ot=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),vt("next"),vt("throw"),vt("return",function At(Ot){return function(on){return Promise.resolve(on).then(Ot,ht)}}),ot[Symbol.asyncIterator]=function(){return this},ot;function vt(Ot,on){He[Ot]&&(ot[Ot]=function(ft){return new Promise(function(yt,Dt){pt.push([Ot,ft,yt,Dt])>1||Ut(Ot,ft)})},on&&(ot[Ot]=on(ot[Ot])))}function Ut(Ot,on){try{!function dt(Ot){Ot.value instanceof B?Promise.resolve(Ot.value.v).then(Bt,ht):Nt(pt[0][2],Ot)}(He[Ot](on))}catch(ft){Nt(pt[0][3],ft)}}function Bt(Ot){Ut("next",Ot)}function ht(Ot){Ut("throw",Ot)}function Nt(Ot,on){Ot(on),pt.shift(),pt.length&&Ut(pt[0][0],pt[0][1])}}function he(H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,ye=H[Symbol.asyncIterator];return ye?ye.call(H):(H=function _(H){var ye="function"==typeof Symbol&&Symbol.iterator,Me=ye&&H[ye],He=0;if(Me)return Me.call(H);if(H&&"number"==typeof H.length)return{next:function(){return H&&He>=H.length&&(H=void 0),{value:H&&H[He++],done:!H}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(H),Me={},He("next"),He("throw"),He("return"),Me[Symbol.asyncIterator]=function(){return this},Me);function He(pt){Me[pt]=H[pt]&&function(At){return new Promise(function(vt,Ut){!function ot(pt,At,vt,Ut){Promise.resolve(Ut).then(function(dt){pt({value:dt,done:vt})},At)}(vt,Ut,(At=H[pt](At)).done,At.value)})}}}b.d(ut,{AQ:()=>Z,Cg:()=>Ce,N3:()=>B,Tt:()=>Pe,sH:()=>l,xN:()=>he}),"function"==typeof SuppressedError&&SuppressedError},1841(Wt,ut,b){"use strict";b.d(ut,{b:()=>k,c:()=>Le,d:()=>Je,e:()=>ge,g:()=>xe,l:()=>ve,s:()=>nt,t:()=>_,w:()=>Ye});var s=b(467),o=b(5705),S=b(4674);const k="ionViewWillLeave",Le="ionViewDidLeave",Je="ionViewWillUnload",me=Ve=>{Ve.tabIndex=-1,Ve.focus()},ie=Ve=>null!==Ve.offsetParent,l="ion-last-focus",v_saveViewFocus=H=>{if(o.e.get("focusManagerPriority",!1)){const Me=document.activeElement;null!==Me&&H?.contains(Me)&&Me.setAttribute(l,"true")}},v_setViewFocus=H=>{const ye=o.e.get("focusManagerPriority",!1);if(Array.isArray(ye)&&!H.contains(document.activeElement)){const Me=H.querySelector(`[${l}]`);if(Me&&ie(Me))return void me(Me);for(const He of ye)switch(He){case"content":const ot=H.querySelector('main, [role="main"]');if(ot&&ie(ot))return void me(ot);break;case"heading":const pt=H.querySelector('h1, [role="heading"][aria-level="1"]');if(pt&&ie(pt))return void me(pt);break;case"banner":const At=H.querySelector('header, [role="banner"]');if(At&&ie(At))return void me(At);break;default:(0,o.f)(`Unrecognized focus manager priority value ${He}`)}me(H)}},_=Ve=>new Promise((Ae,H)=>{(0,o.w)(()=>{const ye=rt(Ve);D(Ve,ye),L(Ve).then(Me=>{Me.animation&&Me.animation.destroy(),K(Ve),Ae(Me)},Me=>{K(Ve),H(Me)}).finally(()=>{Fe(ye,!1)})})}),D=(Ve,Ae)=>{const H=Ve.enteringEl,ye=Ve.leavingEl;v_saveViewFocus(ye),ze(H,ye,Ve.direction),Fe(Ae,!0),Ve.showGoBack?H.classList.add("can-go-back"):H.classList.remove("can-go-back"),nt(H,!1),H.style.setProperty("pointer-events","none"),ye&&(nt(ye,!1),ye.style.setProperty("pointer-events","none"))},L=function(){var Ve=(0,s.A)(function*(Ae){const H=yield ae(Ae);return H&&o.B.isBrowser?B(H,Ae):Z(Ae)});return function(H){return Ve.apply(this,arguments)}}(),K=Ve=>{const Ae=Ve.enteringEl,H=Ve.leavingEl;Ae.classList.remove("ion-page-invisible"),Ae.style.removeProperty("pointer-events"),void 0!==H&&(H.classList.remove("ion-page-invisible"),H.style.removeProperty("pointer-events")),v_setViewFocus(Ae)},ae=function(){var Ve=(0,s.A)(function*(Ae){return Ae.leavingEl&&Ae.animated&&0!==Ae.duration?Ae.animationBuilder?Ae.animationBuilder:"ios"===Ae.mode?(yield Promise.resolve().then(b.bind(b,499))).iosTransitionAnimation:(yield Promise.resolve().then(b.bind(b,8313))).mdTransitionAnimation:void 0});return function(H){return Ve.apply(this,arguments)}}(),B=function(){var Ve=(0,s.A)(function*(Ae,H){yield G(H,!0);const ye=Ae(H.baseEl,H);_e(H.enteringEl,H.leavingEl);const Me=yield fe(ye,H);return H.progressCallback&&H.progressCallback(void 0),Me&&Re(H.enteringEl,H.leavingEl),{hasCompleted:Me,animation:ye}});return function(H,ye){return Ve.apply(this,arguments)}}(),Z=function(){var Ve=(0,s.A)(function*(Ae){const H=Ae.enteringEl,ye=Ae.leavingEl,Me=o.e.get("focusManagerPriority",!1);return yield G(Ae,Me),_e(H,ye),Re(H,ye),{hasCompleted:!0}});return function(H){return Ve.apply(this,arguments)}}(),G=function(){var Ve=(0,s.A)(function*(Ae,H){(void 0!==Ae.deepWait?Ae.deepWait:H)&&(yield Promise.all([ge(Ae.enteringEl),ge(Ae.leavingEl)])),yield he(Ae.viewIsReady,Ae.enteringEl)});return function(H,ye){return Ve.apply(this,arguments)}}(),he=function(){var Ve=(0,s.A)(function*(Ae,H){Ae&&(yield Ae(H))});return function(H,ye){return Ve.apply(this,arguments)}}(),fe=(Ve,Ae)=>{const H=Ae.progressCallback,ye=new Promise(Me=>{Ve.onFinish(He=>Me(1===He))});return H?(Ve.progressStart(!0),H(Ve)):Ve.play(),ye},_e=(Ve,Ae)=>{ve(Ae,k),ve(Ve,"ionViewWillEnter")},Re=(Ve,Ae)=>{ve(Ve,"ionViewDidEnter"),ve(Ae,Le)},ve=(Ve,Ae)=>{if(Ve){const H=new CustomEvent(Ae,{bubbles:!1,cancelable:!1});Ve.dispatchEvent(H)}},Ye=()=>new Promise(Ve=>(0,S.r)(()=>(0,S.r)(()=>Ve()))),ge=function(){var Ve=(0,s.A)(function*(Ae){const H=Ae;if(H){if(null!=H.componentOnReady){if(null!=(yield H.componentOnReady()))return}else if(null!=H.__registerHost)return void(yield new Promise(Me=>(0,S.r)(Me)));yield Promise.all(Array.from(H.children).map(ge))}});return function(H){return Ve.apply(this,arguments)}}(),nt=(Ve,Ae)=>{Ae?(Ve.setAttribute("aria-hidden","true"),Ve.classList.add("ion-page-hidden")):(Ve.hidden=!1,Ve.removeAttribute("aria-hidden"),Ve.classList.remove("ion-page-hidden"))},ze=(Ve,Ae,H)=>{void 0!==Ve&&(Ve.style.zIndex="back"===H?"99":"101"),void 0!==Ae&&(Ae.style.zIndex="100")},Fe=(Ve,Ae)=>{if(!Ve)return;const H="header-transitioning";Ae?Ve.classList.add(H):Ve.classList.remove(H)},xe=Ve=>Ve.classList.contains("ion-page")?Ve:Ve.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ve,rt=Ve=>{if("ios"!==Ve.mode)return null;const He="back"===Ve.direction?Ve.leavingEl:Ve.enteringEl;return He?He.querySelector("ion-header"):null}},1853(Wt,ut,b){"use strict";function s(o){const Pe=o(Ce=>{Error.call(Ce),Ce.stack=(new Error).stack});return Pe.prototype=Object.create(Error.prototype),Pe.prototype.constructor=Pe,Pe}b.d(ut,{L:()=>s})},1889(Wt,ut,b){"use strict";b.d(ut,{Wi:()=>o,__:()=>s});var s=function(Ce){return Ce.Documents="DOCUMENTS",Ce.Data="DATA",Ce.Library="LIBRARY",Ce.Cache="CACHE",Ce.External="EXTERNAL",Ce.ExternalStorage="EXTERNAL_STORAGE",Ce.ExternalCache="EXTERNAL_CACHE",Ce.LibraryNoCloud="LIBRARY_NO_CLOUD",Ce.Temporary="TEMPORARY",Ce}(s||{}),o=function(Ce){return Ce.UTF8="utf8",Ce.ASCII="ascii",Ce.UTF16="utf16",Ce}(o||{})},1985(Wt,ut,b){"use strict";b.d(ut,{c:()=>Je});var s=b(7707),o=b(8359),S=b(3494),Pe=b(1203),Ce=b(1026),k=b(8071),Le=b(9786);let Je=(()=>{class l{constructor(m){m&&(this._subscribe=m)}lift(m){const v=new l;return v.source=this,v.operator=m,v}subscribe(m,v,_){const D=function we(l){return l&&l instanceof s.vU||function ie(l){return l&&(0,k.T)(l.next)&&(0,k.T)(l.error)&&(0,k.T)(l.complete)}(l)&&(0,o.Uv)(l)}(m)?m:new s.Ms(m,v,_);return(0,Le.Y)(()=>{const{operator:L,source:K}=this;D.add(L?L.call(D,K):K?this._subscribe(D):this._trySubscribe(D))}),D}_trySubscribe(m){try{return this._subscribe(m)}catch(v){m.error(v)}}forEach(m,v){return new(v=me(v))((_,D)=>{const L=new s.Ms({next:K=>{try{m(K)}catch(ae){D(ae),L.unsubscribe()}},error:D,complete:_});this.subscribe(L)})}_subscribe(m){var v;return null===(v=this.source)||void 0===v?void 0:v.subscribe(m)}[S.s](){return this}pipe(...m){return(0,Pe.m)(m)(this)}toPromise(m){return new(m=me(m))((v,_)=>{let D;this.subscribe(L=>D=L,L=>_(L),()=>v(D))})}}return l.create=p=>new l(p),l})();function me(l){var p;return null!==(p=l??Ce.$.Promise)&&void 0!==p?p:Promise}},2084(Wt,ut,b){"use strict";function s(){const o=new Date,Pe=o.getTimezoneOffset(),Ce=new Date(o.getTime()+60*(240+Pe)*1e3);return`${Ce.getFullYear()}-${String(Ce.getMonth()+1).padStart(2,"0")}-${String(Ce.getDate()).padStart(2,"0")}T${String(Ce.getHours()).padStart(2,"0")}:${String(Ce.getMinutes()).padStart(2,"0")}:${String(Ce.getSeconds()).padStart(2,"0")}.${String(Ce.getMilliseconds()).padStart(3,"0")}+04:00`}b.d(ut,{E:()=>s})},2200(Wt,ut,b){"use strict";b.d(ut,{MD:()=>pe,PV:()=>Qn,Sq:()=>Tn,T3:()=>Se,YU:()=>cn,bT:()=>Tr,fw:()=>k,vh:()=>nr});var s=b(7705),o=b(2615),S=b(3664),Ce=(b(9295),b(7303));let k=(()=>{class A extends Ce.hb{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(j,P){super(),this._platformLocation=j,null!=P&&(this._baseHref=P)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}path(j=!1){const P=this._platformLocation.hash??"#";return P.length>0?P.substring(1):P}prepareExternalUrl(j){const P=(0,Ce.om)(this._baseHref,j);return P.length>0?"#"+P:P}pushState(j,P,q,ce){const oe=this.prepareExternalUrl(q+(0,Ce.Q)(ce))||this._platformLocation.pathname;this._platformLocation.pushState(j,P,oe)}replaceState(j,P,q,ce){const oe=this.prepareExternalUrl(q+(0,Ce.Q)(ce))||this._platformLocation.pathname;this._platformLocation.replaceState(j,P,oe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(j=0){this._platformLocation.historyGo?.(j)}static \u0275fac=function(P){return new(P||A)(o.KVO(Ce.Vw),o.KVO(Ce.kB,8))};static \u0275prov=o.jDH({token:A,factory:A.\u0275fac})}return A})();var ie=function(A){return A[A.Format=0]="Format",A[A.Standalone=1]="Standalone",A}(ie||{}),we=function(A){return A[A.Narrow=0]="Narrow",A[A.Abbreviated=1]="Abbreviated",A[A.Wide=2]="Wide",A[A.Short=3]="Short",A}(we||{}),l=function(A){return A[A.Short=0]="Short",A[A.Medium=1]="Medium",A[A.Long=2]="Long",A[A.Full=3]="Full",A}(l||{});function Z(A,ee){return Ve((0,S.kBR)(A)[S.NSC.DateFormat],ee)}function G(A,ee){return Ve((0,S.kBR)(A)[S.NSC.TimeFormat],ee)}function he(A,ee){return Ve((0,S.kBR)(A)[S.NSC.DateTimeFormat],ee)}function fe(A,ee){const j=(0,S.kBR)(A),P=j[S.NSC.NumberSymbols][ee];if(typeof P>"u"){if(12===ee)return j[S.NSC.NumberSymbols][0];if(13===ee)return j[S.NSC.NumberSymbols][1]}return P}function ze(A){if(!A[S.NSC.ExtraData])throw new o.buA(2303,!1)}function Ve(A,ee){for(let j=ee;j>-1;j--)if(typeof A[j]<"u")return A[j];throw new o.buA(2304,!1)}function Ae(A){const[ee,j]=A.split(":");return{hours:+ee,minutes:+j}}const He=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ot={},pt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function At(A,ee,j,P){let q=function An(A){if(Zn(A))return A;if("number"==typeof A&&!isNaN(A))return new Date(A);if("string"==typeof A){if(A=A.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(A)){const[q,ce=1,oe=1]=A.split("-").map(ne=>+ne);return Ut(q,ce-1,oe)}const j=parseFloat(A);if(!isNaN(A-j))return new Date(j);let P;if(P=A.match(He))return function or(A){const ee=new Date(0);let j=0,P=0;const q=A[8]?ee.setUTCFullYear:ee.setFullYear,ce=A[8]?ee.setUTCHours:ee.setHours;A[9]&&(j=Number(A[9]+A[10]),P=Number(A[9]+A[11])),q.call(ee,Number(A[1]),Number(A[2])-1,Number(A[3]));const oe=Number(A[4]||0)-j,ne=Number(A[5]||0)-P,Qe=Number(A[6]||0),bt=Math.floor(1e3*parseFloat("0."+(A[7]||0)));return ce.call(ee,oe,ne,Qe,bt),ee}(P)}const ee=new Date(A);if(!Zn(ee))throw new o.buA(2311,!1);return ee}(A);ee=dt(j,ee)||ee;let ne,oe=[];for(;ee;){if(ne=pt.exec(ee),!ne){oe.push(ee);break}{oe=oe.concat(ne.slice(1));const qt=oe.pop();if(!qt)break;ee=qt}}let Qe=q.getTimezoneOffset();P&&(Qe=$t(P,Qe),q=function pn(A,ee){const q=A.getTimezoneOffset();return function an(A,ee){return(A=new Date(A.getTime())).setMinutes(A.getMinutes()+ee),A}(A,-1*($t(ee,q)-q))}(q,P));let bt="";return oe.forEach(qt=>{const Jt=function Tt(A){if(_n[A])return _n[A];let ee;switch(A){case"G":case"GG":case"GGG":ee=ft(3,we.Abbreviated);break;case"GGGG":ee=ft(3,we.Wide);break;case"GGGGG":ee=ft(3,we.Narrow);break;case"y":ee=Ot(0,1,0,!1,!0);break;case"yy":ee=Ot(0,2,0,!0,!0);break;case"yyy":ee=Ot(0,3,0,!1,!0);break;case"yyyy":ee=Ot(0,4,0,!1,!0);break;case"Y":ee=Pt(1);break;case"YY":ee=Pt(2,!0);break;case"YYY":ee=Pt(3);break;case"YYYY":ee=Pt(4);break;case"M":case"L":ee=Ot(1,1,1);break;case"MM":case"LL":ee=Ot(1,2,1);break;case"MMM":ee=ft(2,we.Abbreviated);break;case"MMMM":ee=ft(2,we.Wide);break;case"MMMMM":ee=ft(2,we.Narrow);break;case"LLL":ee=ft(2,we.Abbreviated,ie.Standalone);break;case"LLLL":ee=ft(2,we.Wide,ie.Standalone);break;case"LLLLL":ee=ft(2,we.Narrow,ie.Standalone);break;case"w":ee=hn(1);break;case"ww":ee=hn(2);break;case"W":ee=hn(1,!0);break;case"d":ee=Ot(2,1);break;case"dd":ee=Ot(2,2);break;case"c":case"cc":ee=Ot(7,1);break;case"ccc":ee=ft(1,we.Abbreviated,ie.Standalone);break;case"cccc":ee=ft(1,we.Wide,ie.Standalone);break;case"ccccc":ee=ft(1,we.Narrow,ie.Standalone);break;case"cccccc":ee=ft(1,we.Short,ie.Standalone);break;case"E":case"EE":case"EEE":ee=ft(1,we.Abbreviated);break;case"EEEE":ee=ft(1,we.Wide);break;case"EEEEE":ee=ft(1,we.Narrow);break;case"EEEEEE":ee=ft(1,we.Short);break;case"a":case"aa":case"aaa":ee=ft(0,we.Abbreviated);break;case"aaaa":ee=ft(0,we.Wide);break;case"aaaaa":ee=ft(0,we.Narrow);break;case"b":case"bb":case"bbb":ee=ft(0,we.Abbreviated,ie.Standalone,!0);break;case"bbbb":ee=ft(0,we.Wide,ie.Standalone,!0);break;case"bbbbb":ee=ft(0,we.Narrow,ie.Standalone,!0);break;case"B":case"BB":case"BBB":ee=ft(0,we.Abbreviated,ie.Format,!0);break;case"BBBB":ee=ft(0,we.Wide,ie.Format,!0);break;case"BBBBB":ee=ft(0,we.Narrow,ie.Format,!0);break;case"h":ee=Ot(3,1,-12);break;case"hh":ee=Ot(3,2,-12);break;case"H":ee=Ot(3,1);break;case"HH":ee=Ot(3,2);break;case"m":ee=Ot(4,1);break;case"mm":ee=Ot(4,2);break;case"s":ee=Ot(5,1);break;case"ss":ee=Ot(5,2);break;case"S":ee=Ot(6,1);break;case"SS":ee=Ot(6,2);break;case"SSS":ee=Ot(6,3);break;case"Z":case"ZZ":case"ZZZ":ee=Dt(0);break;case"ZZZZZ":ee=Dt(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ee=Dt(1);break;case"OOOO":case"ZZZZ":case"zzzz":ee=Dt(2);break;default:return null}return _n[A]=ee,ee}(qt);bt+=Jt?Jt(q,j,Qe):"''"===qt?"'":qt.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),bt}function Ut(A,ee,j){const P=new Date(0);return P.setFullYear(A,ee,j),P.setHours(0,0,0),P}function dt(A,ee){const j=function v(A){return(0,S.kBR)(A)[S.NSC.LocaleId]}(A);if(ot[j]??={},ot[j][ee])return ot[j][ee];let P="";switch(ee){case"shortDate":P=Z(A,l.Short);break;case"mediumDate":P=Z(A,l.Medium);break;case"longDate":P=Z(A,l.Long);break;case"fullDate":P=Z(A,l.Full);break;case"shortTime":P=G(A,l.Short);break;case"mediumTime":P=G(A,l.Medium);break;case"longTime":P=G(A,l.Long);break;case"fullTime":P=G(A,l.Full);break;case"short":const q=dt(A,"shortTime"),ce=dt(A,"shortDate");P=Bt(he(A,l.Short),[q,ce]);break;case"medium":const oe=dt(A,"mediumTime"),ne=dt(A,"mediumDate");P=Bt(he(A,l.Medium),[oe,ne]);break;case"long":const Qe=dt(A,"longTime"),bt=dt(A,"longDate");P=Bt(he(A,l.Long),[Qe,bt]);break;case"full":const qt=dt(A,"fullTime"),Jt=dt(A,"fullDate");P=Bt(he(A,l.Full),[qt,Jt])}return P&&(ot[j][ee]=P),P}function Bt(A,ee){return ee&&(A=A.replace(/\{([^}]+)}/g,function(j,P){return null!=ee&&P in ee?ee[P]:j})),A}function ht(A,ee,j="-",P,q){let ce="";(A<0||q&&A<=0)&&(q?A=1-A:(A=-A,ce=j));let oe=String(A);for(;oe.length<ee;)oe="0"+oe;return P&&(oe=oe.slice(oe.length-ee)),ce+oe}function Ot(A,ee,j=0,P=!1,q=!1){return function(ce,oe){let ne=function on(A,ee){switch(A){case 0:return ee.getFullYear();case 1:return ee.getMonth();case 2:return ee.getDate();case 3:return ee.getHours();case 4:return ee.getMinutes();case 5:return ee.getSeconds();case 6:return ee.getMilliseconds();case 7:return ee.getDay();default:throw new o.buA(2301,!1)}}(A,ce);if((j>0||ne>-j)&&(ne+=j),3===A)0===ne&&-12===j&&(ne=12);else if(6===A)return function Nt(A,ee){return ht(A,3).substring(0,ee)}(ne,ee);const Qe=fe(oe,5);return ht(ne,ee,Qe,P,q)}}function ft(A,ee,j=ie.Format,P=!1){return function(q,ce){return function yt(A,ee,j,P,q,ce){switch(j){case 2:return function L(A,ee,j){const P=(0,S.kBR)(A),ce=Ve([P[S.NSC.MonthsFormat],P[S.NSC.MonthsStandalone]],ee);return Ve(ce,j)}(ee,q,P)[A.getMonth()];case 1:return function D(A,ee,j){const P=(0,S.kBR)(A),ce=Ve([P[S.NSC.DaysFormat],P[S.NSC.DaysStandalone]],ee);return Ve(ce,j)}(ee,q,P)[A.getDay()];case 0:const oe=A.getHours(),ne=A.getMinutes();if(ce){const bt=function Fe(A){const ee=(0,S.kBR)(A);return ze(ee),(ee[S.NSC.ExtraData][2]||[]).map(P=>"string"==typeof P?Ae(P):[Ae(P[0]),Ae(P[1])])}(ee),qt=function xe(A,ee,j){const P=(0,S.kBR)(A);ze(P);const ce=Ve([P[S.NSC.ExtraData][0],P[S.NSC.ExtraData][1]],ee)||[];return Ve(ce,j)||[]}(ee,q,P),Jt=bt.findIndex(rn=>{if(Array.isArray(rn)){const[Kt,Nn]=rn,dr=oe>=Kt.hours&&ne>=Kt.minutes,cr=oe<Nn.hours||oe===Nn.hours&&ne<Nn.minutes;if(Kt.hours<Nn.hours){if(dr&&cr)return!0}else if(dr||cr)return!0}else if(rn.hours===oe&&rn.minutes===ne)return!0;return!1});if(-1!==Jt)return qt[Jt]}return function _(A,ee,j){const P=(0,S.kBR)(A),ce=Ve([P[S.NSC.DayPeriodsFormat],P[S.NSC.DayPeriodsStandalone]],ee);return Ve(ce,j)}(ee,q,P)[oe<12?0:1];case 3:return function K(A,ee){return Ve((0,S.kBR)(A)[S.NSC.Eras],ee)}(ee,P)[A.getFullYear()<=0?0:1];default:throw new o.buA(2302,!1)}}(q,ce,A,ee,j,P)}}function Dt(A){return function(ee,j,P){const q=-1*P,ce=fe(j,5),oe=q>0?Math.floor(q/60):Math.ceil(q/60);switch(A){case 0:return(q>=0?"+":"")+ht(oe,2,ce)+ht(Math.abs(q%60),2,ce);case 1:return"GMT"+(q>=0?"+":"")+ht(oe,1,ce);case 2:return"GMT"+(q>=0?"+":"")+ht(oe,2,ce)+":"+ht(Math.abs(q%60),2,ce);case 3:return 0===P?"Z":(q>=0?"+":"")+ht(oe,2,ce)+":"+ht(Math.abs(q%60),2,ce);default:throw new o.buA(2310,!1)}}}function wn(A){const ee=A.getDay(),j=0===ee?-3:4-ee;return Ut(A.getFullYear(),A.getMonth(),A.getDate()+j)}function hn(A,ee=!1){return function(j,P){let q;if(ee){const ce=new Date(j.getFullYear(),j.getMonth(),1).getDay()-1,oe=j.getDate();q=1+Math.floor((oe+ce)/7)}else{const ce=wn(j),oe=function Vn(A){const ee=Ut(A,0,1).getDay();return Ut(A,0,1+(ee<=4?4:11)-ee)}(ce.getFullYear()),ne=ce.getTime()-oe.getTime();q=1+Math.round(ne/6048e5)}return ht(q,A,fe(P,5))}}function Pt(A,ee=!1){return function(j,P){return ht(wn(j).getFullYear(),A,fe(P,5),ee)}}const _n={};function $t(A,ee){A=A.replace(/:/g,"");const j=Date.parse("Jan 01, 1970 00:00:00 "+A)/6e4;return isNaN(j)?ee:j}function Zn(A){return A instanceof Date&&!isNaN(A.valueOf())}const Vt=/\s+/,Gt=[];let cn=(()=>{class A{_ngEl;_renderer;initialClasses=Gt;rawClass;stateMap=new Map;constructor(j,P){this._ngEl=j,this._renderer=P}set klass(j){this.initialClasses=null!=j?j.trim().split(Vt):Gt}set ngClass(j){this.rawClass="string"==typeof j?j.trim().split(Vt):j}ngDoCheck(){for(const P of this.initialClasses)this._updateState(P,!0);const j=this.rawClass;if(Array.isArray(j)||j instanceof Set)for(const P of j)this._updateState(P,!0);else if(null!=j)for(const P of Object.keys(j))this._updateState(P,!!j[P]);this._applyStateDiff()}_updateState(j,P){const q=this.stateMap.get(j);void 0!==q?(q.enabled!==P&&(q.changed=!0,q.enabled=P),q.touched=!0):this.stateMap.set(j,{enabled:P,changed:!0,touched:!0})}_applyStateDiff(){for(const j of this.stateMap){const P=j[0],q=j[1];q.changed?(this._toggleClass(P,q.enabled),q.changed=!1):q.touched||(q.enabled&&this._toggleClass(P,!1),this.stateMap.delete(P)),q.touched=!1}}_toggleClass(j,P){(j=j.trim()).length>0&&j.split(Vt).forEach(q=>{P?this._renderer.addClass(this._ngEl.nativeElement,q):this._renderer.removeClass(this._ngEl.nativeElement,q)})}static \u0275fac=function(P){return new(P||A)(S.rXU(S.aKT),S.rXU(S.sFG))};static \u0275dir=S.FsC({type:A,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return A})();class zn{$implicit;ngForOf;index;count;constructor(ee,j,P,q){this.$implicit=ee,this.ngForOf=j,this.index=P,this.count=q}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Tn=(()=>{class A{_viewContainer;_template;_differs;set ngForOf(j){this._ngForOf=j,this._ngForOfDirty=!0}set ngForTrackBy(j){this._trackByFn=j}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(j,P,q){this._viewContainer=j,this._template=P,this._differs=q}set ngForTemplate(j){j&&(this._template=j)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const j=this._ngForOf;!this._differ&&j&&(this._differ=this._differs.find(j).create(this.ngForTrackBy))}if(this._differ){const j=this._differ.diff(this._ngForOf);j&&this._applyChanges(j)}}_applyChanges(j){const P=this._viewContainer;j.forEachOperation((q,ce,oe)=>{if(null==q.previousIndex)P.createEmbeddedView(this._template,new zn(q.item,this._ngForOf,-1,-1),null===oe?void 0:oe);else if(null==oe)P.remove(null===ce?void 0:ce);else if(null!==ce){const ne=P.get(ce);P.move(ne,oe),sr(ne,q)}});for(let q=0,ce=P.length;q<ce;q++){const ne=P.get(q).context;ne.index=q,ne.count=ce,ne.ngForOf=this._ngForOf}j.forEachIdentityChange(q=>{sr(P.get(q.currentIndex),q)})}static ngTemplateContextGuard(j,P){return!0}static \u0275fac=function(P){return new(P||A)(S.rXU(S.c1b),S.rXU(S.C4Q),S.rXU(s._q3))};static \u0275dir=S.FsC({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return A})();function sr(A,ee){A.context.$implicit=ee.item}let Tr=(()=>{class A{_viewContainer;_context=new mr;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(j,P){this._viewContainer=j,this._thenTemplateRef=P}set ngIf(j){this._context.$implicit=this._context.ngIf=j,this._updateView()}set ngIfThen(j){Mn(j),this._thenTemplateRef=j,this._thenViewRef=null,this._updateView()}set ngIfElse(j){Mn(j),this._elseTemplateRef=j,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(j,P){return!0}static \u0275fac=function(P){return new(P||A)(S.rXU(S.c1b),S.rXU(S.C4Q))};static \u0275dir=S.FsC({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return A})();class mr{$implicit=null;ngIf=null}function Mn(A,ee){if(A&&!A.createEmbeddedView)throw new o.buA(2020,!1)}let Se=(()=>{class A{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(j){this._viewContainerRef=j}ngOnChanges(j){if(this._shouldRecreateView(j)){const P=this._viewContainerRef;if(this._viewRef&&P.remove(P.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const q=this._createContextForwardProxy();this._viewRef=P.createEmbeddedView(this.ngTemplateOutlet,q,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(j){return!!j.ngTemplateOutlet||!!j.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(j,P,q)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,P,q),get:(j,P,q)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,P,q)}})}static \u0275fac=function(P){return new(P||A)(S.rXU(S.c1b))};static \u0275dir=S.FsC({type:A,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[S.OA$]})}return A})();function St(A,ee){return new o.buA(2100,!1)}const Ur=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let Qn=(()=>{class A{transform(j){if(null==j)return null;if("string"!=typeof j)throw St();return j.replace(Ur,P=>P[0].toUpperCase()+P.slice(1).toLowerCase())}static \u0275fac=function(P){return new(P||A)};static \u0275pipe=S.EJ8({name:"titlecase",type:A,pure:!0})}return A})();const yr=new o.nKC(""),ar=new o.nKC("");let nr=(()=>{class A{locale;defaultTimezone;defaultOptions;constructor(j,P,q){this.locale=j,this.defaultTimezone=P,this.defaultOptions=q}transform(j,P,q,ce){if(null==j||""===j||j!=j)return null;try{return At(j,P??this.defaultOptions?.dateFormat??"mediumDate",ce||this.locale,q??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(oe){throw St()}}static \u0275fac=function(P){return new(P||A)(S.rXU(S.xe9,16),S.rXU(yr,24),S.rXU(ar,24))};static \u0275pipe=S.EJ8({name:"date",type:A,pure:!0})}return A})(),pe=(()=>{class A{static \u0275fac=function(P){return new(P||A)};static \u0275mod=S.$C({type:A});static \u0275inj=o.G2t({})}return A})()},2512(Wt,ut,b){"use strict";function s(S,Pe){Pe=encodeURIComponent(Pe);for(const Ce of S.split(";")){const k=Ce.indexOf("="),[Le,Je]=-1==k?[Ce,""]:[Ce.slice(0,k),Ce.slice(k+1)];if(Le.trim()===Pe)return decodeURIComponent(Je)}return null}b.d(ut,{N:()=>o,b:()=>s});class o{}},2541(Wt,ut,b){"use strict";b.d(ut,{c:()=>Le});var s=b(5705),o=b(9596);let S;const Ce=(Je,me,ie)=>{const we=me.startsWith("animation")?(Je=>(void 0===S&&(S=void 0===Je.style.animationName&&void 0!==Je.style.webkitAnimationName?"-webkit-":""),S))(Je):"";Je.style.setProperty(we+me,ie)},k=(Je=[],me)=>{if(void 0!==me){const ie=Array.isArray(me)?me:[me];return[...Je,...ie]}return Je},Le=Je=>{let me,ie,we,l,p,m,K,Re,ve,Ye,Fe,v=[],_=[],D=[],L=!1,ae={},B=[],Z=[],G={},he=0,fe=!1,_e=!1,ge=!0,nt=!1,ze=!0,xe=!1;const rt=Je,Ve=[],Ae=[],H=[],ye=[],Me=[],He=[],ot=[],pt=[],At=[],vt=[],Ut=[],dt="function"==typeof AnimationEffect||void 0!==o.w&&"function"==typeof o.w.AnimationEffect,Bt="function"==typeof Element&&"function"==typeof Element.prototype.animate&&dt,ht=()=>Ut,yt=(Se,et)=>{const St=et.findIndex(Xt=>Xt.c===Se);St>-1&&et.splice(St,1)},en=(Se,et)=>((et?.oneTimeCallback?Ae:Ve).push({c:Se,o:et}),Fe),Vn=()=>{Bt&&(Ut.forEach(Se=>{Se.cancel()}),Ut.length=0)},wn=()=>{He.forEach(Se=>{Se?.parentNode&&Se.parentNode.removeChild(Se)}),He.length=0},gr=()=>void 0!==p?p:K?K.getFill():"both",Sr=()=>void 0!==Re?Re:void 0!==m?m:K?K.getDirection():"normal",Ar=()=>fe?"linear":void 0!==we?we:K?K.getEasing():"linear",Jn=()=>_e?0:void 0!==ve?ve:void 0!==ie?ie:K?K.getDuration():0,er=()=>void 0!==l?l:K?K.getIterations():1,vr=()=>void 0!==Ye?Ye:void 0!==me?me:K?K.getDelay():0,Gt=()=>{0!==he&&(he--,0===he&&((()=>{At.forEach(vn=>vn()),vt.forEach(vn=>vn());const Se=ge?1:0,et=B,St=Z,Xt=G;ye.forEach(vn=>{const On=vn.classList;et.forEach(Rn=>On.add(Rn)),St.forEach(Rn=>On.remove(Rn));for(const Rn in Xt)Xt.hasOwnProperty(Rn)&&Ce(vn,Rn,Xt[Rn])}),ve=void 0,Re=void 0,Ye=void 0,Ve.forEach(vn=>vn.c(Se,Fe)),Ae.forEach(vn=>vn.c(Se,Fe)),Ae.length=0,ze=!0,ge&&(nt=!0),ge=!0})(),K&&K.animationFinish()))},ln=()=>{(()=>{ot.forEach(Xt=>Xt()),pt.forEach(Xt=>Xt());const Se=_,et=D,St=ae;ye.forEach(Xt=>{const vn=Xt.classList;Se.forEach(On=>vn.add(On)),et.forEach(On=>vn.remove(On));for(const On in St)St.hasOwnProperty(On)&&Ce(Xt,On,St[On])})})(),v.length>0&&Bt&&(ye.forEach(Se=>{const et=Se.animate(v,{id:rt,delay:vr(),duration:Jn(),easing:Ar(),iterations:er(),fill:gr(),direction:Sr()});et.pause(),Ut.push(et)}),Ut.length>0&&(Ut[0].onfinish=()=>{Gt()})),L=!0},fn=Se=>{Se=Math.min(Math.max(Se,0),.9999),Bt&&Ut.forEach(et=>{et.currentTime=et.effect.getComputedTiming().delay+Jn()*Se,et.pause()})},zn=Se=>{Ut.forEach(et=>{et.effect.updateTiming({delay:vr(),duration:Jn(),easing:Ar(),iterations:er(),fill:gr(),direction:Sr()})}),void 0!==Se&&fn(Se)},Tn=(Se=!1,et=!0,St)=>(Se&&Me.forEach(Xt=>{Xt.update(Se,et,St)}),Bt&&zn(St),Fe),mr=()=>{L&&(Bt?Ut.forEach(Se=>{Se.pause()}):ye.forEach(Se=>{Ce(Se,"animation-play-state","paused")}),xe=!0)},ke=Se=>new Promise(et=>{Se?.sync&&(_e=!0,en(()=>_e=!1,{oneTimeCallback:!0})),L||ln(),nt&&(Bt&&(fn(0),zn()),nt=!1),ze&&(he=Me.length+1,ze=!1);const St=()=>{yt(Xt,Ae),et()},Xt=()=>{yt(St,H),et()};en(Xt,{oneTimeCallback:!0}),(Se=>{H.push({c:Se,o:{oneTimeCallback:!0}})})(St),Me.forEach(vn=>{vn.play()}),Bt?(Ut.forEach(Se=>{Se.play()}),(0===v.length||0===ye.length)&&Gt()):Gt(),xe=!1}),tt=(Se,et)=>{const St=v[0];return void 0===St||void 0!==St.offset&&0!==St.offset?v=[{offset:0,[Se]:et},...v]:St[Se]=et,Fe};return Fe={parentAnimation:K,elements:ye,childAnimations:Me,id:rt,animationFinish:Gt,from:tt,to:(Se,et)=>{const St=v[v.length-1];return void 0===St||void 0!==St.offset&&1!==St.offset?v=[...v,{offset:1,[Se]:et}]:St[Se]=et,Fe},fromTo:(Se,et,St)=>tt(Se,et).to(Se,St),parent:Se=>(K=Se,Fe),play:ke,pause:()=>(Me.forEach(Se=>{Se.pause()}),mr(),Fe),stop:()=>{Me.forEach(Se=>{Se.stop()}),L&&(Vn(),L=!1),fe=!1,_e=!1,ze=!0,Re=void 0,ve=void 0,Ye=void 0,he=0,nt=!1,ge=!0,xe=!1,H.forEach(Se=>Se.c(0,Fe)),H.length=0},destroy:Se=>(Me.forEach(et=>{et.destroy(Se)}),(Se=>{Vn(),Se&&wn()})(Se),ye.length=0,Me.length=0,v.length=0,Ve.length=0,Ae.length=0,L=!1,ze=!0,Fe),keyframes:Se=>{const et=v!==Se;return v=Se,et&&(Se=>{Bt&&ht().forEach(et=>{const St=et.effect;if(St.setKeyframes)St.setKeyframes(Se);else{const Xt=new KeyframeEffect(St.target,Se,St.getTiming());et.effect=Xt}})})(v),Fe},addAnimation:Se=>{if(null!=Se)if(Array.isArray(Se))for(const et of Se)et.parent(Fe),Me.push(et);else Se.parent(Fe),Me.push(Se);return Fe},addElement:Se=>{if(null!=Se)if(1===Se.nodeType)ye.push(Se);else if(Se.length>=0)for(let et=0;et<Se.length;et++)ye.push(Se[et]);else(0,s.j)("createAnimation - Invalid addElement value.");return Fe},update:Tn,fill:Se=>(p=Se,Tn(!0),Fe),direction:Se=>(m=Se,Tn(!0),Fe),iterations:Se=>(l=Se,Tn(!0),Fe),duration:Se=>(!Bt&&0===Se&&(Se=1),ie=Se,Tn(!0),Fe),easing:Se=>(we=Se,Tn(!0),Fe),delay:Se=>(me=Se,Tn(!0),Fe),getWebAnimations:ht,getKeyframes:()=>v,getFill:gr,getDirection:Sr,getDelay:vr,getIterations:er,getEasing:Ar,getDuration:Jn,afterAddRead:Se=>(At.push(Se),Fe),afterAddWrite:Se=>(vt.push(Se),Fe),afterClearStyles:(Se=[])=>{for(const et of Se)G[et]="";return Fe},afterStyles:(Se={})=>(G=Se,Fe),afterRemoveClass:Se=>(Z=k(Z,Se),Fe),afterAddClass:Se=>(B=k(B,Se),Fe),beforeAddRead:Se=>(ot.push(Se),Fe),beforeAddWrite:Se=>(pt.push(Se),Fe),beforeClearStyles:(Se=[])=>{for(const et of Se)ae[et]="";return Fe},beforeStyles:(Se={})=>(ae=Se,Fe),beforeRemoveClass:Se=>(D=k(D,Se),Fe),beforeAddClass:Se=>(_=k(_,Se),Fe),onFinish:en,isRunning:()=>0!==he&&!xe,progressStart:(Se=!1,et)=>(Me.forEach(St=>{St.progressStart(Se,et)}),mr(),fe=Se,L||ln(),Tn(!1,!0,et),Fe),progressStep:Se=>(Me.forEach(et=>{et.progressStep(Se)}),fn(Se),Fe),progressEnd:(Se,et,St)=>(fe=!1,Me.forEach(Xt=>{Xt.progressEnd(Se,et,St)}),void 0!==St&&(ve=St),nt=!1,ge=!0,0===Se?(Re="reverse"===Sr()?"normal":"reverse","reverse"===Re&&(ge=!1),Bt?(Tn(),fn(1-et)):(Ye=(1-et)*Jn()*-1,Tn(!1,!1))):1===Se&&(Bt?(Tn(),fn(et)):(Ye=et*Jn()*-1,Tn(!1,!1))),void 0!==Se&&!K&&ke(),Fe)}}},2615(Wt,ut,b){"use strict";let s;function o(){return s}function S(M){const re=s;return s=M,re}b.d(ut,{JEi:()=>at,Isx:()=>ct,EJG:()=>Or,Yrj:()=>_r,VVG:()=>Dn,Y20:()=>tn,SKP:()=>jn,hk6:()=>oc,eVN:()=>Es,b5C:()=>Rr,rQE:()=>ao,X5O:()=>qr,qFA:()=>jt,qQL:()=>lr,abz:()=>Gr,tQN:()=>le,pcR:()=>U,oMQ:()=>vo,Mlv:()=>kr,MZA:()=>Wr,M0L:()=>kn,Z63:()=>Dr,VML:()=>ic,uvJ:()=>x,zcH:()=>gi,Wg1:()=>je,Yw1:()=>Mt,jgP:()=>Q,tcA:()=>Zt,ID:()=>Ro,YEL:()=>Yn,B9r:()=>Lr,GBX:()=>cr,ZTf:()=>Is,nKC:()=>hn,zZn:()=>co,rJ1:()=>fs,nfM:()=>Qt,s6P:()=>Ct,K29:()=>xt,CQl:()=>er,p9y:()=>Sn,zSs:()=>Ir,ONQ:()=>wn,hmW:()=>$r,yAH:()=>Vn,KXn:()=>mo,oTH:()=>Kr,Czx:()=>O,f7T:()=>mt,wVl:()=>Zr,GYQ:()=>Tl,u5s:()=>mi,rev:()=>Zo,Ds7:()=>Do,e5P:()=>Te,Iaj:()=>Oe,GpT:()=>Mr,buA:()=>v,AQb:()=>Ea,jNX:()=>ai,eDl:()=>de,qlT:()=>kt,bm_:()=>Lt,RxE:()=>we,r4V:()=>Il,ok8:()=>m,Evm:()=>wl,Jy$:()=>Ml,laP:()=>L,EYC:()=>Ln,ng7:()=>Xr,llW:()=>nr,gsJ:()=>ar,GZS:()=>Eo,iYM:()=>pt,PEr:()=>Wo,z7f:()=>vt,LZP:()=>Ut,Xln:()=>xe,yzR:()=>si,TWe:()=>$i,LIA:()=>Fe,GWr:()=>Me,pbo:()=>He,bBq:()=>wo,Af3:()=>Ee,zQk:()=>Ko,oZy:()=>Ms,tF7:()=>dt,ZFY:()=>Br,cP4:()=>qo,MdC:()=>rs,XvL:()=>H,KET:()=>fo,Tkx:()=>ii,iw4:()=>rt,tdH:()=>xh,pr_:()=>ht,IAh:()=>Ae,U45:()=>ge,WrV:()=>nt,kNT:()=>Bt,MI:()=>Ui,biv:()=>Us,ZQF:()=>Ve,Cv0:()=>ze,W0r:()=>Qr,R2n:()=>En,O8q:()=>Ge,VKj:()=>ue,Rom:()=>un,z6V:()=>On,n$e:()=>he,hjC:()=>St,Pz9:()=>pr,PQT:()=>Ft,VX4:()=>Vt,_Z$:()=>bn,N79:()=>di,xLP:()=>Qn,zuh:()=>Sr,BI7:()=>gr,U7d:()=>Hn,uXy:()=>ur,nZS:()=>Zn,ihb:()=>c,ID8:()=>d,gv8:()=>Sl,dwj:()=>Z,Bqz:()=>Ur,OsK:()=>D,Rfq:()=>Re,c$7:()=>Js,gxQ:()=>pi,ckz:()=>cs,kLh:()=>B,xUg:()=>Ne,KdJ:()=>eo,db4:()=>os,VPL:()=>Qs,MT:()=>As,Z9v:()=>Ys,Ab:()=>bs,w7Z:()=>Uo,Mx4:()=>qs,veI:()=>Jo,HaV:()=>pe,Agf:()=>Ke,znI:()=>ji,wGu:()=>ir,ebl:()=>Cn,OAn:()=>Gs,_0$:()=>is,UaU:()=>qe,vaC:()=>ps,d31:()=>Bs,ZRn:()=>js,phH:()=>Hr,WbQ:()=>zr,WB9:()=>Y,d_l:()=>vs,vNG:()=>Ho,oyA:()=>A,_px:()=>h,CpD:()=>y,XRZ:()=>ci,klJ:()=>Xs,Fje:()=>$o,b$O:()=>Hi,SMZ:()=>ae,WQX:()=>et,MzJ:()=>gn,jXY:()=>ce,MME:()=>dr,JlV:()=>yo,Qs1:()=>rr,srX:()=>hr,vOT:()=>gs,YWB:()=>Wi,EPY:()=>R,yoD:()=>no,P3H:()=>us,Jzi:()=>Ye,rFz:()=>Ki,JjR:()=>Cs,M6u:()=>Io,KtD:()=>ls,muV:()=>yt,A0l:()=>yn,q$2:()=>In,yP_:()=>ro,EFk:()=>Vr,Hps:()=>Zs,UhH:()=>zo,QuC:()=>ee,Y3W:()=>Nn,n$r:()=>Rh,K7h:()=>br,FRF:()=>xr,ezK:()=>Er,m7n:()=>dn,niQ:()=>te,krE:()=>Vi,bll:()=>Ie,Hh6:()=>Fo,EmA:()=>j,blu:()=>Ks,HAh:()=>ss,WfI:()=>yr,xbp:()=>Rs,jvu:()=>Be,lQ1:()=>sc,Rc9:()=>Xn,E6O:()=>Gn,DyX:()=>Os,eFE:()=>Nr,dMS:()=>ko,HUe:()=>li,nl4:()=>ve,N4e:()=>ns,XaM:()=>Ar,Kw3:()=>Ss,vQI:()=>zi,RZ9:()=>Yo,GA0:()=>f,iMd:()=>fi,Pfq:()=>Xo,xyx:()=>xs,a2B:()=>Mn,kcM:()=>An,DFp:()=>Tt,P2g:()=>Ds,cBl:()=>hi,ypq:()=>E,vPA:()=>Ph,HO5:()=>Al,M_e:()=>Bi,B22:()=>ys,ik5:()=>_s,AsM:()=>G,PP7:()=>tr,$8:()=>At,$Hz:()=>ln,zAe:()=>hs,IvY:()=>xo,_gW:()=>ui,F1c:()=>Vs,ITl:()=>Ws,brz:()=>ne,jRZ:()=>ms,SX7:()=>Ht,jDH:()=>Nt,G2t:()=>on,fuf:()=>ya,cSN:()=>zs,KVO:()=>We,dmw:()=>Se,joV:()=>J,By9:()=>F,qSk:()=>I,Njj:()=>Go,eBV:()=>Ps});const Ce=Symbol("NotFound");function Le(M){return M===Ce||"\u0275NotFound"===M?.name}Error;var Je=b(8440),me=b(4412),ie=b(1985);class we{full;major;minor;patch;constructor(re){this.full=re;const Ue=re.split(".");this.major=Ue[0],this.minor=Ue[1],this.patch=Ue.slice(2).join(".")}}const m="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class v extends Error{code;constructor(re,Ue){super(D(re,Ue)),this.code=re}}function D(M,re){return`${function _(M){return`NG0${Math.abs(M)}`}(M)}${re?": "+re:""}`}const L=globalThis;function ae(){return!1}function B(M){for(let re in M)if(M[re]===B)return re;throw Error("")}function Z(M,re){for(const Ue in re)re.hasOwnProperty(Ue)&&!M.hasOwnProperty(Ue)&&(M[Ue]=re[Ue])}function G(M){if("string"==typeof M)return M;if(Array.isArray(M))return`[${M.map(G).join(", ")}]`;if(null==M)return""+M;const re=M.overriddenName||M.name;if(re)return`${re}`;const Ue=M.toString();if(null==Ue)return""+Ue;const wt=Ue.indexOf("\n");return wt>=0?Ue.slice(0,wt):Ue}function he(M,re){return M?re?`${M} ${re}`:M:re||""}const _e=B({__forward_ref__:B});function Re(M){return M.__forward_ref__=Re,M.toString=function(){return G(this())},M}function ve(M){return Ye(M)?M():M}function Ye(M){return"function"==typeof M&&M.hasOwnProperty(_e)&&M.__forward_ref__===Re}function ge(M,re){"number"!=typeof M&&At(re,typeof M,"number","===")}function nt(M,re,Ue){ge(M,"Expected a number"),function ye(M,re,Ue){M<=re||At(Ue,M,re,"<=")}(M,Ue,"Expected number to be less than or equal to"),He(M,re,"Expected number to be greater than or equal to")}function ze(M,re){"string"!=typeof M&&At(re,null===M?"null":typeof M,"string","===")}function Fe(M,re){"function"!=typeof M&&At(re,null===M?"null":typeof M,"function","===")}function xe(M,re,Ue){M!=re&&At(Ue,M,re,"==")}function rt(M,re,Ue){M==re&&At(Ue,M,re,"!=")}function Ve(M,re,Ue){M!==re&&At(Ue,M,re,"===")}function Ae(M,re,Ue){M===re&&At(Ue,M,re,"!==")}function H(M,re,Ue){M<re||At(Ue,M,re,"<")}function Me(M,re,Ue){M>re||At(Ue,M,re,">")}function He(M,re,Ue){M>=re||At(Ue,M,re,">=")}function pt(M,re){null==M&&At(re,M,null,"!=")}function At(M,re,Ue,wt){throw new Error(`ASSERTION ERROR: ${M}`+(null==wt?"":` [Expected=> ${Ue} ${wt} ${re} <=Actual]`))}function vt(M){M instanceof Node||At(`The provided value must be an instance of a DOM Node but got ${G(M)}`)}function Ut(M){M instanceof Element||At(`The provided value must be an element but got ${G(M)}`)}function dt(M,re){pt(M,"Array must be defined.");const Ue=M.length;(re<0||re>=Ue)&&At(`Index expected to be less than ${Ue} but got ${re}`)}function Bt(M,...re){if(-1!==re.indexOf(M))return!0;At(`Expected value to be one of ${JSON.stringify(re)} but was ${JSON.stringify(M)}.`)}function ht(M){null!==(0,Je.nR)()&&At(`${M}() should never be called in a reactive context.`)}function Nt(M){return{token:M.token,providedIn:M.providedIn||null,factory:M.factory,value:void 0}}function on(M){return{providers:M.providers||[],imports:M.imports||[]}}function ft(M){return function Dt(M,re){return M.hasOwnProperty(re)&&M[re]||null}(M,Vn)}function yt(M){return null!==ft(M)}function Cn(M){return M&&M.hasOwnProperty(wn)?M[wn]:null}const Vn=B({\u0275prov:B}),wn=B({\u0275inj:B});class hn{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(re,Ue){this._desc=re,this.\u0275prov=void 0,"number"==typeof Ue?this.__NG_ELEMENT_ID__=Ue:void 0!==Ue&&(this.\u0275prov=Nt({token:this,providedIn:Ue.providedIn||"root",factory:Ue.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}let Pt;function _n(){return At("getInjectorProfilerContext should never be called in production mode"),Pt}function Tt(M){At("setInjectorProfilerContext should never be called in production mode");const re=Pt;return Pt=M,re}const $t=[],an=()=>{};function An(M){return At("setInjectorProfiler should never be called in production mode"),null!==M?($t.includes(M)||$t.push(M),()=>function pn(M){const re=$t.indexOf(M);-1!==re&&$t.splice(re,1)}(M)):($t.length=0,an)}function or(M){At("Injector profiler should never be called in production mode");for(let re=0;re<$t.length;re++)(0,$t[re])(M)}function Zn(M,re=!1){let Ue;At("Injector profiler should never be called in production mode"),Ue="function"==typeof M||M instanceof hn?M:ve(M.provide);let wt=M;M instanceof hn&&(wt=M.\u0275prov||M),or({type:2,context:_n(),providerRecord:{token:Ue,provider:wt,isViewProvider:re}})}function Hn(M){At("Injector profiler should never be called in production mode"),or({type:4,context:_n(),token:M})}function ur(M){At("Injector profiler should never be called in production mode"),or({type:1,context:_n(),instance:{value:M}})}function gr(M,re,Ue){At("Injector profiler should never be called in production mode"),or({type:0,context:_n(),service:{token:M,value:re,flags:Ue}})}function Sr(M){At("Injector profiler should never be called in production mode"),or({type:3,context:_n(),effect:M})}function Ar(M,re,Ue){At("runInInjectorProfilerContext should never be called in production mode");const wt=Tt({injector:M,token:re});try{Ue()}finally{Tt(wt)}}function Jn(M){return M&&!!M.\u0275providers}const er=B({\u0275cmp:B}),vr=B({\u0275dir:B}),Cr=B({\u0275pipe:B}),$r=B({\u0275mod:B}),Ir=B({\u0275fac:B}),Sn=B({__NG_ELEMENT_ID__:B}),wr=B({__NG_ENV_ID__:B});function Nr(M){return"string"==typeof M?M:null==M?"":String(M)}function tr(M){return"function"==typeof M?M.name||M.toString():"object"==typeof M&&null!=M&&"function"==typeof M.type?M.type.name||M.type.toString():Nr(M)}function bn(M){let re=M[er]||null;return null!==re&&re.debugInfo?function Xe(M){return M.filePath&&M.lineNumber?`${M.className} (at ${M.filePath}:${M.lineNumber})`:M.className}(re.debugInfo):tr(M)}const Ze=B({ngErrorCode:B}),It=B({ngErrorMessage:B}),_t=B({ngTokenPath:B});function Ft(M,re){return Tn("",-200,re)}function Vt(M,re){return function zn(M,re){return M.message=function Kn(M,re,Ue=[],wt=null){let zt="";Ue&&Ue.length>1&&(zt=` Path: ${Ue.join(" -> ")}.`);return D(re,`${M}${wt?` Source: ${wt}.`:""}${zt}`)}(M[It]||M.message,M[Ze],M[_t],re),M}(Ft(0,re),null)}function ln(M,re){throw new v(-201,!1)}function Tn(M,re,Ue){const wt=new v(re,M);return wt[Ze]=re,wt[It]=M,Ue&&(wt[_t]=Ue),wt}let Tr;function mr(){return Tr}function Mn(M){const re=Tr;return Tr=M,re}function gn(M,re,Ue){const wt=ft(M);return wt&&"root"==wt.providedIn?void 0===wt.value?wt.value=wt.factory():wt.value:8&Ue?null:void 0!==re?re:void ln()}function Br(M){}const ke={},st="__NG_DI_FLAG__";class tt{injector;constructor(re){this.injector=re}retrieve(re,Ue){const wt=St(Ue)||0;try{return this.injector.get(re,8&wt?null:ke,wt)}catch(zt){if(Le(zt))return zt;throw zt}}}function be(M,re=0){const Ue=o();if(void 0===Ue)throw new v(-203,!1);if(null===Ue)return gn(M,void 0,re);{const wt=function Xt(M){return{optional:!!(8&M),host:!!(1&M),self:!!(2&M),skipSelf:!!(4&M)}}(re),zt=Ue.retrieve(M,wt);if(Le(zt)){if(wt.optional)return null;throw zt}return zt}}function We(M,re=0){return(mr()||be)(ve(M),re)}function Se(M){throw new v(202,!1)}function et(M,re){return We(M,St(re))}function St(M){return typeof M>"u"||"number"==typeof M?M:0|(M.optional&&8)|(M.host&&1)|(M.self&&2)|(M.skipSelf&&4)}function vn(M){const re=[];for(let Ue=0;Ue<M.length;Ue++){const wt=ve(M[Ue]);if(Array.isArray(wt)){if(0===wt.length)throw new v(900,!1);let zt,Un=0;for(let so=0;so<wt.length;so++){const Lo=wt[so],So=Rn(Lo);"number"==typeof So?-1===So?zt=Lo.token:Un|=So:zt=Lo}re.push(We(zt,Un))}else re.push(We(wt))}return re}function On(M,re){return M[st]=re,M.prototype[st]=re,M}function Rn(M){return M[st]}function ir(M,re){return M.hasOwnProperty(Ir)?M[Ir]:null}function Xr(M,re,Ue){if(M.length!==re.length)return!1;for(let wt=0;wt<M.length;wt++){let zt=M[wt],Un=re[wt];if(Ue&&(zt=Ue(zt),Un=Ue(Un)),Un!==zt)return!1}return!0}function Ur(M){return M.flat(Number.POSITIVE_INFINITY)}function Qn(M,re){M.forEach(Ue=>Array.isArray(Ue)?Qn(Ue,re):re(Ue))}function Ln(M,re,Ue){re>=M.length?M.push(Ue):M.splice(re,0,Ue)}function Gn(M,re){return re>=M.length-1?M.pop():M.splice(re,1)[0]}function yr(M,re){const Ue=[];for(let wt=0;wt<M;wt++)Ue.push(re);return Ue}function ar(M,re,Ue){const wt=M.length-Ue;for(;re<wt;)M[re]=M[re+Ue],re++;for(;Ue--;)M.pop()}function nr(M,re,Ue,wt){let zt=M.length;if(zt==re)M.push(Ue,wt);else if(1===zt)M.push(wt,M[0]),M[0]=Ue;else{for(zt--,M.push(M[zt-1],M[zt]);zt>re;)M[zt]=M[zt-2],zt--;M[re]=Ue,M[re+1]=wt}}function Er(M,re,Ue){let wt=xr(M,re);return wt>=0?M[1|wt]=Ue:(wt=~wt,nr(M,wt,re,Ue)),wt}function br(M,re){const Ue=xr(M,re);if(Ue>=0)return M[1|Ue]}function xr(M,re){return function Fr(M,re,Ue){let wt=0,zt=M.length>>Ue;for(;zt!==wt;){const Un=wt+(zt-wt>>1),so=M[Un<<Ue];if(re===so)return Un<<Ue;so>re?zt=Un:wt=Un+1}return~(zt<<Ue)}(M,re,1)}const Wr={},kr=[],Dr=new hn(""),Yr=new hn("",-1),Lr=new hn("");class Kr{get(re,Ue=ke){if(Ue===ke){const zt=Tn("",-201);throw zt.name="\u0275NotFound",zt}return Ue}}function Hr(M){return M[$r]||null}function zr(M){const re=Hr(M);if(!re)throw new v(915,!1);return re}function Ne(M){return M[er]||null}function Ke(M){const re=pe(M);if(!re)throw new v(916,!1);return re}function pe(M){return M[vr]||null}function A(M){return M[Cr]||null}function ee(M){const re=Ne(M)||pe(M)||A(M);return null!==re&&re.standalone}function j(M){return{\u0275providers:M}}function q(...M){return{\u0275providers:ce(0,M),\u0275fromNgModule:!0}}function ce(M,...re){const Ue=[],wt=new Set;let zt;const Un=so=>{Ue.push(so)};return Qn(re,so=>{const Lo=so;ne(Lo,Un,[],wt)&&(zt||=[],zt.push(Lo))}),void 0!==zt&&oe(zt,Un),Ue}function oe(M,re){for(let Ue=0;Ue<M.length;Ue++){const{ngModule:wt,providers:zt}=M[Ue];bt(zt,Un=>{re(Un,wt)})}}function ne(M,re,Ue,wt){if(!(M=ve(M)))return!1;let zt=null,Un=Cn(M);const so=!Un&&Ne(M);if(Un||so){if(so&&!so.standalone)return!1;zt=M}else{const So=M.ngModule;if(Un=Cn(So),!Un)return!1;zt=So}const Lo=wt.has(zt);if(so){if(Lo)return!1;if(wt.add(zt),so.dependencies){const So="function"==typeof so.dependencies?so.dependencies():so.dependencies;for(const ho of So)ne(ho,re,Ue,wt)}}else{if(!Un)return!1;{if(null!=Un.imports&&!Lo){let ho;wt.add(zt);try{Qn(Un.imports,Ns=>{ne(Ns,re,Ue,wt)&&(ho||=[],ho.push(Ns))})}finally{}void 0!==ho&&oe(ho,re)}if(!Lo){const ho=ir(zt)||(()=>new zt);re({provide:zt,useFactory:ho,deps:kr},zt),re({provide:Lr,useValue:zt,multi:!0},zt),re({provide:Dr,useValue:()=>We(zt),multi:!0},zt)}const So=Un.providers;if(null!=So&&!Lo){const ho=M;bt(So,Ns=>{re(Ns,ho)})}}}return zt!==M&&void 0!==M.providers}function bt(M,re){for(let Ue of M)Jn(Ue)&&(Ue=Ue.\u0275providers),Array.isArray(Ue)?bt(Ue,re):re(Ue)}const qt=B({provide:String,useValue:B});function Jt(M){return null!==M&&"object"==typeof M&&qt in M}function Nn(M){return"function"==typeof M}function dr(M){return!!M.useClass}const cr=new hn(""),fr={},W={};let Bn;function Y(){return void 0===Bn&&(Bn=new Kr),Bn}class x{}class Te extends x{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(re,Ue,wt,zt){super(),this.parent=Ue,this.source=wt,this.scopes=zt,Ao(re,so=>this.processProvider(so)),this.records.set(Yr,Pr(void 0,this)),zt.has("environment")&&this.records.set(x,Pr(void 0,this));const Un=this.records.get(cr);null!=Un&&"string"==typeof Un.value&&this.scopes.add(Un.value),this.injectorDefTypes=new Set(this.get(Lr,kr,{self:!0}))}retrieve(re,Ue){const wt=St(Ue)||0;try{return this.get(re,ke,wt)}catch(zt){if(Le(zt))return zt;throw zt}}destroy(){Wn(this),this._destroyed=!0;const re=(0,Je.Ht)(null);try{for(const wt of this._ngOnDestroyHooks)wt.ngOnDestroy();const Ue=this._onDestroyHooks;this._onDestroyHooks=[];for(const wt of Ue)wt()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),(0,Je.Ht)(re)}}onDestroy(re){return Wn(this),this._onDestroyHooks.push(re),()=>this.removeOnDestroy(re)}runInContext(re){Wn(this);const Ue=S(this),wt=Mn(void 0);try{return re()}finally{S(Ue),Mn(wt)}}get(re,Ue=ke,wt){if(Wn(this),re.hasOwnProperty(wr))return re[wr](this);const zt=St(wt),so=S(this),Lo=Mn(void 0);try{if(!(4&zt)){let ho=this.records.get(re);if(void 0===ho){const Ns=function ts(M){return"function"==typeof M||"object"==typeof M&&"InjectionToken"===M.ngMetadataName}(re)&&ft(re);ho=Ns&&this.injectableDefInScope(Ns)?Pr(Fn(re),fr):null,this.records.set(re,ho)}if(null!=ho)return this.hydrate(re,ho,zt)}return(2&zt?Y():this.parent).get(re,Ue=8&zt&&Ue===ke?null:Ue)}catch(So){const ho=function sr(M){return M[Ze]}(So);throw-200===ho||-201===ho?new v(ho,null):So}finally{Mn(Lo),S(so)}}resolveInjectorInitializers(){const re=(0,Je.Ht)(null),Ue=S(this),wt=Mn(void 0);try{const Un=this.get(Dr,kr,{self:!0});for(const so of Un)so()}finally{S(Ue),Mn(wt),(0,Je.Ht)(re)}}toString(){const re=[],Ue=this.records;for(const wt of Ue.keys())re.push(G(wt));return`R3Injector[${re.join(", ")}]`}processProvider(re){let Ue=Nn(re=ve(re))?re:ve(re&&re.provide);const wt=function Pn(M){return Jt(M)?Pr(void 0,M.useValue):Pr(Xn(M),fr)}(re);if(!Nn(re)&&!0===re.multi){let zt=this.records.get(Ue);zt||(zt=Pr(void 0,fr,!0),zt.factory=()=>vn(zt.multi),this.records.set(Ue,zt)),Ue=re,zt.multi.push(re)}this.records.set(Ue,wt)}hydrate(re,Ue,wt){const zt=(0,Je.Ht)(null);try{if(Ue.value===W)throw Ft(G(re));return Ue.value===fr&&(Ue.value=W,Ue.value=Ue.factory(void 0,wt)),"object"==typeof Ue.value&&Ue.value&&function go(M){return null!==M&&"object"==typeof M&&"function"==typeof M.ngOnDestroy}(Ue.value)&&this._ngOnDestroyHooks.add(Ue.value),Ue.value}finally{(0,Je.Ht)(zt)}}injectableDefInScope(re){if(!re.providedIn)return!1;const Ue=ve(re.providedIn);return"string"==typeof Ue?"any"===Ue||this.scopes.has(Ue):this.injectorDefTypes.has(Ue)}removeOnDestroy(re){const Ue=this._onDestroyHooks.indexOf(re);-1!==Ue&&this._onDestroyHooks.splice(Ue,1)}}function Fn(M){const re=ft(M),Ue=null!==re?re.factory:ir(M);if(null!==Ue)return Ue;if(M instanceof hn)throw new v(204,!1);if(M instanceof Function)return function Yt(M){if(M.length>0)throw new v(204,!1);const Ue=function en(M){return(M?.[Vn]??null)||null}(M);return null!==Ue?()=>Ue.factory(M):()=>new M}(M);throw new v(204,!1)}function Xn(M,re,Ue){let wt;if(Nn(M)){const zt=ve(M);return ir(zt)||Fn(zt)}if(Jt(M))wt=()=>ve(M.useValue);else if(function Kt(M){return!(!M||!M.useFactory)}(M))wt=()=>M.useFactory(...vn(M.deps||[]));else if(function rn(M){return!(!M||!M.useExisting)}(M))wt=(zt,Un)=>We(ve(M.useExisting),void 0!==Un&&8&Un?8:void 0);else{const zt=ve(M&&(M.useClass||M.provide));if(!function uo(M){return!!M.deps}(M))return ir(zt)||Fn(zt);wt=()=>new zt(...vn(M.deps))}return wt}function Wn(M){if(M.destroyed)throw new v(205,!1)}function Pr(M,re,Ue=!1){return{factory:M,value:re,multi:Ue?[]:void 0}}function Ao(M,re){for(const Ue of M)Array.isArray(Ue)?Ao(Ue,re):Ue&&Jn(Ue)?Ao(Ue.\u0275providers,re):re(Ue)}function ns(M,re){let Ue;M instanceof Te?(Wn(M),Ue=M):Ue=new tt(M);const zt=S(Ue),Un=Mn(void 0);try{return re()}finally{S(zt),Mn(Un)}}function Io(){return void 0!==mr()||null!=o()}function Ee(M){if(!Io())throw new v(-203,!1)}const Q=0,de=1,je=2,mt=3,xt=4,kt=5,Zt=6,Dn=7,jn=8,Yn=9,kn=10,Mr=11,Or=12,_r=13,qr=14,Rr=15,ao=16,Zr=17,Do=18,Ro=19,vo=20,O=21,U=22,le=23,Oe=24,at=25,ct=26,Mt=27,jt=6,Ct=7,Lt=8,Qt=9,tn=10;function In(M){return Array.isArray(M)&&"object"==typeof M[1]}function yn(M){return Array.isArray(M)&&!0===M[1]}function hr(M){return!!(4&M.flags)}function rr(M){return M.componentOffset>-1}function no(M){return!(1&~M.flags)}function yo(M){return!!M.template}function Vr(M){return!!(512&M[je])}function R(M){return!(256&~M[je])}function ue(M,re){un(M,re[de])}function Ge(M,re){const Ue=re+Mt;dt(M,Ue),H(Ue,M[de].bindingStartIndex,"TNodes should be created before any bindings")}function un(M,re){En(M);const Ue=re.data;for(let wt=Mt;wt<Ue.length;wt++)if(Ue[wt]===M)return;At("This TNode does not belong to this TView.")}function En(M){pt(M,"TNode must be defined"),M&&"object"==typeof M&&M.hasOwnProperty("directiveStylingLast")||At("Not of type TNode, got: "+M)}function Qr(M){pt(M,"Expected TIcu to be defined"),"number"!=typeof M.currentCaseLViewIndex&&At("Object is not of TIcu type.")}function Eo(M,re="Type passed in is not ComponentType, it does not have '\u0275cmp' property."){Ne(M)||At(re)}function fo(M,re="Type passed in is not NgModuleType, it does not have '\u0275mod' property."){Hr(M)||At(re)}function wo(M){pt(M,"currentTNode should exist!"),pt(M.parent,"currentTNode should have a parent")}function qo(M){pt(M,"LContainer must be defined"),xe(yn(M),!0,"Expecting LContainer")}function rs(M){pt(M,"LView must be defined"),xe(In(M),!0,"Expecting LView")}function si(M,re){xe(M.firstCreatePass,!0,re||"Should only be called in first create pass.")}function $i(M,re){xe(M.firstUpdatePass,!0,"Should only be called in first update pass.")}function Wo(M){(void 0===M.type||null==M.selectors||void 0===M.inputs)&&At("Expected a DirectiveDef/ComponentDef and this object does not seem to have the expected shape.")}function Ko(M,re){Qo(Mt,M.bindingStartIndex,re)}function Ms(M,re){Qo(M[1].expandoStartIndex,M.length,re)}function Qo(M,re,Ue){M<=Ue&&Ue<re||At(`Index out of range (expecting ${M} <= ${Ue} < ${re})`)}function Us(M,re){pt(M[Rr],"Component views should exist."),pt(M[Rr][kt].projection,"Components with projection nodes (<ng-content>) must have projection slots defined.")}function Ui(M,re){pt(M,"Component views should always have a parent view (component's host view)")}function ii(M,re){Ms(M,re),Ms(M,re+8),ge(M[re+0],"injectorIndex should point to a bloom filter"),ge(M[re+1],"injectorIndex should point to a bloom filter"),ge(M[re+2],"injectorIndex should point to a bloom filter"),ge(M[re+3],"injectorIndex should point to a bloom filter"),ge(M[re+4],"injectorIndex should point to a bloom filter"),ge(M[re+5],"injectorIndex should point to a bloom filter"),ge(M[re+6],"injectorIndex should point to a bloom filter"),ge(M[re+7],"injectorIndex should point to a bloom filter"),ge(M[re+8],"injectorIndex should point to parent injector")}const ai="svg",fs="math";function xo(M){for(;Array.isArray(M);)M=M[Q];return M}function hs(M){for(;Array.isArray(M);){if("object"==typeof M[1])return M;M=M[Q]}return null}function ps(M,re){return xo(re[M])}function Bs(M,re){return xo(re[M.index])}function js(M,re){const Ue=null===M?-1:M.index;return-1!==Ue?xo(re[Ue]):null}function ci(M,re){return M.data[re]}function Fo(M,re){return M[re]}function Bi(M,re,Ue,wt){Ue>=M.data.length&&(M.data[Ue]=null,M.blueprint[Ue]=null),re[Ue]=wt}function eo(M,re){const Ue=re[M];return In(Ue)?Ue:Ue[Q]}function gs(M){return!(4&~M[je])}function Vs(M){return!(128&~M[je])}function Ws(M){return yn(M[mt])}function os(M,re){return null==re?null:M[re]}function li(M){M[Zr]=0}function ss(M){1024&M[je]||(M[je]|=1024,Vs(M)&&Ks(M))}function ms(M,re){for(;M>0;)re=re[qr],M--;return re}function ko(M){return!!(9216&M[je]||M[Oe]?.dirty)}function ui(M){M[kn].changeDetectionScheduler?.notify(8),64&M[je]&&(M[je]|=1024),ko(M)&&Ks(M)}function Ks(M){M[kn].changeDetectionScheduler?.notify(0);let re=is(M);for(;null!==re&&!(8192&re[je])&&(re[je]|=8192,Vs(re));)re=is(re)}function _s(M,re){if(R(M))throw new v(911,!1);null===M[O]&&(M[O]=[]),M[O].push(re)}function Os(M,re){if(null===M[O])return;const Ue=M[O].indexOf(re);-1!==Ue&&M[O].splice(Ue,1)}function is(M){const re=M[mt];return yn(re)?re[mt]:re}function vs(M){return M[Dn]??=[]}function Ho(M){return M.cleanup??=[]}function ys(M,re,Ue,wt){const zt=vs(re);zt.push(Ue),M.firstCreatePass&&Ho(M).push(wt,zt.length-1)}const qn={lFrame:N(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Es=function(M){return M[M.Off=0]="Off",M[M.Exhaustive=1]="Exhaustive",M[M.OnlyDirtyViews=2]="OnlyDirtyViews",M}(Es||{});let as=0,Hs=!1;function ji(){return qn.lFrame.elementDepthCount}function $o(){qn.lFrame.elementDepthCount++}function di(){qn.lFrame.elementDepthCount--}function cs(){return qn.bindingsEnabled}function ls(){return null!==qn.skipHydrationRootTNode}function zo(M){return qn.skipHydrationRootTNode===M}function zs(){qn.bindingsEnabled=!0}function ya(){qn.bindingsEnabled=!1}function Vi(){qn.skipHydrationRootTNode=null}function Gs(){return qn.lFrame.lView}function Xs(){return qn.lFrame.tView}function Ps(M){return qn.lFrame.contextLView=M,M[jn]}function Go(M){return qn.lFrame.contextLView=null,M}function qs(){let M=Jo();for(;null!==M&&64===M.type;)M=M.parent;return M}function Jo(){return qn.lFrame.currentTNode}function bs(){const M=qn.lFrame,re=M.currentTNode;return M.isParent?re:re.parent}function fi(M,re){const Ue=qn.lFrame;Ue.currentTNode=M,Ue.isParent=re}function Wi(){return qn.lFrame.isParent}function Xo(){qn.lFrame.isParent=!1}function Qs(){return qn.lFrame.contextLView}function Ki(){return At("Must never be called in production mode"),as!==Es.Off}function us(){return At("Must never be called in production mode"),as===Es.Exhaustive}function Ds(M){At("Must never be called in production mode"),as=M}function ro(){return Hs}function hi(M){const re=Hs;return Hs=M,re}function pi(){const M=qn.lFrame;let re=M.bindingRootIndex;return-1===re&&(re=M.bindingRootIndex=M.tView.bindingStartIndex),re}function Js(){return qn.lFrame.bindingIndex}function Ss(M){return qn.lFrame.bindingIndex=M}function Rs(){return qn.lFrame.bindingIndex++}function Hi(M){const re=qn.lFrame,Ue=re.bindingIndex;return re.bindingIndex=re.bindingIndex+M,Ue}function Cs(){return qn.lFrame.inI18n}function xs(M){qn.lFrame.inI18n=M}function zi(M,re){const Ue=qn.lFrame;Ue.bindingIndex=Ue.bindingRootIndex=M,Yo(re)}function Ys(){return qn.lFrame.currentDirectiveIndex}function Yo(M){qn.lFrame.currentDirectiveIndex=M}function As(M){const re=qn.lFrame.currentDirectiveIndex;return-1===re?null:M[re]}function Uo(){return qn.lFrame.currentQueryIndex}function f(M){qn.lFrame.currentQueryIndex=M}function u(M){const re=M[de];return 2===re.type?re.declTNode:1===re.type?M[kt]:null}function c(M,re,Ue){if(4&Ue){let zt=re,Un=M;for(;!(zt=zt.parent,null!==zt||1&Ue||(zt=u(Un),null===zt||(Un=Un[qr],10&zt.type))););if(null===zt)return!1;re=zt,M=Un}const wt=qn.lFrame=w();return wt.currentTNode=re,wt.lView=M,!0}function d(M){const re=w(),Ue=M[de];qn.lFrame=re,re.currentTNode=Ue.firstChild,re.lView=M,re.tView=Ue,re.contextLView=M,re.bindingIndex=Ue.bindingStartIndex,re.inI18n=!1}function w(){const M=qn.lFrame,re=null===M?null:M.child;return null===re?N(M):re}function N(M){const re={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:M,child:null,inI18n:!1};return null!==M&&(M.child=re),re}function V(){const M=qn.lFrame;return qn.lFrame=M.parent,M.currentTNode=null,M.lView=null,M}const te=V;function Ie(){const M=V();M.isParent=!0,M.tView=null,M.selectedIndex=-1,M.contextLView=null,M.elementDepthCount=0,M.currentDirectiveIndex=-1,M.currentNamespace=null,M.bindingRootIndex=-1,M.bindingIndex=-1,M.currentQueryIndex=0}function Be(M){return(qn.lFrame.contextLView=ms(M,qn.lFrame.contextLView))[jn]}function h(){return qn.lFrame.selectedIndex}function E(M){qn.lFrame.selectedIndex=M}function y(){const M=qn.lFrame;return ci(M.tView,M.selectedIndex)}function I(){qn.lFrame.currentNamespace=ai}function F(){qn.lFrame.currentNamespace=fs}function J(){!function De(){qn.lFrame.currentNamespace=null}()}function qe(){return qn.lFrame.currentNamespace}let gt=!0;function Ht(){return gt}function dn(M){gt=M}function mn(M,re=null,Ue=null,wt){const zt=pr(M,re,Ue,wt);return zt.resolveInjectorInitializers(),zt}function pr(M,re=null,Ue=null,wt,zt=new Set){const Un=[Ue||kr,q(M)];return wt=wt||("object"==typeof M?void 0:G(M)),new Te(Un,re||Y(),wt||null,zt)}class co{static THROW_IF_NOT_FOUND=ke;static NULL=new Kr;static create(re,Ue){if(Array.isArray(re))return mn({name:""},Ue,re,"");{const wt=re.name??"";return mn({name:wt},re.parent,re.providers,wt)}}static \u0275prov=Nt({token:co,providedIn:"any",factory:()=>We(Yr)});static __NG_ELEMENT_ID__=-1}const lr=new hn("");let Gr=(()=>class M{static __NG_ELEMENT_ID__=To;static __NG_ENV_ID__=Ue=>Ue})();class mo extends Gr{_lView;constructor(re){super(),this._lView=re}get destroyed(){return R(this._lView)}onDestroy(re){const Ue=this._lView;return _s(Ue,re),()=>Os(Ue,re)}}function To(){return new mo(Gs())}class gi{_console=console;handleError(re){this._console.error("ERROR",re)}}const Is=new hn("",{providedIn:"root",factory:()=>{const M=et(x);let re;return Ue=>{M.destroyed&&!re?setTimeout(()=>{throw Ue}):(re??=M.get(gi),re.handleError(Ue))}}}),Sl={provide:Dr,useValue:()=>{et(gi)},multi:!0};function Zs(M){return"function"==typeof M&&void 0!==M[Je.bh]}function Ph(M,re){const[Ue,wt,zt]=(0,Je.n5)(M,re?.equal),Un=Ue;return Un.set=wt,Un.update=zt,Un.asReadonly=Al.bind(Un),Un}function Al(){const M=this[Je.bh];if(void 0===M.readonlyFn){const re=()=>this();re[Je.bh]=M,M.readonlyFn=re}return M.readonlyFn}function Rh(M){return Zs(M)&&"function"==typeof M.set}function xh(M,re){if(null!==(0,Je.nR)())throw new v(-602,!1)}let Il=(()=>class M{view;node;constructor(Ue,wt){this.view=Ue,this.node=wt}static __NG_ELEMENT_ID__=rc})();function rc(){return new Il(Gs(),qs())}class oc{}const wl=new hn("",{providedIn:"root",factory:()=>!1}),Tl=new hn("",{providedIn:"root",factory:()=>!1}),Ml=new hn(""),Ea=new hn("");let Zo=(()=>{class M{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new me.t(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ie.c(Ue=>{Ue.next(!1),Ue.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const Ue=this.taskId++;return this.pendingTasks.add(Ue),Ue}has(Ue){return this.pendingTasks.has(Ue)}remove(Ue){this.pendingTasks.delete(Ue),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Nt({token:M,providedIn:"root",factory:()=>new M})}return M})(),mi=(()=>{class M{internalPendingTasks=et(Zo);scheduler=et(oc);errorHandler=et(Is);add(){const Ue=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(Ue)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(Ue))}}run(Ue){const wt=this.add();Ue().catch(this.errorHandler).finally(wt)}static \u0275prov=Nt({token:M,providedIn:"root",factory:()=>new M})}return M})();function sc(...M){}let ic=(()=>{class M{static \u0275prov=Nt({token:M,providedIn:"root",factory:()=>new ac})}return M})();class ac{dirtyEffectCount=0;queues=new Map;add(re){this.enqueue(re),this.schedule(re)}schedule(re){re.dirty&&this.dirtyEffectCount++}remove(re){const wt=this.queues.get(re.zone);wt.has(re)&&(wt.delete(re),re.dirty&&this.dirtyEffectCount--)}enqueue(re){const Ue=re.zone;this.queues.has(Ue)||this.queues.set(Ue,new Set);const wt=this.queues.get(Ue);wt.has(re)||wt.add(re)}flush(){for(;this.dirtyEffectCount>0;){let re=!1;for(const[Ue,wt]of this.queues)re||=null===Ue?this.flushQueue(wt):Ue.run(()=>this.flushQueue(wt));re||(this.dirtyEffectCount=0)}}flushQueue(re){let Ue=!1;for(const wt of re)wt.dirty&&(this.dirtyEffectCount--,Ue=!0,wt.run());return Ue}}},2739(Wt,ut,b){"use strict";b.d(ut,{Wi:()=>S.Wi,YA:()=>Pe,__:()=>S.__});var s=b(5083),o=b(8254),S=b(1889);const Pe=(0,s.F3)("Filesystem",{web:()=>b.e(2937).then(b.bind(b,2937)).then(Ce=>new Ce.FilesystemWeb)});(0,o.Y)()},3073(Wt,ut,b){"use strict";b.d(ut,{D:()=>Ce});const{isArray:s}=Array,{getPrototypeOf:o,prototype:S,keys:Pe}=Object;function Ce(Le){if(1===Le.length){const Je=Le[0];if(s(Je))return{args:Je,keys:null};if(function k(Le){return Le&&"object"==typeof Le&&o(Le)===S}(Je)){const me=Pe(Je);return{args:me.map(ie=>Je[ie]),keys:me}}}return{args:Le,keys:null}}},3205(Wt,ut,b){"use strict";b.d(ut,{N:()=>we});var s=b(467),o=b(4412),S=b(3878),Ce=b(2084),k=b(2615),Le=b(4938),Je=b(5921),me=b(5029),ie=b(8863);let we=(()=>{var l;class p{constructor(v,_,D,L){this.storage=v,this.router=_,this.supabase=D,this.monitoringLog=L,console.log("Auth: Constructor called"),this.currentUserSubject=new o.t(null),this.currentUser$=this.currentUserSubject.asObservable(),this.loadUserFromStorage(),console.log("Auth: Constructor complete")}loadUserFromStorage(){var v=this;return(0,s.A)(function*(){console.log("Auth: Loading user from storage");try{const _=yield v.storage.getUser();_?(_.username=_.username?.toLowerCase()||"",console.log("Auth: User loaded from storage:",_.username),v.currentUserSubject.next(_)):console.log("Auth: No user in storage")}catch(_){console.error("Auth: Error loading user from storage:",_)}})()}login(v,_){var D=this;return(0,s.A)(function*(){const L=v.trim().toLowerCase(),K=_.trim();try{const{data:ae,error:B}=yield D.supabase.getCustomUser(L);if(B||!ae)return{success:!1,error:"Invalid username or password"};if(!(yield S.compare(K,ae.password_hash)))return{success:!1,error:"Invalid username or password"};if((2===ae.level||3===ae.level||4===ae.level)&&!ae.level_approved){yield D.checkAndUpdateApprovedLevel(ae.email);const{data:G}=yield D.supabase.getCustomUser(L);if(G&&!G.level_approved){const fe=yield D.supabase.getHighestApprovedLevel(G.email);let _e;_e=1===fe?"L1 - School Club (Temporary Access)":2===fe?"L2 - Conservation Partner":"L3 - Superuser";const Re={...G,level:fe,level_name:_e};return console.log(`Login: L${G.level} pending approval, granted L${fe} access temporarily`),D.setUser(Re)}return D.setUser(G)}return D.setUser(ae)}catch{return{success:!1,error:"Login failed. Please try again."}}})()}register(v){var _=this;return(0,s.A)(function*(){const{username:D,email:L,password:K,level:ae,organization:B,confirmPassword:Z}=v;if(!(D&&L&&K&&ae))return{success:!1,error:"All fields are required"};if(K!==Z)return{success:!1,error:"Passwords do not match"};if(K.length<6)return{success:!1,error:"Password must be at least 6 characters"};try{const{exists:G}=yield _.supabase.checkUsernameExists(D.trim().toLowerCase());if(G)return{success:!1,error:"Username already exists"};const{exists:he}=yield _.supabase.checkEmailExists(L.trim().toLowerCase());if(he)return{success:!1,error:"Email already exists"};const fe=yield S.genSalt(10),_e=yield S.hash(K,fe),Re=Number(ae),ve=_.getLevelName(Re),Ye={username:D.trim().toLowerCase(),email:L.trim().toLowerCase(),password_hash:_e,level:Re,level_name:ve,level_approved:1===Re,organization:B?.trim()},{data:ge,error:nt}=yield _.supabase.createCustomUser(Ye);if(nt||!ge)return{success:!1,error:"Registration failed. Please try again."};if(2===Re||3===Re||4===Re)try{yield _.supabase.getClient().functions.invoke("send-level-request",{body:{requesterEmail:Ye.email,requesterUsername:Ye.username,requestedLevel:Re,reason:`New user registration - ${B||"No organization provided"}`,timestamp:(0,Ce.E)()}}),console.log("Level access request email sent to admin")}catch(ze){console.error("Failed to send level access request email:",ze)}return _.monitoringLog.recordUserRegistered(Ye.username,Re),{success:!0}}catch{return{success:!1,error:"Registration failed. Please try again."}}})()}getLevelName(v){switch(v){case 1:return"L1 - School Club";case 2:return"L2 - Conservation Partner";case 3:return"L3 - Superuser";case 4:return"L4 - Admin";default:return"Unknown Level"}}requestLevelAccess(v,_,D){var L=this;return(0,s.A)(function*(){const K=v.trim().toLowerCase();try{const{data:ae,error:B}=yield L.supabase.getCustomUser(K);if(B||!ae)return{success:!1,error:"User not found. Please check your username."};const{data:Z}=yield L.supabase.checkPendingLevelRequest(K);if(Z&&Z.length>0){const fe=Z[0];if(fe.requested_level>=_)return{success:!1,error:`You already have a pending request for L${fe.requested_level} access.`}}const{error:he}=yield L.supabase.getClient().functions.invoke("send-level-request",{body:{requesterEmail:ae.email,requesterUsername:K,requestedLevel:_,reason:D,timestamp:(0,Ce.E)()}});return he?{success:!1,error:"Failed to send request. Please try again."}:(L.monitoringLog.recordLevelRequest(K,_),{success:!0})}catch{return{success:!1,error:"Failed to send request. Please try again."}}})()}checkPendingRequest(v){var _=this;return(0,s.A)(function*(){try{const{data:D}=yield _.supabase.checkPendingLevelRequest(v);return!!(D&&D.length>0)}catch{return!1}})()}checkAndUpdateApprovedLevel(v){var _=this;return(0,s.A)(function*(){try{const{data:D}=yield _.supabase.checkApprovedLevelRequest(v);D&&D.length>0&&console.log("Approved level request found, user level will be updated on next login")}catch(D){console.warn("Error checking approved requests:",D)}})()}setUser(v){var _=this;return(0,s.A)(function*(){try{return v.username=v.username?.toLowerCase()||"",console.log("Auth: Setting user:",v.username),_.currentUserSubject.next(v),yield _.storage.setUser(v),console.log("Auth: User saved successfully"),_.monitoringLog.recordLogin(v.username),{success:!0}}catch(D){return console.error("Auth: Failed to save user:",D),_.currentUserSubject.next(v),{success:!0}}})()}logout(){var v=this;return(0,s.A)(function*(){const _=v.currentUserSubject.value;_&&(yield v.monitoringLog.recordLogout(_.username)),v.currentUserSubject.next(null),v.router.navigate(["/login"])})()}getCurrentUser(){return this.currentUserSubject.value}isAuthenticated(){return null!==this.currentUserSubject.value}hasMinimumLevel(v){const _=this.currentUserSubject.value;return!!_&&_.level>=v}getPermissions(){const v=this.currentUserSubject.value;if(!v)return{canAccessBiodiversity:!1,canAccessHealth:!1,canAccessThreats:!1};switch(v.level){case 1:case 2:case 3:case 4:return{canAccessBiodiversity:!0,canAccessHealth:!0,canAccessThreats:!0};default:return{canAccessBiodiversity:!1,canAccessHealth:!1,canAccessThreats:!1}}}static#e=l=()=>(this.\u0275fac=function(_){return new(_||p)(k.KVO(Le.w),k.KVO(Je.Ix),k.KVO(me.L),k.KVO(ie.u))},this.\u0275prov=k.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}))}return l(),p})()},3494(Wt,ut,b){"use strict";b.d(ut,{s:()=>s});const s="function"==typeof Symbol&&Symbol.observable||"@@observable"},3664(Wt,ut,b){"use strict";b.d(ut,{$C:()=>Yg,$Ln:()=>Bm,AVh:()=>Id,Ab1:()=>Ai,Agw:()=>Yn,B4B:()=>xl,BIS:()=>Or,BMQ:()=>Ju,C4Q:()=>Ma,C5r:()=>Bv,C7A:()=>Cm,Co$:()=>qg,DH7:()=>Sv,DNE:()=>ku,DUP:()=>vi,DkB:()=>_d,E5c:()=>Od,EBC:()=>zh,EFF:()=>iv,EJ8:()=>em,FsC:()=>Zg,G5x:()=>g0,GBs:()=>B_,H1s:()=>Km,HbH:()=>J_,JRh:()=>Td,Jt5:()=>p_,Jv_:()=>Tv,KED:()=>GI,Lme:()=>Md,NAR:()=>k_,NCX:()=>wc,NOj:()=>qh,NSC:()=>pa,NYb:()=>CS,OA$:()=>xe,OR8:()=>Si,Ocv:()=>vw,Ol2:()=>xu,PLl:()=>jn,PYt:()=>Xg,QTQ:()=>vg,Ql9:()=>hw,R50:()=>Pd,R7$:()=>np,RV6:()=>d_,SKi:()=>io,SdG:()=>$_,SdI:()=>sy,SpI:()=>_l,TFI:()=>Yc,Ts$:()=>cy,UQu:()=>dw,V5L:()=>oy,VBU:()=>Qg,VeQ:()=>qr,VkB:()=>Iv,Vt3:()=>Lu,VzW:()=>Jb,XpG:()=>F_,Xx1:()=>_,Y8G:()=>ad,YEm:()=>kt,Zhj:()=>Wb,_9s:()=>gu,_9u:()=>xt,_jY:()=>Mo,_qm:()=>Xr,_ys:()=>mp,a8H:()=>Aa,aKT:()=>Ln,bIt:()=>Ed,bMT:()=>$v,bVm:()=>Ga,bkB:()=>Fs,c1b:()=>Vc,cDI:()=>kD,cZr:()=>jd,cdK:()=>Wm,czy:()=>hc,d80:()=>pw,dOL:()=>Um,e6s:()=>qC,eHC:()=>jc,eq3:()=>Pv,eu8:()=>hd,gXe:()=>Uo,giA:()=>jm,hnV:()=>Hu,i5U:()=>Uv,iLQ:()=>Hm,j41:()=>cl,k0s:()=>ll,kBR:()=>md,kS0:()=>jr,kdw:()=>L,lJ4:()=>Ov,lJT:()=>zm,lsd:()=>V_,mGM:()=>j_,mal:()=>Hl,mxI:()=>Rd,n$t:()=>Kh,nI1:()=>kv,nrm:()=>ld,o8S:()=>Jc,ozJ:()=>Eu,phd:()=>IS,pl0:()=>wS,qex:()=>ul,rXU:()=>ra,sFG:()=>XE,sZ2:()=>Zt,sdS:()=>W_,sgu:()=>zb,tSv:()=>Hh,tvf:()=>ue,uiO:()=>ae,utN:()=>ub,vDg:()=>Ag,w6W:()=>Qb,wni:()=>U_,xGo:()=>mr,xc7:()=>Ad,xe9:()=>ly,yLl:()=>Vm,ypd:()=>TS,zoo:()=>gp});var s=b(467),o=b(2615),S=b(8440),Pe=b(1413),Ce=b(8359),k=b(6354);function Le(e){return{toString:e}.toString()}const Je="__annotations__",me="__parameters__",ie="__prop__metadata__";function we(e,t,n,r,i){return Le(()=>{const a=l(t);function g(...C){if(this instanceof g)return a.call(this,...C),this;const T=new g(...C);return function(se){return i&&i(se,...C),(se.hasOwnProperty(Je)?se[Je]:Object.defineProperty(se,Je,{value:[]})[Je]).push(T),se}}return n&&(g.prototype=Object.create(n.prototype)),g.prototype.ngMetadataName=e,g.annotationCls=g,g})}function l(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}function p(e,t,n){return Le(()=>{const r=l(t);function i(...a){if(this instanceof i)return r.apply(this,a),this;const g=new i(...a);return C.annotation=g,C;function C(T,X,se){const $e=T.hasOwnProperty(me)?T[me]:Object.defineProperty(T,me,{value:[]})[me];for(;$e.length<=se;)$e.push(null);return($e[se]=$e[se]||[]).push(g),T}}return i.prototype.ngMetadataName=e,i.annotationCls=i,i})}const v=(0,o.z6V)(p("Inject",e=>({token:e})),-1),_=(0,o.z6V)(p("Optional"),8),D=(0,o.z6V)(p("Self"),2),L=(0,o.z6V)(p("SkipSelf"),4),K=(0,o.z6V)(p("Host"),1);function ae(e){const t=o.laP.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}const B={\u0275\u0275defineInjectable:o.jDH,\u0275\u0275defineInjector:o.G2t,\u0275\u0275inject:o.KVO,\u0275\u0275invalidFactoryDep:o.dmw,resolveForwardRef:o.nl4},Z=Function;function G(e){return"function"==typeof e}const he=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,fe=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,_e=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Re=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class Ye{_reflect;constructor(t){this._reflect=t||o.laP.Reflect}factory(t){return(...n)=>new t(...n)}_zipTypesAndAnnotations(t,n){let r;r=(0,o.WfI)(typeof t>"u"?n.length:t.length);for(let i=0;i<r.length;i++)r[i]=typeof t>"u"?[]:t[i]&&t[i]!=Object?[t[i]]:[],n&&null!=n[i]&&(r[i]=r[i].concat(n[i]));return r}_ownParameters(t,n){if(function ve(e){return he.test(e)||Re.test(e)||fe.test(e)&&!_e.test(e)}(t.toString()))return null;if(t.parameters&&t.parameters!==n.parameters)return t.parameters;const i=t.ctorParameters;if(i&&i!==n.ctorParameters){const C="function"==typeof i?i():i,T=C.map(se=>se&&se.type),X=C.map(se=>se&&ge(se.decorators));return this._zipTypesAndAnnotations(T,X)}const a=t.hasOwnProperty(me)&&t[me],g=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return g||a?this._zipTypesAndAnnotations(g,a):(0,o.WfI)(t.length)}parameters(t){if(!G(t))return[];const n=nt(t);let r=this._ownParameters(t,n);return!r&&n!==Object&&(r=this.parameters(n)),r||[]}_ownAnnotations(t,n){if(t.annotations&&t.annotations!==n.annotations){let r=t.annotations;return"function"==typeof r&&r.annotations&&(r=r.annotations),r}return t.decorators&&t.decorators!==n.decorators?ge(t.decorators):t.hasOwnProperty(Je)?t[Je]:null}annotations(t){if(!G(t))return[];const n=nt(t),r=this._ownAnnotations(t,n)||[];return(n!==Object?this.annotations(n):[]).concat(r)}_ownPropMetadata(t,n){if(t.propMetadata&&t.propMetadata!==n.propMetadata){let r=t.propMetadata;return"function"==typeof r&&r.propMetadata&&(r=r.propMetadata),r}if(t.propDecorators&&t.propDecorators!==n.propDecorators){const r=t.propDecorators,i={};return Object.keys(r).forEach(a=>{i[a]=ge(r[a])}),i}return t.hasOwnProperty(ie)?t[ie]:null}propMetadata(t){if(!G(t))return{};const n=nt(t),r={};if(n!==Object){const a=this.propMetadata(n);Object.keys(a).forEach(g=>{r[g]=a[g]})}const i=this._ownPropMetadata(t,n);return i&&Object.keys(i).forEach(a=>{const g=[];r.hasOwnProperty(a)&&g.push(...r[a]),g.push(...i[a]),r[a]=g}),r}ownPropMetadata(t){return G(t)&&this._ownPropMetadata(t,nt(t))||{}}hasLifecycleHook(t,n){return t instanceof Z&&n in t.prototype}}function ge(e){return e?e.map(t=>new(0,t.type.annotationCls)(...t.args?t.args:[])):[]}function nt(e){const t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}class ze{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Fe(e,t,n,r){null!==t?t.applyValueToInputSignal(t,r):e[n]=r}const xe=(()=>{const e=()=>rt;return e.ngInherit=!0,e})();function rt(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ae),Ve}function Ve(){const e=ye(this),t=e?.current;if(t){const n=e.previous;if(n===o.MZA)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Ae(e,t,n,r,i){const a=this.declaredInputs[r],g=ye(e)||function Me(e,t){return e[H]=t}(e,{previous:o.MZA,current:null}),C=g.current||(g.current={}),T=g.previous,X=T[a];C[a]=new ze(X&&X.currentValue,n,T===o.MZA),Fe(e,t,i,n)}const H="__ngSimpleChanges__";function ye(e){return e[H]||null}const He=[],vt=function(e,t=null,n){for(let r=0;r<He.length;r++)(0,He[r])(e,t,n)};function dt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const a=e.data[n].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:C,ngAfterViewInit:T,ngAfterViewChecked:X,ngOnDestroy:se}=a;g&&(e.contentHooks??=[]).push(-n,g),C&&((e.contentHooks??=[]).push(n,C),(e.contentCheckHooks??=[]).push(n,C)),T&&(e.viewHooks??=[]).push(-n,T),X&&((e.viewHooks??=[]).push(n,X),(e.viewCheckHooks??=[]).push(n,X)),null!=se&&(e.destroyHooks??=[]).push(n,se)}}function Bt(e,t,n){Ot(e,t,3,n)}function ht(e,t,n,r){(3&e[o.Wg1])===n&&Ot(e,t,n,r)}function Nt(e,t){let n=e[o.Wg1];(3&n)===t&&(n&=16383,n+=1,e[o.Wg1]=n)}function Ot(e,t,n,r){const a=r??-1,g=t.length-1;let C=0;for(let T=void 0!==r?65535&e[o.wVl]:0;T<g;T++)if("number"==typeof t[T+1]){if(C=t[T],null!=r&&C>=r)break}else t[T]<0&&(e[o.wVl]+=65536),(C<a||-1==a)&&(ft(e,n,t,T),e[o.wVl]=(4294901760&e[o.wVl])+T+2),T++}function on(e,t){vt(4,e,t);const n=(0,S.Ht)(null);try{t.call(e)}finally{(0,S.Ht)(n),vt(5,e,t)}}function ft(e,t,n,r){const i=n[r]<0,a=n[r+1],C=e[i?-n[r]:n[r]];i?e[o.Wg1]>>14<e[o.wVl]>>16&&(3&e[o.Wg1])===t&&(e[o.Wg1]+=16384,on(C,a)):on(C,a)}class Dt{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}}function Cn(e){return null!=e&&"object"==typeof e&&(null===e.insertBeforeIndex||"number"==typeof e.insertBeforeIndex||Array.isArray(e.insertBeforeIndex))}function $t(e){return 3===e||4===e||6===e}function an(e){return 64===e.charCodeAt(0)}function pn(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||An(e,n,i,0,-1===n||2===n?t[++r]:null)}}return e}function An(e,t,n,r,i){let a=0,g=e.length;if(-1===t)g=-1;else for(;a<e.length;){const C=e[a++];if("number"==typeof C){if(C===t){g=-1;break}if(C>t){g=a-1;break}}}for(;a<e.length;){const C=e[a];if("number"==typeof C)break;if(C===n)return void(null!==i&&(e[a+1]=i));a++,null!==i&&a++}-1!==g&&(e.splice(g,0,t),a=g+1),e.splice(a++,0,n),null!==i&&e.splice(a++,0,i)}function or(e){return-1!==e}function Zn(e){return 32767&e}function ur(e,t){let n=function Hn(e){return e>>16}(e),r=t;for(;n>0;)r=r[o.X5O],n--;return r}let gr=!0;function Sr(e){const t=gr;return gr=e,t}let vr=0;const Cr={};function Ir(e,t){const n=wr(e,t);if(-1!==n)return n;const r=t[o.eDl];r.firstCreatePass&&(e.injectorIndex=t.length,Sn(r.data,e),Sn(t,null),Sn(r.blueprint,null));const i=Nr(e,t),a=e.injectorIndex;if(or(i)){const g=Zn(i),C=ur(i,t),T=C[o.eDl].data;for(let X=0;X<8;X++)t[a+X]=C[g+X]|T[g+X]}return t[a+8]=i,a}function Sn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function wr(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Nr(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=Br(i),null===r)return-1;if(n++,i=i[o.X5O],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function tr(e,t,n){!function $r(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(o.p9y)&&(r=n[o.p9y]),null==r&&(r=n[o.p9y]=vr++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Xe(e,t,n){if(8&n||void 0!==e)return e;(0,o.$Hz)(t,"NodeInjector")}function Ze(e,t,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const i=e[o.YEL],a=(0,o.a2B)(void 0);try{return i?i.get(t,r,8&n):(0,o.MzJ)(t,r,8&n)}finally{(0,o.a2B)(a)}}return Xe(r,t,n)}function It(e,t,n,r=0,i){if(null!==e){if(2048&t[o.Wg1]&&!(2&r)){const g=function gn(e,t,n,r,i){let a=e,g=t;for(;null!==a&&null!==g&&2048&g[o.Wg1]&&!(0,o.EFk)(g);){const C=_t(a,g,n,2|r,Cr);if(C!==Cr)return C;let T=a.parent;if(!T){const X=g[o.oMQ];if(X){const se=X.get(n,Cr,r);if(se!==Cr)return se}T=Br(g),g=g[o.X5O]}a=T}return i}(e,t,n,r,Cr);if(g!==Cr)return g}const a=_t(e,t,n,r,Cr);if(a!==Cr)return a}return Ze(t,n,r,i)}function _t(e,t,n,r,i){const a=function ln(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(o.p9y)?e[o.p9y]:void 0;return"number"==typeof t?t>=0?255&t:Tr:t}(n);if("function"==typeof a){if(!(0,o.ihb)(t,e,r))return 1&r?Xe(i,n,r):Ze(t,n,r,i);try{let g;if(g=a(r),null!=g||8&r)return g;(0,o.$Hz)(n)}finally{(0,o.niQ)()}}else if("number"==typeof a){let g=null,C=wr(e,t),T=-1,X=1&r?t[o.b5C][o.qlT]:null;for((-1===C||4&r)&&(T=-1===C?Nr(e,t):t[C+8],-1!==T&&zn(r,!1)?(g=t[o.eDl],C=Zn(T),t=ur(T,t)):C=-1);-1!==C;){const se=t[o.eDl];if(fn(a,C,se.data)){const $e=Ft(C,t,n,g,r,X);if($e!==Cr)return $e}T=t[C+8],-1!==T&&zn(r,t[o.eDl].data[C+8]===X)&&fn(a,C,t)?(g=se,C=Zn(T),t=ur(T,t)):C=-1}}return i}function Ft(e,t,n,r,i,a){const g=t[o.eDl],C=g.data[e+8],se=Vt(C,g,n,null==r?(0,o.Qs1)(C)&&gr:r!=g&&!!(3&C.type),1&i&&a===C);return null!==se?cn(t,g,se,C,i):Cr}function Vt(e,t,n,r,i){const a=e.providerIndexes,g=t.data,C=1048575&a,T=e.directiveStart,se=a>>20,it=i?C+se:e.directiveEnd;for(let lt=r?C:C+se;lt<it;lt++){const Rt=g[lt];if(lt<T&&n===Rt||lt>=T&&Rt.type===n)return lt}if(i){const lt=g[T];if(lt&&(0,o.JlV)(lt)&&lt.type===n)return T}return null}function cn(e,t,n,r,i){let a=e[n];const g=t.data;if(a instanceof Dt){const C=a;if(C.resolving){const lt=(0,o.PP7)(g[n]);throw(0,o.PQT)(lt)}const T=Sr(C.canSeeViewProviders);C.resolving=!0;const $e=C.injectImpl?(0,o.a2B)(C.injectImpl):null;(0,o.ihb)(e,r,0);try{a=e[n]=C.factory(void 0,i,g,e,r),t.firstCreatePass&&n>=r.directiveStart&&function Ut(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:a}=t.type.prototype;if(r){const g=rt(t);(n.preOrderHooks??=[]).push(e,g),(n.preOrderCheckHooks??=[]).push(e,g)}i&&(n.preOrderHooks??=[]).push(0-e,i),a&&((n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a))}(n,g[n],t)}finally{null!==$e&&(0,o.a2B)($e),Sr(T),C.resolving=!1,(0,o.niQ)()}}return a}function fn(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function zn(e,t){return!(2&e||1&e&&t)}class Kn{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return It(this._tNode,this._lView,t,(0,o.hjC)(r),n)}}function Tr(){return new Kn((0,o.Mx4)(),(0,o.OAn)())}function mr(e){return Le(()=>{const t=e.prototype.constructor,n=t[o.zSs]||Mn(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const a=i[o.zSs]||Mn(i);if(a&&a!==n)return a;i=Object.getPrototypeOf(i)}return a=>new a})}function Mn(e){return(0,o.Jzi)(e)?()=>{const t=Mn((0,o.nl4)(e));return t&&t()}:(0,o.wGu)(e)}function Br(e){const t=e[o.eDl],n=t.type;return 2===n?t.declTNode:1===n?e[o.qlT]:null}function jr(e){return function bn(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const a=n[i];if($t(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(a===t)return n[i+1];i+=2}}}return null}((0,o.Mx4)(),e)}const ke=p("Attribute",e=>({attributeName:e,__NG_ELEMENT_ID__:()=>jr(e)}));let st=null;function be(e){return We(function tt(){return st=st||new Ye}().parameters(e))}function We(e){return e.map(t=>function Se(e){const t={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(e)&&e.length>0)for(let n=0;n<e.length;n++){const r=e[n];if(void 0===r)continue;const i=Object.getPrototypeOf(r);if(r instanceof _||"Optional"===i.ngMetadataName)t.optional=!0;else if(r instanceof L||"SkipSelf"===i.ngMetadataName)t.skipSelf=!0;else if(r instanceof D||"Self"===i.ngMetadataName)t.self=!0;else if(r instanceof K||"Host"===i.ngMetadataName)t.host=!0;else if(r instanceof v)t.token=r.token;else if(r instanceof ke){if(void 0===r.attributeName)throw new o.buA(204,!1);t.attribute=r.attributeName}else t.token=r}else t.token=void 0===e||Array.isArray(e)&&0===e.length?null:e;return t}(t))}const St=(0,o.kLh)({provide:String,useValue:o.kLh});function Xt(e){return void 0!==e.useClass}function On(e){return void 0!==e.useFactory}const Xr=we("Injectable",void 0,void 0,0,(e,t)=>function et(e,t){let n=null,r=null;e.hasOwnProperty(o.yAH)||Object.defineProperty(e,o.yAH,{get:()=>(null===n&&(n=ae().compileInjectable(B,`ng:///${e.name}/\u0275prov.js`,function ir(e,t){const n=t||{providedIn:null},r={name:e.name,type:e,typeArgumentCount:0,providedIn:n.providedIn};return(Xt(n)||On(n))&&void 0!==n.deps&&(r.deps=We(n.deps)),Xt(n)?r.useClass=n.useClass:function vn(e){return St in e}(n)?r.useValue=n.useValue:On(n)?r.useFactory=n.useFactory:function Rn(e){return void 0!==e.useExisting}(n)&&(r.useExisting=n.useExisting),r}(e,t))),n)}),e.hasOwnProperty(o.zSs)||Object.defineProperty(e,o.zSs,{get:()=>{if(null===r){const i=ae();r=i.compileFactory(B,`ng:///${e.name}/\u0275fac.js`,{name:e.name,type:e,typeArgumentCount:0,deps:be(e),target:i.FactoryTarget.Injectable})}return r},configurable:!0})}(e,t));function Ur(){return Qn((0,o.Mx4)(),(0,o.OAn)())}function Qn(e,t){return new Ln((0,o.d31)(e,t))}let Ln=(()=>class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Ur})();function Gn(e){return e instanceof Ln?e.nativeElement:e}function yr(){return this._results[Symbol.iterator]()}class ar{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Pe.B}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;const r=(0,o.Bqz)(t);(this._changesDetected=!(0,o.ng7)(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=yr}function Fr(e){return!(128&~e.flags)}var Dr=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Dr||{});const Yr=new Map;let Lr=0;function Ne(e){Yr.delete(e[o.ID])}const P="__ngContext__";function q(e,t){(0,o.q$2)(t)?(e[P]=t[o.ID],function Hr(e){Yr.set(e[o.ID],e)}(t)):e[P]=t}function W(e){return Y(e[o.EJG])}function Bn(e){return Y(e[o.K29])}function Y(e){for(;null!==e&&!(0,o.A0l)(e);)e=e[o.K29];return e}let mt;function xt(e){mt=e}function kt(){if(void 0!==mt)return mt;if(typeof document<"u")return document;throw new o.buA(210,!1)}const Zt=new o.nKC("",{providedIn:"root",factory:()=>Dn}),Dn="ng",jn=new o.nKC(""),Yn=new o.nKC("",{providedIn:"platform",factory:()=>"unknown"}),Or=new o.nKC("",{providedIn:"root",factory:()=>kt().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),_r={breakpoints:[16,32,48,64,96,128,256,384,640,750,828,1080,1200,1920,2048,3840],placeholderResolution:30,disableImageSizeWarning:!1,disableImageLazyLoadWarning:!1},qr=new o.nKC("",{providedIn:"root",factory:()=>_r});function ao(){const e=new Zr;return e.store=function Do(e,t){const n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+t,r)}return{}}(kt(),(0,o.WQX)(Zt)),e}let Zr=(()=>{class e{static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:ao});store={};onSerializeCallbacks={};get(n,r){return void 0!==this.store[n]?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(const n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();const no=new o.nKC("",{providedIn:"root",factory:()=>!1}),z=new o.nKC(""),ue=new o.nKC(""),Ge={passive:!0,capture:!0},un=new WeakMap,En=new WeakMap,Qr=new WeakMap,Eo=["click","keydown"],fo=["mouseenter","mouseover","focusin"];let wo=null,qo=0;class No{callbacks=new Set;listener=()=>{for(const t of this.callbacks)t()}}function rs(e,t){let n=En.get(e);if(!n){n=new No,En.set(e,n);for(const r of Eo)e.addEventListener(r,n.listener,Ge)}return n.callbacks.add(t),()=>{const{callbacks:r,listener:i}=n;if(r.delete(t),0===r.size){En.delete(e);for(const a of Eo)e.removeEventListener(a,i,Ge)}}}function si(e,t){let n=un.get(e);if(!n){n=new No,un.set(e,n);for(const r of fo)e.addEventListener(r,n.listener,Ge)}return n.callbacks.add(t),()=>{const{callbacks:r,listener:i}=n;if(r.delete(t),0===r.size){for(const a of fo)e.removeEventListener(a,i,Ge);un.delete(e)}}}const Fo=new o.nKC("");function eo(e){return!(32&~e.flags)}function Os(e){let t=e._lView;return 2===t[o.eDl].type?null:((0,o.EFk)(t)&&(t=t[o.Yw1]),t)}function zo(e){return e.get(z,!1,{optional:!0})}function Ys(e,t){const n=e.contentQueries;if(null!==n){const r=(0,S.Ht)(null);try{for(let i=0;i<n.length;i+=2){const g=n[i+1];if(-1!==g){const C=e.data[g];(0,o.GA0)(n[i]),C.contentQueries(2,t[g],g)}}}finally{(0,S.Ht)(r)}}}function Yo(e,t,n){(0,o.GA0)(0);const r=(0,S.Ht)(null);try{t(e,n)}finally{(0,S.Ht)(r)}}function As(e,t,n){if((0,o.srX)(t)){const r=(0,S.Ht)(null);try{const a=t.directiveEnd;for(let g=t.directiveStart;g<a;g++){const C=e.data[g];C.contentQueries&&C.contentQueries(1,n[g],g)}}finally{(0,S.Ht)(r)}}}var Uo=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Uo||{});let qe,mn;function gt(){if(void 0===qe&&(qe=null,o.laP.trustedTypes))try{qe=o.laP.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return qe}function Ht(e){return gt()?.createHTML(e)||e}function pr(){if(void 0===mn&&(mn=null,o.laP.trustedTypes))try{mn=o.laP.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return mn}function co(e){return pr()?.createHTML(e)||e}function lr(e){return pr()?.createScript(e)||e}function Gr(e){return pr()?.createScriptURL(e)||e}class mo{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${o.ok8})`}}function Ls(e){return e instanceof mo?e.changingThisBreaksApplicationSecurity:e}function Zs(e,t){const n=function Oh(e){return e instanceof mo&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${o.ok8})`)}return n===t}function rc(e){const t=new wl(e);return function Tl(){try{return!!(new window.DOMParser).parseFromString(Ht(""),"text/html")}catch{return!1}}()?new oc(t):t}class oc{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(Ht(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.firstChild?.remove(),n)}catch{return null}}}class wl{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const n=this.inertDocument.createElement("template");return n.innerHTML=Ht(t),n}}const Ml=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ea(e){return(e=String(e)).match(Ml)?e:"unsafe:"+e}function Zo(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function mi(...e){const t={};for(const n of e)for(const r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}const sc=Zo("area,br,col,hr,img,wbr"),ic=Zo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ac=Zo("rp,rt"),wt=mi(sc,mi(ic,Zo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mi(ac,Zo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),mi(ac,ic)),zt=Zo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Lo=mi(zt,Zo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),So=Zo("script,style,template");class ho{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let n=t.firstChild,r=!0,i=[];for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)i.push(n),n=my(n);else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let a=gy(n);if(a){n=a;break}n=i.pop()}return this.buf.join("")}startElement(t){const n=Lh(t).toLowerCase();if(!wt.hasOwnProperty(n))return this.sanitizedSomething=!0,!So.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=t.attributes;for(let i=0;i<r.length;i++){const a=r.item(i),g=a.name,C=g.toLowerCase();if(!Lo.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let T=a.value;zt[C]&&(T=Ea(T)),this.buf.push(" ",g,'="',Fh(T),'"')}return this.buf.push(">"),!0}endElement(t){const n=Lh(t).toLowerCase();wt.hasOwnProperty(n)&&!sc.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(Fh(t))}}function gy(e){const t=e.nextSibling;if(t&&e!==t.previousSibling)throw Nh(t);return t}function my(e){const t=e.firstChild;if(t&&function Ns(e,t){return(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(e,t))throw Nh(t);return t}function Lh(e){const t=e.nodeName;return"string"==typeof t?t:"FORM"}function Nh(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}const _y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vy=/([^\#-~ |!])/g;function Fh(e){return e.replace(/&/g,"&amp;").replace(_y,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(vy,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cc;function Ol(e){return"content"in e&&function Ey(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}const by=/^>|^->|<!--|-->|--!>|<!-$/g,Dy=/(<|>)/g;function Pl(e,t){return e.createText(t)}function $h(e,t,n){e.setValue(t,n)}function Rl(e,t){return e.createComment(function kh(e){return e.replace(by,t=>t.replace(Dy,"\u200b$1\u200b"))}(t))}function lc(e,t,n){return e.createElement(t,n)}function _i(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Uh(e,t,n){e.appendChild(t,n)}function Bh(e,t,n,r,i){null!==r?_i(e,t,n,r,i):Uh(e,t,n)}function ba(e,t,n,r){e.removeChild(null,t,n,r)}function Vh(e,t,n){const{mergedAttrs:r,classes:i,styles:a}=n;null!==r&&function Tt(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const a=n[r++],g=n[r++],C=n[r++];e.setAttribute(t,g,C,a)}else{const a=i,g=n[++r];an(a)?e.setProperty(t,a,g):e.setAttribute(t,a,g),r++}}}(e,t,r),null!==i&&function Ay(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}(e,t,i),null!==a&&function Cy(e,t,n){e.setAttribute(t,"style",n)}(e,t,a)}var Gi=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Gi||{});function xl(e){const t=Da();return t?t.sanitize(Gi.URL,e)||"":Zs(e,"URL")?Ls(e):Ea((0,o.eFE)(e))}function Wh(e){const t=Da();if(t)return Gr(t.sanitize(Gi.RESOURCE_URL,e)||"");if(Zs(e,"ResourceURL"))return Gr(Ls(e));throw new o.buA(904,!1)}const Ry=new Set(["embed","frame","iframe","media","script"]),xy=new Set(["base","link","script"]);function Kh(e,t,n){return function Ly(e,t){return"src"===t&&Ry.has(e)||"href"===t&&xy.has(e)||"xlink:href"===t&&"script"===e?Wh:xl}(t,n)(e)}function Da(){const e=(0,o.OAn)();return e&&e[o.M0L].sanitizer}const uc=new Set(["attributename"]),Ny={iframe:new Set(["sandbox","allow","allowfullscreen","referrerpolicy","csp","fetchpriority"]),animate:uc,set:uc,animatemotion:uc,animatetransform:uc};function Hh(e){return e.ownerDocument.defaultView}function zh(e){return e.ownerDocument}function ws(e){return e instanceof Function?e():e}function qh(e){if(!(0,o.xUg)(e))throw new o.buA(906,`The ${(0,o.PP7)(e)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}function Vy(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}const Yh="ng-template";function Wy(e,t,n,r){let i=0;if(r){for(;i<t.length&&"string"==typeof t[i];i+=2)if("class"===t[i]&&-1!==Vy(t[i+1].toLowerCase(),n,0))return!0}else if(Ll(e))return!1;if(i=t.indexOf(1,i),i>-1){let a;for(;++i<t.length&&"string"==typeof(a=t[i]);)if(a.toLowerCase()===n)return!0}return!1}function Ll(e){return 4===e.type&&e.value!==Yh}function Ky(e,t,n){return t===(4!==e.type||n?e.value:Yh)}function Hy(e,t,n){let r=4;const i=e.attrs,a=null!==i?function Xy(e){for(let t=0;t<e.length;t++)if($t(e[t]))return t;return e.length}(i):0;let g=!1;for(let C=0;C<t.length;C++){const T=t[C];if("number"!=typeof T){if(!g)if(4&r){if(r=2|1&r,""!==T&&!Ky(e,T,n)||""===T&&1===t.length){if(ds(r))return!1;g=!0}}else if(8&r){if(null===i||!Wy(e,i,T,n)){if(ds(r))return!1;g=!0}}else{const X=t[++C],se=zy(T,i,Ll(e),n);if(-1===se){if(ds(r))return!1;g=!0;continue}if(""!==X){let $e;if($e=se>a?"":i[se+1].toLowerCase(),2&r&&X!==$e){if(ds(r))return!1;g=!0}}}}else{if(!g&&!ds(r)&&!ds(T))return!1;if(g&&ds(T))continue;g=!1,r=T|1&r}}return ds(r)||g}function ds(e){return!(1&e)}function zy(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let a=!1;for(;i<t.length;){const g=t[i];if(g===e)return i;if(3===g||6===g)a=!0;else{if(1===g||2===g){let C=t[++i];for(;"string"==typeof C;)C=t[++i];continue}if(4===g)break;if(0===g){i+=4;continue}}i+=a?1:2}return-1}return function qy(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Zh(e,t,n=!1){for(let r=0;r<t.length;r++)if(Hy(e,t[r],n))return!0;return!1}function Qy(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function ep(e,t){return e?":not("+t.trim()+")":t}function Jy(e){let t=e[0],n=1,r=2,i="",a=!1;for(;n<e.length;){let g=e[n];if("string"==typeof g)if(2&r){const C=e[++n];i+="["+g+(C.length>0?'="'+C+'"':"")+"]"}else 8&r?i+="."+g:4&r&&(i+=" "+g);else""!==i&&!ds(g)&&(t+=ep(a,i),i=""),r=g,a=a||!ds(r);n++}return""!==i&&(t+=ep(a,i)),t}const to={};function Nl(e,t,n,r,i,a,g,C,T,X,se){const $e=o.Yw1+r,it=$e+i,lt=function e0(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:to);return n}($e,it),Rt="function"==typeof X?X():X;return lt[o.eDl]={type:e,blueprint:lt,template:n,queries:null,viewQuery:C,declTNode:t,data:lt.slice().fill(null,$e),bindingStartIndex:$e,expandoStartIndex:it,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:T,consts:Rt,incompleteFirstPass:!1,ssrId:se}}function tp(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Nl(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function dc(e,t,n,r,i,a,g,C,T,X,se){const $e=t.blueprint.slice();return $e[o.jgP]=i,$e[o.Wg1]=1228|r,(null!==X||e&&2048&e[o.Wg1])&&($e[o.Wg1]|=2048),(0,o.HUe)($e),$e[o.f7T]=$e[o.X5O]=e,$e[o.SKP]=n,$e[o.M0L]=g||e&&e[o.M0L],$e[o.GpT]=C||e&&e[o.GpT],$e[o.YEL]=T||e&&e[o.YEL]||null,$e[o.qlT]=a,$e[o.ID]=function Kr(){return Lr++}(),$e[o.tcA]=se,$e[o.oMQ]=X,$e[o.b5C]=2==t.type?e[o.b5C]:$e,$e}function Fl(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Sa(e,t,n,r){if(0===n)return-1;const i=t.length;for(let a=0;a<n;a++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function kl(e,t){return e[o.EJG]?e[o.Yrj][o.K29]=t:e[o.EJG]=t,e[o.Yrj]=t,t}function np(e=1){rp((0,o.klJ)(),(0,o.OAn)(),(0,o._px)()+e,!1)}function rp(e,t,n,r){if(!r)if(3&~t[o.Wg1]){const a=e.preOrderHooks;null!==a&&ht(t,a,0,n)}else{const a=e.preOrderCheckHooks;null!==a&&Bt(t,a,n)}(0,o.ypq)(n)}var fc=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(fc||{});function Ca(e,t,n,r){const i=(0,S.Ht)(null);try{const[a,g,C]=e.inputs[n];let T=null;0!==(g&fc.SignalBased)&&(T=t[a][S.bh]),null!==T&&void 0!==T.transformFn?r=T.transformFn(r):null!==C&&(r=C.call(t,r)),null!==e.setInput?e.setInput(t,T,r,n,a):Fe(t,T,a,r)}finally{(0,S.Ht)(i)}}var hc=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(hc||{});let $l;function Ul(e,t){return $l(e,t)}function pc(e){if(!e)return 0;const t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function qi(e,t){return e.getPropertyValue(t).split(",").map(r=>r.trim())}function op(e,t){return void 0!==e&&e.duration>t.duration}function sp(e){return(null!=e.animationName||null!=e.propertyName)&&e.duration>0}function ip(e,t,n){if(!n)return;const r=e.getAnimations();return 0===r.length?function s0(e,t){const n=getComputedStyle(e),r=function o0(e){const t=qi(e,"animation-name"),n=qi(e,"animation-delay"),r=qi(e,"animation-duration"),i={animationName:"",propertyName:void 0,duration:0};for(let a=0;a<t.length;a++){const g=pc(n[a])+pc(r[a]);g>i.duration&&(i.animationName=t[a],i.duration=g)}return i}(n),i=function r0(e){const t=qi(e,"transition-property"),n=qi(e,"transition-duration"),r=qi(e,"transition-delay"),i={propertyName:"",duration:0,animationName:void 0};for(let a=0;a<t.length;a++){const g=pc(r[a])+pc(n[a]);g>i.duration&&(i.propertyName=t[a],i.duration=g)}return i}(n),a=r.duration>i.duration?r:i;op(t.get(e),a)||sp(a)&&t.set(e,a)}(e,t):function a0(e,t,n){let r={animationName:void 0,propertyName:void 0,duration:0};for(const i of n){const a=i.effect?.getTiming(),g="number"==typeof a?.duration?a.duration:0;let T,X,C=(a?.delay??0)+g;i.animationName?X=i.animationName:T=i.transitionProperty,C>=r.duration&&(r={animationName:X,propertyName:T,duration:C})}op(t.get(e),r)||sp(r)&&t.set(e,r)}(e,t,r)}const vi=new Set;var Bl=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(Bl||{});const Aa=new o.nKC(""),ap=new Set;function Mo(e){ap.has(e)||(ap.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}const cp=!1,Fs=class c0 extends Pe.B{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,(0,o.M6u)()&&(this.destroyRef=(0,o.WQX)(o.abz,{optional:!0})??void 0,this.pendingTasks=(0,o.WQX)(o.rev,{optional:!0})??void 0)}emit(t){const n=(0,S.Ht)(null);try{super.next(t)}finally{(0,S.Ht)(n)}}subscribe(t,n,r){let i=t,a=n||(()=>null),g=r;if(t&&"object"==typeof t){const T=t;i=T.next?.bind(T),a=T.error?.bind(T),g=T.complete?.bind(T)}this.__isAsync&&(a=this.wrapInTimeout(a),i&&(i=this.wrapInTimeout(i)),g&&(g=this.wrapInTimeout(g)));const C=super.subscribe({next:i,error:a,complete:g});return t instanceof Ce.yU&&t.add(C),C}wrapInTimeout(t){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function lp(e){let t,n;function r(){e=o.lQ1;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==t&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function up(e){return queueMicrotask(()=>e()),()=>{e=o.lQ1}}const jl="isAngularZone",gc=jl+"_ID";let l0=0;class io{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Fs(!1);onMicrotaskEmpty=new Fs(!1);onStable=new Fs(!1);onError=new Fs(!1);constructor(t){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:a=cp}=t;if(typeof Zone>"u")throw new o.buA(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!i&&r,g.shouldCoalesceRunChangeDetection=i,g.callbackScheduled=!1,g.scheduleInRootZone=a,function f0(e){const t=()=>{!function d0(e){function t(){lp(()=>{e.callbackScheduled=!1,Wl(e),e.isCheckStableRunning=!0,Vl(e),e.isCheckStableRunning=!1})}e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Wl(e))}(e)},n=l0++;e._inner=e._inner.fork({name:"angular",properties:{[jl]:!0,[gc]:n,[gc+n]:!0},onInvokeTask:(r,i,a,g,C,T)=>{if(function h0(e){return hp(e,"__ignore_ng_zone__")}(T))return r.invokeTask(a,g,C,T);try{return dp(e),r.invokeTask(a,g,C,T)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||e.shouldCoalesceRunChangeDetection)&&t(),fp(e)}},onInvoke:(r,i,a,g,C,T,X)=>{try{return dp(e),r.invoke(a,g,C,T,X)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!function p0(e){return hp(e,"__scheduler_tick__")}(T)&&t(),fp(e)}},onHasTask:(r,i,a,g)=>{r.hasTask(a,g),i===a&&("microTask"==g.change?(e._hasPendingMicrotasks=g.microTask,Wl(e),Vl(e)):"macroTask"==g.change&&(e.hasPendingMacrotasks=g.macroTask))},onHandleError:(r,i,a,g)=>(r.handleError(a,g),e.runOutsideAngular(()=>e.onError.emit(g)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(jl)}static assertInAngularZone(){if(!io.isInAngularZone())throw new o.buA(909,!1)}static assertNotInAngularZone(){if(io.isInAngularZone())throw new o.buA(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const a=this._inner,g=a.scheduleEventTask("NgZoneEvent: "+i,t,u0,o.lQ1,o.lQ1);try{return a.runTask(g,n,r)}finally{a.cancelTask(g)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const u0={};function Vl(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Wl(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&!0===e.callbackScheduled)}function dp(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function fp(e){e._nesting--,Vl(e)}class Kl{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Fs;onMicrotaskEmpty=new Fs;onStable=new Fs;onError=new Fs;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}function hp(e,t){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0]?.data?.[t]}function g0(e="zone.js",t){return"noop"===e?new Kl:"zone.js"===e?new io(t):e}let pp=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:()=>new e})}return e})();const gp=[0,1,2,3];let m0=(()=>{class e{ngZone=(0,o.WQX)(io);scheduler=(0,o.WQX)(o.hk6);errorHandler=(0,o.WQX)(o.zcH,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){(0,o.WQX)(Aa,{optional:!0})}execute(){const n=this.sequences.size>0;n&&vt(16),this.executing=!0;for(const r of gp)for(const i of this.sequences)if(!i.erroredOrDestroyed&&i.hooks[r])try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,i.hooks[r])(i.pipelinedValue),i.snapshot))}catch(a){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(a)}this.executing=!1;for(const r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(const r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&vt(17)}register(n){const{view:r}=n;void 0!==r?((r[o.JEi]??=[]).push(n),(0,o.blu)(r),r[o.Wg1]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Bl.AFTER_NEXT_RENDER,n):n()}static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:()=>new e})}return e})();class mp{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,a,g=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=g,this.unregisterOnDestroy=a?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const t=this.view?.[o.JEi];t&&(this.view[o.JEi]=t.filter(n=>n!==this))}}function Hl(e,t){const n=t?.injector??(0,o.WQX)(o.zZn);return Mo("NgAfterNextRender"),_p(e,n,t,!0)}function _p(e,t,n,r){const i=t.get(pp);i.impl??=t.get(m0);const a=t.get(Aa,null,{optional:!0}),g=!0!==n?.manualCleanup?t.get(o.abz):null,C=t.get(o.r4V,null,{optional:!0}),T=new mp(i.impl,function v0(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}(e),C?.view,r,g,a?.snapshot(null));return i.impl.register(T),T}const mc=new o.nKC("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function vp(e,t,n){const r=e.get(mc);if(Array.isArray(t))for(const i of t)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(e)}function E0(e){const t=e.get(mc);t.isScheduled||(Hl(()=>{t.isScheduled=!1;for(let n of t.queue)n();t.queue.clear()},{injector:e}),t.isScheduled=!0)}function _c(e){const t=e.get(mc);t.scheduler=E0,t.scheduler(e)}function zl(e,t){for(const[n,r]of t)vp(e,r.animateFns)}function yp(e,t,n,r){const i=e?.[o.Isx]?.enter;null!==t&&i&&i.has(n.index)&&zl(r,i)}function Qi(e,t,n,r,i,a,g,C){if(null!=i){let T,X=!1;(0,o.A0l)(i)?T=i:(0,o.q$2)(i)&&(X=!0,i=i[o.jgP]);const se=(0,o.IvY)(i);0===e&&null!==r?(yp(C,r,a,n),null==g?Uh(t,r,se):_i(t,r,se,g||null,!0)):1===e&&null!==r?(yp(C,r,a,n),_i(t,r,se,g||null,!0)):2===e?Dp(C,a,n,$e=>{ba(t,se,X,$e)}):3===e&&Dp(C,a,n,()=>{t.destroyNode(se)}),null!=T&&function w0(e,t,n,r,i,a,g){const C=r[o.s6P];C!==(0,o.IvY)(r)&&Qi(t,e,n,a,C,i,g);for(let X=o.Y20;X<r.length;X++){const se=r[X];yc(se[o.eDl],se,e,t,a,C)}}(t,e,n,T,a,r,g)}}function Ep(e,t){bp(e,t),t[o.jgP]=null,t[o.qlT]=null}function bp(e,t){t[o.M0L].changeDetectionScheduler?.notify(9),yc(e,t,t[o.GpT],2,null,null)}function Gl(e,t){const n=e[o.nfM],r=n.indexOf(t);n.splice(r,1)}function Ia(e,t){if((0,o.EPY)(t))return;const n=t[o.GpT];n.destroyNode&&yc(e,t,n,3,null,null),function D0(e){let t=e[o.EJG];if(!t)return Xl(e[o.eDl],e);for(;t;){let n=null;if((0,o.q$2)(t))n=t[o.EJG];else{const r=t[o.Y20];r&&(n=r)}if(!n){for(;t&&!t[o.K29]&&t!==e;)(0,o.q$2)(t)&&Xl(t[o.eDl],t),t=t[o.f7T];null===t&&(t=e),(0,o.q$2)(t)&&Xl(t[o.eDl],t),n=t&&t[o.K29]}t=n}}(t)}function Xl(e,t){if((0,o.EPY)(t))return;const n=(0,S.Ht)(null);try{t[o.Wg1]&=-129,t[o.Wg1]|=256,t[o.Iaj]&&(0,S.XR)(t[o.Iaj]),function A0(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof Dt)){const a=n[r+1];if(Array.isArray(a))for(let g=0;g<a.length;g+=2){const C=i[a[g]],T=a[g+1];vt(4,C,T);try{T.call(C)}finally{vt(5,C,T)}}else{vt(4,i,a);try{a.call(i)}finally{vt(5,i,a)}}}}}(e,t),function C0(e,t){const n=e.cleanup,r=t[o.VVG];if(null!==n)for(let g=0;g<n.length-1;g+=2)if("string"==typeof n[g]){const C=n[g+3];C>=0?r[C]():r[-C].unsubscribe(),g+=2}else n[g].call(r[n[g+1]]);null!==r&&(t[o.VVG]=null);const i=t[o.Czx];if(null!==i){t[o.Czx]=null;for(let g=0;g<i.length;g++)(0,i[g])()}const a=t[o.tQN];if(null!==a){t[o.tQN]=null;for(const g of a)g.destroy()}}(e,t),1===t[o.eDl].type&&t[o.GpT].destroy();const r=t[o.rQE];if(null!==r&&(0,o.A0l)(t[o.f7T])){r!==t[o.f7T]&&Gl(r,t);const i=t[o.Ds7];null!==i&&i.detachView(e)}Ne(t)}finally{(0,S.Ht)(n)}}function Dp(e,t,n,r){const i=e?.[o.Isx];if(null==i||null==i.leave||!i.leave.has(t.index))return r(!1);e&&vi.add(e),vp(n,()=>{if(i.leave&&i.leave.has(t.index)){const g=i.leave.get(t.index),C=[];if(g){for(let T=0;T<g.animateFns.length;T++){const X=g.animateFns[T],{promise:se}=X();C.push(se)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(C),function S0(e,t){const n=e[o.Isx]?.running;n?n.then(()=>{e[o.Isx].running=void 0,vi.delete(e),t(!0)}):t(!1)}(e,r)}else e&&vi.delete(e),r(!1)},i)}function ql(e,t,n){return Sp(e,t.parent,n)}function Sp(e,t,n){let r=t;for(;null!==r&&168&r.type;)r=(t=r).parent;if(null===r)return n[o.jgP];if((0,o.Qs1)(r)){const{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===Uo.None||i===Uo.Emulated)return null}return(0,o.d31)(r,n)}function Cp(e,t,n){return Ip(e,t,n)}function Ap(e,t,n){return 40&e.type?(0,o.d31)(e,n):null}let Ql,Ip=Ap;function wp(e,t){Ip=e,Ql=t}function Jl(e,t,n,r){const i=ql(e,r,t),a=t[o.GpT],C=Cp(r.parent||t[o.qlT],r,t);if(null!=i)if(Array.isArray(n))for(let T=0;T<n.length;T++)Bh(a,i,n[T],C,!1);else Bh(a,i,n,C,!1);void 0!==Ql&&Ql(a,r,t,n,i)}function yi(e,t){if(null!==t){const n=t.type;if(3&n)return(0,o.d31)(t,e);if(4&n)return vc(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return yi(e,r);{const i=e[t.index];return(0,o.A0l)(i)?vc(-1,i):(0,o.IvY)(i)}}if(128&n)return yi(e,t.next);if(32&n)return Ul(t,e)()||(0,o.IvY)(e[t.index]);{const r=Tp(e,t);return null!==r?Array.isArray(r)?r[0]:yi((0,o._0$)(e[o.b5C]),r):yi(e,t.next)}}return null}function Tp(e,t){return null!==t?e[o.b5C][o.qlT].projection[t.projection]:null}function vc(e,t){const n=o.Y20+e+1;if(n<t.length){const r=t[n],i=r[o.eDl].firstChild;if(null!==i)return yi(r,i)}return t[o.s6P]}function Yl(e,t,n,r,i,a,g){for(;null!=n;){const C=r[o.YEL];if(128===n.type){n=n.next;continue}const T=r[n.index],X=n.type;if(g&&0===t&&(T&&q((0,o.IvY)(T),r),n.flags|=2),!eo(n))if(8&X)Yl(e,t,n.child,r,i,a,!1),Qi(t,e,C,i,T,n,a,r);else if(32&X){const se=Ul(n,r);let $e;for(;$e=se();)Qi(t,e,C,i,$e,n,a,r);Qi(t,e,C,i,T,n,a,r)}else 16&X?Mp(e,t,r,n,i,a):Qi(t,e,C,i,T,n,a,r);n=g?n.projectionNext:n.next}}function yc(e,t,n,r,i,a){Yl(n,r,e.firstChild,t,i,a,!1)}function Mp(e,t,n,r,i,a){const g=n[o.b5C],T=g[o.qlT].projection[r.projection];if(Array.isArray(T))for(let X=0;X<T.length;X++)Qi(t,e,n[o.YEL],i,T[X],r,a,n);else{let X=T;const se=g[o.f7T];Fr(r)&&(X.flags|=128),Yl(e,t,X,se,i,a,!0)}}function Op(e,t,n,r,i){const a=(0,o._px)(),g=2&r;try{(0,o.ypq)(-1),g&&t.length>o.Yw1&&rp(e,t,o.Yw1,!1),vt(g?2:0,i,n),n(r,i)}finally{(0,o.ypq)(a),vt(g?3:1,i,n)}}function Ec(e,t,n){(function x0(e,t,n){const r=n.directiveStart,i=n.directiveEnd;(0,o.Qs1)(n)&&function t0(e,t,n){const r=(0,o.d31)(t,e),i=tp(n),a=e[o.M0L].rendererFactory,g=kl(e,dc(e,i,null,Fl(n),r,t,null,a.createRenderer(r,n),null,null,null));e[t.index]=g}(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||Ir(n,t);const a=n.initialInputs;for(let g=r;g<i;g++){const C=e.data[g],T=cn(t,e,g,n);q(T,t),null!==a&&k0(0,g-r,T,C,0,a),(0,o.JlV)(C)&&((0,o.KdJ)(n.index,t)[o.SKP]=cn(t,e,g,n))}})(e,t,n),!(64&~n.flags)&&function L0(e,t,n){const r=n.directiveStart,i=n.directiveEnd,a=n.index,g=(0,o.Z9v)();try{(0,o.ypq)(a);for(let C=r;C<i;C++){const T=e.data[C],X=t[C];(0,o.RZ9)(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&N0(T,X)}}finally{(0,o.ypq)(-1),(0,o.RZ9)(g)}}(e,t,n)}function Ji(e,t,n=o.d31){const r=t.localNames;if(null!==r){let i=t.index+1;for(let a=0;a<r.length;a+=2){const g=r[a+1],C=-1===g?n(t,e):e[g];e[i++]=C}}}let Pp=()=>null;function Zl(e,t,n,r,i,a){Cc(e,t[o.eDl],t,n,r)?(0,o.Qs1)(e)&&Rp(t,e.index):(3&e.type&&(n=function R0(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(n)),eu(e,t,n,r,i,a))}function eu(e,t,n,r,i,a){if(3&e.type){const g=(0,o.d31)(e,t);r=null!=a?a(r,e.value||"",n):r,i.setProperty(g,n,r)}}function Rp(e,t){const n=(0,o.KdJ)(t,e);16&n[o.Wg1]||(n[o.Wg1]|=64)}function N0(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function tu(e,t){const n=e.directiveRegistry;let r=null;if(n)for(let i=0;i<n.length;i++){const a=n[i];Zh(t,a.selectors,!1)&&(r??=[],(0,o.JlV)(a)?r.unshift(a):r.push(a))}return r}function bc(e,t,n,r,i,a,g){if(null==a)e.removeAttribute(t,i,n);else{const C=null==g?(0,o.eFE)(a):g(a,r||"",i);e.setAttribute(t,i,C,n)}}function k0(e,t,n,r,i,a){const g=a[t];if(null!==g)for(let C=0;C<g.length;C+=2)Ca(r,n,g[C],g[C+1])}function Dc(e,t,n,r,i){const a=o.Yw1+n,g=t[o.eDl],C=i(g,t,e,r,n);t[a]=C,(0,o.iMd)(e,!0);const T=2===e.type;return T?(Vh(t[o.GpT],C,e),(0===(0,o.znI)()||(0,o.yoD)(e))&&q(C,t),(0,o.Fje)()):q(C,t),(0,o.SX7)()&&(!T||!eo(e))&&Jl(g,t,C,e),e}function Sc(e){let t=e;return(0,o.YWB)()?(0,o.Pfq)():(t=t.parent,(0,o.iMd)(t,!1)),t}function Lp(e,t,n){return(null===e||(0,o.JlV)(e))&&(n=(0,o.zAe)(n[t.index])),n[o.GpT]}function nu(e,t){const n=e[o.YEL];if(!n)return;let r;try{r=n.get(o.ZTf,null)}catch{r=null}r?.(t)}function Cc(e,t,n,r,i){const a=e.inputs?.[r],g=e.hostDirectiveInputs?.[r];let C=!1;if(g)for(let T=0;T<g.length;T+=2){const X=g[T];Ca(t.data[X],n[X],g[T+1],i),C=!0}if(a)for(const T of a)Ca(t.data[T],n[T],r,i),C=!0;return C}function U0(e,t){const n=(0,o.KdJ)(t,e),r=n[o.eDl];!function B0(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[o.jgP];null!==i&&null===n[o.tcA]&&(n[o.tcA]=null),vt(18),Ac(r,n,n[o.SKP]),vt(19,n[o.SKP])}function Ac(e,t,n){(0,o.ID8)(t);try{const r=e.viewQuery;null!==r&&Yo(1,r,n);const i=e.template;null!==i&&Op(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[o.Ds7]?.finishViewCreation(e),e.staticContentQueries&&Ys(e,t),e.staticViewQueries&&Yo(2,e.viewQuery,n);const a=e.components;null!==a&&function j0(e,t){for(let n=0;n<t.length;n++)U0(e,t[n])}(t,a)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[o.Wg1]&=-5,(0,o.bll)()}}function Yi(e,t,n,r){const i=(0,S.Ht)(null);try{const a=t.tView,T=dc(e,a,n,4096&e[o.Wg1]?4096:16,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);T[o.rQE]=e[t.index];const se=e[o.Ds7];return null!==se&&(T[o.Ds7]=se.createEmbeddedView(a)),Ac(a,T,n),T}finally{(0,S.Ht)(i)}}function Ei(e,t){return!t||null===t.firstChild||Fr(e)}function wa(e,t,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const a=t[n.index];null!==a&&r.push((0,o.IvY)(a)),(0,o.A0l)(a)&&V0(a,r);const g=n.type;if(8&g)wa(e,t,n.child,r);else if(32&g){const C=Ul(n,t);let T;for(;T=C();)r.push(T)}else if(16&g){const C=Tp(t,n);if(Array.isArray(C))r.push(...C);else{const T=(0,o._0$)(t[o.b5C]);wa(T[o.eDl],T,C,r,!0)}}n=i?n.projectionNext:n.next}return r}function V0(e,t){for(let n=o.Y20;n<e.length;n++){const r=e[n],i=r[o.eDl].firstChild;null!==i&&wa(r[o.eDl],r,i,t)}e[o.s6P]!==e[o.jgP]&&t.push(e[o.s6P])}function Np(e){if(null!==e[o.JEi]){for(const t of e[o.JEi])t.impl.addSequence(t);e[o.JEi].length=0}}let Fp=[];const z0={...S.pL,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{(0,o.blu)(e.lView)},consumerOnSignalRead(){this.lView[o.Iaj]=this}},X0={...S.pL,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=(0,o._0$)(e.lView);for(;t&&!kp(t[o.eDl]);)t=(0,o._0$)(t);t&&(0,o.HAh)(t)},consumerOnSignalRead(){this.lView[o.Iaj]=this}};function kp(e){return 2!==e.type}function $p(e){if(null===e[o.tQN])return;let t=!0;for(;t;){let n=!1;for(const r of e[o.tQN])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(8192&e[o.Wg1])}}function Ic(e,t=0){const r=e[o.M0L].rendererFactory;r.begin?.();try{!function Q0(e,t){const n=(0,o.yP_)();try{(0,o.cBl)(!0),ru(e,t);let r=0;for(;(0,o.dMS)(e);){if(100===r)throw new o.buA(103,!1);r++,ru(e,1)}}finally{(0,o.cBl)(n)}}(e,t)}finally{r.end?.()}}function Up(e,t,n,r){if((0,o.EPY)(t))return;const i=t[o.Wg1];(0,o.ID8)(t);let C=!0,T=null,X=null;kp(e)?(X=function W0(e){return e[o.Iaj]??function K0(e){const t=Fp.pop()??Object.create(z0);return t.lView=e,t}(e)}(t),T=(0,S.Bg)(X)):null===(0,S.nR)()?(C=!1,X=function G0(e){const t=e[o.Iaj]??Object.create(X0);return t.lView=e,t}(t),T=(0,S.Bg)(X)):t[o.Iaj]&&((0,S.XR)(t[o.Iaj]),t[o.Iaj]=null);try{(0,o.HUe)(t),(0,o.Kw3)(e.bindingStartIndex),null!==n&&Op(e,t,n,2,r);const se=!(3&~i);if(se){const lt=e.preOrderCheckHooks;null!==lt&&Bt(t,lt,null)}else{const lt=e.preOrderHooks;null!==lt&&ht(t,lt,0,null),Nt(t,0)}if(function J0(e){for(let t=W(e);null!==t;t=Bn(t)){if(!(2&t[o.Wg1]))continue;const n=t[o.nfM];for(let r=0;r<n.length;r++)(0,o.HAh)(n[r])}}(t),$p(t),Bp(t,0),null!==e.contentQueries&&Ys(e,t),se){const lt=e.contentCheckHooks;null!==lt&&Bt(t,lt)}else{const lt=e.contentHooks;null!==lt&&ht(t,lt,1),Nt(t,1)}!function Z0(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)(0,o.ypq)(~i);else{const a=i,g=n[++r],C=n[++r];(0,o.vQI)(g,a);const T=t[a];vt(24,T),C(2,T),vt(25,T)}}}finally{(0,o.ypq)(-1)}}(e,t);const $e=e.components;null!==$e&&Vp(t,$e,0);const it=e.viewQuery;if(null!==it&&Yo(2,it,r),se){const lt=e.viewCheckHooks;null!==lt&&Bt(t,lt)}else{const lt=e.viewHooks;null!==lt&&ht(t,lt,2),Nt(t,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[o.pcR]){for(const lt of t[o.pcR])lt();t[o.pcR]=null}Np(t),t[o.Wg1]&=-73}catch(se){throw(0,o.blu)(t),se}finally{null!==X&&((0,S.Wu)(X,T),C&&function H0(e){e.lView[o.Iaj]!==e&&(e.lView=null,Fp.push(e))}(X)),(0,o.bll)()}}function Bp(e,t){for(let n=W(e);null!==n;n=Bn(n))for(let r=o.Y20;r<n.length;r++)jp(n[r],t)}function Y0(e,t,n){vt(18);const r=(0,o.KdJ)(t,e);jp(r,n),vt(19,r[o.SKP])}function jp(e,t){(0,o.F1c)(e)&&ru(e,t)}function ru(e,t){const r=e[o.eDl],i=e[o.Wg1],a=e[o.Iaj];let g=!!(0===t&&16&i);if(g||=!!(64&i&&0===t),g||=!!(1024&i),g||=!(!a?.dirty||!(0,S.si)(a)),g||=!1,a&&(a.dirty=!1),e[o.Wg1]&=-9217,g)Up(r,e,r.template,e[o.SKP]);else if(8192&i){const C=(0,S.Ht)(null);try{$p(e),Bp(e,1);const T=r.components;null!==T&&Vp(e,T,1),Np(e)}finally{(0,S.Ht)(C)}}}function Vp(e,t,n){for(let r=0;r<t.length;r++)Y0(e,t[r],n)}function Zi(e,t){const n=(0,o.yP_)()?64:1088;for(e[o.M0L].changeDetectionScheduler?.notify(t);e;){e[o.Wg1]|=n;const r=(0,o._0$)(e);if((0,o.EFk)(e)&&!r)return e;e=r}return null}function Wp(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Kp(e,t){const n=o.Y20+t;if(n<e.length)return e[n]}function ea(e,t,n,r=!0){const i=t[o.eDl];if(function eE(e,t,n,r){const i=o.Y20+r,a=n.length;r>0&&(n[i-1][o.K29]=t),r<a-o.Y20?(t[o.K29]=n[i],(0,o.EYC)(n,o.Y20+r,t)):(n.push(t),t[o.K29]=null),t[o.f7T]=n;const g=t[o.rQE];null!==g&&n!==g&&Hp(g,t);const C=t[o.Ds7];null!==C&&C.insertView(e),(0,o._gW)(t),t[o.Wg1]|=128}(i,t,e,n),r){const g=vc(n,e),C=t[o.GpT],T=C.parentNode(e[o.s6P]);null!==T&&function b0(e,t,n,r,i,a){r[o.jgP]=i,r[o.qlT]=t,yc(e,r,n,1,i,a)}(i,e[o.qlT],C,t,T,g)}const a=t[o.tcA];null!==a&&null!==a.firstChild&&(a.firstChild=null)}function ou(e,t){const n=Ta(e,t);return void 0!==n&&Ia(n[o.eDl],n),n}function Ta(e,t){if(e.length<=o.Y20)return;const n=o.Y20+t,r=e[n];if(r){const i=r[o.rQE];null!==i&&i!==e&&Gl(i,r),t>0&&(e[n-1][o.K29]=r[o.K29]);const a=(0,o.E6O)(e,o.Y20+t);Ep(r[o.eDl],r);const g=a[o.Ds7];null!==g&&g.detachView(a[o.eDl]),r[o.f7T]=null,r[o.K29]=null,r[o.Wg1]&=-129}return r}function Hp(e,t){const n=e[o.nfM],r=t[o.f7T];((0,o.q$2)(r)||t[o.b5C]!==r[o.f7T][o.b5C])&&(e[o.Wg1]|=2),null===n?e[o.nfM]=[t]:n.push(t)}class wc{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const t=this._lView,n=t[o.eDl];return wa(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[o.SKP]}set context(t){this._lView[o.SKP]=t}get destroyed(){return(0,o.EPY)(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[o.f7T];if((0,o.A0l)(t)){const n=t[o.bm_],r=n?n.indexOf(this):-1;r>-1&&(Ta(t,r),(0,o.E6O)(n,r))}this._attachedToViewContainer=!1}Ia(this._lView[o.eDl],this._lView)}onDestroy(t){(0,o.ik5)(this._lView,t)}markForCheck(){Zi(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[o.Wg1]&=-129}reattach(){(0,o._gW)(this._lView),this._lView[o.Wg1]|=128}detectChanges(){this._lView[o.Wg1]|=1024,Ic(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new o.buA(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const t=(0,o.EFk)(this._lView),n=this._lView[o.rQE];null!==n&&!t&&Gl(n,this._lView),bp(this._lView[o.eDl],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new o.buA(902,!1);this._appRef=t;const n=(0,o.EFk)(this._lView),r=this._lView[o.rQE];null!==r&&!n&&Hp(r,this._lView),(0,o._gW)(this._lView)}}let Ma=(()=>class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=tE;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){const a=Yi(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new wc(a)}})();function tE(){return Tc((0,o.Mx4)(),(0,o.OAn)())}function Tc(e,t){return 4&e.type?new Ma(t,e,Qn(e,t)):null}function Xp(e,t,n){const r=t.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Ap(e,0,n):(0,o.IvY)(n[i])}function qp(e,t,n,r,i){const a=t.insertBeforeIndex;if(Array.isArray(a)){let g=r,C=null;if(3&t.type||(C=g,g=i),null!==g&&-1===t.componentOffset)for(let T=1;T<a.length;T++)_i(e,g,n[a[T]],C,!1)}}function bi(e,t,n,r,i){let a=e.data[t];if(null===a)a=cu(e,t,n,r,i),(0,o.JjR)()&&(a.flags|=32);else if(64&a.type){a.type=n,a.value=r,a.attrs=i;const g=(0,o.Ab)();a.injectorIndex=null===g?-1:g.injectorIndex}return(0,o.iMd)(a,!0),a}function cu(e,t,n,r,i){const a=(0,o.veI)(),g=(0,o.YWB)(),T=e.data[t]=function uE(e,t,n,r,i,a){let g=t?t.injectorIndex:-1,C=0;return(0,o.KtD)()&&(C|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:g,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?a:a&&a.parent,n,t,r,i);return function lE(e,t,n,r){null===e.firstChild&&(e.firstChild=t),null!==n&&(r?null==n.child&&null!==t.parent&&(n.child=t):null===n.next&&(n.next=t,t.prev=n))}(e,T,a,g),T}function Qp(e,t){if(e.push(t),e.length>1)for(let n=e.length-2;n>=0;n--){const r=e[n];Jp(r)||dE(r,t)&&null===fE(r)&&hE(r,t.index)}}function Jp(e){return!(64&e.type)}function dE(e,t){return Jp(t)||e.index>t.index}function fE(e){const t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function hE(e,t){const n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(wp(Xp,qp),e.insertBeforeIndex=t)}function xa(e,t){const n=e.data[t];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function mE(e,t,n){const r=cu(e,n,64,null,null);return Qp(t,r),r}function Oc(e,t){const n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}function Yp(e){return e>>>17}function Zp(e){return(131070&e)>>>1}function lu(e,t,n){e.index=0;const r=Oc(t,n);e.removes=null!==r?t.remove[r]:o.Mlv}function Pc(e){if(e.index<e.removes.length){const t=e.removes[e.index++];return t>0?e.lView[t]:(e.stack.push(e.index,e.removes),lu(e,e.lView[o.eDl].data[~t],e.lView),Pc(e))}return 0===e.stack.length?(e.lView=void 0,null):(e.removes=e.stack.pop(),e.index=e.stack.pop(),Pc(e))}function vE(){const e={stack:[],index:-1};return function t(n,r){for(e.lView=r;e.stack.length;)e.stack.pop();return lu(e,n.value,r),Pc.bind(null,e)}}function $E(e,t,n){for(const r of n.node.cases[n.case]){const i=t.get(r.index-o.Yw1);i&&ba(e,i,!1)}}function xc(e){const t=e[o.qFA]??[],r=e[o.f7T][o.GpT],i=[];for(const a of t)void 0!==a.data.di?i.push(a):ug(a,r);e[o.qFA]=i}function UE(e){const{lContainer:t}=e,n=t[o.qFA];if(null===n)return;const i=t[o.f7T][o.GpT];for(const a of n)ug(a,i)}function ug(e,t){let n=0,r=e.firstChild;if(r){const i=e.data.r;for(;n<i;){const a=r.nextSibling;ba(t,r,!1),r=a,n++}}}function Lc(e){xc(e);const t=e[o.jgP];(0,o.q$2)(t)&&Nc(t);for(let n=o.Y20;n<e.length;n++)Nc(e[n])}function Nc(e){!function kE(e){const t=e[o.tcA];if(t){const{i18nNodes:n,dehydratedIcuData:r}=t;if(n&&r){const i=e[o.GpT];for(const a of r.values())$E(i,n,a)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}(e);const t=e[o.eDl];for(let n=o.Yw1;n<t.bindingStartIndex;n++)(0,o.A0l)(e[n])?Lc(e[n]):(0,o.q$2)(e[n])&&Nc(e[n])}let zE=class{},mg=class{};class GE{resolveComponentFactory(t){throw new o.buA(917,!1)}}let Fc=class{static NULL=new GE};class gu{}let XE=(()=>class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>function qE(){const e=(0,o.OAn)(),t=(0,o.Mx4)(),n=(0,o.KdJ)(t.index,e);return((0,o.q$2)(n)?n:e)[o.GpT]}()})(),QE=(()=>{class e{static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:()=>null})}return e})();function mu(e){return void 0!==e.ngModule}function Si(e){return!!(0,o.phH)(e)}function kc(e){return!!(0,o.oyA)(e)}function _g(e){return!!(0,o.HaV)(e)}function ka(e){return!!(0,o.xUg)(e)}function YE(e,t){if((0,o.Jzi)(e)&&!(e=(0,o.nl4)(e)))throw new Error(`Expected forwardRef function, imported from "${(0,o.PP7)(t)}", to return a standalone entity or NgModule but got "${(0,o.PP7)(e)||e}".`);if(null==(0,o.phH)(e)){const n=(0,o.xUg)(e)||(0,o.HaV)(e)||(0,o.oyA)(e);if(null==n)throw mu(e)?new Error(`A module with providers was imported from "${(0,o.PP7)(t)}". Modules with providers are not supported in standalone components imports.`):new Error(`The "${(0,o.PP7)(e)}" type, imported from "${(0,o.PP7)(t)}", must be a standalone component / directive / pipe or an NgModule. Did you forget to add the required @Component / @Directive / @Pipe or @NgModule annotation?`);if(!n.standalone)throw new Error(`The "${(0,o.PP7)(e)}" ${function JE(e){return(0,o.xUg)(e)?"component":(0,o.HaV)(e)?"directive":(0,o.oyA)(e)?"pipe":"type"}(e)}, imported from "${(0,o.PP7)(t)}", is not standalone. Did you forget to add the standalone: true flag?`)}}class ZE{ownerNgModule=new Map;ngModulesWithSomeUnresolvedDecls=new Set;ngModulesScopeCache=new Map;standaloneComponentsScopeCache=new Map;resolveNgModulesDecls(){if(0!==this.ngModulesWithSomeUnresolvedDecls.size){for(const t of this.ngModulesWithSomeUnresolvedDecls){const n=(0,o.phH)(t);if(n?.declarations)for(const r of ws(n.declarations))ka(r)&&this.ownerNgModule.set(r,t)}this.ngModulesWithSomeUnresolvedDecls.clear()}}getComponentDependencies(t,n){this.resolveNgModulesDecls();const r=(0,o.xUg)(t);if(null===r)throw new Error(`Attempting to get component dependencies for a type that is not a component: ${t}`);if(r.standalone){const i=this.getStandaloneComponentScope(t,n);return i.compilation.isPoisoned?{dependencies:[]}:{dependencies:[...i.compilation.directives,...i.compilation.pipes,...i.compilation.ngModules]}}{if(!this.ownerNgModule.has(t))return{dependencies:[]};const i=this.getNgModuleScope(this.ownerNgModule.get(t));return i.compilation.isPoisoned?{dependencies:[]}:{dependencies:[...i.compilation.directives,...i.compilation.pipes]}}}registerNgModule(t,n){if(!Si(t))throw new Error(`Attempting to register a Type which is not NgModule as NgModule: ${t}`);this.ngModulesWithSomeUnresolvedDecls.add(t)}clearScopeCacheFor(t){this.ngModulesScopeCache.delete(t),this.standaloneComponentsScopeCache.delete(t)}getNgModuleScope(t){if(this.ngModulesScopeCache.has(t))return this.ngModulesScopeCache.get(t);const n=this.computeNgModuleScope(t);return this.ngModulesScopeCache.set(t,n),n}computeNgModuleScope(t){const n=(0,o.WbQ)(t),r={exported:{directives:new Set,pipes:new Set},compilation:{directives:new Set,pipes:new Set}};for(const i of ws(n.imports))if(Si(i)){const a=this.getNgModuleScope(i);ei(a.exported.directives,r.compilation.directives),ei(a.exported.pipes,r.compilation.pipes)}else{if(!(0,o.QuC)(i)){r.compilation.isPoisoned=!0;break}if(_g(i)||ka(i))r.compilation.directives.add(i);else{if(!kc(i))throw new o.buA(980,"The standalone imported type is neither a component nor a directive nor a pipe");r.compilation.pipes.add(i)}}if(!r.compilation.isPoisoned)for(const i of ws(n.declarations)){if(Si(i)||(0,o.QuC)(i)){r.compilation.isPoisoned=!0;break}kc(i)?r.compilation.pipes.add(i):r.compilation.directives.add(i)}for(const i of ws(n.exports))if(Si(i)){const a=this.getNgModuleScope(i);ei(a.exported.directives,r.exported.directives),ei(a.exported.pipes,r.exported.pipes),ei(a.exported.directives,r.compilation.directives),ei(a.exported.pipes,r.compilation.pipes)}else kc(i)?r.exported.pipes.add(i):r.exported.directives.add(i);return r}getStandaloneComponentScope(t,n){if(this.standaloneComponentsScopeCache.has(t))return this.standaloneComponentsScopeCache.get(t);const r=this.computeStandaloneComponentScope(t,n);return this.standaloneComponentsScopeCache.set(t,r),r}computeStandaloneComponentScope(t,n){const r={compilation:{directives:new Set([t]),pipes:new Set,ngModules:new Set}};for(const i of(0,o.Bqz)(n??[])){const a=(0,o.nl4)(i);try{YE(a,t)}catch{return r.compilation.isPoisoned=!0,r}if(Si(a)){r.compilation.ngModules.add(a);const g=this.getNgModuleScope(a);if(g.exported.isPoisoned)return r.compilation.isPoisoned=!0,r;ei(g.exported.directives,r.compilation.directives),ei(g.exported.pipes,r.compilation.pipes)}else if(kc(a))r.compilation.pipes.add(a);else{if(!_g(a)&&!ka(a))return r.compilation.isPoisoned=!0,r;r.compilation.directives.add(a)}}return r}isOrphanComponent(t){const n=(0,o.xUg)(t);return!(!n||n.standalone||(this.resolveNgModulesDecls(),this.ownerNgModule.has(t)))}}function ei(e,t){for(const n of e)t.add(n)}const $a=new ZE,_u={};class na{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){const i=this.injector.get(t,_u,r);return i!==_u||n===_u?i:this.parentInjector.get(t,n,r)}}function $c(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(let g=0;g<t.length;g++){const C=t[g];if("number"==typeof C)a=C;else if(1==a)i=(0,o.n$e)(i,C);else if(2==a){const X=t[++g];r=(0,o.n$e)(r,C+": "+X+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function ra(e,t=0){const n=(0,o.OAn)();return null===n?(0,o.KVO)(e,t):It((0,o.Mx4)(),n,(0,o.nl4)(e),t)}function vg(){throw new Error("invalid")}function yg(e,t,n,r,i){const a=null===r?null:{"":-1},g=i(e,n);if(null!==g){let C=g,T=null,X=null;for(const se of g)if(null!==se.resolveHostDirectives){[C,T,X]=se.resolveHostDirectives(g);break}!function nb(e,t,n,r,i,a,g){const C=r.length;let T=!1;for(let it=0;it<C;it++){const lt=r[it];!T&&(0,o.JlV)(lt)&&(T=!0,tb(e,n,it)),tr(Ir(n,t),e,lt.type)}!function cb(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,C);for(let it=0;it<C;it++){const lt=r[it];lt.providersResolver&&lt.providersResolver(lt)}let X=!1,se=!1,$e=Sa(e,t,C,null);C>0&&(n.directiveToIndex=new Map);for(let it=0;it<C;it++){const lt=r[it];if(n.mergedAttrs=pn(n.mergedAttrs,lt.hostAttrs),ob(e,n,t,$e,lt),ab($e,lt,i),null!==g&&g.has(lt)){const[nn,xn]=g.get(lt);n.directiveToIndex.set(lt.type,[$e,nn+n.directiveStart,xn+n.directiveStart])}else(null===a||!a.has(lt))&&n.directiveToIndex.set(lt.type,$e);null!==lt.contentQueries&&(n.flags|=4),(null!==lt.hostBindings||null!==lt.hostAttrs||0!==lt.hostVars)&&(n.flags|=64);const Rt=lt.type.prototype;!X&&(Rt.ngOnChanges||Rt.ngOnInit||Rt.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),X=!0),!se&&(Rt.ngOnChanges||Rt.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),se=!0),$e++}!function rb(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){const i=e.data[r];if(null!==n&&n.has(i)){const a=n.get(i);bg(0,t,a,r),bg(1,t,a,r),Sg(t,r,!0)}else Eg(0,t,i,r),Eg(1,t,i,r),Sg(t,r,!1)}}(e,n,a)}(e,t,n,C,a,T,X)}null!==a&&null!==r&&function eb(e,t,n){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const a=n[t[i+1]];if(null==a)throw new o.buA(-301,!1);r.push(t[i],a)}}(n,r,a)}function tb(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Eg(e,t,n,r){const i=0===e?n.inputs:n.outputs;for(const a in i)if(i.hasOwnProperty(a)){let g;g=0===e?t.inputs??={}:t.outputs??={},g[a]??=[],g[a].push(r),Dg(t,a)}}function bg(e,t,n,r){const i=0===e?n.inputs:n.outputs;for(const a in i)if(i.hasOwnProperty(a)){const g=i[a];let C;C=0===e?t.hostDirectiveInputs??={}:t.hostDirectiveOutputs??={},C[g]??=[],C[g].push(r,a),Dg(t,g)}}function Dg(e,t){"class"===t?e.flags|=8:"style"===t&&(e.flags|=16)}function Sg(e,t,n){const{attrs:r,inputs:i,hostDirectiveInputs:a}=e;if(null===r||!n&&null===i||n&&null===a||Ll(e))return e.initialInputs??=[],void e.initialInputs.push(null);let g=null,C=0;for(;C<r.length;){const T=r[C];if(0!==T)if(5!==T){if("number"==typeof T)break;if(!n&&i.hasOwnProperty(T)){const X=i[T];for(const se of X)if(se===t){g??=[],g.push(T,r[C+1]);break}}else if(n&&a.hasOwnProperty(T)){const X=a[T];for(let se=0;se<X.length;se+=2)if(X[se]===t){g??=[],g.push(X[se+1],r[C+1]);break}}C+=2}else C+=2;else C+=4}e.initialInputs??=[],e.initialInputs.push(g)}function ob(e,t,n,r,i){e.data[r]=i;const a=i.factory||(i.factory=(0,o.wGu)(i.type,!0)),g=new Dt(a,(0,o.JlV)(i),ra,null);e.blueprint[r]=g,n[r]=g,function sb(e,t,n,r,i){const a=i.hostBindings;if(a){let g=e.hostBindingOpCodes;null===g&&(g=e.hostBindingOpCodes=[]);const C=~t.index;(function ib(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(g)!=C&&g.push(C),g.push(n,r,a)}}(e,t,r,Sa(e,n,i.hostVars,to),i)}function ab(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;(0,o.JlV)(t)&&(n[""]=e)}}function vu(e,t,n,r,i,a,g,C){const T=t[o.eDl],X=T.consts,$e=bi(T,e,n,r,(0,o.db4)(X,g));return a&&yg(T,t,$e,(0,o.db4)(X,C),i),$e.mergedAttrs=pn($e.mergedAttrs,$e.attrs),null!==$e.attrs&&$c($e,$e.attrs,!1),null!==$e.mergedAttrs&&$c($e,$e.mergedAttrs,!0),null!==T.queries&&T.queries.elementStart(T,$e),$e}function yu(e,t){dt(e,t),(0,o.srX)(t)&&e.queries.elementEnd(t)}function Cg(e,t,n,r,i,a){const g=t.consts,T=bi(t,e,n,r,(0,o.db4)(g,i));if(T.mergedAttrs=pn(T.mergedAttrs,T.attrs),null!=a){const X=(0,o.db4)(g,a);T.localNames=[];for(let se=0;se<X.length;se+=2)T.localNames.push(X[se],-1)}return null!==T.attrs&&$c(T,T.attrs,!1),null!==T.mergedAttrs&&$c(T,T.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,T),T}function Eu(e){return!!Ag(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function ub(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}function Ag(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ts(e,t,n){return e[t]=n}function Ua(e,t){return e[t]}function lo(e,t,n){return n!==to&&(!Object.is(e[t],n)&&(e[t]=n,!0))}function Ci(e,t,n,r){const i=lo(e,t,n);return lo(e,t+1,r)||i}function Uc(e,t,n,r,i){const a=Ci(e,t,n,r);return lo(e,t+2,i)||a}function es(e,t,n,r,i,a){const g=Ci(e,t,n,r);return Ci(e,t+2,i,a)||g}function Ba(e,t,n){return function r(i){Zi((0,o.Qs1)(e)?(0,o.KdJ)(e.index,t):t,5);const g=t[o.SKP];let C=Ig(t,g,n,i),T=r.__ngNextListenerFn__;for(;T;)C=Ig(t,g,T,i)&&C,T=T.__ngNextListenerFn__;return C}}function Ig(e,t,n,r){const i=(0,S.Ht)(null);try{return vt(6,t,n),!1!==n(r)}catch(a){return nu(e,a),!1}finally{vt(7,t,n),(0,S.Ht)(i)}}function wg(e,t,n,r,i,a,g,C){const T=(0,o.yoD)(e);let X=!1,se=null;if(!r&&T&&(se=function hb(e,t,n,r){const i=e.cleanup;if(null!=i)for(let a=0;a<i.length-1;a+=2){const g=i[a];if(g===n&&i[a+1]===r){const C=t[o.VVG],T=i[a+2];return C&&C.length>T?C[T]:null}"string"==typeof g&&(a+=2)}return null}(t,n,a,e.index)),null!==se)(se.__ngLastListenerFn__||se).__ngNextListenerFn__=g,se.__ngLastListenerFn__=g,X=!0;else{const $e=(0,o.d31)(e,n),it=r?r($e):$e,lt=i.listen(it,a,C);(function fb(e){return e.startsWith("animation")||e.startsWith("transition")})(a)||Tg(r?nn=>r((0,o.IvY)(nn[e.index])):e.index,t,n,a,C,lt,!1)}return X}function Tg(e,t,n,r,i,a,g){const C=t.firstCreatePass?(0,o.vNG)(t):null,T=(0,o.d_l)(n),X=T.length;T.push(i,a),C&&C.push(r,e,X,(X+1)*(g?-1:1))}function Bc(e,t,n,r,i,a){const C=t[o.eDl],$e=t[n][C.data[n].outputs[r]].subscribe(a);Tg(e.index,C,t,i,a,$e,!0)}const ti=Symbol("BINDING");class Mg extends Fc{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=(0,o.xUg)(t);return new jc(n,this.ngModule)}}class jc extends mg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function bb(e){return Object.keys(e).map(t=>{const[n,r,i]=e[t],a={propName:n,templateName:t,isSignal:0!==(r&fc.SignalBased)};return i&&(a.transform=i),a})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function Db(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Yy(e){return e.map(Jy).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,a,g){vt(22);const C=(0,S.Ht)(null);try{const T=this.componentDef,X=function wb(e,t,n,r){const i=e?["ng-version","20.3.16"]:function Zy(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!ds(i))break;i=a}r++}return n.length&&t.push(1,...n),t}(t.selectors[0]);let a=null,g=null,C=0;if(n)for(const se of n)C+=se[ti].requiredVars,se.create&&(se.targetIdx=0,(a??=[]).push(se)),se.update&&(se.targetIdx=0,(g??=[]).push(se));if(r)for(let se=0;se<r.length;se++){const $e=r[se];if("function"!=typeof $e)for(const it of $e.bindings){C+=it[ti].requiredVars;const lt=se+1;it.create&&(it.targetIdx=lt,(a??=[]).push(it)),it.update&&(it.targetIdx=lt,(g??=[]).push(it))}}const T=[t];if(r)for(const se of r){const it=(0,o.HaV)("function"==typeof se?se:se.type);T.push(it)}return Nl(0,null,function Tb(e,t){return e||t?n=>{if(1&n&&e)for(const r of e)r.create();if(2&n&&t)for(const r of t)r.update()}:null}(a,g),1,C,T,null,null,null,[i],null)}(r,T,g,a),se=function Sb(e,t,n){let r=t instanceof o.uvJ?t:t?.injector;return r&&null!==e.getStandaloneInjector&&(r=e.getStandaloneInjector(r)||r),r?new na(n,r):n}(T,i||this.ngModule,t),$e=function Cb(e){const t=e.get(gu,null);if(null===t)throw new o.buA(407,!1);return{rendererFactory:t,sanitizer:e.get(QE,null),changeDetectionScheduler:e.get(o.hk6,null),ngReflect:!1}}(se),it=$e.rendererFactory.createRenderer(null,T),lt=r?function M0(e,t,n,r){const a=r.get(no,!1)||n===Uo.ShadowDom,g=e.selectRootElement(t,a);return function O0(e){Pp(e)}(g),g}(it,r,T.encapsulation,se):function Ab(e,t){const n=function Ib(e){return(e.selectors[0][0]||"div").toLowerCase()}(e);return lc(t,n,"svg"===n?o.jNX:"math"===n?o.rJ1:null)}(T,it),Rt=g?.some(Og)||a?.some($n=>"function"!=typeof $n&&$n.bindings.some(Og)),nn=dc(null,X,null,512|Fl(T),null,null,$e,it,se,null,null);nn[o.Yw1]=lt,(0,o.ID8)(nn);let xn=null;try{const $n=vu(o.Yw1,nn,2,"#host",()=>X.directiveRegistry,!0,0);Vh(it,lt,$n),q(lt,nn),Ec(X,nn,$n),As(X,$n,nn),yu(X,$n),void 0!==n&&function Ob(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const a=n[i];r.push(null!=a&&a.length?Array.from(a):null)}}($n,this.ngContentSelectors,n),xn=(0,o.KdJ)($n.index,nn),nn[o.SKP]=xn[o.SKP],Ac(X,nn,null)}catch($n){throw null!==xn&&Ne(xn),Ne(nn),$n}finally{vt(23),(0,o.bll)()}return new Mb(this.componentType,nn,!!Rt)}finally{(0,S.Ht)(C)}}}function Og(e){const t=e[ti].kind;return"input"===t||"twoWay"===t}class Mb extends zE{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=(0,o.XRZ)(n[o.eDl],o.Yw1),this.location=Qn(this._tNode,n),this.instance=(0,o.KdJ)(this._tNode.index,n)[o.SKP],this.hostView=this.changeDetectorRef=new wc(n,void 0),this.componentType=t}setInput(t,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const i=this._rootLView;Cc(r,i[o.eDl],i,t,n),this.previousInputValues.set(t,n),Zi((0,o.KdJ)(r.index,i),1)}get injector(){return new Kn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}let Vc=(()=>class e{static __NG_ELEMENT_ID__=Pb})();function Pb(){return xg((0,o.Mx4)(),(0,o.OAn)())}const Rb=Vc,Pg=class extends Rb{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Qn(this._hostTNode,this._hostLView)}get injector(){return new Kn(this._hostTNode,this._hostLView)}get parentInjector(){const t=Nr(this._hostTNode,this._hostLView);if(or(t)){const n=ur(t,this._hostLView),r=Zn(t);return new Kn(n[o.eDl].data[r+8],n)}return new Kn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=Rg(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-o.Y20}createEmbeddedView(t,n,r){let i,a;"number"==typeof r?i=r:null!=r&&(i=r.index,a=r.injector);const C=t.createEmbeddedViewImpl(n||{},a,null);return this.insertImpl(C,i,Ei(this._hostTNode,null)),C}createComponent(t,n,r,i,a,g,C){const T=t&&!G(t);let X;if(T)X=n;else{const xn=n||{};X=xn.index,r=xn.injector,i=xn.projectableNodes,a=xn.environmentInjector||xn.ngModuleRef,g=xn.directives,C=xn.bindings}const se=T?t:new jc((0,o.xUg)(t)),$e=r||this.parentInjector;if(!a&&null==se.ngModule){const $n=(T?$e:this.parentInjector).get(o.uvJ,null);$n&&(a=$n)}(0,o.xUg)(se.componentType??{});const nn=se.create($e,i,null,a,g,C);return this.insertImpl(nn.hostView,X,Ei(this._hostTNode,null)),nn}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){const i=t._lView;if((0,o.ITl)(i)){const C=this.indexOf(t);if(-1!==C)this.detach(C);else{const T=i[o.f7T],X=new Pg(T,T[o.qlT],T[o.f7T]);X.detach(X.indexOf(t))}}const a=this._adjustIndex(n),g=this._lContainer;return ea(g,i,a,r),t.attachToViewContainerRef(),(0,o.EYC)(bu(g),a,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=Rg(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Ta(this._lContainer,n);r&&((0,o.E6O)(bu(this._lContainer),n),Ia(r[o.eDl],r))}detach(t){const n=this._adjustIndex(t,-1),r=Ta(this._lContainer,n);return r&&null!=(0,o.E6O)(bu(this._lContainer),n)?new wc(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Rg(e){return e[o.bm_]}function bu(e){return e[o.bm_]||(e[o.bm_]=[])}function xg(e,t){let n;const r=t[e.index];return(0,o.A0l)(r)?n=r:(n=Wp(r,t,null,e),t[e.index]=n,kl(t,n)),Lg(n,t,e,r),new Pg(n,e,t)}let Lg=function Fg(e,t,n,r){if(e[o.s6P])return;let i;i=8&n.type?(0,o.IvY)(r):function xb(e,t){const n=e[o.GpT],r=n.createComment(""),i=(0,o.d31)(t,e),a=n.parentNode(i);return _i(n,a,r,n.nextSibling(i),!1),r}(t,n),e[o.s6P]=i};class Su{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new Su(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cu{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let a=0;a<r;a++){const g=n.getByIndex(a);i.push(this.queries[g.indexInDeclarationView].clone())}return new Cu(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==Mu(t,n).matches&&this.queries[n].setDirty()}}class kg{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof t?function Bb(e){return e.split(",").map(t=>t.trim())}(t):t}}class Au{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,a=this.getByIndex(r).embeddedTView(t,i);a&&(a.indexInDeclarationView=r,null!==n?n.push(a):n=[a])}return null!==n?new Au(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Iu{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new Iu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const a=r[i];this.matchTNodeWithReadOption(t,n,Fb(n,a)),this.matchTNodeWithReadOption(t,n,Vt(n,t,a,!1,!1))}else r===Ma?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Vt(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ln||i===Vc||i===Ma&&4&n.type)this.addMatch(n.index,-2);else{const a=Vt(n,t,i,!1,!1);null!==a&&this.addMatch(n.index,a)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function Fb(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function $b(e,t,n,r){return-1===n?function kb(e,t){return 11&e.type?Qn(e,t):4&e.type?Tc(e,t):null}(t,e):-2===n?function Ub(e,t,n){return n===Ln?Qn(t,e):n===Ma?Tc(t,e):n===Vc?xg(t,e):void 0}(e,t,r):cn(e,e[o.eDl],n,t)}function $g(e,t,n,r){const i=t[o.Ds7].queries[r];if(null===i.matches){const a=e.data,g=n.matches,C=[];for(let T=0;null!==g&&T<g.length;T+=2){const X=g[T];C.push(X<0?null:$b(t,a[X],g[T+1],n.metadata.read))}i.matches=C}return i.matches}function wu(e,t,n,r){const i=e.queries.getByIndex(n),a=i.matches;if(null!==a){const g=$g(e,t,i,n);for(let C=0;C<a.length;C+=2){const T=a[C];if(T>0)r.push(g[C/2]);else{const X=a[C+1],se=t[-T];for(let $e=o.Y20;$e<se.length;$e++){const it=se[$e];it[o.rQE]===it[o.f7T]&&wu(it[o.eDl],it,X,r)}if(null!==se[o.nfM]){const $e=se[o.nfM];for(let it=0;it<$e.length;it++){const lt=$e[it];wu(lt[o.eDl],lt,X,r)}}}}}return r}function Tu(e,t){return e[o.Ds7].queries[t].queryList}function Ug(e,t,n){const r=new ar(!(4&~n));return(0,o.B22)(e,t,r,r.destroy),(t[o.Ds7]??=new Cu).queries.push(new Su(r))-1}function Bg(e,t,n){const r=(0,o.klJ)();return r.firstCreatePass&&(Vg(r,new kg(e,t,n),-1),!(2&~t)&&(r.staticViewQueries=!0)),Ug(r,(0,o.OAn)(),t)}function jg(e,t,n,r){const i=(0,o.klJ)();if(i.firstCreatePass){const a=(0,o.Mx4)();Vg(i,new kg(t,n,r),a.index),function jb(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),!(2&~n)&&(i.staticContentQueries=!0)}return Ug(i,(0,o.OAn)(),n)}function Vg(e,t,n){null===e.queries&&(e.queries=new Au),e.queries.track(new Iu(t,n))}function Mu(e,t){return e.queries.getByIndex(t)}function Wg(e,t){const n=e[o.eDl],r=Mu(n,t);return r.crossesNgTemplate?wu(n,e,t,[]):$g(n,e,r,t)}function Kg(e,t){const n=e[S.bh];n._lView=(0,o.OAn)(),n._queryIndex=t,n._queryList=Tu(n._lView,t),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function Wb(e){const t=[],n=new Map;function r(i){let a=n.get(i);if(!a){const g=e(i);n.set(i,a=g.then(C=>function Gb(e,t){return"string"==typeof t?t:void 0!==t.status&&200!==t.status?Promise.reject(new o.buA(918,!1)):t.text()}(0,C)))}return a}return oa.forEach((i,a)=>{const g=[];i.templateUrl&&g.push(r(i.templateUrl).then(X=>{i.template=X}));const C="string"==typeof i.styles?[i.styles]:i.styles||[];if(i.styles=C,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){const X=i.styles.length,se=i.styleUrls;i.styleUrls.forEach(($e,it)=>{C.push(""),g.push(r($e).then(lt=>{C[X+it]=lt,se.splice(se.indexOf($e),1),0==se.length&&(i.styleUrls=void 0)}))})}else i.styleUrl&&g.push(r(i.styleUrl).then(X=>{C.push(X),i.styleUrl=void 0}));const T=Promise.all(g).then(()=>function Xb(e){ja.delete(e)}(a));t.push(T)}),function Hb(){const e=oa;oa=new Map}(),Promise.all(t).then(()=>{})}let oa=new Map;const ja=new Set;function zb(){return 0===oa.size}const Pu=new Map;function Gg(e,t){(function qb(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${(0,o.AsM)(t)} vs ${(0,o.AsM)(t.name)}`)})(t,Pu.get(t)||null,e),Pu.set(t,e)}let Ai=class{},Xg=class{};function Qb(e,t){return new Ru(e,t??null,[])}class Ru extends Ai{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Mg(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;const a=(0,o.phH)(t);this._bootstrapComponents=ws(a.bootstrap),this._r3Injector=(0,o.Pz9)(t,n,[{provide:Ai,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver},...r],(0,o.AsM)(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class qg extends Xg{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Ru(this.moduleType,t,[])}}function Jb(e,t,n){return new Ru(e,t,n,!1)}class Yb extends Ai{injector;componentFactoryResolver=new Mg(this);instance=null;constructor(t){super();const n=new o.e5P([...t.providers,{provide:Ai,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver}],t.parent||(0,o.WB9)(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function xu(e,t,n=null){return new Yb({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}let Zb=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=(0,o.jXY)(!1,n.type),i=r.length>0?xu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=(0,o.jDH)({token:e,providedIn:"environment",factory:()=>new e((0,o.KVO)(o.uvJ))})}return e})();function Qg(e){return Le(()=>{const t=tm(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Dr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(Zb).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Uo.Emulated,styles:e.styles||o.Mlv,_:null,schemas:e.schemas||null,tView:null,id:""};t.standalone&&Mo("NgStandalone"),nm(n);const r=e.dependencies;return n.directiveDefs=Wc(r,Jg),n.pipeDefs=Wc(r,o.oyA),n.id=function rD(e){let t=0;const r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,"function"==typeof e.consts?"":e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(const a of r.join("|"))t=Math.imul(31,t)+a.charCodeAt(0)|0;return t+=2147483648,"c"+t}(n),n})}function Jg(e){return(0,o.xUg)(e)||(0,o.HaV)(e)}function Yg(e){return Le(()=>({type:e.type,bootstrap:e.bootstrap||o.Mlv,declarations:e.declarations||o.Mlv,imports:e.imports||o.Mlv,exports:e.exports||o.Mlv,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function eD(e,t){if(null==e)return o.MZA;const n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];let a,g,C,T;Array.isArray(i)?(C=i[0],a=i[1],g=i[2]??a,T=i[3]||null):(a=i,g=i,C=fc.None,T=null),n[a]=[r,C,T],t[a]=g}return n}function tD(e){if(null==e)return o.MZA;const t={};for(const n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Zg(e){return Le(()=>{const t=tm(e);return nm(t),t})}function em(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function tm(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||o.MZA,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:!0===e.signals,selectors:e.selectors||o.Mlv,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:eD(e.inputs,t),outputs:tD(e.outputs),debugInfo:null}}function nm(e){e.features?.forEach(t=>t(e))}function Wc(e,t){return e?()=>{const n="function"==typeof e?e():e,r=[];for(const i of n){const a=t(i);null!==a&&r.push(a)}return r}:null}function rm(e){return Object.getPrototypeOf(e.prototype).constructor}function Lu(e){let t=rm(e.type),n=!0;const r=[e];for(;t;){let i;if((0,o.JlV)(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new o.buA(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);const g=e;g.inputs=Nu(e.inputs),g.declaredInputs=Nu(e.declaredInputs),g.outputs=Nu(e.outputs);const C=i.hostBindings;C&&cD(e,C);const T=i.viewQuery,X=i.contentQueries;if(T&&iD(e,T),X&&aD(e,X),oD(e,i),(0,o.dwj)(e.outputs,i.outputs),(0,o.JlV)(i)&&i.data.animation){const se=e.data;se.animation=(se.animation||[]).concat(i.data.animation)}}const a=i.features;if(a)for(let g=0;g<a.length;g++){const C=a[g];C&&C.ngInherit&&C(e),C===Lu&&(n=!1)}}t=Object.getPrototypeOf(t)}!function sD(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=pn(i.hostAttrs,n=pn(n,i.hostAttrs))}}(r)}function oD(e,t){for(const n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;const r=t.inputs[n];void 0!==r&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function Nu(e){return e===o.MZA?{}:e===o.Mlv?[]:e}function iD(e,t){const n=e.viewQuery;e.viewQuery=n?(r,i)=>{t(r,i),n(r,i)}:t}function aD(e,t){const n=e.contentQueries;e.contentQueries=n?(r,i,a)=>{t(r,i,a),n(r,i,a)}:t}function cD(e,t){const n=e.hostBindings;e.hostBindings=n?(r,i)=>{t(r,i),n(r,i)}:t}const lD=["providersResolver"],uD=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function hD(e){const t=[];let n=!1,r=null,i=null;for(let a=0;a<e.length;a++){const g=e[a];if(null!==g.hostDirectives){const C=t.length;r??=new Map,i??=new Map,om(g,t,r),i.set(g,[C,t.length-1])}0===a&&(0,o.JlV)(g)&&(n=!0,t.push(g))}for(let a=n?1:0;a<e.length;a++)t.push(e[a]);return[t,r,i]}function om(e,t,n){if(null!==e.hostDirectives)for(const r of e.hostDirectives)if("function"==typeof r){const i=r();for(const a of i)sm(Fu(a),t,n)}else sm(r,t,n)}function sm(e,t,n){const r=(0,o.HaV)(e.directive);(function pD(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=e[n])})(r.declaredInputs,e.inputs),om(r,t,n),n.set(r,e),t.push(r)}function Fu(e){return"function"==typeof e?{directive:(0,o.nl4)(e),inputs:o.MZA,outputs:o.MZA}:{directive:(0,o.nl4)(e.directive),inputs:im(e.inputs),outputs:im(e.outputs)}}function im(e){if(void 0===e||0===e.length)return o.MZA;const t={};for(let n=0;n<e.length;n+=2)t[e[n]]=e[n+1];return t}function cm(e,t,n,r,i,a,g,C){if(n.firstCreatePass){e.mergedAttrs=pn(e.mergedAttrs,e.attrs);const se=e.tView=Nl(2,e,i,a,g,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);null!==n.queries&&(n.queries.template(n,e),se.queries=n.queries.embeddedTView(e))}C&&(e.flags|=C),(0,o.iMd)(e,!1);const T=um(n,t,e,r);(0,o.SX7)()&&Jl(n,t,T,e),q(T,t);const X=Wp(T,t,T,e);t[r+o.Yw1]=X,kl(t,X)}function Ii(e,t,n,r,i,a,g,C,T,X,se){const $e=n+o.Yw1;let it;if(t.firstCreatePass){if(it=bi(t,$e,4,g||null,C||null),null!=X){const lt=(0,o.db4)(t.consts,X);it.localNames=[];for(let Rt=0;Rt<lt.length;Rt+=2)it.localNames.push(lt[Rt],-1)}}else it=t.data[$e];return cm(it,e,t,n,r,i,a,T),null!=X&&Ji(e,it,se),it}function ku(e,t,n,r,i,a,g,C){const T=(0,o.OAn)(),X=(0,o.klJ)();return function gD(e,t,n,r,i,a,g,C,T,X,se){const $e=n+o.Yw1;let it;t.firstCreatePass?(it=bi(t,$e,4,g||null,C||null),(0,o.ckz)()&&yg(t,e,it,(0,o.db4)(t.consts,X),tu),dt(t,it)):it=t.data[$e],cm(it,e,t,n,r,i,a,T),(0,o.yoD)(it)&&Ec(t,e,it),null!=X&&Ji(e,it,se)}(T,X,e,t,n,r,i,(0,o.db4)(X.consts,a),void 0,g,C),ku}let um=function dm(e,t,n,r){return(0,o.m7n)(!0),t[o.GpT].createComment("")};var bo=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.COMPLETE=2]="COMPLETE",e[e.FAILED=3]="FAILED",e}(bo||{}),oo=function(e){return e[e.Placeholder=0]="Placeholder",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete",e[e.Error=3]="Error",e}(oo||{}),sa=function(e){return e[e.Initial=-1]="Initial",e}(sa||{}),hm=function(e){return e[e.Manual=0]="Manual",e[e.Playthrough=1]="Playthrough",e}(hm||{});function Wa(e,t,n){const r=gm(e);null===t[r]&&(t[r]=[]),t[r].push(n)}function zc(e,t){const n=gm(e),r=t[n];if(null!==r){for(const i of r)i();t[n]=null}}function pm(e){zc(1,e),zc(0,e),zc(2,e)}function gm(e){let t=4;return 1===e?t=5:2===e&&(t=9),t}function Ka(e){return e+1}function Bo(e,t){return e[Ka(t.index)]}function Oo(e,t){const n=Ka(t.index);return e.data[n]}function $u(e,t){return t===oo.Placeholder?e.placeholderBlockConfig?.[0]??null:t===oo.Loading?e.loadingBlockConfig?.[0]??null:null}function mm(e){return e.loadingBlockConfig?.[1]??null}function _m(e,t){if(!e||0===e.length)return t;const n=new Set(e);for(const r of t)n.add(r);return e.length===n.size?e:Array.from(n)}function Uu(e,t,n){const r=n.get(io);return function Wo(e,t,n){let r=Qr.get(e);return wo=wo||n(),r||(r=new No,wo.observe(e),Qr.set(e,r),qo++),r.callbacks.add(t),()=>{Qr.has(e)&&(r.callbacks.delete(t),0===r.callbacks.size&&(wo?.unobserve(e),Qr.delete(e),qo--),0===qo&&(wo?.disconnect(),wo=null))}}(e,()=>r.run(t),()=>r.runOutsideAngular(()=>function $i(){return new IntersectionObserver(e=>{for(const t of e)t.isIntersecting&&Qr.has(t.target)&&Qr.get(t.target).listener()})}()))}function ca(e,t,n,r,i,a,g){const C=e[o.YEL],T=C.get(io);let X;X=function _0(e,t){const n=t?.injector??(0,o.WQX)(o.zZn);return Mo("NgAfterRender"),_p(e,n,t,!1)}({read:function se(){if((0,o.EPY)(e))return void X.destroy();const $e=Bo(e,t),it=$e[1];if(it!==sa.Initial&&it!==oo.Placeholder)return void X.destroy();const lt=function AD(e,t,n){return null==n?e:n>=0?(0,o.jRZ)(n,e):e[t.index][o.Y20]??null}(e,t,r);if(!lt||(X.destroy(),(0,o.EPY)(lt)))return;const Rt=function ID(e,t){return(0,o.vaC)(o.Yw1+t,e)}(lt,n),nn=i(Rt,()=>{T.run(()=>{e!==lt&&(0,o.DyX)(lt,nn),a()})},C);e!==lt&&(0,o.ik5)(lt,nn),Wa(g,$e,nn)}},{injector:C})}function Gc(e,t){const n=t.get(MD);return n.add(e),()=>n.remove(e)}let MD=(()=>{class e{executingCallbacks=!1;idleId=null;current=new Set;deferred=new Set;ngZone=(0,o.WQX)(io);requestIdleCallbackFn=(()=>typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout)().bind(globalThis);cancelIdleCallbackFn=(()=>typeof requestIdleCallback<"u"?cancelIdleCallback:clearTimeout)().bind(globalThis);add(n){(this.executingCallbacks?this.deferred:this.current).add(n),null===this.idleId&&this.scheduleIdleCallback()}remove(n){const{current:r,deferred:i}=this;r.delete(n),i.delete(n),0===r.size&&0===i.size&&this.cancelIdleCallback()}scheduleIdleCallback(){const n=()=>{this.cancelIdleCallback(),this.executingCallbacks=!0;for(const r of this.current)r();if(this.current.clear(),this.executingCallbacks=!1,this.deferred.size>0){for(const r of this.deferred)this.current.add(r);this.deferred.clear(),this.scheduleIdleCallback()}};this.idleId=this.requestIdleCallbackFn(()=>this.ngZone.run(n))}cancelIdleCallback(){null!==this.idleId&&(this.cancelIdleCallbackFn(this.idleId),this.idleId=null)}ngOnDestroy(){this.cancelIdleCallback(),this.current.clear(),this.deferred.clear()}static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:()=>new e})}return e})();function Xc(e){return(t,n)=>ym(e,t,n)}function ym(e,t,n){const r=n.get(OD),i=n.get(io);return r.add(e,t,i),()=>r.remove(t)}let OD=(()=>{class e{executingCallbacks=!1;timeoutId=null;invokeTimerAt=null;current=[];deferred=[];add(n,r,i){this.addToQueue(this.executingCallbacks?this.deferred:this.current,Date.now()+n,r),this.scheduleTimer(i)}remove(n){const{current:r,deferred:i}=this;-1===this.removeFromQueue(r,n)&&this.removeFromQueue(i,n),0===r.length&&0===i.length&&this.clearTimeout()}addToQueue(n,r,i){let a=n.length;for(let g=0;g<n.length;g+=2)if(n[g]>r){a=g;break}(0,o.llW)(n,a,r,i)}removeFromQueue(n,r){let i=-1;for(let a=0;a<n.length;a+=2)if(n[a+1]===r){i=a;break}return i>-1&&(0,o.gsJ)(n,i,2),i}scheduleTimer(n){const r=()=>{this.clearTimeout(),this.executingCallbacks=!0;const a=[...this.current],g=Date.now();for(let T=0;T<a.length;T+=2){const se=a[T+1];if(!(a[T]<=g))break;se()}let C=-1;for(let T=0;T<this.current.length&&this.current[T]<=g;T+=2)C=T+1;if(C>=0&&(0,o.gsJ)(this.current,0,C+1),this.executingCallbacks=!1,this.deferred.length>0){for(let T=0;T<this.deferred.length;T+=2)this.addToQueue(this.current,this.deferred[T],this.deferred[T+1]);this.deferred.length=0}this.scheduleTimer(n)};if(this.current.length>0){const a=Date.now(),g=this.current[0];if(null===this.timeoutId||this.invokeTimerAt&&this.invokeTimerAt-g>16){this.clearTimeout();const C=Math.max(g-a,16);this.invokeTimerAt=g,this.timeoutId=n.runOutsideAngular(()=>setTimeout(()=>n.run(r),C))}}}clearTimeout(){null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}ngOnDestroy(){this.clearTimeout(),this.current.length=0,this.deferred.length=0}static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:()=>new e})}return e})(),PD=(()=>{class e{cachedInjectors=new Map;getOrCreateInjector(n,r,i,a){if(!this.cachedInjectors.has(n)){const g=i.length>0?xu(i,r,a):null;this.cachedInjectors.set(n,g)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=(0,o.jDH)({token:e,providedIn:"environment",factory:()=>new e})}return e})();const RD=new o.nKC("");function Bu(e,t,n){return e.get(PD).getOrCreateInjector(t,e,n,"")}function ni(e,t,n,r=!1){const i=n[o.f7T],a=i[o.eDl];if((0,o.EPY)(i))return;const g=Bo(i,t),T=g[7];if(!(null!==T&&e<T)&&Dm(g[1],e)&&Dm(g[0]??-1,e)){const X=Oo(a,t),$e=r||null===mm(X)&&null===$u(X,oo.Loading)&&!$u(X,oo.Placeholder)?Em:ju;try{$e(e,g,n,t,i)}catch(it){nu(i,it)}}}function Em(e,t,n,r,i){vt(20);const a=function SD(e,t,n){const i=Oo(t[o.eDl],n);switch(e){case oo.Complete:return i.primaryTmplIndex;case oo.Loading:return i.loadingTmplIndex;case oo.Error:return i.errorTmplIndex;case oo.Placeholder:return i.placeholderTmplIndex;default:return null}}(e,i,r);if(null!==a){t[1]=e;const g=i[o.eDl],T=(0,o.XRZ)(g,a+o.Yw1),X=0;let se;if(ou(n,X),e===oo.Complete){const Rt=Oo(g,r),nn=Rt.providers;nn&&nn.length>0&&(se=function xD(e,t,n){if(e instanceof na){const i=e.injector,g=Bu(e.parentInjector,t,n);return new na(i,g)}const r=e.get(o.uvJ);if(r!==e){const i=Bu(r,t,n);return new na(e,i)}return Bu(e,t,n)}(i[o.YEL],Rt,nn))}const{dehydratedView:$e,dehydratedViewIx:it}=function LD(e,t){const n=e[o.qFA]?.findIndex(i=>i.data.s===t[1])??-1;return{dehydratedView:n>-1?e[o.qFA][n]:null,dehydratedViewIx:n}}(n,t),lt=Yi(i,T,null,{injector:se,dehydratedView:$e});if(ea(n,lt,X,Ei(T,$e)),Zi(lt,2),it>-1&&n[o.qFA]?.splice(it,1),(e===oo.Complete||e===oo.Error)&&Array.isArray(t[8])){for(const Rt of t[8])Rt();t[8]=null}}vt(21)}function ND(e,t,n,r,i){const a=Date.now(),C=Oo(i[o.eDl],r);if(null===t[2]||t[2]<=a){t[2]=null;const T=mm(C),X=null!==t[3];if(e!==oo.Loading||null===T||X){e>oo.Loading&&X&&(t[3](),t[3]=null,t[0]=null),Em(e,t,n,r,i);const se=$u(C,e);null!==se&&(t[2]=a+se,bm(se,t,r,n,i))}else{t[0]=e;const se=bm(T,t,r,n,i);t[3]=se}}else t[0]=e}function bm(e,t,n,r,i){return ym(e,()=>{const g=t[0];t[2]=null,t[0]=null,null!==g&&ni(g,n,r)},i[o.YEL])}function Dm(e,t){return e<t}function la(e,t){ni(oo.Placeholder,t,e[t.index])}function Sm(e,t,n){e.loadingPromise.then(()=>{e.loadingState===bo.COMPLETE?ni(oo.Complete,t,n):e.loadingState===bo.FAILED&&ni(oo.Error,t,n)})}let ju=null;function kD(e,t,n,r){return Le(()=>{const i=e;null!==t&&(i.hasOwnProperty("decorators")&&void 0!==i.decorators?i.decorators.push(...t):i.decorators=t),null!==n&&(i.ctorParameters=n),null!==r&&(i.propDecorators=i.hasOwnProperty("propDecorators")&&void 0!==i.propDecorators?{...i.propDecorators,...r}:r)})}let Cm=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const Um=new o.nKC(""),Bm=new o.nKC("");let Ku,CS=(()=>{class e{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(n,r,i){this._ngZone=n,this.registry=r,(0,o.M6u)()&&(this._destroyRef=(0,o.WQX)(o.abz,{optional:!0})??void 0),Ku||(function AS(e){Ku=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){const n=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{io.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{n.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let a=-1;r&&r>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==a),n()},r)),this._callbacks.push({doneCb:n,timeoutId:a,updateCb:i})}whenStable(n,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static \u0275fac=function(r){return new(r||e)((0,o.KVO)(io),(0,o.KVO)(jm),(0,o.KVO)(Bm))};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac})}return e})(),jm=(()=>{class e{_applications=new Map;registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Ku?.findTestabilityInTree(this,n,r)??null}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function Vm(e){return!!e&&"function"==typeof e.then}function Wm(e){return!!e&&"function"==typeof e.subscribe}const Hu=new o.nKC("");function IS(e){return(0,o.EmA)([{provide:Hu,multi:!0,useValue:e}])}let Km=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=(0,o.WQX)(Hu,{optional:!0})??[];injector=(0,o.WQX)(o.zZn);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const a=(0,o.N4e)(this.injector,i);if(Vm(a))n.push(a);else if(Wm(a)){const g=new Promise((C,T)=>{a.subscribe({complete:C,error:T})});n.push(g)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Hm=new o.nKC("");function wS(){}function TS(){(0,S.KO)(()=>{throw new o.buA(600,"")})}function zm(e,t){return Array.isArray(t)?t.reduce(zm,e):{...e,...t}}let Jc=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=(0,o.WQX)(o.ZTf);afterRenderManager=(0,o.WQX)(pp);zonelessEnabled=(0,o.WQX)(o.Evm);rootEffectScheduler=(0,o.WQX)(o.VML);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Pe.B;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=(0,o.WQX)(o.rev);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe((0,k.T)(n=>!n))}constructor(){(0,o.WQX)(Aa,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=(0,o.WQX)(o.uvJ);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=o.zZn.NULL){return this._injector.get(io).run(()=>{vt(10);const g=n instanceof mg;if(!this._injector.get(Km).done)throw new o.buA(405,"");let T;T=g?n:this._injector.get(Fc).resolveComponentFactory(n),this.componentTypes.push(T.componentType);const X=function MS(e){return e.isBoundToModule}(T)?void 0:this._injector.get(Ai),$e=T.create(i,[],r||T.selector,X),it=$e.location.nativeElement,lt=$e.injector.get(Um,null);return lt?.registerApplication(it),$e.onDestroy(()=>{this.detachView($e.hostView),Yc(this.components,$e),lt?.unregisterApplication(it)}),this._loadComponent($e),vt(11,$e),$e})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){vt(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(Bl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new o.buA(101,!1);const n=(0,S.Ht)(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,(0,S.Ht)(n),this.afterTick.next(),vt(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(gu,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;)vt(14),this.synchronizeOnce(),vt(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews)(r||(0,o.dMS)(i))&&(Ic(i,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>(0,o.dMS)(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Yc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Hm,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Yc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new o.buA(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Yc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function zu(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function Gm(e){const t=(0,o.OAn)(),n=(0,o.Mx4)();if(la(t,n),!Qm(0,t))return;const r=t[o.YEL];Wa(0,Bo(t,n),e(()=>Mi(0,t,n),r))}function Xm(e){const t=(0,o.OAn)(),n=t[o.YEL],r=(0,o.Mx4)(),a=Oo(t[o.eDl],r);a.loadingState===bo.NOT_STARTED&&Wa(1,Bo(t,r),e(()=>za(a,t,r),n))}function qm(e,t,n){const r=t[o.YEL],i=Bo(t,n),a=i[6];Wa(2,i,e(()=>Oi(r,a),r))}function za(e,t,n){Gu(e,t,n)}function Gu(e,t,n){const r=t[o.YEL],i=t[o.eDl];if(e.loadingState!==bo.NOT_STARTED)return e.loadingPromise??Promise.resolve();const a=Bo(t,n),g=function CD(e,t){return(0,o.XRZ)(e,t.primaryTmplIndex+o.Yw1)}(i,e);e.loadingState=bo.IN_PROGRESS,zc(1,a);let C=e.dependencyResolverFn;const T=r.get(o.u5s).add();return C?(e.loadingPromise=Promise.allSettled(C()).then(X=>{let se=!1;const $e=[],it=[];for(const lt of X){if("fulfilled"!==lt.status){se=!0;break}{const Rt=lt.value,nn=(0,o.xUg)(Rt)||(0,o.HaV)(Rt);if(nn)$e.push(nn);else{const xn=(0,o.oyA)(Rt);xn&&it.push(xn)}}}if(se){if(e.loadingState=bo.FAILED,null===e.errorTmplIndex){const Rt=new o.buA(-750,!1);nu(t,Rt)}}else{e.loadingState=bo.COMPLETE;const lt=g.tView;if($e.length>0){lt.directiveRegistry=_m(lt.directiveRegistry,$e);const Rt=$e.map(xn=>xn.type),nn=(0,o.jXY)(!1,...Rt);e.providers=nn}it.length>0&&(lt.pipeRegistry=_m(lt.pipeRegistry,it))}}),e.loadingPromise.finally(()=>{e.loadingPromise=null,T()})):(e.loadingPromise=Promise.resolve().then(()=>{e.loadingPromise=null,e.loadingState=bo.COMPLETE,T()}),e.loadingPromise)}function Qm(e,t){return t[o.YEL].get(RD,null,{optional:!0})?.behavior!==hm.Manual}function Mi(e,t,n){const r=t[o.eDl],i=t[n.index];if(!Qm(0,t))return;const a=Bo(t,n),g=Oo(r,n);switch(pm(a),g.loadingState){case bo.NOT_STARTED:ni(oo.Loading,n,i),Gu(g,t,n),g.loadingState===bo.IN_PROGRESS&&Sm(g,n,i);break;case bo.IN_PROGRESS:ni(oo.Loading,n,i),Sm(g,n,i);break;case bo.COMPLETE:ni(oo.Complete,n,i);break;case bo.FAILED:ni(oo.Error,n,i)}}function Oi(e,t,n){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,s.A)(function*(e,t,n){const r=e.get(Fo);if(r.hydrating.has(t))return;const{parentBlockPromise:a,hydrationQueue:g}=function Xo(e,t){const n=t.get(Fo),i=t.get(Zr).get("__nghDeferData__",{});let a=!1,g=e,C=null;const T=[];for(;!a&&g;){a=n.has(g);const X=n.hydrating.get(g);if(null===C&&null!=X){C=X.promise;break}T.unshift(g),g=i[g].p}return{parentBlockPromise:C,hydrationQueue:T}}(t,e);if(0===g.length)return;null!==a&&g.shift(),function xS(e,t){for(let n of t)e.hydrating.set(n,zu())}(r,g),null!==a&&(yield a);const C=g[0];r.has(C)?yield Jm(e,g,n):r.awaitParentBlock(C,(0,s.A)(function*(){return yield Jm(e,g,n)}))})).apply(this,arguments)}function Jm(e,t,n){return qu.apply(this,arguments)}function qu(){return(qu=(0,s.A)(function*(e,t,n){const r=e.get(Fo),i=r.hydrating,a=e.get(o.rev),g=a.add();for(let T=0;T<t.length;T++){const X=t[T],se=r.get(X);if(null==se){RS(T,t,r),Ym(t.slice(T),r);break}if(yield NS(se),yield LS(e),PS(se)){UE(se),Ym(t.slice(T),r);break}i.get(X).resolve()}const C=t[t.length-1];yield i.get(C)?.promise,a.remove(g),n&&n(t),function jE(e,t,n,r){null!==e&&(n.cleanup(t),Lc(e.lContainer),function BE(e){const t=e._views;for(const n of t){const r=Os(n);null!==r&&null!==r[o.jgP]&&((0,o.q$2)(r)?Nc(r):Lc(r))}}(r))}(r.get(C),t,r,e.get(Jc))})).apply(this,arguments)}function PS(e){return Bo(e.lView,e.tNode)[1]===oo.Error}function RS(e,t,n){const r=e-1,i=r>-1?n.get(t[r]):null;i&&Lc(i.lContainer)}function Ym(e,t){const n=t.hydrating;for(const r in e)n.get(r)?.reject();t.cleanup(e)}function LS(e){return new Promise(t=>Hl(t,{injector:e}))}function NS(e){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,s.A)(function*(e){const{tNode:t,lView:n}=e,r=Bo(n,t);return new Promise(i=>{(function FS(e,t){Array.isArray(e[8])||(e[8]=[]),e[8].push(t)})(r,i),Mi(0,n,t)})})).apply(this,arguments)}function _o(e,t,n){return 0===e?Zm(t,n):2!==e||!Zm(t,n)}function Zm(e,t){const n=e[o.YEL],r=Oo(e[o.eDl],t),i=zo(n),a=function kS(e){return null!=e&&!(1&~e)}(r.flags),C=null!==Bo(e,t)[6];return!(a&&C&&i)}function ri(e,t){const n=Oo(e,t);return n.hydrateTriggers??=new Map}function Ju(e,t,n,r){const i=(0,o.OAn)();return lo(i,(0,o.xbp)(),t)&&((0,o.klJ)(),function F0(e,t,n,r,i,a){const g=(0,o.d31)(e,t);bc(t[o.GpT],g,a,e.value,n,r,i)}((0,o.CpD)(),i,e,t,n,r)),Ju}const dC=new o.nKC("",{providedIn:"root",factory:()=>!1}),fC=new o.nKC("",{providedIn:"root",factory:()=>hC}),hC=4e3,Pi=typeof document<"u"&&"function"==typeof document?.documentElement?.getAnimations;function Zc(e){return e[o.YEL].get(dC,!1)}function Yu(e){const t=da.get(e);if(t){for(const n of t.cleanupFns)n();da.delete(e)}Ri.delete(e)}const mC=()=>{},da=new WeakMap,Ri=new WeakMap,fa=new WeakMap;function Zu(e,t){const n=fa.get(e);if(n&&n.length>0){const r=n.findIndex(i=>i===t);r>-1&&n.splice(r,1)}0===n?.length&&fa.delete(e)}function el(e,t){const n=fa.get(e)?.shift(),r=t[o.rQE];if(r){const a=vc(e.index,r)?.previousSibling;n&&a&&n===a&&n.dispatchEvent(new CustomEvent("animationend",{detail:{cancel:!0}}))}}function n_(e,t){fa.has(e)?fa.get(e)?.push(t):fa.set(e,[t])}function tl(e){const t=e[o.Isx]??={};return t.enter??=new Map}function xi(e){const t=e[o.Isx]??={};return t.leave??=new Map}function r_(e){const t="function"==typeof e?e():e;let n=Array.isArray(t)?t:null;return"string"==typeof t&&(n=t.trim().split(/\s+/).filter(r=>r)),n}function o_(e,t){const n=Ri.get(t);return void 0===n||t===e.target&&(void 0!==n.animationName&&e.animationName===n.animationName||void 0!==n.propertyName&&e.propertyName===n.propertyName)}function nl(e,t,n){const r=e.get(t.index)??{animateFns:[]};r.animateFns.push(n),e.set(t.index,r)}function ed(e,t){if(e)for(const n of e)n();for(const n of t)n()}function td(e,t){const n=xi(e).get(t.index);n&&(n.resolvers=void 0)}function rl(e,t,n,r,i){Zu(t,n),ed(r,i),td(e,t)}class IC{destroy(t){}updateValue(t,n){}swap(t,n){const r=Math.min(t,n),i=Math.max(t,n),a=this.detach(i);if(i-r>1){const g=this.detach(r);this.attach(r,a),this.attach(i,g)}else this.attach(r,a)}move(t,n){this.attach(n,this.detach(t))}}function rd(e,t,n,r,i){return e===n&&Object.is(t,r)?1:Object.is(i(e,t),i(n,r))?-1:0}function od(e,t,n,r){return!(void 0===t||!t.has(r)||(e.attach(n,t.get(r)),t.delete(r),0))}function s_(e,t,n,r,i){if(od(e,t,r,n(r,i)))e.updateValue(r,i);else{const a=e.create(r,i);e.attach(r,a)}}function i_(e,t,n,r){const i=new Set;for(let a=t;a<=n;a++)i.add(r(a,e.at(a)));return i}class a_{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;const n=this.kvMap.get(t);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,n)}}}function sd(e,t,n,r,i,a,g,C){Mo("NgControlFlow");const T=(0,o.OAn)(),X=(0,o.klJ)();return Ii(T,X,e,t,n,r,i,(0,o.db4)(X.consts,a),512,g,C),sd}class OC{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-o.Y20}}class xC{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}}class NC extends IC{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-o.Y20}at(t){return this.getLView(t)[o.SKP].$implicit}attach(t,n){const r=n[o.tcA];this.needsIndexUpdate||=t!==this.length,ea(this.lContainer,n,t,Ei(this.templateTNode,r)),function kC(e,t){if(e.length<=o.Y20)return;const r=e[o.Y20+t],i=r?r[o.Isx]:void 0;r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0&&(function y0(e,t){const n=e.get(mc);if(t.detachedLeaveAnimationFns){for(const r of t.detachedLeaveAnimationFns)n.queue.delete(r);t.detachedLeaveAnimationFns=void 0}}(r[o.YEL],i),vi.delete(r),i.detachedLeaveAnimationFns=void 0)}(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,function $C(e,t){if(e.length<=o.Y20)return;const r=e[o.Y20+t],i=r?r[o.Isx]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}(this.lContainer,t),function UC(e,t){return Ta(e,t)}(this.lContainer,t)}create(t,n){const i=Yi(this.hostLView,this.templateTNode,new OC(this.lContainer,n,t),{dehydratedView:null});return this.operationsCounter?.recordCreate(),i}destroy(t){Ia(t[o.eDl],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[o.SKP].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[o.SKP].$index=t}getLView(t){return function BC(e,t){return Kp(e,t)}(this.lContainer,t)}}function al(e,t){return e[t]}function id(e,t){return(0,o.XRZ)(e,t)}function ad(e,t,n){const r=(0,o.OAn)();return lo(r,(0,o.xbp)(),t)&&((0,o.klJ)(),Zl((0,o.CpD)(),r,e,t,r[o.GpT],n)),ad}function cd(e,t,n,r,i){Cc(t,e,n,i?"class":"style",r)}function cl(e,t,n,r){const i=(0,o.OAn)(),a=i[o.eDl],g=e+o.Yw1,C=a.firstCreatePass?vu(g,i,2,t,tu,(0,o.ckz)(),n,r):a.data[g];if(Dc(C,i,e,t,fd),(0,o.yoD)(C)){const T=i[o.eDl];Ec(T,i,C),As(T,C,i)}return null!=r&&Ji(i,C),cl}function ll(){const e=(0,o.klJ)(),n=Sc((0,o.Mx4)());return e.firstCreatePass&&yu(e,n),(0,o.UhH)(n)&&(0,o.krE)(),(0,o.N79)(),null!=n.classesWithoutHost&&function wn(e){return!!(8&e.flags)}(n)&&cd(e,n,(0,o.OAn)(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function hn(e){return!!(16&e.flags)}(n)&&cd(e,n,(0,o.OAn)(),n.stylesWithoutHost,!1),ll}function ld(e,t,n,r){return cl(e,t,n,r),ll(),ld}function ud(e,t,n,r){const i=(0,o.OAn)(),a=i[o.eDl],g=e+o.Yw1,C=a.firstCreatePass?Cg(g,a,2,t,n,r):a.data[g];return Dc(C,i,e,t,fd),null!=r&&Ji(i,C),ud}function dd(){const t=Sc((0,o.Mx4)());return(0,o.UhH)(t)&&(0,o.krE)(),(0,o.N79)(),dd}let fd=(e,t,n,r,i)=>((0,o.m7n)(!0),lc(t[o.GpT],r,(0,o.UaU)()));function ul(e,t,n){const r=(0,o.OAn)(),i=r[o.eDl],a=e+o.Yw1,g=i.firstCreatePass?vu(a,r,8,"ng-container",tu,(0,o.ckz)(),t,n):i.data[a];if(Dc(g,r,e,"ng-container",gd),(0,o.yoD)(g)){const C=r[o.eDl];Ec(C,r,g),As(C,g,r)}return null!=n&&Ji(r,g),ul}function Ga(){const e=(0,o.klJ)(),n=Sc((0,o.Mx4)());return e.firstCreatePass&&yu(e,n),Ga}function hd(e,t,n){return ul(e,t,n),Ga(),hd}function pd(e,t,n){const r=(0,o.OAn)(),i=r[o.eDl],a=e+o.Yw1,g=i.firstCreatePass?Cg(a,i,8,"ng-container",t,n):i.data[a];return Dc(g,r,e,"ng-container",gd),null!=n&&Ji(r,g),pd}function l_(){return Sc((0,o.Mx4)()),Ga}let gd=(e,t,n,r,i)=>((0,o.m7n)(!0),Rl(t[o.GpT],""));function d_(){return(0,o.OAn)()}const dl=void 0;var KC=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dl,"{1} 'at' {0}",dl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function WC(e){const t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let ha={};function md(e){const t=function HC(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=g_(t);if(n)return n;const r=t.split("-")[0];if(n=g_(r),n)return n;if("en"===r)return KC;throw new o.buA(701,!1)}function p_(e){return md(e)[pa.PluralCase]}function g_(e){return e in ha||(ha[e]=o.laP.ng&&o.laP.ng.common&&o.laP.ng.common.locales&&o.laP.ng.common.locales[e]),ha[e]}var pa=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(pa||{});const zC=["zero","one","two","few","many"],_d="en-US",fl={marker:"element"},hl={marker:"ICU"};var Vo=function(e){return e[e.SHIFT=2]="SHIFT",e[e.APPEND_EAGERLY=1]="APPEND_EAGERLY",e[e.COMMENT=2]="COMMENT",e}(Vo||{});let m_=_d;function qC(e){"string"==typeof e&&(m_=e.toLowerCase().replace(/_/g,"-"))}let Xa=0,qa=0;let Qa=(e,t,n,r)=>((0,o.m7n)(!0),function __(e,t,n){const r=e[o.GpT];switch(n){case Node.COMMENT_NODE:return Rl(r,t);case Node.TEXT_NODE:return Pl(r,t);case Node.ELEMENT_NODE:return lc(r,t,null)}}(e,n,r));function v_(e,t,n,r){const i=n[o.GpT];let g,a=null;for(let C=0;C<t.length;C++){const T=t[C];if("string"==typeof T){const X=t[++C];null===n[X]&&(n[X]=Qa(n,0,T,Node.TEXT_NODE))}else if("number"==typeof T)switch(1&T){case 0:const X=Yp(T);let se,$e;if(null===a&&(a=X,g=i.parentNode(r)),X===a?(se=r,$e=g):(se=null,$e=(0,o.IvY)(n[X])),null!==$e){const nn=Zp(T);_i(i,$e,n[nn],se,!1);const $n=xa(e,nn);if(null!==$n&&"object"==typeof $n){const sn=Oc($n,n);null!==sn&&v_(e,$n.create[sn],n,n[$n.anchorIdx])}}break;case 1:const lt=t[++C],Rt=t[++C];bc(i,(0,o.vaC)(T>>>1,n),null,null,lt,Rt,null)}else switch(T){case hl:const X=t[++C],se=t[++C];null===n[se]&&q(n[se]=Qa(n,0,X,Node.COMMENT_NODE),n);break;case fl:const $e=t[++C],it=t[++C];null===n[it]&&q(n[it]=Qa(n,0,$e,Node.ELEMENT_NODE),n)}}}function y_(e,t,n,r,i){for(let a=0;a<n.length;a++){const g=n[a],C=n[++a];if(g&i){let T="";for(let X=a+1;X<=a+C;X++){const se=n[X];if("string"==typeof se)T+=se;else if("number"==typeof se)if(se<0)T+=(0,o.eFE)(t[r-se]);else{const $e=se>>>2;switch(3&se){case 1:const it=n[++X],lt=n[++X],Rt=e.data[$e];"string"==typeof Rt?bc(t[o.GpT],t[$e],null,Rt,it,T,lt):Zl(Rt,t,it,T,t[o.GpT],lt);break;case 0:const nn=t[$e];null!==nn&&$h(t[o.GpT],nn,T);break;case 2:tA(e,xa(e,$e),t,T);break;case 3:E_(e,xa(e,$e),r,t)}}}}else{const T=n[a+1];if(T>0&&!(3&~T)){const se=xa(e,T>>>2);t[se.currentCaseLViewIndex]<0&&E_(e,se,r,t)}}a+=C}}function E_(e,t,n,r){let i=r[t.currentCaseLViewIndex];if(null!==i){let a=Xa;i<0&&(i=r[t.currentCaseLViewIndex]=~i,a=-1),y_(e,r,t.update[i],n,a)}}function tA(e,t,n,r){const i=function nA(e,t){let n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:{const r=function GC(e,t){const n=p_(t)(parseInt(e,10)),r=zC[n];return void 0!==r?r:"other"}(t,function QC(){return m_}());n=e.cases.indexOf(r),-1===n&&"other"!==r&&(n=e.cases.indexOf("other"));break}case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,r);if(Oc(t,n)!==i&&(b_(e,t,n),n[t.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const g=n[t.anchorIdx];g&&v_(e,t.create[i],n,g)}}function b_(e,t,n){let r=Oc(t,n);if(null!==r){const i=t.remove[r];for(let a=0;a<i.length;a++){const g=i[a];if(g>0){const C=(0,o.vaC)(g,n);null!==C&&ba(n[o.GpT],C)}else b_(e,xa(e,~g),n)}}}const pl=/\ufffd(\d+):?\d*\ufffd/gi,rA=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,oA=/\ufffd(\d+)\ufffd/,S_=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,sA=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,iA=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,aA=/\uE500/g;function C_(e,t,n,r,i,a,g){const C=Sa(e,r,1,null);let T=C<<Vo.SHIFT,X=(0,o.Ab)();t===X&&(X=null),null===X&&(T|=Vo.APPEND_EAGERLY),g&&(T|=Vo.COMMENT,function n0(e){void 0===$l&&($l=e())}(vE)),i.push(T,null===a?"":a);const se=cu(e,C,g?32:1,null===a?"":a,null);Qp(n,se);const $e=se.index;return(0,o.iMd)(se,!1),null!==X&&t!==X&&function gE(e,t){let n=e.insertBeforeIndex;null===n?(wp(Xp,qp),n=e.insertBeforeIndex=[null,t]):((0,o.Xln)(Array.isArray(n),!0,"Expecting array here"),n.push(t))}(X,$e),se}function uA(e,t,n,r,i,a,g,C){const T=C.match(pl),se=C_(t,n,r,g,i,T?null:C,!1).index;T&&Ya(a,C,se,null,0,null),e.push({kind:0,index:se})}function Ya(e,t,n,r,i,a){const g=e.length,C=g+1;e.push(null,null);const T=g+2,X=t.split(pl);let se=0;for(let $e=0;$e<X.length;$e++){const it=X[$e];if(1&$e){const lt=i+parseInt(it,10);e.push(-1-lt),se|=A_(lt)}else""!==it&&e.push(it)}return e.push(n<<2|(r?1:0)),r&&e.push(r,a),e[g]=se,e[C]=e.length-T,se}function fA(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r&&r<0&&t++}return t}function A_(e){return 1<<Math.min(e,31)}function I_(e){let t,a,n="",r=0,i=!1;for(;null!==(t=sA.exec(e));)i?t[0]===`\ufffd/*${a}\ufffd`&&(r=t.index,i=!1):(n+=e.substring(r,t.index+t[0].length),a=t[1],i=!0);return n+=e.slice(r),n}function w_(e,t,n,r,i,a,g){let C=0;const T={type:a.type,currentCaseLViewIndex:Sa(t,n,1,null),anchorIdx:g,cases:[],create:[],remove:[],update:[]};(function _A(e,t,n){e.push(A_(t.mainBinding),2,-1-t.mainBinding,n<<2|2)})(r,a,g),function pE(e,t,n){const r=e.data[t];null===r?e.data[t]=n:r.value=n}(t,g,T);const X=a.values,se=[];for(let $e=0;$e<X.length;$e++){const it=X[$e],lt=[];for(let nn=0;nn<it.length;nn++){const xn=it[nn];if("string"!=typeof xn){const $n=lt.push(xn)-1;it[nn]=`\x3c!--\ufffd${$n}\ufffd--\x3e`}}const Rt=[];se.push(Rt),C=gA(Rt,t,T,n,r,i,a.cases[$e],it.join(""),lt)|C}C&&function vA(e,t,n){e.push(t,1,n<<2|3)}(r,C,g),e.push({kind:3,index:g,cases:se,currentCaseLViewIndex:T.currentCaseLViewIndex})}function pA(e){const t=[],n=[];let r=1,i=0;const a=vd(e=e.replace(S_,function(g,C,T){return r="select"===T?0:1,i=parseInt(C.slice(1),10),""}));for(let g=0;g<a.length;){let C=a[g++].trim();1===r&&(C=C.replace(/\s*(?:=)?(\w+)\s*/,"$1")),C.length&&t.push(C);const T=vd(a[g++]);t.length>n.length&&n.push(T)}return{type:r,mainBinding:i,cases:t,values:n}}function vd(e){if(!e)return[];let t=0;const n=[],r=[],i=/[{}]/g;let a;for(i.lastIndex=0;a=i.exec(e);){const C=a.index;if("}"==a[0]){if(n.pop(),0==n.length){const T=e.substring(t,C);S_.test(T)?r.push(pA(T)):r.push(T),t=C+1}}else{if(0==n.length){const T=e.substring(t,C);r.push(T),t=C+1}n.push("{")}}const g=e.substring(t);return r.push(g),r}function gA(e,t,n,r,i,a,g,C,T){const X=[],se=[],$e=[];n.cases.push(g),n.create.push(X),n.remove.push(se),n.update.push($e);const lt=rc(kt()).getInertBodyElement(C),Rt=Ol(lt)||lt;return Rt?T_(e,t,n,r,i,X,se,$e,Rt,a,T,0):0}function T_(e,t,n,r,i,a,g,C,T,X,se,$e){let it=0,lt=T.firstChild;for(;lt;){const Rt=Sa(t,r,1,null);switch(lt.nodeType){case Node.ELEMENT_NODE:const nn=lt,xn=nn.tagName.toLowerCase();if(wt.hasOwnProperty(xn)){yd(a,fl,xn,X,Rt),t.data[Rt]=xn;const Po=nn.attributes;for(let $s=0;$s<Po.length;$s++){const Fi=Po.item($s),hy=Fi.name.toLowerCase();Fi.value.match(pl)?Lo.hasOwnProperty(hy)&&Ya(C,Fi.value,Rt,Fi.name,0,zt[hy]?Ea:null):yA(a,Rt,Fi)}const po={kind:1,index:Rt,children:[]};e.push(po),it=T_(po.children,t,n,r,i,a,g,C,lt,Rt,se,$e+1)|it,M_(g,Rt,$e)}break;case Node.TEXT_NODE:const $n=lt.textContent||"",sn=$n.match(pl);yd(a,null,sn?"":$n,X,Rt),M_(g,Rt,$e),sn&&(it=Ya(C,$n,Rt,null,0,null)|it),e.push({kind:0,index:Rt});break;case Node.COMMENT_NODE:const Jr=oA.exec(lt.textContent||"");if(Jr){const po=se[parseInt(Jr[1],10)];yd(a,hl,"",X,Rt),w_(e,t,r,i,X,po,Rt),mA(g,Rt,$e)}}lt=lt.nextSibling}return it}function M_(e,t,n){0===n&&e.push(t)}function mA(e,t,n){0===n&&(e.push(~t),e.push(t))}function yd(e,t,n,r,i){null!==t&&e.push(t),e.push(n,i,function _E(e,t,n){return e|t<<17|n<<1}(0,r,i))}function yA(e,t,n){e.push(t<<1|1,n.name,n.value)}const EA=/\[(\ufffd.+?\ufffd?)\]/,bA=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,DA=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,SA=/{([A-Z0-9_]+)}/g,CA=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,AA=/\/\*/,IA=/\d+\:(\d+)/;function P_(e,t,n=-1){const r=(0,o.klJ)(),i=(0,o.OAn)(),a=o.Yw1+e,g=(0,o.db4)(r.consts,t),C=(0,o.Ab)();r.firstCreatePass&&function lA(e,t,n,r,i,a){const g=(0,o.Ab)(),C=[],T=[],X=[[]],se=[[]];i=function hA(e,t){if(function tg(e){return-1===e}(t))return I_(e);{const n=e.indexOf(`:${t}\ufffd`)+2+t.toString().length,r=e.search(new RegExp(`\ufffd\\/\\*\\d+:${t}\ufffd`));return I_(e.substring(n,r))}}(i,a);const $e=function cA(e){return e.replace(aA," ")}(i).split(iA);for(let it=0;it<$e.length;it++){let lt=$e[it];if(1&it){const Rt=47===lt.charCodeAt(0),nn=lt.charCodeAt(Rt?1:0),xn=o.Yw1+Number.parseInt(lt.substring(Rt?2:1));if(Rt)X.shift(),se.shift(),(0,o.iMd)((0,o.Ab)(),!1);else{const $n=mE(e,X[0],xn);X.unshift([]),(0,o.iMd)($n,!0);const sn={kind:2,index:xn,children:[],type:35===nn?0:1};se[0].push(sn),se.unshift(sn.children)}}else{const Rt=vd(lt);for(let nn=0;nn<Rt.length;nn++){let xn=Rt[nn];if(1&nn){const $n=xn;if("object"!=typeof $n)throw new Error(`Unable to parse ICU expression in "${i}" message.`);const Jr=C_(e,g,X[0],n,C,"",!0).index;w_(se[0],e,n,T,t,$n,Jr)}else""!==xn&&uA(se[0],e,g,X[0],C,T,n,xn)}}}e.data[r]={create:C,update:T,ast:se[0],parentTNodeIndex:t}}(r,null===C?0:C.index,i,a,g,n),2===r.type?i[o.b5C][o.Wg1]|=32:i[o.Wg1]|=32;const T=r.data[a],se=Sp(r,C===i[o.qlT]?null:C,i);(function eA(e,t,n,r){const i=e[o.GpT];for(let a=0;a<t.length;a++){const g=t[a++],X=(g&Vo.APPEND_EAGERLY)===Vo.APPEND_EAGERLY,se=g>>>Vo.SHIFT;let $e=e[se],it=!1;null===$e&&($e=e[se]=Qa(e,0,t[a],(g&Vo.COMMENT)===Vo.COMMENT?Node.COMMENT_NODE:Node.TEXT_NODE),it=(0,o.SX7)()),X&&null!==n&&it&&_i(i,n,$e,r,!1)}})(i,T.create,se,C&&8&C.type?i[C.index]:null),(0,o.xyx)(!0)}function R_(){(0,o.xyx)(!1)}function Ed(e,t,n){const r=(0,o.OAn)(),i=(0,o.klJ)(),a=(0,o.Mx4)();return bd(i,r,r[o.GpT],a,e,t,n),Ed}function bd(e,t,n,r,i,a,g){let C=!0,T=null;if((3&r.type||g)&&(T??=Ba(r,t,a),wg(r,e,t,g,n,i,a,T)&&(C=!1)),C){const X=r.outputs?.[i],se=r.hostDirectiveOutputs?.[i];if(se&&se.length)for(let $e=0;$e<se.length;$e+=2){const it=se[$e],lt=se[$e+1];T??=Ba(r,t,a),Bc(r,t,it,lt,i,T)}if(X&&X.length)for(const $e of X)T??=Ba(r,t,a),Bc(r,t,$e,i,i,T)}}function F_(e=1){return(0,o.jvu)(e)}function RA(e,t){let n=null;const r=function Gy(e){const t=e.attrs;if(null!=t){const n=t.indexOf(5);if(!(1&n))return t[n+1]}return null}(e);for(let i=0;i<t.length;i++){const a=t[i];if("*"!==a){if(null===r?Zh(e,a,!0):Qy(r,a))return i}else n=i}return n}function k_(e){const t=(0,o.OAn)()[o.b5C][o.qlT];if(!t.projection){const r=t.projection=(0,o.WfI)(e?e.length:1,null),i=r.slice();let a=t.child;for(;null!==a;){if(128!==a.type){const g=e?RA(a,e):0;null!==g&&(i[g]?i[g].projectionNext=a:r[g]=a,i[g]=a)}a=a.next}}}function $_(e,t=0,n,r,i,a){const g=(0,o.OAn)(),C=(0,o.klJ)(),T=r?e+1:null;null!==T&&Ii(g,C,T,r,i,a,null,n);const X=bi(C,o.Yw1+e,16,null,n||null);null===X.projection&&(X.projection=t),(0,o.Pfq)();const $e=!g[o.tcA]||(0,o.KtD)();null===g[o.b5C][o.qlT].projection[X.projection]&&null!==T?function xA(e,t,n){const r=o.Yw1+n,i=t.data[r],a=e[r];ea(a,Yi(e,i,void 0,{dehydratedView:null}),0,Ei(i,null))}(g,C,T):$e&&!eo(X)&&function I0(e,t,n){Mp(t[o.GpT],0,t,n,ql(e,n,t),Cp(n.parent||t[o.qlT],n,t))}(C,g,X)}function U_(e,t,n,r){jg(e,t,n,r)}function B_(e,t,n){Bg(e,t,n)}function j_(e){const t=(0,o.OAn)(),n=(0,o.klJ)(),r=(0,o.w7Z)();(0,o.GA0)(r+1);const i=Mu(n,r);if(e.dirty&&(0,o.vOT)(t)===!(2&~i.metadata.flags)){if(null===i.matches)e.reset([]);else{const a=Wg(t,r);e.reset(a,Gn),e.notifyOnChanges()}return!0}return!1}function V_(){return Tu((0,o.OAn)(),(0,o.w7Z)())}function W_(e){const t=(0,o.VPL)();return(0,o.Hh6)(t,o.Yw1+e)}function gl(e,t){return e<<17|t<<2}function Li(e){return e>>17&32767}function Dd(e){return 2|e}function ga(e){return(131068&e)>>2}function Sd(e,t){return-131069&e|t<<2}function Cd(e){return 1|e}function K_(e,t,n,r){const i=e[n+1],a=null===t;let g=r?Li(i):ga(i),C=!1;for(;0!==g&&(!1===C||a);){const X=e[g+1];VA(e[g],t)&&(C=!0,e[g+1]=r?Cd(X):Dd(X)),g=r?Li(X):ga(X)}C&&(e[n+1]=r?Dd(i):Cd(i))}function VA(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&(0,o.FRF)(e,t)>=0}const Co={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function H_(e){return e.substring(Co.key,Co.keyEnd)}function WA(e){return e.substring(Co.value,Co.valueEnd)}function z_(e,t){const n=Co.textEnd;return n===t?-1:(t=Co.keyEnd=function zA(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Co.key=t,n),ma(e,t,n))}function G_(e,t){const n=Co.textEnd;let r=Co.key=ma(e,t,n);return n===r?-1:(r=Co.keyEnd=function GA(e,t,n){let r;for(;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=q_(e,r,n),r=Co.value=ma(e,r,n),r=Co.valueEnd=function XA(e,t,n){let r=-1,i=-1,a=-1,g=t,C=g;for(;g<n;){const T=e.charCodeAt(g++);if(59===T)return C;34===T||39===T?C=g=Q_(e,T,g,n):t===g-4&&85===a&&82===i&&76===r&&40===T?C=g=Q_(e,41,g,n):T>32&&(C=g),a=i,i=r,r=-33&T}return C}(e,r,n),q_(e,r,n))}function X_(e){Co.key=0,Co.keyEnd=0,Co.value=0,Co.valueEnd=0,Co.textEnd=e.length}function ma(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function q_(e,t,n,r){return(t=ma(e,t,n))<n&&t++,t}function Q_(e,t,n,r){let i=-1,a=n;for(;a<r;){const g=e.charCodeAt(a++);if(g==t&&92!==i)return a;i=92==g&&92===i?0:g}throw new Error}function Ad(e,t,n){return Y_(e,t,n,!1),Ad}function Id(e,t){return Y_(e,t,null,!0),Id}function QA(e,t){for(let n=function HA(e){return X_(e),G_(e,ma(e,0,Co.textEnd))}(t);n>=0;n=G_(t,n))nv(e,H_(t),WA(t))}function J_(e){Z_(rI,JA,e,!0)}function JA(e,t){for(let n=function KA(e){return X_(e),z_(e,ma(e,0,Co.textEnd))}(t);n>=0;n=z_(t,n))(0,o.ezK)(e,H_(t),!0)}function Y_(e,t,n,r){const i=(0,o.OAn)(),a=(0,o.klJ)(),g=(0,o.b$O)(2);a.firstUpdatePass&&tv(a,e,g,r),t!==to&&lo(i,g,t)&&rv(a,a.data[(0,o._px)()],i,i[o.GpT],e,i[g+1]=function sI(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=(0,o.AsM)(Ls(e)))),e}(t,n),r,g)}function Z_(e,t,n,r){const i=(0,o.klJ)(),a=(0,o.b$O)(2);i.firstUpdatePass&&tv(i,null,a,r);const g=(0,o.OAn)();if(n!==to&&lo(g,a,n)){const C=i.data[(0,o._px)()];if(sv(C,r)&&!ev(i,a)){let T=r?C.classesWithoutHost:C.stylesWithoutHost;null!==T&&(n=(0,o.n$e)(T,n||"")),cd(i,C,g,n,r)}else!function oI(e,t,n,r,i,a,g,C){i===to&&(i=o.Mlv);let T=0,X=0,se=0<i.length?i[0]:null,$e=0<a.length?a[0]:null;for(;null!==se||null!==$e;){const it=T<i.length?i[T+1]:void 0,lt=X<a.length?a[X+1]:void 0;let nn,Rt=null;se===$e?(T+=2,X+=2,it!==lt&&(Rt=$e,nn=lt)):null===$e||null!==se&&se<$e?(T+=2,Rt=se):(X+=2,Rt=$e,nn=lt),null!==Rt&&rv(e,t,n,r,Rt,nn,g,C),se=T<i.length?i[T]:null,$e=X<a.length?a[X]:null}}(i,C,g,g[o.GpT],g[a+1],g[a+1]=function nI(e,t,n){if(null==n||""===n)return o.Mlv;const r=[],i=Ls(n);if(Array.isArray(i))for(let a=0;a<i.length;a++)e(r,i[a],!0);else if("object"==typeof i)for(const a in i)i.hasOwnProperty(a)&&e(r,a,i[a]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,a)}}function ev(e,t){return t>=e.expandoStartIndex}function tv(e,t,n,r){const i=e.data;if(null===i[n+1]){const a=i[(0,o._px)()],g=ev(e,n);sv(a,r)&&null===t&&!g&&(t=!1),t=function YA(e,t,n,r){const i=(0,o.MT)(e);let a=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=Za(n=wd(null,e,t,n,r),t.attrs,r),a=null);else{const g=t.directiveStylingLast;if(-1===g||e[g]!==i)if(n=wd(i,e,t,n,r),null===a){let T=function ZA(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==ga(r))return e[Li(r)]}(e,t,r);void 0!==T&&Array.isArray(T)&&(T=wd(null,e,t,T[1],r),T=Za(T,t.attrs,r),function eI(e,t,n,r){e[Li(n?t.classBindings:t.styleBindings)]=r}(e,t,r,T))}else a=function tI(e,t,n){let r;const i=t.directiveEnd;for(let a=1+t.directiveStylingLast;a<i;a++)r=Za(r,e[a].hostAttrs,n);return Za(r,t.attrs,n)}(e,t,r)}return void 0!==a&&(r?t.residualClasses=a:t.residualStyles=a),n}(i,a,t,r),function BA(e,t,n,r,i,a){let g=a?t.classBindings:t.styleBindings,C=Li(g),T=ga(g);e[r]=n;let se,X=!1;if(Array.isArray(n)?(se=n[1],(null===se||(0,o.FRF)(n,se)>0)&&(X=!0)):se=n,i)if(0!==T){const it=Li(e[C+1]);e[r+1]=gl(it,C),0!==it&&(e[it+1]=Sd(e[it+1],r)),e[C+1]=function $A(e,t){return 131071&e|t<<17}(e[C+1],r)}else e[r+1]=gl(C,0),0!==C&&(e[C+1]=Sd(e[C+1],r)),C=r;else e[r+1]=gl(T,0),0===C?C=r:e[T+1]=Sd(e[T+1],r),T=r;X&&(e[r+1]=Dd(e[r+1])),K_(e,se,r,!0),K_(e,se,r,!1),function jA(e,t,n,r,i){const a=i?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof t&&(0,o.FRF)(a,t)>=0&&(n[r+1]=Cd(n[r+1]))}(t,se,e,r,a),g=gl(C,T),a?t.classBindings=g:t.styleBindings=g}(i,a,t,n,g,r)}}function wd(e,t,n,r,i){let a=null;const g=n.directiveEnd;let C=n.directiveStylingLast;for(-1===C?C=n.directiveStart:C++;C<g&&(a=t[C],r=Za(r,a.hostAttrs,i),a!==e);)C++;return null!==e&&(n.directiveStylingLast=C),r}function Za(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let a=0;a<t.length;a++){const g=t[a];"number"==typeof g?i=g:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),(0,o.ezK)(e,g,!!n||t[++a]))}return void 0===e?null:e}function nv(e,t,n){(0,o.ezK)(e,t,Ls(n))}function rI(e,t,n){const r=String(t);""!==r&&!r.includes(" ")&&(0,o.ezK)(e,r,n)}function rv(e,t,n,r,i,a,g,C){if(!(3&t.type))return;const T=e.data,X=T[C+1],se=function UA(e){return!(1&~e)}(X)?ov(T,t,n,i,ga(X),g):void 0;ml(se)||(ml(a)||function kA(e){return!(2&~e)}(X)&&(a=ov(T,null,n,i,C,g)),function T0(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let a=-1===r.indexOf("-")?void 0:hc.DashCase;null==i?e.removeStyle(n,r,a):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),a|=hc.Important),e.setStyle(n,r,i,a))}}(r,g,(0,o.vaC)((0,o._px)(),n),i,a))}function ov(e,t,n,r,i,a){const g=null===t;let C;for(;i>0;){const T=e[i],X=Array.isArray(T),se=X?T[1]:T,$e=null===se;let it=n[i+1];it===to&&(it=$e?o.Mlv:void 0);let lt=$e?(0,o.K7h)(it,r):se===r?it:void 0;if(X&&!ml(lt)&&(lt=(0,o.K7h)(T,r)),ml(lt)&&(C=lt,g))return C;const Rt=e[i+1];i=g?Li(Rt):ga(Rt)}if(null!==t){let T=a?t.residualClasses:t.residualStyles;null!=T&&(C=(0,o.K7h)(T,r))}return C}function ml(e){return void 0!==e}function sv(e,t){return!!(e.flags&(t?8:16))}function iv(e,t=""){const n=(0,o.OAn)(),r=(0,o.klJ)(),i=e+o.Yw1,a=r.firstCreatePass?bi(r,i,1,t,null):r.data[i],g=av(r,n,a,t,e);n[i]=g,(0,o.SX7)()&&Jl(r,n,g,a),(0,o.iMd)(a,!1)}let av=(e,t,n,r,i)=>((0,o.m7n)(!0),Pl(t[o.GpT],r));function cv(e,t){let n=!1,r=(0,o.c$7)();for(let a=1;a<t.length;a+=2)n=lo(e,r++,t[a])||n;if((0,o.Kw3)(r),!n)return to;let i=t[0];for(let a=1;a<t.length;a+=2)i+=(0,o.eFE)(t[a])+(a+1!==t.length?t[a+1]:"");return i}function lv(e,t,n,r=""){return lo(e,(0,o.xbp)(),n)?t+(0,o.eFE)(n)+r:to}function uv(e,t,n,r,i,a=""){const C=Ci(e,(0,o.c$7)(),n,i);return(0,o.b$O)(2),C?t+(0,o.eFE)(n)+r+(0,o.eFE)(i)+a:to}function dv(e,t,n,r,i,a,g,C=""){const X=Uc(e,(0,o.c$7)(),n,i,g);return(0,o.b$O)(3),X?t+(0,o.eFE)(n)+r+(0,o.eFE)(i)+a+(0,o.eFE)(g)+C:to}function fv(e,t,n,r,i,a,g,C,T,X=""){const $e=es(e,(0,o.c$7)(),n,i,g,T);return(0,o.b$O)(4),$e?t+(0,o.eFE)(n)+r+(0,o.eFE)(i)+a+(0,o.eFE)(g)+C+(0,o.eFE)(T)+X:to}function hv(e,t,n,r,i,a,g,C,T,X,se,$e=""){const it=(0,o.c$7)();let lt=es(e,it,n,i,g,T);return lt=lo(e,it+4,se)||lt,(0,o.b$O)(5),lt?t+(0,o.eFE)(n)+r+(0,o.eFE)(i)+a+(0,o.eFE)(g)+C+(0,o.eFE)(T)+X+(0,o.eFE)(se)+$e:to}function pv(e,t,n,r,i,a,g,C,T,X,se,$e,it,lt=""){const Rt=(0,o.c$7)();let nn=es(e,Rt,n,i,g,T);return nn=Ci(e,Rt+4,se,it)||nn,(0,o.b$O)(6),nn?t+(0,o.eFE)(n)+r+(0,o.eFE)(i)+a+(0,o.eFE)(g)+C+(0,o.eFE)(T)+X+(0,o.eFE)(se)+$e+(0,o.eFE)(it)+lt:to}function gv(e,t,n,r,i,a,g,C,T,X,se,$e,it,lt,Rt,nn=""){const xn=(0,o.c$7)();let $n=es(e,xn,n,i,g,T);return $n=Uc(e,xn+4,se,it,Rt)||$n,(0,o.b$O)(7),$n?t+(0,o.eFE)(n)+r+(0,o.eFE)(i)+a+(0,o.eFE)(g)+C+(0,o.eFE)(T)+X+(0,o.eFE)(se)+$e+(0,o.eFE)(it)+lt+(0,o.eFE)(Rt)+nn:to}function mv(e,t,n,r,i,a,g,C,T,X,se,$e,it,lt,Rt,nn,xn,$n=""){const sn=(0,o.c$7)();let Jr=es(e,sn,n,i,g,T);return Jr=es(e,sn+4,se,it,Rt,xn)||Jr,(0,o.b$O)(8),Jr?t+(0,o.eFE)(n)+r+(0,o.eFE)(i)+a+(0,o.eFE)(g)+C+(0,o.eFE)(T)+X+(0,o.eFE)(se)+$e+(0,o.eFE)(it)+lt+(0,o.eFE)(Rt)+nn+(0,o.eFE)(xn)+$n:to}function Td(e){return _l("",e),Td}function _l(e,t,n){const r=(0,o.OAn)(),i=lv(r,e,t,n);return i!==to&&ks(r,(0,o._px)(),i),_l}function Md(e,t,n,r,i){const a=(0,o.OAn)(),g=uv(a,e,t,n,r,i);return g!==to&&ks(a,(0,o._px)(),g),Md}function Od(e,t,n,r,i,a,g){const C=(0,o.OAn)(),T=dv(C,e,t,n,r,i,a,g);return T!==to&&ks(C,(0,o._px)(),T),Od}function ks(e,t,n){const r=(0,o.vaC)(t,e);$h(e[o.GpT],r,n)}function Pd(e,t,n){(0,o.n$r)(t)&&(t=t());const r=(0,o.OAn)();return lo(r,(0,o.xbp)(),t)&&((0,o.klJ)(),Zl((0,o.CpD)(),r,e,t,r[o.GpT],n)),Pd}function Sv(e,t){const n=(0,o.n$r)(e);return n&&e.set(t),n}function Rd(e,t){const n=(0,o.OAn)(),r=(0,o.klJ)(),i=(0,o.Mx4)();return bd(r,n,n[o.GpT],i,e,t),Rd}const Cv={};function Iv(e,t,n=""){return lv((0,o.OAn)(),e,t,n)}function xd(e,t,n,r,i){if(e=(0,o.nl4)(e),Array.isArray(e))for(let a=0;a<e.length;a++)xd(e[a],t,n,r,i);else{const a=(0,o.klJ)(),g=(0,o.OAn)(),C=(0,o.Mx4)();let T=(0,o.Y3W)(e)?e:(0,o.nl4)(e.provide);const X=(0,o.Rc9)(e),se=1048575&C.providerIndexes,$e=C.directiveStart,it=C.providerIndexes>>20;if((0,o.Y3W)(e)||!e.multi){const lt=new Dt(X,i,ra,null),Rt=Nd(T,t,i?se:se+it,$e);-1===Rt?(tr(Ir(C,g),a,T),Ld(a,e,t.length),t.push(T),C.directiveStart++,C.directiveEnd++,i&&(C.providerIndexes+=1048576),n.push(lt),g.push(lt)):(n[Rt]=lt,g[Rt]=lt)}else{const lt=Nd(T,t,se+it,$e),Rt=Nd(T,t,se,se+it),xn=Rt>=0&&n[Rt];if(i&&!xn||!i&&!(lt>=0&&n[lt])){tr(Ir(C,g),a,T);const $n=function DI(e,t,n,r,i){const g=new Dt(e,n,ra,null);return g.multi=[],g.index=t,g.componentProviders=0,wv(g,i,r&&!n),g}(i?bI:EI,n.length,i,r,X);!i&&xn&&(n[Rt].providerFactory=$n),Ld(a,e,t.length,0),t.push(T),C.directiveStart++,C.directiveEnd++,i&&(C.providerIndexes+=1048576),n.push($n),g.push($n)}else Ld(a,e,lt>-1?lt:Rt,wv(n[i?Rt:lt],X,!i&&r));!i&&r&&xn&&n[Rt].componentProviders++}}}function Ld(e,t,n,r){const i=(0,o.Y3W)(t),a=(0,o.MME)(t);if(i||a){const T=(a?(0,o.nl4)(t.useClass):t).prototype.ngOnDestroy;if(T){const X=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const se=X.indexOf(n);-1===se?X.push(n,[r,T]):X[se+1].push(r,T)}else X.push(n,T)}}}function wv(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Nd(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function EI(e,t,n,r,i){return Fd(this.multi,[])}function bI(e,t,n,r,i){const a=this.multi;let g;if(this.providerFactory){const C=this.providerFactory.componentProviders,T=cn(r,r[o.eDl],this.providerFactory.index,i);g=T.slice(0,C),Fd(a,g);for(let X=C;X<T.length;X++)g.push(T[X])}else g=[],Fd(a,g);return g}function Fd(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Tv(e,t=[]){return n=>{n.providersResolver=(r,i)=>function yI(e,t,n){const r=(0,o.klJ)();if(r.firstCreatePass){const i=(0,o.JlV)(e);xd(n,r.data,r.blueprint,i,!0),xd(t,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,t)}}function vl(e){if("function"==typeof e)return e;const t=(0,o.Bqz)(e);return t.some(o.Jzi)?()=>t.map(o.nl4).map(Mv):t.map(Mv)}function Mv(e){return mu(e)?e.ngModule:e}function Ov(e,t,n){const r=(0,o.gxQ)()+e,i=(0,o.OAn)();return i[r]===to?Ts(i,r,n?t.call(n):t()):Ua(i,r)}function Pv(e,t,n,r){return Rv((0,o.OAn)(),(0,o.gxQ)(),e,t,n,r)}function ec(e,t){const n=e[t];return n===to?void 0:n}function Rv(e,t,n,r,i,a){const g=t+n;return lo(e,g,i)?Ts(e,g+1,a?r.call(a,i):r(i)):ec(e,g+1)}function xv(e,t,n,r,i,a,g){const C=t+n;return Ci(e,C,i,a)?Ts(e,C+2,g?r.call(g,i,a):r(i,a)):ec(e,C+2)}function Lv(e,t,n,r,i,a,g,C){const T=t+n;return Uc(e,T,i,a,g)?Ts(e,T+3,C?r.call(C,i,a,g):r(i,a,g)):ec(e,T+3)}function Nv(e,t,n,r,i,a,g,C,T){const X=t+n;return es(e,X,i,a,g,C)?Ts(e,X+4,T?r.call(T,i,a,g,C):r(i,a,g,C)):ec(e,X+4)}function Fv(e,t,n,r,i,a){let g=t+n,C=!1;for(let T=0;T<i.length;T++)lo(e,g++,i[T])&&(C=!0);return C?Ts(e,g,r.apply(a,i)):ec(e,g)}function kv(e,t){const n=(0,o.klJ)();let r;const i=e+o.Yw1;n.firstCreatePass?(r=function LI(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const a=r.factory||(r.factory=(0,o.wGu)(r.type,!0)),C=(0,o.a2B)(ra);try{const T=Sr(!1),X=a();return Sr(T),(0,o.M_e)(n,(0,o.OAn)(),i,X),X}finally{(0,o.a2B)(C)}}function $v(e,t,n){const r=e+o.Yw1,i=(0,o.OAn)(),a=(0,o.Hh6)(i,r);return tc(i,r)?Rv(i,(0,o.gxQ)(),t,a.transform,n,a):a.transform(n)}function Uv(e,t,n,r){const i=e+o.Yw1,a=(0,o.OAn)(),g=(0,o.Hh6)(a,i);return tc(a,i)?xv(a,(0,o.gxQ)(),t,g.transform,n,r,g):g.transform(n,r)}function tc(e,t){return e[o.eDl].data[t].pure}function Bv(e,t){return Tc(e,t)}function yl(e,t,n,r,i){const a=i[o.eDl];if(a!==r.tView)for(let g=o.Yw1;g<a.bindingStartIndex;g++){const C=i[g];if((0,o.A0l)(C)){(0,o.q$2)(C[o.jgP])&&yl(e,t,n,r,C[o.jgP]);for(let T=o.Y20;T<C.length;T++)yl(e,t,n,r,C[T])}else(0,o.q$2)(C)&&yl(e,t,n,r,C)}else!function KI(e,t,n,r,i){const a=i[o.SKP];let g=i[o.jgP];const C=i[o.f7T],T=i[o.qlT],X=i[o.YEL].get(io,null),se=()=>{if(r.encapsulation===Uo.ShadowDom){const Rt=g.cloneNode(!1);g.replaceWith(Rt),g=Rt}const $e=tp(n),it=dc(C,$e,a,Fl(n),g,T,null,null,null,null,null);(function HI(e,t,n,r){for(let i=o.Yw1;i<e[o.eDl].bindingStartIndex;i++){const a=e[i];if(((0,o.q$2)(a)||(0,o.A0l)(a))&&a[o.K29]===t){a[o.K29]=n;break}}e[o.EJG]===t&&(e[o.EJG]=n),e[o.Yrj]===t&&(e[o.Yrj]=n),n[o.K29]=t[o.K29],t[o.K29]=null,e[r]=n})(C,i,it,T.index),Ia(i[o.eDl],i);const lt=i[o.M0L].rendererFactory;(function WI(e,t){e.componentReplaced?.(t.id)})(lt,r),it[o.GpT]=lt.createRenderer(g,n),Ep(i[o.eDl],i),function zI(e){if(null!==e.projection){for(const t of e.projection)Cn(t)&&(t.projectionNext=null,t.flags&=-3);e.projection=null}}(T),Ac($e,it,a),Up($e,it,$e.template,a)};null===X?jv(e,t,se):X.run(()=>jv(e,t,se))}(e,t,n,r,i)}function jv(e,t,n){try{n()}catch(r){if(null!==t&&r.message){const a=r.message+(r.stack?"\n"+r.stack:"");e?.hot?.send?.("angular:invalidate",{id:t,message:a,error:!0})}throw r}}const oi={\u0275\u0275animateEnter:function ol(e){if(Mo("NgAnimateEnter"),!Pi)return ol;const t=(0,o.OAn)();if(Zc(t))return ol;const n=(0,o.Mx4)();return el(n,t),nl(tl(t),n,()=>function yC(e,t,n){const r=(0,o.d31)(t,e),i=e[o.GpT],a=e[o.YEL].get(io),g=r_(n),C=[],T=se=>{if(se.target!==r)return;const $e=se instanceof AnimationEvent?"animationend":"transitionend";a.runOutsideAngular(()=>{i.listen(r,$e,X)})},X=se=>{se.target===r&&function EC(e,t,n){const r=da.get(t);if(e.target===t&&r&&o_(e,t)){e.stopImmediatePropagation();for(const i of r.classList)n.removeClass(t,i);Yu(t)}}(se,r,i)};if(g&&g.length>0){a.runOutsideAngular(()=>{C.push(i.listen(r,"animationstart",T)),C.push(i.listen(r,"transitionstart",T))}),function gC(e,t,n){const r=da.get(e);if(r){for(const i of t)r.classList.push(i);for(const i of n)r.cleanupFns.push(i)}else da.set(e,{classList:t,cleanupFns:n})}(r,g,C);for(const se of g)i.addClass(r,se);a.runOutsideAngular(()=>{requestAnimationFrame(()=>{if(ip(r,Ri,Pi),!Ri.has(r)){for(const se of g)i.removeClass(r,se);Yu(r)}})})}}(t,n,e)),_c(t[o.YEL]),zl(t[o.YEL],tl(t)),ol},\u0275\u0275animateEnterListener:function sl(e){if(Mo("NgAnimateEnter"),!Pi)return sl;const t=(0,o.OAn)();if(Zc(t))return sl;const n=(0,o.Mx4)();return el(n,t),nl(tl(t),n,()=>function bC(e,t,n){const r=(0,o.d31)(t,e);n.call(e[o.SKP],{target:r,animationComplete:mC})}(t,n,e)),_c(t[o.YEL]),zl(t[o.YEL],tl(t)),sl},\u0275\u0275animateLeave:function il(e){if(Mo("NgAnimateLeave"),!Pi)return il;const t=(0,o.OAn)();if(Zc(t))return il;const r=(0,o.Mx4)();return el(r,t),nl(xi(t),r,()=>function DC(e,t,n){const{promise:r,resolve:i}=zu(),a=(0,o.d31)(t,e),g=e[o.GpT],C=e[o.YEL].get(io);vi.add(e),(xi(e).get(t.index).resolvers??=[]).push(i);const T=r_(n);return T&&T.length>0?function SC(e,t,n,r,i,a){!function _C(e,t){if(!Pi)return;const n=da.get(e);if(n&&n.classList.length>0&&function vC(e,t){for(const n of t)if(e.classList.contains(n))return!0;return!1}(e,n.classList))for(const r of n.classList)t.removeClass(e,r);Yu(e)}(e,i);const g=[],C=xi(n).get(t.index)?.resolvers,T=X=>{if(X.target===e&&(X instanceof CustomEvent||o_(X,e))){if(X.stopImmediatePropagation(),Ri.delete(e),Zu(t,e),Array.isArray(t.projection))for(const se of r)i.removeClass(e,se);ed(C,g),td(n,t)}};a.runOutsideAngular(()=>{g.push(i.listen(e,"animationend",T)),g.push(i.listen(e,"transitionend",T))}),n_(t,e);for(const X of r)i.addClass(e,X);a.runOutsideAngular(()=>{requestAnimationFrame(()=>{ip(e,Ri,Pi),Ri.has(e)||(Zu(t,e),ed(C,g),td(n,t))})})}(a,t,e,T,g,C):i(),{promise:r,resolve:i}}(t,r,e)),_c(t[o.YEL]),il},\u0275\u0275animateLeaveListener:function nd(e){if(Mo("NgAnimateLeave"),!Pi)return nd;const t=(0,o.OAn)(),n=(0,o.Mx4)();return el(n,t),vi.add(t),nl(xi(t),n,()=>function CC(e,t,n){const{promise:r,resolve:i}=zu(),a=(0,o.d31)(t,e),g=[],C=e[o.GpT],T=Zc(e),X=e[o.YEL].get(io),se=e[o.YEL].get(fC);(xi(e).get(t.index).resolvers??=[]).push(i);const $e=xi(e).get(t.index)?.resolvers;if(T)rl(e,t,a,$e,g);else{const it=setTimeout(()=>rl(e,t,a,$e,g),se),lt={target:a,animationComplete:()=>{rl(e,t,a,$e,g),clearTimeout(it)}};n_(t,a),X.runOutsideAngular(()=>{g.push(C.listen(a,"animationend",()=>{rl(e,t,a,$e,g),clearTimeout(it)},{once:!0}))}),n.call(e[o.SKP],lt)}return{promise:r,resolve:i}}(t,n,e)),_c(t[o.YEL]),nd},\u0275\u0275attribute:Ju,\u0275\u0275defineComponent:Qg,\u0275\u0275defineDirective:Zg,\u0275\u0275defineInjectable:o.jDH,\u0275\u0275defineInjector:o.G2t,\u0275\u0275defineNgModule:Yg,\u0275\u0275definePipe:em,\u0275\u0275directiveInject:ra,\u0275\u0275getInheritedFactory:mr,\u0275\u0275inject:o.KVO,\u0275\u0275injectAttribute:jr,\u0275\u0275invalidFactory:vg,\u0275\u0275invalidFactoryDep:o.dmw,\u0275\u0275templateRefExtractor:Bv,\u0275\u0275resetView:o.Njj,\u0275\u0275HostDirectivesFeature:function fD(e){const t=n=>{const r=Array.isArray(e);null===n.hostDirectives?(n.resolveHostDirectives=hD,n.hostDirectives=r?e.map(Fu):[e]):r?n.hostDirectives.unshift(...e.map(Fu)):n.hostDirectives.unshift(e)};return t.ngInherit=!0,t},\u0275\u0275NgOnChangesFeature:xe,\u0275\u0275ProvidersFeature:Tv,\u0275\u0275CopyDefinitionFeature:function dD(e){let n,t=rm(e.type);n=(0,o.JlV)(e)?t.\u0275cmp:t.\u0275dir;const r=e;for(const i of lD)r[i]=n[i];if((0,o.JlV)(n))for(const i of uD)r[i]=n[i]},\u0275\u0275InheritDefinitionFeature:Lu,\u0275\u0275ExternalStylesFeature:function SI(e){return t=>{e.length<1||(t.getExternalStyles=n=>e.map(i=>i+"?ngcomp"+(n?"="+encodeURIComponent(n):"")+"&e="+t.encapsulation))}},\u0275\u0275nextContext:F_,\u0275\u0275namespaceHTML:o.joV,\u0275\u0275namespaceMathML:o.By9,\u0275\u0275namespaceSVG:o.qSk,\u0275\u0275enableBindings:o.cSN,\u0275\u0275disableBindings:o.fuf,\u0275\u0275elementStart:cl,\u0275\u0275elementEnd:ll,\u0275\u0275element:ld,\u0275\u0275elementContainerStart:ul,\u0275\u0275elementContainerEnd:Ga,\u0275\u0275domElement:function c_(e,t,n,r){return ud(e,t,n,r),dd(),c_},\u0275\u0275domElementStart:ud,\u0275\u0275domElementEnd:dd,\u0275\u0275domElementContainer:function u_(e,t,n){return pd(e,t,n),l_(),u_},\u0275\u0275domElementContainerStart:pd,\u0275\u0275domElementContainerEnd:l_,\u0275\u0275domTemplate:function lm(e,t,n,r,i,a,g,C){const T=(0,o.OAn)(),X=(0,o.klJ)();return Ii(T,X,e,t,n,r,i,(0,o.db4)(X.consts,a),void 0,g,C),lm},\u0275\u0275domListener:function N_(e,t,n){const r=(0,o.OAn)(),i=(0,o.klJ)(),a=(0,o.Mx4)();return(3&a.type||n)&&wg(a,i,r,n,r[o.GpT],e,t,Ba(a,r,t)),N_},\u0275\u0275elementContainer:hd,\u0275\u0275pureFunction0:Ov,\u0275\u0275pureFunction1:Pv,\u0275\u0275pureFunction2:function II(e,t,n,r,i){return xv((0,o.OAn)(),(0,o.gxQ)(),e,t,n,r,i)},\u0275\u0275pureFunction3:function wI(e,t,n,r,i,a){return Lv((0,o.OAn)(),(0,o.gxQ)(),e,t,n,r,i,a)},\u0275\u0275pureFunction4:function TI(e,t,n,r,i,a,g){return Nv((0,o.OAn)(),(0,o.gxQ)(),e,t,n,r,i,a,g)},\u0275\u0275pureFunction5:function MI(e,t,n,r,i,a,g,C){const T=(0,o.gxQ)()+e,X=(0,o.OAn)(),se=es(X,T,n,r,i,a);return lo(X,T+4,g)||se?Ts(X,T+5,C?t.call(C,n,r,i,a,g):t(n,r,i,a,g)):Ua(X,T+5)},\u0275\u0275pureFunction6:function OI(e,t,n,r,i,a,g,C,T){const X=(0,o.gxQ)()+e,se=(0,o.OAn)(),$e=es(se,X,n,r,i,a);return Ci(se,X+4,g,C)||$e?Ts(se,X+6,T?t.call(T,n,r,i,a,g,C):t(n,r,i,a,g,C)):Ua(se,X+6)},\u0275\u0275pureFunction7:function PI(e,t,n,r,i,a,g,C,T,X){const se=(0,o.gxQ)()+e,$e=(0,o.OAn)();let it=es($e,se,n,r,i,a);return Uc($e,se+4,g,C,T)||it?Ts($e,se+7,X?t.call(X,n,r,i,a,g,C,T):t(n,r,i,a,g,C,T)):Ua($e,se+7)},\u0275\u0275pureFunction8:function RI(e,t,n,r,i,a,g,C,T,X,se){const $e=(0,o.gxQ)()+e,it=(0,o.OAn)(),lt=es(it,$e,n,r,i,a);return es(it,$e+4,g,C,T,X)||lt?Ts(it,$e+8,se?t.call(se,n,r,i,a,g,C,T,X):t(n,r,i,a,g,C,T,X)):Ua(it,$e+8)},\u0275\u0275pureFunctionV:function xI(e,t,n,r){return Fv((0,o.OAn)(),(0,o.gxQ)(),e,t,n,r)},\u0275\u0275getCurrentView:d_,\u0275\u0275restoreView:o.eBV,\u0275\u0275listener:Ed,\u0275\u0275projection:$_,\u0275\u0275syntheticHostProperty:function h_(e,t,n){const r=(0,o.OAn)();if(lo(r,(0,o.xbp)(),t)){const a=(0,o.klJ)(),g=(0,o.CpD)();eu(g,r,e,t,Lp((0,o.MT)(a.data),g,r),n)}return h_},\u0275\u0275syntheticHostListener:function L_(e,t){const n=(0,o.Mx4)(),r=(0,o.OAn)(),i=(0,o.klJ)();return bd(i,r,Lp((0,o.MT)(i.data),n,r),n,e,t),L_},\u0275\u0275pipeBind1:$v,\u0275\u0275pipeBind2:Uv,\u0275\u0275pipeBind3:function NI(e,t,n,r,i){const a=e+o.Yw1,g=(0,o.OAn)(),C=(0,o.Hh6)(g,a);return tc(g,a)?Lv(g,(0,o.gxQ)(),t,C.transform,n,r,i,C):C.transform(n,r,i)},\u0275\u0275pipeBind4:function FI(e,t,n,r,i,a){const g=e+o.Yw1,C=(0,o.OAn)(),T=(0,o.Hh6)(C,g);return tc(C,g)?Nv(C,(0,o.gxQ)(),t,T.transform,n,r,i,a,T):T.transform(n,r,i,a)},\u0275\u0275pipeBindV:function kI(e,t,n){const r=e+o.Yw1,i=(0,o.OAn)(),a=(0,o.Hh6)(i,r);return tc(i,r)?Fv(i,(0,o.gxQ)(),t,a.transform,n,a):a.transform.apply(a,n)},\u0275\u0275projectionDef:k_,\u0275\u0275domProperty:function f_(e,t,n){const r=(0,o.OAn)();return lo(r,(0,o.xbp)(),t)&&((0,o.klJ)(),eu((0,o.CpD)(),r,e,t,r[o.GpT],n)),f_},\u0275\u0275ariaProperty:function t_(e,t){const n=(0,o.OAn)();if(lo(n,(0,o.xbp)(),t)){const i=(0,o.klJ)(),a=(0,o.CpD)();if(Cc(a,i,n,e,t))(0,o.Qs1)(a)&&Rp(n,a.index);else{const C=(0,o.d31)(a,n);bc(n[o.GpT],C,null,a.value,e,t,null)}}return t_},\u0275\u0275property:ad,\u0275\u0275pipe:kv,\u0275\u0275queryRefresh:j_,\u0275\u0275queryAdvance:function FA(e=1){(0,o.GA0)((0,o.w7Z)()+e)},\u0275\u0275viewQuery:B_,\u0275\u0275viewQuerySignal:function NA(e,t,n,r){Kg(e,Bg(t,n,r))},\u0275\u0275loadQuery:V_,\u0275\u0275contentQuery:U_,\u0275\u0275contentQuerySignal:function LA(e,t,n,r,i){Kg(t,jg(e,n,r,i))},\u0275\u0275reference:W_,\u0275\u0275classMap:J_,\u0275\u0275styleMap:function qA(e){Z_(nv,QA,e,!1)},\u0275\u0275styleProp:Ad,\u0275\u0275classProp:Id,\u0275\u0275advance:np,\u0275\u0275template:ku,\u0275\u0275conditional:function MC(e,t){Mo("NgControlFlow");const n=(0,o.OAn)(),r=(0,o.xbp)(),i=n[r]!==to?n[r]:-1,a=-1!==i?al(n,o.Yw1+i):void 0;if(lo(n,r,e)){const C=(0,S.Ht)(null);try{if(void 0!==a&&ou(a,0),-1!==e){const T=o.Yw1+e,X=al(n,T),se=id(n[o.eDl],T),$e=null;ea(X,Yi(n,se,t,{dehydratedView:$e}),0,Ei(se,$e))}}finally{(0,S.Ht)(C)}}else if(void 0!==a){const C=Kp(a,0);void 0!==C&&(C[o.SKP]=t)}},\u0275\u0275conditionalCreate:function TC(e,t,n,r,i,a,g,C){Mo("NgControlFlow");const T=(0,o.OAn)(),X=(0,o.klJ)();return Ii(T,X,e,t,n,r,i,(0,o.db4)(X.consts,a),256,g,C),sd},\u0275\u0275conditionalBranchCreate:sd,\u0275\u0275defer:function VS(e,t,n,r,i,a,g,C,T,X){const se=(0,o.OAn)(),$e=(0,o.klJ)(),it=e+o.Yw1,lt=Ii(se,$e,e,null,0,0),Rt=se[o.YEL],nn=zo(Rt);if($e.firstCreatePass){Mo("NgDefer");const $s={primaryTmplIndex:t,loadingTmplIndex:r??null,placeholderTmplIndex:i??null,errorTmplIndex:a??null,placeholderBlockConfig:null,loadingBlockConfig:null,dependencyResolverFn:n??null,loadingState:bo.NOT_STARTED,loadingPromise:null,providers:null,hydrateTriggers:null,debug:null,flags:X??0};T?.($e,$s,C,g),function DD(e,t,n){const r=Ka(t);e.data[r]=n}($e,it,$s)}const xn=se[it];let $n=null,sn=null;if(xn[o.qFA]?.length>0){const $s=xn[o.qFA][0].data;sn=$s.di??null,$n=$s.s}const Jr=[null,sa.Initial,null,null,null,null,sn,$n,null,null];!function bD(e,t,n){e[Ka(t)]=n}(se,it,Jr);let Po=null;null!==sn&&nn&&(Po=Rt.get(Fo),Po.add(sn,{lView:se,tNode:lt,lContainer:xn}));const po=()=>{pm(Jr),null!==sn&&Po?.cleanup([sn])};Wa(0,Jr,()=>(0,o.DyX)(se,po)),(0,o.ik5)(se,po)},\u0275\u0275deferWhen:function WS(e){const t=(0,o.OAn)(),n=(0,o.CpD)();if(_o(0,t,n)&&lo(t,(0,o.xbp)(),e)){const i=(0,S.Ht)(null);try{const a=!!e,C=Bo(t,n)[1];!1===a&&C===sa.Initial?la(t,n):!0===a&&(C===sa.Initial||C===oo.Placeholder)&&Mi(0,t,n)}finally{(0,S.Ht)(i)}}},\u0275\u0275deferOnIdle:function GS(){_o(0,(0,o.OAn)(),(0,o.Mx4)())&&Gm(Gc)},\u0275\u0275deferOnImmediate:function QS(){const e=(0,o.OAn)(),t=(0,o.Mx4)();_o(0,e,t)&&(null===Oo(e[o.eDl],t).loadingTmplIndex&&la(e,t),Mi(0,e,t))},\u0275\u0275deferOnTimer:function ZS(e){_o(0,(0,o.OAn)(),(0,o.Mx4)())&&Gm(Xc(e))},\u0275\u0275deferOnHover:function nC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();_o(0,n,r)&&(la(n,r),ca(n,r,e,t,si,()=>Mi(0,n,r),0))},\u0275\u0275deferOnInteraction:function sC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();_o(0,n,r)&&(la(n,r),ca(n,r,e,t,rs,()=>Mi(0,n,r),0))},\u0275\u0275deferOnViewport:function cC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();_o(0,n,r)&&(la(n,r),ca(n,r,e,t,Uu,()=>Mi(0,n,r),0))},\u0275\u0275deferPrefetchWhen:function KS(e){const t=(0,o.OAn)(),n=(0,o.CpD)();if(_o(1,t,n)&&lo(t,(0,o.xbp)(),e)){const i=(0,S.Ht)(null);try{const a=!!e,C=Oo(t[o.eDl],n);!0===a&&C.loadingState===bo.NOT_STARTED&&za(C,t,n)}finally{(0,S.Ht)(i)}}},\u0275\u0275deferPrefetchOnIdle:function XS(){_o(1,(0,o.OAn)(),(0,o.Mx4)())&&Xm(Gc)},\u0275\u0275deferPrefetchOnImmediate:function JS(){const e=(0,o.OAn)(),t=(0,o.Mx4)();if(!_o(1,e,t))return;const r=Oo(e[o.eDl],t);r.loadingState===bo.NOT_STARTED&&Gu(r,e,t)},\u0275\u0275deferPrefetchOnTimer:function eC(e){_o(1,(0,o.OAn)(),(0,o.Mx4)())&&Xm(Xc(e))},\u0275\u0275deferPrefetchOnHover:function rC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();if(!_o(1,n,r))return;const a=Oo(n[o.eDl],r);a.loadingState===bo.NOT_STARTED&&ca(n,r,e,t,si,()=>za(a,n,r),1)},\u0275\u0275deferPrefetchOnInteraction:function iC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();if(!_o(1,n,r))return;const a=Oo(n[o.eDl],r);a.loadingState===bo.NOT_STARTED&&ca(n,r,e,t,rs,()=>za(a,n,r),1)},\u0275\u0275deferPrefetchOnViewport:function lC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();if(!_o(1,n,r))return;const a=Oo(n[o.eDl],r);a.loadingState===bo.NOT_STARTED&&ca(n,r,e,t,Uu,()=>za(a,n,r),1)},\u0275\u0275deferHydrateWhen:function HS(e){const t=(0,o.OAn)(),n=(0,o.CpD)();if(!_o(2,t,n))return;const r=(0,o.xbp)();if(ri((0,o.klJ)(),n).set(6,null),lo(t,r,e)){const g=t[o.YEL],C=(0,S.Ht)(null);try{1==!!e&&Oi(g,Bo(t,n)[6])}finally{(0,S.Ht)(C)}}},\u0275\u0275deferHydrateNever:function zS(){const e=(0,o.OAn)(),t=(0,o.Mx4)();_o(2,e,t)&&ri((0,o.klJ)(),t).set(7,null)},\u0275\u0275deferHydrateOnIdle:function qS(){const e=(0,o.OAn)(),t=(0,o.Mx4)();_o(2,e,t)&&(ri((0,o.klJ)(),t).set(0,null),qm(Gc,e,t))},\u0275\u0275deferHydrateOnImmediate:function YS(){const e=(0,o.OAn)(),t=(0,o.Mx4)();_o(2,e,t)&&(ri((0,o.klJ)(),t).set(1,null),Oi(e[o.YEL],Bo(e,t)[6]))},\u0275\u0275deferHydrateOnTimer:function tC(e){const t=(0,o.OAn)(),n=(0,o.Mx4)();_o(2,t,n)&&(ri((0,o.klJ)(),n).set(5,{delay:e}),qm(Xc(e),t,n))},\u0275\u0275deferHydrateOnHover:function oC(){const e=(0,o.OAn)(),t=(0,o.Mx4)();_o(2,e,t)&&ri((0,o.klJ)(),t).set(4,null)},\u0275\u0275deferHydrateOnInteraction:function aC(){const e=(0,o.OAn)(),t=(0,o.Mx4)();_o(2,e,t)&&ri((0,o.klJ)(),t).set(3,null)},\u0275\u0275deferHydrateOnViewport:function uC(){const e=(0,o.OAn)(),t=(0,o.Mx4)();_o(2,e,t)&&ri((0,o.klJ)(),t).set(2,null)},\u0275\u0275deferEnableTimerScheduling:function FD(e,t,n,r){const i=e.consts;null!=n&&(t.placeholderBlockConfig=(0,o.db4)(i,n)),null!=r&&(t.loadingBlockConfig=(0,o.db4)(i,r)),null===ju&&(ju=ND)},\u0275\u0275repeater:function FC(e){const t=(0,S.Ht)(null),n=(0,o._px)();try{const r=(0,o.OAn)(),i=r[o.eDl],a=r[n],g=n+1,C=al(r,g);if(void 0===a.liveCollection){const X=id(i,g);a.liveCollection=new NC(C,r,X)}else a.liveCollection.reset();const T=a.liveCollection;if(function wC(e,t,n){let r,i,a=0,g=e.length-1;if(Array.isArray(t)){let T=t.length-1;for(;a<=g&&a<=T;){const X=e.at(a),se=t[a],$e=rd(a,X,a,se,n);if(0!==$e){$e<0&&e.updateValue(a,se),a++;continue}const it=e.at(g),lt=t[T],Rt=rd(g,it,T,lt,n);if(0!==Rt){Rt<0&&e.updateValue(g,lt),g--,T--;continue}const nn=n(a,X),xn=n(g,it),$n=n(a,se);if(Object.is($n,xn)){const sn=n(T,lt);Object.is(sn,nn)?(e.swap(a,g),e.updateValue(g,lt),T--,g--):e.move(g,a),e.updateValue(a,se),a++;continue}if(r??=new a_,i??=i_(e,a,g,n),od(e,r,a,$n))e.updateValue(a,se),a++,g++;else if(i.has($n))r.set(nn,e.detach(a)),g--;else{const sn=e.create(a,t[a]);e.attach(a,sn),a++,g++}}for(;a<=T;)s_(e,r,n,a,t[a]),a++}else if(null!=t){const T=t[Symbol.iterator]();let X=T.next();for(;!X.done&&a<=g;){const se=e.at(a),$e=X.value,it=rd(a,se,a,$e,n);if(0!==it)it<0&&e.updateValue(a,$e),a++,X=T.next();else{r??=new a_,i??=i_(e,a,g,n);const lt=n(a,$e);if(od(e,r,a,lt))e.updateValue(a,$e),a++,g++,X=T.next();else if(i.has(lt)){const Rt=n(a,se);r.set(Rt,e.detach(a)),g--}else e.attach(a,e.create(a,$e)),a++,g++,X=T.next()}}for(;!X.done;)s_(e,r,n,e.length,X.value),X=T.next()}for(;a<=g;)e.destroy(e.detach(g--));r?.forEach(T=>{e.destroy(T)})}(T,e,a.trackByFn),T.updateIndexes(),a.hasEmptyBlock){const X=(0,o.xbp)(),se=0===T.length;if(lo(r,X,se)){const $e=n+2,it=al(r,$e);if(se){const lt=id(i,$e),Rt=null;ea(it,Yi(r,lt,void 0,{dehydratedView:Rt}),0,Ei(lt,Rt))}else i.firstUpdatePass&&xc(it),ou(it,0)}}}finally{(0,S.Ht)(t)}},\u0275\u0275repeaterCreate:function LC(e,t,n,r,i,a,g,C,T,X,se,$e,it){Mo("NgControlFlow");const lt=(0,o.OAn)(),Rt=(0,o.klJ)(),nn=void 0!==T,xn=(0,o.OAn)(),$n=C?g.bind(xn[o.b5C][o.SKP]):g,sn=new xC(nn,$n);xn[o.Yw1+e]=sn,Ii(lt,Rt,e+1,t,n,r,i,(0,o.db4)(Rt.consts,a),256),nn&&Ii(lt,Rt,e+2,T,X,se,$e,(0,o.db4)(Rt.consts,it),512)},\u0275\u0275repeaterTrackByIndex:function PC(e){return e},\u0275\u0275repeaterTrackByIdentity:function RC(e,t){return t},\u0275\u0275componentInstance:function AC(){return(0,o.OAn)()[o.b5C][o.SKP]},\u0275\u0275text:iv,\u0275\u0275textInterpolate:Td,\u0275\u0275textInterpolate1:_l,\u0275\u0275textInterpolate2:Md,\u0275\u0275textInterpolate3:Od,\u0275\u0275textInterpolate4:function _v(e,t,n,r,i,a,g,C,T){const X=(0,o.OAn)(),se=fv(X,e,t,n,r,i,a,g,C,T);return se!==to&&ks(X,(0,o._px)(),se),_v},\u0275\u0275textInterpolate5:function vv(e,t,n,r,i,a,g,C,T,X,se){const $e=(0,o.OAn)(),it=hv($e,e,t,n,r,i,a,g,C,T,X,se);return it!==to&&ks($e,(0,o._px)(),it),vv},\u0275\u0275textInterpolate6:function yv(e,t,n,r,i,a,g,C,T,X,se,$e,it){const lt=(0,o.OAn)(),Rt=pv(lt,e,t,n,r,i,a,g,C,T,X,se,$e,it);return Rt!==to&&ks(lt,(0,o._px)(),Rt),yv},\u0275\u0275textInterpolate7:function Ev(e,t,n,r,i,a,g,C,T,X,se,$e,it,lt,Rt){const nn=(0,o.OAn)(),xn=gv(nn,e,t,n,r,i,a,g,C,T,X,se,$e,it,lt,Rt);return xn!==to&&ks(nn,(0,o._px)(),xn),Ev},\u0275\u0275textInterpolate8:function bv(e,t,n,r,i,a,g,C,T,X,se,$e,it,lt,Rt,nn,xn){const $n=(0,o.OAn)(),sn=mv($n,e,t,n,r,i,a,g,C,T,X,se,$e,it,lt,Rt,nn,xn);return sn!==to&&ks($n,(0,o._px)(),sn),bv},\u0275\u0275textInterpolateV:function Dv(e){const t=(0,o.OAn)(),n=cv(t,e);return n!==to&&ks(t,(0,o._px)(),n),Dv},\u0275\u0275i18n:function TA(e,t,n){P_(e,t,n),R_()},\u0275\u0275i18nAttributes:function MA(e,t){const n=(0,o.klJ)(),r=(0,o.db4)(n.consts,t);!function dA(e,t,n){const i=(0,o.Mx4)().index,a=[];if(e.firstCreatePass&&null===e.data[t]){for(let g=0;g<n.length;g+=2){const C=n[g],T=n[g+1];if(""!==T){if(rA.test(T))throw new Error(`ICU expressions are not supported in attributes. Message: "${T}".`);Ya(a,T,i,C,fA(a),null)}}e.data[t]=a}}(n,e+o.Yw1,r)},\u0275\u0275i18nExp:function x_(e){return function JC(e){e&&(Xa|=1<<Math.min(qa,31)),qa++}(lo((0,o.OAn)(),(0,o.xbp)(),e)),x_},\u0275\u0275i18nStart:P_,\u0275\u0275i18nEnd:R_,\u0275\u0275i18nApply:function OA(e){!function YC(e,t,n){if(qa>0){const r=e.data[n];y_(e,t,Array.isArray(r)?r:r.update,(0,o.c$7)()-qa-1,Xa)}Xa=0,qa=0}((0,o.klJ)(),(0,o.OAn)(),e+o.Yw1)},\u0275\u0275i18nPostprocess:function PA(e,t={}){return function wA(e,t={}){let n=e;if(EA.test(e)){const r={},i=[0];n=n.replace(bA,(a,g,C)=>{const T=g||C,X=r[T]||[];if(X.length||(T.split("|").forEach(nn=>{const xn=nn.match(IA),$n=xn?parseInt(xn[1],10):0,sn=AA.test(nn);X.push([$n,sn,nn])}),r[T]=X),!X.length)throw new Error(`i18n postprocess: unmatched placeholder - ${T}`);const se=i[i.length-1];let $e=0;for(let nn=0;nn<X.length;nn++)if(X[nn][0]===se){$e=nn;break}const[it,lt,Rt]=X[$e];return lt?i.pop():se!==it&&i.push(it),X.splice($e,1),Rt})}return Object.keys(t).length&&(n=n.replace(DA,(r,i,a,g,C,T)=>t.hasOwnProperty(a)?`${i}${t[a]}${T}`:r),n=n.replace(SA,(r,i)=>t.hasOwnProperty(i)?t[i]:r),n=n.replace(CA,(r,i)=>{if(t.hasOwnProperty(i)){const a=t[i];if(!a.length)throw new Error(`i18n postprocess: unmatched ICU - ${r} with key: ${i}`);return a.shift()}return r})),n}(e,t)},\u0275\u0275resolveWindow:Hh,\u0275\u0275resolveDocument:zh,\u0275\u0275resolveBody:function Gh(e){return e.ownerDocument.body},\u0275\u0275setComponentScope:function CI(e,t,n){const r=e.\u0275cmp;r.directiveDefs=Wc(t,Jg),r.pipeDefs=Wc(n,o.oyA)},\u0275\u0275setNgModuleScope:function AI(e,t){return Le(()=>{const n=(0,o.WbQ)(e);n.declarations=vl(t.declarations||o.Mlv),n.imports=vl(t.imports||o.Mlv),n.exports=vl(t.exports||o.Mlv),t.bootstrap&&(n.bootstrap=vl(t.bootstrap)),$a.registerNgModule(e,t)})},\u0275\u0275registerNgModuleType:Gg,\u0275\u0275getComponentDepsFactory:function $I(e,t){return()=>{try{return $a.getComponentDependencies(e,t).dependencies}catch(n){throw console.error(`Computing dependencies in local compilation mode for the component "${e.name}" failed with the exception:`,n),n}}},\u0275setClassDebugInfo:function UI(e,t){const n=(0,o.xUg)(e);null!==n&&(n.debugInfo=t)},\u0275\u0275declareLet:function Av(e){const t=(0,o.klJ)(),n=(0,o.OAn)(),r=e+o.Yw1,i=bi(t,r,128,null,null);return(0,o.iMd)(i,!1),(0,o.M_e)(t,n,r,Cv),Av},\u0275\u0275storeLet:function aI(e){Mo("NgLet");const t=(0,o.klJ)(),n=(0,o.OAn)(),r=(0,o._px)();return(0,o.M_e)(t,n,r,e),e},\u0275\u0275readContextLet:function cI(e){const t=(0,o.VPL)(),n=(0,o.Hh6)(t,o.Yw1+e);if(n===Cv)throw new o.buA(314,!1);return n},\u0275\u0275attachSourceLocations:function lI(e,t){const n=(0,o.klJ)(),r=(0,o.OAn)(),i=r[o.GpT],a="data-ng-source-location";for(const[g,C,T,X]of t){(0,o.XRZ)(n,g+o.Yw1);const $e=(0,o.vaC)(g+o.Yw1,r);$e.hasAttribute(a)||i.setAttribute($e,a,`${e}@o:${C},l:${T},c:${X}`)}},\u0275\u0275interpolate:function uI(e){return lo((0,o.OAn)(),(0,o.xbp)(),e)?(0,o.eFE)(e):to},\u0275\u0275interpolate1:Iv,\u0275\u0275interpolate2:function dI(e,t,n,r,i=""){return uv((0,o.OAn)(),e,t,n,r,i)},\u0275\u0275interpolate3:function fI(e,t,n,r,i,a,g=""){return dv((0,o.OAn)(),e,t,n,r,i,a,g)},\u0275\u0275interpolate4:function hI(e,t,n,r,i,a,g,C,T=""){return fv((0,o.OAn)(),e,t,n,r,i,a,g,C,T)},\u0275\u0275interpolate5:function pI(e,t,n,r,i,a,g,C,T,X,se=""){return hv((0,o.OAn)(),e,t,n,r,i,a,g,C,T,X,se)},\u0275\u0275interpolate6:function gI(e,t,n,r,i,a,g,C,T,X,se,$e,it=""){return pv((0,o.OAn)(),e,t,n,r,i,a,g,C,T,X,se,$e,it)},\u0275\u0275interpolate7:function mI(e,t,n,r,i,a,g,C,T,X,se,$e,it,lt,Rt=""){return gv((0,o.OAn)(),e,t,n,r,i,a,g,C,T,X,se,$e,it,lt,Rt)},\u0275\u0275interpolate8:function _I(e,t,n,r,i,a,g,C,T,X,se,$e,it,lt,Rt,nn,xn=""){return mv((0,o.OAn)(),e,t,n,r,i,a,g,C,T,X,se,$e,it,lt,Rt,nn,xn)},\u0275\u0275interpolateV:function vI(e){return cv((0,o.OAn)(),e)},\u0275\u0275sanitizeHtml:function wy(e){const t=Da();return t?co(t.sanitize(Gi.HTML,e)||""):Zs(e,"HTML")?co(Ls(e)):function yy(e,t){let n=null;try{cc=cc||rc(e);let r=t?String(t):"";n=cc.getInertBodyElement(r);let i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=cc.getInertBodyElement(r)}while(r!==a);return Ht((new ho).sanitizeChildren(Ol(n)||n))}finally{if(n){const r=Ol(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}(kt(),(0,o.eFE)(e))},\u0275\u0275sanitizeStyle:function Ty(e){const t=Da();return t?t.sanitize(Gi.STYLE,e)||"":Zs(e,"Style")?Ls(e):(0,o.eFE)(e)},\u0275\u0275sanitizeResourceUrl:Wh,\u0275\u0275sanitizeScript:function My(e){const t=Da();if(t)return lr(t.sanitize(Gi.SCRIPT,e)||"");if(Zs(e,"Script"))return lr(Ls(e));throw new o.buA(905,!1)},\u0275\u0275validateAttribute:function Fy(e,t,n){const r=t.toLowerCase(),i=n.toLowerCase();if(!Ny[r]?.has(i))return e;const a=(0,o.CpD)();if(2!==a.type)return e;const g=(0,o.OAn)();throw"iframe"===r&&function Iy(e){const t=(0,o.OAn)();e.src="",e.srcdoc=Ht(""),ba(t[o.GpT],e)}((0,o.d31)(a,g)),new o.buA(-910,!1)},\u0275\u0275sanitizeUrl:xl,\u0275\u0275sanitizeUrlOrResourceUrl:Kh,\u0275\u0275trustConstantHtml:function Oy(e){return Ht(e[0])},\u0275\u0275trustConstantResourceUrl:function Py(e){return function dn(e){return gt()?.createScriptURL(e)||e}(e[0])},forwardRef:o.Rfq,resolveForwardRef:o.nl4,\u0275\u0275twoWayProperty:Pd,\u0275\u0275twoWayBindingSet:Sv,\u0275\u0275twoWayListener:Rd,\u0275\u0275replaceMetadata:function jI(e,t,n,r,i=null,a=null){const g=(0,o.xUg)(e);t.apply(null,[e,n,...r]);const{newDef:C,oldDef:T}=function VI(e,t){const n={...e};return{newDef:Object.assign(e,t,{directiveDefs:n.directiveDefs,pipeDefs:n.pipeDefs,setInput:n.setInput,type:n.type}),oldDef:n}}(g,(0,o.xUg)(e));if(e[o.CQl]=C,T.tView){const X=function Ke(){return Yr}().values();for(const se of X)(0,o.EFk)(se)&&null===se[o.f7T]&&yl(i,a,C,T,se)}},\u0275\u0275getReplaceMetadataURL:function BI(e,t,n){const r=`./@ng/component?c=${e}&t=${encodeURIComponent(t)}`;return new URL(r,n).href}};let _a=null;function GI(e){null!==_a&&(e.defaultEncapsulation!==_a.defaultEncapsulation||e.preserveWhitespaces!==_a.preserveWhitespaces)||(_a=e)}const nc=[];function Gv(e){return mu(e)?e.ngModule:e}const dw=we("NgModule",e=>e,void 0,0,(e,t)=>function JI(e,t={}){(function YI(e,t){const r=(0,o.Bqz)(t.declarations||o.Mlv);let i=null;Object.defineProperty(e,o.hmW,{configurable:!0,get:()=>(null===i&&(i=ae().compileNgModule(oi,`ng:///${e.name}/\u0275mod.js`,{type:e,bootstrap:(0,o.Bqz)(t.bootstrap||o.Mlv).map(o.nl4),declarations:r.map(o.nl4),imports:(0,o.Bqz)(t.imports||o.Mlv).map(o.nl4).map(Gv),exports:(0,o.Bqz)(t.exports||o.Mlv).map(o.nl4).map(Gv),schemas:t.schemas?(0,o.Bqz)(t.schemas):null,id:t.id||null}),i.schemas||(i.schemas=[])),i)});let a=null;Object.defineProperty(e,o.zSs,{get:()=>{if(null===a){const C=ae();a=C.compileFactory(oi,`ng:///${e.name}/\u0275fac.js`,{name:e.name,type:e,deps:be(e),target:C.FactoryTarget.NgModule,typeArgumentCount:0})}return a},configurable:!1});let g=null;Object.defineProperty(e,o.ONQ,{get:()=>{if(null===g){const C={name:e.name,type:e,providers:t.providers||o.Mlv,imports:[(t.imports||o.Mlv).map(o.nl4),(t.exports||o.Mlv).map(o.nl4)]};g=ae().compileInjector(oi,`ng:///${e.name}/\u0275inj.js`,C)}return g},configurable:!1})})(e,t),void 0!==t.id&&Gg(e,t.id),function qI(e,t){nc.push({moduleType:e,ngModule:t})}(e,t)}(e,t));class fw{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let hw=(()=>{class e{compileModuleSync(n){return new qg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),a=ws((0,o.phH)(n).declarations).reduce((g,C)=>{const T=(0,o.xUg)(C);return T&&g.push(new jc(T)),g},[]);return new fw(r,a)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const pw=new o.nKC("");let gw=(()=>{class e{zone=(0,o.WQX)(io);changeDetectionScheduler=(0,o.WQX)(o.hk6);applicationRef=(0,o.WQX)(Jc);applicationErrorHandler=(0,o.WQX)(o.ZTf);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const oy=new o.nKC("",{factory:()=>!1});function sy({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new io({...jd(),scheduleInRootZone:n}),[{provide:io,useFactory:e},{provide:o.Z63,multi:!0,useFactory:()=>{const r=(0,o.WQX)(gw,{optional:!0});return()=>r.initialize()}},{provide:o.Z63,multi:!0,useFactory:()=>{const r=(0,o.WQX)(mw);return()=>{r.initialize()}}},!0===t?{provide:o.Jy$,useValue:!0}:[],{provide:o.AQb,useValue:n??cp},{provide:o.ZTf,useFactory:()=>{const r=(0,o.WQX)(io),i=(0,o.WQX)(o.uvJ);let a;return g=>{r.runOutsideAngular(()=>{i.destroyed&&!a?setTimeout(()=>{throw g}):(a??=i.get(o.zcH),a.handleError(g))})}}}]}function jd(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}let mw=(()=>{class e{subscription=new Ce.yU;initialized=!1;zone=(0,o.WQX)(io);pendingTasks=(0,o.WQX)(o.rev);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{io.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{io.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cy=(()=>{class e{applicationErrorHandler=(0,o.WQX)(o.ZTf);appRef=(0,o.WQX)(Jc);taskService=(0,o.WQX)(o.rev);ngZone=(0,o.WQX)(io);zonelessEnabled=(0,o.WQX)(o.Evm);tracing=(0,o.WQX)(Aa,{optional:!0});disableScheduling=(0,o.WQX)(o.Jy$,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ce.yU;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(gc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&((0,o.WQX)(o.AQb,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Kl||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;let r=!1;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?up:lp;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(gc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,up(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const ly=new o.nKC("",{providedIn:"root",factory:()=>(0,o.WQX)(ly,{optional:!0,skipSelf:!0})||function _w(){return typeof $localize<"u"&&$localize.locale||_d}()}),vw=new o.nKC("",{providedIn:"root",factory:()=>"USD"})},3669(Wt,ut,b){"use strict";function s(o){return o}b.d(ut,{D:()=>s})},3726(Wt,ut,b){"use strict";b.d(ut,{R:()=>ie});var s=b(8750),o=b(1985),S=b(1397),Pe=b(7441),Ce=b(8071),k=b(6450);const Le=["addListener","removeListener"],Je=["addEventListener","removeEventListener"],me=["on","off"];function ie(v,_,D,L){if((0,Ce.T)(D)&&(L=D,D=void 0),L)return ie(v,_,D).pipe((0,k.I)(L));const[K,ae]=function m(v){return(0,Ce.T)(v.addEventListener)&&(0,Ce.T)(v.removeEventListener)}(v)?Je.map(B=>Z=>v[B](_,Z,D)):function l(v){return(0,Ce.T)(v.addListener)&&(0,Ce.T)(v.removeListener)}(v)?Le.map(we(v,_)):function p(v){return(0,Ce.T)(v.on)&&(0,Ce.T)(v.off)}(v)?me.map(we(v,_)):[];if(!K&&(0,Pe.X)(v))return(0,S.Z)(B=>ie(B,_,D))((0,s.Tg)(v));if(!K)throw new TypeError("Invalid event target");return new o.c(B=>{const Z=(...G)=>B.next(1<G.length?G:G[0]);return K(Z),()=>ae(Z)})}function we(v,_){return D=>L=>v[D](_,L)}},3827(Wt,ut,b){"use strict";b.d(ut,{B:()=>dt,F:()=>on,G:()=>Bt,O:()=>ht,a:()=>L,b:()=>K,c:()=>G,d:()=>Nt,e:()=>Ot,f:()=>Ae,g:()=>ye,h:()=>ot,i:()=>At,j:()=>fe,k:()=>_e,l:()=>ae,m:()=>B,n:()=>ie,o:()=>rt,q:()=>we,s:()=>Ut,t:()=>he});var s=b(467),o=b(9596),S=b(4674),Pe=b(9431),Ce=b(5705),k=b(6855),Le=b(6118),Je=b(8607);const me='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), ion-checkbox:not([tabindex^="-"]):not([hidden]):not([disabled]), ion-radio:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',ie=(ft,yt)=>{const Dt=ft.querySelector(me);l(Dt,yt??ft)},we=(ft,yt)=>{const Dt=Array.from(ft.querySelectorAll(me));l(Dt.length>0?Dt[Dt.length-1]:null,yt??ft)},l=(ft,yt)=>{let Dt=ft;const en=ft?.shadowRoot;if(en&&(Dt=en.querySelector(me)||ft),Dt){const Cn=Dt.closest("ion-radio-group");Cn?Cn.setFocus():(0,S.n)(Dt)}else yt.focus()};let p=0,m=0;const v=new WeakMap,_=ft=>{var yt;return!1!==ft.showBackdrop&&!((null!==(yt=ft.backdropBreakpoint)&&void 0!==yt?yt:0)>0)},D=ft=>({create:yt=>Re(ft,yt),dismiss:(yt,Dt,en)=>ze(document,yt,Dt,ft,en),getTop:()=>(0,s.A)(function*(){return rt(document,ft)})()}),L=D("ion-alert"),K=D("ion-action-sheet"),ae=D("ion-loading"),B=D("ion-modal"),G=D("ion-popover"),he=D("ion-toast"),fe=ft=>{typeof document<"u"&&nt(document);const yt=p++;ft.overlayIndex=yt},_e=ft=>(ft.hasAttribute("id")||(ft.id="ion-overlay-"+ ++m),ft.id),Re=(ft,yt)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(ft).then(()=>{const Dt=document.createElement(ft);return Dt.classList.add("overlay-hidden"),Object.assign(Dt,Object.assign(Object.assign({},yt),{hasController:!0})),Me(document).appendChild(Dt),new Promise(en=>(0,S.c)(Dt,en))}):Promise.resolve(),Ye=(ft,yt)=>{let Dt=ft;const en=ft?.shadowRoot;en&&(Dt=en.querySelector(me)||ft),Dt?(0,S.n)(Dt):yt.focus()},nt=ft=>{0===p&&(p=1,ft.addEventListener("focus",yt=>{((ft,yt)=>{const Dt=rt(yt,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),en=ft.target;Dt&&en&&!Dt.classList.contains(on)&&(Dt.shadowRoot?(()=>{if(Dt.contains(en))Dt.lastFocus=en;else if("ION-TOAST"===en.tagName)Ye(Dt.lastFocus,Dt);else{const wn=Dt.lastFocus;ie(Dt),wn===yt.activeElement&&we(Dt),Dt.lastFocus=yt.activeElement}})():(()=>{if(Dt===en)Dt.lastFocus=void 0;else if("ION-TOAST"===en.tagName)Ye(Dt.lastFocus,Dt);else{const wn=(0,S.g)(Dt);if(!wn.contains(en))return;const hn=wn.querySelector(".ion-overlay-wrapper");if(!hn)return;if(hn.contains(en)||en===wn.querySelector("ion-backdrop"))Dt.lastFocus=en;else{const Pt=Dt.lastFocus;ie(hn,Dt),Pt===yt.activeElement&&we(hn,Dt),Dt.lastFocus=yt.activeElement}}})())})(yt,ft)},!0),ft.addEventListener("ionBackButton",yt=>{const Dt=rt(ft);Dt?.backdropDismiss&&yt.detail.register(Pe.OVERLAY_BACK_BUTTON_PRIORITY,()=>{Dt.dismiss(void 0,dt)})}),(0,Pe.shouldUseCloseWatcher)()||ft.addEventListener("keydown",yt=>{if("Escape"===yt.key){const Dt=rt(ft);Dt?.backdropDismiss&&Dt.dismiss(void 0,dt)}}))},ze=(ft,yt,Dt,en,Cn)=>{const Vn=rt(ft,en,Cn);return Vn?Vn.dismiss(yt,Dt):Promise.reject("overlay does not exist")},xe=(ft,yt)=>((ft,yt)=>(void 0===yt&&(yt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(ft.querySelectorAll(yt)).filter(Dt=>Dt.overlayIndex>0)))(ft,yt).filter(Dt=>!(ft=>ft.classList.contains("overlay-hidden"))(Dt)),rt=(ft,yt,Dt)=>{const en=xe(ft,yt);return(void 0===Dt?en:en.filter(Cn=>Cn.id===Dt)).slice(-1)[0]},Ve=(ft=!1)=>{const Dt=Me(document).querySelector("ion-router-outlet, #ion-view-container-root");Dt&&(ft?Dt.setAttribute("aria-hidden","true"):Dt.removeAttribute("aria-hidden"))},Ae=function(){var ft=(0,s.A)(function*(yt,Dt,en,Cn,Vn){var wn,hn;if(yt.presented)return;"ION-TOAST"!==yt.el.tagName&&H(yt.el);const Pt=yt.el,Tt="ION-TOAST"!==Pt.tagName&&!1!==Pt.focusTrap&&_(Pt);if(yt.presented=!0,yt.willPresent.emit(),Tt){const or=Me(document).querySelector("ion-router-outlet, #ion-view-container-root");!!or&&or.contains(Pt)||Ve(!0),document.body.classList.add(Je.B)}null===(wn=yt.willPresentShorthand)||void 0===wn||wn.emit();const $t=(0,k.b)(yt),an=yt.enterAnimation?yt.enterAnimation:Ce.e.get(Dt,"ios"===$t?en:Cn);(yield He(yt,an,yt.el,Vn))&&(yt.didPresent.emit(),null===(hn=yt.didPresentShorthand)||void 0===hn||hn.emit()),yt.keyboardClose&&(null===document.activeElement||!yt.el.contains(document.activeElement))&&yt.el.focus(),yt.el.removeAttribute("aria-hidden"),yt.el.removeAttribute("inert")});return function(Dt,en,Cn,Vn,wn){return ft.apply(this,arguments)}}(),H=function(){var ft=(0,s.A)(function*(yt){let Dt=document.activeElement;if(!Dt)return;Dt.blur();const en=Dt?.shadowRoot;en&&(Dt=en.querySelector(me)||Dt),yield yt.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&Dt.focus()});return function(Dt){return ft.apply(this,arguments)}}(),ye=function(){var ft=(0,s.A)(function*(yt,Dt,en,Cn,Vn,wn,hn){var Pt,_n;if(!yt.presented)return!1;const $t=(void 0!==o.d?xe(o.d):[]).filter(or=>"ION-TOAST"!==or.tagName&&!1!==or.focusTrap&&_(or)),an=yt.el;"ION-TOAST"!==an.tagName&&!1!==an.focusTrap&&_(an)&&1===$t.length&&$t[0].id===an.id&&(Ve(!1),document.body.classList.remove(Je.B)),yt.presented=!1;try{yt.el.style.setProperty("pointer-events","none"),yt.willDismiss.emit({data:Dt,role:en}),null===(Pt=yt.willDismissShorthand)||void 0===Pt||Pt.emit({data:Dt,role:en});const or=(0,k.b)(yt),Zn=yt.leaveAnimation?yt.leaveAnimation:Ce.e.get(Cn,"ios"===or?Vn:wn);en!==Bt&&(yield He(yt,Zn,yt.el,hn)),yt.didDismiss.emit({data:Dt,role:en}),null===(_n=yt.didDismissShorthand)||void 0===_n||_n.emit({data:Dt,role:en}),(v.get(yt)||[]).forEach(ur=>ur.destroy()),v.delete(yt),yt.el.classList.add("overlay-hidden"),yt.el.style.removeProperty("pointer-events"),void 0!==yt.el.lastFocus&&(yt.el.lastFocus=void 0)}catch(or){(0,Ce.j)(`[${yt.el.tagName.toLowerCase()}] - `,or)}return yt.el.remove(),!0});return function(Dt,en,Cn,Vn,wn,hn,Pt){return ft.apply(this,arguments)}}(),Me=ft=>ft.querySelector("ion-app")||ft.body,He=function(){var ft=(0,s.A)(function*(yt,Dt,en,Cn){en.classList.remove("overlay-hidden");const wn=Dt(yt.el,Cn);(!yt.animated||!Ce.e.getBoolean("animated",!0))&&wn.duration(0),yt.keyboardClose&&wn.beforeAddWrite(()=>{const Pt=en.ownerDocument.activeElement;Pt?.matches("input,ion-input, ion-textarea")&&Pt.blur()});const hn=v.get(yt)||[];return v.set(yt,[...hn,wn]),yield wn.play(),!0});return function(Dt,en,Cn,Vn){return ft.apply(this,arguments)}}(),ot=(ft,yt)=>{let Dt;const en=new Promise(Cn=>Dt=Cn);return pt(ft,yt,Cn=>{Dt(Cn.detail)}),en},pt=(ft,yt,Dt)=>{const en=Cn=>{(0,S.m)(ft,yt,en),Dt(Cn)};(0,S.f)(ft,yt,en)},At=ft=>"cancel"===ft||ft===dt,vt=ft=>ft(),Ut=(ft,yt)=>{if("function"==typeof ft)return Ce.e.get("_zoneGate",vt)(()=>{try{return ft(yt)}catch(en){throw en}})},dt="backdrop",Bt="gesture",ht=39,Nt=ft=>{let Dt,yt=!1;const en=(0,Le.C)(),Cn=(hn=!1)=>{if(Dt&&!hn)return{delegate:Dt,inline:yt};const{el:Pt,hasController:_n,delegate:Tt}=ft;return yt=null!==Pt.parentNode&&!_n,Dt=yt?Tt||en:Tt,{inline:yt,delegate:Dt}};return{attachViewToDom:function(){var hn=(0,s.A)(function*(Pt){const{delegate:_n}=Cn(!0);if(_n)return yield _n.attachViewToDom(ft.el,Pt);const{hasController:Tt}=ft;if(Tt&&void 0!==Pt)throw new Error("framework delegate is missing");return null});return function(_n){return hn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:hn}=Cn();hn&&void 0!==ft.el&&hn.removeViewFromDom(ft.el.parentElement,ft.el)}}},Ot=()=>{let ft;const yt=()=>{ft&&(ft(),ft=void 0)};return{addClickListener:(en,Cn)=>{yt();const Vn=void 0!==Cn?document.getElementById(Cn):null;Vn?ft=((hn,Pt)=>{const _n=()=>{Pt.present()};return hn.addEventListener("click",_n),()=>{hn.removeEventListener("click",_n)}})(Vn,en):(0,Ce.f)(`[${en.tagName.toLowerCase()}] - A trigger element with the ID "${Cn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,en)},removeClickListener:yt}},on="ion-disable-focus-trap"},3878(Wt,ut,b){var s,S;Wt=b.nmd(Wt),void 0!==(S="function"==typeof(s=function(){"use strict";var Pe={},Ce=null;function k(ge){if(Wt&&Wt.exports)try{return b(6528).randomBytes(ge)}catch{}try{var nt;return(self.crypto||self.msCrypto).getRandomValues(nt=new Uint32Array(ge)),Array.prototype.slice.call(nt)}catch{}if(!Ce)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Ce(ge)}try{k(1)}catch{}function Je(ge,nt){for(var ze=0,Fe=0,xe=0,rt=ge.length;xe<rt;++xe)ge.charCodeAt(xe)===nt.charCodeAt(xe)?++ze:++Fe;return!(ze<0)&&0===Fe}Ce=null,Pe.setRandomFallback=function(ge){Ce=ge},Pe.genSaltSync=function(ge,nt){if("number"!=typeof(ge=ge||L))throw Error("Illegal arguments: "+typeof ge+", "+typeof nt);ge<4?ge=4:ge>31&&(ge=31);var ze=[];return ze.push("$2a$"),ge<10&&ze.push("0"),ze.push(ge.toString()),ze.push("$"),ze.push(m(k(D),D)),ze.join("")},Pe.genSalt=function(ge,nt,ze){if("function"==typeof nt&&(ze=nt,nt=void 0),"function"==typeof ge&&(ze=ge,ge=void 0),typeof ge>"u")ge=L;else if("number"!=typeof ge)throw Error("illegal arguments: "+typeof ge);function Fe(xe){me(function(){try{xe(null,Pe.genSaltSync(ge))}catch(rt){xe(rt)}})}if(!ze)return new Promise(function(xe,rt){Fe(function(Ve,Ae){Ve?rt(Ve):xe(Ae)})});if("function"!=typeof ze)throw Error("Illegal callback: "+typeof ze);Fe(ze)},Pe.hashSync=function(ge,nt){if(typeof nt>"u"&&(nt=L),"number"==typeof nt&&(nt=Pe.genSaltSync(nt)),"string"!=typeof ge||"string"!=typeof nt)throw Error("Illegal arguments: "+typeof ge+", "+typeof nt);return Ye(ge,nt)},Pe.hash=function(ge,nt,ze,Fe){function xe(rt){"string"==typeof ge&&"number"==typeof nt?Pe.genSalt(nt,function(Ve,Ae){Ye(ge,Ae,rt,Fe)}):"string"==typeof ge&&"string"==typeof nt?Ye(ge,nt,rt,Fe):me(rt.bind(this,Error("Illegal arguments: "+typeof ge+", "+typeof nt)))}if(!ze)return new Promise(function(rt,Ve){xe(function(Ae,H){Ae?Ve(Ae):rt(H)})});if("function"!=typeof ze)throw Error("Illegal callback: "+typeof ze);xe(ze)},Pe.compareSync=function(ge,nt){if("string"!=typeof ge||"string"!=typeof nt)throw Error("Illegal arguments: "+typeof ge+", "+typeof nt);return 60===nt.length&&Je(Pe.hashSync(ge,nt.substr(0,nt.length-31)),nt)},Pe.compare=function(ge,nt,ze,Fe){function xe(rt){"string"==typeof ge&&"string"==typeof nt?60===nt.length?Pe.hash(ge,nt.substr(0,29),function(Ve,Ae){Ve?rt(Ve):rt(null,Je(Ae,nt))},Fe):me(rt.bind(this,null,!1)):me(rt.bind(this,Error("Illegal arguments: "+typeof ge+", "+typeof nt)))}if(!ze)return new Promise(function(rt,Ve){xe(function(Ae,H){Ae?Ve(Ae):rt(H)})});if("function"!=typeof ze)throw Error("Illegal callback: "+typeof ze);xe(ze)},Pe.getRounds=function(ge){if("string"!=typeof ge)throw Error("Illegal arguments: "+typeof ge);return parseInt(ge.split("$")[2],10)},Pe.getSalt=function(ge){if("string"!=typeof ge)throw Error("Illegal arguments: "+typeof ge);if(60!==ge.length)throw Error("Illegal hash length: "+ge.length+" != 60");return ge.substring(0,29)};var me=typeof process<"u"&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout;var we="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],p=String.fromCharCode;function m(ge,nt){var xe,rt,ze=0,Fe=[];if(nt<=0||nt>ge.length)throw Error("Illegal len: "+nt);for(;ze<nt;){if(xe=255&ge[ze++],Fe.push(we[xe>>2&63]),xe=(3&xe)<<4,ze>=nt){Fe.push(we[63&xe]);break}if(rt=255&ge[ze++],Fe.push(we[63&(xe|=rt>>4&15)]),xe=(15&rt)<<2,ze>=nt){Fe.push(we[63&xe]);break}rt=255&ge[ze++],Fe.push(we[63&(xe|=rt>>6&3)]),Fe.push(we[63&rt])}return Fe.join("")}function v(ge,nt){var Ve,Ae,H,Me,He,ze=0,Fe=ge.length,xe=0,rt=[];if(nt<=0)throw Error("Illegal len: "+nt);for(;ze<Fe-1&&xe<nt&&(Ve=(He=ge.charCodeAt(ze++))<l.length?l[He]:-1,Ae=(He=ge.charCodeAt(ze++))<l.length?l[He]:-1,!(-1==Ve||-1==Ae||(Me=Ve<<2>>>0,Me|=(48&Ae)>>4,rt.push(p(Me)),++xe>=nt||ze>=Fe)||(He=ge.charCodeAt(ze++),H=He<l.length?l[He]:-1,-1==H)||(Me=(15&Ae)<<4>>>0,Me|=(60&H)>>2,rt.push(p(Me)),++xe>=nt||ze>=Fe)));)He=ge.charCodeAt(ze++),Me=(3&H)<<6>>>0,rt.push(p(Me|=He<l.length?l[He]:-1)),++xe;var ot=[];for(ze=0;ze<xe;ze++)ot.push(rt[ze].charCodeAt(0));return ot}var ge,_=ge={MAX_CODEPOINT:1114111,encodeUTF8:function(nt,ze){var Fe=null;for("number"==typeof nt&&(Fe=nt,nt=function(){return null});null!==Fe||null!==(Fe=nt());)Fe<128?ze(127&Fe):Fe<2048?(ze(Fe>>6&31|192),ze(63&Fe|128)):Fe<65536?(ze(Fe>>12&15|224),ze(Fe>>6&63|128),ze(63&Fe|128)):(ze(Fe>>18&7|240),ze(Fe>>12&63|128),ze(Fe>>6&63|128),ze(63&Fe|128)),Fe=null},decodeUTF8:function(nt,ze){for(var Fe,xe,rt,Ve,Ae=function(H){H=H.slice(0,H.indexOf(null));var ye=Error(H.toString());throw ye.name="TruncatedError",ye.bytes=H,ye};null!==(Fe=nt());)if(128&Fe)if(192==(224&Fe))null===(xe=nt())&&Ae([Fe,xe]),ze((31&Fe)<<6|63&xe);else if(224==(240&Fe))(null===(xe=nt())||null===(rt=nt()))&&Ae([Fe,xe,rt]),ze((15&Fe)<<12|(63&xe)<<6|63&rt);else{if(240!=(248&Fe))throw RangeError("Illegal starting byte: "+Fe);(null===(xe=nt())||null===(rt=nt())||null===(Ve=nt()))&&Ae([Fe,xe,rt,Ve]),ze((7&Fe)<<18|(63&xe)<<12|(63&rt)<<6|63&Ve)}else ze(Fe)},UTF16toUTF8:function(nt,ze){for(var Fe,xe=null;null!==(Fe=null!==xe?xe:nt());)Fe>=55296&&Fe<=57343&&null!==(xe=nt())&&xe>=56320&&xe<=57343?(ze(1024*(Fe-55296)+xe-56320+65536),xe=null):ze(Fe);null!==xe&&ze(xe)},UTF8toUTF16:function(nt,ze){var Fe=null;for("number"==typeof nt&&(Fe=nt,nt=function(){return null});null!==Fe||null!==(Fe=nt());)Fe<=65535?ze(Fe):(ze(55296+((Fe-=65536)>>10)),ze(Fe%1024+56320)),Fe=null},encodeUTF16toUTF8:function(nt,ze){ge.UTF16toUTF8(nt,function(Fe){ge.encodeUTF8(Fe,ze)})},decodeUTF8toUTF16:function(nt,ze){ge.decodeUTF8(nt,function(Fe){ge.UTF8toUTF16(Fe,ze)})},calculateCodePoint:function(nt){return nt<128?1:nt<2048?2:nt<65536?3:4},calculateUTF8:function(nt){for(var ze,Fe=0;null!==(ze=nt());)Fe+=ge.calculateCodePoint(ze);return Fe},calculateUTF16asUTF8:function(nt){var ze=0,Fe=0;return ge.UTF16toUTF8(nt,function(xe){++ze,Fe+=ge.calculateCodePoint(xe)}),[ze,Fe]}};Date.now=Date.now||function(){return+new Date};var D=16,L=10,K=16,ae=100,B=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Z=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],G=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function he(ge,nt,ze,Fe){var xe,rt=ge[nt],Ve=ge[nt+1];return xe=Fe[(rt^=ze[0])>>>24],xe+=Fe[256|rt>>16&255],xe^=Fe[512|rt>>8&255],xe=Fe[(Ve^=(xe+=Fe[768|255&rt])^ze[1])>>>24],xe+=Fe[256|Ve>>16&255],xe^=Fe[512|Ve>>8&255],xe=Fe[(rt^=(xe+=Fe[768|255&Ve])^ze[2])>>>24],xe+=Fe[256|rt>>16&255],xe^=Fe[512|rt>>8&255],xe=Fe[(Ve^=(xe+=Fe[768|255&rt])^ze[3])>>>24],xe+=Fe[256|Ve>>16&255],xe^=Fe[512|Ve>>8&255],xe=Fe[(rt^=(xe+=Fe[768|255&Ve])^ze[4])>>>24],xe+=Fe[256|rt>>16&255],xe^=Fe[512|rt>>8&255],xe=Fe[(Ve^=(xe+=Fe[768|255&rt])^ze[5])>>>24],xe+=Fe[256|Ve>>16&255],xe^=Fe[512|Ve>>8&255],xe=Fe[(rt^=(xe+=Fe[768|255&Ve])^ze[6])>>>24],xe+=Fe[256|rt>>16&255],xe^=Fe[512|rt>>8&255],xe=Fe[(Ve^=(xe+=Fe[768|255&rt])^ze[7])>>>24],xe+=Fe[256|Ve>>16&255],xe^=Fe[512|Ve>>8&255],xe=Fe[(rt^=(xe+=Fe[768|255&Ve])^ze[8])>>>24],xe+=Fe[256|rt>>16&255],xe^=Fe[512|rt>>8&255],xe=Fe[(Ve^=(xe+=Fe[768|255&rt])^ze[9])>>>24],xe+=Fe[256|Ve>>16&255],xe^=Fe[512|Ve>>8&255],xe=Fe[(rt^=(xe+=Fe[768|255&Ve])^ze[10])>>>24],xe+=Fe[256|rt>>16&255],xe^=Fe[512|rt>>8&255],xe=Fe[(Ve^=(xe+=Fe[768|255&rt])^ze[11])>>>24],xe+=Fe[256|Ve>>16&255],xe^=Fe[512|Ve>>8&255],xe=Fe[(rt^=(xe+=Fe[768|255&Ve])^ze[12])>>>24],xe+=Fe[256|rt>>16&255],xe^=Fe[512|rt>>8&255],xe=Fe[(Ve^=(xe+=Fe[768|255&rt])^ze[13])>>>24],xe+=Fe[256|Ve>>16&255],xe^=Fe[512|Ve>>8&255],xe=Fe[(rt^=(xe+=Fe[768|255&Ve])^ze[14])>>>24],xe+=Fe[256|rt>>16&255],xe^=Fe[512|rt>>8&255],xe=Fe[(Ve^=(xe+=Fe[768|255&rt])^ze[15])>>>24],xe+=Fe[256|Ve>>16&255],xe^=Fe[512|Ve>>8&255],rt^=(xe+=Fe[768|255&Ve])^ze[16],ge[nt]=Ve^ze[K+1],ge[nt+1]=rt,ge}function fe(ge,nt){for(var ze=0,Fe=0;ze<4;++ze)Fe=Fe<<8|255&ge[nt],nt=(nt+1)%ge.length;return{key:Fe,offp:nt}}function _e(ge,nt,ze){for(var Ae,Fe=0,xe=[0,0],rt=nt.length,Ve=ze.length,H=0;H<rt;H++)Fe=(Ae=fe(ge,Fe)).offp,nt[H]=nt[H]^Ae.key;for(H=0;H<rt;H+=2)xe=he(xe,0,nt,ze),nt[H]=xe[0],nt[H+1]=xe[1];for(H=0;H<Ve;H+=2)xe=he(xe,0,nt,ze),ze[H]=xe[0],ze[H+1]=xe[1]}function ve(ge,nt,ze,Fe,xe){var Ae,rt=G.slice(),Ve=rt.length;if(ze<4||ze>31){if(Ae=Error("Illegal number of rounds (4-31): "+ze),Fe)return void me(Fe.bind(this,Ae));throw Ae}if(nt.length!==D){if(Ae=Error("Illegal salt length: "+nt.length+" != "+D),Fe)return void me(Fe.bind(this,Ae));throw Ae}ze=1<<ze>>>0;var H,ye,He,Me=0;function ot(){if(xe&&xe(Me/ze),!(Me<ze)){for(Me=0;Me<64;Me++)for(He=0;He<Ve>>1;He++)he(rt,He<<1,H,ye);var vt=[];for(Me=0;Me<Ve;Me++)vt.push((rt[Me]>>24&255)>>>0),vt.push((rt[Me]>>16&255)>>>0),vt.push((rt[Me]>>8&255)>>>0),vt.push((255&rt[Me])>>>0);return Fe?void Fe(null,vt):vt}for(var At=Date.now();Me<ze&&(Me+=1,_e(ge,H,ye),_e(nt,H,ye),!(Date.now()-At>ae)););Fe&&me(ot)}if(Int32Array?(H=new Int32Array(B),ye=new Int32Array(Z)):(H=B.slice(),ye=Z.slice()),function Re(ge,nt,ze,Fe){for(var H,xe=0,rt=[0,0],Ve=ze.length,Ae=Fe.length,ye=0;ye<Ve;ye++)xe=(H=fe(nt,xe)).offp,ze[ye]=ze[ye]^H.key;for(xe=0,ye=0;ye<Ve;ye+=2)xe=(H=fe(ge,xe)).offp,rt[0]^=H.key,xe=(H=fe(ge,xe)).offp,rt[1]^=H.key,rt=he(rt,0,ze,Fe),ze[ye]=rt[0],ze[ye+1]=rt[1];for(ye=0;ye<Ae;ye+=2)xe=(H=fe(ge,xe)).offp,rt[0]^=H.key,xe=(H=fe(ge,xe)).offp,rt[1]^=H.key,rt=he(rt,0,ze,Fe),Fe[ye]=rt[0],Fe[ye+1]=rt[1]}(nt,ge,H,ye),typeof Fe<"u")ot();else for(var pt;;)if(typeof(pt=ot())<"u")return pt||[]}function Ye(ge,nt,ze,Fe){var xe,rt,Ve;if("string"!=typeof ge||"string"!=typeof nt){if(xe=Error("Invalid string / salt: Not a string"),ze)return void me(ze.bind(this,xe));throw xe}if("$"!==nt.charAt(0)||"2"!==nt.charAt(1)){if(xe=Error("Invalid salt version: "+nt.substring(0,2)),ze)return void me(ze.bind(this,xe));throw xe}if("$"===nt.charAt(2))rt="\0",Ve=3;else{if("a"!==(rt=nt.charAt(2))&&"b"!==rt&&"y"!==rt||"$"!==nt.charAt(3)){if(xe=Error("Invalid salt revision: "+nt.substring(2,4)),ze)return void me(ze.bind(this,xe));throw xe}Ve=4}if(nt.charAt(Ve+2)>"$"){if(xe=Error("Missing salt rounds"),ze)return void me(ze.bind(this,xe));throw xe}var ye=10*parseInt(nt.substring(Ve,Ve+1),10)+parseInt(nt.substring(Ve+1,Ve+2),10),Me=nt.substring(Ve+3,Ve+25),He=function ie(ge){var nt=[],ze=0;return _.encodeUTF16toUTF8(function(){return ze>=ge.length?null:ge.charCodeAt(ze++)},function(Fe){nt.push(Fe)}),nt}(ge+=rt>="a"?"\0":""),ot=v(Me,D);function pt(At){var vt=[];return vt.push("$2"),rt>="a"&&vt.push(rt),vt.push("$"),ye<10&&vt.push("0"),vt.push(ye.toString()),vt.push("$"),vt.push(m(ot,ot.length)),vt.push(m(At,4*G.length-1)),vt.join("")}if(typeof ze>"u")return pt(ve(He,ot,ye));ve(He,ot,ye,function(At,vt){At?ze(At,null):ze(null,pt(vt))},Fe)}return Pe.encodeBase64=m,Pe.decodeBase64=v,Pe})?s.apply(ut,[]):s)&&(Wt.exports=S)},4341(Wt,ut,b){"use strict";b.d(ut,{Zm:()=>B,me:()=>fe,v8:()=>uo,ok:()=>yn,l_:()=>Fn,JD:()=>Ao,j4:()=>Pn,$R:()=>Wn,YN:()=>yo,zX:()=>Or,VZ:()=>qr,cz:()=>ve,kq:()=>K,vO:()=>hn,BC:()=>$t,cb:()=>an,cV:()=>Hr,vS:()=>qt,Q0:()=>Nn,R_:()=>ct,X1:()=>Vr,YS:()=>Zr,k0:()=>nt,qT:()=>rn});var s=b(3664),o=b(2615),S=b(9295),Pe=b(7705),Ce=b(7303),k=b(6648),Le=b(1985),Je=b(3073),me=b(8750),ie=b(9326),we=b(4360),l=b(6450),p=b(8496),v=b(1413),_=b(6354);let D=(()=>{class ${_renderer;_elementRef;onChange=R=>{};onTouched=()=>{};constructor(R,ue){this._renderer=R,this._elementRef=ue}setProperty(R,ue){this._renderer.setProperty(this._elementRef.nativeElement,R,ue)}registerOnTouched(R){this.onTouched=R}registerOnChange(R){this.onChange=R}setDisabledState(R){this.setProperty("disabled",R)}static \u0275fac=function(ue){return new(ue||$)(s.rXU(s.sFG),s.rXU(s.aKT))};static \u0275dir=s.FsC({type:$})}return $})(),L=(()=>{class $ extends D{static \u0275fac=(()=>{let R;return function(Ge){return(R||(R=s.xGo($)))(Ge||$)}})();static \u0275dir=s.FsC({type:$,features:[s.Vt3]})}return $})();const K=new o.nKC(""),ae={provide:K,useExisting:(0,o.Rfq)(()=>B),multi:!0};let B=(()=>{class $ extends L{writeValue(R){this.setProperty("checked",R)}static \u0275fac=(()=>{let R;return function(Ge){return(R||(R=s.xGo($)))(Ge||$)}})();static \u0275dir=s.FsC({type:$,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(ue,Ge){1&ue&&s.bIt("change",function(En){return Ge.onChange(En.target.checked)})("blur",function(){return Ge.onTouched()})},standalone:!1,features:[s.Jv_([ae]),s.Vt3]})}return $})();const Z={provide:K,useExisting:(0,o.Rfq)(()=>fe),multi:!0},he=new o.nKC("");let fe=(()=>{class $ extends D{_compositionMode;_composing=!1;constructor(R,ue,Ge){super(R,ue),this._compositionMode=Ge,null==this._compositionMode&&(this._compositionMode=!function G(){const $=(0,Ce.rb)()?(0,Ce.rb)().getUserAgent():"";return/android (\d+)/.test($.toLowerCase())}())}writeValue(R){this.setProperty("value",R??"")}_handleInput(R){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(R)}_compositionStart(){this._composing=!0}_compositionEnd(R){this._composing=!1,this._compositionMode&&this.onChange(R)}static \u0275fac=function(ue){return new(ue||$)(s.rXU(s.sFG),s.rXU(s.aKT),s.rXU(he,8))};static \u0275dir=s.FsC({type:$,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(ue,Ge){1&ue&&s.bIt("input",function(En){return Ge._handleInput(En.target.value)})("blur",function(){return Ge.onTouched()})("compositionstart",function(){return Ge._compositionStart()})("compositionend",function(En){return Ge._compositionEnd(En.target.value)})},standalone:!1,features:[s.Jv_([Z]),s.Vt3]})}return $})();function _e($){return null==$||0===Re($)}function Re($){return null==$?null:Array.isArray($)||"string"==typeof $?$.length:$ instanceof Set?$.size:null}const ve=new o.nKC(""),Ye=new o.nKC(""),ge=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class nt{static min(z){return ze(z)}static max(z){return Fe(z)}static required(z){return xe(z)}static requiredTrue(z){return function rt($){return!0===$.value?null:{required:!0}}(z)}static email(z){return function Ve($){return _e($.value)||ge.test($.value)?null:{email:!0}}(z)}static minLength(z){return function Ae($){return z=>{const R=z.value?.length??Re(z.value);return null===R||0===R?null:R<$?{minlength:{requiredLength:$,actualLength:R}}:null}}(z)}static maxLength(z){return function H($){return z=>{const R=z.value?.length??Re(z.value);return null!==R&&R>$?{maxlength:{requiredLength:$,actualLength:R}}:null}}(z)}static pattern(z){return ye(z)}static nullValidator(z){return null}static compose(z){return dt(z)}static composeAsync(z){return ht(z)}}function ze($){return z=>{if(null==z.value||null==$)return null;const R=parseFloat(z.value);return!isNaN(R)&&R<$?{min:{min:$,actual:z.value}}:null}}function Fe($){return z=>{if(null==z.value||null==$)return null;const R=parseFloat(z.value);return!isNaN(R)&&R>$?{max:{max:$,actual:z.value}}:null}}function xe($){return _e($.value)?{required:!0}:null}function ye($){if(!$)return Me;let z,R;return"string"==typeof $?(R="","^"!==$.charAt(0)&&(R+="^"),R+=$,"$"!==$.charAt($.length-1)&&(R+="$"),z=new RegExp(R)):(R=$.toString(),z=$),ue=>{if(_e(ue.value))return null;const Ge=ue.value;return z.test(Ge)?null:{pattern:{requiredPattern:R,actualValue:Ge}}}}function Me($){return null}function He($){return null!=$}function ot($){return(0,s.yLl)($)?(0,k.H)($):$}function pt($){let z={};return $.forEach(R=>{z=null!=R?{...z,...R}:z}),0===Object.keys(z).length?null:z}function At($,z){return z.map(R=>R($))}function Ut($){return $.map(z=>function vt($){return!$.validate}(z)?z:R=>z.validate(R))}function dt($){if(!$)return null;const z=$.filter(He);return 0==z.length?null:function(R){return pt(At(R,z))}}function Bt($){return null!=$?dt(Ut($)):null}function ht($){if(!$)return null;const z=$.filter(He);return 0==z.length?null:function(R){return function m(...$){const z=(0,ie.ms)($),{args:R,keys:ue}=(0,Je.D)($),Ge=new Le.c(un=>{const{length:En}=R;if(!En)return void un.complete();const Qr=new Array(En);let Eo=En,fo=En;for(let wo=0;wo<En;wo++){let qo=!1;(0,me.Tg)(R[wo]).subscribe((0,we._)(un,No=>{qo||(qo=!0,fo--),Qr[wo]=No},()=>Eo--,void 0,()=>{(!Eo||!qo)&&(fo||un.next(ue?(0,p.e)(ue,Qr):Qr),un.complete())}))}});return z?Ge.pipe((0,l.I)(z)):Ge}(At(R,z).map(ot)).pipe((0,_.T)(pt))}}function Nt($){return null!=$?ht(Ut($)):null}function Ot($,z){return null===$?[z]:Array.isArray($)?[...$,z]:[$,z]}function on($){return $._rawValidators}function ft($){return $._rawAsyncValidators}function yt($){return $?Array.isArray($)?$:[$]:[]}function Dt($,z){return Array.isArray($)?$.includes(z):$===z}function en($,z){const R=yt(z);return yt($).forEach(Ge=>{Dt(R,Ge)||R.push(Ge)}),R}function Cn($,z){return yt(z).filter(R=>!Dt($,R))}class Vn{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(z){this._rawValidators=z||[],this._composedValidatorFn=Bt(this._rawValidators)}_setAsyncValidators(z){this._rawAsyncValidators=z||[],this._composedAsyncValidatorFn=Nt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(z){this._onDestroyCallbacks.push(z)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(z=>z()),this._onDestroyCallbacks=[]}reset(z=void 0){this.control&&this.control.reset(z)}hasError(z,R){return!!this.control&&this.control.hasError(z,R)}getError(z,R){return this.control?this.control.getError(z,R):null}}class wn extends Vn{name;get formDirective(){return null}get path(){return null}}class hn extends Vn{_parent=null;name=null;valueAccessor=null}class Pt{_cd;constructor(z){this._cd=z}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let $t=(()=>{class $ extends Pt{constructor(R){super(R)}static \u0275fac=function(ue){return new(ue||$)(s.rXU(hn,2))};static \u0275dir=s.FsC({type:$,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(ue,Ge){2&ue&&s.AVh("ng-untouched",Ge.isUntouched)("ng-touched",Ge.isTouched)("ng-pristine",Ge.isPristine)("ng-dirty",Ge.isDirty)("ng-valid",Ge.isValid)("ng-invalid",Ge.isInvalid)("ng-pending",Ge.isPending)},standalone:!1,features:[s.Vt3]})}return $})(),an=(()=>{class $ extends Pt{constructor(R){super(R)}static \u0275fac=function(ue){return new(ue||$)(s.rXU(wn,10))};static \u0275dir=s.FsC({type:$,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(ue,Ge){2&ue&&s.AVh("ng-untouched",Ge.isUntouched)("ng-touched",Ge.isTouched)("ng-pristine",Ge.isPristine)("ng-dirty",Ge.isDirty)("ng-valid",Ge.isValid)("ng-invalid",Ge.isInvalid)("ng-pending",Ge.isPending)("ng-submitted",Ge.isSubmitted)},standalone:!1,features:[s.Vt3]})}return $})();const tr="VALID",bn="INVALID",Xe="PENDING",Ze="DISABLED";class It{}class _t extends It{value;source;constructor(z,R){super(),this.value=z,this.source=R}}class Ft extends It{pristine;source;constructor(z,R){super(),this.pristine=z,this.source=R}}class Vt extends It{touched;source;constructor(z,R){super(),this.touched=z,this.source=R}}class Gt extends It{status;source;constructor(z,R){super(),this.status=z,this.source=R}}class cn extends It{source;constructor(z){super(),this.source=z}}class ln extends It{source;constructor(z){super(),this.source=z}}function fn($){return(Kn($)?$.validators:$)||null}function Tn($,z){return(Kn(z)?z.asyncValidators:$)||null}function Kn($){return null!=$&&!Array.isArray($)&&"object"==typeof $}function Tr($,z,R){const ue=$.controls;if(!(z?Object.keys(ue):ue).length)throw new o.buA(1e3,"");if(!ue[R])throw new o.buA(1001,"")}function mr($,z,R){$._forEachChild((ue,Ge)=>{if(void 0===R[Ge])throw new o.buA(1002,"")})}class Mn{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(z,R){this._assignValidators(z),this._assignAsyncValidators(R)}get validator(){return this._composedValidatorFn}set validator(z){this._rawValidators=this._composedValidatorFn=z}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(z){this._rawAsyncValidators=this._composedAsyncValidatorFn=z}get parent(){return this._parent}get status(){return(0,S.O8)(this.statusReactive)}set status(z){(0,S.O8)(()=>this.statusReactive.set(z))}_status=(0,S.EW)(()=>this.statusReactive());statusReactive=(0,o.vPA)(void 0);get valid(){return this.status===tr}get invalid(){return this.status===bn}get pending(){return this.status==Xe}get disabled(){return this.status===Ze}get enabled(){return this.status!==Ze}errors;get pristine(){return(0,S.O8)(this.pristineReactive)}set pristine(z){(0,S.O8)(()=>this.pristineReactive.set(z))}_pristine=(0,S.EW)(()=>this.pristineReactive());pristineReactive=(0,o.vPA)(!0);get dirty(){return!this.pristine}get touched(){return(0,S.O8)(this.touchedReactive)}set touched(z){(0,S.O8)(()=>this.touchedReactive.set(z))}_touched=(0,S.EW)(()=>this.touchedReactive());touchedReactive=(0,o.vPA)(!1);get untouched(){return!this.touched}_events=new v.B;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(z){this._assignValidators(z)}setAsyncValidators(z){this._assignAsyncValidators(z)}addValidators(z){this.setValidators(en(z,this._rawValidators))}addAsyncValidators(z){this.setAsyncValidators(en(z,this._rawAsyncValidators))}removeValidators(z){this.setValidators(Cn(z,this._rawValidators))}removeAsyncValidators(z){this.setAsyncValidators(Cn(z,this._rawAsyncValidators))}hasValidator(z){return Dt(this._rawValidators,z)}hasAsyncValidator(z){return Dt(this._rawAsyncValidators,z)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(z={}){const R=!1===this.touched;this.touched=!0;const ue=z.sourceControl??this;this._parent&&!z.onlySelf&&this._parent.markAsTouched({...z,sourceControl:ue}),R&&!1!==z.emitEvent&&this._events.next(new Vt(!0,ue))}markAllAsDirty(z={}){this.markAsDirty({onlySelf:!0,emitEvent:z.emitEvent,sourceControl:this}),this._forEachChild(R=>R.markAllAsDirty(z))}markAllAsTouched(z={}){this.markAsTouched({onlySelf:!0,emitEvent:z.emitEvent,sourceControl:this}),this._forEachChild(R=>R.markAllAsTouched(z))}markAsUntouched(z={}){const R=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const ue=z.sourceControl??this;this._forEachChild(Ge=>{Ge.markAsUntouched({onlySelf:!0,emitEvent:z.emitEvent,sourceControl:ue})}),this._parent&&!z.onlySelf&&this._parent._updateTouched(z,ue),R&&!1!==z.emitEvent&&this._events.next(new Vt(!1,ue))}markAsDirty(z={}){const R=!0===this.pristine;this.pristine=!1;const ue=z.sourceControl??this;this._parent&&!z.onlySelf&&this._parent.markAsDirty({...z,sourceControl:ue}),R&&!1!==z.emitEvent&&this._events.next(new Ft(!1,ue))}markAsPristine(z={}){const R=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const ue=z.sourceControl??this;this._forEachChild(Ge=>{Ge.markAsPristine({onlySelf:!0,emitEvent:z.emitEvent})}),this._parent&&!z.onlySelf&&this._parent._updatePristine(z,ue),R&&!1!==z.emitEvent&&this._events.next(new Ft(!0,ue))}markAsPending(z={}){this.status=Xe;const R=z.sourceControl??this;!1!==z.emitEvent&&(this._events.next(new Gt(this.status,R)),this.statusChanges.emit(this.status)),this._parent&&!z.onlySelf&&this._parent.markAsPending({...z,sourceControl:R})}disable(z={}){const R=this._parentMarkedDirty(z.onlySelf);this.status=Ze,this.errors=null,this._forEachChild(Ge=>{Ge.disable({...z,onlySelf:!0})}),this._updateValue();const ue=z.sourceControl??this;!1!==z.emitEvent&&(this._events.next(new _t(this.value,ue)),this._events.next(new Gt(this.status,ue)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...z,skipPristineCheck:R},this),this._onDisabledChange.forEach(Ge=>Ge(!0))}enable(z={}){const R=this._parentMarkedDirty(z.onlySelf);this.status=tr,this._forEachChild(ue=>{ue.enable({...z,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:z.emitEvent}),this._updateAncestors({...z,skipPristineCheck:R},this),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(z,R){this._parent&&!z.onlySelf&&(this._parent.updateValueAndValidity(z),z.skipPristineCheck||this._parent._updatePristine({},R),this._parent._updateTouched({},R))}setParent(z){this._parent=z}getRawValue(){return this.value}updateValueAndValidity(z={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const ue=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tr||this.status===Xe)&&this._runAsyncValidator(ue,z.emitEvent)}const R=z.sourceControl??this;!1!==z.emitEvent&&(this._events.next(new _t(this.value,R)),this._events.next(new Gt(this.status,R)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!z.onlySelf&&this._parent.updateValueAndValidity({...z,sourceControl:R})}_updateTreeValidity(z={emitEvent:!0}){this._forEachChild(R=>R._updateTreeValidity(z)),this.updateValueAndValidity({onlySelf:!0,emitEvent:z.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ze:tr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(z,R){if(this.asyncValidator){this.status=Xe,this._hasOwnPendingAsyncValidator={emitEvent:!1!==R,shouldHaveEmitted:!1!==z};const ue=ot(this.asyncValidator(this));this._asyncValidationSubscription=ue.subscribe(Ge=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(Ge,{emitEvent:R,shouldHaveEmitted:z})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const z=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,z}return!1}setErrors(z,R={}){this.errors=z,this._updateControlsErrors(!1!==R.emitEvent,this,R.shouldHaveEmitted)}get(z){let R=z;return null==R||(Array.isArray(R)||(R=R.split(".")),0===R.length)?null:R.reduce((ue,Ge)=>ue&&ue._find(Ge),this)}getError(z,R){const ue=R?this.get(R):this;return ue&&ue.errors?ue.errors[z]:null}hasError(z,R){return!!this.getError(z,R)}get root(){let z=this;for(;z._parent;)z=z._parent;return z}_updateControlsErrors(z,R,ue){this.status=this._calculateStatus(),z&&this.statusChanges.emit(this.status),(z||ue)&&this._events.next(new Gt(this.status,R)),this._parent&&this._parent._updateControlsErrors(z,R,ue)}_initObservables(){this.valueChanges=new s.bkB,this.statusChanges=new s.bkB}_calculateStatus(){return this._allControlsDisabled()?Ze:this.errors?bn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xe)?Xe:this._anyControlsHaveStatus(bn)?bn:tr}_anyControlsHaveStatus(z){return this._anyControls(R=>R.status===z)}_anyControlsDirty(){return this._anyControls(z=>z.dirty)}_anyControlsTouched(){return this._anyControls(z=>z.touched)}_updatePristine(z,R){const ue=!this._anyControlsDirty(),Ge=this.pristine!==ue;this.pristine=ue,this._parent&&!z.onlySelf&&this._parent._updatePristine(z,R),Ge&&this._events.next(new Ft(this.pristine,R))}_updateTouched(z={},R){this.touched=this._anyControlsTouched(),this._events.next(new Vt(this.touched,R)),this._parent&&!z.onlySelf&&this._parent._updateTouched(z,R)}_onDisabledChange=[];_registerOnCollectionChange(z){this._onCollectionChange=z}_setUpdateStrategy(z){Kn(z)&&null!=z.updateOn&&(this._updateOn=z.updateOn)}_parentMarkedDirty(z){return!z&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(z){return null}_assignValidators(z){this._rawValidators=Array.isArray(z)?z.slice():z,this._composedValidatorFn=function zn($){return Array.isArray($)?Bt($):$||null}(this._rawValidators)}_assignAsyncValidators(z){this._rawAsyncValidators=Array.isArray(z)?z.slice():z,this._composedAsyncValidatorFn=function sr($){return Array.isArray($)?Nt($):$||null}(this._rawAsyncValidators)}}class gn extends Mn{constructor(z,R,ue){super(fn(R),Tn(ue,R)),this.controls=z,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(z,R){return this.controls[z]?this.controls[z]:(this.controls[z]=R,R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange),R)}addControl(z,R,ue={}){this.registerControl(z,R),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(z,R={}){this.controls[z]&&this.controls[z]._registerOnCollectionChange(()=>{}),delete this.controls[z],this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}setControl(z,R,ue={}){this.controls[z]&&this.controls[z]._registerOnCollectionChange(()=>{}),delete this.controls[z],R&&this.registerControl(z,R),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(z){return this.controls.hasOwnProperty(z)&&this.controls[z].enabled}setValue(z,R={}){mr(this,0,z),Object.keys(z).forEach(ue=>{Tr(this,!0,ue),this.controls[ue].setValue(z[ue],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(z,R={}){null!=z&&(Object.keys(z).forEach(ue=>{const Ge=this.controls[ue];Ge&&Ge.patchValue(z[ue],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(z={},R={}){this._forEachChild((ue,Ge)=>{ue.reset(z?z[Ge]:null,{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R,this),this._updateTouched(R,this),this.updateValueAndValidity(R),!1!==R?.emitEvent&&this._events.next(new ln(this))}getRawValue(){return this._reduceChildren({},(z,R,ue)=>(z[ue]=R.getRawValue(),z))}_syncPendingControls(){let z=this._reduceChildren(!1,(R,ue)=>!!ue._syncPendingControls()||R);return z&&this.updateValueAndValidity({onlySelf:!0}),z}_forEachChild(z){Object.keys(this.controls).forEach(R=>{const ue=this.controls[R];ue&&z(ue,R)})}_setUpControls(){this._forEachChild(z=>{z.setParent(this),z._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(z){for(const[R,ue]of Object.entries(this.controls))if(this.contains(R)&&z(ue))return!0;return!1}_reduceValue(){return this._reduceChildren({},(R,ue,Ge)=>((ue.enabled||this.disabled)&&(R[Ge]=ue.value),R))}_reduceChildren(z,R){let ue=z;return this._forEachChild((Ge,un)=>{ue=R(ue,Ge,un)}),ue}_allControlsDisabled(){for(const z of Object.keys(this.controls))if(this.controls[z].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(z){return this.controls.hasOwnProperty(z)?this.controls[z]:null}}class st extends gn{}const be=new o.nKC("",{providedIn:"root",factory:()=>We}),We="always";function Se($,z){return[...z.path,$]}function et($,z,R=We){On($,z),z.valueAccessor.writeValue($.value),($.disabled||"always"===R)&&z.valueAccessor.setDisabledState?.($.disabled),function ir($,z){z.valueAccessor.registerOnChange(R=>{$._pendingValue=R,$._pendingChange=!0,$._pendingDirty=!0,"change"===$.updateOn&&Ur($,z)})}($,z),function Qn($,z){const R=(ue,Ge)=>{z.valueAccessor.writeValue(ue),Ge&&z.viewToModelUpdate(ue)};$.registerOnChange(R),z._registerOnDestroy(()=>{$._unregisterOnChange(R)})}($,z),function Xr($,z){z.valueAccessor.registerOnTouched(()=>{$._pendingTouched=!0,"blur"===$.updateOn&&$._pendingChange&&Ur($,z),"submit"!==$.updateOn&&$.markAsTouched()})}($,z),function vn($,z){if(z.valueAccessor.setDisabledState){const R=ue=>{z.valueAccessor.setDisabledState(ue)};$.registerOnDisabledChange(R),z._registerOnDestroy(()=>{$._unregisterOnDisabledChange(R)})}}($,z)}function St($,z,R=!0){const ue=()=>{};z.valueAccessor&&(z.valueAccessor.registerOnChange(ue),z.valueAccessor.registerOnTouched(ue)),Rn($,z),$&&(z._invokeOnDestroyCallbacks(),$._registerOnCollectionChange(()=>{}))}function Xt($,z){$.forEach(R=>{R.registerOnValidatorChange&&R.registerOnValidatorChange(z)})}function On($,z){const R=on($);null!==z.validator?$.setValidators(Ot(R,z.validator)):"function"==typeof R&&$.setValidators([R]);const ue=ft($);null!==z.asyncValidator?$.setAsyncValidators(Ot(ue,z.asyncValidator)):"function"==typeof ue&&$.setAsyncValidators([ue]);const Ge=()=>$.updateValueAndValidity();Xt(z._rawValidators,Ge),Xt(z._rawAsyncValidators,Ge)}function Rn($,z){let R=!1;if(null!==$){if(null!==z.validator){const Ge=on($);if(Array.isArray(Ge)&&Ge.length>0){const un=Ge.filter(En=>En!==z.validator);un.length!==Ge.length&&(R=!0,$.setValidators(un))}}if(null!==z.asyncValidator){const Ge=ft($);if(Array.isArray(Ge)&&Ge.length>0){const un=Ge.filter(En=>En!==z.asyncValidator);un.length!==Ge.length&&(R=!0,$.setAsyncValidators(un))}}}const ue=()=>{};return Xt(z._rawValidators,ue),Xt(z._rawAsyncValidators,ue),R}function Ur($,z){$._pendingDirty&&$.markAsDirty(),$.setValue($._pendingValue,{emitModelToViewChange:!1}),z.viewToModelUpdate($._pendingValue),$._pendingChange=!1}function Ln($,z){On($,z)}function xr($,z){if(!$.hasOwnProperty("model"))return!1;const R=$.model;return!!R.isFirstChange()||!Object.is(z,R.currentValue)}function Wr($,z){$._syncPendingControls(),z.forEach(R=>{const ue=R.control;"submit"===ue.updateOn&&ue._pendingChange&&(R.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}function kr($,z){if(!z)return null;let R,ue,Ge;return Array.isArray(z),z.forEach(un=>{un.constructor===fe?R=un:function Fr($){return Object.getPrototypeOf($.constructor)===L}(un)?ue=un:Ge=un}),Ge||ue||R||null}const Lr={provide:wn,useExisting:(0,o.Rfq)(()=>Hr)},Kr=Promise.resolve();let Hr=(()=>{class $ extends wn{callSetDisabledState;get submitted(){return(0,S.O8)(this.submittedReactive)}_submitted=(0,S.EW)(()=>this.submittedReactive());submittedReactive=(0,o.vPA)(!1);_directives=new Set;form;ngSubmit=new s.bkB;options;constructor(R,ue,Ge){super(),this.callSetDisabledState=Ge,this.form=new gn({},Bt(R),Nt(ue))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(R){Kr.then(()=>{const ue=this._findContainer(R.path);R.control=ue.registerControl(R.name,R.control),et(R.control,R,this.callSetDisabledState),R.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(R)})}getControl(R){return this.form.get(R.path)}removeControl(R){Kr.then(()=>{const ue=this._findContainer(R.path);ue&&ue.removeControl(R.name),this._directives.delete(R)})}addFormGroup(R){Kr.then(()=>{const ue=this._findContainer(R.path),Ge=new gn({});Ln(Ge,R),ue.registerControl(R.name,Ge),Ge.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(R){Kr.then(()=>{const ue=this._findContainer(R.path);ue&&ue.removeControl(R.name)})}getFormGroup(R){return this.form.get(R.path)}updateModel(R,ue){Kr.then(()=>{this.form.get(R.path).setValue(ue)})}setValue(R){this.control.setValue(R)}onSubmit(R){return this.submittedReactive.set(!0),Wr(this.form,this._directives),this.ngSubmit.emit(R),this.form._events.next(new cn(this.control)),"dialog"===R?.target?.method}onReset(){this.resetForm()}resetForm(R=void 0){this.form.reset(R),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(R){return R.pop(),R.length?this.form.get(R):this.form}static \u0275fac=function(ue){return new(ue||$)(s.rXU(ve,10),s.rXU(Ye,10),s.rXU(be,8))};static \u0275dir=s.FsC({type:$,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(ue,Ge){1&ue&&s.bIt("submit",function(En){return Ge.onSubmit(En)})("reset",function(){return Ge.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[s.Jv_([Lr]),s.Vt3]})}return $})();function zr($,z){const R=$.indexOf(z);R>-1&&$.splice(R,1)}function Ne($){return"object"==typeof $&&null!==$&&2===Object.keys($).length&&"value"in $&&"disabled"in $}const Ke=class extends Mn{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(z=null,R,ue){super(fn(R),Tn(ue,R)),this._applyFormState(z),this._setUpdateStrategy(R),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kn(R)&&(R.nonNullable||R.initialValueIsDefault)&&(this.defaultValue=Ne(z)?z.value:z)}setValue(z,R={}){this.value=this._pendingValue=z,this._onChange.length&&!1!==R.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==R.emitViewToModelChange)),this.updateValueAndValidity(R)}patchValue(z,R={}){this.setValue(z,R)}reset(z=this.defaultValue,R={}){this._applyFormState(z),this.markAsPristine(R),this.markAsUntouched(R),this.setValue(this.value,R),this._pendingChange=!1,!1!==R?.emitEvent&&this._events.next(new ln(this))}_updateValue(){}_anyControls(z){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(z){this._onChange.push(z)}_unregisterOnChange(z){zr(this._onChange,z)}registerOnDisabledChange(z){this._onDisabledChange.push(z)}_unregisterOnDisabledChange(z){zr(this._onDisabledChange,z)}_forEachChild(z){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(z){Ne(z)?(this.value=this._pendingValue=z.value,z.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=z}};let ee=(()=>{class $ extends wn{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Se(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let R;return function(Ge){return(R||(R=s.xGo($)))(Ge||$)}})();static \u0275dir=s.FsC({type:$,standalone:!1,features:[s.Vt3]})}return $})();const Qe={provide:hn,useExisting:(0,o.Rfq)(()=>qt)},bt=Promise.resolve();let qt=(()=>{class $ extends hn{_changeDetectorRef;callSetDisabledState;control=new Ke;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new s.bkB;constructor(R,ue,Ge,un,En,Qr){super(),this._changeDetectorRef=En,this.callSetDisabledState=Qr,this._parent=R,this._setValidators(ue),this._setAsyncValidators(Ge),this.valueAccessor=kr(0,un)}ngOnChanges(R){if(this._checkForErrors(),!this._registered||"name"in R){if(this._registered&&(this._checkName(),this.formDirective)){const ue=R.name.previousValue;this.formDirective.removeControl({name:ue,path:this._getPath(ue)})}this._setUpControl()}"isDisabled"in R&&this._updateDisabled(R),xr(R,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){et(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(R){bt.then(()=>{this.control.setValue(R,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(R){const ue=R.isDisabled.currentValue,Ge=0!==ue&&(0,Pe.L39)(ue);bt.then(()=>{Ge&&!this.control.disabled?this.control.disable():!Ge&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(R){return this._parent?Se(R,this._parent):[R]}static \u0275fac=function(ue){return new(ue||$)(s.rXU(wn,9),s.rXU(ve,10),s.rXU(Ye,10),s.rXU(K,10),s.rXU(Pe.gRc,8),s.rXU(be,8))};static \u0275dir=s.FsC({type:$,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[s.Jv_([Qe]),s.Vt3,s.OA$]})}return $})(),rn=(()=>{class ${static \u0275fac=function(ue){return new(ue||$)};static \u0275dir=s.FsC({type:$,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return $})();const Kt={provide:K,useExisting:(0,o.Rfq)(()=>Nn),multi:!0};let Nn=(()=>{class $ extends L{writeValue(R){this.setProperty("value",R??"")}registerOnChange(R){this.onChange=ue=>{R(""==ue?null:parseFloat(ue))}}static \u0275fac=(()=>{let R;return function(Ge){return(R||(R=s.xGo($)))(Ge||$)}})();static \u0275dir=s.FsC({type:$,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(ue,Ge){1&ue&&s.bIt("input",function(En){return Ge.onChange(En.target.value)})("blur",function(){return Ge.onTouched()})},standalone:!1,features:[s.Jv_([Kt]),s.Vt3]})}return $})();const x=new o.nKC(""),Te={provide:hn,useExisting:(0,o.Rfq)(()=>Fn)};let Fn=(()=>{class $ extends hn{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(R){}model;update=new s.bkB;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(R,ue,Ge,un,En){super(),this._ngModelWarningConfig=un,this.callSetDisabledState=En,this._setValidators(R),this._setAsyncValidators(ue),this.valueAccessor=kr(0,Ge)}ngOnChanges(R){if(this._isControlChanged(R)){const ue=R.form.previousValue;ue&&St(ue,this,!1),et(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}xr(R,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&St(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}_isControlChanged(R){return R.hasOwnProperty("form")}static \u0275fac=function(ue){return new(ue||$)(s.rXU(ve,10),s.rXU(Ye,10),s.rXU(K,10),s.rXU(x,8),s.rXU(be,8))};static \u0275dir=s.FsC({type:$,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[s.Jv_([Te]),s.Vt3,s.OA$]})}return $})();const Yt={provide:wn,useExisting:(0,o.Rfq)(()=>Pn)};let Pn=(()=>{class $ extends wn{callSetDisabledState;get submitted(){return(0,S.O8)(this._submittedReactive)}set submitted(R){this._submittedReactive.set(R)}_submitted=(0,S.EW)(()=>this._submittedReactive());_submittedReactive=(0,o.vPA)(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new s.bkB;constructor(R,ue,Ge){super(),this.callSetDisabledState=Ge,this._setValidators(R),this._setAsyncValidators(ue)}ngOnChanges(R){R.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(R){const ue=this.form.get(R.path);return et(ue,R,this.callSetDisabledState),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(R),ue}getControl(R){return this.form.get(R.path)}removeControl(R){St(R.control||null,R,!1),function Dr($,z){const R=$.indexOf(z);R>-1&&$.splice(R,1)}(this.directives,R)}addFormGroup(R){this._setUpFormContainer(R)}removeFormGroup(R){this._cleanUpFormContainer(R)}getFormGroup(R){return this.form.get(R.path)}addFormArray(R){this._setUpFormContainer(R)}removeFormArray(R){this._cleanUpFormContainer(R)}getFormArray(R){return this.form.get(R.path)}updateModel(R,ue){this.form.get(R.path).setValue(ue)}onSubmit(R){return this._submittedReactive.set(!0),Wr(this.form,this.directives),this.ngSubmit.emit(R),this.form._events.next(new cn(this.control)),"dialog"===R?.target?.method}onReset(){this.resetForm()}resetForm(R=void 0,ue={}){this.form.reset(R,ue),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(R=>{const ue=R.control,Ge=this.form.get(R.path);ue!==Ge&&(St(ue||null,R),($=>$ instanceof Ke)(Ge)&&(et(Ge,R,this.callSetDisabledState),R.control=Ge))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(R){const ue=this.form.get(R.path);Ln(ue,R),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(R){if(this.form){const ue=this.form.get(R.path);ue&&function Gn($,z){return Rn($,z)}(ue,R)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){On(this.form,this),this._oldForm&&Rn(this._oldForm,this)}static \u0275fac=function(ue){return new(ue||$)(s.rXU(ve,10),s.rXU(Ye,10),s.rXU(be,8))};static \u0275dir=s.FsC({type:$,selectors:[["","formGroup",""]],hostBindings:function(ue,Ge){1&ue&&s.bIt("submit",function(En){return Ge.onSubmit(En)})("reset",function(){return Ge.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[s.Jv_([Yt]),s.Vt3,s.OA$]})}return $})();const Xn={provide:wn,useExisting:(0,o.Rfq)(()=>Wn)};let Wn=(()=>{class $ extends ee{name=null;constructor(R,ue,Ge){super(),this._parent=R,this._setValidators(ue),this._setAsyncValidators(Ge)}_checkParentType(){go(this._parent)}static \u0275fac=function(ue){return new(ue||$)(s.rXU(wn,13),s.rXU(ve,10),s.rXU(Ye,10))};static \u0275dir=s.FsC({type:$,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[s.Jv_([Xn]),s.Vt3]})}return $})();const Pr={provide:wn,useExisting:(0,o.Rfq)(()=>uo)};let uo=(()=>{class $ extends wn{_parent;name=null;constructor(R,ue,Ge){super(),this._parent=R,this._setValidators(ue),this._setAsyncValidators(Ge)}ngOnInit(){go(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Se(null==this.name?this.name:this.name.toString(),this._parent)}static \u0275fac=function(ue){return new(ue||$)(s.rXU(wn,13),s.rXU(ve,10),s.rXU(Ye,10))};static \u0275dir=s.FsC({type:$,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[s.Jv_([Pr]),s.Vt3]})}return $})();function go($){return!($ instanceof Wn||$ instanceof Pn||$ instanceof uo)}const ts={provide:hn,useExisting:(0,o.Rfq)(()=>Ao)};let Ao=(()=>{class $ extends hn{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(R){}model;update=new s.bkB;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(R,ue,Ge,un,En){super(),this._ngModelWarningConfig=En,this._parent=R,this._setValidators(ue),this._setAsyncValidators(Ge),this.valueAccessor=kr(0,un)}ngOnChanges(R){this._added||this._setUpControl(),xr(R,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}get path(){return Se(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(ue){return new(ue||$)(s.rXU(wn,13),s.rXU(ve,10),s.rXU(Ye,10),s.rXU(K,10),s.rXU(x,8))};static \u0275dir=s.FsC({type:$,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[s.Jv_([ts]),s.Vt3,s.OA$]})}return $})();function Yn($){return"number"==typeof $?$:parseFloat($)}let kn=(()=>{class ${_validator=Me;_onChange;_enabled;ngOnChanges(R){if(this.inputName in R){const ue=this.normalizeInput(R[this.inputName].currentValue);this._enabled=this.enabled(ue),this._validator=this._enabled?this.createValidator(ue):Me,this._onChange&&this._onChange()}}validate(R){return this._validator(R)}registerOnValidatorChange(R){this._onChange=R}enabled(R){return null!=R}static \u0275fac=function(ue){return new(ue||$)};static \u0275dir=s.FsC({type:$,features:[s.OA$]})}return $})();const Mr={provide:ve,useExisting:(0,o.Rfq)(()=>Or),multi:!0};let Or=(()=>{class $ extends kn{max;inputName="max";normalizeInput=R=>Yn(R);createValidator=R=>Fe(R);static \u0275fac=(()=>{let R;return function(Ge){return(R||(R=s.xGo($)))(Ge||$)}})();static \u0275dir=s.FsC({type:$,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(ue,Ge){2&ue&&s.BMQ("max",Ge._enabled?Ge.max:null)},inputs:{max:"max"},standalone:!1,features:[s.Jv_([Mr]),s.Vt3]})}return $})();const _r={provide:ve,useExisting:(0,o.Rfq)(()=>qr),multi:!0};let qr=(()=>{class $ extends kn{min;inputName="min";normalizeInput=R=>Yn(R);createValidator=R=>ze(R);static \u0275fac=(()=>{let R;return function(Ge){return(R||(R=s.xGo($)))(Ge||$)}})();static \u0275dir=s.FsC({type:$,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(ue,Ge){2&ue&&s.BMQ("min",Ge._enabled?Ge.min:null)},inputs:{min:"min"},standalone:!1,features:[s.Jv_([_r]),s.Vt3]})}return $})();const Rr={provide:ve,useExisting:(0,o.Rfq)(()=>Zr),multi:!0};let Zr=(()=>{class $ extends kn{required;inputName="required";normalizeInput=Pe.L39;createValidator=R=>xe;enabled(R){return R}static \u0275fac=(()=>{let R;return function(Ge){return(R||(R=s.xGo($)))(Ge||$)}})();static \u0275dir=s.FsC({type:$,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(ue,Ge){2&ue&&s.BMQ("required",Ge._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[s.Jv_([Rr]),s.Vt3]})}return $})();const at={provide:ve,useExisting:(0,o.Rfq)(()=>ct),multi:!0};let ct=(()=>{class $ extends kn{pattern;inputName="pattern";normalizeInput=R=>R;createValidator=R=>ye(R);static \u0275fac=(()=>{let R;return function(Ge){return(R||(R=s.xGo($)))(Ge||$)}})();static \u0275dir=s.FsC({type:$,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(ue,Ge){2&ue&&s.BMQ("pattern",Ge._enabled?Ge.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[s.Jv_([at]),s.Vt3]})}return $})(),Ct=(()=>{class ${static \u0275fac=function(ue){return new(ue||$)};static \u0275mod=s.$C({type:$});static \u0275inj=o.G2t({})}return $})();class Lt extends Mn{constructor(z,R,ue){super(fn(R),Tn(ue,R)),this.controls=z,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(z){return this.controls[this._adjustIndex(z)]}push(z,R={}){Array.isArray(z)?z.forEach(ue=>{this.controls.push(ue),this._registerControl(ue)}):(this.controls.push(z),this._registerControl(z)),this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}insert(z,R,ue={}){this.controls.splice(z,0,R),this._registerControl(R),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(z,R={}){let ue=this._adjustIndex(z);ue<0&&(ue=0),this.controls[ue]&&this.controls[ue]._registerOnCollectionChange(()=>{}),this.controls.splice(ue,1),this.updateValueAndValidity({emitEvent:R.emitEvent})}setControl(z,R,ue={}){let Ge=this._adjustIndex(z);Ge<0&&(Ge=0),this.controls[Ge]&&this.controls[Ge]._registerOnCollectionChange(()=>{}),this.controls.splice(Ge,1),R&&(this.controls.splice(Ge,0,R),this._registerControl(R)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(z,R={}){mr(this,0,z),z.forEach((ue,Ge)=>{Tr(this,!1,Ge),this.at(Ge).setValue(ue,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(z,R={}){null!=z&&(z.forEach((ue,Ge)=>{this.at(Ge)&&this.at(Ge).patchValue(ue,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(z=[],R={}){this._forEachChild((ue,Ge)=>{ue.reset(z[Ge],{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R,this),this._updateTouched(R,this),this.updateValueAndValidity(R),!1!==R?.emitEvent&&this._events.next(new ln(this))}getRawValue(){return this.controls.map(z=>z.getRawValue())}clear(z={}){this.controls.length<1||(this._forEachChild(R=>R._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:z.emitEvent}))}_adjustIndex(z){return z<0?z+this.length:z}_syncPendingControls(){let z=this.controls.reduce((R,ue)=>!!ue._syncPendingControls()||R,!1);return z&&this.updateValueAndValidity({onlySelf:!0}),z}_forEachChild(z){this.controls.forEach((R,ue)=>{z(R,ue)})}_updateValue(){this.value=this.controls.filter(z=>z.enabled||this.disabled).map(z=>z.value)}_anyControls(z){return this.controls.some(R=>R.enabled&&z(R))}_setUpControls(){this._forEachChild(z=>this._registerControl(z))}_allControlsDisabled(){for(const z of this.controls)if(z.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(z){z.setParent(this),z._registerOnCollectionChange(this._onCollectionChange)}_find(z){return this.at(z)??null}}function In($){return!!$&&(void 0!==$.asyncValidators||void 0!==$.validators||void 0!==$.updateOn)}let yn=(()=>{class ${useNonNullable=!1;get nonNullable(){const R=new $;return R.useNonNullable=!0,R}group(R,ue=null){const Ge=this._reduceControls(R);let un={};return In(ue)?un=ue:null!==ue&&(un.validators=ue.validator,un.asyncValidators=ue.asyncValidator),new gn(Ge,un)}record(R,ue=null){const Ge=this._reduceControls(R);return new st(Ge,ue)}control(R,ue,Ge){let un={};return this.useNonNullable?(In(ue)?un=ue:(un.validators=ue,un.asyncValidators=Ge),new Ke(R,{...un,nonNullable:!0})):new Ke(R,ue,Ge)}array(R,ue,Ge){const un=R.map(En=>this._createControl(En));return new Lt(un,ue,Ge)}_reduceControls(R){const ue={};return Object.keys(R).forEach(Ge=>{ue[Ge]=this._createControl(R[Ge])}),ue}_createControl(R){return R instanceof Ke||R instanceof Mn?R:Array.isArray(R)?this.control(R[0],R.length>1?R[1]:null,R.length>2?R[2]:null):this.control(R)}static \u0275fac=function(ue){return new(ue||$)};static \u0275prov=o.jDH({token:$,factory:$.\u0275fac,providedIn:"root"})}return $})(),yo=(()=>{class ${static withConfig(R){return{ngModule:$,providers:[{provide:be,useValue:R.callSetDisabledState??We}]}}static \u0275fac=function(ue){return new(ue||$)};static \u0275mod=s.$C({type:$});static \u0275inj=o.G2t({imports:[Ct]})}return $})(),Vr=(()=>{class ${static withConfig(R){return{ngModule:$,providers:[{provide:x,useValue:R.warnOnNgModelWithFormControl??"always"},{provide:be,useValue:R.callSetDisabledState??We}]}}static \u0275fac=function(ue){return new(ue||$)};static \u0275mod=s.$C({type:$});static \u0275inj=o.G2t({imports:[Ct]})}return $})()},4356(Wt,ut,b){"use strict";b.d(ut,{h:()=>ie});var s=b(467),o=b(2084),S=b(4412),Pe=b(5312),Ce=b(2615),k=b(5029),Le=b(918),Je=b(3205),me=b(8863);let ie=(()=>{var we;class l{constructor(m,v,_,D){this.supabaseService=m,this.sharedDataService=v,this.auth=_,this.monitoringLog=D,this.SPECIES_TABLE="custom_species",this.LOCAL_SPECIES_FILE="local_custom_species.json",this.SYNC_TIMESTAMP_FILE="species_last_sync.json",this.PENDING_REQUESTS_FILE="pending_species_requests.json",this.MAX_RETRY_ATTEMPTS=10,this.RETRY_DELAYS=[5e3,15e3,3e4,6e4,3e5,6e5,18e5,36e5,72e5,144e5],this.speciesSubject=new S.t([]),this.species$=this.speciesSubject.asObservable(),this.pendingRequests=[],console.log("\u{1f33f} SpeciesSyncService: Initializing..."),this.initializeSpecies(),this.loadPendingRequests(),window.addEventListener("online",()=>{console.log("\u{1f33f} SpeciesSyncService: ONLINE event detected - triggering sync"),this.syncWithServer().catch(L=>console.error("\u{1f33f} SpeciesSyncService: sync failed:",L)),this.processPendingRequests().catch(L=>console.error("\u{1f33f} SpeciesSyncService: Failed to process pending requests:",L))}),setInterval(()=>{this.syncWithServer().catch(L=>console.error("\u{1f33f} SpeciesSyncService: Periodic sync failed:",L))},3e5),setInterval(()=>{this.processPendingRequests().catch(L=>console.error("\u{1f33f} SpeciesSyncService: Failed to process pending requests:",L))},6e4)}getClient(){return this.supabaseService.getClient()}initializeSpecies(){var m=this;return(0,s.A)(function*(){try{const v=yield m.loadLocalSpecies();0===v.length?yield m.syncWithServer():m.speciesSubject.next(v)}catch(v){console.error("\u{1f33f} SpeciesSyncService: Error initializing species:",v)}})()}loadLocalSpecies(){var m=this;return(0,s.A)(function*(){try{return(yield m.sharedDataService.readJsonFile(m.LOCAL_SPECIES_FILE))||[]}catch(v){return console.error("\u{1f33f} SpeciesSyncService: Error loading local species:",v),[]}})()}saveLocalSpecies(m){var v=this;return(0,s.A)(function*(){try{yield v.sharedDataService.writeJsonFile(v.LOCAL_SPECIES_FILE,m)}catch(_){console.error("\u{1f33f} SpeciesSyncService: Error saving local species:",_)}})()}formatTimestamp(){const m=new Date;return`${String(m.getDate()).padStart(2,"0")}${String(m.getMonth()+1).padStart(2,"0")}${m.getFullYear()}_${String(m.getHours()).padStart(2,"0")}${String(m.getMinutes()).padStart(2,"0")}${String(m.getSeconds()).padStart(2,"0")}`}uploadSpeciesPhoto(m,v,_){var D=this;return(0,s.A)(function*(){try{const L=m.name.split(".").pop(),K=(v||"new_species").trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""),ae=new Date,B=`${String(ae.getDate()).padStart(2,"0")}${String(ae.getMonth()+1).padStart(2,"0")}${ae.getFullYear()}`,G=`species-photos/${K}_photo${_}_${B}.${L}`,{error:he}=yield D.getClient().storage.from("new-species-images").upload(G,m);if(he)throw he;const{data:{publicUrl:fe}}=D.getClient().storage.from("new-species-images").getPublicUrl(G);return console.log("\u{1f33f} SpeciesSyncService: Photo uploaded:",fe),fe}catch(L){throw console.error("\u{1f33f} SpeciesSyncService: Error uploading photo:",L),L}})()}addNewSpecies(m){var v=this;return(0,s.A)(function*(){const _=v.auth.getCurrentUser(),D=_?.level||1,L=D<4,K={...m,id:v.generateSpeciesId(),added_at:(0,o.E)(),synced:!1,requires_approval:L,approval_requested:L,approved:!L};try{const B=[...yield v.loadLocalSpecies(),K];return yield v.saveLocalSpecies(B),v.speciesSubject.next(B),D>=4?(navigator.onLine?v.hasBase64Photos(K)?v.uploadPendingPhotos(K).then(function(){var G=(0,s.A)(function*(he){yield v.updateLocalSpeciesPhotos(K.id,he.image_paths),yield v.syncSingleSpeciesToServer(he)});return function(he){return G.apply(this,arguments)}}()).catch(G=>{console.error("\u{1f33f} SpeciesSyncService: Error uploading L4 photos:",G),v.addToPendingQueue(K)}):v.syncSingleSpeciesToServer(K).catch(G=>{console.error("\u{1f33f} SpeciesSyncService: Error syncing new species to server:",G),v.addToPendingQueue(K)}):(console.log("\u{1f33f} SpeciesSyncService: Device offline, adding species to pending queue"),v.addToPendingQueue(K)),console.log("\u{1f33f} SpeciesSyncService: L4 species added:",K.vernacular_name||K.id)):(console.log(`\u{1f33f} SpeciesSyncService: L${D} species added locally (approval required):`,K.vernacular_name||K.id),navigator.onLine&&v.hasBase64Photos(K)?v.uploadPendingPhotos(K).then(G=>{v.updateLocalSpeciesPhotos(K.id,G.image_paths),v.requestSpeciesApproval(G,D).catch(he=>{console.error("\u{1f33f} SpeciesSyncService: Error requesting species approval:",he)})}).catch(G=>{console.error("\u{1f33f} SpeciesSyncService: Error uploading photos before approval:",G),v.requestSpeciesApproval(K,D).catch(he=>{console.error("\u{1f33f} SpeciesSyncService: Error requesting species approval:",he)})}):v.requestSpeciesApproval(K,D).catch(G=>{console.error("\u{1f33f} SpeciesSyncService: Error requesting species approval:",G)})),v.monitoringLog.recordSpeciesAdded(_?.username||_?.email||"unknown",K.vernacular_name||K.common_name||K.scientific_name||"Unnamed",K.type,L),K}catch(ae){throw console.error("\u{1f33f} SpeciesSyncService: Error adding new species:",ae),ae}})()}syncSingleSpeciesToServer(m){var v=this;return(0,s.A)(function*(){try{const _=v.getClient(),D={id:m.id,scientific_name:m.scientific_name,vernacular_name:m.vernacular_name,common_name:m.common_name,creole_name:m.creole_name,description:m.description,image_paths:m.image_paths,added_by:m.added_by,added_at:m.added_at,requires_approval:m.requires_approval||!1,approval_requested:m.approval_requested||!1,approved:void 0===m.approved||m.approved,type:m.type},{data:L,error:K}=yield _.from(v.SPECIES_TABLE).upsert(D,{onConflict:"id"}).select().single();if(K)throw console.error("\u{1f33f} SpeciesSyncService: Supabase error:",K),K;const B=(yield v.loadLocalSpecies()).map(Z=>Z.id===m.id?{...Z,id:L.id,synced:!0}:Z);yield v.saveLocalSpecies(B),v.speciesSubject.next(B),console.log("\u{1f33f} SpeciesSyncService: Species synced to server:",m.vernacular_name||m.id)}catch(_){throw console.error("\u{1f33f} SpeciesSyncService: Error syncing species to server:",_),_}})()}forceSync(){var m=this;return(0,s.A)(function*(){yield m.syncWithServer()})()}syncWithServer(){var m=this;return(0,s.A)(function*(){try{if(!navigator.onLine)return;const v=m.getClient(),_=yield m.getLastSyncTimestamp();let D=v.from(m.SPECIES_TABLE).select("*");_&&(D=D.gt("added_at",_));const{data:L,error:K}=yield D;if(K)return void console.error("\u{1f33f} SpeciesSyncService: Error fetching from server:",K);if(L&&L.length>0){const ae=yield m.loadLocalSpecies(),B=L.map(G=>({id:G.id,scientific_name:G.scientific_name,vernacular_name:G.vernacular_name,common_name:G.common_name,creole_name:G.creole_name,description:G.description,image_paths:G.image_paths||[],added_by:G.added_by,added_at:G.added_at,synced:!0,requires_approval:G.requires_approval||!1,approval_requested:G.approval_requested||!1,approved:void 0===G.approved||G.approved,type:G.type})),Z=m.mergeSpecies(ae,B);yield m.saveLocalSpecies(Z),m.speciesSubject.next(Z),console.log("\u{1f33f} SpeciesSyncService: Synced",L.length,"species from server")}yield m.syncUnsyncedSpecies(),yield m.cleanupOrphanedSpecies(),yield m.updateLastSyncTimestamp()}catch(v){console.error("\u{1f33f} SpeciesSyncService: Error syncing with server:",v)}})()}cleanupOrphanedSpecies(){var m=this;return(0,s.A)(function*(){try{const v=m.getClient(),_=yield m.loadLocalSpecies();if(0===_.length)return;const{data:D,error:L}=yield v.from(m.SPECIES_TABLE).select("id");if(L)return void console.error("\u{1f33f} SpeciesSyncService: Error fetching server species:",L);const K=new Set;D?.forEach(B=>K.add(B.id));const ae=_.filter(B=>!(B.id&&!K.has(B.id)&&B.synced));ae.length!==_.length&&(yield m.saveLocalSpecies(ae),m.speciesSubject.next(ae),console.log("\u{1f33f} SpeciesSyncService: Cleaned up",_.length-ae.length,"orphaned species"))}catch(v){console.error("\u{1f33f} SpeciesSyncService: Error cleaning up orphaned species:",v)}})()}syncUnsyncedSpecies(){var m=this;return(0,s.A)(function*(){const v=yield m.loadLocalSpecies(),D=m.auth.getCurrentUser()?.level||1,L=v.filter(K=>!K.synced&&(!0===K.approved||D>=4));for(const K of L)yield m.syncSingleSpeciesToServer(K)})()}mergeSpecies(m,v){const _=new Map;return m.forEach(D=>_.set(D.id,D)),v.forEach(D=>_.set(D.id,D)),Array.from(_.values())}getLastSyncTimestamp(){var m=this;return(0,s.A)(function*(){try{return(yield m.sharedDataService.readJsonFile(m.SYNC_TIMESTAMP_FILE))?.timestamp||null}catch{return null}})()}updateLastSyncTimestamp(){var m=this;return(0,s.A)(function*(){try{yield m.sharedDataService.writeJsonFile(m.SYNC_TIMESTAMP_FILE,{timestamp:(0,o.E)()})}catch(v){console.error("\u{1f33f} SpeciesSyncService: Error updating sync timestamp:",v)}})()}generateSpeciesId(){return`species_${this.formatTimestamp()}_${Math.random().toString(36).substr(2,4)}`}requestSpeciesApproval(m,v){var _=this;return(0,s.A)(function*(){try{const D=_.auth.getCurrentUser();if(!D)throw new Error("User not authenticated");const L=`${Pe.c.supabase.url}/functions/v1/send-species-approval-request`,K=yield fetch(L,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pe.c.supabase.anonKey}`},body:JSON.stringify({requesterEmail:D.email,requesterUsername:D.username||D.email,speciesName:m.vernacular_name||"Unnamed species",speciesDescription:m.description,imagePaths:m.image_paths,speciesType:m.type,commonName:m.common_name||"",creoleName:m.creole_name||"",scientificName:m.scientific_name||"",reason:`L${v} user submitting new ${m.type} species for approval`,timestamp:(0,o.E)()})});if(!K.ok){const B=yield K.json();throw new Error(B.error||"Failed to submit approval request")}const ae=yield K.json();console.log("\u{1f33f} SpeciesSyncService: Species approval request submitted successfully:",ae.request_id)}catch(D){console.error("\u{1f33f} SpeciesSyncService: Error requesting species approval:",D)}})()}updateSpecies(m,v){var _=this;return(0,s.A)(function*(){if((_.auth.getCurrentUser()?.level||1)<4)throw new Error("Only L4+ users can edit species");try{const K=yield _.loadLocalSpecies(),ae=K.findIndex(G=>G.id===m);if(-1===ae)throw new Error("Species not found");const Z={...K[ae],...v,synced:!1};if(K[ae]=Z,yield _.saveLocalSpecies(K),_.speciesSubject.next(K),navigator.onLine)if(_.hasBase64Photos(Z)){const G=yield _.uploadPendingPhotos(Z);yield _.updateLocalSpeciesPhotos(m,G.image_paths),yield _.syncSingleSpeciesToServer(G)}else yield _.syncSingleSpeciesToServer(Z);else console.log("\u{1f33f} SpeciesSyncService: Offline - species update queued for sync"),_.addToPendingQueue(Z);return console.log("\u{1f33f} SpeciesSyncService: Species updated:",Z.vernacular_name||Z.id),Z}catch(K){throw console.error("\u{1f33f} SpeciesSyncService: Error updating species:",K),K}})()}deleteSpecies(m){var v=this;return(0,s.A)(function*(){if((v.auth.getCurrentUser()?.level||1)<4)throw new Error("Only L4+ users can delete species");try{const L=yield v.loadLocalSpecies(),K=L.find(B=>B.id===m),ae=L.filter(B=>B.id!==m);if(yield v.saveLocalSpecies(ae),v.speciesSubject.next(ae),navigator.onLine){const{error:B}=yield v.getClient().from(v.SPECIES_TABLE).delete().eq("id",m);if(B&&console.error("\u{1f33f} SpeciesSyncService: Error deleting from server:",B),K?.image_paths?.length){const Z=K.image_paths.filter(G=>G.includes("new-species-images/")).map(G=>G.split("new-species-images/")[1]);if(Z.length>0){const{error:G}=yield v.getClient().storage.from("new-species-images").remove(Z);G?console.error("\u{1f33f} SpeciesSyncService: Error deleting images from storage:",G):console.log("\u{1f33f} SpeciesSyncService: Deleted",Z.length,"images from storage")}}}console.log("\u{1f33f} SpeciesSyncService: Species deleted:",m)}catch(L){throw console.error("\u{1f33f} SpeciesSyncService: Error deleting species:",L),L}})()}getAllSpecies(m){var v=this;return(0,s.A)(function*(){const _=yield v.loadLocalSpecies(),D=v.auth.getCurrentUser(),L=D?.level||1,K=D?.email||"",ae=_.filter(B=>B.type===m);return L>=4?ae:ae.filter(B=>!0===B.approved||void 0===B.approved&&!B.requires_approval||B.added_by===K)})()}speciesExists(m,v){var _=this;return(0,s.A)(function*(){return(yield _.loadLocalSpecies()).some(L=>L.type===v&&(L.vernacular_name?.toLowerCase()===m.toLowerCase()||L.scientific_name?.toLowerCase()===m.toLowerCase()))})()}loadPendingRequests(){var m=this;return(0,s.A)(function*(){try{const v=yield m.sharedDataService.readJsonFile(m.PENDING_REQUESTS_FILE);v&&(m.pendingRequests=v,console.log(`\u{1f33f} SpeciesSyncService: Loaded ${m.pendingRequests.length} pending requests`),m.processPendingRequests().catch(_=>console.error("\u{1f33f} SpeciesSyncService: Error processing pending requests:",_)))}catch{console.log("\u{1f33f} SpeciesSyncService: No pending requests file found"),m.pendingRequests=[]}})()}savePendingRequests(){var m=this;return(0,s.A)(function*(){try{yield m.sharedDataService.writeJsonFile(m.PENDING_REQUESTS_FILE,m.pendingRequests)}catch(v){console.error("\u{1f33f} SpeciesSyncService: Error saving pending requests:",v)}})()}addToPendingQueue(m){const v={id:this.generateSpeciesId(),timestamp:Date.now(),species:m,retryCount:0,maxRetries:this.MAX_RETRY_ATTEMPTS,nextRetryTime:Date.now()+this.RETRY_DELAYS[0]};this.pendingRequests.push(v),this.savePendingRequests(),console.log(`\u{1f33f} SpeciesSyncService: Added species to pending queue: ${m.vernacular_name||m.id}`)}processPendingRequests(){var m=this;return(0,s.A)(function*(){if(!navigator.onLine||0===m.pendingRequests.length)return;const v=Date.now(),_=m.pendingRequests.filter(D=>D.nextRetryTime<=v);if(0!==_.length){console.log(`\u{1f33f} SpeciesSyncService: Processing ${_.length} pending requests`);for(const D of _)try{const L=yield m.uploadPendingPhotos(D.species);yield m.syncSingleSpeciesToServer(L),yield m.updateLocalSpeciesPhotos(D.species.id,L.image_paths),m.pendingRequests=m.pendingRequests.filter(K=>K.id!==D.id),console.log(`\u{1f33f} SpeciesSyncService: Successfully synced pending species: ${D.species.vernacular_name||D.species.id}`)}catch(L){if(console.error(`\u{1f33f} SpeciesSyncService: Failed to sync pending species ${D.species.vernacular_name||D.species.id}:`,L),D.retryCount++,D.retryCount>=D.maxRetries)m.pendingRequests=m.pendingRequests.filter(K=>K.id!==D.id),console.error(`\u{1f33f} SpeciesSyncService: Max retries reached for species ${D.species.vernacular_name||D.species.id}, removing from queue`);else{const K=Math.min(D.retryCount,m.RETRY_DELAYS.length-1);D.nextRetryTime=Date.now()+m.RETRY_DELAYS[K]}}yield m.savePendingRequests()}})()}isBase64Image(m){return!!m&&m.startsWith("data:image")}uploadPendingPhotos(m){var v=this;return(0,s.A)(function*(){const _={...m},D=[];for(let L=0;L<_.image_paths.length;L++){const K=_.image_paths[L];if(v.isBase64Image(K))try{console.log(`\u{1f33f} SpeciesSyncService: Uploading pending photo ${L+1} for ${m.vernacular_name||m.id}`);const ae=m.scientific_name||m.vernacular_name||m.common_name||m.creole_name||"new_species",B=yield v.uploadBase64Image(K,ae,L);D.push(B)}catch(ae){throw console.error(`\u{1f33f} SpeciesSyncService: Failed to upload photo ${L+1}:`,ae),ae}else D.push(K)}return _.image_paths=D,_})()}uploadBase64Image(m,v,_){var D=this;return(0,s.A)(function*(){try{const K=yield(yield fetch(m)).blob(),ae=v.trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"")||"new_species",B=new Date,Z=`${String(B.getDate()).padStart(2,"0")}${String(B.getMonth()+1).padStart(2,"0")}${B.getFullYear()}`,G=K.type.split("/")[1]||"jpg",fe=`species-photos/${ae}_photo${_}_${Z}.${G}`,{error:_e}=yield D.getClient().storage.from("new-species-images").upload(fe,K);if(_e)throw _e;const{data:{publicUrl:Re}}=D.getClient().storage.from("new-species-images").getPublicUrl(fe);return console.log("\u{1f33f} SpeciesSyncService: Uploaded photo to:",Re),Re}catch(L){throw console.error("\u{1f33f} SpeciesSyncService: Error uploading base64 image:",L),L}})()}updateLocalSpeciesPhotos(m,v){var _=this;return(0,s.A)(function*(){try{const L=(yield _.loadLocalSpecies()).map(K=>K.id===m?{...K,image_paths:v}:K);yield _.saveLocalSpecies(L),_.speciesSubject.next(L)}catch(D){console.error("\u{1f33f} SpeciesSyncService: Error updating local species photos:",D)}})()}uploadOrQueuePhoto(m,v){var _=this;return(0,s.A)(function*(){if(!navigator.onLine)return console.log("\u{1f33f} SpeciesSyncService: Offline - storing photo as base64 for later upload"),yield _.fileToBase64(m);try{return yield _.uploadSpeciesPhoto(m,v,0)}catch(D){return console.warn("\u{1f33f} SpeciesSyncService: Online upload failed, storing as base64:",D),yield _.fileToBase64(m)}})()}fileToBase64(m){return new Promise((v,_)=>{const D=new FileReader;D.onload=()=>v(D.result),D.onerror=()=>_(new Error("Failed to read file")),D.readAsDataURL(m)})}hasBase64Photos(m){return m.image_paths.some(v=>this.isBase64Image(v))}static#e=we=()=>(this.\u0275fac=function(v){return new(v||l)(Ce.KVO(k.L),Ce.KVO(Le.H),Ce.KVO(Je.N),Ce.KVO(me.u))},this.\u0275prov=Ce.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}))}return we(),l})()},4360(Wt,ut,b){"use strict";b.d(ut,{_:()=>o});var s=b(7707);function o(Pe,Ce,k,Le,Je){return new S(Pe,Ce,k,Le,Je)}class S extends s.vU{constructor(Ce,k,Le,Je,me,ie){super(Ce),this.onFinalize=me,this.shouldUnsubscribe=ie,this._next=k?function(we){try{k(we)}catch(l){Ce.error(l)}}:super._next,this._error=Je?function(we){try{Je(we)}catch(l){Ce.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=Le?function(){try{Le()}catch(we){Ce.error(we)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:k}=this;super.unsubscribe(),!k&&(null===(Ce=this.onFinalize)||void 0===Ce||Ce.call(this))}}}},4412(Wt,ut,b){"use strict";b.d(ut,{t:()=>o});var s=b(1413);class o extends s.B{constructor(Pe){super(),this._value=Pe}get value(){return this.getValue()}_subscribe(Pe){const Ce=super._subscribe(Pe);return!Ce.closed&&Pe.next(this._value),Ce}getValue(){const{hasError:Pe,thrownError:Ce,_value:k}=this;if(Pe)throw Ce;return this._throwIfClosed(),k}next(Pe){super.next(this._value=Pe)}}},4572(Wt,ut,b){"use strict";b.d(ut,{z:()=>ie});var s=b(1985),o=b(3073),S=b(6648),Pe=b(3669),Ce=b(6450),k=b(9326),Le=b(8496),Je=b(4360),me=b(5225);function ie(...p){const m=(0,k.lI)(p),v=(0,k.ms)(p),{args:_,keys:D}=(0,o.D)(p);if(0===_.length)return(0,S.H)([],m);const L=new s.c(function we(p,m,v=Pe.D){return _=>{l(m,()=>{const{length:D}=p,L=new Array(D);let K=D,ae=D;for(let B=0;B<D;B++)l(m,()=>{const Z=(0,S.H)(p[B],m);let G=!1;Z.subscribe((0,Je._)(_,he=>{L[B]=he,G||(G=!0,ae--),ae||_.next(v(L.slice()))},()=>{--K||_.complete()}))},_)},_)}}(_,m,D?K=>(0,Le.e)(D,K):Pe.D));return v?L.pipe((0,Ce.I)(v)):L}function l(p,m,v){p?(0,me.N)(v,p,m):m()}},4632(Wt,ut,b){"use strict";b.d(ut,{T:()=>Je});var s=b(467),o=b(2084),S=b(2615),Pe=b(918),Ce=b(5029),k=b(4938),Le=b(8863);let Je=(()=>{var me;class ie{constructor(l,p,m,v){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=v,this.REPORTS_BUCKET="pollution",this.IMAGES_BUCKET="pollution-images",this.DRAFT_FILE="pollution_draft_current.json",this.PENDING_QUEUE_FILE="pollution_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} PollutionSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} PollutionSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(_=>console.error("\u274c PollutionSyncService: processPendingQueue failed:",_))}),setTimeout(()=>{console.log("\u{1f680} PollutionSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(_=>console.error("\u274c PollutionSyncService: Initial queue check failed:",_))},2e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 PollutionSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(_=>console.error("\u274c PollutionSyncService: Periodic queue check failed:",_))},3e5),console.log("\u2705 PollutionSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}getZoneName(l){return l?`Zone ${l}`:""}getQuadDisplay(l){if(!l)return"";const p=l.match(/\d+/);return p?`Quad ${p[0]}`:""}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Pollution${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];return l?.greyWaterDumping&&m.push("grey water"),l?.sewageDischarge&&m.push("sewage"),l?.dumpingTrash&&Array.isArray(l.dumpingTrash)&&l.dumpingTrash.length>0&&m.push(l.dumpingTrash.join(" & ")),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"pollution"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",v=l?.quadNumber||"";let _=`pollution_draft_${p}`;return m&&(_+=`_zone${m}`),v&&(_+=`_quad${v}`),`${_}.json`}dataUrlToBlob(l){return(0,s.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,s.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,s.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("PollutionSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=l.reportId||p.generateReportId(),_={reportId:v,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos,status:l.status||{incomplete:!0,sent:!1,pending:!1}},D=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(D,_);const L=yield p.sharedDataService.readJsonFile(D);if(!L||L.reportId!==_.reportId)throw new Error("PollutionSyncService: draft verification failed");const K=yield p.storage.getUser(),ae=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(K?.username||"unknown","pollution",v,ae)})()}loadDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,s.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(_=>_.startsWith("pollution_draft_")),v=[];for(const _ of m)try{const D=yield l.sharedDataService.readJsonFile(_);if(D){const L=l.getLocationLabelFromFilename(_,D.form);v.push({draft:D,locationLabel:L})}}catch(D){console.warn("PollutionSyncService: Failed to read draft file",_,D)}return v})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,s.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,s.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:v}of m)p.push({report:v,status:"draft"});try{const _=(yield l.sharedDataService.listFiles()).filter(D=>{if(!D.startsWith("Pollution")||D.includes("_report_"))return!1;const L=D.replace(".json","");return/^Pollution\d{8}_\d{6}$/.test(L)&&!D.includes("_backup")&&!D.includes("_draft")&&!D.includes("_queue")});for(const D of _)try{const L=yield l.sharedDataService.readJsonFile(D);L&&p.push({report:L,status:L.status.sent?"submitted":"pending"})}catch(L){console.warn("PollutionSyncService: Failed to read report file",D,L)}}catch(v){console.error("PollutionSyncService: Failed to list files:",v)}return p.sort((v,_)=>{const D=new Date(v.report.updatedAt||v.report.createdAt).getTime();return new Date(_.report.updatedAt||_.report.createdAt).getTime()-D}),p})()}submitFinal(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=!0===l.isEditMode,_=l.existingReportId||p.generateReportId(),D={reportId:_,createdAt:m,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:{general:[...l.photos.general||[]],greyWater:l.photos.greyWater||null,trash:l.photos.trash||null,sewage:l.photos.sewage||null},status:{incomplete:!1,sent:!1,pending:!1}};v&&(D.editedAt=m);const L=`${_}.json`;yield p.sharedDataService.writeJsonFile(L,D);const K=yield p.sharedDataService.readJsonFile(L);if(!K||K.reportId!==_)throw new Error("PollutionSyncService: local report verification failed");const ae=yield p.storage.getUser(),B=ae?ae.organization||ae.username:null;let Z;if(l.originalSubmittedBy&&B&&l.originalSubmittedBy!==B?Z=`${l.originalSubmittedBy}, ${B}`:B&&(Z=B),D.submittedBy=Z,yield p.sharedDataService.writeJsonFile(L,D),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:_,localReportFile:L}),{reportId:_,queued:!0};try{yield p.uploadReportAndImages(D,l.originalSubmittedBy),D.status.sent=!0,D.status.pending=!1,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.clearDraft();const fe=(yield p.storage.getUser())?.username||"unknown",_e=p.getFormSummary(l.formValue),Re=D.submittedBy;return v?p.monitoringLog.recordFormEdited(fe,"pollution",_,!1,_e,Re):p.monitoringLog.recordFormSubmitted(fe,"pollution",_,!1,_e,Re),{reportId:_,queued:!1}}catch(he){const fe=String(he?.message?he.message:he);D.status.pending=!0,D.status.lastError=fe,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.enqueuePending({reportId:_,localReportFile:L});const Re=(yield p.storage.getUser())?.username||"unknown",ve=p.getFormSummary(l.formValue),Ye=D.submittedBy;return v?p.monitoringLog.recordFormEdited(Re,"pollution",_,!0,ve,Ye):p.monitoringLog.recordFormSubmitted(Re,"pollution",_,!0,ve,Ye),{reportId:_,queued:!0}}})()}enqueuePending(l){var p=this;return(0,s.A)(function*(){console.log("\u{1f4dd} PollutionSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(_=>_.reportId===l.reportId)?console.log("\u26a0\ufe0f PollutionSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 PollutionSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} PollutionSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,s.A)(function*(){if(console.log("\u{1f504} PollutionSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f PollutionSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f PollutionSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} PollutionSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 PollutionSyncService: Queue is empty, nothing to process");const m=[];for(const v of p.items){console.log("\u{1f50d} PollutionSyncService: Processing item:",v.reportId,"(attempt",v.attempts+1,")");try{const _=yield l.sharedDataService.readJsonFile(v.localReportFile);if(!_){console.error("\u274c PollutionSyncService: Local report file missing for",v.reportId),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(_),console.log("\u2705 PollutionSyncService: Upload succeeded for",v.reportId),_.status.sent=!0,_.status.pending=!1,_.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(v.localReportFile,_),console.log("\u{1f4be} PollutionSyncService: Marked report as sent")}catch(_){console.error("\u274c PollutionSyncService: Upload failed for",v.reportId,":",_),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} PollutionSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} PollutionSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,s.A)(function*(){console.log("\u{1f4e4} PollutionSyncService: Starting upload for report",l.reportId);const v=m.getClient(),_={};l.photos.greyWater&&(_.greyWater=yield m.uploadImageDataUrl(`${l.reportId}/greyWater.jpg`,l.photos.greyWater)),l.photos.trash&&(_.trash=yield m.uploadImageDataUrl(`${l.reportId}/trash.jpg`,l.photos.trash)),l.photos.sewage&&(_.sewage=yield m.uploadImageDataUrl(`${l.reportId}/sewage.jpg`,l.photos.sewage));const D=[];for(let Re=0;Re<(l.photos.general||[]).length;Re++){const ve=l.photos.general[Re],Ye=yield m.uploadImageDataUrl(`${l.reportId}/general_${Re+1}.jpg`,ve);D.push(Ye)}const L=JSON.parse(JSON.stringify(l));L.photos={general:D,greyWater:_.greyWater||null,trash:_.trash||null,sewage:_.sewage||null},L.status={incomplete:!1,sent:!0,pending:!1};const K=`${l.reportId}.json`,ae=new Blob([JSON.stringify(L)],{type:"application/json"}),{error:B}=yield v.storage.from(m.REPORTS_BUCKET).upload(K,ae,{contentType:"application/json",upsert:!0});if(B)throw console.error("\u274c PollutionSyncService: JSON upload error:",B),B;console.log("\u2705 PollutionSyncService: Successfully uploaded JSON to",K);const Z=yield m.storage.getUser(),G=Z?Z.organization||Z.username:null;let he;he=p&&G&&p!==G?`${p}, ${G}`:G;const fe={report_id:l.reportId,submitted_by:he,json_path:K,location:l.form.location||null,report_date:l.form.reportDate||null,zone_number:m.getZoneName(l.form.zoneNumber)||null,quad_number:m.getQuadDisplay(l.form.quadNumber)||null,requires_urgent_action:l.form.requiresUrgentAction||!1,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:_e}=yield v.from("pollution_reports").upsert(fe,{onConflict:"report_id"});if(_e)throw console.error("\u274c PollutionSyncService: Database upsert error:",_e),_e;console.log("\u2705 PollutionSyncService: Successfully upserted into pollution_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,s.A)(function*(){const v=m.getClient(),_=yield m.dataUrlToBlob(p),{error:D}=yield v.storage.from(m.IMAGES_BUCKET).upload(l,_,{contentType:_.type||"image/jpeg",upsert:!0});if(D)throw console.error("\u274c PollutionSyncService: Image upload error for",l,":",D),D;return console.log("\u2705 PollutionSyncService: Successfully uploaded image to",l),l})()}static#e=me=()=>(this.\u0275fac=function(p){return new(p||ie)(S.KVO(Pe.H),S.KVO(Ce.L),S.KVO(k.w),S.KVO(Le.u))},this.\u0275prov=S.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return me(),ie})()},4674(Wt,ut,b){"use strict";b.d(ut,{a:()=>v,b:()=>k,c:()=>Pe,d:()=>ae,e:()=>_,f:()=>me,g:()=>we,h:()=>Ce,i:()=>Je,j:()=>G,k:()=>p,l:()=>D,m:()=>ie,n:()=>m,o:()=>K,p:()=>B,q:()=>L,r:()=>l,s:()=>Z,t:()=>o});var s=b(5705);const o=(he,fe=0)=>new Promise(_e=>{S(he,fe,_e)}),S=(he,fe=0,_e)=>{let Re,ve;const Ye={passive:!0},nt=()=>{Re&&Re()},ze=Fe=>{(void 0===Fe||he===Fe.target)&&(nt(),_e(Fe))};return he&&(he.addEventListener("webkitTransitionEnd",ze,Ye),he.addEventListener("transitionend",ze,Ye),ve=setTimeout(ze,fe+500),Re=()=>{void 0!==ve&&(clearTimeout(ve),ve=void 0),he.removeEventListener("webkitTransitionEnd",ze,Ye),he.removeEventListener("transitionend",ze,Ye)}),nt},Pe=(he,fe)=>{he.componentOnReady?he.componentOnReady().then(_e=>fe(_e)):l(()=>fe(he))},Ce=he=>void 0!==he.componentOnReady,k=(he,fe=[])=>{const _e={};return fe.forEach(Re=>{he.hasAttribute(Re)&&(null!==he.getAttribute(Re)&&(_e[Re]=he.getAttribute(Re)),he.removeAttribute(Re))}),_e},Le=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Je=(he,fe)=>k(he,Le),me=(he,fe,_e,Re)=>he.addEventListener(fe,_e,Re),ie=(he,fe,_e,Re)=>he.removeEventListener(fe,_e,Re),we=(he,fe=he)=>he.shadowRoot||fe,l=he=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(he):"function"==typeof requestAnimationFrame?requestAnimationFrame(he):setTimeout(he),p=he=>!!he.shadowRoot&&!!he.attachShadow,m=he=>{if(he.focus(),he.classList.contains("ion-focusable")){const fe=he.closest("ion-app");fe&&fe.setFocus([he])}},v=(he,fe,_e,Re,ve)=>{{let Ye=fe.querySelector("input.aux-input");Ye||(Ye=fe.ownerDocument.createElement("input"),Ye.type="hidden",Ye.classList.add("aux-input"),fe.appendChild(Ye)),Ye.disabled=ve,Ye.name=_e,Ye.value=Re||""}},_=(he,fe,_e)=>Math.max(he,Math.min(fe,_e)),D=(he,fe)=>{if(!he){const _e="ASSERT: "+fe;throw(0,s.j)(_e),new Error(_e)}},L=he=>{if(he){const fe=he.changedTouches;if(fe&&fe.length>0){const _e=fe[0];return{x:_e.clientX,y:_e.clientY}}if(void 0!==he.pageX)return{x:he.pageX,y:he.pageY}}return{x:0,y:0}},K=he=>{const fe="rtl"===document.dir;switch(he){case"start":return fe;case"end":return!fe;default:throw new Error(`"${he}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ae=(he,fe)=>{const _e=he._original||he;return{_original:he,emit:B(_e.emit.bind(_e),fe)}},B=(he,fe=0)=>{let _e;return(...Re)=>{clearTimeout(_e),_e=setTimeout(he,fe,...Re)}},Z=(he,fe)=>{if(he??(he={}),fe??(fe={}),he===fe)return!0;const _e=Object.keys(he);if(_e.length!==Object.keys(fe).length)return!1;for(const Re of _e)if(!(Re in fe)||he[Re]!==fe[Re])return!1;return!0},G=he=>"number"==typeof he&&!isNaN(he)&&isFinite(he)},4688(Wt,ut,b){"use strict";b.d(ut,{$P:()=>B,sN:()=>he});var s=b(467),o=b(3664),S=b(2615),Pe=b(1413),Ce=b(6129);class k extends Pe.B{constructor(_e=1/0,Re=1/0,ve=Ce.U){super(),this._bufferSize=_e,this._windowTime=Re,this._timestampProvider=ve,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Re===1/0,this._bufferSize=Math.max(1,_e),this._windowTime=Math.max(1,Re)}next(_e){const{isStopped:Re,_buffer:ve,_infiniteTimeWindow:Ye,_timestampProvider:ge,_windowTime:nt}=this;Re||(ve.push(_e),!Ye&&ve.push(ge.now()+nt)),this._trimBuffer(),super.next(_e)}_subscribe(_e){this._throwIfClosed(),this._trimBuffer();const Re=this._innerSubscribe(_e),{_infiniteTimeWindow:ve,_buffer:Ye}=this,ge=Ye.slice();for(let nt=0;nt<ge.length&&!_e.closed;nt+=ve?1:2)_e.next(ge[nt]);return this._checkFinalizedStatuses(_e),Re}_trimBuffer(){const{_bufferSize:_e,_timestampProvider:Re,_buffer:ve,_infiniteTimeWindow:Ye}=this,ge=(Ye?1:2)*_e;if(_e<1/0&&ge<ve.length&&ve.splice(0,ve.length-ge),!Ye){const nt=Re.now();let ze=0;for(let Fe=1;Fe<ve.length&&ve[Fe]<=nt;Fe+=2)ze=Fe;ze&&ve.splice(0,ze+1)}}}var Le=b(8359),Je=b(8839),me=b(1985),ie=b(9974),we=b(4360),l=b(8750),m=b(9470);function D(fe,_e=Je.E,Re){const ve=function _(fe=0,_e,Re=Je.b){let ve=-1;return null!=_e&&((0,m.m)(_e)?Re=_e:ve=_e),new me.c(Ye=>{let ge=function v(fe){return fe instanceof Date&&!isNaN(fe)}(fe)?+fe-Re.now():fe;ge<0&&(ge=0);let nt=0;return Re.schedule(function(){Ye.closed||(Ye.next(nt++),0<=ve?this.schedule(void 0,ve):Ye.complete())},ge)})}(fe,_e);return function p(fe,_e){return(0,ie.N)((Re,ve)=>{const{leading:Ye=!0,trailing:ge=!1}=_e??{};let nt=!1,ze=null,Fe=null,xe=!1;const rt=()=>{Fe?.unsubscribe(),Fe=null,ge&&(H(),xe&&ve.complete())},Ve=()=>{Fe=null,xe&&ve.complete()},Ae=ye=>Fe=(0,l.Tg)(fe(ye)).subscribe((0,we._)(ve,rt,Ve)),H=()=>{if(nt){nt=!1;const ye=ze;ze=null,ve.next(ye),!xe&&Ae(ye)}};Re.subscribe((0,we._)(ve,ye=>{nt=!0,ze=ye,(!Fe||Fe.closed)&&(Ye?H():Ae(ye))},()=>{xe=!0,(!(ge&&nt&&Fe)||Fe.closed)&&ve.complete()}))})}(()=>ve,Re)}var L=b(5558);class K{constructor(){this.subject=new k(1),this.subscriptions=new Le.yU}doFilter(_e){this.subject.next(_e)}dispose(){this.subscriptions.unsubscribe()}notEmpty(_e,Re){this.subscriptions.add(this.subject.subscribe(ve=>{if(ve[_e]){const Ye=ve[_e].currentValue;null!=Ye&&Re(Ye)}}))}has(_e,Re){this.subscriptions.add(this.subject.subscribe(ve=>{ve[_e]&&Re(ve[_e].currentValue)}))}notFirst(_e,Re){this.subscriptions.add(this.subject.subscribe(ve=>{ve[_e]&&!ve[_e].isFirstChange()&&Re(ve[_e].currentValue)}))}notFirstAndEmpty(_e,Re){this.subscriptions.add(this.subject.subscribe(ve=>{if(ve[_e]&&!ve[_e].isFirstChange()){const Ye=ve[_e].currentValue;null!=Ye&&Re(Ye)}}))}}const ae=new S.nKC("NGX_ECHARTS_CONFIG");let B=(()=>{var fe;class _e{constructor(ve,Ye,ge){this.el=Ye,this.ngZone=ge,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new o.bkB,this.optionsError=new o.bkB,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new k(1),this.resize$=new Pe.B,this.changeFilter=new K,this.resizeObFired=!1,this.echarts=ve.echarts,this.theme=ve.theme||null}ngOnChanges(ve){this.changeFilter.doFilter(ve)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(D(100,Je.E,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(ve=>{for(const Ye of ve)Ye.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",ve=>this.onOptionsChange(ve)),this.changeFilter.notFirstAndEmpty("merge",ve=>this.setOption(ve)),this.changeFilter.has("loading",ve=>this.toggleLoading(!!ve)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(ve){this.chart?ve?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(Ye=>ve?Ye.showLoading(this.loadingType,this.loadingOpts):Ye.hideLoading())}setOption(ve,Ye){if(this.chart)try{this.chart.setOption(ve,Ye)}catch(ge){console.error(ge),this.optionsError.emit(ge)}}refreshChart(){var ve=this;return(0,s.A)(function*(){ve.dispose(),yield ve.initChart()})()}createChart(){const ve=this.el.nativeElement;if(window&&window.getComputedStyle){const Ye=window.getComputedStyle(ve,null).getPropertyValue("height");(!Ye||"0px"===Ye)&&(!ve.style.height||"0px"===ve.style.height)&&(ve.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:ge})=>ge(ve,this.theme,this.initOpts)))}initChart(){var ve=this;return(0,s.A)(function*(){yield ve.onOptionsChange(ve.options),ve.merge&&ve.chart&&ve.setOption(ve.merge)})()}onOptionsChange(ve){var Ye=this;return(0,s.A)(function*(){ve&&(Ye.chart||(Ye.chart=yield Ye.createChart(),Ye.chart$.next(Ye.chart),Ye.chartInit.emit(Ye.chart)),Ye.setOption(Ye.options,!0))})()}createLazyEvent(ve){return this.chartInit.pipe((0,L.n)(Ye=>new me.c(ge=>(Ye.on(ve,nt=>this.ngZone.run(()=>ge.next(nt))),()=>{this.chart&&(this.chart.isDisposed()||Ye.off(ve))}))))}static#e=fe=()=>(this.\u0275fac=function(Ye){return new(Ye||_e)(o.rXU(ae),o.rXU(o.aKT),o.rXU(o.SKi))},this.\u0275dir=o.FsC({type:_e,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[o.OA$]}))}return fe(),_e})();const G=fe=>({provide:ae,useValue:fe});let he=(()=>{var fe;class _e{static forRoot(ve){return{ngModule:_e,providers:[G(ve)]}}static forChild(){return{ngModule:_e}}static#e=fe=()=>(this.\u0275fac=function(Ye){return new(Ye||_e)},this.\u0275mod=o.$C({type:_e}),this.\u0275inj=S.G2t({}))}return fe(),_e})()},4761(Wt,ut,b){"use strict";b.d(ut,{l:()=>o});const o=function s(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4938(Wt,ut,b){"use strict";b.d(ut,{w:()=>k});var s=b(467);const S=(0,b(5083).F3)("Preferences",{web:()=>b.e(2924).then(b.bind(b,2924)).then(Le=>new Le.PreferencesWeb)});var Pe=b(2615),Ce=b(918);let k=(()=>{var Le;class Je{constructor(ie){this.sharedDataService=ie,this.USER_KEY="leap_current_user",this.USER_FILE="leap_current_user.json"}setUser(ie){var we=this;return(0,s.A)(function*(){yield we.sharedDataService.writeJsonFile(we.USER_FILE,ie)})()}getUser(){var ie=this;return(0,s.A)(function*(){try{const we=yield ie.sharedDataService.readJsonFile(ie.USER_FILE);if(we)return we;const{value:l}=yield S.get({key:ie.USER_KEY});if(l){const p=JSON.parse(l);return yield ie.sharedDataService.writeJsonFile(ie.USER_FILE,p),yield S.remove({key:ie.USER_KEY}),p}return null}catch(we){return console.error("Storage: Error getting user:",we),null}})()}clearUser(){var ie=this;return(0,s.A)(function*(){yield ie.sharedDataService.deleteJsonFile(ie.USER_FILE),yield S.remove({key:ie.USER_KEY})})()}clearAll(){var ie=this;return(0,s.A)(function*(){yield ie.clearUser()})()}static#e=Le=()=>(this.\u0275fac=function(we){return new(we||Je)(Pe.KVO(Ce.H))},this.\u0275prov=Pe.jDH({token:Je,factory:Je.\u0275fac,providedIn:"root"}))}return Le(),Je})()},5029(Wt,ut,b){"use strict";b.d(ut,{L:()=>Uo});var s=b(467),o=b(1635);class Pe extends Error{constructor(u,c="FunctionsError",d){super(u),this.name=c,this.context=d}}class Ce extends Pe{constructor(u){super("Failed to send a request to the Edge Function","FunctionsFetchError",u)}}class k extends Pe{constructor(u){super("Relay Error invoking the Edge Function","FunctionsRelayError",u)}}class Le extends Pe{constructor(u){super("Edge Function returned a non-2xx status code","FunctionsHttpError",u)}}var Je=function(f){return f.Any="any",f.ApNortheast1="ap-northeast-1",f.ApNortheast2="ap-northeast-2",f.ApSouth1="ap-south-1",f.ApSoutheast1="ap-southeast-1",f.ApSoutheast2="ap-southeast-2",f.CaCentral1="ca-central-1",f.EuCentral1="eu-central-1",f.EuWest1="eu-west-1",f.EuWest2="eu-west-2",f.EuWest3="eu-west-3",f.SaEast1="sa-east-1",f.UsEast1="us-east-1",f.UsWest1="us-west-1",f.UsWest2="us-west-2",f}(Je||{});class me{constructor(u,{headers:c={},customFetch:d,region:w=Je.Any}={}){var f;this.url=u,this.headers=c,this.region=w,this.fetch=(f=d)?(...u)=>f(...u):(...u)=>fetch(...u)}setAuth(u){this.headers.Authorization=`Bearer ${u}`}invoke(u){return(0,o.sH)(this,arguments,void 0,function*(c,d={}){var w;let N,V;try{const{headers:te,method:Ie,body:Be,signal:h,timeout:E}=d;let y={},{region:I}=d;I||(I=this.region);const F=new URL(`${this.url}/${c}`);let J;I&&"any"!==I&&(y["x-region"]=I,F.searchParams.set("forceFunctionRegion",I)),Be&&(te&&!Object.prototype.hasOwnProperty.call(te,"Content-Type")||!te)?typeof Blob<"u"&&Be instanceof Blob||Be instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",J=Be):"string"==typeof Be?(y["Content-Type"]="text/plain",J=Be):typeof FormData<"u"&&Be instanceof FormData?J=Be:(y["Content-Type"]="application/json",J=JSON.stringify(Be)):J=!Be||"string"==typeof Be||typeof Blob<"u"&&Be instanceof Blob||Be instanceof ArrayBuffer||typeof FormData<"u"&&Be instanceof FormData?Be:JSON.stringify(Be);let De=h;E&&(V=new AbortController,N=setTimeout(()=>V.abort(),E),h?(De=V.signal,h.addEventListener("abort",()=>V.abort())):De=V.signal);const qe=yield this.fetch(F.toString(),{method:Ie||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),te),body:J,signal:De}).catch(mn=>{throw new Ce(mn)}),gt=qe.headers.get("x-relay-error");if(gt&&"true"===gt)throw new k(qe);if(!qe.ok)throw new Le(qe);let dn,Ht=(null!==(w=qe.headers.get("Content-Type"))&&void 0!==w?w:"text/plain").split(";")[0].trim();return dn="application/json"===Ht?yield qe.json():"application/octet-stream"===Ht||"application/pdf"===Ht?yield qe.blob():"text/event-stream"===Ht?qe:"multipart/form-data"===Ht?yield qe.formData():yield qe.text(),{data:dn,error:null,response:qe}}catch(te){return{data:null,error:te,response:te instanceof Le||te instanceof k?te.context:void 0}}finally{N&&clearTimeout(N)}})}}var ie=class extends Error{constructor(f){super(f.message),this.name="PostgrestError",this.details=f.details,this.hint=f.hint,this.code=f.code}},we=class{constructor(f){var u,c,d;this.shouldThrowOnError=!1,this.method=f.method,this.url=f.url,this.headers=new Headers(f.headers),this.schema=f.schema,this.body=f.body,this.shouldThrowOnError=null!==(u=f.shouldThrowOnError)&&void 0!==u&&u,this.signal=f.signal,this.isMaybeSingle=null!==(c=f.isMaybeSingle)&&void 0!==c&&c,this.urlLengthLimit=null!==(d=f.urlLengthLimit)&&void 0!==d?d:8e3,this.fetch=f.fetch?f.fetch:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(f,u){return this.headers=new Headers(this.headers),this.headers.set(f,u),this}then(f,u){var c=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let w=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var N=(0,s.A)(function*(V){let te=null,Ie=null,Be=null,h=V.status,E=V.statusText;if(V.ok){var y,I;if("HEAD"!==c.method){var F;const gt=yield V.text();""===gt||(Ie="text/csv"===c.headers.get("Accept")||c.headers.get("Accept")&&null!==(F=c.headers.get("Accept"))&&void 0!==F&&F.includes("application/vnd.pgrst.plan+text")?gt:JSON.parse(gt))}const De=null===(y=c.headers.get("Prefer"))||void 0===y?void 0:y.match(/count=(exact|planned|estimated)/),qe=null===(I=V.headers.get("content-range"))||void 0===I?void 0:I.split("/");De&&qe&&qe.length>1&&(Be=parseInt(qe[1])),c.isMaybeSingle&&"GET"===c.method&&Array.isArray(Ie)&&(Ie.length>1?(te={code:"PGRST116",details:`Results contain ${Ie.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Ie=null,Be=null,h=406,E="Not Acceptable"):Ie=1===Ie.length?Ie[0]:null)}else{var J;const De=yield V.text();try{te=JSON.parse(De),Array.isArray(te)&&404===V.status&&(Ie=[],te=null,h=200,E="OK")}catch{404===V.status&&""===De?(h=204,E="No Content"):te={message:De}}if(te&&c.isMaybeSingle&&!(null==te||null===(J=te.details)||void 0===J)&&J.includes("0 rows")&&(te=null,h=200,E="OK"),te&&c.shouldThrowOnError)throw new ie(te)}return{error:te,data:Ie,count:Be,status:h,statusText:E}});return function(V){return N.apply(this,arguments)}}());return this.shouldThrowOnError||(w=w.catch(N=>{var V;let te="",Ie="",Be="";const h=N?.cause;if(h){var E,y,I,F;const qe=null!==(E=h?.message)&&void 0!==E?E:"",gt=null!==(y=h?.code)&&void 0!==y?y:"";te=`${null!==(I=N?.name)&&void 0!==I?I:"FetchError"}: ${N?.message}`,te+=`\n\nCaused by: ${null!==(F=h?.name)&&void 0!==F?F:"Error"}: ${qe}`,gt&&(te+=` (${gt})`),h?.stack&&(te+=`\n${h.stack}`)}else{var J;te=null!==(J=N?.stack)&&void 0!==J?J:""}const De=this.url.toString().length;return"AbortError"===N?.name||"ABORT_ERR"===N?.code?(Be="",Ie="Request was aborted (timeout or manual cancellation)",De>this.urlLengthLimit&&(Ie+=`. Note: Your request URL is ${De} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):("HeadersOverflowError"===h?.name||"UND_ERR_HEADERS_OVERFLOW"===h?.code)&&(Be="",Ie="HTTP headers exceeded server limits (typically 16KB)",De>this.urlLengthLimit&&(Ie+=`. Your request URL is ${De} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${null!==(V=N?.name)&&void 0!==V?V:"FetchError"}: ${N?.message}`,details:te,hint:Ie,code:Be},data:null,count:null,status:0,statusText:""}})),w.then(f,u)}returns(){return this}overrideTypes(){return this}},l=class extends we{select(f){let u=!1;const c=(f??"*").split("").map(d=>/\s/.test(d)&&!u?"":('"'===d&&(u=!u),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(f,{ascending:u=!0,nullsFirst:c,foreignTable:d,referencedTable:w=d}={}){const N=w?`${w}.order`:"order",V=this.url.searchParams.get(N);return this.url.searchParams.set(N,`${V?`${V},`:""}${f}.${u?"asc":"desc"}${void 0===c?"":c?".nullsfirst":".nullslast"}`),this}limit(f,{foreignTable:u,referencedTable:c=u}={}){return this.url.searchParams.set(typeof c>"u"?"limit":`${c}.limit`,`${f}`),this}range(f,u,{foreignTable:c,referencedTable:d=c}={}){const N=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(typeof d>"u"?"offset":`${d}.offset`,`${f}`),this.url.searchParams.set(N,""+(u-f+1)),this}abortSignal(f){return this.signal=f,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:f=!1,verbose:u=!1,settings:c=!1,buffers:d=!1,wal:w=!1,format:N="text"}={}){var V;const te=[f?"analyze":null,u?"verbose":null,c?"settings":null,d?"buffers":null,w?"wal":null].filter(Boolean).join("|"),Ie=null!==(V=this.headers.get("Accept"))&&void 0!==V?V:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${N}; for="${Ie}"; options=${te};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(f){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${f}`),this}};const p=new RegExp("[,()]");var m=class extends l{eq(f,u){return this.url.searchParams.append(f,`eq.${u}`),this}neq(f,u){return this.url.searchParams.append(f,`neq.${u}`),this}gt(f,u){return this.url.searchParams.append(f,`gt.${u}`),this}gte(f,u){return this.url.searchParams.append(f,`gte.${u}`),this}lt(f,u){return this.url.searchParams.append(f,`lt.${u}`),this}lte(f,u){return this.url.searchParams.append(f,`lte.${u}`),this}like(f,u){return this.url.searchParams.append(f,`like.${u}`),this}likeAllOf(f,u){return this.url.searchParams.append(f,`like(all).{${u.join(",")}}`),this}likeAnyOf(f,u){return this.url.searchParams.append(f,`like(any).{${u.join(",")}}`),this}ilike(f,u){return this.url.searchParams.append(f,`ilike.${u}`),this}ilikeAllOf(f,u){return this.url.searchParams.append(f,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(f,u){return this.url.searchParams.append(f,`ilike(any).{${u.join(",")}}`),this}regexMatch(f,u){return this.url.searchParams.append(f,`match.${u}`),this}regexIMatch(f,u){return this.url.searchParams.append(f,`imatch.${u}`),this}is(f,u){return this.url.searchParams.append(f,`is.${u}`),this}isDistinct(f,u){return this.url.searchParams.append(f,`isdistinct.${u}`),this}in(f,u){const c=Array.from(new Set(u)).map(d=>"string"==typeof d&&p.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(f,`in.(${c})`),this}notIn(f,u){const c=Array.from(new Set(u)).map(d=>"string"==typeof d&&p.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(f,`not.in.(${c})`),this}contains(f,u){return"string"==typeof u?this.url.searchParams.append(f,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(f,`cs.{${u.join(",")}}`):this.url.searchParams.append(f,`cs.${JSON.stringify(u)}`),this}containedBy(f,u){return"string"==typeof u?this.url.searchParams.append(f,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(f,`cd.{${u.join(",")}}`):this.url.searchParams.append(f,`cd.${JSON.stringify(u)}`),this}rangeGt(f,u){return this.url.searchParams.append(f,`sr.${u}`),this}rangeGte(f,u){return this.url.searchParams.append(f,`nxl.${u}`),this}rangeLt(f,u){return this.url.searchParams.append(f,`sl.${u}`),this}rangeLte(f,u){return this.url.searchParams.append(f,`nxr.${u}`),this}rangeAdjacent(f,u){return this.url.searchParams.append(f,`adj.${u}`),this}overlaps(f,u){return this.url.searchParams.append(f,"string"==typeof u?`ov.${u}`:`ov.{${u.join(",")}}`),this}textSearch(f,u,{config:c,type:d}={}){let w="";return"plain"===d?w="pl":"phrase"===d?w="ph":"websearch"===d&&(w="w"),this.url.searchParams.append(f,`${w}fts${void 0===c?"":`(${c})`}.${u}`),this}match(f){return Object.entries(f).forEach(([u,c])=>{this.url.searchParams.append(u,`eq.${c}`)}),this}not(f,u,c){return this.url.searchParams.append(f,`not.${u}.${c}`),this}or(f,{foreignTable:u,referencedTable:c=u}={}){return this.url.searchParams.append(c?`${c}.or`:"or",`(${f})`),this}filter(f,u,c){return this.url.searchParams.append(f,`${u}.${c}`),this}},v=class{constructor(f,{headers:u={},schema:c,fetch:d,urlLengthLimit:w=8e3}){this.url=f,this.headers=new Headers(u),this.schema=c,this.fetch=d,this.urlLengthLimit=w}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(f,u){const{head:c=!1,count:d}=u??{},w=c?"HEAD":"GET";let N=!1;const V=(f??"*").split("").map(Be=>/\s/.test(Be)&&!N?"":('"'===Be&&(N=!N),Be)).join(""),{url:te,headers:Ie}=this.cloneRequestState();return te.searchParams.set("select",V),d&&Ie.append("Prefer",`count=${d}`),new m({method:w,url:te,headers:Ie,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(f,{count:u,defaultToNull:c=!0}={}){var d;const{url:N,headers:V}=this.cloneRequestState();if(u&&V.append("Prefer",`count=${u}`),c||V.append("Prefer","missing=default"),Array.isArray(f)){const te=f.reduce((Ie,Be)=>Ie.concat(Object.keys(Be)),[]);if(te.length>0){const Ie=[...new Set(te)].map(Be=>`"${Be}"`);N.searchParams.set("columns",Ie.join(","))}}return new m({method:"POST",url:N,headers:V,schema:this.schema,body:f,fetch:null!==(d=this.fetch)&&void 0!==d?d:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(f,{onConflict:u,ignoreDuplicates:c=!1,count:d,defaultToNull:w=!0}={}){var N;const{url:te,headers:Ie}=this.cloneRequestState();if(Ie.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),void 0!==u&&te.searchParams.set("on_conflict",u),d&&Ie.append("Prefer",`count=${d}`),w||Ie.append("Prefer","missing=default"),Array.isArray(f)){const Be=f.reduce((h,E)=>h.concat(Object.keys(E)),[]);if(Be.length>0){const h=[...new Set(Be)].map(E=>`"${E}"`);te.searchParams.set("columns",h.join(","))}}return new m({method:"POST",url:te,headers:Ie,schema:this.schema,body:f,fetch:null!==(N=this.fetch)&&void 0!==N?N:fetch,urlLengthLimit:this.urlLengthLimit})}update(f,{count:u}={}){var c;const{url:w,headers:N}=this.cloneRequestState();return u&&N.append("Prefer",`count=${u}`),new m({method:"PATCH",url:w,headers:N,schema:this.schema,body:f,fetch:null!==(c=this.fetch)&&void 0!==c?c:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:f}={}){var u;const{url:d,headers:w}=this.cloneRequestState();return f&&w.append("Prefer",`count=${f}`),new m({method:"DELETE",url:d,headers:w,schema:this.schema,fetch:null!==(u=this.fetch)&&void 0!==u?u:fetch,urlLengthLimit:this.urlLengthLimit})}};function _(f){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(f)}function K(f,u,c){return(u=function L(f){var u=function D(f,u){if("object"!=_(f)||!f)return f;var c=f[Symbol.toPrimitive];if(void 0!==c){var d=c.call(f,u||"default");if("object"!=_(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(f)}(f,"string");return"symbol"==_(u)?u:u+""}(u))in f?Object.defineProperty(f,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):f[u]=c,f}function ae(f,u){var c=Object.keys(f);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(f);u&&(d=d.filter(function(w){return Object.getOwnPropertyDescriptor(f,w).enumerable})),c.push.apply(c,d)}return c}function B(f){for(var u=1;u<arguments.length;u++){var c=null!=arguments[u]?arguments[u]:{};u%2?ae(Object(c),!0).forEach(function(d){K(f,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(c)):ae(Object(c)).forEach(function(d){Object.defineProperty(f,d,Object.getOwnPropertyDescriptor(c,d))})}return f}var Z=class py{constructor(u,{headers:c={},schema:d,fetch:w,timeout:N,urlLengthLimit:V=8e3}={}){this.url=u,this.headers=new Headers(c),this.schemaName=d,this.urlLengthLimit=V;const te=w??globalThis.fetch;this.fetch=void 0!==N&&N>0?(Ie,Be)=>{const h=new AbortController,E=setTimeout(()=>h.abort(),N),y=Be?.signal;if(y){if(y.aborted)return clearTimeout(E),te(Ie,Be);const I=()=>{clearTimeout(E),h.abort()};return y.addEventListener("abort",I,{once:!0}),te(Ie,B(B({},Be),{},{signal:h.signal})).finally(()=>{clearTimeout(E),y.removeEventListener("abort",I)})}return te(Ie,B(B({},Be),{},{signal:h.signal})).finally(()=>clearTimeout(E))}:te}from(u){if(!u||"string"!=typeof u||""===u.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");return new v(new URL(`${this.url}/${u}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(u){return new py(this.url,{headers:this.headers,schema:u,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(u,c={},{head:d=!1,get:w=!1,count:N}={}){var V;let te;const Ie=new URL(`${this.url}/rpc/${u}`);let Be;const h=I=>null!==I&&"object"==typeof I&&(!Array.isArray(I)||I.some(h)),E=d&&Object.values(c).some(h);E?(te="POST",Be=c):d||w?(te=d?"HEAD":"GET",Object.entries(c).filter(([I,F])=>void 0!==F).map(([I,F])=>[I,Array.isArray(F)?`{${F.join(",")}}`:`${F}`]).forEach(([I,F])=>{Ie.searchParams.append(I,F)})):(te="POST",Be=c);const y=new Headers(this.headers);return E?y.set("Prefer",N?`count=${N},return=minimal`:"return=minimal"):N&&y.set("Prefer",`count=${N}`),new m({method:te,url:Ie,headers:y,schema:this.schemaName,body:Be,fetch:null!==(V=this.fetch)&&void 0!==V?V:fetch,urlLengthLimit:this.urlLengthLimit})}};const fe=class he{constructor(){}static detectEnvironment(){var u;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(u=navigator.userAgent)&&void 0!==u&&u.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const c=globalThis.process;if(c){const d=c.versions;if(d&&d.node){const N=parseInt(d.node.replace(/^v/,"").split(".")[0]);return N>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${N} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${N} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const u=this.detectEnvironment();if(u.constructor)return u.constructor;let c=u.error||"WebSocket not supported in this environment.";throw u.workaround&&(c+=`\n\nSuggested solution: ${u.workaround}`),new Error(c)}static createWebSocket(u,c){return new(this.getWebSocketConstructor())(u,c)}static isWebSocketSupported(){try{const u=this.detectEnvironment();return"native"===u.type||"ws"===u.type}catch{return!1}}};var rt=function(f){return f[f.connecting=0]="connecting",f[f.open=1]="open",f[f.closing=2]="closing",f[f.closed=3]="closed",f}(rt||{}),Ve=function(f){return f.closed="closed",f.errored="errored",f.joined="joined",f.joining="joining",f.leaving="leaving",f}(Ve||{}),Ae=function(f){return f.close="phx_close",f.error="phx_error",f.join="phx_join",f.reply="phx_reply",f.leave="phx_leave",f.access_token="access_token",f}(Ae||{}),H=function(f){return f.websocket="websocket",f}(H||{}),ye=function(f){return f.Connecting="connecting",f.Open="open",f.Closing="closing",f.Closed="closed",f}(ye||{});class Me{constructor(u){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=u??[]}encode(u,c){return u.event!==this.BROADCAST_EVENT||u.payload instanceof ArrayBuffer||"string"!=typeof u.payload.event?c(JSON.stringify([u.join_ref,u.ref,u.topic,u.event,u.payload])):c(this._binaryEncodeUserBroadcastPush(u))}_binaryEncodeUserBroadcastPush(u){var c;return this._isArrayBuffer(null===(c=u.payload)||void 0===c?void 0:c.payload)?this._encodeBinaryUserBroadcastPush(u):this._encodeJsonUserBroadcastPush(u)}_encodeBinaryUserBroadcastPush(u){var c,d;const w=null!==(d=null===(c=u.payload)||void 0===c?void 0:c.payload)&&void 0!==d?d:new ArrayBuffer(0);return this._encodeUserBroadcastPush(u,this.BINARY_ENCODING,w)}_encodeJsonUserBroadcastPush(u){var c,d;const w=null!==(d=null===(c=u.payload)||void 0===c?void 0:c.payload)&&void 0!==d?d:{},V=(new TextEncoder).encode(JSON.stringify(w)).buffer;return this._encodeUserBroadcastPush(u,this.JSON_ENCODING,V)}_encodeUserBroadcastPush(u,c,d){var w,N;const V=u.topic,te=null!==(w=u.ref)&&void 0!==w?w:"",Ie=null!==(N=u.join_ref)&&void 0!==N?N:"",Be=u.payload.event,h=this.allowedMetadataKeys?this._pick(u.payload,this.allowedMetadataKeys):{},E=0===Object.keys(h).length?"":JSON.stringify(h);if(Ie.length>255)throw new Error(`joinRef length ${Ie.length} exceeds maximum of 255`);if(te.length>255)throw new Error(`ref length ${te.length} exceeds maximum of 255`);if(V.length>255)throw new Error(`topic length ${V.length} exceeds maximum of 255`);if(Be.length>255)throw new Error(`userEvent length ${Be.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const I=new ArrayBuffer(this.HEADER_LENGTH+(this.USER_BROADCAST_PUSH_META_LENGTH+Ie.length+te.length+V.length+Be.length+E.length));let F=new DataView(I),J=0;F.setUint8(J++,this.KINDS.userBroadcastPush),F.setUint8(J++,Ie.length),F.setUint8(J++,te.length),F.setUint8(J++,V.length),F.setUint8(J++,Be.length),F.setUint8(J++,E.length),F.setUint8(J++,c),Array.from(Ie,qe=>F.setUint8(J++,qe.charCodeAt(0))),Array.from(te,qe=>F.setUint8(J++,qe.charCodeAt(0))),Array.from(V,qe=>F.setUint8(J++,qe.charCodeAt(0))),Array.from(Be,qe=>F.setUint8(J++,qe.charCodeAt(0))),Array.from(E,qe=>F.setUint8(J++,qe.charCodeAt(0)));var De=new Uint8Array(I.byteLength+d.byteLength);return De.set(new Uint8Array(I),0),De.set(new Uint8Array(d),I.byteLength),De.buffer}decode(u,c){if(this._isArrayBuffer(u))return c(this._binaryDecode(u));if("string"==typeof u){const d=JSON.parse(u),[w,N,V,te,Ie]=d;return c({join_ref:w,ref:N,topic:V,event:te,payload:Ie})}return c({})}_binaryDecode(u){const c=new DataView(u),d=c.getUint8(0),w=new TextDecoder;if(d===this.KINDS.userBroadcast)return this._decodeUserBroadcast(u,c,w)}_decodeUserBroadcast(u,c,d){const w=c.getUint8(1),N=c.getUint8(2),V=c.getUint8(3),te=c.getUint8(4);let Ie=this.HEADER_LENGTH+4;const Be=d.decode(u.slice(Ie,Ie+w));Ie+=w;const h=d.decode(u.slice(Ie,Ie+N));Ie+=N;const E=d.decode(u.slice(Ie,Ie+V));Ie+=V;const y=u.slice(Ie,u.byteLength),I=te===this.JSON_ENCODING?JSON.parse(d.decode(y)):y,F={type:this.BROADCAST_EVENT,event:h,payload:I};return V>0&&(F.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:Be,event:this.BROADCAST_EVENT,payload:F}}_isArrayBuffer(u){var c;return u instanceof ArrayBuffer||"ArrayBuffer"===(null===(c=u?.constructor)||void 0===c?void 0:c.name)}_pick(u,c){return u&&"object"==typeof u?Object.fromEntries(Object.entries(u).filter(([d])=>c.includes(d))):{}}}class He{constructor(u,c){this.callback=u,this.timerCalc=c,this.timer=void 0,this.tries=0,this.callback=u,this.timerCalc=c}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ot=function(f){return f.abstime="abstime",f.bool="bool",f.date="date",f.daterange="daterange",f.float4="float4",f.float8="float8",f.int2="int2",f.int4="int4",f.int4range="int4range",f.int8="int8",f.int8range="int8range",f.json="json",f.jsonb="jsonb",f.money="money",f.numeric="numeric",f.oid="oid",f.reltime="reltime",f.text="text",f.time="time",f.timestamp="timestamp",f.timestamptz="timestamptz",f.timetz="timetz",f.tsrange="tsrange",f.tstzrange="tstzrange",f}(ot||{});const pt=(f,u,c={})=>{var d;const w=null!==(d=c.skipTypes)&&void 0!==d?d:[];return u?Object.keys(u).reduce((N,V)=>(N[V]=At(V,f,u,w),N),{}):{}},At=(f,u,c,d)=>{const w=u.find(te=>te.name===f),N=w?.type,V=c[f];return N&&!d.includes(N)?vt(N,V):Ut(V)},vt=(f,u)=>{if("_"===f.charAt(0)){const c=f.slice(1,f.length);return Nt(u,c)}switch(f){case ot.bool:return dt(u);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return Bt(u);case ot.json:case ot.jsonb:return ht(u);case ot.timestamp:return Ot(u);default:return Ut(u)}},Ut=f=>f,dt=f=>{switch(f){case"t":return!0;case"f":return!1;default:return f}},Bt=f=>{if("string"==typeof f){const u=parseFloat(f);if(!Number.isNaN(u))return u}return f},ht=f=>{if("string"==typeof f)try{return JSON.parse(f)}catch{return f}return f},Nt=(f,u)=>{if("string"!=typeof f)return f;const c=f.length-1;if("{"===f[0]&&"}"===f[c]){let N;const V=f.slice(1,c);try{N=JSON.parse("["+V+"]")}catch{N=V?V.split(","):[]}return N.map(te=>vt(u,te))}return f},Ot=f=>"string"==typeof f?f.replace(" ","T"):f,on=f=>{const u=new URL(f);return u.protocol=u.protocol.replace(/^ws/i,"http"),u.pathname=u.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),u.pathname=""===u.pathname||"/"===u.pathname?"/api/broadcast":u.pathname+"/api/broadcast",u.href};class ft{constructor(u,c,d={},w=1e4){this.channel=u,this.event=c,this.payload=d,this.timeout=w,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(u){this.timeout=u,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(u){this.payload=Object.assign(Object.assign({},this.payload),u)}receive(u,c){var d;return this._hasReceived(u)&&c(null===(d=this.receivedResp)||void 0===d?void 0:d.response),this.recHooks.push({status:u,callback:c}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},c=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=c,this._matchReceive(c)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(u,c){this.refEvent&&this.channel._trigger(this.refEvent,{status:u,response:c})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:u,response:c}){this.recHooks.filter(d=>d.status===u).forEach(d=>d.callback(c))}_hasReceived(u){return this.receivedResp&&this.receivedResp.status===u}}class Dt{constructor(u,c){this.channel=u,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const d=c?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(d.state,{},w=>{const{onJoin:N,onLeave:V,onSync:te}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dt.syncState(this.state,w,N,V),this.pendingDiffs.forEach(Ie=>{this.state=Dt.syncDiff(this.state,Ie,N,V)}),this.pendingDiffs=[],te()}),this.channel._on(d.diff,{},w=>{const{onJoin:N,onLeave:V,onSync:te}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(w):(this.state=Dt.syncDiff(this.state,w,N,V),te())}),this.onJoin((w,N,V)=>{this.channel._trigger("presence",{event:"join",key:w,currentPresences:N,newPresences:V})}),this.onLeave((w,N,V)=>{this.channel._trigger("presence",{event:"leave",key:w,currentPresences:N,leftPresences:V})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(u,c,d,w){const N=this.cloneDeep(u),V=this.transformState(c),te={},Ie={};return this.map(N,(Be,h)=>{V[Be]||(Ie[Be]=h)}),this.map(V,(Be,h)=>{const E=N[Be];if(E){const y=h.map(De=>De.presence_ref),I=E.map(De=>De.presence_ref),F=h.filter(De=>I.indexOf(De.presence_ref)<0),J=E.filter(De=>y.indexOf(De.presence_ref)<0);F.length>0&&(te[Be]=F),J.length>0&&(Ie[Be]=J)}else te[Be]=h}),this.syncDiff(N,{joins:te,leaves:Ie},d,w)}static syncDiff(u,c,d,w){const{joins:N,leaves:V}={joins:this.transformState(c.joins),leaves:this.transformState(c.leaves)};return d||(d=()=>{}),w||(w=()=>{}),this.map(N,(te,Ie)=>{var Be;const h=null!==(Be=u[te])&&void 0!==Be?Be:[];if(u[te]=this.cloneDeep(Ie),h.length>0){const E=u[te].map(I=>I.presence_ref),y=h.filter(I=>E.indexOf(I.presence_ref)<0);u[te].unshift(...y)}d(te,h,Ie)}),this.map(V,(te,Ie)=>{let Be=u[te];if(!Be)return;const h=Ie.map(E=>E.presence_ref);Be=Be.filter(E=>h.indexOf(E.presence_ref)<0),u[te]=Be,w(te,Be,Ie),0===Be.length&&delete u[te]}),u}static map(u,c){return Object.getOwnPropertyNames(u).map(d=>c(d,u[d]))}static transformState(u){return u=this.cloneDeep(u),Object.getOwnPropertyNames(u).reduce((c,d)=>{const w=u[d];return c[d]="metas"in w?w.metas.map(N=>(N.presence_ref=N.phx_ref,delete N.phx_ref,delete N.phx_ref_prev,N)):w,c},{})}static cloneDeep(u){return JSON.parse(JSON.stringify(u))}onJoin(u){this.caller.onJoin=u}onLeave(u){this.caller.onLeave=u}onSync(u){this.caller.onSync=u}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Cn=function(f){return f.BROADCAST="broadcast",f.PRESENCE="presence",f.POSTGRES_CHANGES="postgres_changes",f.SYSTEM="system",f}(Cn||{}),Vn=function(f){return f.SUBSCRIBED="SUBSCRIBED",f.TIMED_OUT="TIMED_OUT",f.CLOSED="CLOSED",f.CHANNEL_ERROR="CHANNEL_ERROR",f}(Vn||{});class hn{constructor(u,c={config:{}},d){var w,N;if(this.topic=u,this.params=c,this.socket=d,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=u.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},c.config),this.timeout=this.socket.timeout,this.joinPush=new ft(this,Ae.join,this.params,this.timeout),this.rejoinTimer=new He(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(V=>V.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(V=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,V),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",V=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,V),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ae.reply,{},(V,te)=>{this._trigger(this._replyEventName(te),V)}),this.presence=new Dt(this),this.broadcastEndpointURL=on(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(N=null===(w=this.params.config)||void 0===w?void 0:w.broadcast)&&void 0!==N&&N.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(u,c=this.timeout){var w,N,V,d=this;if(this.socket.isConnected()||this.socket.connect(),this.state==Ve.closed){const{config:{broadcast:te,presence:Ie,private:Be}}=this.params,h=null!==(N=null===(w=this.bindings.postgres_changes)||void 0===w?void 0:w.map(F=>F.filter))&&void 0!==N?N:[],E=!!this.bindings[Cn.PRESENCE]&&this.bindings[Cn.PRESENCE].length>0||!0===(null===(V=this.params.config.presence)||void 0===V?void 0:V.enabled),y={},I={broadcast:te,presence:Object.assign(Object.assign({},Ie),{enabled:E}),postgres_changes:h,private:Be};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(F=>u?.(Vn.CHANNEL_ERROR,F)),this._onClose(()=>u?.(Vn.CLOSED)),this.updateJoinPayload(Object.assign({config:I},y)),this.joinedOnce=!0,this._rejoin(c),this.joinPush.receive("ok",function(){var F=(0,s.A)(function*({postgres_changes:J}){var De;if(d.socket._isManualToken()||d.socket.setAuth(),void 0!==J){const qe=d.bindings.postgres_changes,gt=null!==(De=qe?.length)&&void 0!==De?De:0,Ht=[];for(let dn=0;dn<gt;dn++){const mn=qe[dn],{filter:{event:pr,schema:co,table:lr,filter:Gr}}=mn,mo=J&&J[dn];if(!(mo&&mo.event===pr&&hn.isFilterValueEqual(mo.schema,co)&&hn.isFilterValueEqual(mo.table,lr)&&hn.isFilterValueEqual(mo.filter,Gr)))return d.unsubscribe(),d.state=Ve.errored,void u?.(Vn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));Ht.push(Object.assign(Object.assign({},mn),{id:mo.id}))}return d.bindings.postgres_changes=Ht,void(u&&u(Vn.SUBSCRIBED))}u?.(Vn.SUBSCRIBED)});return function(J){return F.apply(this,arguments)}}()).receive("error",F=>{this.state=Ve.errored,u?.(Vn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(F).join(", ")||"error")))}).receive("timeout",()=>{u?.(Vn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(u){var c=this;return(0,s.A)(function*(d,w={}){return yield c.send({type:"presence",event:"track",payload:d},w.timeout||c.timeout)}).apply(this,arguments)}untrack(){var u=this;return(0,s.A)(function*(c={}){return yield u.send({type:"presence",event:"untrack"},c)}).apply(this,arguments)}on(u,c,d){var w=this;return this.state===Ve.joined&&u===Cn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then((0,s.A)(function*(){return yield w.subscribe()}))),this._on(u,c,d)}httpSend(u,c){var d=this;return(0,s.A)(function*(w,N,V={}){var te;if(null==N)return Promise.reject("Payload is required for httpSend()");const Ie={apikey:d.socket.apiKey?d.socket.apiKey:"","Content-Type":"application/json"};d.socket.accessTokenValue&&(Ie.Authorization=`Bearer ${d.socket.accessTokenValue}`);const Be={method:"POST",headers:Ie,body:JSON.stringify({messages:[{topic:d.subTopic,event:w,payload:N,private:d.private}]})},h=yield d._fetchWithTimeout(d.broadcastEndpointURL,Be,null!==(te=V.timeout)&&void 0!==te?te:d.timeout);if(202===h.status)return{success:!0};let E=h.statusText;try{const y=yield h.json();E=y.error||y.message||E}catch{}return Promise.reject(new Error(E))}).apply(this,arguments)}send(u){var c=this;return(0,s.A)(function*(d,w={}){var N,V;if(c._canPush()||"broadcast"!==d.type)return new Promise(te=>{var Ie,Be,h;const E=c._push(d.type,d,w.timeout||c.timeout);"broadcast"===d.type&&!(null!==(h=null===(Be=null===(Ie=c.params)||void 0===Ie?void 0:Ie.config)||void 0===Be?void 0:Be.broadcast)&&void 0!==h&&h.ack)&&te("ok"),E.receive("ok",()=>te("ok")),E.receive("error",()=>te("error")),E.receive("timeout",()=>te("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:te,payload:Ie}=d,Be={apikey:c.socket.apiKey?c.socket.apiKey:"","Content-Type":"application/json"};c.socket.accessTokenValue&&(Be.Authorization=`Bearer ${c.socket.accessTokenValue}`);const h={method:"POST",headers:Be,body:JSON.stringify({messages:[{topic:c.subTopic,event:te,payload:Ie,private:c.private}]})};try{const E=yield c._fetchWithTimeout(c.broadcastEndpointURL,h,null!==(N=w.timeout)&&void 0!==N?N:c.timeout);return yield null===(V=E.body)||void 0===V?void 0:V.cancel(),E.ok?"ok":"error"}catch(E){return"AbortError"===E.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(u){this.joinPush.updatePayload(u)}unsubscribe(u=this.timeout){this.state=Ve.leaving;const c=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ae.close,"leave",this._joinRef())};this.joinPush.destroy();let d=null;return new Promise(w=>{d=new ft(this,Ae.leave,{},u),d.receive("ok",()=>{c(),w("ok")}).receive("timeout",()=>{c(),w("timed out")}).receive("error",()=>{w("error")}),d.send(),this._canPush()||d.trigger("ok",{})}).finally(()=>{d?.destroy()})}teardown(){this.pushBuffer.forEach(u=>u.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ve.closed,this.bindings={}}_fetchWithTimeout(u,c,d){var w=this;return(0,s.A)(function*(){const N=new AbortController,V=setTimeout(()=>N.abort(),d),te=yield w.socket.fetch(u,Object.assign(Object.assign({},c),{signal:N.signal}));return clearTimeout(V),te})()}_push(u,c,d=this.timeout){if(!this.joinedOnce)throw`tried to push '${u}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let w=new ft(this,u,c,d);return this._canPush()?w.send():this._addToPushBuffer(w),w}_addToPushBuffer(u){if(u.startTimeout(),this.pushBuffer.push(u),this.pushBuffer.length>100){const c=this.pushBuffer.shift();c&&(c.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${c.event}`,c.payload))}}_onMessage(u,c,d){return c}_isMember(u){return this.topic===u}_joinRef(){return this.joinPush.ref}_trigger(u,c,d){var w,N;const V=u.toLocaleLowerCase(),{close:te,error:Ie,leave:Be,join:h}=Ae;if(d&&[te,Ie,Be,h].indexOf(V)>=0&&d!==this._joinRef())return;let y=this._onMessage(V,c,d);if(c&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(V)?null===(w=this.bindings.postgres_changes)||void 0===w||w.filter(I=>{var F,J,De;return"*"===(null===(F=I.filter)||void 0===F?void 0:F.event)||(null===(De=null===(J=I.filter)||void 0===J?void 0:J.event)||void 0===De?void 0:De.toLocaleLowerCase())===V}).map(I=>I.callback(y,d)):null===(N=this.bindings[V])||void 0===N||N.filter(I=>{var F,J,De,qe,gt,Ht;if(["broadcast","presence","postgres_changes"].includes(V)){if("id"in I){const dn=I.id,mn=null===(F=I.filter)||void 0===F?void 0:F.event;return dn&&(null===(J=c.ids)||void 0===J?void 0:J.includes(dn))&&("*"===mn||mn?.toLocaleLowerCase()===(null===(De=c.data)||void 0===De?void 0:De.type.toLocaleLowerCase()))}{const dn=null===(gt=null===(qe=I?.filter)||void 0===qe?void 0:qe.event)||void 0===gt?void 0:gt.toLocaleLowerCase();return"*"===dn||dn===(null===(Ht=c?.event)||void 0===Ht?void 0:Ht.toLocaleLowerCase())}}return I.type.toLocaleLowerCase()===V}).map(I=>{if("object"==typeof y&&"ids"in y){const F=y.data,{schema:J,table:De,commit_timestamp:qe,type:gt,errors:Ht}=F;y=Object.assign(Object.assign({},{schema:J,table:De,commit_timestamp:qe,eventType:gt,new:{},old:{},errors:Ht}),this._getPayloadRecords(F))}I.callback(y,d)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(u){return`chan_reply_${u}`}_on(u,c,d){const w=u.toLocaleLowerCase(),N={type:w,filter:c,callback:d};return this.bindings[w]?this.bindings[w].push(N):this.bindings[w]=[N],this}_off(u,c){const d=u.toLocaleLowerCase();return this.bindings[d]&&(this.bindings[d]=this.bindings[d].filter(w=>{var N;return!((null===(N=w.type)||void 0===N?void 0:N.toLocaleLowerCase())===d&&hn.isEqual(w.filter,c))})),this}static isEqual(u,c){if(Object.keys(u).length!==Object.keys(c).length)return!1;for(const d in u)if(u[d]!==c[d])return!1;return!0}static isFilterValueEqual(u,c){return(u??void 0)===(c??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(u){this._on(Ae.close,{},u)}_onError(u){this._on(Ae.error,{},c=>u(c))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(u=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(u))}_getPayloadRecords(u){const c={new:{},old:{}};return("INSERT"===u.type||"UPDATE"===u.type)&&(c.new=pt(u.columns,u.record)),("UPDATE"===u.type||"DELETE"===u.type)&&(c.old=pt(u.columns,u.old_record)),c}}const Pt=()=>{},Tt=[1e3,2e3,5e3,1e4];class pn{constructor(u,c){var d;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pt,this.ref=0,this.reconnectTimer=null,this.vsn="2.0.0",this.logger=Pt,this.conn=null,this.sendBuffer=[],this.serializer=new Me,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=w=>w?(...N)=>w(...N):(...N)=>fetch(...N),null===(d=c?.params)||void 0===d||!d.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=c.params.apikey,this.endPoint=`${u}/${H.websocket}`,this.httpEndpoint=on(u),this._initializeOptions(c),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(c?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fe.createWebSocket(this.endpointURL())}catch(u){this._setConnectionState("disconnected");const c=u.message;throw c.includes("Node.js")?new Error(`${c}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${c}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(u,c){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const d=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(d),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(u?this.conn.close(u,c??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(u){var c=this;return(0,s.A)(function*(){const d=yield u.unsubscribe();return"ok"===d&&c._remove(u),0===c.channels.length&&c.disconnect(),d})()}removeAllChannels(){var u=this;return(0,s.A)(function*(){const c=yield Promise.all(u.channels.map(d=>d.unsubscribe()));return u.channels=[],u.disconnect(),c})()}log(u,c,d){this.logger(u,c,d)}connectionState(){switch(this.conn&&this.conn.readyState){case rt.connecting:return ye.Connecting;case rt.open:return ye.Open;case rt.closing:return ye.Closing;default:return ye.Closed}}isConnected(){return this.connectionState()===ye.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(u,c={config:{}}){const d=`realtime:${u}`,w=this.getChannels().find(N=>N.topic===d);if(w)return w;{const N=new hn(`realtime:${u}`,c,this);return this.channels.push(N),N}}push(u){const{topic:c,event:d,payload:w,ref:N}=u,V=()=>{this.encode(u,te=>{var Ie;null===(Ie=this.conn)||void 0===Ie||Ie.send(te)})};this.log("push",`${c} ${d} (${N})`,w),this.isConnected()?V():this.sendBuffer.push(V)}setAuth(){var u=this;return(0,s.A)(function*(c=null){u._authPromise=u._performAuth(c);try{yield u._authPromise}finally{u._authPromise=null}}).apply(this,arguments)}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){var u=this;return(0,s.A)(function*(){var c;if(u.isConnected()){if(u.pendingHeartbeatRef){u.pendingHeartbeatRef=null,u._heartbeatSentAt=null,u.log("transport","heartbeat timeout. Attempting to re-establish connection");try{u.heartbeatCallback("timeout")}catch(d){u.log("error","error in heartbeat callback",d)}return u._wasManualDisconnect=!1,null===(c=u.conn)||void 0===c||c.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var d;u.isConnected()||null===(d=u.reconnectTimer)||void 0===d||d.scheduleTimeout()},100)}u._heartbeatSentAt=Date.now(),u.pendingHeartbeatRef=u._makeRef(),u.push({topic:"phoenix",event:"heartbeat",payload:{},ref:u.pendingHeartbeatRef});try{u.heartbeatCallback("sent")}catch(d){u.log("error","error in heartbeat callback",d)}u._setAuthSafely("heartbeat")}else try{u.heartbeatCallback("disconnected")}catch(d){u.log("error","error in heartbeat callback",d)}})()}onHeartbeat(u){this.heartbeatCallback=u}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(u=>u()),this.sendBuffer=[])}_makeRef(){let u=this.ref+1;return this.ref=u===this.ref?0:u,this.ref.toString()}_leaveOpenTopic(u){let c=this.channels.find(d=>d.topic===u&&(d._isJoined()||d._isJoining()));c&&(this.log("transport",`leaving duplicate topic "${u}"`),c.unsubscribe())}_remove(u){this.channels=this.channels.filter(c=>c.topic!==u.topic)}_onConnMessage(u){this.decode(u.data,c=>{if("phoenix"===c.topic&&"phx_reply"===c.event&&c.ref&&c.ref===this.pendingHeartbeatRef){const Be=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback("ok"===c.payload.status?"ok":"error",Be)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:d,event:w,payload:N,ref:V}=c;this.log("receive",`${N.status||""} ${d} ${w} ${V?`(${V})`:""}`.trim(),N),this.channels.filter(Be=>Be._isMember(d)).forEach(Be=>Be._trigger(w,N,V)),this._triggerStateCallbacks("message",c)})}_clearTimer(u){var c;"heartbeat"===u&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===u&&(null===(c=this.reconnectTimer)||void 0===c||c.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=u=>this._onConnError(u),this.conn.onmessage=u=>this._onConnMessage(u),this.conn.onclose=u=>this._onConnClose(u),this.conn.readyState===rt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===rt.open||this.conn.readyState===rt.connecting)try{this.conn.close()}catch(u){this.log("error","Error closing connection",u)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(u=>u.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(c=>{this.log("error","error waiting for auth on connect",c),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const u=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(u),this.workerRef.onerror=c=>{this.log("worker","worker error",c.message),this._terminateWorker()},this.workerRef.onmessage=c=>{"keepAlive"===c.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(u){var c;this._setConnectionState("disconnected"),this.log("transport","close",u),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(c=this.reconnectTimer)||void 0===c||c.scheduleTimeout(),this._triggerStateCallbacks("close",u)}_onConnError(u){this._setConnectionState("disconnected"),this.log("transport",`${u}`),this._triggerChanError(),this._triggerStateCallbacks("error",u);try{this.heartbeatCallback("error")}catch(c){this.log("error","error in heartbeat callback",c)}}_triggerChanError(){this.channels.forEach(u=>u._trigger(Ae.error))}_appendParams(u,c){if(0===Object.keys(c).length)return u;const d=u.match(/\?/)?"&":"?";return`${u}${d}${new URLSearchParams(c)}`}_workerObjectUrl(u){let c;if(u)c=u;else{const d=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});c=URL.createObjectURL(d)}return c}_setConnectionState(u,c=!1){this._connectionState=u,"connecting"===u?this._wasManualDisconnect=!1:"disconnecting"===u&&(this._wasManualDisconnect=c)}_performAuth(){var u=this;return(0,s.A)(function*(c=null){let d,w=!1;if(c)d=c,w=!0;else if(u.accessToken)try{d=yield u.accessToken()}catch(N){u.log("error","Error fetching access token from callback",N),d=u.accessTokenValue}else d=u.accessTokenValue;w?u._manuallySetToken=!0:u.accessToken&&(u._manuallySetToken=!1),u.accessTokenValue!=d&&(u.accessTokenValue=d,u.channels.forEach(N=>{d&&N.updateJoinPayload({access_token:d,version:"realtime-js/2.95.0"}),N.joinedOnce&&N._isJoined()&&N._push(Ae.access_token,{access_token:d})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var u=this;return(0,s.A)(function*(){u._authPromise&&(yield u._authPromise)})()}_setAuthSafely(u="general"){this._isManualToken()||this.setAuth().catch(c=>{this.log("error",`Error setting auth in ${u}`,c)})}_triggerStateCallbacks(u,c){try{this.stateChangeCallbacks[u].forEach(d=>{try{d(c)}catch(w){this.log("error",`error in ${u} callback`,w)}})}catch(d){this.log("error",`error triggering ${u} callbacks`,d)}}_setupReconnectionTimer(){var u=this;this.reconnectTimer=new He((0,s.A)(function*(){setTimeout((0,s.A)(function*(){yield u._waitForAuthIfNeeded(),u.isConnected()||u.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(u){var c,d,w,N,V,te,Ie,Be,h,E,y,I;switch(this.transport=null!==(c=u?.transport)&&void 0!==c?c:null,this.timeout=null!==(d=u?.timeout)&&void 0!==d?d:1e4,this.heartbeatIntervalMs=null!==(w=u?.heartbeatIntervalMs)&&void 0!==w?w:25e3,this.worker=null!==(N=u?.worker)&&void 0!==N&&N,this.accessToken=null!==(V=u?.accessToken)&&void 0!==V?V:null,this.heartbeatCallback=null!==(te=u?.heartbeatCallback)&&void 0!==te?te:Pt,this.vsn=null!==(Ie=u?.vsn)&&void 0!==Ie?Ie:"2.0.0",u?.params&&(this.params=u.params),u?.logger&&(this.logger=u.logger),(u?.logLevel||u?.log_level)&&(this.logLevel=u.logLevel||u.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(Be=u?.reconnectAfterMs)&&void 0!==Be?Be:F=>Tt[F-1]||1e4,this.vsn){case"1.0.0":this.encode=null!==(h=u?.encode)&&void 0!==h?h:(F,J)=>J(JSON.stringify(F)),this.decode=null!==(E=u?.decode)&&void 0!==E?E:(F,J)=>J(JSON.parse(F));break;case"2.0.0":this.encode=null!==(y=u?.encode)&&void 0!==y?y:this.serializer.encode.bind(this.serializer),this.decode=null!==(I=u?.decode)&&void 0!==I?I:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=u?.workerUrl}}}var An=class extends Error{constructor(f,u){super(f),this.name="IcebergError",this.status=u.status,this.icebergType=u.icebergType,this.icebergCode=u.icebergCode,this.details=u.details,this.isCommitStateUnknown="CommitStateUnknownException"===u.icebergType||[500,502,504].includes(u.status)&&!0===u.icebergType?.includes("CommitState")}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function Hn(){return(Hn=(0,s.A)(function*(f){return f&&"none"!==f.type?"bearer"===f.type?{Authorization:`Bearer ${f.token}`}:"header"===f.type?{[f.name]:f.value}:"custom"===f.type?yield f.getHeaders():{}:{}})).apply(this,arguments)}function gr(f){return f.join("\x1f")}var Sr=class{constructor(f,u=""){this.client=f,this.prefix=u}listNamespaces(f){var u=this;return(0,s.A)(function*(){const c=f?{parent:gr(f.namespace)}:void 0;return(yield u.client.request({method:"GET",path:`${u.prefix}/namespaces`,query:c})).data.namespaces.map(w=>({namespace:w}))})()}createNamespace(f,u){var c=this;return(0,s.A)(function*(){const d={namespace:f.namespace,properties:u?.properties};return(yield c.client.request({method:"POST",path:`${c.prefix}/namespaces`,body:d})).data})()}dropNamespace(f){var u=this;return(0,s.A)(function*(){yield u.client.request({method:"DELETE",path:`${u.prefix}/namespaces/${gr(f.namespace)}`})})()}loadNamespaceMetadata(f){var u=this;return(0,s.A)(function*(){return{properties:(yield u.client.request({method:"GET",path:`${u.prefix}/namespaces/${gr(f.namespace)}`})).data.properties}})()}namespaceExists(f){var u=this;return(0,s.A)(function*(){try{return yield u.client.request({method:"HEAD",path:`${u.prefix}/namespaces/${gr(f.namespace)}`}),!0}catch(c){if(c instanceof An&&404===c.status)return!1;throw c}})()}createNamespaceIfNotExists(f,u){var c=this;return(0,s.A)(function*(){try{return yield c.createNamespace(f,u)}catch(d){if(d instanceof An&&409===d.status)return;throw d}})()}};function Ar(f){return f.join("\x1f")}var Jn=class{constructor(f,u="",c){this.client=f,this.prefix=u,this.accessDelegation=c}listTables(f){var u=this;return(0,s.A)(function*(){return(yield u.client.request({method:"GET",path:`${u.prefix}/namespaces/${Ar(f.namespace)}/tables`})).data.identifiers})()}createTable(f,u){var c=this;return(0,s.A)(function*(){const d={};return c.accessDelegation&&(d["X-Iceberg-Access-Delegation"]=c.accessDelegation),(yield c.client.request({method:"POST",path:`${c.prefix}/namespaces/${Ar(f.namespace)}/tables`,body:u,headers:d})).data.metadata})()}updateTable(f,u){var c=this;return(0,s.A)(function*(){const d=yield c.client.request({method:"POST",path:`${c.prefix}/namespaces/${Ar(f.namespace)}/tables/${f.name}`,body:u});return{"metadata-location":d.data["metadata-location"],metadata:d.data.metadata}})()}dropTable(f,u){var c=this;return(0,s.A)(function*(){yield c.client.request({method:"DELETE",path:`${c.prefix}/namespaces/${Ar(f.namespace)}/tables/${f.name}`,query:{purgeRequested:String(u?.purge??!1)}})})()}loadTable(f){var u=this;return(0,s.A)(function*(){const c={};return u.accessDelegation&&(c["X-Iceberg-Access-Delegation"]=u.accessDelegation),(yield u.client.request({method:"GET",path:`${u.prefix}/namespaces/${Ar(f.namespace)}/tables/${f.name}`,headers:c})).data.metadata})()}tableExists(f){var u=this;return(0,s.A)(function*(){const c={};u.accessDelegation&&(c["X-Iceberg-Access-Delegation"]=u.accessDelegation);try{return yield u.client.request({method:"HEAD",path:`${u.prefix}/namespaces/${Ar(f.namespace)}/tables/${f.name}`,headers:c}),!0}catch(d){if(d instanceof An&&404===d.status)return!1;throw d}})()}createTableIfNotExists(f,u){var c=this;return(0,s.A)(function*(){try{return yield c.createTable(f,u)}catch(d){if(d instanceof An&&409===d.status)return yield c.loadTable({namespace:f.namespace,name:u.name});throw d}})()}},er=class{constructor(f){let u="v1";f.catalogName&&(u+=`/${f.catalogName}`);const c=f.baseUrl.endsWith("/")?f.baseUrl:`${f.baseUrl}/`;this.client=function ur(f){const u=f.fetchImpl??globalThis.fetch;return{request(c){return(0,s.A)(function*({method:d,path:w,query:N,body:V,headers:te}){const Ie=function or(f,u,c){const d=new URL(u,f);if(c)for(const[w,N]of Object.entries(c))void 0!==N&&d.searchParams.set(w,N);return d.toString()}(f.baseUrl,w,N),Be=yield function Zn(f){return Hn.apply(this,arguments)}(f.auth),h=yield u(Ie,{method:d,headers:{...V?{"Content-Type":"application/json"}:{},...Be,...te},body:V?JSON.stringify(V):void 0}),E=yield h.text(),y=(h.headers.get("content-type")||"").includes("application/json"),I=y&&E?JSON.parse(E):E;if(!h.ok){const F=y?I:void 0,J=F?.error;throw new An(J?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:J?.type,icebergCode:J?.code,details:F})}return{status:h.status,headers:h.headers,data:I}}).apply(this,arguments)}}}({baseUrl:c,auth:f.auth,fetchImpl:f.fetch}),this.accessDelegation=f.accessDelegation?.join(","),this.namespaceOps=new Sr(this.client,u),this.tableOps=new Jn(this.client,u,this.accessDelegation)}listNamespaces(f){var u=this;return(0,s.A)(function*(){return u.namespaceOps.listNamespaces(f)})()}createNamespace(f,u){var c=this;return(0,s.A)(function*(){return c.namespaceOps.createNamespace(f,u)})()}dropNamespace(f){var u=this;return(0,s.A)(function*(){yield u.namespaceOps.dropNamespace(f)})()}loadNamespaceMetadata(f){var u=this;return(0,s.A)(function*(){return u.namespaceOps.loadNamespaceMetadata(f)})()}listTables(f){var u=this;return(0,s.A)(function*(){return u.tableOps.listTables(f)})()}createTable(f,u){var c=this;return(0,s.A)(function*(){return c.tableOps.createTable(f,u)})()}updateTable(f,u){var c=this;return(0,s.A)(function*(){return c.tableOps.updateTable(f,u)})()}dropTable(f,u){var c=this;return(0,s.A)(function*(){yield c.tableOps.dropTable(f,u)})()}loadTable(f){var u=this;return(0,s.A)(function*(){return u.tableOps.loadTable(f)})()}namespaceExists(f){var u=this;return(0,s.A)(function*(){return u.namespaceOps.namespaceExists(f)})()}tableExists(f){var u=this;return(0,s.A)(function*(){return u.tableOps.tableExists(f)})()}createNamespaceIfNotExists(f,u){var c=this;return(0,s.A)(function*(){return c.namespaceOps.createNamespaceIfNotExists(f,u)})()}createTableIfNotExists(f,u){var c=this;return(0,s.A)(function*(){return c.tableOps.createTableIfNotExists(f,u)})()}},bn=class extends Error{constructor(f,u="storage",c,d){super(f),this.__isStorageError=!0,this.namespace=u,this.name="vectors"===u?"StorageVectorsError":"StorageError",this.status=c,this.statusCode=d}};function Xe(f){return"object"==typeof f&&null!==f&&"__isStorageError"in f}var Ze=class extends bn{constructor(f,u,c,d="storage"){super(f,d,u,c),this.name="vectors"===d?"StorageVectorsApiError":"StorageApiError",this.status=u,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},It=class extends bn{constructor(f,u,c="storage"){super(f,c),this.name="vectors"===c?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=u}};const zn=f=>{if(Array.isArray(f))return f.map(c=>zn(c));if("function"==typeof f||f!==Object(f))return f;const u={};return Object.entries(f).forEach(([c,d])=>{const w=c.replace(/([-_][a-z])/gi,N=>N.toUpperCase().replace(/[-_]/g,""));u[w]=zn(d)}),u};function sr(f){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(f)}function mr(f,u,c){return(u=function Tr(f){var u=function Kn(f,u){if("object"!=sr(f)||!f)return f;var c=f[Symbol.toPrimitive];if(void 0!==c){var d=c.call(f,u||"default");if("object"!=sr(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(f)}(f,"string");return"symbol"==sr(u)?u:u+""}(u))in f?Object.defineProperty(f,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):f[u]=c,f}function Mn(f,u){var c=Object.keys(f);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(f);u&&(d=d.filter(function(w){return Object.getOwnPropertyDescriptor(f,w).enumerable})),c.push.apply(c,d)}return c}function gn(f){for(var u=1;u<arguments.length;u++){var c=null!=arguments[u]?arguments[u]:{};u%2?Mn(Object(c),!0).forEach(function(d){mr(f,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(c)):Mn(Object(c)).forEach(function(d){Object.defineProperty(f,d,Object.getOwnPropertyDescriptor(c,d))})}return f}const Br=f=>{var u;return f.msg||f.message||f.error_description||("string"==typeof f.error?f.error:null===(u=f.error)||void 0===u?void 0:u.message)||JSON.stringify(f)},jr=function(){var f=(0,s.A)(function*(u,c,d,w){if(u&&"object"==typeof u&&"status"in u&&"ok"in u&&"number"==typeof u.status&&!d?.noResolveJson){const N=u,V=N.status||500;"function"==typeof N.json?N.json().then(te=>{const Ie=te?.statusCode||te?.code||V+"";c(new Ze(Br(te),V,Ie,w))}).catch(()=>{c(new Ze(N.statusText||`HTTP ${V} error`,V,V+"",w))}):c(new Ze(N.statusText||`HTTP ${V} error`,V,V+"",w))}else c(new It(Br(u),u,w))});return function(c,d,w,N){return f.apply(this,arguments)}}();function st(f,u,c,d,w,N,V){return tt.apply(this,arguments)}function tt(){return(tt=(0,s.A)(function*(f,u,c,d,w,N,V){return new Promise((te,Ie)=>{f(c,((f,u,c,d)=>{const w={method:f,headers:u?.headers||{}};return"GET"!==f&&"HEAD"!==f&&d?((f=>{if("object"!=typeof f||null===f)return!1;const u=Object.getPrototypeOf(f);return!(null!==u&&u!==Object.prototype&&null!==Object.getPrototypeOf(u)||Symbol.toStringTag in f||Symbol.iterator in f)})(d)?(w.headers=gn({"Content-Type":"application/json"},u?.headers),w.body=JSON.stringify(d)):w.body=d,u?.duplex&&(w.duplex=u.duplex),gn(gn({},w),c)):gn(gn({},w),c)})(u,d,w,N)).then(Be=>{if(!Be.ok)throw Be;if(d?.noResolveJson)return Be;if("vectors"===V){const h=Be.headers.get("content-type");if("0"===Be.headers.get("content-length")||204===Be.status)return{};if(!h||!h.includes("application/json"))return{}}return Be.json()}).then(Be=>te(Be)).catch(Be=>jr(Be,Ie,d,V))})})).apply(this,arguments)}function be(f="storage"){return{get:(u=(0,s.A)(function*(c,d,w,N){return st(c,"GET",d,w,N,void 0,f)}),function(d,w,N,V){return u.apply(this,arguments)}),post:function(){var u=(0,s.A)(function*(c,d,w,N,V){return st(c,"POST",d,N,V,w,f)});return function(d,w,N,V,te){return u.apply(this,arguments)}}(),put:function(){var u=(0,s.A)(function*(c,d,w,N,V){return st(c,"PUT",d,N,V,w,f)});return function(d,w,N,V,te){return u.apply(this,arguments)}}(),head:function(){var u=(0,s.A)(function*(c,d,w,N){return st(c,"HEAD",d,gn(gn({},w),{},{noResolveJson:!0}),N,void 0,f)});return function(d,w,N,V){return u.apply(this,arguments)}}(),remove:function(){var u=(0,s.A)(function*(c,d,w,N,V){return st(c,"DELETE",d,N,V,w,f)});return function(d,w,N,V,te){return u.apply(this,arguments)}}()};var u}const We=be("storage"),{get:Se,post:et,put:St,head:Xt,remove:vn}=We,On=be("vectors");var Rn=class{constructor(f,u={},c,d="storage"){this.shouldThrowOnError=!1,this.url=f,this.headers=u,this.fetch=(f=>f?(...u)=>f(...u):(...u)=>fetch(...u))(c),this.namespace=d}throwOnError(){return this.shouldThrowOnError=!0,this}handleOperation(f){var u=this;return(0,s.A)(function*(){var c=u;try{return{data:yield f(),error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Xe(d))return{data:null,error:d};throw d}})()}},ir=class{constructor(f,u){this.downloadFn=f,this.shouldThrowOnError=u}then(f,u){return this.execute().then(f,u)}execute(){var f=this;return(0,s.A)(function*(){var u=f;try{return{data:(yield u.downloadFn()).body,error:null}}catch(c){if(u.shouldThrowOnError)throw c;if(Xe(c))return{data:null,error:c};throw c}})()}};let Xr;Xr=Symbol.toStringTag;var Ur=class{constructor(f,u){this.downloadFn=f,this.shouldThrowOnError=u,this[Xr]="BlobDownloadBuilder",this.promise=null}asStream(){return new ir(this.downloadFn,this.shouldThrowOnError)}then(f,u){return this.getPromise().then(f,u)}catch(f){return this.getPromise().catch(f)}finally(f){return this.getPromise().finally(f)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){var f=this;return(0,s.A)(function*(){var u=f;try{return{data:yield(yield u.downloadFn()).blob(),error:null}}catch(c){if(u.shouldThrowOnError)throw c;if(Xe(c))return{data:null,error:c};throw c}})()}};const Qn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ln={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Gn=class extends Rn{constructor(f,u={},c,d){super(f,u,d,"storage"),this.bucketId=c}uploadOrUpdate(f,u,c,d){var w=this;return(0,s.A)(function*(){var N=w;return N.handleOperation((0,s.A)(function*(){let V;const te=gn(gn({},Ln),d);let Ie=gn(gn({},N.headers),"POST"===f&&{"x-upsert":String(te.upsert)});const Be=te.metadata;typeof Blob<"u"&&c instanceof Blob?(V=new FormData,V.append("cacheControl",te.cacheControl),Be&&V.append("metadata",N.encodeMetadata(Be)),V.append("",c)):typeof FormData<"u"&&c instanceof FormData?(V=c,V.has("cacheControl")||V.append("cacheControl",te.cacheControl),Be&&!V.has("metadata")&&V.append("metadata",N.encodeMetadata(Be))):(V=c,Ie["cache-control"]=`max-age=${te.cacheControl}`,Ie["content-type"]=te.contentType,Be&&(Ie["x-metadata"]=N.toBase64(N.encodeMetadata(Be))),(typeof ReadableStream<"u"&&V instanceof ReadableStream||V&&"object"==typeof V&&"pipe"in V&&"function"==typeof V.pipe)&&!te.duplex&&(te.duplex="half")),d?.headers&&(Ie=gn(gn({},Ie),d.headers));const h=N._removeEmptyFolders(u),E=N._getFinalPath(h),y=yield("PUT"==f?St:et)(N.fetch,`${N.url}/object/${E}`,V,gn({headers:Ie},te?.duplex?{duplex:te.duplex}:{}));return{path:h,id:y.Id,fullPath:y.Key}}))})()}upload(f,u,c){var d=this;return(0,s.A)(function*(){return d.uploadOrUpdate("POST",f,u,c)})()}uploadToSignedUrl(f,u,c,d){var w=this;return(0,s.A)(function*(){var N=w;const V=N._removeEmptyFolders(f),te=N._getFinalPath(V),Ie=new URL(N.url+`/object/upload/sign/${te}`);return Ie.searchParams.set("token",u),N.handleOperation((0,s.A)(function*(){let Be;const h=gn({upsert:Ln.upsert},d),E=gn(gn({},N.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&c instanceof Blob?(Be=new FormData,Be.append("cacheControl",h.cacheControl),Be.append("",c)):typeof FormData<"u"&&c instanceof FormData?(Be=c,Be.append("cacheControl",h.cacheControl)):(Be=c,E["cache-control"]=`max-age=${h.cacheControl}`,E["content-type"]=h.contentType),{path:V,fullPath:(yield St(N.fetch,Ie.toString(),Be,{headers:E})).Key}}))})()}createSignedUploadUrl(f,u){var c=this;return(0,s.A)(function*(){var d=c;return d.handleOperation((0,s.A)(function*(){let w=d._getFinalPath(f);const N=gn({},d.headers);u?.upsert&&(N["x-upsert"]="true");const V=yield et(d.fetch,`${d.url}/object/upload/sign/${w}`,{},{headers:N}),te=new URL(d.url+V.url),Ie=te.searchParams.get("token");if(!Ie)throw new bn("No token returned by API");return{signedUrl:te.toString(),path:f,token:Ie}}))})()}update(f,u,c){var d=this;return(0,s.A)(function*(){return d.uploadOrUpdate("PUT",f,u,c)})()}move(f,u,c){var d=this;return(0,s.A)(function*(){var w=d;return w.handleOperation((0,s.A)(function*(){return yield et(w.fetch,`${w.url}/object/move`,{bucketId:w.bucketId,sourceKey:f,destinationKey:u,destinationBucket:c?.destinationBucket},{headers:w.headers})}))})()}copy(f,u,c){var d=this;return(0,s.A)(function*(){var w=d;return w.handleOperation((0,s.A)(function*(){return{path:(yield et(w.fetch,`${w.url}/object/copy`,{bucketId:w.bucketId,sourceKey:f,destinationKey:u,destinationBucket:c?.destinationBucket},{headers:w.headers})).Key}}))})()}createSignedUrl(f,u,c){var d=this;return(0,s.A)(function*(){var w=d;return w.handleOperation((0,s.A)(function*(){let N=w._getFinalPath(f),V=yield et(w.fetch,`${w.url}/object/sign/${N}`,gn({expiresIn:u},c?.transform?{transform:c.transform}:{}),{headers:w.headers});return{signedUrl:encodeURI(`${w.url}${V.signedURL}${c?.download?`&download=${!0===c.download?"":c.download}`:""}`)}}))})()}createSignedUrls(f,u,c){var d=this;return(0,s.A)(function*(){var w=d;return w.handleOperation((0,s.A)(function*(){const N=yield et(w.fetch,`${w.url}/object/sign/${w.bucketId}`,{expiresIn:u,paths:f},{headers:w.headers}),V=c?.download?`&download=${!0===c.download?"":c.download}`:"";return N.map(te=>gn(gn({},te),{},{signedUrl:te.signedURL?encodeURI(`${w.url}${te.signedURL}${V}`):null}))}))})()}download(f,u,c){const d=typeof u?.transform<"u"?"render/image/authenticated":"object",w=this.transformOptsToQueryString(u?.transform||{}),N=w?`?${w}`:"",V=this._getFinalPath(f);return new Ur(()=>Se(this.fetch,`${this.url}/${d}/${V}${N}`,{headers:this.headers,noResolveJson:!0},c),this.shouldThrowOnError)}info(f){var u=this;return(0,s.A)(function*(){var c=u;const d=c._getFinalPath(f);return c.handleOperation((0,s.A)(function*(){return zn(yield Se(c.fetch,`${c.url}/object/info/${d}`,{headers:c.headers}))}))})()}exists(f){var u=this;return(0,s.A)(function*(){var c=u;const d=c._getFinalPath(f);try{return yield Xt(c.fetch,`${c.url}/object/${d}`,{headers:c.headers}),{data:!0,error:null}}catch(w){if(c.shouldThrowOnError)throw w;if(Xe(w)&&w instanceof It){const N=w.originalError;if([400,404].includes(N?.status))return{data:!1,error:w}}throw w}})()}getPublicUrl(f,u){const c=this._getFinalPath(f),d=[],w=u?.download?`download=${!0===u.download?"":u.download}`:"";""!==w&&d.push(w);const N=typeof u?.transform<"u"?"render/image":"object",V=this.transformOptsToQueryString(u?.transform||{});""!==V&&d.push(V);let te=d.join("&");return""!==te&&(te=`?${te}`),{data:{publicUrl:encodeURI(`${this.url}/${N}/public/${c}${te}`)}}}remove(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return yield vn(c.fetch,`${c.url}/object/${c.bucketId}`,{prefixes:f},{headers:c.headers})}))})()}list(f,u,c){var d=this;return(0,s.A)(function*(){var w=d;return w.handleOperation((0,s.A)(function*(){const N=gn(gn(gn({},Qn),u),{},{prefix:f||""});return yield et(w.fetch,`${w.url}/object/list/${w.bucketId}`,N,{headers:w.headers},c)}))})()}listV2(f,u){var c=this;return(0,s.A)(function*(){var d=c;return d.handleOperation((0,s.A)(function*(){const w=gn({},f);return yield et(d.fetch,`${d.url}/object/list-v2/${d.bucketId}`,w,{headers:d.headers},u)}))})()}encodeMetadata(f){return JSON.stringify(f)}toBase64(f){return typeof Buffer<"u"?Buffer.from(f).toString("base64"):btoa(f)}_getFinalPath(f){return`${this.bucketId}/${f.replace(/^\/+/,"")}`}_removeEmptyFolders(f){return f.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(f){const u=[];return f.width&&u.push(`width=${f.width}`),f.height&&u.push(`height=${f.height}`),f.resize&&u.push(`resize=${f.resize}`),f.format&&u.push(`format=${f.format}`),f.quality&&u.push(`quality=${f.quality}`),u.join("&")}};const ar={"X-Client-Info":"storage-js/2.95.0"};var nr=class extends Rn{constructor(f,u={},c,d){const w=new URL(f);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(w.hostname)&&!w.hostname.includes("storage.supabase.")&&(w.hostname=w.hostname.replace("supabase.","storage.supabase.")),super(w.href.replace(/\/$/,""),gn(gn({},ar),u),c,"storage")}listBuckets(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){const d=c.listBucketOptionsToQueryString(f);return yield Se(c.fetch,`${c.url}/bucket${d}`,{headers:c.headers})}))})()}getBucket(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return yield Se(c.fetch,`${c.url}/bucket/${f}`,{headers:c.headers})}))})()}createBucket(f){var u=this;return(0,s.A)(function*(c,d={public:!1}){var w=u;return w.handleOperation((0,s.A)(function*(){return yield et(w.fetch,`${w.url}/bucket`,{id:c,name:c,type:d.type,public:d.public,file_size_limit:d.fileSizeLimit,allowed_mime_types:d.allowedMimeTypes},{headers:w.headers})}))}).apply(this,arguments)}updateBucket(f,u){var c=this;return(0,s.A)(function*(){var d=c;return d.handleOperation((0,s.A)(function*(){return yield St(d.fetch,`${d.url}/bucket/${f}`,{id:f,name:f,public:u.public,file_size_limit:u.fileSizeLimit,allowed_mime_types:u.allowedMimeTypes},{headers:d.headers})}))})()}emptyBucket(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return yield et(c.fetch,`${c.url}/bucket/${f}/empty`,{},{headers:c.headers})}))})()}deleteBucket(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return yield vn(c.fetch,`${c.url}/bucket/${f}`,{},{headers:c.headers})}))})()}listBucketOptionsToQueryString(f){const u={};return f&&("limit"in f&&(u.limit=String(f.limit)),"offset"in f&&(u.offset=String(f.offset)),f.search&&(u.search=f.search),f.sortColumn&&(u.sortColumn=f.sortColumn),f.sortOrder&&(u.sortOrder=f.sortOrder)),Object.keys(u).length>0?"?"+new URLSearchParams(u).toString():""}},Er=class extends Rn{constructor(f,u={},c){super(f.replace(/\/$/,""),gn(gn({},ar),u),c,"storage")}createBucket(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return yield et(c.fetch,`${c.url}/bucket`,{name:f},{headers:c.headers})}))})()}listBuckets(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){const d=new URLSearchParams;void 0!==f?.limit&&d.set("limit",f.limit.toString()),void 0!==f?.offset&&d.set("offset",f.offset.toString()),f?.sortColumn&&d.set("sortColumn",f.sortColumn),f?.sortOrder&&d.set("sortOrder",f.sortOrder),f?.search&&d.set("search",f.search);const w=d.toString(),N=w?`${c.url}/bucket?${w}`:`${c.url}/bucket`;return yield Se(c.fetch,N,{headers:c.headers})}))})()}deleteBucket(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return yield vn(c.fetch,`${c.url}/bucket/${f}`,{},{headers:c.headers})}))})()}from(f){var u=this;if(!(f=>!(!f||"string"!=typeof f||0===f.length||f.length>100||f.trim()!==f||f.includes("/")||f.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(f))(f))throw new bn("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const c=new er({baseUrl:this.url,catalogName:f,auth:{type:"custom",getHeaders:(w=(0,s.A)(function*(){return u.headers}),function(){return w.apply(this,arguments)})},fetch:this.fetch}),d=this.shouldThrowOnError;var w;return new Proxy(c,{get(w,N){const V=w[N];return"function"!=typeof V?V:(0,s.A)(function*(...te){try{return{data:yield V.apply(w,te),error:null}}catch(Ie){if(d)throw Ie;return{data:null,error:Ie}}})}})}},br=class extends Rn{constructor(f,u={},c){super(f.replace(/\/$/,""),gn(gn({},ar),{},{"Content-Type":"application/json"},u),c,"vectors")}createIndex(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return(yield On.post(c.fetch,`${c.url}/CreateIndex`,f,{headers:c.headers}))||{}}))})()}getIndex(f,u){var c=this;return(0,s.A)(function*(){var d=c;return d.handleOperation((0,s.A)(function*(){return yield On.post(d.fetch,`${d.url}/GetIndex`,{vectorBucketName:f,indexName:u},{headers:d.headers})}))})()}listIndexes(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return yield On.post(c.fetch,`${c.url}/ListIndexes`,f,{headers:c.headers})}))})()}deleteIndex(f,u){var c=this;return(0,s.A)(function*(){var d=c;return d.handleOperation((0,s.A)(function*(){return(yield On.post(d.fetch,`${d.url}/DeleteIndex`,{vectorBucketName:f,indexName:u},{headers:d.headers}))||{}}))})()}},xr=class extends Rn{constructor(f,u={},c){super(f.replace(/\/$/,""),gn(gn({},ar),{},{"Content-Type":"application/json"},u),c,"vectors")}putVectors(f){var u=this;return(0,s.A)(function*(){var c=u;if(f.vectors.length<1||f.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return c.handleOperation((0,s.A)(function*(){return(yield On.post(c.fetch,`${c.url}/PutVectors`,f,{headers:c.headers}))||{}}))})()}getVectors(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return yield On.post(c.fetch,`${c.url}/GetVectors`,f,{headers:c.headers})}))})()}listVectors(f){var u=this;return(0,s.A)(function*(){var c=u;if(void 0!==f.segmentCount){if(f.segmentCount<1||f.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==f.segmentIndex&&(f.segmentIndex<0||f.segmentIndex>=f.segmentCount))throw new Error("segmentIndex must be between 0 and "+(f.segmentCount-1))}return c.handleOperation((0,s.A)(function*(){return yield On.post(c.fetch,`${c.url}/ListVectors`,f,{headers:c.headers})}))})()}queryVectors(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return yield On.post(c.fetch,`${c.url}/QueryVectors`,f,{headers:c.headers})}))})()}deleteVectors(f){var u=this;return(0,s.A)(function*(){var c=u;if(f.keys.length<1||f.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return c.handleOperation((0,s.A)(function*(){return(yield On.post(c.fetch,`${c.url}/DeleteVectors`,f,{headers:c.headers}))||{}}))})()}},Fr=class extends Rn{constructor(f,u={},c){super(f.replace(/\/$/,""),gn(gn({},ar),{},{"Content-Type":"application/json"},u),c,"vectors")}createBucket(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return(yield On.post(c.fetch,`${c.url}/CreateVectorBucket`,{vectorBucketName:f},{headers:c.headers}))||{}}))})()}getBucket(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return yield On.post(c.fetch,`${c.url}/GetVectorBucket`,{vectorBucketName:f},{headers:c.headers})}))})()}listBuckets(){var f=this;return(0,s.A)(function*(u={}){var c=f;return c.handleOperation((0,s.A)(function*(){return yield On.post(c.fetch,`${c.url}/ListVectorBuckets`,u,{headers:c.headers})}))}).apply(this,arguments)}deleteBucket(f){var u=this;return(0,s.A)(function*(){var c=u;return c.handleOperation((0,s.A)(function*(){return(yield On.post(c.fetch,`${c.url}/DeleteVectorBucket`,{vectorBucketName:f},{headers:c.headers}))||{}}))})()}},Wr=class extends Fr{constructor(f,u={}){super(f,u.headers||{},u.fetch)}from(f){return new kr(this.url,this.headers,f,this.fetch)}createBucket(f){var u=()=>super.createBucket,c=this;return(0,s.A)(function*(){var w=c;return u().call(w,f)})()}getBucket(f){var u=()=>super.getBucket,c=this;return(0,s.A)(function*(){var w=c;return u().call(w,f)})()}listBuckets(){var f=()=>super.listBuckets,u=this;return(0,s.A)(function*(c={}){var w=u;return f().call(w,c)}).apply(this,arguments)}deleteBucket(f){var u=()=>super.deleteBucket,c=this;return(0,s.A)(function*(){var w=c;return u().call(w,f)})()}},kr=class extends br{constructor(f,u,c,d){super(f,u,d),this.vectorBucketName=c}createIndex(f){var u=()=>super.createIndex,c=this;return(0,s.A)(function*(){var w=c;return u().call(w,gn(gn({},f),{},{vectorBucketName:w.vectorBucketName}))})()}listIndexes(){var f=()=>super.listIndexes,u=this;return(0,s.A)(function*(c={}){var w=u;return f().call(w,gn(gn({},c),{},{vectorBucketName:w.vectorBucketName}))}).apply(this,arguments)}getIndex(f){var u=()=>super.getIndex,c=this;return(0,s.A)(function*(){var w=c;return u().call(w,w.vectorBucketName,f)})()}deleteIndex(f){var u=()=>super.deleteIndex,c=this;return(0,s.A)(function*(){var w=c;return u().call(w,w.vectorBucketName,f)})()}index(f){return new Dr(this.url,this.headers,this.vectorBucketName,f,this.fetch)}},Dr=class extends xr{constructor(f,u,c,d,w){super(f,u,w),this.vectorBucketName=c,this.indexName=d}putVectors(f){var u=()=>super.putVectors,c=this;return(0,s.A)(function*(){var w=c;return u().call(w,gn(gn({},f),{},{vectorBucketName:w.vectorBucketName,indexName:w.indexName}))})()}getVectors(f){var u=()=>super.getVectors,c=this;return(0,s.A)(function*(){var w=c;return u().call(w,gn(gn({},f),{},{vectorBucketName:w.vectorBucketName,indexName:w.indexName}))})()}listVectors(){var f=()=>super.listVectors,u=this;return(0,s.A)(function*(c={}){var w=u;return f().call(w,gn(gn({},c),{},{vectorBucketName:w.vectorBucketName,indexName:w.indexName}))}).apply(this,arguments)}queryVectors(f){var u=()=>super.queryVectors,c=this;return(0,s.A)(function*(){var w=c;return u().call(w,gn(gn({},f),{},{vectorBucketName:w.vectorBucketName,indexName:w.indexName}))})()}deleteVectors(f){var u=()=>super.deleteVectors,c=this;return(0,s.A)(function*(){var w=c;return u().call(w,gn(gn({},f),{},{vectorBucketName:w.vectorBucketName,indexName:w.indexName}))})()}},Yr=class extends nr{constructor(f,u={},c,d){super(f,u,c,d)}from(f){return new Gn(this.url,this.headers,f,this.fetch)}get vectors(){return new Wr(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Er(this.url+"/iceberg",this.headers,this.fetch)}};const Kr=3e4,j="X-Supabase-Api-Version",P_2024_01_01_timestamp=Date.parse("2024-01-01T00:00:00.0Z"),P_2024_01_01_name="2024-01-01",q=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class oe extends Error{constructor(u,c,d){super(u),this.__isAuthError=!0,this.name="AuthError",this.status=c,this.code=d}}function ne(f){return"object"==typeof f&&null!==f&&"__isAuthError"in f}class Qe extends oe{constructor(u,c,d){super(u,c,d),this.name="AuthApiError",this.status=c,this.code=d}}class qt extends oe{constructor(u,c){super(u),this.name="AuthUnknownError",this.originalError=c}}class Jt extends oe{constructor(u,c,d,w){super(u,d,w),this.name=c,this.status=d}}class rn extends Jt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Kt(f){return ne(f)&&"AuthSessionMissingError"===f.name}class Nn extends Jt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dr extends Jt{constructor(u){super(u,"AuthInvalidCredentialsError",400,void 0)}}class cr extends Jt{constructor(u,c=null){super(u,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=c}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class W extends Jt{constructor(u,c=null){super(u,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=c}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bn extends Jt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class x extends Jt{constructor(u,c){super(u,"AuthRetryableFetchError",c,void 0)}}function Te(f){return ne(f)&&"AuthRetryableFetchError"===f.name}class Fn extends Jt{constructor(u,c,d){super(u,"AuthWeakPasswordError",c,"weak_password"),this.reasons=d}}class Pn extends Jt{constructor(u){super(u,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wn=" \t\n\r=".split(""),Pr=(()=>{const f=new Array(128);for(let u=0;u<f.length;u+=1)f[u]=-1;for(let u=0;u<Wn.length;u+=1)f[Wn[u].charCodeAt(0)]=-2;for(let u=0;u<Xn.length;u+=1)f[Xn[u].charCodeAt(0)]=u;return f})();function uo(f,u,c){if(null!==f)for(u.queue=u.queue<<8|f,u.queuedBits+=8;u.queuedBits>=6;)c(Xn[u.queue>>u.queuedBits-6&63]),u.queuedBits-=6;else if(u.queuedBits>0)for(u.queue=u.queue<<6-u.queuedBits,u.queuedBits=6;u.queuedBits>=6;)c(Xn[u.queue>>u.queuedBits-6&63]),u.queuedBits-=6}function go(f,u,c){const d=Pr[f];if(!(d>-1)){if(-2===d)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(f)}"`)}for(u.queue=u.queue<<6|d,u.queuedBits+=6;u.queuedBits>=8;)c(u.queue>>u.queuedBits-8&255),u.queuedBits-=8}function Ao(f){const u=[],c=V=>{u.push(String.fromCodePoint(V))},d={utf8seq:0,codepoint:0},w={queue:0,queuedBits:0},N=V=>{!function Ee(f,u,c){if(0===u.utf8seq){if(f<=127)return void c(f);for(let d=1;d<6;d+=1)if(!(f>>7-d&1)){u.utf8seq=d;break}if(2===u.utf8seq)u.codepoint=31&f;else if(3===u.utf8seq)u.codepoint=15&f;else{if(4!==u.utf8seq)throw new Error("Invalid UTF-8 sequence");u.codepoint=7&f}u.utf8seq-=1}else if(u.utf8seq>0){if(f<=127)throw new Error("Invalid UTF-8 sequence");u.codepoint=u.codepoint<<6|63&f,u.utf8seq-=1,0===u.utf8seq&&c(u.codepoint)}}(V,d,c)};for(let V=0;V<f.length;V+=1)go(f.charCodeAt(V),w,N);return u.join("")}function ns(f,u){if(!(f<=127)){if(f<=2047)return u(192|f>>6),void u(128|63&f);if(f<=65535)return u(224|f>>12),u(128|f>>6&63),void u(128|63&f);if(f<=1114111)return u(240|f>>18),u(128|f>>12&63),u(128|f>>6&63),void u(128|63&f);throw new Error(`Unrecognized Unicode codepoint: ${f.toString(16)}`)}u(f)}function Q(f){const u=[],c={queue:0,queuedBits:0},d=w=>{u.push(w)};for(let w=0;w<f.length;w+=1)go(f.charCodeAt(w),c,d);return new Uint8Array(u)}function je(f){const u=[],c={queue:0,queuedBits:0},d=w=>{u.push(w)};return f.forEach(w=>uo(w,c,d)),uo(null,c,d),u.join("")}const kt=()=>typeof window<"u"&&typeof document<"u",Zt={tested:!1,writable:!1},Dn=()=>{if(!kt())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(Zt.tested)return Zt.writable;const f=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(f,f),globalThis.localStorage.removeItem(f),Zt.tested=!0,Zt.writable=!0}catch{Zt.tested=!0,Zt.writable=!1}return Zt.writable},Yn=f=>f?(...u)=>f(...u):(...u)=>fetch(...u),Mr=function(){var f=(0,s.A)(function*(u,c,d){yield u.setItem(c,JSON.stringify(d))});return function(c,d,w){return f.apply(this,arguments)}}(),Or=function(){var f=(0,s.A)(function*(u,c){const d=yield u.getItem(c);if(!d)return null;try{return JSON.parse(d)}catch{return d}});return function(c,d){return f.apply(this,arguments)}}(),_r=function(){var f=(0,s.A)(function*(u,c){yield u.removeItem(c)});return function(c,d){return f.apply(this,arguments)}}();class qr{constructor(){this.promise=new qr.promiseConstructor((u,c)=>{this.resolve=u,this.reject=c})}}function Rr(f){const u=f.split(".");if(3!==u.length)throw new Pn("Invalid JWT structure");for(let d=0;d<u.length;d++)if(!q.test(u[d]))throw new Pn("JWT not in base64url format");return{header:JSON.parse(Ao(u[0])),payload:JSON.parse(Ao(u[1])),signature:Q(u[2]),raw:{header:u[0],payload:u[1]}}}function Zr(){return(Zr=(0,s.A)(function*(f){return yield new Promise(u=>{setTimeout(()=>u(null),f)})})).apply(this,arguments)}function Ro(f){return("0"+f.toString(16)).substr(-2)}function U(){return(U=(0,s.A)(function*(f){const c=(new TextEncoder).encode(f),d=yield crypto.subtle.digest("SHA-256",c),w=new Uint8Array(d);return Array.from(w).map(N=>String.fromCharCode(N)).join("")})).apply(this,arguments)}function Oe(){return Oe=(0,s.A)(function*(f){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),f;const c=yield function O(f){return U.apply(this,arguments)}(f);return btoa(c).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),Oe.apply(this,arguments)}function at(f,u){return ct.apply(this,arguments)}function ct(){return ct=(0,s.A)(function*(f,u,c=!1){const d=function vo(){const u=new Uint32Array(56);if(typeof crypto>"u"){const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",d=c.length;let w="";for(let N=0;N<56;N++)w+=c.charAt(Math.floor(Math.random()*d));return w}return crypto.getRandomValues(u),Array.from(u,Ro).join("")}();let w=d;c&&(w+="/PASSWORD_RECOVERY"),yield Mr(f,`${u}-code-verifier`,w);const N=yield function le(f){return Oe.apply(this,arguments)}(d);return[N,d===N?"plain":"s256"]}),ct.apply(this,arguments)}qr.promiseConstructor=Promise;const Mt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Lt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qt(f){if(!Lt.test(f))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tn(){return new Proxy({},{get:(u,c)=>{if("__isUserNotAvailableProxy"===c)return!0;if("symbol"==typeof c){const d=c.toString();if("Symbol(Symbol.toPrimitive)"===d||"Symbol(Symbol.toStringTag)"===d||"Symbol(util.inspect.custom)"===d)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${c}" property of the session object is not supported. Please use getUser() instead.`)},set:(u,c)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${c}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(u,c)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${c}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yn(f){return JSON.parse(JSON.stringify(f))}const hr=f=>f.msg||f.message||f.error_description||f.error||JSON.stringify(f),rr=[502,503,504];function no(f){return yo.apply(this,arguments)}function yo(){return(yo=(0,s.A)(function*(f){var u;if(!(f=>"object"==typeof f&&null!==f&&"status"in f&&"ok"in f&&"json"in f&&"function"==typeof f.json)(f))throw new x(hr(f),0);if(rr.includes(f.status))throw new x(hr(f),f.status);let c,d;try{c=yield f.json()}catch(N){throw new qt(hr(N),N)}const w=function Et(f){const u=f.headers.get(j);if(!u||!u.match(Mt))return null;try{return new Date(`${u}T00:00:00.0Z`)}catch{return null}}(f);if(w&&w.getTime()>=P_2024_01_01_timestamp&&"object"==typeof c&&c&&"string"==typeof c.code?d=c.code:"object"==typeof c&&c&&"string"==typeof c.error_code&&(d=c.error_code),d){if("weak_password"===d)throw new Fn(hr(c),f.status,(null===(u=c.weak_password)||void 0===u?void 0:u.reasons)||[]);if("session_not_found"===d)throw new rn}else if("object"==typeof c&&c&&"object"==typeof c.weak_password&&c.weak_password&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.reasons.reduce((N,V)=>N&&"string"==typeof V,!0))throw new Fn(hr(c),f.status,c.weak_password.reasons);throw new Qe(hr(c),f.status||500,d)})).apply(this,arguments)}function $(f,u,c,d){return z.apply(this,arguments)}function z(){return z=(0,s.A)(function*(f,u,c,d){var w;const N=Object.assign({},d?.headers);N[j]||(N[j]=P_2024_01_01_name),d?.jwt&&(N.Authorization=`Bearer ${d.jwt}`);const V=null!==(w=d?.query)&&void 0!==w?w:{};d?.redirectTo&&(V.redirect_to=d.redirectTo);const te=Object.keys(V).length?"?"+new URLSearchParams(V).toString():"",Ie=yield function R(f,u,c,d,w,N){return ue.apply(this,arguments)}(f,u,c+te,{headers:N,noResolveJson:d?.noResolveJson},{},d?.body);return d?.xform?d?.xform(Ie):{data:Object.assign({},Ie),error:null}}),z.apply(this,arguments)}function ue(){return(ue=(0,s.A)(function*(f,u,c,d,w,N){const V=((f,u,c,d)=>{const w={method:f,headers:u?.headers||{}};return"GET"===f?w:(w.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},u?.headers),w.body=JSON.stringify(d),Object.assign(Object.assign({},w),c))})(u,d,w,N);let te;try{te=yield f(c,Object.assign({},V))}catch(Ie){throw console.error(Ie),new x(hr(Ie),0)}if(te.ok||(yield no(te)),d?.noResolveJson)return te;try{return yield te.json()}catch(Ie){yield no(Ie)}})).apply(this,arguments)}function Ge(f){var u;let c=null;return function wo(f){return f.access_token&&f.refresh_token&&f.expires_in}(f)&&(c=Object.assign({},f),f.expires_at||(c.expires_at=function mt(f){return Math.round(Date.now()/1e3)+f}(f.expires_in))),{data:{session:c,user:null!==(u=f.user)&&void 0!==u?u:f},error:null}}function un(f){const u=Ge(f);return!u.error&&f.weak_password&&"object"==typeof f.weak_password&&Array.isArray(f.weak_password.reasons)&&f.weak_password.reasons.length&&f.weak_password.message&&"string"==typeof f.weak_password.message&&f.weak_password.reasons.reduce((c,d)=>c&&"string"==typeof d,!0)&&(u.data.weak_password=f.weak_password),u}function En(f){var u;return{data:{user:null!==(u=f.user)&&void 0!==u?u:f},error:null}}function Qr(f){return{data:f,error:null}}function Eo(f){const{action_link:u,email_otp:c,hashed_token:d,redirect_to:w,verification_type:N}=f,V=(0,o.Tt)(f,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:u,email_otp:c,hashed_token:d,redirect_to:w,verification_type:N},user:Object.assign({},V)},error:null}}function fo(f){return f}const Wo=["global","local","others"];class Ko{constructor({url:u="",headers:c={},fetch:d}){this.url=u,this.headers=c,this.fetch=Yn(d),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(u){var c=this;return(0,s.A)(function*(d,w=Wo[0]){if(Wo.indexOf(w)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wo.join(", ")}`);try{return yield $(c.fetch,"POST",`${c.url}/logout?scope=${w}`,{headers:c.headers,jwt:d,noResolveJson:!0}),{data:null,error:null}}catch(N){if(ne(N))return{data:null,error:N};throw N}}).apply(this,arguments)}inviteUserByEmail(u){var c=this;return(0,s.A)(function*(d,w={}){try{return yield $(c.fetch,"POST",`${c.url}/invite`,{body:{email:d,data:w.data},headers:c.headers,redirectTo:w.redirectTo,xform:En})}catch(N){if(ne(N))return{data:{user:null},error:N};throw N}}).apply(this,arguments)}generateLink(u){var c=this;return(0,s.A)(function*(){try{const{options:d}=u,w=(0,o.Tt)(u,["options"]),N=Object.assign(Object.assign({},w),d);return"newEmail"in w&&(N.new_email=w?.newEmail,delete N.newEmail),yield $(c.fetch,"POST",`${c.url}/admin/generate_link`,{body:N,headers:c.headers,xform:Eo,redirectTo:d?.redirectTo})}catch(d){if(ne(d))return{data:{properties:null,user:null},error:d};throw d}})()}createUser(u){var c=this;return(0,s.A)(function*(){try{return yield $(c.fetch,"POST",`${c.url}/admin/users`,{body:u,headers:c.headers,xform:En})}catch(d){if(ne(d))return{data:{user:null},error:d};throw d}})()}listUsers(u){var c=this;return(0,s.A)(function*(){var d,w,N,V,te,Ie,Be;try{const h={nextPage:null,lastPage:0,total:0},E=yield $(c.fetch,"GET",`${c.url}/admin/users`,{headers:c.headers,noResolveJson:!0,query:{page:null!==(w=null===(d=u?.page)||void 0===d?void 0:d.toString())&&void 0!==w?w:"",per_page:null!==(V=null===(N=u?.perPage)||void 0===N?void 0:N.toString())&&void 0!==V?V:""},xform:fo});if(E.error)throw E.error;const y=yield E.json(),I=null!==(te=E.headers.get("x-total-count"))&&void 0!==te?te:0,F=null!==(Be=null===(Ie=E.headers.get("link"))||void 0===Ie?void 0:Ie.split(","))&&void 0!==Be?Be:[];return F.length>0&&(F.forEach(J=>{const De=parseInt(J.split(";")[0].split("=")[1].substring(0,1)),qe=JSON.parse(J.split(";")[1].split("=")[1]);h[`${qe}Page`]=De}),h.total=parseInt(I)),{data:Object.assign(Object.assign({},y),h),error:null}}catch(h){if(ne(h))return{data:{users:[]},error:h};throw h}})()}getUserById(u){var c=this;return(0,s.A)(function*(){Qt(u);try{return yield $(c.fetch,"GET",`${c.url}/admin/users/${u}`,{headers:c.headers,xform:En})}catch(d){if(ne(d))return{data:{user:null},error:d};throw d}})()}updateUserById(u,c){var d=this;return(0,s.A)(function*(){Qt(u);try{return yield $(d.fetch,"PUT",`${d.url}/admin/users/${u}`,{body:c,headers:d.headers,xform:En})}catch(w){if(ne(w))return{data:{user:null},error:w};throw w}})()}deleteUser(u){var c=this;return(0,s.A)(function*(d,w=!1){Qt(d);try{return yield $(c.fetch,"DELETE",`${c.url}/admin/users/${d}`,{headers:c.headers,body:{should_soft_delete:w},xform:En})}catch(N){if(ne(N))return{data:{user:null},error:N};throw N}}).apply(this,arguments)}_listFactors(u){var c=this;return(0,s.A)(function*(){Qt(u.userId);try{const{data:d,error:w}=yield $(c.fetch,"GET",`${c.url}/admin/users/${u.userId}/factors`,{headers:c.headers,xform:N=>({data:{factors:N},error:null})});return{data:d,error:w}}catch(d){if(ne(d))return{data:null,error:d};throw d}})()}_deleteFactor(u){var c=this;return(0,s.A)(function*(){Qt(u.userId),Qt(u.id);try{return{data:yield $(c.fetch,"DELETE",`${c.url}/admin/users/${u.userId}/factors/${u.id}`,{headers:c.headers}),error:null}}catch(d){if(ne(d))return{data:null,error:d};throw d}})()}_listOAuthClients(u){var c=this;return(0,s.A)(function*(){var d,w,N,V,te,Ie,Be;try{const h={nextPage:null,lastPage:0,total:0},E=yield $(c.fetch,"GET",`${c.url}/admin/oauth/clients`,{headers:c.headers,noResolveJson:!0,query:{page:null!==(w=null===(d=u?.page)||void 0===d?void 0:d.toString())&&void 0!==w?w:"",per_page:null!==(V=null===(N=u?.perPage)||void 0===N?void 0:N.toString())&&void 0!==V?V:""},xform:fo});if(E.error)throw E.error;const y=yield E.json(),I=null!==(te=E.headers.get("x-total-count"))&&void 0!==te?te:0,F=null!==(Be=null===(Ie=E.headers.get("link"))||void 0===Ie?void 0:Ie.split(","))&&void 0!==Be?Be:[];return F.length>0&&(F.forEach(J=>{const De=parseInt(J.split(";")[0].split("=")[1].substring(0,1)),qe=JSON.parse(J.split(";")[1].split("=")[1]);h[`${qe}Page`]=De}),h.total=parseInt(I)),{data:Object.assign(Object.assign({},y),h),error:null}}catch(h){if(ne(h))return{data:{clients:[]},error:h};throw h}})()}_createOAuthClient(u){var c=this;return(0,s.A)(function*(){try{return yield $(c.fetch,"POST",`${c.url}/admin/oauth/clients`,{body:u,headers:c.headers,xform:d=>({data:d,error:null})})}catch(d){if(ne(d))return{data:null,error:d};throw d}})()}_getOAuthClient(u){var c=this;return(0,s.A)(function*(){try{return yield $(c.fetch,"GET",`${c.url}/admin/oauth/clients/${u}`,{headers:c.headers,xform:d=>({data:d,error:null})})}catch(d){if(ne(d))return{data:null,error:d};throw d}})()}_updateOAuthClient(u,c){var d=this;return(0,s.A)(function*(){try{return yield $(d.fetch,"PUT",`${d.url}/admin/oauth/clients/${u}`,{body:c,headers:d.headers,xform:w=>({data:w,error:null})})}catch(w){if(ne(w))return{data:null,error:w};throw w}})()}_deleteOAuthClient(u){var c=this;return(0,s.A)(function*(){try{return yield $(c.fetch,"DELETE",`${c.url}/admin/oauth/clients/${u}`,{headers:c.headers,noResolveJson:!0}),{data:null,error:null}}catch(d){if(ne(d))return{data:null,error:d};throw d}})()}_regenerateOAuthClientSecret(u){var c=this;return(0,s.A)(function*(){try{return yield $(c.fetch,"POST",`${c.url}/admin/oauth/clients/${u}/regenerate_secret`,{headers:c.headers,xform:d=>({data:d,error:null})})}catch(d){if(ne(d))return{data:null,error:d};throw d}})()}}function Ms(f={}){return{getItem:u=>f[u]||null,setItem:(u,c)=>{f[u]=c},removeItem:u=>{delete f[u]}}}const Qo_debug=!!(globalThis&&Dn()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Us extends Error{constructor(u){super(u),this.isAcquireTimeout=!0}}class Ui extends Us{}function ai(f,u,c){return fs.apply(this,arguments)}function fs(){return fs=(0,s.A)(function*(f,u,c){Qo_debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",f,u);const d=new globalThis.AbortController;return u>0&&setTimeout(()=>{d.abort(),Qo_debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",f)},u),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(f,0===u?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:d.signal},function(){var w=(0,s.A)(function*(N){if(!N){if(0===u)throw Qo_debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",f),new Ui(`Acquiring an exclusive Navigator LockManager lock "${f}" immediately failed`);if(Qo_debug)try{const V=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(V,null,"  "))}catch(V){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",V)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield c()}Qo_debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",f,N.name);try{return yield c()}finally{Qo_debug&&console.log("@supabase/gotrue-js: navigatorLock: released",f,N.name)}});return function(N){return w.apply(this,arguments)}}()))}),fs.apply(this,arguments)}function js(f){if(!/^0x[a-fA-F0-9]{40}$/.test(f))throw new Error(`@supabase/auth-js: Address "${f}" is invalid.`);return f.toLowerCase()}function Fo(f){const u=(new TextEncoder).encode(f);return"0x"+Array.from(u,d=>d.toString(16).padStart(2,"0")).join("")}class eo extends Error{constructor({message:u,code:c,cause:d,name:w}){var N;super(u,{cause:d}),this.__isWebAuthnError=!0,this.name=null!==(N=w??(d instanceof Error?d.name:void 0))&&void 0!==N?N:"Unknown Error",this.code=c}}class gs extends eo{constructor(u,c){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:c,message:u}),this.name="WebAuthnUnknownError",this.originalError=c}}function Ws({error:f,options:u}){var c,d,w;const{publicKey:N}=u;if(!N)throw Error("options was missing required publicKey property");if("AbortError"===f.name){if(u.signal instanceof AbortSignal)return new eo({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:f})}else if("ConstraintError"===f.name){if(!0===(null===(c=N.authenticatorSelection)||void 0===c?void 0:c.requireResidentKey))return new eo({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:f});if("conditional"===u.mediation&&"required"===(null===(d=N.authenticatorSelection)||void 0===d?void 0:d.userVerification))return new eo({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:f});if("required"===(null===(w=N.authenticatorSelection)||void 0===w?void 0:w.userVerification))return new eo({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:f})}else{if("InvalidStateError"===f.name)return new eo({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:f});if("NotAllowedError"===f.name)return new eo({message:f.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:f});if("NotSupportedError"===f.name)return 0===N.pubKeyCredParams.filter(te=>"public-key"===te.type).length?new eo({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:f}):new eo({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:f});if("SecurityError"===f.name){const V=window.location.hostname;if(!_s(V))return new eo({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:f});if(N.rp.id!==V)return new eo({message:`The RP ID "${N.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:f})}else if("TypeError"===f.name){if(N.user.id.byteLength<1||N.user.id.byteLength>64)return new eo({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:f})}else if("UnknownError"===f.name)return new eo({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:f})}return new eo({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:f})}function os({error:f,options:u}){const{publicKey:c}=u;if(!c)throw Error("options was missing required publicKey property");if("AbortError"===f.name){if(u.signal instanceof AbortSignal)return new eo({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:f})}else{if("NotAllowedError"===f.name)return new eo({message:f.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:f});if("SecurityError"===f.name){const d=window.location.hostname;if(!_s(d))return new eo({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:f});if(c.rpId!==d)return new eo({message:`The RP ID "${c.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:f})}else if("UnknownError"===f.name)return new eo({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:f})}return new eo({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:f})}const ss=new class li{createNewAbortSignal(){if(this.controller){const c=new Error("Cancelling existing WebAuthn API call for new one");c.name="AbortError",this.controller.abort(c)}const u=new AbortController;return this.controller=u,u.signal}cancelCeremony(){if(this.controller){const u=new Error("Manually cancelling existing WebAuthn API call");u.name="AbortError",this.controller.abort(u),this.controller=void 0}}};function ms(f){if(!f)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(f);const{challenge:u,user:c,excludeCredentials:d}=f,w=(0,o.Tt)(f,["challenge","user","excludeCredentials"]),N=Q(u).buffer,V=Object.assign(Object.assign({},c),{id:Q(c.id).buffer}),te=Object.assign(Object.assign({},w),{challenge:N,user:V});if(d&&d.length>0){te.excludeCredentials=new Array(d.length);for(let Ie=0;Ie<d.length;Ie++){const Be=d[Ie];te.excludeCredentials[Ie]=Object.assign(Object.assign({},Be),{id:Q(Be.id).buffer,type:Be.type||"public-key",transports:Be.transports})}}return te}function ko(f){if(!f)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(f);const{challenge:u,allowCredentials:c}=f,d=(0,o.Tt)(f,["challenge","allowCredentials"]),w=Q(u).buffer,N=Object.assign(Object.assign({},d),{challenge:w});if(c&&c.length>0){N.allowCredentials=new Array(c.length);for(let V=0;V<c.length;V++){const te=c[V];N.allowCredentials[V]=Object.assign(Object.assign({},te),{id:Q(te.id).buffer,type:te.type||"public-key",transports:te.transports})}}return N}function ui(f){var u;if("toJSON"in f&&"function"==typeof f.toJSON)return f.toJSON();const c=f;return{id:f.id,rawId:f.id,response:{attestationObject:je(new Uint8Array(f.response.attestationObject)),clientDataJSON:je(new Uint8Array(f.response.clientDataJSON))},type:"public-key",clientExtensionResults:f.getClientExtensionResults(),authenticatorAttachment:null!==(u=c.authenticatorAttachment)&&void 0!==u?u:void 0}}function Ks(f){var u;if("toJSON"in f&&"function"==typeof f.toJSON)return f.toJSON();const c=f,d=f.getClientExtensionResults(),w=f.response;return{id:f.id,rawId:f.id,response:{authenticatorData:je(new Uint8Array(w.authenticatorData)),clientDataJSON:je(new Uint8Array(w.clientDataJSON)),signature:je(new Uint8Array(w.signature)),userHandle:w.userHandle?je(new Uint8Array(w.userHandle)):void 0},type:"public-key",clientExtensionResults:d,authenticatorAttachment:null!==(u=c.authenticatorAttachment)&&void 0!==u?u:void 0}}function _s(f){return"localhost"===f||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(f)}function Os(){var f,u;return!!(kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(f=navigator?.credentials)||void 0===f?void 0:f.create)&&"function"==typeof(null===(u=navigator?.credentials)||void 0===u?void 0:u.get))}function vs(){return(vs=(0,s.A)(function*(f){try{const u=yield navigator.credentials.create(f);return u?u instanceof PublicKeyCredential?{data:u,error:null}:{data:null,error:new gs("Browser returned unexpected credential type",u)}:{data:null,error:new gs("Empty credential response",u)}}catch(u){return{data:null,error:Ws({error:u,options:f})}}})).apply(this,arguments)}function ys(){return(ys=(0,s.A)(function*(f){try{const u=yield navigator.credentials.get(f);return u?u instanceof PublicKeyCredential?{data:u,error:null}:{data:null,error:new gs("Browser returned unexpected credential type",u)}:{data:null,error:new gs("Empty credential response",u)}}catch(u){return{data:null,error:os({error:u,options:f})}}})).apply(this,arguments)}const qn={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Es={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function as(...f){const u=w=>null!==w&&"object"==typeof w&&!Array.isArray(w),c=w=>w instanceof ArrayBuffer||ArrayBuffer.isView(w),d={};for(const w of f)if(w)for(const N in w){const V=w[N];if(void 0!==V)if(Array.isArray(V))d[N]=V;else if(c(V))d[N]=V;else if(u(V)){const te=d[N];d[N]=u(te)?as(te,V):as(V)}else d[N]=V}return d}class $o{constructor(u){this.client=u,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(u){var c=this;return(0,s.A)(function*(){return c.client.mfa.enroll(Object.assign(Object.assign({},u),{factorType:"webauthn"}))})()}_challenge(u,c){var d=this;return(0,s.A)(function*({factorId:w,webauthn:N,friendlyName:V,signal:te},Ie){var Be;try{const{data:h,error:E}=yield d.client.mfa.challenge({factorId:w,webauthn:N});if(!h)return{data:null,error:E};const y=te??ss.createNewAbortSignal();if("create"===h.webauthn.type){const{user:I}=h.webauthn.credential_options.publicKey;if(!I.name)if(V)I.name=`${I.id}:${V}`;else{const De=(yield d.client.getUser()).data.user,qe=(null===(Be=De?.user_metadata)||void 0===Be?void 0:Be.name)||De?.email||De?.id||"User";I.name=`${I.id}:${qe}`}I.displayName||(I.displayName=I.name)}switch(h.webauthn.type){case"create":{const I=function Hs(f,u){return as(qn,f,u||{})}(h.webauthn.credential_options.publicKey,Ie?.create),{data:F,error:J}=yield function is(f){return vs.apply(this,arguments)}({publicKey:I,signal:y});return F?{data:{factorId:w,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:F}},error:null}:{data:null,error:J}}case"request":{const I=function ji(f,u){return as(Es,f,u||{})}(h.webauthn.credential_options.publicKey,Ie?.request),{data:F,error:J}=yield function Ho(f){return ys.apply(this,arguments)}(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:I,signal:y}));return F?{data:{factorId:w,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:F}},error:null}:{data:null,error:J}}}}catch(h){return ne(h)?{data:null,error:h}:{data:null,error:new qt("Unexpected error in challenge",h)}}}).apply(this,arguments)}_verify(u){var c=this;return(0,s.A)(function*({challengeId:d,factorId:w,webauthn:N}){return c.client.mfa.verify({factorId:w,challengeId:d,webauthn:N})}).apply(this,arguments)}_authenticate(u,c){var d=this;return(0,s.A)(function*({factorId:w,webauthn:{rpId:N=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:V=(typeof window<"u"?[window.location.origin]:void 0),signal:te}={}},Ie){if(!N)return{data:null,error:new oe("rpId is required for WebAuthn authentication")};try{if(!Os())return{data:null,error:new qt("Browser does not support WebAuthn",null)};const{data:Be,error:h}=yield d.challenge({factorId:w,webauthn:{rpId:N,rpOrigins:V},signal:te},{request:Ie});if(!Be)return{data:null,error:h};const{webauthn:E}=Be;return d._verify({factorId:w,challengeId:Be.challengeId,webauthn:{type:E.type,rpId:N,rpOrigins:V,credential_response:E.credential_response}})}catch(Be){return ne(Be)?{data:null,error:Be}:{data:null,error:new qt("Unexpected error in authenticate",Be)}}}).apply(this,arguments)}_register(u,c){var d=this;return(0,s.A)(function*({friendlyName:w,webauthn:{rpId:N=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:V=(typeof window<"u"?[window.location.origin]:void 0),signal:te}={}},Ie){if(!N)return{data:null,error:new oe("rpId is required for WebAuthn registration")};try{if(!Os())return{data:null,error:new qt("Browser does not support WebAuthn",null)};const{data:Be,error:h}=yield d._enroll({friendlyName:w});if(!Be)return yield d.client.mfa.listFactors().then(I=>{var F;return null===(F=I.data)||void 0===F?void 0:F.all.find(J=>"webauthn"===J.factor_type&&J.friendly_name===w&&"unverified"!==J.status)}).then(I=>I?d.client.mfa.unenroll({factorId:I?.id}):void 0),{data:null,error:h};const{data:E,error:y}=yield d._challenge({factorId:Be.id,friendlyName:Be.friendly_name,webauthn:{rpId:N,rpOrigins:V},signal:te},{create:Ie});return E?d._verify({factorId:Be.id,challengeId:E.challengeId,webauthn:{rpId:N,rpOrigins:V,type:E.webauthn.type,credential_response:E.webauthn.credential_response}}):{data:null,error:y}}catch(Be){return ne(Be)?{data:null,error:Be}:{data:null,error:new qt("Unexpected error in register",Be)}}}).apply(this,arguments)}}!function Bs(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const di={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.95.0"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};function cs(f,u,c){return ls.apply(this,arguments)}function ls(){return(ls=(0,s.A)(function*(f,u,c){return yield c()})).apply(this,arguments)}const zo={},va=(()=>{class f{get jwks(){var c,d;return null!==(d=null===(c=zo[this.storageKey])||void 0===c?void 0:c.jwks)&&void 0!==d?d:{keys:[]}}set jwks(c){zo[this.storageKey]=Object.assign(Object.assign({},zo[this.storageKey]),{jwks:c})}get jwks_cached_at(){var c,d;return null!==(d=null===(c=zo[this.storageKey])||void 0===c?void 0:c.cachedAt)&&void 0!==d?d:Number.MIN_SAFE_INTEGER}set jwks_cached_at(c){zo[this.storageKey]=Object.assign(Object.assign({},zo[this.storageKey]),{cachedAt:c})}constructor(c){var w,N,V,d=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const te=Object.assign(Object.assign({},di),c);if(this.storageKey=te.storageKey,this.instanceID=null!==(w=f.nextInstanceID[this.storageKey])&&void 0!==w?w:0,f.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!te.debug,"function"==typeof te.debug&&(this.logger=te.debug),this.instanceID>0&&kt()){const Ie=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(Ie),this.logDebugMessages&&console.trace(Ie)}if(this.persistSession=te.persistSession,this.autoRefreshToken=te.autoRefreshToken,this.admin=new Ko({url:te.url,headers:te.headers,fetch:te.fetch}),this.url=te.url,this.headers=te.headers,this.fetch=Yn(te.fetch),this.lock=te.lock||cs,this.detectSessionInUrl=te.detectSessionInUrl,this.flowType=te.flowType,this.hasCustomAuthorizationHeader=te.hasCustomAuthorizationHeader,this.throwOnError=te.throwOnError,this.lockAcquireTimeout=te.lockAcquireTimeout,this.lock=te.lock?te.lock:this.persistSession&&kt()&&null!==(N=globalThis?.navigator)&&void 0!==N&&N.locks?ai:cs,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $o(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(te.storage?this.storage=te.storage:Dn()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ms(this.memoryStorage)),te.userStorage&&(this.userStorage=te.userStorage)):(this.memoryStorage={},this.storage=Ms(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Ie){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Ie)}null===(V=this.broadcastChannel)||void 0===V||V.addEventListener("message",function(){var Ie=(0,s.A)(function*(Be){d._debug("received broadcast notification from other tab or client",Be);try{yield d._notifyAllSubscribers(Be.data.event,Be.data.session,!1)}catch(h){d._debug("#broadcastChannel","error",h)}});return function(Be){return Ie.apply(this,arguments)}}())}this.initialize().catch(Ie=>{this._debug("#initialize()","error",Ie)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(c){if(this.throwOnError&&c&&c.error)throw c.error;return c}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (2.95.0) ${(new Date).toISOString()}`}_debug(...c){return this.logDebugMessages&&this.logger(this._logPrefix(),...c),this}initialize(){var c=this;return(0,s.A)(function*(){return c.initializePromise||(c.initializePromise=(0,s.A)(function*(){return yield c._acquireLock(c.lockAcquireTimeout,(0,s.A)(function*(){return yield c._initialize()}))})()),yield c.initializePromise})()}_initialize(){var c=this;return(0,s.A)(function*(){var d;try{let w={},N="none";if(kt()&&(w=function jn(f){const u={},c=new URL(f);if(c.hash&&"#"===c.hash[0])try{new URLSearchParams(c.hash.substring(1)).forEach((w,N)=>{u[N]=w})}catch{}return c.searchParams.forEach((d,w)=>{u[w]=d}),u}(window.location.href),c._isImplicitGrantCallback(w)?N="implicit":(yield c._isPKCECallback(w))&&(N="pkce")),kt()&&c.detectSessionInUrl&&"none"!==N){const{data:V,error:te}=yield c._getSessionFromURL(w,N);if(te){if(c._debug("#_initialize()","error detecting session from URL",te),function fr(f){return ne(f)&&"AuthImplicitGrantRedirectError"===f.name}(te)){const h=null===(d=te.details)||void 0===d?void 0:d.code;if("identity_already_exists"===h||"identity_not_found"===h||"single_identity_not_deletable"===h)return{error:te}}return{error:te}}const{session:Ie,redirectType:Be}=V;return c._debug("#_initialize()","detected session in URL",Ie,"redirect type",Be),yield c._saveSession(Ie),setTimeout((0,s.A)(function*(){"recovery"===Be?yield c._notifyAllSubscribers("PASSWORD_RECOVERY",Ie):yield c._notifyAllSubscribers("SIGNED_IN",Ie)}),0),{error:null}}return yield c._recoverAndRefresh(),{error:null}}catch(w){return ne(w)?c._returnResult({error:w}):c._returnResult({error:new qt("Unexpected error during initialization",w)})}finally{yield c._handleVisibilityChange(),c._debug("#_initialize()","end")}})()}signInAnonymously(c){var d=this;return(0,s.A)(function*(){var w,N,V;try{const te=yield $(d.fetch,"POST",`${d.url}/signup`,{headers:d.headers,body:{data:null!==(N=null===(w=c?.options)||void 0===w?void 0:w.data)&&void 0!==N?N:{},gotrue_meta_security:{captcha_token:null===(V=c?.options)||void 0===V?void 0:V.captchaToken}},xform:Ge}),{data:Ie,error:Be}=te;if(Be||!Ie)return d._returnResult({data:{user:null,session:null},error:Be});const h=Ie.session,E=Ie.user;return Ie.session&&(yield d._saveSession(Ie.session),yield d._notifyAllSubscribers("SIGNED_IN",h)),d._returnResult({data:{user:E,session:h},error:null})}catch(te){if(ne(te))return d._returnResult({data:{user:null,session:null},error:te});throw te}})()}signUp(c){var d=this;return(0,s.A)(function*(){var w,N,V;try{let te;if("email"in c){const{email:y,password:I,options:F}=c;let J=null,De=null;"pkce"===d.flowType&&([J,De]=yield at(d.storage,d.storageKey)),te=yield $(d.fetch,"POST",`${d.url}/signup`,{headers:d.headers,redirectTo:F?.emailRedirectTo,body:{email:y,password:I,data:null!==(w=F?.data)&&void 0!==w?w:{},gotrue_meta_security:{captcha_token:F?.captchaToken},code_challenge:J,code_challenge_method:De},xform:Ge})}else{if(!("phone"in c))throw new dr("You must provide either an email or phone number and a password");{const{phone:y,password:I,options:F}=c;te=yield $(d.fetch,"POST",`${d.url}/signup`,{headers:d.headers,body:{phone:y,password:I,data:null!==(N=F?.data)&&void 0!==N?N:{},channel:null!==(V=F?.channel)&&void 0!==V?V:"sms",gotrue_meta_security:{captcha_token:F?.captchaToken}},xform:Ge})}}const{data:Ie,error:Be}=te;if(Be||!Ie)return yield _r(d.storage,`${d.storageKey}-code-verifier`),d._returnResult({data:{user:null,session:null},error:Be});const h=Ie.session,E=Ie.user;return Ie.session&&(yield d._saveSession(Ie.session),yield d._notifyAllSubscribers("SIGNED_IN",h)),d._returnResult({data:{user:E,session:h},error:null})}catch(te){if(yield _r(d.storage,`${d.storageKey}-code-verifier`),ne(te))return d._returnResult({data:{user:null,session:null},error:te});throw te}})()}signInWithPassword(c){var d=this;return(0,s.A)(function*(){try{let w;if("email"in c){const{email:te,password:Ie,options:Be}=c;w=yield $(d.fetch,"POST",`${d.url}/token?grant_type=password`,{headers:d.headers,body:{email:te,password:Ie,gotrue_meta_security:{captcha_token:Be?.captchaToken}},xform:un})}else{if(!("phone"in c))throw new dr("You must provide either an email or phone number and a password");{const{phone:te,password:Ie,options:Be}=c;w=yield $(d.fetch,"POST",`${d.url}/token?grant_type=password`,{headers:d.headers,body:{phone:te,password:Ie,gotrue_meta_security:{captcha_token:Be?.captchaToken}},xform:un})}}const{data:N,error:V}=w;if(V)return d._returnResult({data:{user:null,session:null},error:V});if(!N||!N.session||!N.user){const te=new Nn;return d._returnResult({data:{user:null,session:null},error:te})}return N.session&&(yield d._saveSession(N.session),yield d._notifyAllSubscribers("SIGNED_IN",N.session)),d._returnResult({data:Object.assign({user:N.user,session:N.session},N.weak_password?{weakPassword:N.weak_password}:null),error:V})}catch(w){if(ne(w))return d._returnResult({data:{user:null,session:null},error:w});throw w}})()}signInWithOAuth(c){var d=this;return(0,s.A)(function*(){var w,N,V,te;return yield d._handleProviderSignIn(c.provider,{redirectTo:null===(w=c.options)||void 0===w?void 0:w.redirectTo,scopes:null===(N=c.options)||void 0===N?void 0:N.scopes,queryParams:null===(V=c.options)||void 0===V?void 0:V.queryParams,skipBrowserRedirect:null===(te=c.options)||void 0===te?void 0:te.skipBrowserRedirect})})()}exchangeCodeForSession(c){var d=this;return(0,s.A)(function*(){return yield d.initializePromise,d._acquireLock(d.lockAcquireTimeout,(0,s.A)(function*(){return d._exchangeCodeForSession(c)}))})()}signInWithWeb3(c){var d=this;return(0,s.A)(function*(){const{chain:w}=c;switch(w){case"ethereum":return yield d.signInWithEthereum(c);case"solana":return yield d.signInWithSolana(c);default:throw new Error(`@supabase/auth-js: Unsupported chain "${w}"`)}})()}signInWithEthereum(c){var d=this;return(0,s.A)(function*(){var w,N,V,te,Ie,Be,h,E,y,I,F;let J,De;if("message"in c)J=c.message,De=c.signature;else{const{wallet:gt,statement:Ht,options:dn}=c;let mn;if(kt())if("object"==typeof gt)mn=gt;else{const To=window;if(!("ethereum"in To)||"object"!=typeof To.ethereum||!("request"in To.ethereum)||"function"!=typeof To.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");mn=To.ethereum}else{if("object"!=typeof gt||!dn?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");mn=gt}const pr=new URL(null!==(w=dn?.url)&&void 0!==w?w:window.location.href),co=yield mn.request({method:"eth_requestAccounts"}).then(To=>To).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!co||0===co.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const lr=js(co[0]);let Gr=null===(N=dn?.signInWithEthereum)||void 0===N?void 0:N.chainId;Gr||(Gr=function ci(f){return parseInt(f,16)}(yield mn.request({method:"eth_chainId"}))),J=function Bi(f){var u;const{chainId:c,domain:d,expirationTime:w,issuedAt:N=new Date,nonce:V,notBefore:te,requestId:Ie,resources:Be,scheme:h,uri:E,version:y}=f;if(!Number.isInteger(c))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${c}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(V&&V.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${V}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==y)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(null!==(u=f.statement)&&void 0!==u&&u.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${f.statement}`);const De=`${h?`${h}://${d}`:d} wants you to sign in with your Ethereum account:\n${js(f.address)}\n\n${f.statement?`${f.statement}\n`:""}`;let qe=`URI: ${E}\nVersion: ${y}\nChain ID: ${c}${V?`\nNonce: ${V}`:""}\nIssued At: ${N.toISOString()}`;if(w&&(qe+=`\nExpiration Time: ${w.toISOString()}`),te&&(qe+=`\nNot Before: ${te.toISOString()}`),Ie&&(qe+=`\nRequest ID: ${Ie}`),Be){let gt="\nResources:";for(const Ht of Be){if(!Ht||"string"!=typeof Ht)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Ht}`);gt+=`\n- ${Ht}`}qe+=gt}return`${De}\n${qe}`}({domain:pr.host,address:lr,statement:Ht,uri:pr.href,version:"1",chainId:Gr,nonce:null===(V=dn?.signInWithEthereum)||void 0===V?void 0:V.nonce,issuedAt:null!==(Ie=null===(te=dn?.signInWithEthereum)||void 0===te?void 0:te.issuedAt)&&void 0!==Ie?Ie:new Date,expirationTime:null===(Be=dn?.signInWithEthereum)||void 0===Be?void 0:Be.expirationTime,notBefore:null===(h=dn?.signInWithEthereum)||void 0===h?void 0:h.notBefore,requestId:null===(E=dn?.signInWithEthereum)||void 0===E?void 0:E.requestId,resources:null===(y=dn?.signInWithEthereum)||void 0===y?void 0:y.resources}),De=yield mn.request({method:"personal_sign",params:[Fo(J),lr]})}try{const{data:qe,error:gt}=yield $(d.fetch,"POST",`${d.url}/token?grant_type=web3`,{headers:d.headers,body:Object.assign({chain:"ethereum",message:J,signature:De},null!==(I=c.options)&&void 0!==I&&I.captchaToken?{gotrue_meta_security:{captcha_token:null===(F=c.options)||void 0===F?void 0:F.captchaToken}}:null),xform:Ge});if(gt)throw gt;if(!qe||!qe.session||!qe.user){const Ht=new Nn;return d._returnResult({data:{user:null,session:null},error:Ht})}return qe.session&&(yield d._saveSession(qe.session),yield d._notifyAllSubscribers("SIGNED_IN",qe.session)),d._returnResult({data:Object.assign({},qe),error:gt})}catch(qe){if(ne(qe))return d._returnResult({data:{user:null,session:null},error:qe});throw qe}})()}signInWithSolana(c){var d=this;return(0,s.A)(function*(){var w,N,V,te,Ie,Be,h,E,y,I,F,J;let De,qe;if("message"in c)De=c.message,qe=c.signature;else{const{wallet:Ht,statement:dn,options:mn}=c;let pr;if(kt())if("object"==typeof Ht)pr=Ht;else{const lr=window;if(!("solana"in lr)||"object"!=typeof lr.solana||!("signIn"in lr.solana&&"function"==typeof lr.solana.signIn||"signMessage"in lr.solana&&"function"==typeof lr.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");pr=lr.solana}else{if("object"!=typeof Ht||!mn?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");pr=Ht}const co=new URL(null!==(w=mn?.url)&&void 0!==w?w:window.location.href);if("signIn"in pr&&pr.signIn){const lr=yield pr.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},mn?.signInWithSolana),{version:"1",domain:co.host,uri:co.href}),dn?{statement:dn}:null));let Gr;if(Array.isArray(lr)&&lr[0]&&"object"==typeof lr[0])Gr=lr[0];else{if(!(lr&&"object"==typeof lr&&"signedMessage"in lr&&"signature"in lr))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");Gr=lr}if(!("signedMessage"in Gr&&"signature"in Gr&&("string"==typeof Gr.signedMessage||Gr.signedMessage instanceof Uint8Array)&&Gr.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");De="string"==typeof Gr.signedMessage?Gr.signedMessage:(new TextDecoder).decode(Gr.signedMessage),qe=Gr.signature}else{if(!("signMessage"in pr&&"function"==typeof pr.signMessage&&"publicKey"in pr&&"object"==typeof pr&&pr.publicKey&&"toBase58"in pr.publicKey&&"function"==typeof pr.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");De=[`${co.host} wants you to sign in with your Solana account:`,pr.publicKey.toBase58(),...dn?["",dn,""]:[""],"Version: 1",`URI: ${co.href}`,`Issued At: ${null!==(V=null===(N=mn?.signInWithSolana)||void 0===N?void 0:N.issuedAt)&&void 0!==V?V:(new Date).toISOString()}`,...null!==(te=mn?.signInWithSolana)&&void 0!==te&&te.notBefore?[`Not Before: ${mn.signInWithSolana.notBefore}`]:[],...null!==(Ie=mn?.signInWithSolana)&&void 0!==Ie&&Ie.expirationTime?[`Expiration Time: ${mn.signInWithSolana.expirationTime}`]:[],...null!==(Be=mn?.signInWithSolana)&&void 0!==Be&&Be.chainId?[`Chain ID: ${mn.signInWithSolana.chainId}`]:[],...null!==(h=mn?.signInWithSolana)&&void 0!==h&&h.nonce?[`Nonce: ${mn.signInWithSolana.nonce}`]:[],...null!==(E=mn?.signInWithSolana)&&void 0!==E&&E.requestId?[`Request ID: ${mn.signInWithSolana.requestId}`]:[],...null!==(I=null===(y=mn?.signInWithSolana)||void 0===y?void 0:y.resources)&&void 0!==I&&I.length?["Resources",...mn.signInWithSolana.resources.map(Gr=>`- ${Gr}`)]:[]].join("\n");const lr=yield pr.signMessage((new TextEncoder).encode(De),"utf8");if(!(lr&&lr instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");qe=lr}}try{const{data:gt,error:Ht}=yield $(d.fetch,"POST",`${d.url}/token?grant_type=web3`,{headers:d.headers,body:Object.assign({chain:"solana",message:De,signature:je(qe)},null!==(F=c.options)&&void 0!==F&&F.captchaToken?{gotrue_meta_security:{captcha_token:null===(J=c.options)||void 0===J?void 0:J.captchaToken}}:null),xform:Ge});if(Ht)throw Ht;if(!gt||!gt.session||!gt.user){const dn=new Nn;return d._returnResult({data:{user:null,session:null},error:dn})}return gt.session&&(yield d._saveSession(gt.session),yield d._notifyAllSubscribers("SIGNED_IN",gt.session)),d._returnResult({data:Object.assign({},gt),error:Ht})}catch(gt){if(ne(gt))return d._returnResult({data:{user:null,session:null},error:gt});throw gt}})()}_exchangeCodeForSession(c){var d=this;return(0,s.A)(function*(){const w=yield Or(d.storage,`${d.storageKey}-code-verifier`),[N,V]=(w??"").split("/");try{if(!N&&"pkce"===d.flowType)throw new Bn;const{data:te,error:Ie}=yield $(d.fetch,"POST",`${d.url}/token?grant_type=pkce`,{headers:d.headers,body:{auth_code:c,code_verifier:N},xform:Ge});if(yield _r(d.storage,`${d.storageKey}-code-verifier`),Ie)throw Ie;if(!te||!te.session||!te.user){const Be=new Nn;return d._returnResult({data:{user:null,session:null,redirectType:null},error:Be})}return te.session&&(yield d._saveSession(te.session),yield d._notifyAllSubscribers("SIGNED_IN",te.session)),d._returnResult({data:Object.assign(Object.assign({},te),{redirectType:V??null}),error:Ie})}catch(te){if(yield _r(d.storage,`${d.storageKey}-code-verifier`),ne(te))return d._returnResult({data:{user:null,session:null,redirectType:null},error:te});throw te}})()}signInWithIdToken(c){var d=this;return(0,s.A)(function*(){try{const{options:w,provider:N,token:V,access_token:te,nonce:Ie}=c,Be=yield $(d.fetch,"POST",`${d.url}/token?grant_type=id_token`,{headers:d.headers,body:{provider:N,id_token:V,access_token:te,nonce:Ie,gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:Ge}),{data:h,error:E}=Be;if(E)return d._returnResult({data:{user:null,session:null},error:E});if(!h||!h.session||!h.user){const y=new Nn;return d._returnResult({data:{user:null,session:null},error:y})}return h.session&&(yield d._saveSession(h.session),yield d._notifyAllSubscribers("SIGNED_IN",h.session)),d._returnResult({data:h,error:E})}catch(w){if(ne(w))return d._returnResult({data:{user:null,session:null},error:w});throw w}})()}signInWithOtp(c){var d=this;return(0,s.A)(function*(){var w,N,V,te,Ie;try{if("email"in c){const{email:Be,options:h}=c;let E=null,y=null;"pkce"===d.flowType&&([E,y]=yield at(d.storage,d.storageKey));const{error:I}=yield $(d.fetch,"POST",`${d.url}/otp`,{headers:d.headers,body:{email:Be,data:null!==(w=h?.data)&&void 0!==w?w:{},create_user:null===(N=h?.shouldCreateUser)||void 0===N||N,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:E,code_challenge_method:y},redirectTo:h?.emailRedirectTo});return d._returnResult({data:{user:null,session:null},error:I})}if("phone"in c){const{phone:Be,options:h}=c,{data:E,error:y}=yield $(d.fetch,"POST",`${d.url}/otp`,{headers:d.headers,body:{phone:Be,data:null!==(V=h?.data)&&void 0!==V?V:{},create_user:null===(te=h?.shouldCreateUser)||void 0===te||te,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:null!==(Ie=h?.channel)&&void 0!==Ie?Ie:"sms"}});return d._returnResult({data:{user:null,session:null,messageId:E?.message_id},error:y})}throw new dr("You must provide either an email or phone number.")}catch(Be){if(yield _r(d.storage,`${d.storageKey}-code-verifier`),ne(Be))return d._returnResult({data:{user:null,session:null},error:Be});throw Be}})()}verifyOtp(c){var d=this;return(0,s.A)(function*(){var w,N;try{let V,te;"options"in c&&(V=null===(w=c.options)||void 0===w?void 0:w.redirectTo,te=null===(N=c.options)||void 0===N?void 0:N.captchaToken);const{data:Ie,error:Be}=yield $(d.fetch,"POST",`${d.url}/verify`,{headers:d.headers,body:Object.assign(Object.assign({},c),{gotrue_meta_security:{captcha_token:te}}),redirectTo:V,xform:Ge});if(Be)throw Be;if(!Ie)throw new Error("An error occurred on token verification.");const h=Ie.session,E=Ie.user;return h?.access_token&&(yield d._saveSession(h),yield d._notifyAllSubscribers("recovery"==c.type?"PASSWORD_RECOVERY":"SIGNED_IN",h)),d._returnResult({data:{user:E,session:h},error:null})}catch(V){if(ne(V))return d._returnResult({data:{user:null,session:null},error:V});throw V}})()}signInWithSSO(c){var d=this;return(0,s.A)(function*(){var w,N,V,te,Ie;try{let Be=null,h=null;"pkce"===d.flowType&&([Be,h]=yield at(d.storage,d.storageKey));const E=yield $(d.fetch,"POST",`${d.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in c?{provider_id:c.providerId}:null),"domain"in c?{domain:c.domain}:null),{redirect_to:null!==(N=null===(w=c.options)||void 0===w?void 0:w.redirectTo)&&void 0!==N?N:void 0}),null!==(V=c?.options)&&void 0!==V&&V.captchaToken?{gotrue_meta_security:{captcha_token:c.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:Be,code_challenge_method:h}),headers:d.headers,xform:Qr});return!(null===(te=E.data)||void 0===te)&&te.url&&kt()&&!(null!==(Ie=c.options)&&void 0!==Ie&&Ie.skipBrowserRedirect)&&window.location.assign(E.data.url),d._returnResult(E)}catch(Be){if(yield _r(d.storage,`${d.storageKey}-code-verifier`),ne(Be))return d._returnResult({data:null,error:Be});throw Be}})()}reauthenticate(){var c=this;return(0,s.A)(function*(){return yield c.initializePromise,yield c._acquireLock(c.lockAcquireTimeout,(0,s.A)(function*(){return yield c._reauthenticate()}))})()}_reauthenticate(){var c=this;return(0,s.A)(function*(){try{return yield c._useSession(function(){var d=(0,s.A)(function*(w){const{data:{session:N},error:V}=w;if(V)throw V;if(!N)throw new rn;const{error:te}=yield $(c.fetch,"GET",`${c.url}/reauthenticate`,{headers:c.headers,jwt:N.access_token});return c._returnResult({data:{user:null,session:null},error:te})});return function(w){return d.apply(this,arguments)}}())}catch(d){if(ne(d))return c._returnResult({data:{user:null,session:null},error:d});throw d}})()}resend(c){var d=this;return(0,s.A)(function*(){try{const w=`${d.url}/resend`;if("email"in c){const{email:N,type:V,options:te}=c,{error:Ie}=yield $(d.fetch,"POST",w,{headers:d.headers,body:{email:N,type:V,gotrue_meta_security:{captcha_token:te?.captchaToken}},redirectTo:te?.emailRedirectTo});return d._returnResult({data:{user:null,session:null},error:Ie})}if("phone"in c){const{phone:N,type:V,options:te}=c,{data:Ie,error:Be}=yield $(d.fetch,"POST",w,{headers:d.headers,body:{phone:N,type:V,gotrue_meta_security:{captcha_token:te?.captchaToken}}});return d._returnResult({data:{user:null,session:null,messageId:Ie?.message_id},error:Be})}throw new dr("You must provide either an email or phone number and a type")}catch(w){if(ne(w))return d._returnResult({data:{user:null,session:null},error:w});throw w}})()}getSession(){var c=this;return(0,s.A)(function*(){return yield c.initializePromise,yield c._acquireLock(c.lockAcquireTimeout,(0,s.A)(function*(){return c._useSession(function(){var w=(0,s.A)(function*(N){return N});return function(N){return w.apply(this,arguments)}}())}))})()}_acquireLock(c,d){var w=this;return(0,s.A)(function*(){w._debug("#_acquireLock","begin",c);try{if(w.lockAcquired){const N=w.pendingInLock.length?w.pendingInLock[w.pendingInLock.length-1]:Promise.resolve(),V=(0,s.A)(function*(){return yield N,yield d()})();return w.pendingInLock.push((0,s.A)(function*(){try{yield V}catch{}})()),V}return yield w.lock(`lock:${w.storageKey}`,c,(0,s.A)(function*(){w._debug("#_acquireLock","lock acquired for storage key",w.storageKey);try{w.lockAcquired=!0;const N=d();for(w.pendingInLock.push((0,s.A)(function*(){try{yield N}catch{}})()),yield N;w.pendingInLock.length;){const V=[...w.pendingInLock];yield Promise.all(V),w.pendingInLock.splice(0,V.length)}return yield N}finally{w._debug("#_acquireLock","lock released for storage key",w.storageKey),w.lockAcquired=!1}}))}finally{w._debug("#_acquireLock","end")}})()}_useSession(c){var d=this;return(0,s.A)(function*(){d._debug("#_useSession","begin");try{const w=yield d.__loadSession();return yield c(w)}finally{d._debug("#_useSession","end")}})()}__loadSession(){var c=this;return(0,s.A)(function*(){c._debug("#__loadSession()","begin"),c.lockAcquired||c._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let d=null;const w=yield Or(c.storage,c.storageKey);if(c._debug("#getSession()","session from storage",w),null!==w&&(c._isValidSession(w)?d=w:(c._debug("#getSession()","session from storage is not valid"),yield c._removeSession())),!d)return{data:{session:null},error:null};const N=!!d.expires_at&&1e3*d.expires_at-Date.now()<9e4;if(c._debug("#__loadSession()",`session has${N?"":" not"} expired`,"expires_at",d.expires_at),!N){if(c.userStorage){const Ie=yield Or(c.userStorage,c.storageKey+"-user");d.user=Ie?.user?Ie.user:tn()}if(c.storage.isServer&&d.user&&!d.user.__isUserNotAvailableProxy){const Ie={value:c.suppressGetSessionWarning};d.user=function In(f,u){return new Proxy(f,{get:(c,d,w)=>{if("__isInsecureUserWarningProxy"===d)return!0;if("symbol"==typeof d){const N=d.toString();if("Symbol(Symbol.toPrimitive)"===N||"Symbol(Symbol.toStringTag)"===N||"Symbol(util.inspect.custom)"===N||"Symbol(nodejs.util.inspect.custom)"===N)return Reflect.get(c,d,w)}return!u.value&&"string"==typeof d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u.value=!0),Reflect.get(c,d,w)}})}(d.user,Ie),Ie.value&&(c.suppressGetSessionWarning=!0)}return{data:{session:d},error:null}}const{data:V,error:te}=yield c._callRefreshToken(d.refresh_token);return c._returnResult(te?{data:{session:null},error:te}:{data:{session:V},error:null})}finally{c._debug("#__loadSession()","end")}})()}getUser(c){var d=this;return(0,s.A)(function*(){if(c)return yield d._getUser(c);yield d.initializePromise;const w=yield d._acquireLock(d.lockAcquireTimeout,(0,s.A)(function*(){return yield d._getUser()}));return w.data.user&&(d.suppressGetSessionWarning=!0),w})()}_getUser(c){var d=this;return(0,s.A)(function*(){try{return c?yield $(d.fetch,"GET",`${d.url}/user`,{headers:d.headers,jwt:c,xform:En}):yield d._useSession(function(){var w=(0,s.A)(function*(N){var V,te,Ie;const{data:Be,error:h}=N;if(h)throw h;return null!==(V=Be.session)&&void 0!==V&&V.access_token||d.hasCustomAuthorizationHeader?yield $(d.fetch,"GET",`${d.url}/user`,{headers:d.headers,jwt:null!==(Ie=null===(te=Be.session)||void 0===te?void 0:te.access_token)&&void 0!==Ie?Ie:void 0,xform:En}):{data:{user:null},error:new rn}});return function(N){return w.apply(this,arguments)}}())}catch(w){if(ne(w))return Kt(w)&&(yield d._removeSession(),yield _r(d.storage,`${d.storageKey}-code-verifier`)),d._returnResult({data:{user:null},error:w});throw w}})()}updateUser(c){var d=this;return(0,s.A)(function*(w,N={}){return yield d.initializePromise,yield d._acquireLock(d.lockAcquireTimeout,(0,s.A)(function*(){return yield d._updateUser(w,N)}))}).apply(this,arguments)}_updateUser(c){var d=this;return(0,s.A)(function*(w,N={}){try{return yield d._useSession(function(){var V=(0,s.A)(function*(te){const{data:Ie,error:Be}=te;if(Be)throw Be;if(!Ie.session)throw new rn;const h=Ie.session;let E=null,y=null;"pkce"===d.flowType&&null!=w.email&&([E,y]=yield at(d.storage,d.storageKey));const{data:I,error:F}=yield $(d.fetch,"PUT",`${d.url}/user`,{headers:d.headers,redirectTo:N?.emailRedirectTo,body:Object.assign(Object.assign({},w),{code_challenge:E,code_challenge_method:y}),jwt:h.access_token,xform:En});if(F)throw F;return h.user=I.user,yield d._saveSession(h),yield d._notifyAllSubscribers("USER_UPDATED",h),d._returnResult({data:{user:h.user},error:null})});return function(te){return V.apply(this,arguments)}}())}catch(V){if(yield _r(d.storage,`${d.storageKey}-code-verifier`),ne(V))return d._returnResult({data:{user:null},error:V});throw V}}).apply(this,arguments)}setSession(c){var d=this;return(0,s.A)(function*(){return yield d.initializePromise,yield d._acquireLock(d.lockAcquireTimeout,(0,s.A)(function*(){return yield d._setSession(c)}))})()}_setSession(c){var d=this;return(0,s.A)(function*(){try{if(!c.access_token||!c.refresh_token)throw new rn;const w=Date.now()/1e3;let N=w,V=!0,te=null;const{payload:Ie}=Rr(c.access_token);if(Ie.exp&&(N=Ie.exp,V=N<=w),V){const{data:Be,error:h}=yield d._callRefreshToken(c.refresh_token);if(h)return d._returnResult({data:{user:null,session:null},error:h});if(!Be)return{data:{user:null,session:null},error:null};te=Be}else{const{data:Be,error:h}=yield d._getUser(c.access_token);if(h)return d._returnResult({data:{user:null,session:null},error:h});te={access_token:c.access_token,refresh_token:c.refresh_token,user:Be.user,token_type:"bearer",expires_in:N-w,expires_at:N},yield d._saveSession(te),yield d._notifyAllSubscribers("SIGNED_IN",te)}return d._returnResult({data:{user:te.user,session:te},error:null})}catch(w){if(ne(w))return d._returnResult({data:{session:null,user:null},error:w});throw w}})()}refreshSession(c){var d=this;return(0,s.A)(function*(){return yield d.initializePromise,yield d._acquireLock(d.lockAcquireTimeout,(0,s.A)(function*(){return yield d._refreshSession(c)}))})()}_refreshSession(c){var d=this;return(0,s.A)(function*(){try{return yield d._useSession(function(){var w=(0,s.A)(function*(N){var V;if(!c){const{data:Be,error:h}=N;if(h)throw h;c=null!==(V=Be.session)&&void 0!==V?V:void 0}if(!c?.refresh_token)throw new rn;const{data:te,error:Ie}=yield d._callRefreshToken(c.refresh_token);return d._returnResult(Ie?{data:{user:null,session:null},error:Ie}:te?{data:{user:te.user,session:te},error:null}:{data:{user:null,session:null},error:null})});return function(N){return w.apply(this,arguments)}}())}catch(w){if(ne(w))return d._returnResult({data:{user:null,session:null},error:w});throw w}})()}_getSessionFromURL(c,d){var w=this;return(0,s.A)(function*(){try{if(!kt())throw new cr("No browser detected.");if(c.error||c.error_description||c.error_code)throw new cr(c.error_description||"Error in URL with unspecified error_description",{error:c.error||"unspecified_error",code:c.error_code||"unspecified_code"});switch(d){case"implicit":if("pkce"===w.flowType)throw new W("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===w.flowType)throw new cr("Not a valid implicit grant flow url.")}if("pkce"===d){if(w._debug("#_initialize()","begin","is PKCE flow",!0),!c.code)throw new W("No code detected.");const{data:dn,error:mn}=yield w._exchangeCodeForSession(c.code);if(mn)throw mn;const pr=new URL(window.location.href);return pr.searchParams.delete("code"),window.history.replaceState(window.history.state,"",pr.toString()),{data:{session:dn.session,redirectType:null},error:null}}const{provider_token:N,provider_refresh_token:V,access_token:te,refresh_token:Ie,expires_in:Be,expires_at:h,token_type:E}=c;if(!(te&&Be&&Ie&&E))throw new cr("No session defined in URL");const y=Math.round(Date.now()/1e3),I=parseInt(Be);let F=y+I;h&&(F=parseInt(h));const J=F-y;1e3*J<=Kr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${J}s, should have been closer to ${I}s`);const De=F-I;y-De>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",De,F,y):y-De<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",De,F,y);const{data:qe,error:gt}=yield w._getUser(te);if(gt)throw gt;const Ht={provider_token:N,provider_refresh_token:V,access_token:te,expires_in:I,expires_at:F,refresh_token:Ie,token_type:E,user:qe.user};return window.location.hash="",w._debug("#_getSessionFromURL()","clearing window.location.hash"),w._returnResult({data:{session:Ht,redirectType:c.type},error:null})}catch(N){if(ne(N))return w._returnResult({data:{session:null,redirectType:null},error:N});throw N}})()}_isImplicitGrantCallback(c){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),c):!(!c.access_token&&!c.error_description)}_isPKCECallback(c){var d=this;return(0,s.A)(function*(){const w=yield Or(d.storage,`${d.storageKey}-code-verifier`);return!(!c.code||!w)})()}signOut(){var c=this;return(0,s.A)(function*(d={scope:"global"}){return yield c.initializePromise,yield c._acquireLock(c.lockAcquireTimeout,(0,s.A)(function*(){return yield c._signOut(d)}))}).apply(this,arguments)}_signOut(){var c=this;return(0,s.A)(function*({scope:d}={scope:"global"}){return yield c._useSession(function(){var w=(0,s.A)(function*(N){var V;const{data:te,error:Ie}=N;if(Ie&&!Kt(Ie))return c._returnResult({error:Ie});const Be=null===(V=te.session)||void 0===V?void 0:V.access_token;if(Be){const{error:h}=yield c.admin.signOut(Be,d);if(h&&(!function bt(f){return ne(f)&&"AuthApiError"===f.name}(h)||404!==h.status&&401!==h.status&&403!==h.status)&&!Kt(h))return c._returnResult({error:h})}return"others"!==d&&(yield c._removeSession(),yield _r(c.storage,`${c.storageKey}-code-verifier`)),c._returnResult({error:null})});return function(N){return w.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(c){var d=this;const w=function xt(){return Symbol("auth-callback")}(),N={id:w,callback:c,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",w),this.stateChangeEmitters.delete(w)}};return this._debug("#onAuthStateChange()","registered callback with id",w),this.stateChangeEmitters.set(w,N),(0,s.A)(function*(){yield d.initializePromise,yield d._acquireLock(d.lockAcquireTimeout,(0,s.A)(function*(){d._emitInitialSession(w)}))})(),{data:{subscription:N}}}_emitInitialSession(c){var d=this;return(0,s.A)(function*(){return yield d._useSession(function(){var w=(0,s.A)(function*(N){var V,te;try{const{data:{session:Ie},error:Be}=N;if(Be)throw Be;yield null===(V=d.stateChangeEmitters.get(c))||void 0===V?void 0:V.callback("INITIAL_SESSION",Ie),d._debug("INITIAL_SESSION","callback id",c,"session",Ie)}catch(Ie){yield null===(te=d.stateChangeEmitters.get(c))||void 0===te?void 0:te.callback("INITIAL_SESSION",null),d._debug("INITIAL_SESSION","callback id",c,"error",Ie),console.error(Ie)}});return function(N){return w.apply(this,arguments)}}())})()}resetPasswordForEmail(c){var d=this;return(0,s.A)(function*(w,N={}){let V=null,te=null;"pkce"===d.flowType&&([V,te]=yield at(d.storage,d.storageKey,!0));try{return yield $(d.fetch,"POST",`${d.url}/recover`,{body:{email:w,code_challenge:V,code_challenge_method:te,gotrue_meta_security:{captcha_token:N.captchaToken}},headers:d.headers,redirectTo:N.redirectTo})}catch(Ie){if(yield _r(d.storage,`${d.storageKey}-code-verifier`),ne(Ie))return d._returnResult({data:null,error:Ie});throw Ie}}).apply(this,arguments)}getUserIdentities(){var c=this;return(0,s.A)(function*(){var d;try{const{data:w,error:N}=yield c.getUser();if(N)throw N;return c._returnResult({data:{identities:null!==(d=w.user.identities)&&void 0!==d?d:[]},error:null})}catch(w){if(ne(w))return c._returnResult({data:null,error:w});throw w}})()}linkIdentity(c){var d=this;return(0,s.A)(function*(){return"token"in c?d.linkIdentityIdToken(c):d.linkIdentityOAuth(c)})()}linkIdentityOAuth(c){var d=this;return(0,s.A)(function*(){var w;try{const{data:N,error:V}=yield d._useSession(function(){var te=(0,s.A)(function*(Ie){var Be,h,E,y,I;const{data:F,error:J}=Ie;if(J)throw J;const De=yield d._getUrlForProvider(`${d.url}/user/identities/authorize`,c.provider,{redirectTo:null===(Be=c.options)||void 0===Be?void 0:Be.redirectTo,scopes:null===(h=c.options)||void 0===h?void 0:h.scopes,queryParams:null===(E=c.options)||void 0===E?void 0:E.queryParams,skipBrowserRedirect:!0});return yield $(d.fetch,"GET",De,{headers:d.headers,jwt:null!==(I=null===(y=F.session)||void 0===y?void 0:y.access_token)&&void 0!==I?I:void 0})});return function(Ie){return te.apply(this,arguments)}}());if(V)throw V;return kt()&&!(null!==(w=c.options)&&void 0!==w&&w.skipBrowserRedirect)&&window.location.assign(N?.url),d._returnResult({data:{provider:c.provider,url:N?.url},error:null})}catch(N){if(ne(N))return d._returnResult({data:{provider:c.provider,url:null},error:N});throw N}})()}linkIdentityIdToken(c){var d=this;return(0,s.A)(function*(){return yield d._useSession(function(){var w=(0,s.A)(function*(N){var V;try{const{error:te,data:{session:Ie}}=N;if(te)throw te;const{options:Be,provider:h,token:E,access_token:y,nonce:I}=c,F=yield $(d.fetch,"POST",`${d.url}/token?grant_type=id_token`,{headers:d.headers,jwt:null!==(V=Ie?.access_token)&&void 0!==V?V:void 0,body:{provider:h,id_token:E,access_token:y,nonce:I,link_identity:!0,gotrue_meta_security:{captcha_token:Be?.captchaToken}},xform:Ge}),{data:J,error:De}=F;return De?d._returnResult({data:{user:null,session:null},error:De}):J&&J.session&&J.user?(J.session&&(yield d._saveSession(J.session),yield d._notifyAllSubscribers("USER_UPDATED",J.session)),d._returnResult({data:J,error:De})):d._returnResult({data:{user:null,session:null},error:new Nn})}catch(te){if(yield _r(d.storage,`${d.storageKey}-code-verifier`),ne(te))return d._returnResult({data:{user:null,session:null},error:te});throw te}});return function(N){return w.apply(this,arguments)}}())})()}unlinkIdentity(c){var d=this;return(0,s.A)(function*(){try{return yield d._useSession(function(){var w=(0,s.A)(function*(N){var V,te;const{data:Ie,error:Be}=N;if(Be)throw Be;return yield $(d.fetch,"DELETE",`${d.url}/user/identities/${c.identity_id}`,{headers:d.headers,jwt:null!==(te=null===(V=Ie.session)||void 0===V?void 0:V.access_token)&&void 0!==te?te:void 0})});return function(N){return w.apply(this,arguments)}}())}catch(w){if(ne(w))return d._returnResult({data:null,error:w});throw w}})()}_refreshAccessToken(c){var d=this;return(0,s.A)(function*(){const w=`#_refreshAccessToken(${c.substring(0,5)}...)`;d._debug(w,"begin");try{const N=Date.now();return yield function Do(f,u){return new Promise((d,w)=>{(0,s.A)(function*(){for(let N=0;N<1/0;N++)try{const V=yield f(N);if(!u(N,null,V))return void d(V)}catch(V){if(!u(N,V))return void w(V)}})()})}(function(){var V=(0,s.A)(function*(te){return te>0&&(yield function ao(f){return Zr.apply(this,arguments)}(200*Math.pow(2,te-1))),d._debug(w,"refreshing attempt",te),yield $(d.fetch,"POST",`${d.url}/token?grant_type=refresh_token`,{body:{refresh_token:c},headers:d.headers,xform:Ge})});return function(te){return V.apply(this,arguments)}}(),(V,te)=>{const Ie=200*Math.pow(2,V);return te&&Te(te)&&Date.now()+Ie-N<Kr})}catch(N){if(d._debug(w,"error",N),ne(N))return d._returnResult({data:{session:null,user:null},error:N});throw N}finally{d._debug(w,"end")}})()}_isValidSession(c){return"object"==typeof c&&null!==c&&"access_token"in c&&"refresh_token"in c&&"expires_at"in c}_handleProviderSignIn(c,d){var w=this;return(0,s.A)(function*(){const N=yield w._getUrlForProvider(`${w.url}/authorize`,c,{redirectTo:d.redirectTo,scopes:d.scopes,queryParams:d.queryParams});return w._debug("#_handleProviderSignIn()","provider",c,"options",d,"url",N),kt()&&!d.skipBrowserRedirect&&window.location.assign(N),{data:{provider:c,url:N},error:null}})()}_recoverAndRefresh(){var c=this;return(0,s.A)(function*(){var d,w;const N="#_recoverAndRefresh()";c._debug(N,"begin");try{const V=yield Or(c.storage,c.storageKey);if(V&&c.userStorage){let Ie=yield Or(c.userStorage,c.storageKey+"-user");!c.storage.isServer&&Object.is(c.storage,c.userStorage)&&!Ie&&(Ie={user:V.user},yield Mr(c.userStorage,c.storageKey+"-user",Ie)),V.user=null!==(d=Ie?.user)&&void 0!==d?d:tn()}else if(V&&!V.user&&!V.user){const Ie=yield Or(c.storage,c.storageKey+"-user");Ie&&Ie?.user?(V.user=Ie.user,yield _r(c.storage,c.storageKey+"-user"),yield Mr(c.storage,c.storageKey,V)):V.user=tn()}if(c._debug(N,"session from storage",V),!c._isValidSession(V))return c._debug(N,"session is not valid"),void(null!==V&&(yield c._removeSession()));const te=1e3*(null!==(w=V.expires_at)&&void 0!==w?w:1/0)-Date.now()<9e4;if(c._debug(N,`session has${te?"":" not"} expired with margin of 90000s`),te){if(c.autoRefreshToken&&V.refresh_token){const{error:Ie}=yield c._callRefreshToken(V.refresh_token);Ie&&(console.error(Ie),Te(Ie)||(c._debug(N,"refresh failed with a non-retryable error, removing the session",Ie),yield c._removeSession()))}}else if(V.user&&!0===V.user.__isUserNotAvailableProxy)try{const{data:Ie,error:Be}=yield c._getUser(V.access_token);!Be&&Ie?.user?(V.user=Ie.user,yield c._saveSession(V),yield c._notifyAllSubscribers("SIGNED_IN",V)):c._debug(N,"could not get user data, skipping SIGNED_IN notification")}catch(Ie){console.error("Error getting user data:",Ie),c._debug(N,"error getting user data, skipping SIGNED_IN notification",Ie)}else yield c._notifyAllSubscribers("SIGNED_IN",V)}catch(V){return c._debug(N,"error",V),void console.error(V)}finally{c._debug(N,"end")}})()}_callRefreshToken(c){var d=this;return(0,s.A)(function*(){var w,N;if(!c)throw new rn;if(d.refreshingDeferred)return d.refreshingDeferred.promise;const V=`#_callRefreshToken(${c.substring(0,5)}...)`;d._debug(V,"begin");try{d.refreshingDeferred=new qr;const{data:te,error:Ie}=yield d._refreshAccessToken(c);if(Ie)throw Ie;if(!te.session)throw new rn;yield d._saveSession(te.session),yield d._notifyAllSubscribers("TOKEN_REFRESHED",te.session);const Be={data:te.session,error:null};return d.refreshingDeferred.resolve(Be),Be}catch(te){if(d._debug(V,"error",te),ne(te)){const Ie={data:null,error:te};return Te(te)||(yield d._removeSession()),null===(w=d.refreshingDeferred)||void 0===w||w.resolve(Ie),Ie}throw null===(N=d.refreshingDeferred)||void 0===N||N.reject(te),te}finally{d.refreshingDeferred=null,d._debug(V,"end")}})()}_notifyAllSubscribers(c,d){var w=this;return(0,s.A)(function*(N,V,te=!0){const Ie=`#_notifyAllSubscribers(${N})`;w._debug(Ie,"begin",V,`broadcast = ${te}`);try{w.broadcastChannel&&te&&w.broadcastChannel.postMessage({event:N,session:V});const Be=[],h=Array.from(w.stateChangeEmitters.values()).map(function(){var E=(0,s.A)(function*(y){try{yield y.callback(N,V)}catch(I){Be.push(I)}});return function(y){return E.apply(this,arguments)}}());if(yield Promise.all(h),Be.length>0){for(let E=0;E<Be.length;E+=1)console.error(Be[E]);throw Be[0]}}finally{w._debug(Ie,"end")}}).apply(this,arguments)}_saveSession(c){var d=this;return(0,s.A)(function*(){d._debug("#_saveSession()",c),d.suppressGetSessionWarning=!0,yield _r(d.storage,`${d.storageKey}-code-verifier`);const w=Object.assign({},c);if(d.userStorage){(!w.user||!0!==w.user.__isUserNotAvailableProxy)&&w.user&&(yield Mr(d.userStorage,d.storageKey+"-user",{user:w.user}));const V=Object.assign({},w);delete V.user;const te=yn(V);yield Mr(d.storage,d.storageKey,te)}else{const V=yn(w);yield Mr(d.storage,d.storageKey,V)}})()}_removeSession(){var c=this;return(0,s.A)(function*(){c._debug("#_removeSession()"),c.suppressGetSessionWarning=!1,yield _r(c.storage,c.storageKey),yield _r(c.storage,c.storageKey+"-code-verifier"),yield _r(c.storage,c.storageKey+"-user"),c.userStorage&&(yield _r(c.userStorage,c.storageKey+"-user")),yield c._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const c=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{c&&kt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",c)}catch(d){console.error("removing visibilitychange callback failed",d)}}_startAutoRefresh(){var c=this;return(0,s.A)(function*(){yield c._stopAutoRefresh(),c._debug("#_startAutoRefresh()");const d=setInterval(()=>c._autoRefreshTokenTick(),Kr);c.autoRefreshTicker=d,d&&"object"==typeof d&&"function"==typeof d.unref?d.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(d);const w=setTimeout((0,s.A)(function*(){yield c.initializePromise,yield c._autoRefreshTokenTick()}),0);c.autoRefreshTickTimeout=w,w&&"object"==typeof w&&"function"==typeof w.unref?w.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(w)})()}_stopAutoRefresh(){var c=this;return(0,s.A)(function*(){c._debug("#_stopAutoRefresh()");const d=c.autoRefreshTicker;c.autoRefreshTicker=null,d&&clearInterval(d);const w=c.autoRefreshTickTimeout;c.autoRefreshTickTimeout=null,w&&clearTimeout(w)})()}startAutoRefresh(){var c=this;return(0,s.A)(function*(){c._removeVisibilityChangedCallback(),yield c._startAutoRefresh()})()}stopAutoRefresh(){var c=this;return(0,s.A)(function*(){c._removeVisibilityChangedCallback(),yield c._stopAutoRefresh()})()}_autoRefreshTokenTick(){var c=this;return(0,s.A)(function*(){c._debug("#_autoRefreshTokenTick()","begin");try{yield c._acquireLock(0,(0,s.A)(function*(){try{const d=Date.now();try{return yield c._useSession(function(){var w=(0,s.A)(function*(N){const{data:{session:V}}=N;if(!V||!V.refresh_token||!V.expires_at)return void c._debug("#_autoRefreshTokenTick()","no session");const te=Math.floor((1e3*V.expires_at-d)/Kr);c._debug("#_autoRefreshTokenTick()",`access token expires in ${te} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),te<=3&&(yield c._callRefreshToken(V.refresh_token))});return function(N){return w.apply(this,arguments)}}())}catch(w){console.error("Auto refresh tick failed with error. This is likely a transient error.",w)}}finally{c._debug("#_autoRefreshTokenTick()","end")}}))}catch(d){if(!(d.isAcquireTimeout||d instanceof Us))throw d;c._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var c=this;return(0,s.A)(function*(){if(c._debug("#_handleVisibilityChange()"),!kt()||!window?.addEventListener)return c.autoRefreshToken&&c.startAutoRefresh(),!1;try{c.visibilityChangedCallback=(0,s.A)(function*(){try{yield c._onVisibilityChanged(!1)}catch(d){c._debug("#visibilityChangedCallback","error",d)}}),window?.addEventListener("visibilitychange",c.visibilityChangedCallback),yield c._onVisibilityChanged(!0)}catch(d){console.error("_handleVisibilityChange",d)}})()}_onVisibilityChanged(c){var d=this;return(0,s.A)(function*(){const w=`#_onVisibilityChanged(${c})`;d._debug(w,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(d.autoRefreshToken&&d._startAutoRefresh(),c||(yield d.initializePromise,yield d._acquireLock(d.lockAcquireTimeout,(0,s.A)(function*(){"visible"===document.visibilityState?yield d._recoverAndRefresh():d._debug(w,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&d.autoRefreshToken&&d._stopAutoRefresh()})()}_getUrlForProvider(c,d,w){var N=this;return(0,s.A)(function*(){const V=[`provider=${encodeURIComponent(d)}`];if(w?.redirectTo&&V.push(`redirect_to=${encodeURIComponent(w.redirectTo)}`),w?.scopes&&V.push(`scopes=${encodeURIComponent(w.scopes)}`),"pkce"===N.flowType){const[te,Ie]=yield at(N.storage,N.storageKey),Be=new URLSearchParams({code_challenge:`${encodeURIComponent(te)}`,code_challenge_method:`${encodeURIComponent(Ie)}`});V.push(Be.toString())}if(w?.queryParams){const te=new URLSearchParams(w.queryParams);V.push(te.toString())}return w?.skipBrowserRedirect&&V.push(`skip_http_redirect=${w.skipBrowserRedirect}`),`${c}?${V.join("&")}`})()}_unenroll(c){var d=this;return(0,s.A)(function*(){try{return yield d._useSession(function(){var w=(0,s.A)(function*(N){var V;const{data:te,error:Ie}=N;return Ie?d._returnResult({data:null,error:Ie}):yield $(d.fetch,"DELETE",`${d.url}/factors/${c.factorId}`,{headers:d.headers,jwt:null===(V=te?.session)||void 0===V?void 0:V.access_token})});return function(N){return w.apply(this,arguments)}}())}catch(w){if(ne(w))return d._returnResult({data:null,error:w});throw w}})()}_enroll(c){var d=this;return(0,s.A)(function*(){try{return yield d._useSession(function(){var w=(0,s.A)(function*(N){var V,te;const{data:Ie,error:Be}=N;if(Be)return d._returnResult({data:null,error:Be});const h=Object.assign({friendly_name:c.friendlyName,factor_type:c.factorType},"phone"===c.factorType?{phone:c.phone}:"totp"===c.factorType?{issuer:c.issuer}:{}),{data:E,error:y}=yield $(d.fetch,"POST",`${d.url}/factors`,{body:h,headers:d.headers,jwt:null===(V=Ie?.session)||void 0===V?void 0:V.access_token});return y?d._returnResult({data:null,error:y}):("totp"===c.factorType&&"totp"===E.type&&!(null===(te=E?.totp)||void 0===te)&&te.qr_code&&(E.totp.qr_code=`data:image/svg+xml;utf-8,${E.totp.qr_code}`),d._returnResult({data:E,error:null}))});return function(N){return w.apply(this,arguments)}}())}catch(w){if(ne(w))return d._returnResult({data:null,error:w});throw w}})()}_verify(c){var d=this;return(0,s.A)(function*(){return d._acquireLock(d.lockAcquireTimeout,(0,s.A)(function*(){try{return yield d._useSession(function(){var w=(0,s.A)(function*(N){var V;const{data:te,error:Ie}=N;if(Ie)return d._returnResult({data:null,error:Ie});const Be=Object.assign({challenge_id:c.challengeId},"webauthn"in c?{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_response:"create"===c.webauthn.type?ui(c.webauthn.credential_response):Ks(c.webauthn.credential_response)})}:{code:c.code}),{data:h,error:E}=yield $(d.fetch,"POST",`${d.url}/factors/${c.factorId}/verify`,{body:Be,headers:d.headers,jwt:null===(V=te?.session)||void 0===V?void 0:V.access_token});return E?d._returnResult({data:null,error:E}):(yield d._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),yield d._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),d._returnResult({data:h,error:E}))});return function(N){return w.apply(this,arguments)}}())}catch(w){if(ne(w))return d._returnResult({data:null,error:w});throw w}}))})()}_challenge(c){var d=this;return(0,s.A)(function*(){return d._acquireLock(d.lockAcquireTimeout,(0,s.A)(function*(){try{return yield d._useSession(function(){var w=(0,s.A)(function*(N){var V;const{data:te,error:Ie}=N;if(Ie)return d._returnResult({data:null,error:Ie});const Be=yield $(d.fetch,"POST",`${d.url}/factors/${c.factorId}/challenge`,{body:c,headers:d.headers,jwt:null===(V=te?.session)||void 0===V?void 0:V.access_token});if(Be.error)return Be;const{data:h}=Be;if("webauthn"!==h.type)return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:ms(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:ko(h.webauthn.credential_options.publicKey)})})}),error:null}}});return function(N){return w.apply(this,arguments)}}())}catch(w){if(ne(w))return d._returnResult({data:null,error:w});throw w}}))})()}_challengeAndVerify(c){var d=this;return(0,s.A)(function*(){const{data:w,error:N}=yield d._challenge({factorId:c.factorId});return N?d._returnResult({data:null,error:N}):yield d._verify({factorId:c.factorId,challengeId:w.id,code:c.code})})()}_listFactors(){var c=this;return(0,s.A)(function*(){var d;const{data:{user:w},error:N}=yield c.getUser();if(N)return{data:null,error:N};const V={all:[],phone:[],totp:[],webauthn:[]};for(const te of null!==(d=w?.factors)&&void 0!==d?d:[])V.all.push(te),"verified"===te.status&&V[te.factor_type].push(te);return{data:V,error:null}})()}_getAuthenticatorAssuranceLevel(c){var d=this;return(0,s.A)(function*(){var w,N,V,te;if(c)try{const{payload:J}=Rr(c);let De=null;J.aal&&(De=J.aal);let qe=De;const{data:{user:gt},error:Ht}=yield d.getUser(c);return Ht?d._returnResult({data:null,error:Ht}):((null!==(N=null===(w=gt?.factors)||void 0===w?void 0:w.filter(pr=>"verified"===pr.status))&&void 0!==N?N:[]).length>0&&(qe="aal2"),{data:{currentLevel:De,nextLevel:qe,currentAuthenticationMethods:J.amr||[]},error:null})}catch(J){if(ne(J))return d._returnResult({data:null,error:J});throw J}const{data:{session:Ie},error:Be}=yield d.getSession();if(Be)return d._returnResult({data:null,error:Be});if(!Ie)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Rr(Ie.access_token);let E=null;h.aal&&(E=h.aal);let y=E;return(null!==(te=null===(V=Ie.user.factors)||void 0===V?void 0:V.filter(J=>"verified"===J.status))&&void 0!==te?te:[]).length>0&&(y="aal2"),{data:{currentLevel:E,nextLevel:y,currentAuthenticationMethods:h.amr||[]},error:null}})()}_getAuthorizationDetails(c){var d=this;return(0,s.A)(function*(){try{return yield d._useSession(function(){var w=(0,s.A)(function*(N){const{data:{session:V},error:te}=N;return te?d._returnResult({data:null,error:te}):V?yield $(d.fetch,"GET",`${d.url}/oauth/authorizations/${c}`,{headers:d.headers,jwt:V.access_token,xform:Ie=>({data:Ie,error:null})}):d._returnResult({data:null,error:new rn})});return function(N){return w.apply(this,arguments)}}())}catch(w){if(ne(w))return d._returnResult({data:null,error:w});throw w}})()}_approveAuthorization(c,d){var w=this;return(0,s.A)(function*(){try{return yield w._useSession(function(){var N=(0,s.A)(function*(V){const{data:{session:te},error:Ie}=V;if(Ie)return w._returnResult({data:null,error:Ie});if(!te)return w._returnResult({data:null,error:new rn});const Be=yield $(w.fetch,"POST",`${w.url}/oauth/authorizations/${c}/consent`,{headers:w.headers,jwt:te.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return Be.data&&Be.data.redirect_url&&kt()&&!d?.skipBrowserRedirect&&window.location.assign(Be.data.redirect_url),Be});return function(V){return N.apply(this,arguments)}}())}catch(N){if(ne(N))return w._returnResult({data:null,error:N});throw N}})()}_denyAuthorization(c,d){var w=this;return(0,s.A)(function*(){try{return yield w._useSession(function(){var N=(0,s.A)(function*(V){const{data:{session:te},error:Ie}=V;if(Ie)return w._returnResult({data:null,error:Ie});if(!te)return w._returnResult({data:null,error:new rn});const Be=yield $(w.fetch,"POST",`${w.url}/oauth/authorizations/${c}/consent`,{headers:w.headers,jwt:te.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return Be.data&&Be.data.redirect_url&&kt()&&!d?.skipBrowserRedirect&&window.location.assign(Be.data.redirect_url),Be});return function(V){return N.apply(this,arguments)}}())}catch(N){if(ne(N))return w._returnResult({data:null,error:N});throw N}})()}_listOAuthGrants(){var c=this;return(0,s.A)(function*(){try{return yield c._useSession(function(){var d=(0,s.A)(function*(w){const{data:{session:N},error:V}=w;return V?c._returnResult({data:null,error:V}):N?yield $(c.fetch,"GET",`${c.url}/user/oauth/grants`,{headers:c.headers,jwt:N.access_token,xform:te=>({data:te,error:null})}):c._returnResult({data:null,error:new rn})});return function(w){return d.apply(this,arguments)}}())}catch(d){if(ne(d))return c._returnResult({data:null,error:d});throw d}})()}_revokeOAuthGrant(c){var d=this;return(0,s.A)(function*(){try{return yield d._useSession(function(){var w=(0,s.A)(function*(N){const{data:{session:V},error:te}=N;return te?d._returnResult({data:null,error:te}):V?(yield $(d.fetch,"DELETE",`${d.url}/user/oauth/grants`,{headers:d.headers,jwt:V.access_token,query:{client_id:c.clientId},noResolveJson:!0}),{data:{},error:null}):d._returnResult({data:null,error:new rn})});return function(N){return w.apply(this,arguments)}}())}catch(w){if(ne(w))return d._returnResult({data:null,error:w});throw w}})()}fetchJwk(c){var d=this;return(0,s.A)(function*(w,N={keys:[]}){let V=N.keys.find(h=>h.kid===w);if(V)return V;const te=Date.now();if(V=d.jwks.keys.find(h=>h.kid===w),V&&d.jwks_cached_at+6e5>te)return V;const{data:Ie,error:Be}=yield $(d.fetch,"GET",`${d.url}/.well-known/jwks.json`,{headers:d.headers});if(Be)throw Be;return Ie.keys&&0!==Ie.keys.length&&(d.jwks=Ie,d.jwks_cached_at=te,V=Ie.keys.find(h=>h.kid===w),V)?V:null}).apply(this,arguments)}getClaims(c){var d=this;return(0,s.A)(function*(w,N={}){try{let V=w;if(!V){const{data:De,error:qe}=yield d.getSession();if(qe||!De.session)return d._returnResult({data:null,error:qe});V=De.session.access_token}const{header:te,payload:Ie,signature:Be,raw:{header:h,payload:E}}=Rr(V);N?.allowExpired||function jt(f){if(!f)throw new Error("Missing exp claim");if(f<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(Ie.exp);const y=te.alg&&!te.alg.startsWith("HS")&&te.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield d.fetchJwk(te.kid,N?.keys?{keys:N.keys}:N?.jwks):null;if(!y){const{error:De}=yield d.getUser(V);if(De)throw De;return{data:{claims:Ie,header:te,signature:Be},error:null}}const I=function Ct(f){switch(f){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(te.alg),F=yield crypto.subtle.importKey("jwk",y,I,!0,["verify"]);if(!(yield crypto.subtle.verify(I,F,Be,function de(f){const u=[];return function Io(f,u){for(let c=0;c<f.length;c+=1){let d=f.charCodeAt(c);if(d>55295&&d<=56319){const w=1024*(d-55296)&65535;d=65536+(f.charCodeAt(c+1)-56320&65535|w),c+=1}ns(d,u)}}(f,c=>u.push(c)),new Uint8Array(u)}(`${h}.${E}`))))throw new Pn("Invalid JWT signature");return{data:{claims:Ie,header:te,signature:Be},error:null}}catch(V){if(ne(V))return d._returnResult({data:null,error:V});throw V}}).apply(this,arguments)}}return f.nextInstanceID={},f})(),Xs=va;let Go="";Go=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const Jo={headers:{"X-Client-Info":`supabase-js-${Go}/2.95.0`}},bs={schema:"public"},fi={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wi={};function Xo(f){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(f)}function us(f,u,c){return(u=function Ki(f){var u=function Qs(f,u){if("object"!=Xo(f)||!f)return f;var c=f[Symbol.toPrimitive];if(void 0!==c){var d=c.call(f,u||"default");if("object"!=Xo(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(f)}(f,"string");return"symbol"==Xo(u)?u:u+""}(u))in f?Object.defineProperty(f,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):f[u]=c,f}function Ds(f,u){var c=Object.keys(f);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(f);u&&(d=d.filter(function(w){return Object.getOwnPropertyDescriptor(f,w).enumerable})),c.push.apply(c,d)}return c}function ro(f){for(var u=1;u<arguments.length;u++){var c=null!=arguments[u]?arguments[u]:{};u%2?Ds(Object(c),!0).forEach(function(d){us(f,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(c)):Ds(Object(c)).forEach(function(d){Object.defineProperty(f,d,Object.getOwnPropertyDescriptor(c,d))})}return f}const Js=(f,u,c)=>{const d=(f=>f?(...u)=>f(...u):(...u)=>fetch(...u))(c),w=Headers;return function(){var N=(0,s.A)(function*(V,te){var Ie;const Be=null!==(Ie=yield u())&&void 0!==Ie?Ie:f;let h=new w(te?.headers);return h.has("apikey")||h.set("apikey",f),h.has("Authorization")||h.set("Authorization",`Bearer ${Be}`),d(V,ro(ro({},te),{},{headers:h}))});return function(V,te){return N.apply(this,arguments)}}()};var Cs=class extends Xs{constructor(f){super(f)}},xs=class{constructor(f,u,c){var d,w;this.supabaseUrl=f,this.supabaseKey=u;const N=function Hi(f){const u=f?.trim();if(!u)throw new Error("supabaseUrl is required.");if(!u.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function Ss(f){return f.endsWith("/")?f:f+"/"}(u))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(f);if(!u)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",N),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",N),this.storageUrl=new URL("storage/v1",N),this.functionsUrl=new URL("functions/v1",N);const V=`sb-${N.hostname.split(".")[0]}-auth-token`,Ie=function Rs(f,u){var c,d;const{db:w,auth:N,realtime:V,global:te}=f,{db:Ie,auth:Be,realtime:h,global:E}=u,y={db:ro(ro({},Ie),w),auth:ro(ro({},Be),N),realtime:ro(ro({},h),V),storage:{},global:ro(ro(ro({},E),te),{},{headers:ro(ro({},null!==(c=E?.headers)&&void 0!==c?c:{}),null!==(d=te?.headers)&&void 0!==d?d:{})}),accessToken:(I=(0,s.A)(function*(){return""}),function(){return I.apply(this,arguments)})};var I;return f.accessToken?y.accessToken=f.accessToken:delete y.accessToken,y}(c??{},{db:bs,realtime:Wi,auth:ro(ro({},fi),{},{storageKey:V}),global:Jo});var Be;this.storageKey=null!==(d=Ie.auth.storageKey)&&void 0!==d?d:"",this.headers=null!==(w=Ie.global.headers)&&void 0!==w?w:{},Ie.accessToken?(this.accessToken=Ie.accessToken,this.auth=new Proxy({},{get:(h,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(Be=Ie.auth)&&void 0!==Be?Be:{},this.headers,Ie.global.fetch),this.fetch=Js(u,this._getAccessToken.bind(this),Ie.global.fetch),this.realtime=this._initRealtimeClient(ro({headers:this.headers,accessToken:this._getAccessToken.bind(this)},Ie.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new Z(new URL("rest/v1",N).href,{headers:this.headers,schema:Ie.db.schema,fetch:this.fetch,timeout:Ie.db.timeout,urlLengthLimit:Ie.db.urlLengthLimit}),this.storage=new Yr(this.storageUrl.href,this.headers,this.fetch,c?.storage),Ie.accessToken||this._listenForAuthEvents()}get functions(){return new me(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(f){return this.rest.from(f)}schema(f){return this.rest.schema(f)}rpc(f,u={},c={head:!1,get:!1,count:void 0}){return this.rest.rpc(f,u,c)}channel(f,u={config:{}}){return this.realtime.channel(f,u)}getChannels(){return this.realtime.getChannels()}removeChannel(f){return this.realtime.removeChannel(f)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var f=this;return(0,s.A)(function*(){var c,d,u=f;if(u.accessToken)return yield u.accessToken();const{data:w}=yield u.auth.getSession();return null!==(c=null===(d=w.session)||void 0===d?void 0:d.access_token)&&void 0!==c?c:u.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:f,persistSession:u,detectSessionInUrl:c,storage:d,userStorage:w,storageKey:N,flowType:V,lock:te,debug:Ie,throwOnError:Be},h,E){return new Cs({url:this.authUrl.href,headers:ro(ro({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),h),storageKey:N,autoRefreshToken:f,persistSession:u,detectSessionInUrl:c,storage:d,userStorage:w,flowType:V,lock:te,debug:Ie,throwOnError:Be,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(I=>"authorization"===I.toLowerCase())})}_initRealtimeClient(f){return new pn(this.realtimeUrl.href,ro(ro({},f),{},{params:ro(ro({},{apikey:this.supabaseKey}),f?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((f,u)=>{this._handleTokenChanged(f,"CLIENT",u?.access_token)})}_handleTokenChanged(f,u,c){"TOKEN_REFRESHED"!==f&&"SIGNED_IN"!==f||this.changedAccessToken===c?"SIGNED_OUT"===f&&(this.realtime.setAuth(),"STORAGE"==u&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=c,this.realtime.setAuth(c))}};(function Ys(){if(typeof window<"u")return!1;const f=globalThis.process;if(!f)return!1;const u=f.version;if(null==u)return!1;const c=u.match(/^v(\d+)\./);return!!c&&parseInt(c[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Yo=b(5312),As=b(2615);let Uo=(()=>{var f;class u{constructor(){this.supabase=((f,u)=>new xs(f,u,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}))(Yo.c.supabase.url,Yo.c.supabase.anonKey)}getClient(){return console.log("Getting Supabase client"),this.supabase}createCustomUser(d){var w=this;return(0,s.A)(function*(){console.log("Creating user with data:",d);const{data:N,error:V}=yield w.supabase.from("users").insert(d).select().single();return V&&console.error("Supabase error:",V),{data:N,error:V}})()}getCustomUser(d){var w=this;return(0,s.A)(function*(){console.log("Getting user:",d);const{data:N,error:V}=yield w.supabase.from("users").select("*").eq("username",d).single();return V&&console.error("Get user error:",V),{data:N,error:V}})()}getCustomUserByEmail(d){var w=this;return(0,s.A)(function*(){console.log("Getting user by email:",d);const{data:N,error:V}=yield w.supabase.from("users").select("*").eq("email",d).single();return V&&console.error("Get user by email error:",V),{data:N,error:V}})()}checkUsernameExists(d){var w=this;return(0,s.A)(function*(){console.log("Checking username:",d);const{data:N,error:V}=yield w.supabase.from("users").select("username").eq("username",d);return V&&console.error("Username check error:",V),{exists:N&&N.length>0,error:V}})()}checkEmailExists(d){var w=this;return(0,s.A)(function*(){console.log("Checking email:",d);const{data:N,error:V}=yield w.supabase.from("users").select("email").eq("email",d);return V&&console.error("Email check error:",V),{exists:N&&N.length>0,error:V}})()}createLevelRequest(d){var w=this;return(0,s.A)(function*(){console.log("Creating level request:",d);const{data:N,error:V}=yield w.supabase.from("level_access_requests").insert(d).select().single();return V&&console.error("Level request error:",V),{data:N,error:V}})()}checkPendingLevelRequest(d){var w=this;return(0,s.A)(function*(){console.log("Checking pending requests for:",d);const{data:N,error:V}=yield w.supabase.from("level_access_requests").select("*").eq("username",d).eq("status","pending").order("request_date",{ascending:!1}).limit(1);return V&&console.error("Pending request check error:",V),{data:N,error:V}})()}checkApprovedLevelRequest(d){var w=this;return(0,s.A)(function*(){console.log("Checking approved requests for:",d);const{data:N,error:V}=yield w.supabase.from("level_access_requests").select("*").eq("user_email",d).eq("status","approved").order("response_date",{ascending:!1}).limit(1);return V&&console.error("Approved request check error:",V),{data:N,error:V}})()}getHighestApprovedLevel(d){var w=this;return(0,s.A)(function*(){console.log("Getting highest approved level for:",d);const{data:N,error:V}=yield w.supabase.from("level_access_requests").select("requested_level").eq("user_email",d).eq("status","approved").order("requested_level",{ascending:!1}).limit(1);if(V||!N||0===N.length)return console.log("No approved levels found, defaulting to L1"),1;const te=N[0].requested_level;return console.log("Highest approved level:",te),te})()}static#e=f=()=>(this.\u0275fac=function(w){return new(w||u)},this.\u0275prov=As.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}))}return f(),u})()},5032(Wt,ut,b){"use strict";b.d(ut,{Yq:()=>Ze,TS:()=>wr,sR:()=>Nr,el:()=>Fr,Sb:()=>mr,QE:()=>Dr,CF:()=>Br,Rg:()=>Rn,p4:()=>Kr,jM:()=>zr,q9:()=>Cr,Kb:()=>Hr,OD:()=>Jn,CE:()=>Yr,pF:()=>Lr,fL:()=>yr,YV:()=>Qn,er:()=>Gn,z3:()=>ar});var s=b(467),o=b(2615),S=b(3664),Pe=b(7705),Ce=b(5921),k=b(8132),Le=b(7303),Je=b(7837);const me=Ne=>we(Ne),we=(Ne=window)=>{if(typeof Ne>"u")return[];Ne.Ionic=Ne.Ionic||{};let Ke=Ne.Ionic.platforms;return null==Ke&&(Ke=Ne.Ionic.platforms=l(Ne),Ke.forEach(pe=>Ne.document.documentElement.classList.add(`plt-${pe}`))),Ke},l=Ne=>{const Ke=Je.c.get("platform");return Object.keys(ge).filter(pe=>{const A=Ke?.[pe];return"function"==typeof A?A(Ne):ge[pe](Ne)})},m=Ne=>!!(ve(Ne,/iPad/i)||ve(Ne,/Macintosh/i)&&B(Ne)),D=Ne=>ve(Ne,/android|sink/i),B=Ne=>Ye(Ne,"(any-pointer:coarse)"),G=Ne=>he(Ne)||fe(Ne),he=Ne=>!!(Ne.cordova||Ne.phonegap||Ne.PhoneGap),fe=Ne=>{const Ke=Ne.Capacitor;return!!(Ke?.isNative||Ke?.isNativePlatform&&Ke.isNativePlatform())},ve=(Ne,Ke)=>Ke.test(Ne.navigator.userAgent),Ye=(Ne,Ke)=>{var pe;return null===(pe=Ne.matchMedia)||void 0===pe?void 0:pe.call(Ne,Ke).matches},ge={ipad:m,iphone:Ne=>ve(Ne,/iPhone/i),ios:Ne=>ve(Ne,/iPhone|iPod/i)||m(Ne),android:D,phablet:Ne=>{const Ke=Ne.innerWidth,pe=Ne.innerHeight,A=Math.min(Ke,pe),ee=Math.max(Ke,pe);return A>390&&A<520&&ee>620&&ee<800},tablet:Ne=>{const Ke=Ne.innerWidth,pe=Ne.innerHeight,A=Math.min(Ke,pe),ee=Math.max(Ke,pe);return m(Ne)||(Ne=>D(Ne)&&!ve(Ne,/mobile/i))(Ne)||A>460&&A<820&&ee>780&&ee<1400},cordova:he,capacitor:fe,electron:Ne=>ve(Ne,/electron/i),pwa:Ne=>{var Ke;return!!(null!==(Ke=Ne.matchMedia)&&void 0!==Ke&&Ke.call(Ne,"(display-mode: standalone)").matches||Ne.navigator.standalone)},mobile:B,mobileweb:Ne=>B(Ne)&&!G(Ne),desktop:Ne=>!B(Ne),hybrid:G};var xe=b(6031);var Cn=b(1413),Vn=b(3726),wn=b(4412),hn=b(4572),Pt=b(7673),_n=b(1635),Tt=b(5964),$t=b(5558),an=b(3669),pn=b(9974),An=b(4360);function Zn(Ne,Ke){return Ne===Ke}var Hn=b(4341);const ur=["tabsInner"];let Jn=(()=>{class Ne{doc;_readyPromise;win;backButton=new Cn.B;keyboardDidShow=new Cn.B;keyboardDidHide=new Cn.B;pause=new Cn.B;resume=new Cn.B;resize=new Cn.B;constructor(pe,A){this.doc=pe,A.run(()=>{let ee;this.win=pe.defaultView,this.backButton.subscribeWithPriority=function(j,P){return this.subscribe(q=>q.register(j,ce=>A.run(()=>P(ce))))},vr(this.pause,pe,"pause",A),vr(this.resume,pe,"resume",A),vr(this.backButton,pe,"ionBackButton",A),vr(this.resize,this.win,"resize",A),vr(this.keyboardDidShow,this.win,"ionKeyboardDidShow",A),vr(this.keyboardDidHide,this.win,"ionKeyboardDidHide",A),this._readyPromise=new Promise(j=>{ee=j}),this.win?.cordova?pe.addEventListener("deviceready",()=>{ee("cordova")},{once:!0}):ee("dom")})}is(pe){return((Ne,Ke)=>("string"==typeof Ne&&(Ke=Ne,Ne=void 0),me(Ne).includes(Ke)))(this.win,pe)}platforms(){return me(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(pe){return er(this.win.location.href,pe)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia?.("(orientation: portrait)").matches}testUserAgent(pe){const A=this.win.navigator;return!!(A?.userAgent&&A.userAgent.indexOf(pe)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}static \u0275fac=function(A){return new(A||Ne)(o.KVO(o.qQL),o.KVO(S.SKi))};static \u0275prov=o.jDH({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})}return Ne})();const er=(Ne,Ke)=>{Ke=Ke.replace(/[[\]\\]/g,"\\$&");const A=new RegExp("[\\?&]"+Ke+"=([^&#]*)").exec(Ne);return A?decodeURIComponent(A[1].replace(/\+/g," ")):null},vr=(Ne,Ke,pe,A)=>{Ke&&Ke.addEventListener(pe,ee=>{A.run(()=>{const j=ee?.detail;Ne.next(j)})})};let Cr=(()=>{class Ne{location;serializer;router;topOutlet;direction=Ir;animated=Sn;animationBuilder;guessDirection="forward";guessAnimation;lastNavId=-1;constructor(pe,A,ee,j){this.location=A,this.serializer=ee,this.router=j,j&&j.events.subscribe(P=>{if(P instanceof Ce.Z){const q=P.restoredState?P.restoredState.navigationId:P.id;this.guessDirection=this.guessAnimation=q<this.lastNavId?"back":"forward",this.lastNavId="forward"===this.guessDirection?P.id:q}}),pe.backButton.subscribeWithPriority(0,P=>{this.pop(),P()})}navigateForward(pe,A={}){return this.setDirection("forward",A.animated,A.animationDirection,A.animation),this.navigate(pe,A)}navigateBack(pe,A={}){return this.setDirection("back",A.animated,A.animationDirection,A.animation),this.navigate(pe,A)}navigateRoot(pe,A={}){return this.setDirection("root",A.animated,A.animationDirection,A.animation),this.navigate(pe,A)}back(pe={animated:!0,animationDirection:"back"}){return this.setDirection("back",pe.animated,pe.animationDirection,pe.animation),this.location.back()}pop(){var pe=this;return(0,s.A)(function*(){let A=pe.topOutlet;for(;A;){if(yield A.pop())return!0;A=A.parentOutlet}return!1})()}setDirection(pe,A,ee,j){this.direction=pe,this.animated=$r(pe,A,ee),this.animationBuilder=j}setTopOutlet(pe){this.topOutlet=pe}consumeTransition(){let A,pe="root";const ee=this.animationBuilder;return"auto"===this.direction?(pe=this.guessDirection,A=this.guessAnimation):(A=this.animated,pe=this.direction),this.direction=Ir,this.animated=Sn,this.animationBuilder=void 0,{direction:pe,animation:A,animationBuilder:ee}}navigate(pe,A){if(Array.isArray(pe))return this.router.navigate(pe,A);{const ee=this.serializer.parse(pe.toString());return void 0!==A.queryParams&&(ee.queryParams={...A.queryParams}),void 0!==A.fragment&&(ee.fragment=A.fragment),this.router.navigateByUrl(ee,A)}}static \u0275fac=function(A){return new(A||Ne)(o.KVO(Jn),o.KVO(Le.aZ),o.KVO(Ce.Sd),o.KVO(Ce.Ix,8))};static \u0275prov=o.jDH({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})}return Ne})();const $r=(Ne,Ke,pe)=>{if(!1!==Ke){if(void 0!==pe)return pe;if("forward"===Ne||"back"===Ne)return Ne;if("root"===Ne&&!0===Ke)return"forward"}},Ir="auto",Sn=void 0;let wr=(()=>{class Ne{get(pe,A){const ee=tr();return ee?ee.get(pe,A):null}getBoolean(pe,A){const ee=tr();return!!ee&&ee.getBoolean(pe,A)}getNumber(pe,A){const ee=tr();return ee?ee.getNumber(pe,A):0}static \u0275fac=function(A){return new(A||Ne)};static \u0275prov=o.jDH({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})}return Ne})();const Nr=new o.nKC("USERCONFIG"),tr=()=>{if(typeof window<"u"){const Ne=window.Ionic;if(Ne?.config)return Ne.config}return null};class bn{data;constructor(Ke={}){this.data=Ke,console.warn("[Ionic Warning]: NavParams has been deprecated in favor of using Angular's input API. Developers should migrate to either the @Input decorator or the Signals-based input API.")}get(Ke){return this.data[Ke]}}const Xe=new o.nKC("IonModalToken");let Ze=(()=>{class Ne{zone=(0,o.WQX)(S.SKi);applicationRef=(0,o.WQX)(S.o8S);config=(0,o.WQX)(Nr);create(pe,A,ee){return new It(pe,A,this.applicationRef,this.zone,ee,this.config.useSetInputAPI??!1)}static \u0275fac=function(A){return new(A||Ne)};static \u0275prov=o.jDH({token:Ne,factory:Ne.\u0275fac})}return Ne})();class It{environmentInjector;injector;applicationRef;zone;elementReferenceKey;enableSignalsSupport;elRefMap=new WeakMap;elEventsMap=new WeakMap;constructor(Ke,pe,A,ee,j,P){this.environmentInjector=Ke,this.injector=pe,this.applicationRef=A,this.zone=ee,this.elementReferenceKey=j,this.enableSignalsSupport=P}attachViewToDom(Ke,pe,A,ee){return this.zone.run(()=>new Promise(j=>{const P={...A};void 0!==this.elementReferenceKey&&(P[this.elementReferenceKey]=Ke),j(_t(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,Ke,pe,P,ee,this.elementReferenceKey,this.enableSignalsSupport))}))}removeViewFromDom(Ke,pe){return this.zone.run(()=>new Promise(A=>{const ee=this.elRefMap.get(pe);if(ee){ee.destroy(),this.elRefMap.delete(pe);const j=this.elEventsMap.get(pe);j&&(j(),this.elEventsMap.delete(pe))}A()}))}}const _t=(Ne,Ke,pe,A,ee,j,P,q,ce,oe,ne,Qe)=>{const bt=cn(ce);"ion-modal"===P.tagName.toLowerCase()&&bt.push({provide:Xe,useValue:P});const qt=o.zZn.create({providers:bt,parent:pe}),Jt=(0,Pe.a0P)(q,{environmentInjector:Ke,elementInjector:qt}),rn=Jt.instance,Kt=Jt.location.nativeElement;if(ce)if(ne&&void 0!==rn[ne]&&console.error(`[Ionic Error]: ${ne} is a reserved property when using ${P.tagName.toLowerCase()}. Rename or remove the "${ne}" property from ${q.name}.`),!0===Qe&&void 0!==Jt.setInput){const{modal:dr,popover:cr,...fr}=ce;for(const W in fr)Jt.setInput(W,fr[W]);void 0!==dr&&Object.assign(rn,{modal:dr}),void 0!==cr&&Object.assign(rn,{popover:cr})}else Object.assign(rn,ce);if(oe)for(const dr of oe)Kt.classList.add(dr);const Nn=Vt(Ne,rn,Kt);return P.appendChild(Kt),A.attachView(Jt.hostView),ee.set(Kt,Jt),j.set(Kt,Nn),Kt},Ft=[xe.L,xe.a,xe.b,xe.c,xe.d],Vt=(Ne,Ke,pe)=>Ne.run(()=>{const A=Ft.filter(ee=>"function"==typeof Ke[ee]).map(ee=>{const j=P=>Ke[ee](P.detail);return pe.addEventListener(ee,j),()=>pe.removeEventListener(ee,j)});return()=>A.forEach(ee=>ee())}),Gt=new o.nKC("NavParamsToken"),cn=Ne=>[{provide:Gt,useValue:Ne},{provide:bn,useFactory:ln,deps:[Gt]}],ln=Ne=>new bn(Ne),fn=(Ne,Ke)=>{const pe=Ne.prototype;Ke.forEach(A=>{Object.defineProperty(pe,A,{get(){return this.el[A]},set(ee){this.z.runOutsideAngular(()=>this.el[A]=ee)}})})},zn=(Ne,Ke)=>{const pe=Ne.prototype;Ke.forEach(A=>{pe[A]=function(){const ee=arguments;return this.z.runOutsideAngular(()=>this.el[A].apply(this.el,ee))}})},Tn=(Ne,Ke,pe)=>{pe.forEach(A=>Ne[A]=(0,Vn.R)(Ke,A))};function sr(Ne){return function(pe){const{defineCustomElementFn:A,inputs:ee,methods:j}=Ne;return void 0!==A&&A(),ee&&fn(pe,ee),j&&zn(pe,j),pe}}const Kn=["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","expandToScroll","event","focusTrap","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],Tr=["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"];let mr=(()=>{let Ne=class zd{z;template;isCmpOpen=!1;el;constructor(pe,A,ee){this.z=ee,this.el=A.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,pe.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,pe.detectChanges()}),Tn(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}static \u0275fac=function(A){return new(A||zd)(S.rXU(Pe.gRc),S.rXU(S.aKT),S.rXU(S.SKi))};static \u0275dir=S.FsC({type:zd,selectors:[["ion-modal"]],contentQueries:function(A,ee,j){if(1&A&&S.wni(j,S.C4Q,5),2&A){let P;S.mGM(P=S.lsd())&&(ee.template=P.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",expandToScroll:"expandToScroll",event:"event",focusTrap:"focusTrap",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"},standalone:!1})};return Ne=(0,_n.Cg)([sr({inputs:Kn,methods:Tr})],Ne),Ne})();const Mn=["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","focusTrap","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],gn=["present","dismiss","onDidDismiss","onWillDismiss"];let Br=(()=>{let Ne=class Gd{z;template;isCmpOpen=!1;el;constructor(pe,A,ee){this.z=ee,this.el=A.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,pe.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,pe.detectChanges()}),Tn(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}static \u0275fac=function(A){return new(A||Gd)(S.rXU(Pe.gRc),S.rXU(S.aKT),S.rXU(S.SKi))};static \u0275dir=S.FsC({type:Gd,selectors:[["ion-popover"]],contentQueries:function(A,ee,j){if(1&A&&S.wni(j,S.C4Q,5),2&A){let P;S.mGM(P=S.lsd())&&(ee.template=P.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"},standalone:!1})};return Ne=(0,_n.Cg)([sr({inputs:Mn,methods:gn})],Ne),Ne})();const ke=(Ne,Ke)=>((Ne=Ne.filter(pe=>pe.stackId!==Ke.stackId)).push(Ke),Ne),be=(Ne,Ke)=>{const pe=Ne.createUrlTree(["."],{relativeTo:Ke});return Ne.serializeUrl(pe)},We=(Ne,Ke)=>!Ke||Ne.stackId!==Ke.stackId,Se=(Ne,Ke)=>{if(!Ne)return;const pe=et(Ke);for(let A=0;A<pe.length;A++){if(A>=Ne.length)return pe[A];if(pe[A]!==Ne[A])return}},et=Ne=>Ne.split("/").map(Ke=>Ke.trim()).filter(Ke=>""!==Ke),St=Ne=>{Ne&&(Ne.ref.destroy(),Ne.unlistenEvents())};class Xt{containerEl;router;navCtrl;zone;location;views=[];runningTask;skipTransition=!1;tabsPrefix;activeView;nextId=0;constructor(Ke,pe,A,ee,j,P){this.containerEl=pe,this.router=A,this.navCtrl=ee,this.zone=j,this.location=P,this.tabsPrefix=void 0!==Ke?et(Ke):void 0}createView(Ke,pe){const A=be(this.router,pe),ee=Ke?.location?.nativeElement,j=Vt(this.zone,Ke.instance,ee);return{id:this.nextId++,stackId:Se(this.tabsPrefix,A),unlistenEvents:j,element:ee,ref:Ke,url:A}}getExistingView(Ke){const pe=be(this.router,Ke),A=this.views.find(ee=>ee.url===pe);return A&&A.ref.changeDetectorRef.reattach(),A}setActive(Ke){const pe=this.navCtrl.consumeTransition();let{direction:A,animation:ee,animationBuilder:j}=pe;const P=this.activeView,q=We(Ke,P);q&&(A="back",ee=void 0);const ce=this.views.slice();let oe;const ne=this.router;ne.getCurrentNavigation?oe=ne.getCurrentNavigation():ne.navigations?.value&&(oe=ne.navigations.value),oe?.extras?.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const Qe=this.views.includes(Ke),bt=this.insertView(Ke,A);Qe||Ke.ref.changeDetectorRef.detectChanges();const qt=Ke.animationBuilder;return void 0===j&&"back"===A&&!q&&void 0!==qt&&(j=qt),P&&(P.animationBuilder=j),this.zone.runOutsideAngular(()=>this.wait(()=>(P&&P.ref.changeDetectorRef.detach(),Ke.ref.changeDetectorRef.reattach(),this.transition(Ke,P,ee,this.canGoBack(1),!1,j).then(()=>vn(Ke,bt,ce,this.location,this.zone)).then(()=>({enteringView:Ke,direction:A,animation:ee,tabSwitch:q})))))}canGoBack(Ke,pe=this.getActiveStackId()){return this.getStack(pe).length>Ke}pop(Ke,pe=this.getActiveStackId()){return this.zone.run(()=>{const A=this.getStack(pe);if(A.length<=Ke)return Promise.resolve(!1);const ee=A[A.length-Ke-1];let j=ee.url;const P=ee.savedData;if(P){const ce=P.get("primary");ce?.route?._routerState?.snapshot.url&&(j=ce.route._routerState.snapshot.url)}const{animationBuilder:q}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(j,{...ee.savedExtras,animation:q}).then(()=>!0)})}startBackTransition(){const Ke=this.activeView;if(Ke){const pe=this.getStack(Ke.stackId),A=pe[pe.length-2],ee=A.animationBuilder;return this.wait(()=>this.transition(A,Ke,"back",this.canGoBack(2),!0,ee))}return Promise.resolve()}endBackTransition(Ke){Ke?(this.skipTransition=!0,this.pop(1)):this.activeView&&On(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(Ke){const pe=this.getStack(Ke);return pe.length>0?pe[pe.length-1]:void 0}getRootUrl(Ke){const pe=this.getStack(Ke);return pe.length>0?pe[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(St),this.activeView=void 0,this.views=[]}getStack(Ke){return this.views.filter(pe=>pe.stackId===Ke)}insertView(Ke,pe){return this.activeView=Ke,this.views=((Ne,Ke,pe)=>"root"===pe?ke(Ne,Ke):"forward"===pe?((Ne,Ke)=>(Ne.indexOf(Ke)>=0?Ne=Ne.filter(A=>A.stackId!==Ke.stackId||A.id<=Ke.id):Ne.push(Ke),Ne))(Ne,Ke):((Ne,Ke)=>Ne.indexOf(Ke)>=0?Ne.filter(A=>A.stackId!==Ke.stackId||A.id<=Ke.id):ke(Ne,Ke))(Ne,Ke))(this.views,Ke,pe),this.views.slice()}transition(Ke,pe,A,ee,j,P){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(pe===Ke)return Promise.resolve(!1);const q=Ke?Ke.element:void 0,ce=pe?pe.element:void 0,oe=this.containerEl;return q&&q!==ce&&(q.classList.add("ion-page"),q.classList.add("ion-page-invisible"),oe.commit)?oe.commit(q,ce,{duration:void 0===A?0:void 0,direction:A,showGoBack:ee,progressAnimation:j,animationBuilder:P}):Promise.resolve(!1)}wait(Ke){var pe=this;return(0,s.A)(function*(){void 0!==pe.runningTask&&(yield pe.runningTask,pe.runningTask=void 0);const A=pe.runningTask=Ke();return A.finally(()=>pe.runningTask=void 0),A})()}}const vn=(Ne,Ke,pe,A,ee)=>"function"==typeof requestAnimationFrame?new Promise(j=>{requestAnimationFrame(()=>{On(Ne,Ke,pe,A,ee),j()})}):Promise.resolve(),On=(Ne,Ke,pe,A,ee)=>{ee.run(()=>pe.filter(j=>!Ke.includes(j)).forEach(St)),Ke.forEach(j=>{const q=A.path().split("?")[0].split("#")[0];if(j!==Ne&&j.url!==q){const ce=j.element;ce.setAttribute("aria-hidden","true"),ce.classList.add("ion-page-hidden"),j.ref.changeDetectorRef.detach()}})};let Rn=(()=>{class Ne{parentOutlet;nativeEl;activatedView=null;tabsPrefix;_swipeGesture;stackCtrl;proxyMap=new WeakMap;currentActivatedRoute$=new wn.t(null);activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ce.Xk;stackWillChange=new S.bkB;stackDidChange=new S.bkB;activateEvents=new S.bkB;deactivateEvents=new S.bkB;parentContexts=(0,o.WQX)(Ce.Zp);location=(0,o.WQX)(S.c1b);environmentInjector=(0,o.WQX)(o.uvJ);inputBinder=(0,o.WQX)(Xr,{optional:!0});supportsBindingToComponentInputs=!0;config=(0,o.WQX)(wr);navCtrl=(0,o.WQX)(Cr);set animation(pe){this.nativeEl.animation=pe}set animated(pe){this.nativeEl.animated=pe}set swipeGesture(pe){this._swipeGesture=pe,this.nativeEl.swipeHandler=pe?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:A=>this.stackCtrl.endBackTransition(A)}:void 0}constructor(pe,A,ee,j,P,q,ce,oe){this.parentOutlet=oe,this.nativeEl=j.nativeElement,this.name=pe||Ce.Xk,this.tabsPrefix="true"===A?be(P,ce):void 0,this.stackCtrl=new Xt(this.tabsPrefix,this.nativeEl,P,this.navCtrl,q,ee),this.parentContexts.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.stackCtrl.destroy(),this.inputBinder?.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const pe=this.getContext();pe?.route&&this.activateWith(pe.route,pe.injector)}new Promise(pe=>((Ne,Ke)=>{Ne.componentOnReady?Ne.componentOnReady().then(pe=>Ke(pe)):(Ne=>{"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ne):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ne):setTimeout(Ne)})(()=>Ke(Ne))})(this.nativeEl,pe)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(pe,A){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const A=this.getContext();this.activatedView.savedData=new Map(A.children.contexts);const ee=this.activatedView.savedData.get("primary");if(ee&&A.route&&(ee.route={...A.route}),this.activatedView.savedExtras={},A.route){const j=A.route.snapshot;this.activatedView.savedExtras.queryParams=j.queryParams,this.activatedView.savedExtras.fragment=j.fragment}}const pe=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(pe)}}activateWith(pe,A){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=pe;let ee,j=this.stackCtrl.getExistingView(pe);if(j){ee=this.activated=j.ref;const q=j.savedData;q&&(this.getContext().children.contexts=q),this.updateActivatedRouteProxy(ee.instance,pe)}else{const q=pe._futureSnapshot,ce=this.parentContexts.getOrCreateContext(this.name).children,oe=new wn.t(null),ne=this.createActivatedRouteProxy(oe,pe),Qe=new ir(ne,ce,this.location.injector);ee=this.activated=this.outletContent.createComponent(q.routeConfig.component??q.component,{index:this.outletContent.length,injector:Qe,environmentInjector:A??this.environmentInjector}),oe.next(ee.instance),j=this.stackCtrl.createView(this.activated,pe),this.proxyMap.set(ee.instance,ne),this.currentActivatedRoute$.next({component:ee.instance,activatedRoute:pe})}this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activatedView=j,this.navCtrl.setTopOutlet(this);const P=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:j,tabSwitch:We(j,P)}),this.stackCtrl.setActive(j).then(q=>{this.activateEvents.emit(ee.instance),this.stackDidChange.emit(q)})}canGoBack(pe=1,A){return this.stackCtrl.canGoBack(pe,A)}pop(pe=1,A){return this.stackCtrl.pop(pe,A)}getLastUrl(pe){const A=this.stackCtrl.getLastUrl(pe);return A?A.url:void 0}getLastRouteView(pe){return this.stackCtrl.getLastUrl(pe)}getRootView(pe){return this.stackCtrl.getRootUrl(pe)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(pe,A){const ee=new Ce.nX;return ee._futureSnapshot=A._futureSnapshot,ee._routerState=A._routerState,ee.snapshot=A.snapshot,ee.outlet=A.outlet,ee.component=A.component,ee._paramMap=this.proxyObservable(pe,"paramMap"),ee._queryParamMap=this.proxyObservable(pe,"queryParamMap"),ee.url=this.proxyObservable(pe,"url"),ee.params=this.proxyObservable(pe,"params"),ee.queryParams=this.proxyObservable(pe,"queryParams"),ee.fragment=this.proxyObservable(pe,"fragment"),ee.data=this.proxyObservable(pe,"data"),ee}proxyObservable(pe,A){return pe.pipe((0,Tt.p)(ee=>!!ee),(0,$t.n)(ee=>this.currentActivatedRoute$.pipe((0,Tt.p)(j=>null!==j&&j.component===ee),(0,$t.n)(j=>j&&j.activatedRoute[A]),function or(Ne,Ke=an.D){return Ne=Ne??Zn,(0,pn.N)((pe,A)=>{let ee,j=!0;pe.subscribe((0,An._)(A,P=>{const q=Ke(P);(j||!Ne(ee,q))&&(j=!1,ee=q,A.next(P))}))})}())))}updateActivatedRouteProxy(pe,A){const ee=this.proxyMap.get(pe);if(!ee)throw new Error("Could not find activated route proxy for view");ee._futureSnapshot=A._futureSnapshot,ee._routerState=A._routerState,ee.snapshot=A.snapshot,ee.outlet=A.outlet,ee.component=A.component,this.currentActivatedRoute$.next({component:pe,activatedRoute:A})}static \u0275fac=function(A){return new(A||Ne)(S.kS0("name"),S.kS0("tabs"),S.rXU(Le.aZ),S.rXU(S.aKT),S.rXU(Ce.Ix),S.rXU(S.SKi),S.rXU(Ce.nX),S.rXU(Ne,12))};static \u0275dir=S.FsC({type:Ne,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"],standalone:!1})}return Ne})();class ir{route;childContexts;parent;constructor(Ke,pe,A){this.route=Ke,this.childContexts=pe,this.parent=A}get(Ke,pe){return Ke===Ce.nX?this.route:Ke===Ce.Zp?this.childContexts:this.parent.get(Ke,pe)}}const Xr=new o.nKC("");let Ur=(()=>{class Ne{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(pe){this.unsubscribeFromRouteData(pe),this.subscribeToRouteData(pe)}unsubscribeFromRouteData(pe){this.outletDataSubscriptions.get(pe)?.unsubscribe(),this.outletDataSubscriptions.delete(pe)}subscribeToRouteData(pe){const{activatedRoute:A}=pe,ee=(0,hn.z)([A.queryParams,A.params,A.data]).pipe((0,$t.n)(([j,P,q],ce)=>(q={...j,...P,...q},0===ce?(0,Pt.of)(q):Promise.resolve(q)))).subscribe(j=>{if(!pe.isActivated||!pe.activatedComponentRef||pe.activatedRoute!==A||null===A.component)return void this.unsubscribeFromRouteData(pe);const P=(0,Pe.HJs)(A.component);if(P)for(const{templateName:q}of P.inputs)pe.activatedComponentRef.setInput(q,j[q]);else this.unsubscribeFromRouteData(pe)});this.outletDataSubscriptions.set(pe,ee)}static \u0275fac=function(A){return new(A||Ne)};static \u0275prov=o.jDH({token:Ne,factory:Ne.\u0275fac})}return Ne})();const Qn=()=>({provide:Xr,useFactory:Ln,deps:[Ce.Ix]});function Ln(Ne){return Ne?.componentInputBindingEnabled?new Ur:null}const Gn=Ne=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ne):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ne):setTimeout(Ne);let yr=(()=>{class Ne{injector;elementRef;onChange=()=>{};onTouched=()=>{};lastValue;statusChanges;constructor(pe,A){this.injector=pe,this.elementRef=A}writeValue(pe){this.elementRef.nativeElement.value=this.lastValue=pe,ar(this.elementRef)}handleValueChange(pe,A){pe===this.elementRef.nativeElement&&(A!==this.lastValue&&(this.lastValue=A,this.onChange(A)),ar(this.elementRef))}_handleBlurEvent(pe){pe===this.elementRef.nativeElement?(this.onTouched(),ar(this.elementRef)):pe.closest("ion-radio-group")===this.elementRef.nativeElement&&this.onTouched()}registerOnChange(pe){this.onChange=pe}registerOnTouched(pe){this.onTouched=pe}setDisabledState(pe){this.elementRef.nativeElement.disabled=pe}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let pe;try{pe=this.injector.get(Hn.vO)}catch{}if(!pe)return;pe.statusChanges&&(this.statusChanges=pe.statusChanges.subscribe(()=>ar(this.elementRef)));const A=pe.control;A&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(j=>{if(typeof A[j]<"u"){const P=A[j].bind(A);A[j]=(...q)=>{P(...q),ar(this.elementRef)}}})}static \u0275fac=function(A){return new(A||Ne)(S.rXU(o.zZn),S.rXU(S.aKT))};static \u0275dir=S.FsC({type:Ne,hostBindings:function(A,ee){1&A&&S.bIt("ionBlur",function(P){return ee._handleBlurEvent(P.target)})},standalone:!1})}return Ne})();const ar=Ne=>{Gn(()=>{const Ke=Ne.nativeElement,pe=null!=Ke.value&&Ke.value.toString().length>0,A=nr(Ke);Er(Ke,A);const ee=Ke.closest("ion-item");ee&&Er(ee,pe?[...A,"item-has-value"]:A)})},nr=Ne=>{const Ke=Ne.classList,pe=[];for(let A=0;A<Ke.length;A++){const ee=Ke.item(A);null!==ee&&br(ee,"ng-")&&pe.push(`ion-${ee.substring(3)}`)}return pe},Er=(Ne,Ke)=>{const pe=Ne.classList;pe.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),pe.add(...Ke)},br=(Ne,Ke)=>Ne.substring(0,Ke.length)===Ke,xr=["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"];let Fr=(()=>{let Ne=class Xd{routerOutlet;navCtrl;config;r;z;el;constructor(pe,A,ee,j,P,q){this.routerOutlet=pe,this.navCtrl=A,this.config=ee,this.r=j,this.z=P,q.detach(),this.el=this.r.nativeElement}onClick(pe){const A=this.defaultHref||this.config.get("backButtonDefaultHref");this.routerOutlet?.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),pe.preventDefault()):null!=A&&(this.navCtrl.navigateBack(A,{animation:this.routerAnimation}),pe.preventDefault())}static \u0275fac=function(A){return new(A||Xd)(S.rXU(Rn,8),S.rXU(Cr),S.rXU(wr),S.rXU(S.aKT),S.rXU(S.SKi),S.rXU(Pe.gRc))};static \u0275dir=S.FsC({type:Xd,hostBindings:function(A,ee){1&A&&S.bIt("click",function(P){return ee.onClick(P)})},inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},standalone:!1})};return Ne=(0,_n.Cg)([sr({inputs:xr})],Ne),Ne})();const Wr=["animated","animation","root","rootParams","swipeGesture"],kr=["push","insert","insertPages","pop","popTo","popToRoot","removeIndex","setRoot","setPages","getActive","getByIndex","canGoBack","getPrevious"];let Dr=(()=>{let Ne=class qd{z;el;constructor(pe,A,ee,j,P,q){this.z=P,q.detach(),this.el=pe.nativeElement,pe.nativeElement.delegate=j.create(A,ee),Tn(this,this.el,["ionNavDidChange","ionNavWillChange"])}static \u0275fac=function(A){return new(A||qd)(S.rXU(S.aKT),S.rXU(o.uvJ),S.rXU(o.zZn),S.rXU(Ze),S.rXU(S.SKi),S.rXU(Pe.gRc))};static \u0275dir=S.FsC({type:qd,inputs:{animated:"animated",animation:"animation",root:"root",rootParams:"rootParams",swipeGesture:"swipeGesture"},standalone:!1})};return Ne=(0,_n.Cg)([sr({inputs:Wr,methods:kr})],Ne),Ne})(),Yr=(()=>{class Ne{locationStrategy;navCtrl;elementRef;router;routerLink;routerDirection="forward";routerAnimation;constructor(pe,A,ee,j,P){this.locationStrategy=pe,this.navCtrl=A,this.elementRef=ee,this.router=j,this.routerLink=P}ngOnInit(){this.updateTargetUrlAndHref(),this.updateTabindex()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTabindex(){const A=this.elementRef.nativeElement;["ION-BACK-BUTTON","ION-BREADCRUMB","ION-BUTTON","ION-CARD","ION-FAB-BUTTON","ION-ITEM","ION-ITEM-OPTION","ION-MENU-BUTTON","ION-SEGMENT-BUTTON","ION-TAB-BUTTON"].includes(A.tagName)&&"0"===A.getAttribute("tabindex")&&A.removeAttribute("tabindex")}updateTargetUrlAndHref(){if(this.routerLink?.urlTree){const pe=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=pe}}onClick(pe){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),pe.preventDefault()}static \u0275fac=function(A){return new(A||Ne)(S.rXU(Le.hb),S.rXU(Cr),S.rXU(S.aKT),S.rXU(Ce.Ix),S.rXU(k.Wk,8))};static \u0275dir=S.FsC({type:Ne,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(A,ee){1&A&&S.bIt("click",function(P){return ee.onClick(P)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},standalone:!1,features:[S.OA$]})}return Ne})(),Lr=(()=>{class Ne{locationStrategy;navCtrl;elementRef;router;routerLink;routerDirection="forward";routerAnimation;constructor(pe,A,ee,j,P){this.locationStrategy=pe,this.navCtrl=A,this.elementRef=ee,this.router=j,this.routerLink=P}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){if(this.routerLink?.urlTree){const pe=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=pe}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}static \u0275fac=function(A){return new(A||Ne)(S.rXU(Le.hb),S.rXU(Cr),S.rXU(S.aKT),S.rXU(Ce.Ix),S.rXU(k.Wk,8))};static \u0275dir=S.FsC({type:Ne,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(A,ee){1&A&&S.bIt("click",function(){return ee.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},standalone:!1,features:[S.OA$]})}return Ne})(),Kr=(()=>{class Ne{navCtrl;tabsInner;ionTabsWillChange=new S.bkB;ionTabsDidChange=new S.bkB;tabBarSlot="bottom";hasTab=!1;selectedTab;leavingTab;constructor(pe){this.navCtrl=pe}ngAfterViewInit(){const pe=this.tabs.length>0?this.tabs.first:void 0;pe&&(this.hasTab=!0,this.setActiveTab(pe.tab),this.tabSwitch())}ngAfterContentInit(){this.detectSlotChanges()}ngAfterContentChecked(){this.detectSlotChanges()}onStackWillChange({enteringView:pe,tabSwitch:A}){const ee=pe.stackId;A&&void 0!==ee&&this.ionTabsWillChange.emit({tab:ee})}onStackDidChange({enteringView:pe,tabSwitch:A}){const ee=pe.stackId;A&&void 0!==ee&&(this.tabBar&&(this.tabBar.selectedTab=ee),this.ionTabsDidChange.emit({tab:ee}))}select(pe){const A="string"==typeof pe,ee=A?pe:pe.detail.tab;if(this.hasTab)return this.setActiveTab(ee),void this.tabSwitch();const j=this.outlet.getActiveStackId()===ee,P=`${this.outlet.tabsPrefix}/${ee}`;if(A||pe.stopPropagation(),j){const q=this.outlet.getActiveStackId();if(this.outlet.getLastRouteView(q)?.url===P)return;const oe=this.outlet.getRootView(ee);return this.navCtrl.navigateRoot(P,{...oe&&P===oe.url&&oe.savedExtras,animated:!0,animationDirection:"back"})}{const q=this.outlet.getLastRouteView(ee),ce=q?.url||P,oe=q?.savedExtras;return this.navCtrl.navigateRoot(ce,{...oe,animated:!0,animationDirection:"back"})}}setActiveTab(pe){const ee=this.tabs.find(j=>j.tab===pe);ee?(this.leavingTab=this.selectedTab,this.selectedTab=ee,this.ionTabsWillChange.emit({tab:pe}),ee.el.active=!0):console.error(`[Ionic Error]: Tab with id: "${pe}" does not exist`)}tabSwitch(){const{selectedTab:pe,leavingTab:A}=this;this.tabBar&&pe&&(this.tabBar.selectedTab=pe.tab),A?.tab!==pe?.tab&&A?.el&&(A.el.active=!1),pe&&this.ionTabsDidChange.emit({tab:pe.tab})}getSelected(){return this.hasTab?this.selectedTab?.tab:this.outlet.getActiveStackId()}detectSlotChanges(){this.tabBars.forEach(pe=>{const A=pe.el.getAttribute("slot");A!==this.tabBarSlot&&(this.tabBarSlot=A,this.relocateTabBar())})}relocateTabBar(){const pe=this.tabBar.el;"top"===this.tabBarSlot?this.tabsInner.nativeElement.before(pe):this.tabsInner.nativeElement.after(pe)}static \u0275fac=function(A){return new(A||Ne)(S.rXU(Cr))};static \u0275dir=S.FsC({type:Ne,selectors:[["ion-tabs"]],viewQuery:function(A,ee){if(1&A&&S.GBs(ur,7,S.aKT),2&A){let j;S.mGM(j=S.lsd())&&(ee.tabsInner=j.first)}},hostBindings:function(A,ee){1&A&&S.bIt("ionTabButtonClick",function(P){return ee.select(P)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"},standalone:!1})}return Ne})();class Hr{ctrl;constructor(Ke){this.ctrl=Ke}create(Ke){return this.ctrl.create(Ke||{})}dismiss(Ke,pe,A){return this.ctrl.dismiss(Ke,pe,A)}getTop(){return this.ctrl.getTop()}}class zr{shouldDetach(Ke){return!1}shouldAttach(Ke){return!1}store(Ke,pe){}retrieve(Ke){return null}shouldReuseRoute(Ke,pe){if(Ke.routeConfig!==pe.routeConfig)return!1;const A=Ke.params,ee=pe.params,j=Object.keys(A),P=Object.keys(ee);if(j.length!==P.length)return!1;for(const q of j)if(ee[q]!==A[q])return!1;return!0}}},5055(Wt,ut,b){"use strict";b.d(ut,{l:()=>S});var s=b(3494),o=b(8071);function S(Pe){return(0,o.T)(Pe[s.s])}},5083(Wt,ut,b){"use strict";b.d(ut,{EA:()=>L,E_:()=>me,F3:()=>Je,I9:()=>S,Ii:()=>Le});var s=b(467),o=function(B){return B.Unimplemented="UNIMPLEMENTED",B.Unavailable="UNAVAILABLE",B}(o||{});class S extends Error{constructor(Z,G,he){super(Z),this.message=Z,this.code=G,this.data=he}}const Ce=B=>{const Z=B.CapacitorCustomPlatform||null,G=B.Capacitor||{},he=G.Plugins=G.Plugins||{},fe=()=>null!==Z?Z.name:(B=>{var Z,G;return B?.androidBridge?"android":null!==(G=null===(Z=B?.webkit)||void 0===Z?void 0:Z.messageHandlers)&&void 0!==G&&G.bridge?"ios":"web"})(B),ve=ze=>{var Fe;return null===(Fe=G.PluginHeaders)||void 0===Fe?void 0:Fe.find(xe=>xe.name===ze)},ge=new Map;return G.convertFileSrc||(G.convertFileSrc=ze=>ze),G.getPlatform=fe,G.handleError=ze=>B.console.error(ze),G.isNativePlatform=()=>"web"!==fe(),G.isPluginAvailable=ze=>{const Fe=ge.get(ze);return!(!Fe?.platforms.has(fe())&&!ve(ze))},G.registerPlugin=(ze,Fe={})=>{const xe=ge.get(ze);if(xe)return console.warn(`Capacitor plugin "${ze}" already registered. Cannot register plugins twice.`),xe.proxy;const rt=fe(),Ve=ve(ze);let Ae;const H=function(){var vt=(0,s.A)(function*(){return!Ae&&rt in Fe?Ae=Ae="function"==typeof Fe[rt]?yield Fe[rt]():Fe[rt]:null!==Z&&!Ae&&"web"in Fe&&(Ae=Ae="function"==typeof Fe.web?yield Fe.web():Fe.web),Ae});return function(){return vt.apply(this,arguments)}}(),Me=vt=>{let Ut;const dt=(...Bt)=>{const ht=H().then(Nt=>{const Ot=((vt,Ut)=>{var dt,Bt;if(!Ve){if(vt)return null===(Bt=vt[Ut])||void 0===Bt?void 0:Bt.bind(vt);throw new S(`"${ze}" plugin is not implemented on ${rt}`,o.Unimplemented)}{const ht=Ve?.methods.find(Nt=>Ut===Nt.name);if(ht)return"promise"===ht.rtype?Nt=>G.nativePromise(ze,Ut.toString(),Nt):(Nt,Ot)=>G.nativeCallback(ze,Ut.toString(),Nt,Ot);if(vt)return null===(dt=vt[Ut])||void 0===dt?void 0:dt.bind(vt)}})(Nt,vt);if(Ot){const on=Ot(...Bt);return Ut=on?.remove,on}throw new S(`"${ze}.${vt}()" is not implemented on ${rt}`,o.Unimplemented)});return"addListener"===vt&&(ht.remove=(0,s.A)(function*(){return Ut()})),ht};return dt.toString=()=>`${vt.toString()}() { [capacitor code] }`,Object.defineProperty(dt,"name",{value:vt,writable:!1,configurable:!1}),dt},He=Me("addListener"),ot=Me("removeListener"),pt=(vt,Ut)=>{const dt=He({eventName:vt},Ut),Bt=function(){var Nt=(0,s.A)(function*(){const Ot=yield dt;ot({eventName:vt,callbackId:Ot},Ut)});return function(){return Nt.apply(this,arguments)}}(),ht=new Promise(Nt=>dt.then(()=>Nt({remove:Bt})));return ht.remove=(0,s.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Bt()}),ht},At=new Proxy({},{get(vt,Ut){switch(Ut){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Ve?pt:He;case"removeListener":return ot;default:return Me(Ut)}}});return he[ze]=At,ge.set(ze,{name:ze,proxy:At,platforms:new Set([...Object.keys(Fe),...Ve?[rt]:[]])}),At},G.Exception=S,G.DEBUG=!!G.DEBUG,G.isLoggingEnabled=!!G.isLoggingEnabled,G},Le=(B=>B.Capacitor=Ce(B))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Je=Le.registerPlugin;class me{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(Z,G){var he=this;let fe=!1;this.listeners[Z]||(this.listeners[Z]=[],fe=!0),this.listeners[Z].push(G);const Re=this.windowListeners[Z];Re&&!Re.registered&&this.addWindowListener(Re),fe&&this.sendRetainedArgumentsForEvent(Z);const ve=function(){var ge=(0,s.A)(function*(){return he.removeListener(Z,G)});return function(){return ge.apply(this,arguments)}}();return Promise.resolve({remove:ve})}removeAllListeners(){var Z=this;return(0,s.A)(function*(){Z.listeners={};for(const G in Z.windowListeners)Z.removeWindowListener(Z.windowListeners[G]);Z.windowListeners={}})()}notifyListeners(Z,G,he){const fe=this.listeners[Z];if(fe)fe.forEach(_e=>_e(G));else if(he){let _e=this.retainedEventArguments[Z];_e||(_e=[]),_e.push(G),this.retainedEventArguments[Z]=_e}}hasListeners(Z){var G;return!(null===(G=this.listeners[Z])||void 0===G||!G.length)}registerWindowListener(Z,G){this.windowListeners[G]={registered:!1,windowEventName:Z,pluginEventName:G,handler:he=>{this.notifyListeners(G,he)}}}unimplemented(Z="not implemented"){return new Le.Exception(Z,o.Unimplemented)}unavailable(Z="not available"){return new Le.Exception(Z,o.Unavailable)}removeListener(Z,G){var he=this;return(0,s.A)(function*(){const fe=he.listeners[Z];if(!fe)return;const _e=fe.indexOf(G);he.listeners[Z].splice(_e,1),he.listeners[Z].length||he.removeWindowListener(he.windowListeners[Z])})()}addWindowListener(Z){window.addEventListener(Z.windowEventName,Z.handler),Z.registered=!0}removeWindowListener(Z){Z&&(window.removeEventListener(Z.windowEventName,Z.handler),Z.registered=!1)}sendRetainedArgumentsForEvent(Z){const G=this.retainedEventArguments[Z];G&&(delete this.retainedEventArguments[Z],G.forEach(he=>{this.notifyListeners(Z,he)}))}}const we=B=>encodeURIComponent(B).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),l=B=>B.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class p extends me{getCookies(){return(0,s.A)(function*(){const Z=document.cookie,G={};return Z.split(";").forEach(he=>{if(he.length<=0)return;let[fe,_e]=he.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");fe=l(fe).trim(),_e=l(_e).trim(),G[fe]=_e}),G})()}setCookie(Z){return(0,s.A)(function*(){try{const G=we(Z.key),he=we(Z.value),fe=`; expires=${(Z.expires||"").replace("expires=","")}`,_e=(Z.path||"/").replace("path=",""),Re=null!=Z.url&&Z.url.length>0?`domain=${Z.url}`:"";document.cookie=`${G}=${he||""}${fe}; path=${_e}; ${Re};`}catch(G){return Promise.reject(G)}})()}deleteCookie(Z){return(0,s.A)(function*(){try{document.cookie=`${Z.key}=; Max-Age=0`}catch(G){return Promise.reject(G)}})()}clearCookies(){return(0,s.A)(function*(){try{const Z=document.cookie.split(";")||[];for(const G of Z)document.cookie=G.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(Z){return Promise.reject(Z)}})()}clearAllCookies(){var Z=this;return(0,s.A)(function*(){try{yield Z.clearCookies()}catch(G){return Promise.reject(G)}})()}}Je("CapacitorCookies",{web:()=>new p});const v=function(){var B=(0,s.A)(function*(Z){return new Promise((G,he)=>{const fe=new FileReader;fe.onload=()=>{const _e=fe.result;G(_e.indexOf(",")>=0?_e.split(",")[1]:_e)},fe.onerror=_e=>he(_e),fe.readAsDataURL(Z)})});return function(G){return B.apply(this,arguments)}}(),L=(B,Z={})=>{const G=Object.assign({method:B.method||"GET",headers:B.headers},Z),fe=((B={})=>{const Z=Object.keys(B);return Object.keys(B).map(fe=>fe.toLocaleLowerCase()).reduce((fe,_e,Re)=>(fe[_e]=B[Z[Re]],fe),{})})(B.headers)["content-type"]||"";if("string"==typeof B.data)G.body=B.data;else if(fe.includes("application/x-www-form-urlencoded")){const _e=new URLSearchParams;for(const[Re,ve]of Object.entries(B.data||{}))_e.set(Re,ve);G.body=_e.toString()}else if(fe.includes("multipart/form-data")||B.data instanceof FormData){const _e=new FormData;if(B.data instanceof FormData)B.data.forEach((ve,Ye)=>{_e.append(Ye,ve)});else for(const ve of Object.keys(B.data))_e.append(ve,B.data[ve]);G.body=_e;const Re=new Headers(G.headers);Re.delete("content-type"),G.headers=Re}else(fe.includes("application/json")||"object"==typeof B.data)&&(G.body=JSON.stringify(B.data));return G};class K extends me{request(Z){return(0,s.A)(function*(){const G=L(Z,Z.webFetchExtra),he=((B,Z=!0)=>B?Object.entries(B).reduce((he,fe)=>{const[_e,Re]=fe;let ve,Ye;return Array.isArray(Re)?(Ye="",Re.forEach(ge=>{ve=Z?encodeURIComponent(ge):ge,Ye+=`${_e}=${ve}&`}),Ye.slice(0,-1)):(ve=Z?encodeURIComponent(Re):Re,Ye=`${_e}=${ve}`),`${he}&${Ye}`},"").substr(1):null)(Z.params,Z.shouldEncodeUrlParams),fe=he?`${Z.url}?${he}`:Z.url,_e=yield fetch(fe,G),Re=_e.headers.get("content-type")||"";let Ye,ge,{responseType:ve="text"}=_e.ok?Z:{};switch(Re.includes("application/json")&&(ve="json"),ve){case"arraybuffer":case"blob":ge=yield _e.blob(),Ye=yield v(ge);break;case"json":Ye=yield _e.json();break;default:Ye=yield _e.text()}const nt={};return _e.headers.forEach((ze,Fe)=>{nt[Fe]=ze}),{data:Ye,headers:nt,status:_e.status,url:_e.url}})()}get(Z){var G=this;return(0,s.A)(function*(){return G.request(Object.assign(Object.assign({},Z),{method:"GET"}))})()}post(Z){var G=this;return(0,s.A)(function*(){return G.request(Object.assign(Object.assign({},Z),{method:"POST"}))})()}put(Z){var G=this;return(0,s.A)(function*(){return G.request(Object.assign(Object.assign({},Z),{method:"PUT"}))})()}patch(Z){var G=this;return(0,s.A)(function*(){return G.request(Object.assign(Object.assign({},Z),{method:"PATCH"}))})()}delete(Z){var G=this;return(0,s.A)(function*(){return G.request(Object.assign(Object.assign({},Z),{method:"DELETE"}))})()}}Je("CapacitorHttp",{web:()=>new K})},5196(Wt,ut,b){"use strict";b.d(ut,{C:()=>S,U:()=>Pe});var s=b(1635),o=b(8071);function S(Ce){return(0,s.AQ)(this,arguments,function*(){const Le=Ce.getReader();try{for(;;){const{value:Je,done:me}=yield(0,s.N3)(Le.read());if(me)return yield(0,s.N3)(void 0);yield yield(0,s.N3)(Je)}}finally{Le.releaseLock()}})}function Pe(Ce){return(0,o.T)(Ce?.getReader)}},5225(Wt,ut,b){"use strict";function s(o,S,Pe,Ce=0,k=!1){const Le=S.schedule(function(){Pe(),k?o.add(this.schedule(null,Ce)):this.unsubscribe()},Ce);if(o.add(Le),!k)return Le}b.d(ut,{N:()=>s})},5312(Wt,ut,b){"use strict";b.d(ut,{c:()=>s});const s={production:!0,supabase:{url:"https://gftrszttkztlqwwoqrzy.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmdHJzenR0a3p0bHF3d29xcnp5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyOTY3NjksImV4cCI6MjA3ODg3Mjc2OX0.wGelKZJwPsTxzNDn3P8_WH5M-RdiVLezX2c_VuRITiE"}}},5334(Wt,ut,b){"use strict";b.d(ut,{m:()=>S});var s=b(1026),o=b(9270);function S(Pe){o.f.setTimeout(()=>{const{onUnhandledError:Ce}=s.$;if(!Ce)throw Pe;Ce(Pe)})}},5343(Wt,ut,b){"use strict";function s(){}b.d(ut,{l:()=>s})},5397(Wt,ut,b){"use strict";b.d(ut,{x:()=>S});var s=b(4761),o=b(8071);function S(Pe){return(0,o.T)(Pe?.[s.l])}},5558(Wt,ut,b){"use strict";b.d(ut,{n:()=>Pe});var s=b(8750),o=b(9974),S=b(4360);function Pe(Ce,k){return(0,o.N)((Le,Je)=>{let me=null,ie=0,we=!1;const l=()=>we&&!me&&Je.complete();Le.subscribe((0,S._)(Je,p=>{me?.unsubscribe();let m=0;const v=ie++;(0,s.Tg)(Ce(p,v)).subscribe(me=(0,S._)(Je,_=>Je.next(k?k(p,_,v,m++):_),()=>{me=null,l()}))},()=>{we=!0,l()}))})}},5705(Wt,ut,b){"use strict";b.d(ut,{B:()=>L,F:()=>Rr,a:()=>Pt,b:()=>qr,c:()=>Ke,d:()=>Ln,e:()=>Ce,f:()=>p,g:()=>Ne,h:()=>Ur,i:()=>de,j:()=>m,k:()=>Tt,l:()=>k,m:()=>Je,n:()=>Le,o:()=>Hr,q:()=>Kr,r:()=>Re,t:()=>v,w:()=>_n});var s=b(467);class Pe{constructor(){this.m=new Map}reset(U){this.m=new Map(Object.entries(U))}get(U,le){const Oe=this.m.get(U);return void 0!==Oe?Oe:le}getBoolean(U,le=!1){const Oe=this.m.get(U);return void 0===Oe?le:"string"==typeof Oe?"true"===Oe:!!Oe}getNumber(U,le){const Oe=parseFloat(this.m.get(U));return isNaN(Oe)?void 0!==le?le:NaN:Oe}set(U,le){this.m.set(U,le)}}const Ce=new Pe,k=O=>{try{const U=O.sessionStorage.getItem(we);return null!==U?JSON.parse(U):{}}catch{return{}}},Le=(O,U)=>{try{O.sessionStorage.setItem(we,JSON.stringify(U))}catch{return}},Je=O=>{const U={};return O.location.search.slice(1).split("&").map(le=>le.split("=")).map(([le,Oe])=>{try{return[decodeURIComponent(le),decodeURIComponent(Oe)]}catch{return["",""]}}).filter(([le])=>me(le,ie)).map(([le,Oe])=>[le.slice(ie.length),Oe]).forEach(([le,Oe])=>{U[le]=Oe}),U},me=(O,U)=>O.substr(0,U.length)===U,ie="ionic:",we="ionic-persist-config";var l=function(O){return O.OFF="OFF",O.ERROR="ERROR",O.WARN="WARN",O}(l||{});const p=(O,...U)=>{const le=Ce.get("logLevel",l.WARN);if([l.WARN].includes(le))return console.warn(`[Ionic Warning]: ${O}`,...U)},m=(O,...U)=>{const le=Ce.get("logLevel",l.ERROR);if([l.ERROR,l.WARN].includes(le))return console.error(`[Ionic Error]: ${O}`,...U)},v=(O,...U)=>console.error(`<${O.tagName.toLowerCase()}> must be used inside ${U.join(" or ")}.`);var _=Object.defineProperty,L={isBrowser:!0},B=(O=>(O.Undefined="undefined",O.Null="null",O.String="string",O.Number="number",O.SpecialNumber="number",O.Boolean="boolean",O.BigInt="bigint",O))(B||{}),Z=(O=>(O.Array="array",O.Date="date",O.Map="map",O.Object="object",O.RegularExpression="regexp",O.Set="set",O.Channel="channel",O.Symbol="symbol",O))(Z||{}),G="type",he="value",fe="serialized:",_e=O=>{if(O.__stencil__getHostRef)return O.__stencil__getHostRef()},Re=(O,U)=>{U&&(O.__stencil__getHostRef=()=>U,U.$lazyInstance$=O)},Ye=(O,U)=>U in O,ge=(O,U)=>(0,console.error)(O,U),nt=new Map,Fe=new Map,xe=[],Me="s-id",He="sty-id",At="slot-fb{display:contents}slot-fb[hidden]{display:none}",vt="http://www.w3.org/1999/xlink",Ut=typeof window<"u"?window:{},Bt={$flags$:0,$resourcesUrl$:"",jmp:O=>O(),raf:O=>requestAnimationFrame(O),ael:(O,U,le,Oe)=>O.addEventListener(U,le,Oe),rel:(O,U,le,Oe)=>O.removeEventListener(U,le,Oe),ce:(O,U)=>new CustomEvent(O,U)},Nt=(()=>{var O;let U=!1;try{null==(O=Ut.document)||O.addEventListener("e",null,Object.defineProperty({},"passive",{get(){U=!0}}))}catch{}return U})(),on=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),ft=!!on&&!!Ut.document&&Object.getOwnPropertyDescriptor(Ut.document.adoptedStyleSheets,"length").writable,yt=!1,Dt=[],en=[],Cn=(O,U)=>le=>{O.push(le),yt||(yt=!0,U&&4&Bt.$flags$?hn(wn):Bt.raf(wn))},Vn=O=>{for(let U=0;U<O.length;U++)try{O[U](performance.now())}catch(le){ge(le)}O.length=0},wn=()=>{Vn(Dt),Vn(en),(yt=Dt.length>0)&&Bt.raf(wn)},hn=O=>Promise.resolve(void 0).then(O),Pt=Cn(Dt,!1),_n=Cn(en,!0),Tt=O=>{const U=new URL(O,Bt.$resourcesUrl$);return U.origin!==Ut.location.origin?U.href:U.pathname},an=O=>"object"==(O=typeof O)||"function"===O;function pn(O){var U,le,Oe;return null!=(Oe=null==(le=null==(U=O.head)?void 0:U.querySelector('meta[name="csp-nonce"]'))?void 0:le.getAttribute("content"))?Oe:void 0}var or=class ki{static fromLocalValue(U){const le=U[G],Oe=he in U?U[he]:void 0;switch(le){case"string":case"boolean":return Oe;case"bigint":return BigInt(Oe);case"undefined":return;case"null":return null;case"number":return"NaN"===Oe?NaN:"-0"===Oe?-0:"Infinity"===Oe?1/0:"-Infinity"===Oe?-1/0:Oe;case"array":return Oe.map(Ct=>ki.fromLocalValue(Ct));case"date":return new Date(Oe);case"map":const at=new Map;for(const[Ct,Lt]of Oe){const Qt="object"==typeof Ct&&null!==Ct?ki.fromLocalValue(Ct):Ct,tn=ki.fromLocalValue(Lt);at.set(Qt,tn)}return at;case"object":const ct={};for(const[Ct,Lt]of Oe)ct[Ct]=ki.fromLocalValue(Lt);return ct;case"regexp":const{pattern:Mt,flags:Et}=Oe;return new RegExp(Mt,Et);case"set":const jt=new Set;for(const Ct of Oe)jt.add(ki.fromLocalValue(Ct));return jt;case"symbol":return Symbol(Oe);default:throw new Error(`Unsupported type: ${le}`)}}static fromLocalValueArray(U){return U.map(le=>ki.fromLocalValue(le))}static isLocalValueObject(U){if("object"!=typeof U||null===U||!U.hasOwnProperty(G))return!1;const le=U[G];return!!Object.values({...B,...Z}).includes(le)&&("null"===le||"undefined"===le||U.hasOwnProperty(he))}};((O,U)=>{for(var le in U)_(O,le,{get:U[le],enumerable:!0})})({},{err:()=>ur,map:()=>gr,ok:()=>Hn,unwrap:()=>Sr,unwrapErr:()=>Ar});var Hn=O=>({isOk:!0,isErr:!1,value:O}),ur=O=>({isOk:!1,isErr:!0,value:O});function gr(O,U){if(O.isOk){const le=U(O.value);return le instanceof Promise?le.then(Oe=>Hn(Oe)):Hn(le)}if(O.isErr)return ur(O.value);throw"should never get here"}var vr,Sr=O=>{if(O.isOk)return O.value;throw O.value},Ar=O=>{if(O.isErr)return O.value;throw O.value};function Cr(O){const le=this.attachShadow({mode:"open",delegatesFocus:!!(16&O.$flags$)});void 0===vr&&(vr=null),vr&&(ft?le.adoptedStyleSheets.push(vr):le.adoptedStyleSheets=[...le.adoptedStyleSheets,vr])}var $r=O=>{const U=We(O,"childNodes");O.tagName&&O.tagName.includes("-")&&O["s-cr"]&&"SLOT-FB"!==O.tagName&&Sn(U,O.tagName).forEach(Oe=>{1===Oe.nodeType&&"SLOT-FB"===Oe.tagName&&(Oe.hidden=!!wr(Oe,bn(Oe),!1).length)});let le=0;for(le=0;le<U.length;le++){const Oe=U[le];1===Oe.nodeType&&We(Oe,"childNodes").length&&$r(Oe)}},Ir=O=>{const U=[];for(let le=0;le<O.length;le++){const Oe=O[le]["s-nr"]||void 0;Oe&&Oe.isConnected&&U.push(Oe)}return U};function Sn(O,U,le){let ct,Oe=0,at=[];for(;Oe<O.length;Oe++){if(ct=O[Oe],ct["s-sr"]&&(!U||ct["s-hn"]===U)&&(void 0===le||bn(ct)===le)&&(at.push(ct),typeof le<"u"))return at;at=[...at,...Sn(ct.childNodes,U,le)]}return at}var wr=(O,U,le=!0)=>{const Oe=[];(le&&O["s-sr"]||!O["s-sr"])&&Oe.push(O);let at=O;for(;at=at.nextSibling;)bn(at)===U&&(le||!at["s-sr"])&&Oe.push(at);return Oe},Nr=(O,U)=>1===O.nodeType?null===O.getAttribute("slot")&&""===U||O.getAttribute("slot")===U:O["s-sn"]===U||""===U,tr=(O,U,le,Oe)=>{if(O["s-ol"]&&O["s-ol"].isConnected)return;const at=document.createTextNode("");if(at["s-nr"]=O,!U["s-cr"]||!U["s-cr"].parentNode)return;const ct=U["s-cr"].parentNode,Mt=We(ct,le?"prepend":"appendChild");if(typeof Oe<"u"){at["s-oo"]=Oe;const Et=We(ct,"childNodes"),jt=[at];Et.forEach(Ct=>{Ct["s-nr"]&&jt.push(Ct)}),jt.sort((Ct,Lt)=>!Ct["s-oo"]||Ct["s-oo"]<(Lt["s-oo"]||0)?-1:!Lt["s-oo"]||Lt["s-oo"]<Ct["s-oo"]?1:0),jt.forEach(Ct=>Mt.call(ct,Ct))}else Mt.call(ct,at);O["s-ol"]=at,O["s-sh"]=U["s-hn"]},bn=O=>"string"==typeof O["s-sn"]?O["s-sn"]:1===O.nodeType&&O.getAttribute("slot")||void 0;function Xe(O){if(O.assignedElements||O.assignedNodes||!O["s-sr"])return;const U=le=>function(Oe){const at=[],ct=this["s-sn"];Oe?.flatten&&console.error("\n          Flattening is not supported for Stencil non-shadow slots.\n          You can use `.childNodes` to nested slot fallback content.\n          If you have a particular use case, please open an issue on the Stencil repo.\n        ");const Mt=this["s-cr"].parentElement;return(Mt.__childNodes?Mt.childNodes:Ir(Mt.childNodes)).forEach(jt=>{ct===bn(jt)&&at.push(jt)}),le?at.filter(jt=>1===jt.nodeType):at}.bind(O);O.assignedElements=U(!0),O.assignedNodes=U(!1)}function Ze(O){O.dispatchEvent(new CustomEvent("slotchange",{bubbles:!1,cancelable:!1,composed:!1}))}function It(O,U){var le;if(!(U=U||(null==(le=O["s-ol"])?void 0:le.parentElement)))return{slotNode:null,slotName:""};const Oe=O["s-sn"]=bn(O)||"";return{slotNode:Sn(We(U,"childNodes"),U.tagName,Oe)[0],slotName:Oe}}var Ft=O=>{const U=O.cloneNode;O.cloneNode=function(le){const at=this.shadowRoot&&true,ct=U.call(this,!!at&&le);if(!at&&le){let Et,jt,Mt=0;const Ct=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-scs"],Lt=this.__childNodes||this.childNodes;for(;Mt<Lt.length;Mt++)Et=Lt[Mt]["s-nr"],jt=Ct.every(Qt=>!Lt[Mt][Qt]),Et&&(ct.__appendChild?ct.__appendChild(Et.cloneNode(!0)):ct.appendChild(Et.cloneNode(!0))),jt&&ct.appendChild(Lt[Mt].cloneNode(!0))}return ct}},Vt=O=>{O.__appendChild=O.appendChild,O.appendChild=function(U){const{slotName:le,slotNode:Oe}=It(U,this);if(Oe){tr(U,Oe);const at=wr(Oe,le),ct=at[at.length-1],Mt=We(ct,"parentNode"),Et=We(Mt,"insertBefore")(U,ct.nextSibling);return Ze(Oe),$r(this),Et}return this.__appendChild(U)}},Gt=O=>{O.__removeChild=O.removeChild,O.removeChild=function(U){return U&&typeof U["s-sn"]<"u"&&Sn(this.__childNodes||this.childNodes,this.tagName,U["s-sn"])&&U.isConnected?(U.remove(),void $r(this)):this.__removeChild(U)}},cn=O=>{O.__prepend=O.prepend,O.prepend=function(...U){U.forEach(le=>{"string"==typeof le&&(le=this.ownerDocument.createTextNode(le));const Oe=(le["s-sn"]=bn(le))||"",ct=Sn(We(this,"childNodes"),this.tagName,Oe)[0];if(ct){tr(le,ct,!0);const Et=wr(ct,Oe)[0],jt=We(Et,"parentNode"),Ct=We(jt,"insertBefore")(le,We(Et,"nextSibling"));return Ze(ct),Ct}return 1===le.nodeType&&le.getAttribute("slot")&&(le.hidden=!0),O.__prepend(le)})}},ln=O=>{O.__append=O.append,O.append=function(...U){U.forEach(le=>{"string"==typeof le&&(le=this.ownerDocument.createTextNode(le)),this.appendChild(le)})}},fn=O=>{const U=O.insertAdjacentHTML;O.insertAdjacentHTML=function(le,Oe){if("afterbegin"!==le&&"beforeend"!==le)return U.call(this,le,Oe);const at=this.ownerDocument.createElement("_");let ct;if(at.innerHTML=Oe,"afterbegin"===le)for(;ct=at.firstChild;)this.prepend(ct);else if("beforeend"===le)for(;ct=at.firstChild;)this.append(ct)}},zn=O=>{O.insertAdjacentText=function(U,le){this.insertAdjacentHTML(U,le)}},Tn=O=>{O.__insertBefore||(O.__insertBefore=O.insertBefore,O.insertBefore=function(le,Oe){const{slotName:at,slotNode:ct}=It(le,this),Mt=this.__childNodes?this.childNodes:Ir(this.childNodes);if(ct){let jt=!1;if(Mt.forEach(Ct=>{if(Ct!==Oe&&null!==Oe);else{if(jt=!0,null===Oe||at!==Oe["s-sn"])return void this.appendChild(le);if(at===Oe["s-sn"]){tr(le,ct);const Lt=We(Oe,"parentNode");We(Lt,"insertBefore")(le,Oe),Ze(ct)}}}),jt)return le}const Et=Oe?.__parentNode;return Et&&!this.isSameNode(Et)?this.appendChild(le):this.__insertBefore(le,Oe)})},sr=O=>{const U=O.insertAdjacentElement;O.insertAdjacentElement=function(le,Oe){return"afterbegin"!==le&&"beforeend"!==le?U.call(this,le,Oe):"afterbegin"===le?(this.prepend(Oe),Oe):("beforeend"===le&&this.append(Oe),Oe)}},Kn=O=>{be("textContent",O),Object.defineProperty(O,"textContent",{get:function(){let U="";return(this.__childNodes?this.childNodes:Ir(this.childNodes)).forEach(Oe=>U+=Oe.textContent||""),U},set:function(U){(this.__childNodes?this.childNodes:Ir(this.childNodes)).forEach(Oe=>{Oe["s-ol"]&&Oe["s-ol"].remove(),Oe.remove()}),this.insertAdjacentHTML("beforeend",U)}})},Tr=O=>{class U extends Array{item(Oe){return this[Oe]}}be("children",O),Object.defineProperty(O,"children",{get(){return this.childNodes.filter(le=>1===le.nodeType)}}),Object.defineProperty(O,"childElementCount",{get(){return this.children.length}}),be("firstChild",O),Object.defineProperty(O,"firstChild",{get(){return this.childNodes[0]}}),be("lastChild",O),Object.defineProperty(O,"lastChild",{get(){return this.childNodes[this.childNodes.length-1]}}),be("childNodes",O),Object.defineProperty(O,"childNodes",{get(){const le=new U;return le.push(...Ir(this.__childNodes)),le}})},mr=O=>{!O||void 0!==O.__nextSibling||!globalThis.Node||(Mn(O),Br(O),ke(O),O.nodeType===Node.ELEMENT_NODE&&(gn(O),jr(O)))},Mn=O=>{!O||O.__nextSibling||(be("nextSibling",O),Object.defineProperty(O,"nextSibling",{get:function(){var U;const le=null==(U=this["s-ol"])?void 0:U.parentNode.childNodes,Oe=le?.indexOf(this);return le&&Oe>-1?le[Oe+1]:this.__nextSibling}}))},gn=O=>{!O||O.__nextElementSibling||(be("nextElementSibling",O),Object.defineProperty(O,"nextElementSibling",{get:function(){var U;const le=null==(U=this["s-ol"])?void 0:U.parentNode.children,Oe=le?.indexOf(this);return le&&Oe>-1?le[Oe+1]:this.__nextElementSibling}}))},Br=O=>{!O||O.__previousSibling||(be("previousSibling",O),Object.defineProperty(O,"previousSibling",{get:function(){var U;const le=null==(U=this["s-ol"])?void 0:U.parentNode.childNodes,Oe=le?.indexOf(this);return le&&Oe>-1?le[Oe-1]:this.__previousSibling}}))},jr=O=>{!O||O.__previousElementSibling||(be("previousElementSibling",O),Object.defineProperty(O,"previousElementSibling",{get:function(){var U;const le=null==(U=this["s-ol"])?void 0:U.parentNode.children,Oe=le?.indexOf(this);return le&&Oe>-1?le[Oe-1]:this.__previousElementSibling}}))},ke=O=>{!O||O.__parentNode||(be("parentNode",O),Object.defineProperty(O,"parentNode",{get:function(){var U;return(null==(U=this["s-ol"])?void 0:U.parentNode)||this.__parentNode},set:function(U){this.__parentNode=U}}))},st=["children","nextElementSibling","previousElementSibling"],tt=["childNodes","firstChild","lastChild","nextSibling","previousSibling","textContent","parentNode"];function be(O,U){if(!globalThis.Node||!globalThis.Element)return;let le;st.includes(O)?le=Object.getOwnPropertyDescriptor(Element.prototype,O):tt.includes(O)&&(le=Object.getOwnPropertyDescriptor(Node.prototype,O)),le||(le=Object.getOwnPropertyDescriptor(U,O)),le&&Object.defineProperty(U,"__"+O,le)}function We(O,U){if("__"+U in O){const le=O["__"+U];return"function"!=typeof le?le:le.bind(O)}return"function"!=typeof O[U]?O[U]:O[U].bind(O)}var St=new WeakMap,Xt=(O,U,le)=>{let Oe=Fe.get(O);on&&le?(Oe=Oe||new CSSStyleSheet,"string"==typeof Oe?Oe=U:Oe.replaceSync(U)):Oe=U,Fe.set(O,Oe)},vn=(O,U,le)=>{var Oe;const at=Rn(U,le),ct=Fe.get(at);if(!Ut.document)return at;if(O=11===O.nodeType?O:Ut.document,ct)if("string"==typeof ct){let Et,Mt=St.get(O=O.head||O);if(Mt||St.set(O,Mt=new Set),!Mt.has(at)){if(O.host&&(Et=O.querySelector(`[${He}="${at}"]`)))Et.innerHTML=ct;else{Et=Ut.document.createElement("style"),Et.innerHTML=ct;const jt=null!=(Oe=Bt.$nonce$)?Oe:pn(Ut.document);if(null!=jt&&Et.setAttribute("nonce",jt),!(1&U.$flags$))if("HEAD"===O.nodeName){const Ct=O.querySelectorAll("link[rel=preconnect]"),Lt=Ct.length>0?Ct[Ct.length-1].nextSibling:O.querySelector("style");O.insertBefore(Et,Lt?.parentNode===O?Lt:null)}else if("host"in O)if(on){const Ct=new CSSStyleSheet;Ct.replaceSync(ct),ft?O.adoptedStyleSheets.unshift(Ct):O.adoptedStyleSheets=[Ct,...O.adoptedStyleSheets]}else{const Ct=O.querySelector("style");Ct?Ct.innerHTML=ct+Ct.innerHTML:O.prepend(Et)}else O.append(Et);1&U.$flags$&&O.insertBefore(Et,null)}4&U.$flags$&&(Et.innerHTML+=At),Mt&&Mt.add(at)}}else O.adoptedStyleSheets.includes(ct)||(ft?O.adoptedStyleSheets.push(ct):O.adoptedStyleSheets=[...O.adoptedStyleSheets,ct]);return at},Rn=(O,U)=>"sc-"+(U&&32&O.$flags$?O.$tagName$+"-"+U:O.$tagName$),ir=O=>O.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Ur=(O,U,...le)=>{let Oe=null,at=null,ct=null,Mt=!1,Et=!1;const jt=[],Ct=Qt=>{for(let tn=0;tn<Qt.length;tn++)Oe=Qt[tn],Array.isArray(Oe)?Ct(Oe):null!=Oe&&"boolean"!=typeof Oe&&((Mt="function"!=typeof O&&!an(Oe))&&(Oe=String(Oe)),Mt&&Et?jt[jt.length-1].$text$+=Oe:jt.push(Mt?Qn(null,Oe):Oe),Et=Mt)};if(Ct(le),U){U.key&&(at=U.key),U.name&&(ct=U.name);{const Qt=U.className||U.class;Qt&&(U.class="object"!=typeof Qt?Qt:Object.keys(Qt).filter(tn=>Qt[tn]).join(" "))}}if("function"==typeof O)return O(null===U?{}:U,jt,yr);const Lt=Qn(O,null);return Lt.$attrs$=U,jt.length>0&&(Lt.$children$=jt),Lt.$key$=at,Lt.$name$=ct,Lt},Qn=(O,U)=>({$flags$:0,$tag$:O,$text$:U,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Ln={},yr={forEach:(O,U)=>O.map(ar).forEach(U),map:(O,U)=>O.map(ar).map(U).map(nr)},ar=O=>({vattrs:O.$attrs$,vchildren:O.$children$,vkey:O.$key$,vname:O.$name$,vtag:O.$tag$,vtext:O.$text$}),nr=O=>{if("function"==typeof O.vtag){const le={...O.vattrs};return O.vkey&&(le.key=O.vkey),O.vname&&(le.name=O.vname),Ur(O.vtag,le,...O.vchildren||[])}const U=Qn(O.vtag,O.vtext);return U.$attrs$=O.vattrs,U.$children$=O.vchildren,U.$key$=O.vkey,U.$name$=O.vname,U},br=(O,U,le,Oe,at,ct,Mt,Et=[])=>{let jt,Ct,Lt,Qt;const tn=at["s-sc"];if(1===ct.nodeType){if(jt=ct.getAttribute("c-id"),jt&&(Ct=jt.split("."),Ct[0]===Mt||"0"===Ct[0])){Lt=Fr({$flags$:0,$hostId$:Ct[0],$nodeId$:Ct[1],$depth$:Ct[2],$index$:Ct[3],$tag$:ct.tagName.toLowerCase(),$elm$:ct,$attrs$:{class:ct.className||""}}),U.push(Lt),ct.removeAttribute("c-id"),O.$children$||(O.$children$=[]),tn&&Ct[0]===Mt&&(ct["s-si"]=tn,Lt.$attrs$.class+=" "+tn);const yn=Lt.$elm$.getAttribute("s-sn");"string"==typeof yn&&("slot-fb"===Lt.$tag$&&(Wr(yn,Ct[2],Lt,ct,O,U,le,Oe,Et),tn&&ct.classList.add(tn)),Lt.$elm$["s-sn"]=yn,Lt.$elm$.removeAttribute("s-sn")),void 0!==Lt.$index$&&(O.$children$[Lt.$index$]=Lt),O=Lt,Oe&&"0"===Lt.$depth$&&(Oe[Lt.$index$]=Lt.$elm$)}if(ct.shadowRoot)for(Qt=ct.shadowRoot.childNodes.length-1;Qt>=0;Qt--)br(O,U,le,Oe,at,ct.shadowRoot.childNodes[Qt],Mt,Et);const In=ct.__childNodes||ct.childNodes;for(Qt=In.length-1;Qt>=0;Qt--)br(O,U,le,Oe,at,In[Qt],Mt,Et)}else if(8===ct.nodeType)Ct=ct.nodeValue.split("."),(Ct[1]===Mt||"0"===Ct[1])&&(jt=Ct[0],Lt=Fr({$hostId$:Ct[1],$nodeId$:Ct[2],$depth$:Ct[3],$index$:Ct[4]||"0",$elm$:ct,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null}),"t"===jt?(Lt.$elm$=Dr(ct,3),Lt.$elm$&&3===Lt.$elm$.nodeType&&(Lt.$text$=Lt.$elm$.textContent,U.push(Lt),ct.remove(),Mt===Lt.$hostId$&&(O.$children$||(O.$children$=[]),O.$children$[Lt.$index$]=Lt),Oe&&"0"===Lt.$depth$&&(Oe[Lt.$index$]=Lt.$elm$))):"c"===jt?(Lt.$elm$=Dr(ct,8),Lt.$elm$&&8===Lt.$elm$.nodeType&&(U.push(Lt),ct.remove())):Lt.$hostId$===Mt&&("s"===jt?Wr(ct["s-sn"]=Ct[5]||"",Ct[2],Lt,ct,O,U,le,Oe,Et):"r"===jt&&(Oe?ct.remove():(at["s-cr"]=ct,ct["s-cn"]=!0))));else if(O&&"style"===O.$tag$){const In=Qn(null,ct.textContent);In.$elm$=ct,In.$index$="0",O.$children$=[In]}else 3===ct.nodeType&&!ct.wholeText.trim()&&!ct["s-nr"]&&ct.remove();return O},xr=(O,U)=>{if(1===O.nodeType){const le=O[Me]||O.getAttribute(Me);le&&U.set(le,O);let Oe=0;if(O.shadowRoot)for(;Oe<O.shadowRoot.childNodes.length;Oe++)xr(O.shadowRoot.childNodes[Oe],U);const at=O.__childNodes||O.childNodes;for(Oe=0;Oe<at.length;Oe++)xr(at[Oe],U)}else if(8===O.nodeType){const le=O.nodeValue.split(".");"o"===le[0]&&(U.set(le[1]+"."+le[2],O),O.nodeValue="",O["s-en"]=le[3])}},Fr=O=>({$flags$:0,$hostId$:null,$nodeId$:null,$depth$:null,$index$:"0",$elm$:null,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null,...O});function Wr(O,U,le,Oe,at,ct,Mt,Et,jt){Oe["s-sr"]=!0,le.$name$=O||null,le.$tag$="slot";const Ct=at?.$elm$?at.$elm$["s-id"]||at.$elm$.getAttribute("s-id"):"";if(Et&&Ut.document){const Lt=le.$elm$=Ut.document.createElement(le.$tag$);le.$name$&&le.$elm$.setAttribute("name",O),at.$elm$.shadowRoot&&Ct&&Ct!==le.$hostId$?We(at.$elm$,"insertBefore")(Lt,We(at.$elm$,"children")[0]):We(We(Oe,"parentNode"),"insertBefore")(Lt,Oe),kr(jt,U,O,Oe,le.$hostId$),Oe.remove(),"0"===le.$depth$&&(Et[le.$index$]=le.$elm$)}else{const Lt=le.$elm$,Qt=Ct&&Ct!==le.$hostId$&&at.$elm$.shadowRoot;kr(jt,U,O,Oe,Qt?Ct:le.$hostId$),Xe(Oe),Qt&&at.$elm$.insertBefore(Lt,at.$elm$.children[0])}ct.push(le),Mt.push(le),at.$children$||(at.$children$=[]),at.$children$[le.$index$]=le}var kr=(O,U,le,Oe,at)=>{var ct,Mt;let Et=Oe.nextSibling;if(O[U]=O[U]||[],Et&&(null==(ct=Et.nodeValue)||!ct.startsWith("s.")))do{Et&&((Et.getAttribute&&Et.getAttribute("slot")||Et["s-sn"])===le||""===le&&!Et["s-sn"]&&(!Et.getAttribute||!Et.getAttribute("slot"))&&(8===Et.nodeType||3===Et.nodeType))&&(Et["s-sn"]=le,O[U].push({slot:Oe,node:Et,hostId:at})),Et=Et?.nextSibling}while(Et&&(null==(Mt=Et.nodeValue)||!Mt.startsWith("s.")))},Dr=(O,U)=>{let le=O;do{le=le.nextSibling}while(le&&(le.nodeType!==U||!le.nodeValue));return le},Yr=O=>{const U=(O=>O.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(O);return new RegExp(`(^|[^@]|@(?!supports\\s+selector\\s*\\([^{]*?${U}))(${U}\\b)`,"g")};Yr("::slotted"),Yr(":host"),Yr(":host-context");var Kr=O=>xe.push(O),Hr=O=>{var U;return null==(U=_e(O))?void 0:U.$modeName$},zr=(O,U,le)=>"string"==typeof O&&O.startsWith(fe)?O=function Jn(O){return"string"==typeof O&&O.startsWith(fe)?or.fromLocalValue(JSON.parse(atob(O.slice(11)))):O}(O):null==O||an(O)?O:4&U?"false"!==O&&(""===O||!!O):2&U?"string"==typeof O?parseFloat(O):"number"==typeof O?O:NaN:1&U?String(O):O,Ne=O=>{var U;return null==(U=_e(O))?void 0:U.$hostElement$},Ke=(O,U,le)=>{const Oe=Ne(O);return{emit:at=>pe(Oe,U,{bubbles:!!(4&le),composed:!!(2&le),cancelable:!!(1&le),detail:at})}},pe=(O,U,le)=>{const Oe=Bt.ce(U,le);return O.dispatchEvent(Oe),Oe},A=(O,U,le,Oe,at,ct,Mt)=>{if(le===Oe)return;let Et=Ye(O,U),jt=U.toLowerCase();if("class"===U){const Ct=O.classList,Lt=j(le);let Qt=j(Oe);if((O["s-si"]||O["s-sc"])&&Mt){const tn=O["s-sc"]||O["s-si"];Qt.push(tn),Lt.forEach(In=>{In.startsWith(tn)&&Qt.push(In)}),Qt=[...new Set(Qt)].filter(In=>In),Ct.add(...Qt)}else Ct.remove(...Lt.filter(tn=>tn&&!Qt.includes(tn))),Ct.add(...Qt.filter(tn=>tn&&!Lt.includes(tn)))}else if("style"===U){for(const Ct in le)(!Oe||null==Oe[Ct])&&(Ct.includes("-")?O.style.removeProperty(Ct):O.style[Ct]="");for(const Ct in Oe)(!le||Oe[Ct]!==le[Ct])&&(Ct.includes("-")?O.style.setProperty(Ct,Oe[Ct]):O.style[Ct]=Oe[Ct])}else if("key"!==U)if("ref"===U)Oe&&Oe(O);else if(Et||"o"!==U[0]||"n"!==U[1]){const Ct=an(Oe);if((Et||Ct&&null!==Oe)&&!at)try{if(O.tagName.includes("-"))O[U]!==Oe&&(O[U]=Oe);else{const Qt=Oe??"";"list"===U?Et=!1:(null==le||O[U]!=Qt)&&("function"==typeof O.__lookupSetter__(U)?O[U]=Qt:O.setAttribute(U,Qt))}}catch{}let Lt=!1;jt!==(jt=jt.replace(/^xlink\:?/,""))&&(U=jt,Lt=!0),null==Oe||!1===Oe?(!1!==Oe||""===O.getAttribute(U))&&(Lt?O.removeAttributeNS(vt,U):O.removeAttribute(U)):(!Et||4&ct||at)&&!Ct&&1===O.nodeType&&(Oe=!0===Oe?"":Oe,Lt?O.setAttributeNS(vt,U,Oe):O.setAttribute(U,Oe))}else if(U="-"===U[2]?U.slice(3):Ye(Ut,jt)?jt.slice(2):jt[2]+U.slice(3),le||Oe){const Ct=U.endsWith(P);U=U.replace(q,""),le&&Bt.rel(O,U,le,Ct),Oe&&Bt.ael(O,U,Oe,Ct)}},ee=/\s/,j=O=>("object"==typeof O&&O&&"baseVal"in O&&(O=O.baseVal),O&&"string"==typeof O?O.split(ee):[]),P="Capture",q=new RegExp(P+"$"),ce=(O,U,le,Oe)=>{const at=11===U.$elm$.nodeType&&U.$elm$.host?U.$elm$.host:U.$elm$,ct=O&&O.$attrs$||{},Mt=U.$attrs$||{};for(const Et of oe(Object.keys(ct)))Et in Mt||A(at,Et,ct[Et],void 0,le,U.$flags$,Oe);for(const Et of oe(Object.keys(Mt)))A(at,Et,ct[Et],Mt[Et],le,U.$flags$,Oe)};function oe(O){return O.includes("ref")?[...O.filter(U=>"ref"!==U),"ref"]:O}var ne,Qe,bt,qt=!1,Jt=!1,rn=!1,Kt=!1,Nn=(O,U,le)=>{var Oe;const at=U.$children$[le];let Mt,Et,jt,ct=0;if(qt||(rn=!0,"slot"===at.$tag$&&(at.$flags$|=at.$children$?2:1)),null!==at.$text$)Mt=at.$elm$=Ut.document.createTextNode(at.$text$);else if(1&at.$flags$)Mt=at.$elm$=Ut.document.createTextNode(""),ce(null,at,Kt);else{if(Kt||(Kt="svg"===at.$tag$),!Ut.document)throw new Error("You are trying to render a Stencil component in an environment that doesn't support the DOM. Make sure to populate the [`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window/window) object before rendering a component.");if(Mt=at.$elm$=Ut.document.createElementNS(Kt?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!qt&&2&at.$flags$?"slot-fb":at.$tag$),Kt&&"foreignObject"===at.$tag$&&(Kt=!1),ce(null,at,Kt),(O=>null!=O&&void 0!==O)(ne)&&Mt["s-si"]!==ne&&Mt.classList.add(Mt["s-si"]=ne),at.$children$)for(ct=0;ct<at.$children$.length;++ct)Et=Nn(O,at,ct),Et&&Mt.appendChild(Et);"svg"===at.$tag$?Kt=!1:"foreignObject"===Mt.tagName&&(Kt=!0)}return Mt["s-hn"]=bt,3&at.$flags$&&(Mt["s-sr"]=!0,Mt["s-cr"]=Qe,Mt["s-sn"]=at.$name$||"",Mt["s-rf"]=null==(Oe=at.$attrs$)?void 0:Oe.ref,Xe(Mt),jt=O&&O.$children$&&O.$children$[le],jt&&jt.$tag$===at.$tag$&&O.$elm$&&dr(O.$elm$),Wn(Qe,Mt,U.$elm$,O?.$elm$)),Mt},dr=O=>{Bt.$flags$|=1;const U=O.closest(bt.toLowerCase());if(null!=U){const le=Array.from(U.__childNodes||U.childNodes).find(at=>at["s-cr"]),Oe=Array.from(O.__childNodes||O.childNodes);for(const at of le?Oe.reverse():Oe)null!=at["s-sh"]&&(Xn(U,at,le??null),at["s-sh"]=void 0,rn=!0)}Bt.$flags$&=-2},cr=(O,U)=>{Bt.$flags$|=1;const le=Array.from(O.__childNodes||O.childNodes);if(O["s-sr"]){let Oe=O;for(;Oe=Oe.nextSibling;)Oe&&Oe["s-sn"]===O["s-sn"]&&Oe["s-sh"]===bt&&le.push(Oe)}for(let Oe=le.length-1;Oe>=0;Oe--){const at=le[Oe];at["s-hn"]!==bt&&at["s-ol"]&&(Xn(x(at).parentNode,at,x(at)),at["s-ol"].remove(),at["s-ol"]=void 0,at["s-sh"]=void 0,rn=!0),U&&cr(at,U)}Bt.$flags$&=-2},fr=(O,U,le,Oe,at,ct)=>{let Et,Mt=O["s-cr"]&&O["s-cr"].parentNode||O;for(Mt.shadowRoot&&Mt.tagName===bt&&(Mt=Mt.shadowRoot);at<=ct;++at)Oe[at]&&(Et=Nn(null,le,at),Et&&(Oe[at].$elm$=Et,Xn(Mt,Et,x(U))))},W=(O,U,le)=>{for(let Oe=U;Oe<=le;++Oe){const at=O[Oe];if(at){const ct=at.$elm$;Pn(at),ct&&(Jt=!0,ct["s-ol"]?ct["s-ol"].remove():cr(ct,!0),ct.remove())}}},Y=(O,U,le=!1)=>O.$tag$===U.$tag$&&("slot"===O.$tag$?O.$name$===U.$name$:le?(le&&!O.$key$&&U.$key$&&(O.$key$=U.$key$),!0):O.$key$===U.$key$),x=O=>O&&O["s-ol"]||O,Te=(O,U,le=!1)=>{const Oe=U.$elm$=O.$elm$,at=O.$children$,ct=U.$children$,Mt=U.$tag$,Et=U.$text$;let jt;null===Et?(Kt="svg"===Mt||"foreignObject"!==Mt&&Kt,"slot"===Mt&&!qt&&O.$name$!==U.$name$&&(U.$elm$["s-sn"]=U.$name$||"",dr(U.$elm$.parentElement)),ce(O,U,Kt,le),null!==at&&null!==ct?((O,U,le,Oe,at=!1)=>{let hr,rr,ct=0,Mt=0,Et=0,jt=0,Ct=U.length-1,Lt=U[0],Qt=U[Ct],tn=Oe.length-1,In=Oe[0],yn=Oe[tn];for(;ct<=Ct&&Mt<=tn;)if(null==Lt)Lt=U[++ct];else if(null==Qt)Qt=U[--Ct];else if(null==In)In=Oe[++Mt];else if(null==yn)yn=Oe[--tn];else if(Y(Lt,In,at))Te(Lt,In,at),Lt=U[++ct],In=Oe[++Mt];else if(Y(Qt,yn,at))Te(Qt,yn,at),Qt=U[--Ct],yn=Oe[--tn];else if(Y(Lt,yn,at))("slot"===Lt.$tag$||"slot"===yn.$tag$)&&cr(Lt.$elm$.parentNode,!1),Te(Lt,yn,at),Xn(O,Lt.$elm$,Qt.$elm$.nextSibling),Lt=U[++ct],yn=Oe[--tn];else if(Y(Qt,In,at))("slot"===Lt.$tag$||"slot"===yn.$tag$)&&cr(Qt.$elm$.parentNode,!1),Te(Qt,In,at),Xn(O,Qt.$elm$,Lt.$elm$),Qt=U[--Ct],In=Oe[++Mt];else{for(Et=-1,jt=ct;jt<=Ct;++jt)if(U[jt]&&null!==U[jt].$key$&&U[jt].$key$===In.$key$){Et=jt;break}Et>=0?(rr=U[Et],rr.$tag$!==In.$tag$?hr=Nn(U&&U[Mt],le,Et):(Te(rr,In,at),U[Et]=void 0,hr=rr.$elm$),In=Oe[++Mt]):(hr=Nn(U&&U[Mt],le,Mt),In=Oe[++Mt]),hr&&Xn(x(Lt.$elm$).parentNode,hr,x(Lt.$elm$))}ct>Ct?fr(O,null==Oe[tn+1]?null:Oe[tn+1].$elm$,le,Oe,Mt,tn):Mt>tn&&W(U,ct,Ct)})(Oe,at,U,ct,le):null!==ct?(null!==O.$text$&&(Oe.textContent=""),fr(Oe,null,U,ct,0,ct.length-1)):le||null===at?le&&null!==at&&null===ct&&(U.$children$=at):W(at,0,at.length-1),Kt&&"svg"===Mt&&(Kt=!1)):(jt=Oe["s-cr"])?jt.parentNode.textContent=Et:O.$text$!==Et&&(Oe.data=Et)},Fn=[],Yt=O=>{let U,le,Oe;const at=O.__childNodes||O.childNodes;for(const ct of at){if(ct["s-sr"]&&(U=ct["s-cr"])&&U.parentNode){le=U.parentNode.__childNodes||U.parentNode.childNodes;const Mt=ct["s-sn"];for(Oe=le.length-1;Oe>=0;Oe--)if(U=le[Oe],!(U["s-cn"]||U["s-nr"]||U["s-hn"]===ct["s-hn"]||U["s-sh"]&&U["s-sh"]===ct["s-hn"]))if(Nr(U,Mt)){let Et=Fn.find(jt=>jt.$nodeToRelocate$===U);Jt=!0,U["s-sn"]=U["s-sn"]||Mt,Et?(Et.$nodeToRelocate$["s-sh"]=ct["s-hn"],Et.$slotRefNode$=ct):(U["s-sh"]=ct["s-hn"],Fn.push({$slotRefNode$:ct,$nodeToRelocate$:U})),U["s-sr"]&&Fn.map(jt=>{Nr(jt.$nodeToRelocate$,U["s-sn"])&&(Et=Fn.find(Ct=>Ct.$nodeToRelocate$===U),Et&&!jt.$slotRefNode$&&(jt.$slotRefNode$=Et.$slotRefNode$))})}else Fn.some(Et=>Et.$nodeToRelocate$===U)||Fn.push({$nodeToRelocate$:U})}1===ct.nodeType&&Yt(ct)}},Pn=O=>{O.$attrs$&&O.$attrs$.ref&&O.$attrs$.ref(null),O.$children$&&O.$children$.map(Pn)},Xn=(O,U,le)=>{if("string"==typeof U["s-sn"]&&U["s-sr"]&&U["s-cr"])Wn(U["s-cr"],U,O,U.parentElement);else if("string"==typeof U["s-sn"]){11!==O.getRootNode().nodeType&&ke(U),O.insertBefore(U,le);const{slotNode:Oe}=It(U);return Oe&&Ze(Oe),U}return O.__insertBefore?O.__insertBefore(U,le):O?.insertBefore(U,le)};function Wn(O,U,le,Oe){var at,ct;let Mt;if(O&&"string"==typeof U["s-sn"]&&U["s-sr"]&&O.parentNode&&O.parentNode["s-sc"]&&(Mt=U["s-si"]||O.parentNode["s-sc"])){const Et=U["s-sn"],jt=U["s-hn"];if(null==(at=le.classList)||at.add(Mt+"-s"),Oe&&null!=(ct=Oe.classList)&&ct.contains(Mt+"-s")){let Ct=(Oe.__childNodes||Oe.childNodes)[0],Lt=!1;for(;Ct;){if(Ct["s-sn"]!==Et&&Ct["s-hn"]===jt&&Ct["s-sr"]){Lt=!0;break}Ct=Ct.nextSibling}Lt||Oe.classList.remove(Mt+"-s")}}}var uo=(O,U)=>{if(U&&!O.$onRenderResolve$&&U["s-p"]){const le=U["s-p"].push(new Promise(Oe=>O.$onRenderResolve$=()=>{U["s-p"].splice(le-1,1),Oe()}))}},go=(O,U)=>{if(O.$flags$|=16,4&O.$flags$)return void(O.$flags$|=512);uo(O,O.$ancestorComponent$);const le=()=>ts(O,U);if(!U)return _n(le);queueMicrotask(()=>{le()})},ts=(O,U)=>{const le=O.$hostElement$,at=O.$lazyInstance$;if(!at)throw new Error(`Can't render component <${le.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let ct;return U?(O.$flags$|=256,O.$queuedListeners$&&(O.$queuedListeners$.map(([Mt,Et])=>mt(at,Mt,Et,le)),O.$queuedListeners$=void 0),O.$fetchedCbList$.length&&O.$fetchedCbList$.forEach(Mt=>Mt(le)),ct=mt(at,"componentWillLoad",void 0,le)):ct=mt(at,"componentWillUpdate",void 0,le),ct=Ao(ct,()=>mt(at,"componentWillRender",void 0,le)),Ao(ct,()=>Io(O,at,U))},Ao=(O,U)=>ns(O)?O.then(U).catch(le=>{console.error(le),U()}):U(),ns=O=>O instanceof Promise||O&&O.then&&"function"==typeof O.then,Io=function(){var O=(0,s.A)(function*(U,le,Oe){var at;const ct=U.$hostElement$,Et=ct["s-rc"];Oe&&(O=>{const U=O.$cmpMeta$,le=O.$hostElement$,Oe=U.$flags$,ct=vn(le.shadowRoot?le.shadowRoot:le.getRootNode(),U,O.$modeName$);10&Oe&&(le["s-sc"]=ct,le.classList.add(ct+"-h"))})(U);Ee(U,le,ct,Oe),Et&&(Et.map(Ct=>Ct()),ct["s-rc"]=void 0);{const Ct=null!=(at=ct["s-p"])?at:[],Lt=()=>Q(U);0===Ct.length?Lt():(Promise.all(Ct).then(Lt),U.$flags$|=4,Ct.length=0)}});return function(le,Oe,at){return O.apply(this,arguments)}}(),Ee=(O,U,le,Oe)=>{try{U=U.render&&U.render(),O.$flags$&=-17,O.$flags$|=2,((O,U,le=!1)=>{var Oe,at,ct,Mt,Et;const jt=O.$hostElement$,Ct=O.$cmpMeta$,Lt=O.$vnode$||Qn(null,null),tn=(O=>O&&O.$tag$===Ln)(U)?U:Ur(null,null,U);if(bt=jt.tagName,Ct.$attrsToReflect$&&(tn.$attrs$=tn.$attrs$||{},Ct.$attrsToReflect$.forEach(([In,yn])=>{tn.$attrs$[yn]=jt[In]})),le&&tn.$attrs$)for(const In of Object.keys(tn.$attrs$))jt.hasAttribute(In)&&!["key","ref","style","class"].includes(In)&&(tn.$attrs$[In]=jt[In]);if(tn.$tag$=null,tn.$flags$|=4,O.$vnode$=tn,tn.$elm$=Lt.$elm$=jt.shadowRoot||jt,ne=jt["s-sc"],qt=!(!(1&Ct.$flags$)||128&Ct.$flags$),Qe=jt["s-cr"],Jt=!1,Te(Lt,tn,le),Bt.$flags$|=1,rn){Yt(tn.$elm$);for(const In of Fn){const yn=In.$nodeToRelocate$;if(!yn["s-ol"]&&Ut.document){const hr=Ut.document.createTextNode("");hr["s-nr"]=yn,Xn(yn.parentNode,yn["s-ol"]=hr,yn)}}for(const In of Fn){const yn=In.$nodeToRelocate$,hr=In.$slotRefNode$;if(hr){const rr=hr.parentNode;let no=hr.nextSibling;if(no&&1===no.nodeType){let $=null==(Oe=yn["s-ol"])?void 0:Oe.previousSibling;for(;$;){let z=null!=(at=$["s-nr"])?at:null;if(z&&z["s-sn"]===yn["s-sn"]&&rr===(z.__parentNode||z.parentNode)){for(z=z.nextSibling;z===yn||z?.["s-sr"];)z=z?.nextSibling;if(!z||!z["s-nr"]){no=z;break}}$=$.previousSibling}}(!no&&rr!==(yn.__parentNode||yn.parentNode)||(yn.__nextSibling||yn.nextSibling)!==no)&&yn!==no&&(Xn(rr,yn,no),1===yn.nodeType&&"SLOT-FB"!==yn.tagName&&(yn.hidden=null!=(ct=yn["s-ih"])&&ct)),yn&&"function"==typeof hr["s-rf"]&&hr["s-rf"](hr)}else 1===yn.nodeType&&(le&&(yn["s-ih"]=null!=(Mt=yn.hidden)&&Mt),yn.hidden=!0)}}if(Jt&&$r(tn.$elm$),Bt.$flags$&=-2,Fn.length=0,2&Ct.$flags$){const In=tn.$elm$.__childNodes||tn.$elm$.childNodes;for(const yn of In)yn["s-hn"]!==bt&&!yn["s-sh"]&&(le&&null==yn["s-ih"]&&(yn["s-ih"]=null!=(Et=yn.hidden)&&Et),yn.hidden=!0)}Qe=void 0})(O,U,Oe)}catch(at){ge(at,O.$hostElement$)}return null},Q=O=>{const le=O.$hostElement$,at=O.$lazyInstance$,ct=O.$ancestorComponent$;mt(at,"componentDidRender",void 0,le),64&O.$flags$?mt(at,"componentDidUpdate",void 0,le):(O.$flags$|=64,xt(le),mt(at,"componentDidLoad",void 0,le),O.$onReadyResolve$(le),ct||je()),O.$onInstanceResolve$(le),O.$onRenderResolve$&&(O.$onRenderResolve$(),O.$onRenderResolve$=void 0),512&O.$flags$&&hn(()=>go(O,!1)),O.$flags$&=-517},de=O=>{var U;{const le=_e(O),Oe=null==(U=le?.$hostElement$)?void 0:U.isConnected;return Oe&&2==(18&le.$flags$)&&go(le,!1),Oe}},je=O=>{var U;hn(()=>pe(Ut,"appload",{detail:{namespace:"ionic"}})),null!=(U=Bt.$orgLocNodes$)&&U.size&&Bt.$orgLocNodes$.clear()},mt=(O,U,le,Oe)=>{if(O&&O[U])try{return O[U](le)}catch(at){ge(at,Oe)}},xt=O=>O.classList.add("hydrated"),Zt=(O,U,le,Oe)=>{const at=_e(O);if(!at)return;if(!at)throw new Error(`Couldn't find host element for "${Oe.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/stenciljs/core/issues/5457).`);const ct=at.$hostElement$,Mt=at.$instanceValues$.get(U),Et=at.$flags$,jt=at.$lazyInstance$;le=zr(le,Oe.$members$[U][0]);const Ct=Number.isNaN(Mt)&&Number.isNaN(le);if((!(8&Et)||void 0===Mt)&&le!==Mt&&!Ct&&(at.$instanceValues$.set(U,le),jt)){if(Oe.$watchers$&&128&Et){const Qt=Oe.$watchers$[U];Qt&&Qt.map(tn=>{try{jt[tn](le,Mt,U)}catch(In){ge(In,ct)}})}if(2==(18&Et)){if(jt.componentShouldUpdate&&!1===jt.componentShouldUpdate(le,Mt,U))return;go(at,!1)}}},Dn=(O,U,le)=>{var Oe,at;const ct=O.prototype;{O.watchers&&!U.$watchers$&&(U.$watchers$=O.watchers),O.deserializers&&!U.$deserializers$&&(U.$deserializers$=O.deserializers),O.serializers&&!U.$serializers$&&(U.$serializers$=O.serializers);const Mt=Object.entries(null!=(Oe=U.$members$)?Oe:{});if(Mt.map(([Et,[jt]])=>{if(31&jt||2&le&&32&jt){const{get:Ct,set:Lt}=Object.getOwnPropertyDescriptor(ct,Et)||{};Ct&&(U.$members$[Et][0]|=2048),Lt&&(U.$members$[Et][0]|=4096),(1&le||!Ct)&&Object.defineProperty(ct,Et,{get(){{if(!(2048&U.$members$[Et][0]))return((O,U)=>_e(this).$instanceValues$.get(U))(0,Et);const Qt=_e(this),tn=Qt?Qt.$lazyInstance$:ct;return tn?tn[Et]:void 0}},configurable:!0,enumerable:!0}),Object.defineProperty(ct,Et,{set(Qt){const tn=_e(this);if(tn){if(Lt)return typeof(32&jt?this[Et]:tn.$hostElement$[Et])>"u"&&tn.$instanceValues$.get(Et)&&(Qt=tn.$instanceValues$.get(Et)),Lt.apply(this,[zr(Qt,jt)]),void Zt(this,Et,Qt=32&jt?this[Et]:tn.$hostElement$[Et],U);{if(!(1&le&&4096&U.$members$[Et][0]))return Zt(this,Et,Qt,U),void(1&le&&!tn.$lazyInstance$&&tn.$fetchedCbList$.push(()=>{4096&U.$members$[Et][0]&&tn.$lazyInstance$[Et]!==tn.$instanceValues$.get(Et)&&(tn.$lazyInstance$[Et]=Qt)}));const In=()=>{const yn=tn.$lazyInstance$[Et];!tn.$instanceValues$.get(Et)&&yn&&tn.$instanceValues$.set(Et,yn),tn.$lazyInstance$[Et]=zr(Qt,jt),Zt(this,Et,tn.$lazyInstance$[Et],U)};tn.$lazyInstance$?In():tn.$fetchedCbList$.push(()=>{In()})}}}})}else 1&le&&64&jt&&Object.defineProperty(ct,Et,{value(...Ct){var Lt;const Qt=_e(this);return null==(Lt=Qt?.$onInstancePromise$)?void 0:Lt.then(()=>{var tn;return null==(tn=Qt.$lazyInstance$)?void 0:tn[Et](...Ct)})}})}),1&le){const Et=new Map;ct.attributeChangedCallback=function(jt,Ct,Lt){Bt.jmp(()=>{var Qt;const tn=Et.get(jt),In=_e(this);if(this.hasOwnProperty(tn)&&(Lt=this[tn],delete this[tn]),ct.hasOwnProperty(tn)&&"number"==typeof this[tn]&&this[tn]==Lt)return;if(null==tn){const hr=In?.$flags$;if(In&&hr&&!(8&hr)&&128&hr&&Lt!==Ct){const rr=In.$lazyInstance$,no=null==(Qt=U.$watchers$)?void 0:Qt[jt];no?.forEach(yo=>{null!=rr[yo]&&rr[yo].call(rr,Lt,Ct,jt)})}return}const yn=Object.getOwnPropertyDescriptor(ct,tn);(Lt=(null!==Lt||"boolean"!=typeof this[tn])&&Lt)!=this[tn]&&(!yn.get||yn.set)&&(this[tn]=Lt)})},O.observedAttributes=Array.from(new Set([...Object.keys(null!=(at=U.$watchers$)?at:{}),...Mt.filter(([jt,Ct])=>31&Ct[0]).map(([jt,Ct])=>{var Lt;const Qt=Ct[1]||jt;return Et.set(Qt,jt),512&Ct[0]&&(null==(Lt=U.$attrsToReflect$)||Lt.push([jt,Qt])),Qt})]))}}return O},jn=function(){var O=(0,s.A)(function*(U,le,Oe,at){let ct;if(!(32&le.$flags$)){if(le.$flags$|=32,Oe.$lazyBundleId$){const Ct=((O,U)=>{const Oe=O.$tagName$.replace(/-/g,"_"),at=O.$lazyBundleId$;if(!at)return;const ct=nt.get(at);return ct?ct[Oe]:b(6120)(`./${at}.entry.js`).then(Mt=>(nt.set(at,Mt),Mt[Oe]),Mt=>{ge(Mt,U.$hostElement$)})})(Oe,le);if(Ct&&"then"in Ct){const Qt=()=>{};ct=yield Ct,Qt()}else ct=Ct;if(!ct)throw new Error(`Constructor for "${Oe.$tagName$}#${le.$modeName$}" was not found`);ct.isProxied||(Oe.$watchers$=ct.watchers,Oe.$serializers$=ct.serializers,Oe.$deserializers$=ct.deserializers,Dn(ct,Oe,2),ct.isProxied=!0);const Lt=()=>{};le.$flags$|=8;try{new ct(le)}catch(Qt){ge(Qt,U)}le.$flags$&=-9,le.$flags$|=128,Lt(),Yn(le.$lazyInstance$,U)}else ct=U.constructor,customElements.whenDefined(U.localName).then(()=>le.$flags$|=128);if(ct&&ct.style){let Ct;"string"==typeof ct.style?Ct=ct.style:"string"!=typeof ct.style&&(le.$modeName$=(O=>xe.map(U=>U(O)).find(U=>!!U))(U),le.$modeName$&&(Ct=ct.style[le.$modeName$]));const Lt=Rn(Oe,le.$modeName$);if(!Fe.has(Lt)){const Qt=()=>{};Xt(Lt,Ct,!!(1&Oe.$flags$)),Qt()}}}const Mt=le.$ancestorComponent$,Et=()=>go(le,!0);Mt&&Mt["s-rc"]?Mt["s-rc"].push(Et):Et()});return function(le,Oe,at,ct){return O.apply(this,arguments)}}(),Yn=(O,U)=>{mt(O,"connectedCallback",void 0,U)},Mr=O=>{if(!Ut.document)return;const U=O["s-cr"]=Ut.document.createComment("");U["s-cn"]=!0,Xn(O,U,O.firstChild)},Or=(O,U)=>{mt(O,"disconnectedCallback",void 0,U||O)},_r=function(){var O=(0,s.A)(function*(U){if(!(1&Bt.$flags$)){const le=_e(U);le?.$rmListeners$&&(le.$rmListeners$.map(Oe=>Oe()),le.$rmListeners$=void 0),le?.$lazyInstance$?Or(le.$lazyInstance$,U):le?.$onReadyPromise$&&le.$onReadyPromise$.then(()=>Or(le.$lazyInstance$,U))}St.has(U)&&St.delete(U),U.shadowRoot&&St.has(U.shadowRoot)&&St.delete(U.shadowRoot)});return function(le){return O.apply(this,arguments)}}(),qr=(O,U={})=>{var le;if(!Ut.document)return void console.warn("Stencil: No document found. Skipping bootstrapping lazy components.");const at=[],ct=U.exclude||[],Mt=Ut.customElements,Et=Ut.document.head,jt=Et.querySelector("meta[charset]"),Ct=Ut.document.createElement("style"),Lt=[];let Qt,tn=!0;Object.assign(Bt,U),Bt.$resourcesUrl$=new URL(U.resourcesUrl||"./",Ut.document.baseURI).href,Bt.$flags$|=2,(()=>{if(!Ut.document)return;const O=Ut.document.querySelectorAll(`[${He}]`);let U=0;for(;U<O.length;U++)Xt(O[U].getAttribute(He),ir(O[U].innerHTML),!0)})();let In=!1;if(O.map(yn=>{yn[1].map(hr=>{var rr,no,yo;const Vr={$flags$:hr[0],$tagName$:hr[1],$members$:hr[2],$listeners$:hr[3]};4&Vr.$flags$&&(In=!0),Vr.$members$=hr[2],Vr.$listeners$=hr[3],Vr.$attrsToReflect$=[],Vr.$watchers$=null!=(rr=hr[4])?rr:{},Vr.$serializers$=null!=(no=hr[5])?no:{},Vr.$deserializers$=null!=(yo=hr[6])?yo:{};const $=Vr.$tagName$,z=class extends HTMLElement{constructor(R){if(super(R),this.hasRegisteredEventListeners=!1,((O,U)=>{const le={$flags$:0,$hostElement$:O,$cmpMeta$:U,$instanceValues$:new Map,$serializerValues$:new Map};le.$onInstancePromise$=new Promise(at=>le.$onInstanceResolve$=at),le.$onReadyPromise$=new Promise(at=>le.$onReadyResolve$=at),O["s-p"]=[],O["s-rc"]=[],le.$fetchedCbList$=[];const Oe=le;O.__stencil__getHostRef=()=>Oe})(R=this,Vr),1&Vr.$flags$)if(R.shadowRoot){if("open"!==R.shadowRoot.mode)throw new Error(`Unable to re-use existing shadow root for ${Vr.$tagName$}! Mode is set to ${R.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else Cr.call(R,Vr)}connectedCallback(){const R=_e(this);R&&(this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0,ao(this,R,Vr.$listeners$)),Qt&&(clearTimeout(Qt),Qt=null),tn?Lt.push(this):Bt.jmp(()=>(O=>{if(!(1&Bt.$flags$)){const U=_e(O);if(!U)return;const le=U.$cmpMeta$,Oe=()=>{};if(1&U.$flags$)ao(O,U,le.$listeners$),U?.$lazyInstance$?Yn(U.$lazyInstance$,O):U?.$onReadyPromise$&&U.$onReadyPromise$.then(()=>Yn(U.$lazyInstance$,O));else{let at;if(U.$flags$|=1,at=O.getAttribute(Me),at){if(1&le.$flags$){const ct=vn(O.shadowRoot,le,O.getAttribute("s-mode"));O.classList.remove(ct+"-h",ct+"-s")}else if(2&le.$flags$){const ct=Rn(le,O.getAttribute("s-mode"));O["s-sc"]=ct}((O,U,le,Oe)=>{var at,ct;const Et=O.shadowRoot,jt=[],Ct=[],Lt=[],Qt=Et?[]:null,tn=Qn(U,null);let In;tn.$elm$=O;{const Ge=Oe.$cmpMeta$;Ge&&10&Ge.$flags$&&O["s-sc"]?(In=O["s-sc"],O.classList.add(In+"-h")):O["s-sc"]&&delete O["s-sc"]}Ut.document&&(!Bt.$orgLocNodes$||!Bt.$orgLocNodes$.size)&&xr(Ut.document.body,Bt.$orgLocNodes$=new Map),O[Me]=le,O.removeAttribute(Me),Oe.$vnode$=br(tn,jt,Ct,Qt,O,O,le,Lt);let yn=0;const hr=jt.length;let rr;for(;yn<hr;yn++){rr=jt[yn];const Ge=rr.$hostId$+"."+rr.$nodeId$,un=Bt.$orgLocNodes$.get(Ge),En=rr.$elm$;if(Et){if(null!=(at=rr.$tag$)&&at.toString().includes("-")&&"slot-fb"!==rr.$tag$&&!rr.$elm$.shadowRoot){const Qr=_e(rr.$elm$);if(Qr){const Eo=Rn(Qr.$cmpMeta$,rr.$elm$.getAttribute("s-mode")),fo=Ut.document.querySelector(`style[sty-id="${Eo}"]`);fo&&O.shadowRoot.append(fo.cloneNode(!0))}}}else En["s-hn"]=U.toUpperCase(),"slot"===rr.$tag$&&(En["s-cr"]=O["s-cr"]);"slot"===rr.$tag$&&(rr.$name$=rr.$elm$["s-sn"]||rr.$elm$.name||null,rr.$children$?(rr.$flags$|=2,rr.$elm$.childNodes.length||rr.$children$.forEach(Qr=>{rr.$elm$.appendChild(Qr.$elm$)})):rr.$flags$|=1),un&&un.isConnected&&(un.parentElement.shadowRoot&&""===un["s-en"]&&un.parentNode.insertBefore(En,un.nextSibling),un.parentNode.removeChild(un),Et||(En["s-oo"]=parseInt(rr.$nodeId$))),un&&!un["s-id"]&&Bt.$orgLocNodes$.delete(Ge)}const no=[],yo=Lt.length;let $,z,R,ue,Vr=0;for(;Vr<yo;Vr++)if($=Lt[Vr],$&&$.length)for(R=$.length,z=0;z<R;z++){if(ue=$[z],no[ue.hostId]||(no[ue.hostId]=Bt.$orgLocNodes$.get(ue.hostId)),!no[ue.hostId])continue;const Ge=no[ue.hostId];Ge.shadowRoot&&ue.node.parentElement!==Ge&&Ge.appendChild(ue.node),(!Ge.shadowRoot||!Et)&&(ue.slot["s-cr"]||(ue.slot["s-cr"]=Ge["s-cr"],ue.slot["s-cr"]=!ue.slot["s-cr"]&&Ge.shadowRoot?Ge:(Ge.__childNodes||Ge.childNodes)[0]),tr(ue.node,ue.slot,!1,ue.node["s-oo"]),null!=(ct=ue.node.parentElement)&&ct.shadowRoot&&ue.node.getAttribute&&ue.node.getAttribute("slot")&&ue.node.removeAttribute("slot"),mr(ue.node))}if(In&&Ct.length&&Ct.forEach(Ge=>{Ge.$elm$.parentElement.classList.add(In+"-s")}),Et){let Ge=0;const un=Qt.length;if(un){for(;Ge<un;Ge++){const En=Qt[Ge];En&&Et.appendChild(En)}Array.from(O.childNodes).forEach(En=>{"string"!=typeof En["s-en"]&&"string"!=typeof En["s-sn"]&&(1===En.nodeType&&En.slot&&En.hidden?En.removeAttribute("hidden"):(8===En.nodeType&&!En.nodeValue||3===En.nodeType&&!En.wholeText.trim())&&En.parentNode.removeChild(En))})}}Oe.$hostElement$=O})(O,le.$tagName$,at,U)}at||12&le.$flags$&&Mr(O);{let ct=O;for(;ct=ct.parentNode||ct.host;)if(1===ct.nodeType&&ct.hasAttribute("s-id")&&ct["s-p"]||ct["s-p"]){uo(U,U.$ancestorComponent$=ct);break}}le.$members$&&Object.entries(le.$members$).map(([ct,[Mt]])=>{if(31&Mt&&ct in O&&O[ct]!==Object.prototype[ct]){const Et=O[ct];delete O[ct],O[ct]=Et}}),jn(O,U,le)}Oe()}})(this)))}disconnectedCallback(){Bt.jmp(()=>_r(this)),Bt.raf(()=>{var R;const ue=_e(this);if(!ue)return;const Ge=Lt.findIndex(un=>un===this);Ge>-1&&Lt.splice(Ge,1),(null==(R=ue?.$vnode$)?void 0:R.$elm$)instanceof Node&&!ue.$vnode$.$elm$.isConnected&&delete ue.$vnode$.$elm$})}componentOnReady(){var R;return null==(R=_e(this))?void 0:R.$onReadyPromise$}};!(1&Vr.$flags$)&&256&Vr.$flags$&&(O=>{Ft(O),Vt(O),ln(O),cn(O),sr(O),fn(O),zn(O),Tn(O),Kn(O),Tr(O),Gt(O)})(z.prototype),Vr.$lazyBundleId$=yn[0],!ct.includes($)&&!Mt.get($)&&(at.push($),Mt.define($,Dn(z,Vr,1)))})}),at.length>0&&(In&&(Ct.textContent+=At),Ct.textContent+=at.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",Ct.innerHTML.length)){Ct.setAttribute("data-styles","");const yn=null!=(le=Bt.$nonce$)?le:pn(Ut.document);null!=yn&&Ct.setAttribute("nonce",yn),Et.insertBefore(Ct,jt?jt.nextSibling:Et.firstChild)}tn=!1,Lt.length?Lt.map(yn=>yn.connectedCallback()):Bt.jmp(()=>Qt=setTimeout(je,30))},Rr=(O,U)=>U,ao=(O,U,le,Oe)=>{le&&Ut.document&&le.map(([at,ct,Mt])=>{const Et=Do(Ut.document,O,at),jt=Zr(U,Mt),Ct=Ro(at);Bt.ael(Et,ct,jt,Ct),(U.$rmListeners$=U.$rmListeners$||[]).push(()=>Bt.rel(Et,ct,jt,Ct))})},Zr=(O,U)=>le=>{var Oe;try{256&O.$flags$?null==(Oe=O.$lazyInstance$)||Oe[U](le):(O.$queuedListeners$=O.$queuedListeners$||[]).push([U,le])}catch(at){ge(at,O.$hostElement$)}},Do=(O,U,le)=>4&le?O:8&le?Ut:16&le?O.body:U,Ro=O=>Nt?{passive:!!(1&O),capture:!!(2&O)}:!!(2&O)},5735(Wt,ut,b){"use strict";b.d(ut,{Q:()=>Je});var s=b(467),o=b(2084),S=b(2615),Pe=b(918),Ce=b(5029),k=b(4938),Le=b(8863);let Je=(()=>{var me;class ie{constructor(l,p,m,v){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=v,this.REPORTS_BUCKET="outplanting",this.IMAGES_BUCKET="outplanting-images",this.DRAFT_FILE="outplanting_draft_current.json",this.PENDING_QUEUE_FILE="outplanting_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} OutplantingSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} OutplantingSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(_=>console.error("\u274c OutplantingSyncService: processPendingQueue failed:",_))}),setTimeout(()=>{console.log("\u{1f680} OutplantingSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(_=>console.error("\u274c OutplantingSyncService: Initial queue check failed:",_))},6e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 OutplantingSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(_=>console.error("\u274c OutplantingSyncService: Periodic queue check failed:",_))},3e5),console.log("\u2705 OutplantingSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Outplanting${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];(l?.location||l?.siteLocation)&&p.push(l.location||l.siteLocation),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];l?.individualsOutplanted>0&&m.push(`${l.individualsOutplanted} outplanted`),l?.deadOrFailed>0&&m.push(`${l.deadOrFailed} failed`),l?.averageGrowth>0&&m.push(`Growth: ${l.averageGrowth}cm`);const v=[];return l?.flowers&&v.push("flowers"),l?.fruits&&v.push("fruits"),v.length>0&&m.push(v.join(" & ")),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"outplanting"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",v=l?.quadNumber||"";let _=`outplanting_draft_${p}`;return m&&(_+=`_zone${m}`),v&&(_+=`_quad${v}`),`${_}.json`}dataUrlToBlob(l){return(0,s.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,s.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,s.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("OutplantingSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=l.reportId||p.generateReportId(),_={reportId:v,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos||[],status:l.status||{incomplete:!0,sent:!1,pending:!1}},D=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(D,_);const L=yield p.sharedDataService.readJsonFile(D);if(!L||L.reportId!==_.reportId)throw new Error("OutplantingSyncService: draft verification failed");const K=yield p.storage.getUser(),ae=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(K?.username||"unknown","outplanting",v,ae)})()}loadDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,s.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(_=>_.startsWith("outplanting_draft_")),v=[];for(const _ of m)try{const D=yield l.sharedDataService.readJsonFile(_);if(D){const L=l.getLocationLabelFromFilename(_,D.form);v.push({draft:D,locationLabel:L})}}catch(D){console.warn("OutplantingSyncService: Failed to read draft file",_,D)}return v})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,s.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,s.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:v}of m)p.push({report:v,status:"draft"});try{const _=(yield l.sharedDataService.listFiles()).filter(D=>{if(!D.startsWith("Outplanting")||D.includes("_report_"))return!1;const L=D.replace(".json","");return/^Outplanting\d{8}_\d{6}$/.test(L)&&!D.includes("_backup")&&!D.includes("_draft")&&!D.includes("_queue")});for(const D of _)try{const L=yield l.sharedDataService.readJsonFile(D);L&&p.push({report:L,status:L.status.sent?"submitted":"pending"})}catch(L){console.warn("OutplantingSyncService: Failed to read report file",D,L)}}catch(v){console.error("OutplantingSyncService: Failed to list files:",v)}return p.sort((v,_)=>{const D=new Date(v.report.updatedAt||v.report.createdAt).getTime();return new Date(_.report.updatedAt||_.report.createdAt).getTime()-D}),p})()}submitFinal(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=!0===l.isEditMode,_=l.existingReportId||p.generateReportId(),D={reportId:_,createdAt:m,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:[...l.photos||[]],status:{incomplete:!1,sent:!1,pending:!1},project_key:l.project_key,sequence_number:l.sequence_number||1,parent_report_id:l.parent_report_id,is_ongoing:void 0===l.is_ongoing||l.is_ongoing};v&&(D.editedAt=m);const L=`${_}.json`;yield p.sharedDataService.writeJsonFile(L,D);const K=yield p.sharedDataService.readJsonFile(L);if(!K||K.reportId!==_)throw new Error("OutplantingSyncService: local report verification failed");const ae=yield p.storage.getUser(),B=ae?ae.organization||ae.username:null;let Z;if(l.originalSubmittedBy&&B&&l.originalSubmittedBy!==B?Z=`${l.originalSubmittedBy}, ${B}`:B&&(Z=B),D.submittedBy=Z,yield p.sharedDataService.writeJsonFile(L,D),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:_,localReportFile:L}),{reportId:_,queued:!0};try{yield p.uploadReportAndImages(D,l.originalSubmittedBy),D.status.sent=!0,D.status.pending=!1,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.clearDraft();const fe=(yield p.storage.getUser())?.username||"unknown",_e=p.getFormSummary(l.formValue),Re=D.submittedBy;return v?p.monitoringLog.recordFormEdited(fe,"outplanting",_,!1,_e,Re):p.monitoringLog.recordFormSubmitted(fe,"outplanting",_,!1,_e,Re),{reportId:_,queued:!1}}catch(he){const fe=String(he?.message?he.message:he);D.status.pending=!0,D.status.lastError=fe,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.enqueuePending({reportId:_,localReportFile:L});const Re=(yield p.storage.getUser())?.username||"unknown",ve=p.getFormSummary(l.formValue),Ye=D.submittedBy;return v?p.monitoringLog.recordFormEdited(Re,"outplanting",_,!0,ve,Ye):p.monitoringLog.recordFormSubmitted(Re,"outplanting",_,!0,ve,Ye),{reportId:_,queued:!0}}})()}enqueuePending(l){var p=this;return(0,s.A)(function*(){console.log("\u{1f4dd} OutplantingSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(_=>_.reportId===l.reportId)?console.log("\u26a0\ufe0f OutplantingSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 OutplantingSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} OutplantingSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,s.A)(function*(){if(console.log("\u{1f504} OutplantingSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f OutplantingSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f OutplantingSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} OutplantingSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 OutplantingSyncService: Queue is empty, nothing to process");const m=[];for(const v of p.items){console.log("\u{1f50d} OutplantingSyncService: Processing item:",v.reportId,"(attempt",v.attempts+1,")");try{const _=yield l.sharedDataService.readJsonFile(v.localReportFile);if(!_){console.error("\u274c OutplantingSyncService: Local report file missing for",v.reportId),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(_),console.log("\u2705 OutplantingSyncService: Upload succeeded for",v.reportId),_.status.sent=!0,_.status.pending=!1,_.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(v.localReportFile,_),console.log("\u{1f4be} OutplantingSyncService: Marked report as sent")}catch(_){console.error("\u274c OutplantingSyncService: Upload failed for",v.reportId,":",_),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} OutplantingSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} OutplantingSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,s.A)(function*(){console.log("\u{1f4e4} OutplantingSyncService: Starting upload for report",l.reportId);const v=m.getClient(),_=[];for(let _e=0;_e<(l.photos||[]).length;_e++){const Re=l.photos[_e],ve=yield m.uploadImageDataUrl(`${l.reportId}/photo_${_e+1}.jpg`,Re);_.push(ve)}const D=JSON.parse(JSON.stringify(l));D.photos=_,D.status={incomplete:!1,sent:!0,pending:!1};const L=`${l.reportId}.json`,K=new Blob([JSON.stringify(D)],{type:"application/json"}),{error:ae}=yield v.storage.from(m.REPORTS_BUCKET).upload(L,K,{contentType:"application/json",upsert:!0});if(ae)throw console.error("\u274c OutplantingSyncService: JSON upload error:",ae),ae;console.log("\u2705 OutplantingSyncService: Successfully uploaded JSON to",L);const B=yield m.storage.getUser(),Z=B?B.organization||B.username:null;let G;G=p&&Z&&p!==Z?`${p}, ${Z}`:Z;const he={report_id:l.reportId,submitted_by:G,json_path:L,location:l.form.siteLocation||null,outplanting_date:l.form.date||null,zone_number:l.form.zoneNumber?`Zone ${l.form.zoneNumber}`:null,total_area:l.form.totalArea||null,area_restored:l.form.areaRestored||null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:fe}=yield v.from("outplanting_reports").upsert(he,{onConflict:"report_id"});if(fe)throw console.error("\u274c OutplantingSyncService: Database upsert error:",fe),fe;console.log("\u2705 OutplantingSyncService: Successfully upserted into outplanting_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,s.A)(function*(){const v=m.getClient(),_=yield m.dataUrlToBlob(p),{error:D}=yield v.storage.from(m.IMAGES_BUCKET).upload(l,_,{contentType:_.type||"image/jpeg",upsert:!0});if(D)throw console.error("\u274c OutplantingSyncService: Image upload error for",l,":",D),D;return console.log("\u2705 OutplantingSyncService: Successfully uploaded image to",l),l})()}static#e=me=()=>(this.\u0275fac=function(p){return new(p||ie)(S.KVO(Pe.H),S.KVO(Ce.L),S.KVO(k.w),S.KVO(Le.u))},this.\u0275prov=S.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return me(),ie})()},5921(Wt,ut,b){"use strict";b.d(ut,{nX:()=>vo,Pu:()=>Cs,Zp:()=>Mr,nU:()=>tt,wU:()=>rn,c1:()=>Qt,XR:()=>Yo,wF:()=>cr,lW:()=>Y,mo:()=>W,Z:()=>dr,J2:()=>As,Xk:()=>Sn,J_:()=>us,bw:()=>Ds,b:()=>f,tD:()=>tn,Ix:()=>Ie,D$:()=>ro,n3:()=>Ct,OY:()=>ns,Sd:()=>st,bK:()=>xs,gk:()=>N,Lg:()=>zi,wO:()=>Dr,Us:()=>de,we:()=>In});var s=b(2615),o=b(7303),S=b(3664),Pe=b(7705),Ce=b(9295),k=b(1985),Le=b(8071),me=b(6648),ie=b(7673),we=b(4412),l=b(4572);const m=(0,b(1853).L)(h=>function(){h(this),this.name="EmptyError",this.message="no elements in sequence"});var v=b(6365),D=b(9326);function L(...h){return function _(){return(0,v.U)(1)}()((0,me.H)(h,(0,D.lI)(h)))}var K=b(8750);function ae(h){return new k.c(E=>{(0,K.Tg)(h()).subscribe(E)})}var B=b(1203);function Z(h,E){const y=(0,Le.T)(h)?h:()=>h,I=F=>F.error(y());return new k.c(E?F=>E.schedule(I,0,F):I)}var G=b(983),he=b(8359),fe=b(9974),_e=b(4360);function Re(){return(0,fe.N)((h,E)=>{let y=null;h._refCount++;const I=(0,_e._)(E,void 0,void 0,void 0,()=>{if(!h||h._refCount<=0||0<--h._refCount)return void(y=null);const F=h._connection,J=y;y=null,F&&(!J||F===J)&&F.unsubscribe(),E.unsubscribe()});h.subscribe(I),I.closed||(y=h.connect())})}class ve extends k.c{constructor(E,y){super(),this.source=E,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,fe.S)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,E?.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new he.yU;const y=this.getSubject();E.add(this.source.subscribe((0,_e._)(y,void 0,()=>{this._teardown(),y.complete()},I=>{this._teardown(),y.error(I)},()=>this._teardown()))),E.closed&&(this._connection=null,E=he.yU.EMPTY)}return E}refCount(){return Re()(this)}}var Ye=b(1413),ge=b(6354),nt=b(5558),ze=b(6697),xe=b(5964),rt=b(1397);function Ve(h){return(0,fe.N)((E,y)=>{let I=!1;E.subscribe((0,_e._)(y,F=>{I=!0,y.next(F)},()=>{I||y.next(h),y.complete()}))})}function Ae(h=H){return(0,fe.N)((E,y)=>{let I=!1;E.subscribe((0,_e._)(y,F=>{I=!0,y.next(F)},()=>I?y.complete():y.error(h())))})}function H(){return new m}var ye=b(3669);function Me(h,E){const y=arguments.length>=2;return I=>I.pipe(h?(0,xe.p)((F,J)=>h(F,J,I)):ye.D,(0,ze.s)(1),y?Ve(E):Ae(()=>new m))}var He=b(274);function ot(h,E,y){const I=(0,Le.T)(h)||E||y?{next:h,error:E,complete:y}:h;return I?(0,fe.N)((F,J)=>{var De;null===(De=I.subscribe)||void 0===De||De.call(I);let qe=!0;F.subscribe((0,_e._)(J,gt=>{var Ht;null===(Ht=I.next)||void 0===Ht||Ht.call(I,gt),J.next(gt)},()=>{var gt;qe=!1,null===(gt=I.complete)||void 0===gt||gt.call(I),J.complete()},gt=>{var Ht;qe=!1,null===(Ht=I.error)||void 0===Ht||Ht.call(I,gt),J.error(gt)},()=>{var gt,Ht;qe&&(null===(gt=I.unsubscribe)||void 0===gt||gt.call(I)),null===(Ht=I.finalize)||void 0===Ht||Ht.call(I)}))}):ye.D}var pt=b(9437);function Ut(h){return h<=0?()=>G.w:(0,fe.N)((E,y)=>{let I=[];E.subscribe((0,_e._)(y,F=>{I.push(F),h<I.length&&I.shift()},()=>{for(const F of I)y.next(F);y.complete()},void 0,()=>{I=null}))})}var Bt=b(980),ht=b(5343);function Nt(h){return(0,fe.N)((E,y)=>{(0,K.Tg)(h).subscribe((0,_e._)(y,()=>y.complete(),ht.l)),!y.closed&&E.subscribe(y)})}let ft=(()=>{class h{_doc;constructor(y){this._doc=y}getTitle(){return this._doc.title}setTitle(y){this._doc.title=y||""}static \u0275fac=function(I){return new(I||h)(s.KVO(s.qQL))};static \u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();const Sn="primary",wr=Symbol("RouteTitle");class Nr{params;constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y[0]:y}return null}getAll(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function tr(h){return new Nr(h)}function bn(h,E,y){const I=y.path.split("/");if(I.length>h.length||"full"===y.pathMatch&&(E.hasChildren()||I.length<h.length))return null;const F={};for(let J=0;J<I.length;J++){const De=I[J],qe=h[J];if(":"===De[0])F[De.substring(1)]=qe;else if(De!==qe.path)return null}return{consumed:h.slice(0,I.length),posParams:F}}function Ze(h,E){const y=h?It(h):void 0,I=E?It(E):void 0;if(!y||!I||y.length!=I.length)return!1;let F;for(let J=0;J<y.length;J++)if(F=y[J],!_t(h[F],E[F]))return!1;return!0}function It(h){return[...Object.keys(h),...Object.getOwnPropertySymbols(h)]}function _t(h,E){if(Array.isArray(h)&&Array.isArray(E)){if(h.length!==E.length)return!1;const y=[...h].sort(),I=[...E].sort();return y.every((F,J)=>I[J]===F)}return h===E}function Ft(h){return h.length>0?h[h.length-1]:null}function Vt(h){return function Je(h){return!!h&&(h instanceof k.c||(0,Le.T)(h.lift)&&(0,Le.T)(h.subscribe))}(h)?h:(0,S.yLl)(h)?(0,me.H)(Promise.resolve(h)):(0,ie.of)(h)}const Gt={exact:function zn(h,E,y){if(!jr(h.segments,E.segments)||!Tr(h.segments,E.segments,y)||h.numberOfChildren!==E.numberOfChildren)return!1;for(const I in E.children)if(!h.children[I]||!zn(h.children[I],E.children[I],y))return!1;return!0},subset:sr},cn={exact:function fn(h,E){return Ze(h,E)},subset:function Tn(h,E){return Object.keys(E).length<=Object.keys(h).length&&Object.keys(E).every(y=>_t(h[y],E[y]))},ignored:()=>!0};function ln(h,E,y){return Gt[y.paths](h.root,E.root,y.matrixParams)&&cn[y.queryParams](h.queryParams,E.queryParams)&&!("exact"===y.fragment&&h.fragment!==E.fragment)}function sr(h,E,y){return Kn(h,E,E.segments,y)}function Kn(h,E,y,I){if(h.segments.length>y.length){const F=h.segments.slice(0,y.length);return!(!jr(F,y)||E.hasChildren()||!Tr(F,y,I))}if(h.segments.length===y.length){if(!jr(h.segments,y)||!Tr(h.segments,y,I))return!1;for(const F in E.children)if(!h.children[F]||!sr(h.children[F],E.children[F],I))return!1;return!0}{const F=y.slice(0,h.segments.length),J=y.slice(h.segments.length);return!!(jr(h.segments,F)&&Tr(h.segments,F,I)&&h.children[Sn])&&Kn(h.children[Sn],E,J,I)}}function Tr(h,E,y){return E.every((I,F)=>cn[y](h[F].parameters,I.parameters))}class mr{root;queryParams;fragment;_queryParamMap;constructor(E=new Mn([],{}),y={},I=null){this.root=E,this.queryParams=y,this.fragment=I}get queryParamMap(){return this._queryParamMap??=tr(this.queryParams),this._queryParamMap}toString(){return be.serialize(this)}}class Mn{segments;children;parent=null;constructor(E,y){this.segments=E,this.children=y,Object.values(y).forEach(I=>I.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return We(this)}}class gn{path;parameters;_parameterMap;constructor(E,y){this.path=E,this.parameters=y}get parameterMap(){return this._parameterMap??=tr(this.parameters),this._parameterMap}toString(){return ir(this)}}function jr(h,E){return h.length===E.length&&h.every((y,I)=>y.path===E[I].path)}let st=(()=>{class h{static \u0275fac=function(I){return new(I||h)};static \u0275prov=s.jDH({token:h,factory:()=>new tt,providedIn:"root"})}return h})();class tt{parse(E){const y=new xr(E);return new mr(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(E){const y=`/${Se(E.root,!0)}`,I=function Ur(h){const E=Object.entries(h).map(([y,I])=>Array.isArray(I)?I.map(F=>`${St(y)}=${St(F)}`).join("&"):`${St(y)}=${St(I)}`).filter(y=>y);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${y}${I}${"string"==typeof E.fragment?`#${function Xt(h){return encodeURI(h)}(E.fragment)}`:""}`}}const be=new tt;function We(h){return h.segments.map(E=>ir(E)).join("/")}function Se(h,E){if(!h.hasChildren())return We(h);if(E){const y=h.children[Sn]?Se(h.children[Sn],!1):"",I=[];return Object.entries(h.children).forEach(([F,J])=>{F!==Sn&&I.push(`${F}:${Se(J,!1)}`)}),I.length>0?`${y}(${I.join("//")})`:y}{const y=function ke(h,E){let y=[];return Object.entries(h.children).forEach(([I,F])=>{I===Sn&&(y=y.concat(E(F,I)))}),Object.entries(h.children).forEach(([I,F])=>{I!==Sn&&(y=y.concat(E(F,I)))}),y}(h,(I,F)=>F===Sn?[Se(h.children[Sn],!1)]:[`${F}:${Se(I,!1)}`]);return 1===Object.keys(h.children).length&&null!=h.children[Sn]?`${We(h)}/${y[0]}`:`${We(h)}/(${y.join("//")})`}}function et(h){return encodeURIComponent(h).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function St(h){return et(h).replace(/%3B/gi,";")}function vn(h){return et(h).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function On(h){return decodeURIComponent(h)}function Rn(h){return On(h.replace(/\+/g,"%20"))}function ir(h){return`${vn(h.path)}${function Xr(h){return Object.entries(h).map(([E,y])=>`;${vn(E)}=${vn(y)}`).join("")}(h.parameters)}`}const Qn=/^[^\/()?;#]+/;function Ln(h){const E=h.match(Qn);return E?E[0]:""}const Gn=/^[^\/()?;=#]+/,ar=/^[^=?&#]+/,Er=/^[^&#]+/;class xr{url;remaining;constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mn([],{}):new Mn([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let I={};return this.peekStartsWith("(")&&(I=this.parseParens(!1)),(E.length>0||Object.keys(y).length>0)&&(I[Sn]=new Mn(E,y)),I}parseSegment(){const E=Ln(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new s.buA(4009,!1);return this.capture(E),new gn(On(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const y=function yr(h){const E=h.match(Gn);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let I="";if(this.consumeOptional("=")){const F=Ln(this.remaining);F&&(I=F,this.capture(I))}E[On(y)]=On(I)}parseQueryParam(E){const y=function nr(h){const E=h.match(ar);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let I="";if(this.consumeOptional("=")){const De=function br(h){const E=h.match(Er);return E?E[0]:""}(this.remaining);De&&(I=De,this.capture(I))}const F=Rn(y),J=Rn(I);if(E.hasOwnProperty(F)){let De=E[F];Array.isArray(De)||(De=[De],E[F]=De),De.push(J)}else E[F]=J}parseParens(E){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const I=Ln(this.remaining),F=this.remaining[I.length];if("/"!==F&&")"!==F&&";"!==F)throw new s.buA(4010,!1);let J;I.indexOf(":")>-1?(J=I.slice(0,I.indexOf(":")),this.capture(J),this.capture(":")):E&&(J=Sn);const De=this.parseChildren();y[J??Sn]=1===Object.keys(De).length&&De[Sn]?De[Sn]:new Mn([],De),this.consumeOptional("//")}return y}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new s.buA(4011,!1)}}function Fr(h){return h.segments.length>0?new Mn([],{[Sn]:h}):h}function Wr(h){const E={};for(const[I,F]of Object.entries(h.children)){const J=Wr(F);if(I===Sn&&0===J.segments.length&&J.hasChildren())for(const[De,qe]of Object.entries(J.children))E[De]=qe;else(J.segments.length>0||J.hasChildren())&&(E[I]=J)}return function kr(h){if(1===h.numberOfChildren&&h.children[Sn]){const E=h.children[Sn];return new Mn(h.segments.concat(E.segments),E.children)}return h}(new Mn(h.segments,E))}function Dr(h){return h instanceof mr}function Lr(h){let E;const F=Fr(function y(J){const De={};for(const gt of J.children){const Ht=y(gt);De[gt.outlet]=Ht}const qe=new Mn(J.url,De);return J===h&&(E=qe),qe}(h.root));return E??F}function Kr(h,E,y,I){let F=h;for(;F.parent;)F=F.parent;if(0===E.length)return Ne(F,F,F,y,I);const J=function A(h){if("string"==typeof h[0]&&1===h.length&&"/"===h[0])return new pe(!0,0,h);let E=0,y=!1;const I=h.reduce((F,J,De)=>{if("object"==typeof J&&null!=J){if(J.outlets){const qe={};return Object.entries(J.outlets).forEach(([gt,Ht])=>{qe[gt]="string"==typeof Ht?Ht.split("/"):Ht}),[...F,{outlets:qe}]}if(J.segmentPath)return[...F,J.segmentPath]}return"string"!=typeof J?[...F,J]:0===De?(J.split("/").forEach((qe,gt)=>{0==gt&&"."===qe||(0==gt&&""===qe?y=!0:".."===qe?E++:""!=qe&&F.push(qe))}),F):[...F,J]},[]);return new pe(y,E,I)}(E);if(J.toRoot())return Ne(F,F,new Mn([],{}),y,I);const De=function j(h,E,y){if(h.isAbsolute)return new ee(E,!0,0);if(!y)return new ee(E,!1,NaN);if(null===y.parent)return new ee(y,!0,0);const I=Hr(h.commands[0])?0:1;return function P(h,E,y){let I=h,F=E,J=y;for(;J>F;){if(J-=F,I=I.parent,!I)throw new s.buA(4005,!1);F=I.segments.length}return new ee(I,!1,F-J)}(y,y.segments.length-1+I,h.numberOfDoubleDots)}(J,F,h),qe=De.processChildren?oe(De.segmentGroup,De.index,J.commands):ce(De.segmentGroup,De.index,J.commands);return Ne(F,De.segmentGroup,qe,y,I)}function Hr(h){return"object"==typeof h&&null!=h&&!h.outlets&&!h.segmentPath}function zr(h){return"object"==typeof h&&null!=h&&h.outlets}function Ne(h,E,y,I,F){let De,J={};I&&Object.entries(I).forEach(([gt,Ht])=>{J[gt]=Array.isArray(Ht)?Ht.map(dn=>`${dn}`):`${Ht}`}),De=h===E?y:Ke(h,E,y);const qe=Fr(Wr(De));return new mr(qe,J,F)}function Ke(h,E,y){const I={};return Object.entries(h.children).forEach(([F,J])=>{I[F]=J===E?y:Ke(J,E,y)}),new Mn(h.segments,I)}class pe{isAbsolute;numberOfDoubleDots;commands;constructor(E,y,I){if(this.isAbsolute=E,this.numberOfDoubleDots=y,this.commands=I,E&&I.length>0&&Hr(I[0]))throw new s.buA(4003,!1);const F=I.find(zr);if(F&&F!==Ft(I))throw new s.buA(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ee{segmentGroup;processChildren;index;constructor(E,y,I){this.segmentGroup=E,this.processChildren=y,this.index=I}}function ce(h,E,y){if(h??=new Mn([],{}),0===h.segments.length&&h.hasChildren())return oe(h,E,y);const I=function ne(h,E,y){let I=0,F=E;const J={match:!1,pathIndex:0,commandIndex:0};for(;F<h.segments.length;){if(I>=y.length)return J;const De=h.segments[F],qe=y[I];if(zr(qe))break;const gt=`${qe}`,Ht=I<y.length-1?y[I+1]:null;if(F>0&&void 0===gt)break;if(gt&&Ht&&"object"==typeof Ht&&void 0===Ht.outlets){if(!Jt(gt,Ht,De))return J;I+=2}else{if(!Jt(gt,{},De))return J;I++}F++}return{match:!0,pathIndex:F,commandIndex:I}}(h,E,y),F=y.slice(I.commandIndex);if(I.match&&I.pathIndex<h.segments.length){const J=new Mn(h.segments.slice(0,I.pathIndex),{});return J.children[Sn]=new Mn(h.segments.slice(I.pathIndex),h.children),oe(J,0,F)}return I.match&&0===F.length?new Mn(h.segments,{}):I.match&&!h.hasChildren()?Qe(h,E,y):I.match?oe(h,0,F):Qe(h,E,y)}function oe(h,E,y){if(0===y.length)return new Mn(h.segments,{});{const I=function q(h){return zr(h[0])?h[0].outlets:{[Sn]:h}}(y),F={};if(Object.keys(I).some(J=>J!==Sn)&&h.children[Sn]&&1===h.numberOfChildren&&0===h.children[Sn].segments.length){const J=oe(h.children[Sn],E,y);return new Mn(h.segments,J.children)}return Object.entries(I).forEach(([J,De])=>{"string"==typeof De&&(De=[De]),null!==De&&(F[J]=ce(h.children[J],E,De))}),Object.entries(h.children).forEach(([J,De])=>{void 0===I[J]&&(F[J]=De)}),new Mn(h.segments,F)}}function Qe(h,E,y){const I=h.segments.slice(0,E);let F=0;for(;F<y.length;){const J=y[F];if(zr(J)){const gt=bt(J.outlets);return new Mn(I,gt)}if(0===F&&Hr(y[0])){I.push(new gn(h.segments[E].path,qt(y[0]))),F++;continue}const De=zr(J)?J.outlets[Sn]:`${J}`,qe=F<y.length-1?y[F+1]:null;De&&qe&&Hr(qe)?(I.push(new gn(De,qt(qe))),F+=2):(I.push(new gn(De,{})),F++)}return new Mn(I,{})}function bt(h){const E={};return Object.entries(h).forEach(([y,I])=>{"string"==typeof I&&(I=[I]),null!==I&&(E[y]=Qe(new Mn([],{}),0,I))}),E}function qt(h){const E={};return Object.entries(h).forEach(([y,I])=>E[y]=`${I}`),E}function Jt(h,E,y){return h==y.path&&Ze(E,y.parameters)}const rn="imperative";var Kt=function(h){return h[h.NavigationStart=0]="NavigationStart",h[h.NavigationEnd=1]="NavigationEnd",h[h.NavigationCancel=2]="NavigationCancel",h[h.NavigationError=3]="NavigationError",h[h.RoutesRecognized=4]="RoutesRecognized",h[h.ResolveStart=5]="ResolveStart",h[h.ResolveEnd=6]="ResolveEnd",h[h.GuardsCheckStart=7]="GuardsCheckStart",h[h.GuardsCheckEnd=8]="GuardsCheckEnd",h[h.RouteConfigLoadStart=9]="RouteConfigLoadStart",h[h.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",h[h.ChildActivationStart=11]="ChildActivationStart",h[h.ChildActivationEnd=12]="ChildActivationEnd",h[h.ActivationStart=13]="ActivationStart",h[h.ActivationEnd=14]="ActivationEnd",h[h.Scroll=15]="Scroll",h[h.NavigationSkipped=16]="NavigationSkipped",h}(Kt||{});class Nn{id;url;constructor(E,y){this.id=E,this.url=y}}class dr extends Nn{type=Kt.NavigationStart;navigationTrigger;restoredState;constructor(E,y,I="imperative",F=null){super(E,y),this.navigationTrigger=I,this.restoredState=F}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cr extends Nn{urlAfterRedirects;type=Kt.NavigationEnd;constructor(E,y,I){super(E,y),this.urlAfterRedirects=I}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var fr=function(h){return h[h.Redirect=0]="Redirect",h[h.SupersededByNewNavigation=1]="SupersededByNewNavigation",h[h.NoDataFromResolver=2]="NoDataFromResolver",h[h.GuardRejected=3]="GuardRejected",h[h.Aborted=4]="Aborted",h}(fr||{}),W=function(h){return h[h.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",h[h.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",h}(W||{});class Bn extends Nn{reason;code;type=Kt.NavigationCancel;constructor(E,y,I,F){super(E,y),this.reason=I,this.code=F}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Y extends Nn{reason;code;type=Kt.NavigationSkipped;constructor(E,y,I,F){super(E,y),this.reason=I,this.code=F}}class x extends Nn{error;target;type=Kt.NavigationError;constructor(E,y,I,F){super(E,y),this.error=I,this.target=F}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Te extends Nn{urlAfterRedirects;state;type=Kt.RoutesRecognized;constructor(E,y,I,F){super(E,y),this.urlAfterRedirects=I,this.state=F}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fn extends Nn{urlAfterRedirects;state;type=Kt.GuardsCheckStart;constructor(E,y,I,F){super(E,y),this.urlAfterRedirects=I,this.state=F}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yt extends Nn{urlAfterRedirects;state;shouldActivate;type=Kt.GuardsCheckEnd;constructor(E,y,I,F,J){super(E,y),this.urlAfterRedirects=I,this.state=F,this.shouldActivate=J}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pn extends Nn{urlAfterRedirects;state;type=Kt.ResolveStart;constructor(E,y,I,F){super(E,y),this.urlAfterRedirects=I,this.state=F}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn extends Nn{urlAfterRedirects;state;type=Kt.ResolveEnd;constructor(E,y,I,F){super(E,y),this.urlAfterRedirects=I,this.state=F}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wn{route;type=Kt.RouteConfigLoadStart;constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pr{route;type=Kt.RouteConfigLoadEnd;constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class uo{snapshot;type=Kt.ChildActivationStart;constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class go{snapshot;type=Kt.ChildActivationEnd;constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ts{snapshot;type=Kt.ActivationStart;constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ao{snapshot;type=Kt.ActivationEnd;constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ns{routerEvent;position;anchor;type=Kt.Scroll;constructor(E,y,I){this.routerEvent=E,this.position=y,this.anchor=I}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Io{}class Ee{url;navigationBehaviorOptions;constructor(E,y){this.url=E,this.navigationBehaviorOptions=y}}function de(h){switch(h.type){case Kt.ActivationEnd:return`ActivationEnd(path: '${h.snapshot.routeConfig?.path||""}')`;case Kt.ActivationStart:return`ActivationStart(path: '${h.snapshot.routeConfig?.path||""}')`;case Kt.ChildActivationEnd:return`ChildActivationEnd(path: '${h.snapshot.routeConfig?.path||""}')`;case Kt.ChildActivationStart:return`ChildActivationStart(path: '${h.snapshot.routeConfig?.path||""}')`;case Kt.GuardsCheckEnd:return`GuardsCheckEnd(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}', state: ${h.state}, shouldActivate: ${h.shouldActivate})`;case Kt.GuardsCheckStart:return`GuardsCheckStart(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}', state: ${h.state})`;case Kt.NavigationCancel:return`NavigationCancel(id: ${h.id}, url: '${h.url}')`;case Kt.NavigationSkipped:return`NavigationSkipped(id: ${h.id}, url: '${h.url}')`;case Kt.NavigationEnd:return`NavigationEnd(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}')`;case Kt.NavigationError:return`NavigationError(id: ${h.id}, url: '${h.url}', error: ${h.error})`;case Kt.NavigationStart:return`NavigationStart(id: ${h.id}, url: '${h.url}')`;case Kt.ResolveEnd:return`ResolveEnd(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}', state: ${h.state})`;case Kt.ResolveStart:return`ResolveStart(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}', state: ${h.state})`;case Kt.RouteConfigLoadEnd:return`RouteConfigLoadEnd(path: ${h.route.path})`;case Kt.RouteConfigLoadStart:return`RouteConfigLoadStart(path: ${h.route.path})`;case Kt.RoutesRecognized:return`RoutesRecognized(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}', state: ${h.state})`;case Kt.Scroll:return`Scroll(anchor: '${h.anchor}', position: '${h.position?`${h.position[0]}, ${h.position[1]}`:null}')`}}function Dn(h){return h.outlet||Sn}function Yn(h){if(!h)return null;if(h.routeConfig?._injector)return h.routeConfig._injector;for(let E=h.parent;E;E=E.parent){const y=E.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class kn{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Yn(this.route?.snapshot)??this.rootInjector}constructor(E){this.rootInjector=E,this.children=new Mr(this.rootInjector)}}let Mr=(()=>{class h{rootInjector;contexts=new Map;constructor(y){this.rootInjector=y}onChildOutletCreated(y,I){const F=this.getOrCreateContext(y);F.outlet=I,this.contexts.set(y,F)}onChildOutletDestroyed(y){const I=this.getContext(y);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let I=this.getContext(y);return I||(I=new kn(this.rootInjector),this.contexts.set(y,I)),I}getContext(y){return this.contexts.get(y)||null}static \u0275fac=function(I){return new(I||h)(s.KVO(s.uvJ))};static \u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();class Or{_root;constructor(E){this._root=E}get root(){return this._root.value}parent(E){const y=this.pathFromRoot(E);return y.length>1?y[y.length-2]:null}children(E){const y=_r(E,this._root);return y?y.children.map(I=>I.value):[]}firstChild(E){const y=_r(E,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(E){const y=qr(E,this._root);return y.length<2?[]:y[y.length-2].children.map(F=>F.value).filter(F=>F!==E)}pathFromRoot(E){return qr(E,this._root).map(y=>y.value)}}function _r(h,E){if(h===E.value)return E;for(const y of E.children){const I=_r(h,y);if(I)return I}return null}function qr(h,E){if(h===E.value)return[E];for(const y of E.children){const I=qr(h,y);if(I.length)return I.unshift(E),I}return[]}class Rr{value;children;constructor(E,y){this.value=E,this.children=y}toString(){return`TreeNode(${this.value})`}}function ao(h){const E={};return h&&h.children.forEach(y=>E[y.value.outlet]=y),E}class Zr extends Or{snapshot;constructor(E,y){super(E),this.snapshot=y,Oe(this,E)}toString(){return this.snapshot.toString()}}function Do(h){const E=function Ro(h){const J=new U([],{},{},"",{},Sn,h,null,{});return new le("",new Rr(J,[]))}(h),y=new we.t([new gn("",{})]),I=new we.t({}),F=new we.t({}),J=new we.t({}),De=new we.t(""),qe=new vo(y,I,J,De,F,Sn,h,E.root);return qe.snapshot=E.root,new Zr(new Rr(qe,[]),E)}class vo{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(E,y,I,F,J,De,qe,gt){this.urlSubject=E,this.paramsSubject=y,this.queryParamsSubject=I,this.fragmentSubject=F,this.dataSubject=J,this.outlet=De,this.component=qe,this._futureSnapshot=gt,this.title=this.dataSubject?.pipe((0,ge.T)(Ht=>Ht[wr]))??(0,ie.of)(void 0),this.url=E,this.params=y,this.queryParams=I,this.fragment=F,this.data=J}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,ge.T)(E=>tr(E))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,ge.T)(E=>tr(E))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function O(h,E,y="emptyOnly"){let I;const{routeConfig:F}=h;return I=null===E||"always"!==y&&""!==F?.path&&(E.component||E.routeConfig?.loadComponent)?{params:{...h.params},data:{...h.data},resolve:{...h.data,...h._resolvedData??{}}}:{params:{...E.params,...h.params},data:{...E.data,...h.data},resolve:{...h.data,...E.data,...F?.data,...h._resolvedData}},F&&Et(F)&&(I.resolve[wr]=F.title),I}class U{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[wr]}constructor(E,y,I,F,J,De,qe,gt,Ht){this.url=E,this.params=y,this.queryParams=I,this.fragment=F,this.data=J,this.outlet=De,this.component=qe,this.routeConfig=gt,this._resolve=Ht}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=tr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=tr(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(I=>I.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class le extends Or{url;constructor(E,y){super(y),this.url=E,Oe(this,y)}toString(){return at(this._root)}}function Oe(h,E){E.value._routerState=h,E.children.forEach(y=>Oe(h,y))}function at(h){const E=h.children.length>0?` { ${h.children.map(at).join(", ")} } `:"";return`${h.value}${E}`}function ct(h){if(h.snapshot){const E=h.snapshot,y=h._futureSnapshot;h.snapshot=y,Ze(E.queryParams,y.queryParams)||h.queryParamsSubject.next(y.queryParams),E.fragment!==y.fragment&&h.fragmentSubject.next(y.fragment),Ze(E.params,y.params)||h.paramsSubject.next(y.params),function Xe(h,E){if(h.length!==E.length)return!1;for(let y=0;y<h.length;++y)if(!Ze(h[y],E[y]))return!1;return!0}(E.url,y.url)||h.urlSubject.next(y.url),Ze(E.data,y.data)||h.dataSubject.next(y.data)}else h.snapshot=h._futureSnapshot,h.dataSubject.next(h._futureSnapshot.data)}function Mt(h,E){const y=Ze(h.params,E.params)&&function Br(h,E){return jr(h,E)&&h.every((y,I)=>Ze(y.parameters,E[I].parameters))}(h.url,E.url);return y&&!(!h.parent!=!E.parent)&&(!h.parent||Mt(h.parent,E.parent))}function Et(h){return"string"==typeof h.title||null===h.title}const jt=new s.nKC("");let Ct=(()=>{class h{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Sn;activateEvents=new S.bkB;deactivateEvents=new S.bkB;attachEvents=new S.bkB;detachEvents=new S.bkB;routerOutletData=(0,Pe.hFB)();parentContexts=(0,s.WQX)(Mr);location=(0,s.WQX)(S.c1b);changeDetector=(0,s.WQX)(Pe.gRc);inputBinder=(0,s.WQX)(Qt,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(y){if(y.name){const{firstChange:I,previousValue:F}=y.name;if(I)return;this.isTrackedInParentContexts(F)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(F)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(y){return this.parentContexts.getContext(y)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const y=this.parentContexts.getContext(this.name);y?.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new s.buA(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new s.buA(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new s.buA(4012,!1);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,I){this.activated=y,this._activatedRoute=I,this.location.insert(y.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,I){if(this.isActivated)throw new s.buA(4013,!1);this._activatedRoute=y;const F=this.location,De=y.snapshot.component,qe=this.parentContexts.getOrCreateContext(this.name).children,gt=new Lt(y,qe,F.injector,this.routerOutletData);this.activated=F.createComponent(De,{index:F.length,injector:gt,environmentInjector:I}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(I){return new(I||h)};static \u0275dir=S.FsC({type:h,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[S.OA$]})}return h})();class Lt{route;childContexts;parent;outletData;constructor(E,y,I,F){this.route=E,this.childContexts=y,this.parent=I,this.outletData=F}get(E,y){return E===vo?this.route:E===Mr?this.childContexts:E===jt?this.outletData:this.parent.get(E,y)}}const Qt=new s.nKC("");let tn=(()=>{class h{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(y){this.unsubscribeFromRouteData(y),this.subscribeToRouteData(y)}unsubscribeFromRouteData(y){this.outletDataSubscriptions.get(y)?.unsubscribe(),this.outletDataSubscriptions.delete(y)}subscribeToRouteData(y){const{activatedRoute:I}=y,F=(0,l.z)([I.queryParams,I.params,I.data]).pipe((0,nt.n)(([J,De,qe],gt)=>(qe={...J,...De,...qe},0===gt?(0,ie.of)(qe):Promise.resolve(qe)))).subscribe(J=>{if(!y.isActivated||!y.activatedComponentRef||y.activatedRoute!==I||null===I.component)return void this.unsubscribeFromRouteData(y);const De=(0,Pe.HJs)(I.component);if(De)for(const{templateName:qe}of De.inputs)y.activatedComponentRef.setInput(qe,J[qe]);else this.unsubscribeFromRouteData(y)});this.outletDataSubscriptions.set(y,F)}static \u0275fac=function(I){return new(I||h)};static \u0275prov=s.jDH({token:h,factory:h.\u0275fac})}return h})(),In=(()=>{class h{static \u0275fac=function(I){return new(I||h)};static \u0275cmp=S.VBU({type:h,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(I,F){1&I&&S.nrm(0,"router-outlet")},dependencies:[Ct],encapsulation:2})}return h})();function yn(h){const E=h.children&&h.children.map(yn),y=E?{...h,children:E}:{...h};return!y.component&&!y.loadComponent&&(E||y.loadChildren)&&y.outlet&&y.outlet!==Sn&&(y.component=In),y}function rr(h,E,y){if(y&&h.shouldReuseRoute(E.value,y.value.snapshot)){const I=y.value;I._futureSnapshot=E.value;const F=function no(h,E,y){return E.children.map(I=>{for(const F of y.children)if(h.shouldReuseRoute(I.value,F.value.snapshot))return rr(h,I,F);return rr(h,I)})}(h,E,y);return new Rr(I,F)}{if(h.shouldAttach(E.value)){const J=h.retrieve(E.value);if(null!==J){const De=J.route;return De.value._futureSnapshot=E.value,De.children=E.children.map(qe=>rr(h,qe)),De}}const I=function yo(h){return new vo(new we.t(h.url),new we.t(h.params),new we.t(h.queryParams),new we.t(h.fragment),new we.t(h.data),h.outlet,h.component,h)}(E.value),F=E.children.map(J=>rr(h,J));return new Rr(I,F)}}class Vr{redirectTo;navigationBehaviorOptions;constructor(E,y){this.redirectTo=E,this.navigationBehaviorOptions=y}}const $="ngNavigationCancelingError";function z(h,E){const{redirectTo:y,navigationBehaviorOptions:I}=Dr(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,F=R(!1,fr.Redirect);return F.url=y,F.navigationBehaviorOptions=I,F}function R(h,E){const y=new Error(`NavigationCancelingError: ${h||""}`);return y[$]=!0,y.cancellationCode=E,y}function Ge(h){return!!h&&h[$]}class Qr{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(E,y,I,F,J){this.routeReuseStrategy=E,this.futureState=y,this.currState=I,this.forwardEvent=F,this.inputBindingEnabled=J}activate(E){const y=this.futureState._root,I=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,I,E),ct(this.futureState.root),this.activateChildRoutes(y,I,E)}deactivateChildRoutes(E,y,I){const F=ao(y);E.children.forEach(J=>{const De=J.value.outlet;this.deactivateRoutes(J,F[De],I),delete F[De]}),Object.values(F).forEach(J=>{this.deactivateRouteAndItsChildren(J,I)})}deactivateRoutes(E,y,I){const F=E.value,J=y?y.value:null;if(F===J)if(F.component){const De=I.getContext(F.outlet);De&&this.deactivateChildRoutes(E,y,De.children)}else this.deactivateChildRoutes(E,y,I);else J&&this.deactivateRouteAndItsChildren(y,I)}deactivateRouteAndItsChildren(E,y){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,y):this.deactivateRouteAndOutlet(E,y)}detachAndStoreRouteSubtree(E,y){const I=y.getContext(E.value.outlet),F=I&&E.value.component?I.children:y,J=ao(E);for(const De of Object.values(J))this.deactivateRouteAndItsChildren(De,F);if(I&&I.outlet){const De=I.outlet.detach(),qe=I.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:De,route:E,contexts:qe})}}deactivateRouteAndOutlet(E,y){const I=y.getContext(E.value.outlet),F=I&&E.value.component?I.children:y,J=ao(E);for(const De of Object.values(J))this.deactivateRouteAndItsChildren(De,F);I&&(I.outlet&&(I.outlet.deactivate(),I.children.onOutletDeactivated()),I.attachRef=null,I.route=null)}activateChildRoutes(E,y,I){const F=ao(y);E.children.forEach(J=>{this.activateRoutes(J,F[J.value.outlet],I),this.forwardEvent(new Ao(J.value.snapshot))}),E.children.length&&this.forwardEvent(new go(E.value.snapshot))}activateRoutes(E,y,I){const F=E.value,J=y?y.value:null;if(ct(F),F===J)if(F.component){const De=I.getOrCreateContext(F.outlet);this.activateChildRoutes(E,y,De.children)}else this.activateChildRoutes(E,y,I);else if(F.component){const De=I.getOrCreateContext(F.outlet);if(this.routeReuseStrategy.shouldAttach(F.snapshot)){const qe=this.routeReuseStrategy.retrieve(F.snapshot);this.routeReuseStrategy.store(F.snapshot,null),De.children.onOutletReAttached(qe.contexts),De.attachRef=qe.componentRef,De.route=qe.route.value,De.outlet&&De.outlet.attach(qe.componentRef,qe.route.value),ct(qe.route.value),this.activateChildRoutes(E,null,De.children)}else De.attachRef=null,De.route=F,De.outlet&&De.outlet.activateWith(F,De.injector),this.activateChildRoutes(E,null,De.children)}else this.activateChildRoutes(E,null,I)}}class Eo{path;route;constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class fo{component;route;constructor(E,y){this.component=E,this.route=y}}function wo(h,E,y){const I=h._root;return rs(I,E?E._root:null,y,[I.value])}function No(h,E){const y=Symbol(),I=E.get(h,y);return I===y?"function"!=typeof h||(0,s.muV)(h)?E.get(h):h:I}function rs(h,E,y,I,F={canDeactivateChecks:[],canActivateChecks:[]}){const J=ao(E);return h.children.forEach(De=>{(function si(h,E,y,I,F={canDeactivateChecks:[],canActivateChecks:[]}){const J=h.value,De=E?E.value:null,qe=y?y.getContext(h.value.outlet):null;if(De&&J.routeConfig===De.routeConfig){const gt=function $i(h,E,y){if("function"==typeof y)return y(h,E);switch(y){case"pathParamsChange":return!jr(h.url,E.url);case"pathParamsOrQueryParamsChange":return!jr(h.url,E.url)||!Ze(h.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mt(h,E)||!Ze(h.queryParams,E.queryParams);default:return!Mt(h,E)}}(De,J,J.routeConfig.runGuardsAndResolvers);gt?F.canActivateChecks.push(new Eo(I)):(J.data=De.data,J._resolvedData=De._resolvedData),rs(h,E,J.component?qe?qe.children:null:y,I,F),gt&&qe&&qe.outlet&&qe.outlet.isActivated&&F.canDeactivateChecks.push(new fo(qe.outlet.component,De))}else De&&Wo(E,qe,F),F.canActivateChecks.push(new Eo(I)),rs(h,null,J.component?qe?qe.children:null:y,I,F)})(De,J[De.value.outlet],y,I.concat([De.value]),F),delete J[De.value.outlet]}),Object.entries(J).forEach(([De,qe])=>Wo(qe,y.getContext(De),F)),F}function Wo(h,E,y){const I=ao(h),F=h.value;Object.entries(I).forEach(([J,De])=>{Wo(De,F.component?E?E.children.getContext(J):null:E,y)}),y.canDeactivateChecks.push(new fo(F.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,F))}function Ko(h){return"function"==typeof h}function fs(h){return h instanceof m||"EmptyError"===h?.name}const xo=Symbol("INITIAL_VALUE");function hs(){return(0,nt.n)(h=>(0,l.z)(h.map(E=>E.pipe((0,ze.s)(1),function Fe(...h){const E=(0,D.lI)(h);return(0,fe.N)((y,I)=>{(E?L(h,y,E):L(h,y)).subscribe(I)})}(xo)))).pipe((0,ge.T)(E=>{for(const y of E)if(!0!==y){if(y===xo)return xo;if(!1===y||ps(y))return y}return!0}),(0,xe.p)(E=>E!==xo),(0,ze.s)(1)))}function ps(h){return Dr(h)||h instanceof Vr}function os(h){return(0,B.F)(ot(E=>{if("boolean"!=typeof E)throw z(0,E)}),(0,ge.T)(E=>!0===E))}class ss{segmentGroup;constructor(E){this.segmentGroup=E||null}}class ms extends Error{urlTree;constructor(E){super(),this.urlTree=E}}function ko(h){return Z(new ss(h))}function ui(h){return Z(new s.buA(4e3,!1))}class _s{urlSerializer;urlTree;constructor(E,y){this.urlSerializer=E,this.urlTree=y}lineralizeSegments(E,y){let I=[],F=y.root;for(;;){if(I=I.concat(F.segments),0===F.numberOfChildren)return(0,ie.of)(I);if(F.numberOfChildren>1||!F.children[Sn])return ui();F=F.children[Sn]}}applyRedirectCommands(E,y,I,F,J){return function Os(h,E,y){if("string"==typeof h)return(0,ie.of)(h);const I=h,{queryParams:F,fragment:J,routeConfig:De,url:qe,outlet:gt,params:Ht,data:dn,title:mn}=E;return Vt((0,s.N4e)(y,()=>I({params:Ht,data:dn,queryParams:F,fragment:J,routeConfig:De,url:qe,outlet:gt,title:mn})))}(y,F,J).pipe((0,ge.T)(De=>{if(De instanceof mr)throw new ms(De);const qe=this.applyRedirectCreateUrlTree(De,this.urlSerializer.parse(De),E,I);if("/"===De[0])throw new ms(qe);return qe}))}applyRedirectCreateUrlTree(E,y,I,F){const J=this.createSegmentGroup(E,y.root,I,F);return new mr(J,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(E,y){const I={};return Object.entries(E).forEach(([F,J])=>{if("string"==typeof J&&":"===J[0]){const qe=J.substring(1);I[F]=y[qe]}else I[F]=J}),I}createSegmentGroup(E,y,I,F){const J=this.createSegments(E,y.segments,I,F);let De={};return Object.entries(y.children).forEach(([qe,gt])=>{De[qe]=this.createSegmentGroup(E,gt,I,F)}),new Mn(J,De)}createSegments(E,y,I,F){return y.map(J=>":"===J.path[0]?this.findPosParam(E,J,F):this.findOrReturn(J,I))}findPosParam(E,y,I){const F=I[y.path.substring(1)];if(!F)throw new s.buA(4001,!1);return F}findOrReturn(E,y){let I=0;for(const F of y){if(F.path===E.path)return y.splice(I),F;I++}return E}}const is={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vs(h,E,y,I,F){const J=Ho(h,E,y);return J.matched?(I=function je(h,E){return h.providers&&!h._injector&&(h._injector=(0,S.Ol2)(h.providers,E,`Route: ${h.path}`)),h._injector??E}(E,I),function li(h,E,y,I){const F=E.canMatch;if(!F||0===F.length)return(0,ie.of)(!0);const J=F.map(De=>{const qe=No(De,h);return Vt(function ai(h){return h&&Ko(h.canMatch)}(qe)?qe.canMatch(E,y):(0,s.N4e)(h,()=>qe(E,y)))});return(0,ie.of)(J).pipe(hs(),os())}(I,E,y).pipe((0,ge.T)(De=>!0===De?J:{...is}))):(0,ie.of)(J)}function Ho(h,E,y){if("**"===E.path)return function ys(h){return{matched:!0,parameters:h.length>0?Ft(h).parameters:{},consumedSegments:h,remainingSegments:[],positionalParamSegments:{}}}(y);if(""===E.path)return"full"===E.pathMatch&&(h.hasChildren()||y.length>0)?{...is}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const F=(E.matcher||bn)(y,h,E);if(!F)return{...is};const J={};Object.entries(F.posParams??{}).forEach(([qe,gt])=>{J[qe]=gt.path});const De=F.consumed.length>0?{...J,...F.consumed[F.consumed.length-1].parameters}:J;return{matched:!0,consumedSegments:F.consumed,remainingSegments:y.slice(F.consumed.length),parameters:De,positionalParamSegments:F.posParams??{}}}function qn(h,E,y,I){return y.length>0&&function Hs(h,E,y){return y.some(I=>$o(h,E,I)&&Dn(I)!==Sn)}(h,y,I)?{segmentGroup:new Mn(E,as(I,new Mn(y,h.children))),slicedSegments:[]}:0===y.length&&function ji(h,E,y){return y.some(I=>$o(h,E,I))}(h,y,I)?{segmentGroup:new Mn(h.segments,Es(h,y,I,h.children)),slicedSegments:y}:{segmentGroup:new Mn(h.segments,h.children),slicedSegments:y}}function Es(h,E,y,I){const F={};for(const J of y)if($o(h,E,J)&&!I[Dn(J)]){const De=new Mn([],{});F[Dn(J)]=De}return{...I,...F}}function as(h,E){const y={};y[Sn]=E;for(const I of h)if(""===I.path&&Dn(I)!==Sn){const F=new Mn([],{});y[Dn(I)]=F}return y}function $o(h,E,y){return(!(h.hasChildren()||E.length>0)||"full"!==y.pathMatch)&&""===y.path}class cs{}class zs{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(E,y,I,F,J,De,qe){this.injector=E,this.configLoader=y,this.rootComponentType=I,this.config=F,this.urlTree=J,this.paramsInheritanceStrategy=De,this.urlSerializer=qe,this.applyRedirects=new _s(this.urlSerializer,this.urlTree)}noMatchError(E){return new s.buA(4002,`'${E.segmentGroup}'`)}recognize(){const E=qn(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(E).pipe((0,ge.T)(({children:y,rootSnapshot:I})=>{const F=new Rr(I,y),J=new le("",F),De=function Yr(h,E,y=null,I=null){return Kr(Lr(h),E,y,I)}(I,[],this.urlTree.queryParams,this.urlTree.fragment);return De.queryParams=this.urlTree.queryParams,J.url=this.urlSerializer.serialize(De),{state:J,tree:De}}))}match(E){const y=new U([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Sn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,E,Sn,y).pipe((0,ge.T)(I=>({children:I,rootSnapshot:y})),(0,pt.W)(I=>{if(I instanceof ms)return this.urlTree=I.urlTree,this.match(I.urlTree.root);throw I instanceof ss?this.noMatchError(I):I}))}processSegmentGroup(E,y,I,F,J){return 0===I.segments.length&&I.hasChildren()?this.processChildren(E,y,I,J):this.processSegment(E,y,I,I.segments,F,!0,J).pipe((0,ge.T)(De=>De instanceof Rr?[De]:[]))}processChildren(E,y,I,F){const J=[];for(const De of Object.keys(I.children))"primary"===De?J.unshift(De):J.push(De);return(0,me.H)(J).pipe((0,He.H)(De=>{const qe=I.children[De],gt=function jn(h,E){const y=h.filter(I=>Dn(I)===E);return y.push(...h.filter(I=>Dn(I)!==E)),y}(y,De);return this.processSegmentGroup(E,gt,qe,De,F)}),function vt(h,E){return(0,fe.N)(function At(h,E,y,I,F){return(J,De)=>{let qe=y,gt=E,Ht=0;J.subscribe((0,_e._)(De,dn=>{const mn=Ht++;gt=qe?h(gt,dn,mn):(qe=!0,dn),I&&De.next(gt)},F&&(()=>{qe&&De.next(gt),De.complete()})))}}(h,E,arguments.length>=2,!0))}((De,qe)=>(De.push(...qe),De)),Ve(null),function dt(h,E){const y=arguments.length>=2;return I=>I.pipe(h?(0,xe.p)((F,J)=>h(F,J,I)):ye.D,Ut(1),y?Ve(E):Ae(()=>new m))}(),(0,rt.Z)(De=>{if(null===De)return ko(I);const qe=Vi(De);return function va(h){h.sort((E,y)=>E.value.outlet===Sn?-1:y.value.outlet===Sn?1:E.value.outlet.localeCompare(y.value.outlet))}(qe),(0,ie.of)(qe)}))}processSegment(E,y,I,F,J,De,qe){return(0,me.H)(y).pipe((0,He.H)(gt=>this.processSegmentAgainstRoute(gt._injector??E,y,gt,I,F,J,De,qe).pipe((0,pt.W)(Ht=>{if(Ht instanceof ss)return(0,ie.of)(null);throw Ht}))),Me(gt=>!!gt),(0,pt.W)(gt=>{if(fs(gt))return function di(h,E,y){return 0===E.length&&!h.children[y]}(I,F,J)?(0,ie.of)(new cs):ko(I);throw gt}))}processSegmentAgainstRoute(E,y,I,F,J,De,qe,gt){return Dn(I)===De||De!==Sn&&$o(F,J,I)?void 0===I.redirectTo?this.matchSegmentAgainstRoute(E,F,I,J,De,gt):this.allowRedirects&&qe?this.expandSegmentAgainstRouteUsingRedirect(E,F,y,I,J,De,gt):ko(F):ko(F)}expandSegmentAgainstRouteUsingRedirect(E,y,I,F,J,De,qe){const{matched:gt,parameters:Ht,consumedSegments:dn,positionalParamSegments:mn,remainingSegments:pr}=Ho(y,F,J);if(!gt)return ko(y);"string"==typeof F.redirectTo&&"/"===F.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const co=new U(J,Ht,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Xs(F),Dn(F),F.component??F._loadedComponent??null,F,Ps(F)),lr=O(co,qe,this.paramsInheritanceStrategy);return co.params=Object.freeze(lr.params),co.data=Object.freeze(lr.data),this.applyRedirects.applyRedirectCommands(dn,F.redirectTo,mn,co,E).pipe((0,nt.n)(mo=>this.applyRedirects.lineralizeSegments(F,mo)),(0,rt.Z)(mo=>this.processSegment(E,I,y,mo.concat(pr),De,!1,qe)))}matchSegmentAgainstRoute(E,y,I,F,J,De){const qe=vs(y,I,F,E);return"**"===I.path&&(y.children={}),qe.pipe((0,nt.n)(gt=>gt.matched?this.getChildConfig(E=I._injector??E,I,F).pipe((0,nt.n)(({routes:Ht})=>{const dn=I._loadedInjector??E,{parameters:mn,consumedSegments:pr,remainingSegments:co}=gt,lr=new U(pr,mn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Xs(I),Dn(I),I.component??I._loadedComponent??null,I,Ps(I)),Gr=O(lr,De,this.paramsInheritanceStrategy);lr.params=Object.freeze(Gr.params),lr.data=Object.freeze(Gr.data);const{segmentGroup:mo,slicedSegments:To}=qn(y,pr,co,Ht);if(0===To.length&&mo.hasChildren())return this.processChildren(dn,Ht,mo,lr).pipe((0,ge.T)(Is=>new Rr(lr,Is)));if(0===Ht.length&&0===To.length)return(0,ie.of)(new Rr(lr,[]));const gi=Dn(I)===J;return this.processSegment(dn,Ht,mo,To,gi?Sn:J,!0,lr).pipe((0,ge.T)(Is=>new Rr(lr,Is instanceof Rr?[Is]:[])))})):ko(y)))}getChildConfig(E,y,I){return y.children?(0,ie.of)({routes:y.children,injector:E}):y.loadChildren?void 0!==y._loadedRoutes?(0,ie.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function Ws(h,E,y,I){const F=E.canLoad;if(void 0===F||0===F.length)return(0,ie.of)(!0);const J=F.map(De=>{const qe=No(De,h);return Vt(function Qo(h){return h&&Ko(h.canLoad)}(qe)?qe.canLoad(E,y):(0,s.N4e)(h,()=>qe(E,y)))});return(0,ie.of)(J).pipe(hs(),os())}(E,y,I).pipe((0,rt.Z)(F=>F?this.configLoader.loadChildren(E,y).pipe(ot(J=>{y._loadedRoutes=J.routes,y._loadedInjector=J.injector})):function Ks(){return Z(R(!1,fr.GuardRejected))}())):(0,ie.of)({routes:[],injector:E})}}function ya(h){const E=h.value.routeConfig;return E&&""===E.path}function Vi(h){const E=[],y=new Set;for(const I of h){if(!ya(I)){E.push(I);continue}const F=E.find(J=>I.value.routeConfig===J.value.routeConfig);void 0!==F?(F.children.push(...I.children),y.add(F)):E.push(I)}for(const I of y){const F=Vi(I.children);E.push(new Rr(I.value,F))}return E.filter(I=>!y.has(I))}function Xs(h){return h.data||{}}function Ps(h){return h.resolve||{}}function Jo(h){const E=h.children.map(y=>Jo(y)).flat();return[h,...E]}function Xo(h){return(0,nt.n)(E=>{const y=h(E);return y?(0,me.H)(y).pipe((0,ge.T)(()=>E)):(0,ie.of)(E)})}let Qs=(()=>{class h{buildTitle(y){let I,F=y.root;for(;void 0!==F;)I=this.getResolvedTitleForRoute(F)??I,F=F.children.find(J=>J.outlet===Sn);return I}getResolvedTitleForRoute(y){return y.data[wr]}static \u0275fac=function(I){return new(I||h)};static \u0275prov=s.jDH({token:h,factory:()=>(0,s.WQX)(Ki),providedIn:"root"})}return h})(),Ki=(()=>{class h extends Qs{title;constructor(y){super(),this.title=y}updateTitle(y){const I=this.buildTitle(y);void 0!==I&&this.title.setTitle(I)}static \u0275fac=function(I){return new(I||h)(s.KVO(ft))};static \u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();const us=new s.nKC("",{providedIn:"root",factory:()=>({})}),Ds=new s.nKC("");let ro=(()=>{class h{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=(0,s.WQX)(S.Ql9);loadComponent(y,I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,ie.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const F=Vt((0,s.N4e)(y,()=>I.loadComponent())).pipe((0,ge.T)(Js),(0,nt.n)(Ss),ot(De=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=De}),(0,Bt.j)(()=>{this.componentLoaders.delete(I)})),J=new ve(F,()=>new Ye.B).pipe(Re());return this.componentLoaders.set(I,J),J}loadChildren(y,I){if(this.childrenLoaders.get(I))return this.childrenLoaders.get(I);if(I._loadedRoutes)return(0,ie.of)({routes:I._loadedRoutes,injector:I._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(I);const J=function hi(h,E,y,I){return Vt((0,s.N4e)(y,()=>h.loadChildren())).pipe((0,ge.T)(Js),(0,nt.n)(Ss),(0,rt.Z)(F=>F instanceof S.PYt||Array.isArray(F)?(0,ie.of)(F):(0,me.H)(E.compileModuleAsync(F))),(0,ge.T)(F=>{I&&I(h);let J,De,qe=!1;return Array.isArray(F)?(De=F,!0):(J=F.create(y).injector,De=J.get(Ds,[],{optional:!0,self:!0}).flat()),{routes:De.map(yn),injector:J}}))}(I,this.compiler,y,this.onLoadEndListener).pipe((0,Bt.j)(()=>{this.childrenLoaders.delete(I)})),De=new ve(J,()=>new Ye.B).pipe(Re());return this.childrenLoaders.set(I,De),De}static \u0275fac=function(I){return new(I||h)};static \u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();function Js(h){return function pi(h){return h&&"object"==typeof h&&"default"in h}(h)?h.default:h}function Ss(h){return(0,ie.of)(h)}let Rs=(()=>{class h{static \u0275fac=function(I){return new(I||h)};static \u0275prov=s.jDH({token:h,factory:()=>(0,s.WQX)(Hi),providedIn:"root"})}return h})(),Hi=(()=>{class h{shouldProcessUrl(y){return!0}extract(y){return y}merge(y,I){return y}static \u0275fac=function(I){return new(I||h)};static \u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();const Cs=new s.nKC(""),xs=new s.nKC("");function zi(h,E,y){const I=h.get(xs),F=h.get(s.qQL);if(!F.startViewTransition||I.skipNextTransition)return I.skipNextTransition=!1,new Promise(Ht=>setTimeout(Ht));let J;const De=new Promise(Ht=>{J=Ht}),qe=F.startViewTransition(()=>(J(),function Ys(h){return new Promise(E=>{(0,S.mal)({read:()=>setTimeout(E)},{injector:h})})}(h)));qe.ready.catch(Ht=>{});const{onViewTransitionCreated:gt}=I;return gt&&(0,s.N4e)(h,()=>gt({transition:qe,from:E,to:y})),De}const Yo=new s.nKC("");let As=(()=>{class h{currentNavigation=(0,s.vPA)(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ye.B;transitionAbortWithErrorSubject=new Ye.B;configLoader=(0,s.WQX)(ro);environmentInjector=(0,s.WQX)(s.uvJ);destroyRef=(0,s.WQX)(s.abz);urlSerializer=(0,s.WQX)(st);rootContexts=(0,s.WQX)(Mr);location=(0,s.WQX)(o.aZ);inputBindingEnabled=null!==(0,s.WQX)(Qt,{optional:!0});titleStrategy=(0,s.WQX)(Qs);options=(0,s.WQX)(us,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=(0,s.WQX)(Rs);createViewTransition=(0,s.WQX)(Cs,{optional:!0});navigationErrorHandler=(0,s.WQX)(Yo,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>(0,ie.of)(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=F=>this.events.next(new Pr(F)),this.configLoader.onLoadStartListener=F=>this.events.next(new Wn(F)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(y){const I=++this.navigationId;(0,Ce.O8)(()=>{this.transitions?.next({...y,extractedUrl:this.urlHandlingStrategy.extract(y.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:I})})}setupNavigations(y){return this.transitions=new we.t(null),this.transitions.pipe((0,xe.p)(I=>null!==I),(0,nt.n)(I=>{let F=!1;return(0,ie.of)(I).pipe((0,nt.n)(J=>{if(this.navigationId>I.id)return this.cancelNavigationTransition(I,"",fr.SupersededByNewNavigation),G.w;this.currentTransition=I,this.currentNavigation.set({id:J.id,initialUrl:J.rawUrl,extractedUrl:J.extractedUrl,targetBrowserUrl:"string"==typeof J.extras.browserUrl?this.urlSerializer.parse(J.extras.browserUrl):J.extras.browserUrl,trigger:J.source,extras:J.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null,abort:()=>J.abortController.abort()});const De=!y.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!De&&"reload"!==(J.extras.onSameUrlNavigation??y.onSameUrlNavigation))return this.events.next(new Y(J.id,this.urlSerializer.serialize(J.rawUrl),"",W.IgnoredSameUrlNavigation)),J.resolve(!1),G.w;if(this.urlHandlingStrategy.shouldProcessUrl(J.rawUrl))return(0,ie.of)(J).pipe((0,nt.n)(gt=>(this.events.next(new dr(gt.id,this.urlSerializer.serialize(gt.extractedUrl),gt.source,gt.restoredState)),gt.id!==this.navigationId?G.w:Promise.resolve(gt))),function Go(h,E,y,I,F,J){return(0,rt.Z)(De=>function ls(h,E,y,I,F,J,De="emptyOnly"){return new zs(h,E,y,I,F,De,J).recognize()}(h,E,y,I,De.extractedUrl,F,J).pipe((0,ge.T)(({state:qe,tree:gt})=>({...De,targetSnapshot:qe,urlAfterRedirects:gt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,y.config,this.urlSerializer,this.paramsInheritanceStrategy),ot(gt=>{I.targetSnapshot=gt.targetSnapshot,I.urlAfterRedirects=gt.urlAfterRedirects,this.currentNavigation.update(dn=>(dn.finalUrl=gt.urlAfterRedirects,dn));const Ht=new Te(gt.id,this.urlSerializer.serialize(gt.extractedUrl),this.urlSerializer.serialize(gt.urlAfterRedirects),gt.targetSnapshot);this.events.next(Ht)}));if(De&&this.urlHandlingStrategy.shouldProcessUrl(J.currentRawUrl)){const{id:gt,extractedUrl:Ht,source:dn,restoredState:mn,extras:pr}=J,co=new dr(gt,this.urlSerializer.serialize(Ht),dn,mn);this.events.next(co);const lr=Do(this.rootComponentType).snapshot;return this.currentTransition=I={...J,targetSnapshot:lr,urlAfterRedirects:Ht,extras:{...pr,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.update(Gr=>(Gr.finalUrl=Ht,Gr)),(0,ie.of)(I)}return this.events.next(new Y(J.id,this.urlSerializer.serialize(J.extractedUrl),"",W.IgnoredByUrlHandlingStrategy)),J.resolve(!1),G.w}),ot(J=>{const De=new Fn(J.id,this.urlSerializer.serialize(J.extractedUrl),this.urlSerializer.serialize(J.urlAfterRedirects),J.targetSnapshot);this.events.next(De)}),(0,ge.T)(J=>(this.currentTransition=I={...J,guards:wo(J.targetSnapshot,J.currentSnapshot,this.rootContexts)},I)),function Bs(h,E){return(0,rt.Z)(y=>{const{targetSnapshot:I,currentSnapshot:F,guards:{canActivateChecks:J,canDeactivateChecks:De}}=y;return 0===De.length&&0===J.length?(0,ie.of)({...y,guardsResult:!0}):function js(h,E,y,I){return(0,me.H)(h).pipe((0,rt.Z)(F=>function Vs(h,E,y,I,F){const J=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,ie.of)(!0);const De=J.map(qe=>{const gt=Yn(E)??F,Ht=No(qe,gt);return Vt(function ii(h){return h&&Ko(h.canDeactivate)}(Ht)?Ht.canDeactivate(h,E,y,I):(0,s.N4e)(gt,()=>Ht(h,E,y,I))).pipe(Me())});return(0,ie.of)(De).pipe(hs())}(F.component,F.route,y,E,I)),Me(F=>!0!==F,!0))}(De,I,F,h).pipe((0,rt.Z)(qe=>qe&&function Ms(h){return"boolean"==typeof h}(qe)?function ci(h,E,y,I){return(0,me.H)(E).pipe((0,He.H)(F=>L(function Bi(h,E){return null!==h&&E&&E(new uo(h)),(0,ie.of)(!0)}(F.route.parent,I),function Fo(h,E){return null!==h&&E&&E(new ts(h)),(0,ie.of)(!0)}(F.route,I),function gs(h,E,y){const I=E[E.length-1],J=E.slice(0,E.length-1).reverse().map(De=>function qo(h){const E=h.routeConfig?h.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:h,guards:E}:null}(De)).filter(De=>null!==De).map(De=>ae(()=>{const qe=De.guards.map(gt=>{const Ht=Yn(De.node)??y,dn=No(gt,Ht);return Vt(function Ui(h){return h&&Ko(h.canActivateChild)}(dn)?dn.canActivateChild(I,h):(0,s.N4e)(Ht,()=>dn(I,h))).pipe(Me())});return(0,ie.of)(qe).pipe(hs())}));return(0,ie.of)(J).pipe(hs())}(h,F.path,y),function eo(h,E,y){const I=E.routeConfig?E.routeConfig.canActivate:null;if(!I||0===I.length)return(0,ie.of)(!0);const F=I.map(J=>ae(()=>{const De=Yn(E)??y,qe=No(J,De);return Vt(function Us(h){return h&&Ko(h.canActivate)}(qe)?qe.canActivate(E,h):(0,s.N4e)(De,()=>qe(E,h))).pipe(Me())}));return(0,ie.of)(F).pipe(hs())}(h,F.route,y))),Me(F=>!0!==F,!0))}(I,J,h,E):(0,ie.of)(qe)),(0,ge.T)(qe=>({...y,guardsResult:qe})))})}(this.environmentInjector,J=>this.events.next(J)),ot(J=>{if(I.guardsResult=J.guardsResult,J.guardsResult&&"boolean"!=typeof J.guardsResult)throw z(0,J.guardsResult);const De=new Yt(J.id,this.urlSerializer.serialize(J.extractedUrl),this.urlSerializer.serialize(J.urlAfterRedirects),J.targetSnapshot,!!J.guardsResult);this.events.next(De)}),(0,xe.p)(J=>!!J.guardsResult||(this.cancelNavigationTransition(J,"",fr.GuardRejected),!1)),Xo(J=>{if(0!==J.guards.canActivateChecks.length)return(0,ie.of)(J).pipe(ot(De=>{const qe=new Pn(De.id,this.urlSerializer.serialize(De.extractedUrl),this.urlSerializer.serialize(De.urlAfterRedirects),De.targetSnapshot);this.events.next(qe)}),(0,nt.n)(De=>{let qe=!1;return(0,ie.of)(De).pipe(function qs(h,E){return(0,rt.Z)(y=>{const{targetSnapshot:I,guards:{canActivateChecks:F}}=y;if(!F.length)return(0,ie.of)(y);const J=new Set(F.map(gt=>gt.route)),De=new Set;for(const gt of J)if(!De.has(gt))for(const Ht of Jo(gt))De.add(Ht);let qe=0;return(0,me.H)(De).pipe((0,He.H)(gt=>J.has(gt)?function bs(h,E,y,I){const F=h.routeConfig,J=h._resolve;return void 0!==F?.title&&!Et(F)&&(J[wr]=F.title),ae(()=>(h.data=O(h,h.parent,y).resolve,function fi(h,E,y,I){const F=It(h);if(0===F.length)return(0,ie.of)({});const J={};return(0,me.H)(F).pipe((0,rt.Z)(De=>function Wi(h,E,y,I){const F=Yn(E)??I,J=No(h,F);return Vt(J.resolve?J.resolve(E,y):(0,s.N4e)(F,()=>J(E,y)))}(h[De],E,y,I).pipe(Me(),ot(qe=>{if(qe instanceof Vr)throw z(new tt,qe);J[De]=qe}))),Ut(1),(0,ge.T)(()=>J),(0,pt.W)(De=>fs(De)?G.w:Z(De)))}(J,h,E,I).pipe((0,ge.T)(De=>(h._resolvedData=De,h.data={...h.data,...De},null)))))}(gt,I,h,E):(gt.data=O(gt,gt.parent,h).resolve,(0,ie.of)(void 0))),ot(()=>qe++),Ut(1),(0,rt.Z)(gt=>qe===De.size?(0,ie.of)(y):G.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),ot({next:()=>qe=!0,complete:()=>{qe||this.cancelNavigationTransition(De,"",fr.NoDataFromResolver)}}))}),ot(De=>{const qe=new Xn(De.id,this.urlSerializer.serialize(De.extractedUrl),this.urlSerializer.serialize(De.urlAfterRedirects),De.targetSnapshot);this.events.next(qe)}))}),Xo(J=>{const De=qe=>{const gt=[];if(qe.routeConfig?.loadComponent){const Ht=Yn(qe)??this.environmentInjector;gt.push(this.configLoader.loadComponent(Ht,qe.routeConfig).pipe(ot(dn=>{qe.component=dn}),(0,ge.T)(()=>{})))}for(const Ht of qe.children)gt.push(...De(Ht));return gt};return(0,l.z)(De(J.targetSnapshot.root)).pipe(Ve(null),(0,ze.s)(1))}),Xo(()=>this.afterPreactivation()),(0,nt.n)(()=>{const{currentSnapshot:J,targetSnapshot:De}=I,qe=this.createViewTransition?.(this.environmentInjector,J.root,De.root);return qe?(0,me.H)(qe).pipe((0,ge.T)(()=>I)):(0,ie.of)(I)}),(0,ge.T)(J=>{const De=function hr(h,E,y){const I=rr(h,E._root,y?y._root:void 0);return new Zr(I,E)}(y.routeReuseStrategy,J.targetSnapshot,J.currentRouterState);return this.currentTransition=I={...J,targetRouterState:De},this.currentNavigation.update(qe=>(qe.targetRouterState=De,qe)),I}),ot(()=>{this.events.next(new Io)}),((h,E,y,I)=>(0,ge.T)(F=>(new Qr(E,F.targetRouterState,F.currentRouterState,y,I).activate(h),F)))(this.rootContexts,y.routeReuseStrategy,J=>this.events.next(J),this.inputBindingEnabled),(0,ze.s)(1),Nt(new k.c(J=>{const De=I.abortController.signal,qe=()=>J.next();return De.addEventListener("abort",qe),()=>De.removeEventListener("abort",qe)}).pipe((0,xe.p)(()=>!F&&!I.targetRouterState),ot(()=>{this.cancelNavigationTransition(I,I.abortController.signal.reason+"",fr.Aborted)}))),ot({next:J=>{F=!0,this.lastSuccessfulNavigation=(0,Ce.O8)(this.currentNavigation),this.events.next(new cr(J.id,this.urlSerializer.serialize(J.extractedUrl),this.urlSerializer.serialize(J.urlAfterRedirects))),this.titleStrategy?.updateTitle(J.targetRouterState.snapshot),J.resolve(!0)},complete:()=>{F=!0}}),Nt(this.transitionAbortWithErrorSubject.pipe(ot(J=>{throw J}))),(0,Bt.j)(()=>{F||this.cancelNavigationTransition(I,"",fr.SupersededByNewNavigation),this.currentTransition?.id===I.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),(0,pt.W)(J=>{if(this.destroyed)return I.resolve(!1),G.w;if(F=!0,Ge(J))this.events.next(new Bn(I.id,this.urlSerializer.serialize(I.extractedUrl),J.message,J.cancellationCode)),function ue(h){return Ge(h)&&Dr(h.url)}(J)?this.events.next(new Ee(J.url,J.navigationBehaviorOptions)):I.resolve(!1);else{const De=new x(I.id,this.urlSerializer.serialize(I.extractedUrl),J,I.targetSnapshot??void 0);try{const qe=(0,s.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(De));if(!(qe instanceof Vr))throw this.events.next(De),J;{const{message:gt,cancellationCode:Ht}=z(0,qe);this.events.next(new Bn(I.id,this.urlSerializer.serialize(I.extractedUrl),gt,Ht)),this.events.next(new Ee(qe.redirectTo,qe.navigationBehaviorOptions))}}catch(qe){this.options.resolveNavigationPromiseOnError?I.resolve(!1):I.reject(qe)}}return G.w}))}))}cancelNavigationTransition(y,I,F){const J=new Bn(y.id,this.urlSerializer.serialize(y.extractedUrl),I,F);this.events.next(J),y.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const y=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),I=(0,Ce.O8)(this.currentNavigation),F=I?.targetBrowserUrl??I?.extractedUrl;return y.toString()!==F?.toString()&&!I?.extras.skipLocationChange}static \u0275fac=function(I){return new(I||h)};static \u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();function Uo(h){return h!==rn}let f=(()=>{class h{static \u0275fac=function(I){return new(I||h)};static \u0275prov=s.jDH({token:h,factory:()=>(0,s.WQX)(c),providedIn:"root"})}return h})();class u{shouldDetach(E){return!1}store(E,y){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,y){return E.routeConfig===y.routeConfig}}let c=(()=>{class h extends u{static \u0275fac=(()=>{let y;return function(F){return(y||(y=S.xGo(h)))(F||h)}})();static \u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})(),d=(()=>{class h{urlSerializer=(0,s.WQX)(st);options=(0,s.WQX)(us,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=(0,s.WQX)(o.aZ);urlHandlingStrategy=(0,s.WQX)(Rs);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:y,initialUrl:I,targetBrowserUrl:F}){const J=void 0!==y?this.urlHandlingStrategy.merge(y,I):I,De=F??J;return De instanceof mr?this.urlSerializer.serialize(De):De}commitTransition({targetRouterState:y,finalUrl:I,initialUrl:F}){I&&y?(this.currentUrlTree=I,this.rawUrlTree=this.urlHandlingStrategy.merge(I,F),this.routerState=y):this.rawUrlTree=F}routerState=Do(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:y}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y??this.rawUrlTree)}static \u0275fac=function(I){return new(I||h)};static \u0275prov=s.jDH({token:h,factory:()=>(0,s.WQX)(w),providedIn:"root"})}return h})(),w=(()=>{class h extends d{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(y){return this.location.subscribe(I=>{"popstate"===I.type&&setTimeout(()=>{y(I.url,I.state,"popstate")})})}handleRouterEvent(y,I){y instanceof dr?this.updateStateMemento():y instanceof Y?this.commitTransition(I):y instanceof Te?"eager"===this.urlUpdateStrategy&&(I.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(I),I)):y instanceof Io?(this.commitTransition(I),"deferred"===this.urlUpdateStrategy&&!I.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(I),I)):y instanceof Bn&&y.code!==fr.SupersededByNewNavigation&&y.code!==fr.Redirect?this.restoreHistory(I):y instanceof x?this.restoreHistory(I,!0):y instanceof cr&&(this.lastSuccessfulId=y.id,this.currentPageId=this.browserPageId)}setBrowserUrl(y,{extras:I,id:F}){const{replaceUrl:J,state:De}=I;if(this.location.isCurrentPathEqualTo(y)||J){const qe=this.browserPageId,gt={...De,...this.generateNgRouterState(F,qe)};this.location.replaceState(y,"",gt)}else{const qe={...De,...this.generateNgRouterState(F,this.browserPageId+1)};this.location.go(y,"",qe)}}restoreHistory(y,I=!1){if("computed"===this.canceledNavigationResolution){const J=this.currentPageId-this.browserPageId;0!==J?this.location.historyGo(J):this.getCurrentUrlTree()===y.finalUrl&&0===J&&(this.resetInternalState(y),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(I&&this.resetInternalState(y),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(y,I){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:I}:{navigationId:y}}static \u0275fac=(()=>{let y;return function(F){return(y||(y=S.xGo(h)))(F||h)}})();static \u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();function N(h,E){h.events.pipe((0,xe.p)(y=>y instanceof cr||y instanceof Bn||y instanceof x||y instanceof Y),(0,ge.T)(y=>y instanceof cr||y instanceof Y?0:y instanceof Bn&&(y.code===fr.Redirect||y.code===fr.SupersededByNewNavigation)?2:1),(0,xe.p)(y=>2!==y),(0,ze.s)(1)).subscribe(()=>{E()})}const V={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},te={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ie=(()=>{class h{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=(0,s.WQX)(S.C7A);stateManager=(0,s.WQX)(d);options=(0,s.WQX)(us,{optional:!0})||{};pendingTasks=(0,s.WQX)(s.rev);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=(0,s.WQX)(As);urlSerializer=(0,s.WQX)(st);location=(0,s.WQX)(o.aZ);urlHandlingStrategy=(0,s.WQX)(Rs);injector=(0,s.WQX)(s.uvJ);_events=new Ye.B;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=(0,s.WQX)(f);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=(0,s.WQX)(Ds,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!(0,s.WQX)(Qt,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:y=>{this.console.warn(y)}}),this.subscribeToNavigationEvents()}eventsSubscription=new he.yU;subscribeToNavigationEvents(){const y=this.navigationTransitions.events.subscribe(I=>{try{const F=this.navigationTransitions.currentTransition,J=(0,Ce.O8)(this.navigationTransitions.currentNavigation);if(null!==F&&null!==J)if(this.stateManager.handleRouterEvent(I,J),I instanceof Bn&&I.code!==fr.Redirect&&I.code!==fr.SupersededByNewNavigation)this.navigated=!0;else if(I instanceof cr)this.navigated=!0;else if(I instanceof Ee){const De=I.navigationBehaviorOptions,qe=this.urlHandlingStrategy.merge(I.url,F.currentRawUrl),gt={browserUrl:F.extras.browserUrl,info:F.extras.info,skipLocationChange:F.extras.skipLocationChange,replaceUrl:F.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Uo(F.source),...De};this.scheduleNavigation(qe,rn,null,gt,{resolve:F.resolve,reject:F.reject,promise:F.promise})}(function Q(h){return!(h instanceof Io||h instanceof Ee)})(I)&&this._events.next(I)}catch(F){this.navigationTransitions.transitionAbortWithErrorSubject.next(F)}});this.eventsSubscription.add(y)}resetRootComponentType(y){this.routerState.root.component=y,this.navigationTransitions.rootComponentType=y}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rn,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((y,I,F)=>{this.navigateToSyncWithBrowser(y,F,I)})}navigateToSyncWithBrowser(y,I,F){const J={replaceUrl:!0},De=F?.navigationId?F:null;if(F){const gt={...F};delete gt.navigationId,delete gt.\u0275routerPageId,0!==Object.keys(gt).length&&(J.state=gt)}const qe=this.parseUrl(y);this.scheduleNavigation(qe,I,De,J).catch(gt=>{this.disposed||this.injector.get(s.ZTf)(gt)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return(0,Ce.O8)(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(y){this.config=y.map(yn),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(y,I={}){const{relativeTo:F,queryParams:J,fragment:De,queryParamsHandling:qe,preserveFragment:gt}=I,Ht=gt?this.currentUrlTree.fragment:De;let mn,dn=null;switch(qe??this.options.defaultQueryParamsHandling){case"merge":dn={...this.currentUrlTree.queryParams,...J};break;case"preserve":dn=this.currentUrlTree.queryParams;break;default:dn=J||null}null!==dn&&(dn=this.removeEmptyProps(dn));try{mn=Lr(F?F.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof y[0]||"/"!==y[0][0])&&(y=[]),mn=this.currentUrlTree.root}return Kr(mn,y,dn,Ht??null)}navigateByUrl(y,I={skipLocationChange:!1}){const F=Dr(y)?y:this.parseUrl(y),J=this.urlHandlingStrategy.merge(F,this.rawUrlTree);return this.scheduleNavigation(J,rn,null,I)}navigate(y,I={skipLocationChange:!1}){return function Be(h){for(let E=0;E<h.length;E++)if(null==h[E])throw new s.buA(4008,!1)}(y),this.navigateByUrl(this.createUrlTree(y,I),I)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){try{return this.urlSerializer.parse(y)}catch{return this.console.warn((0,s.OsK)(4018,!1)),this.urlSerializer.parse("/")}}isActive(y,I){let F;if(F=!0===I?{...V}:!1===I?{...te}:I,Dr(y))return ln(this.currentUrlTree,y,F);const J=this.parseUrl(y);return ln(this.currentUrlTree,J,F)}removeEmptyProps(y){return Object.entries(y).reduce((I,[F,J])=>(null!=J&&(I[F]=J),I),{})}scheduleNavigation(y,I,F,J,De){if(this.disposed)return Promise.resolve(!1);let qe,gt,Ht;De?(qe=De.resolve,gt=De.reject,Ht=De.promise):Ht=new Promise((mn,pr)=>{qe=mn,gt=pr});const dn=this.pendingTasks.add();return N(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(dn))}),this.navigationTransitions.handleNavigationRequest({source:I,restoredState:F,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:y,extras:J,resolve:qe,reject:gt,promise:Ht,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ht.catch(mn=>Promise.reject(mn))}static \u0275fac=function(I){return new(I||h)};static \u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},5964(Wt,ut,b){"use strict";b.d(ut,{p:()=>S});var s=b(9974),o=b(4360);function S(Pe,Ce){return(0,s.N)((k,Le)=>{let Je=0;k.subscribe((0,o._)(Le,me=>Pe.call(Ce,me,Je++)&&Le.next(me)))})}},6011(Wt,ut,b){"use strict";b.r(ut),b.d(ut,{GESTURE_CONTROLLER:()=>s.G,createGesture:()=>me});var s=b(8607);const o=(p,m,v,_)=>{const D=!!S(p)&&{capture:!1,passive:!!_.passive};let L,K;return p.__zone_symbol__addEventListener?(L="__zone_symbol__addEventListener",K="__zone_symbol__removeEventListener"):(L="addEventListener",K="removeEventListener"),p[L](m,v,D),()=>{p[K](m,v,D)}},S=p=>{if(void 0===Pe)try{const m=Object.defineProperty({},"passive",{get:()=>{Pe=!0}});p.addEventListener("optsTest",()=>{},m)}catch{Pe=!1}return!!Pe};let Pe;const Le=p=>p instanceof Document?p:p.ownerDocument,me=p=>{let m=!1,v=!1,_=!0,D=!1;const L=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},p),K=L.canStart,ae=L.onWillStart,B=L.onStart,Z=L.onEnd,G=L.notCaptured,he=L.onMove,fe=L.threshold,_e=L.passive,Re=L.blurOnStart,ve={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Ye=((p,m,v)=>{const _=v*(Math.PI/180),D="x"===p,L=Math.cos(_),K=m*m;let ae=0,B=0,Z=!1,G=0;return{start(he,fe){ae=he,B=fe,G=0,Z=!0},detect(he,fe){if(!Z)return!1;const _e=he-ae,Re=fe-B,ve=_e*_e+Re*Re;if(ve<K)return!1;const Ye=Math.sqrt(ve),ge=(D?_e:Re)/Ye;return G=ge>L?1:ge<-L?-1:0,Z=!1,!0},isGesture:()=>0!==G,getDirection:()=>G}})(L.direction,L.threshold,L.maxAngle),ge=s.G.createGesture({name:p.gestureName,priority:p.gesturePriority,disableScroll:p.disableScroll}),Fe=()=>{m&&(D=!1,he&&he(ve))},xe=()=>!!ge.capture()&&(m=!0,_=!1,ve.startX=ve.currentX,ve.startY=ve.currentY,ve.startTime=ve.currentTime,ae?ae(ve).then(Ve):Ve(),!0),Ve=()=>{Re&&(()=>{if(typeof document<"u"){const He=document.activeElement;He?.blur&&He.blur()}})(),B&&B(ve),_=!0},Ae=()=>{m=!1,v=!1,D=!1,_=!0,ge.release()},H=He=>{const ot=m,pt=_;if(Ae(),pt){if(ie(ve,He),ot)return void(Z&&Z(ve));G&&G(ve)}},ye=((p,m,v,_,D)=>{let L,K,ae,B,Z,G,he,fe=0;const _e=rt=>{fe=Date.now()+2e3,m(rt)&&(!K&&v&&(K=o(p,"touchmove",v,D)),ae||(ae=o(rt.target,"touchend",ve,D)),B||(B=o(rt.target,"touchcancel",ve,D)))},Re=rt=>{fe>Date.now()||m(rt)&&(!G&&v&&(G=o(Le(p),"mousemove",v,D)),he||(he=o(Le(p),"mouseup",Ye,D)))},ve=rt=>{ge(),_&&_(rt)},Ye=rt=>{nt(),_&&_(rt)},ge=()=>{K&&K(),ae&&ae(),B&&B(),K=ae=B=void 0},nt=()=>{G&&G(),he&&he(),G=he=void 0},ze=()=>{ge(),nt()},Fe=(rt=!0)=>{rt?(L||(L=o(p,"touchstart",_e,D)),Z||(Z=o(p,"mousedown",Re,D))):(L&&L(),Z&&Z(),L=Z=void 0,ze())};return{enable:Fe,stop:ze,destroy:()=>{Fe(!1),_=v=m=void 0}}})(L.el,He=>{const ot=l(He);return!(v||!_||(we(He,ve),ve.startX=ve.currentX,ve.startY=ve.currentY,ve.startTime=ve.currentTime=ot,ve.velocityX=ve.velocityY=ve.deltaX=ve.deltaY=0,ve.event=He,K&&!1===K(ve))||(ge.release(),!ge.start()))&&(v=!0,0===fe?xe():(Ye.start(ve.startX,ve.startY),!0))},He=>{m?!D&&_&&(D=!0,ie(ve,He),requestAnimationFrame(Fe)):(ie(ve,He),Ye.detect(ve.currentX,ve.currentY)&&(!Ye.isGesture()||!xe())&&Me())},H,{passive:_e}),Me=()=>{Ae(),ye.stop(),G&&G(ve)};return{enable(He=!0){He||(m&&H(void 0),Ae()),ye.enable(He)},destroy(){ge.destroy(),ye.destroy()}}},ie=(p,m)=>{if(!m)return;const v=p.currentX,_=p.currentY,D=p.currentTime;we(m,p);const L=p.currentX,K=p.currentY,B=(p.currentTime=l(m))-D;if(B>0&&B<100){const G=(K-_)/B;p.velocityX=(L-v)/B*.7+.3*p.velocityX,p.velocityY=.7*G+.3*p.velocityY}p.deltaX=L-p.startX,p.deltaY=K-p.startY,p.event=m},we=(p,m)=>{let v=0,_=0;if(p){const D=p.changedTouches;if(D&&D.length>0){const L=D[0];v=L.clientX,_=L.clientY}else void 0!==p.pageX&&(v=p.pageX,_=p.pageY)}m.currentX=v,m.currentY=_},l=p=>p.timeStamp||Date.now()},6031(Wt,ut,b){"use strict";b.d(ut,{L:()=>o,a:()=>S,b:()=>Pe,c:()=>Ce,d:()=>k,g:()=>ze}),b(7837);const o="ionViewWillEnter",S="ionViewDidEnter",Pe="ionViewWillLeave",Ce="ionViewDidLeave",k="ionViewWillUnload",ze=xe=>xe.classList.contains("ion-page")?xe:xe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||xe},6118(Wt,ut,b){"use strict";b.d(ut,{C:()=>Ce,a:()=>S,d:()=>Pe});var s=b(467),o=b(4674);const S=function(){var k=(0,s.A)(function*(Le,Je,me,ie,we,l){var p;if(Le)return Le.attachViewToDom(Je,me,we,ie);if(!(l||"string"==typeof me||me instanceof HTMLElement))throw new Error("framework delegate is missing");const m="string"==typeof me?null===(p=Je.ownerDocument)||void 0===p?void 0:p.createElement(me):me;return ie&&ie.forEach(v=>m.classList.add(v)),we&&Object.assign(m,we),Je.appendChild(m),yield new Promise(v=>(0,o.c)(m,v)),m});return function(Je,me,ie,we,l,p){return k.apply(this,arguments)}}(),Pe=(k,Le)=>{if(Le){if(k)return k.removeViewFromDom(Le.parentElement,Le);Le.remove()}return Promise.resolve()},Ce=()=>{let k,Le;return{attachViewToDom:function(){var ie=(0,s.A)(function*(we,l,p={},m=[]){var v,_;let D;if(k=we,l){const K="string"==typeof l?null===(v=k.ownerDocument)||void 0===v?void 0:v.createElement(l):l;m.forEach(ae=>K.classList.add(ae)),Object.assign(K,p),k.appendChild(K),D=K,yield new Promise(ae=>(0,o.c)(K,ae))}else if(k.children.length>0&&("ION-MODAL"===k.tagName||"ION-POPOVER"===k.tagName)&&!(D=k.children[0]).classList.contains("ion-delegate-host")){const ae=null===(_=k.ownerDocument)||void 0===_?void 0:_.createElement("div");ae.classList.add("ion-delegate-host"),m.forEach(B=>ae.classList.add(B)),ae.append(...k.children),k.appendChild(ae),D=ae}const L=document.querySelector("ion-app")||document.body;return Le=document.createComment("ionic teleport"),k.parentNode.insertBefore(Le,k),L.appendChild(k),D??k});return function(l,p){return ie.apply(this,arguments)}}(),removeViewFromDom:()=>(k&&Le&&(Le.parentNode.insertBefore(k,Le),Le.remove()),Promise.resolve())}}},6120(Wt,ut,b){var s={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,2076,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,944,7428],"./ion-datetime_3.entry.js":[2885,944,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input-otp.entry.js":[7676,2076,7676],"./ion-input-password-toggle.entry.js":[6521,2076,6521],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,2076,5712],"./ion-picker-column-option.entry.js":[9013,9013],"./ion-picker-column.entry.js":[1459,2076,1459],"./ion-picker.entry.js":[6840,6840],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment-content.entry.js":[9073,9073],"./ion-segment-view.entry.js":[323,2076,323],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select-modal.entry.js":[770,770],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function o(S){if(!b.o(s,S))return Promise.resolve().then(()=>{var k=new Error("Cannot find module '"+S+"'");throw k.code="MODULE_NOT_FOUND",k});var Pe=s[S],Ce=Pe[0];return Promise.all(Pe.slice(1).map(b.e)).then(()=>b(Ce))}o.keys=()=>Object.keys(s),o.id=6120,Wt.exports=o},6129(Wt,ut,b){"use strict";b.d(ut,{U:()=>s});const s={now:()=>(s.delegate||Date).now(),delegate:void 0}},6201(Wt,ut,b){"use strict";b.d(ut,{s:()=>Je});var s=b(467),o=b(2084),S=b(2615),Pe=b(918),Ce=b(5029),k=b(4938),Le=b(8863);let Je=(()=>{var me;class ie{constructor(l,p,m,v){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=v,this.REPORTS_BUCKET="disturbances",this.IMAGES_BUCKET="disturbances-images",this.DRAFT_FILE="disturbances_draft_current.json",this.PENDING_QUEUE_FILE="disturbances_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} DisturbancesSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} DisturbancesSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(_=>console.error("\u274c DisturbancesSyncService: processPendingQueue failed:",_))}),setTimeout(()=>{console.log("\u{1f680} DisturbancesSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(_=>console.error("\u274c DisturbancesSyncService: Initial queue check failed:",_))},3e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 DisturbancesSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(_=>console.error("\u274c DisturbancesSyncService: Periodic queue check failed:",_))},3e5),console.log("\u2705 DisturbancesSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}getZoneName(l){return l?`Zone ${l}`:""}getQuadDisplay(l){if(!l)return"";const p=l.match(/\d+/);return p?`Quad ${p[0]}`:""}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Disturbances${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];return l?.harvestBiodiversity&&m.push("harvesting"),l?.clearingMangroves&&m.push(`clearing ${l.clearingMangroves}`),l?.ongoingConstruction&&m.push("construction"),l?.fallenTree&&m.push("fallen tree"),l?.bankErosion&&m.push("erosion"),l?.accretion&&m.push("accretion"),l?.diseases&&m.push("diseases"),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"disturbances"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",v=l?.quadNumber||"";let _=`disturbances_draft_${p}`;return m&&(_+=`_zone${m}`),v&&(_+=`_quad${v}`),`${_}.json`}dataUrlToBlob(l){return(0,s.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,s.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,s.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("DisturbancesSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=l.reportId||p.generateReportId(),_={reportId:v,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos,status:l.status||{incomplete:!0,sent:!1,pending:!1}},D=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(D,_);const L=yield p.sharedDataService.readJsonFile(D);if(!L||L.reportId!==_.reportId)throw new Error("DisturbancesSyncService: draft verification failed");const K=yield p.storage.getUser(),ae=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(K?.username||"unknown","disturbances",v,ae)})()}loadDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,s.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(_=>_.startsWith("disturbances_draft_")),v=[];for(const _ of m)try{const D=yield l.sharedDataService.readJsonFile(_);if(D){const L=l.getLocationLabelFromFilename(_,D.form);v.push({draft:D,locationLabel:L})}}catch(D){console.warn("DisturbancesSyncService: Failed to read draft file",_,D)}return v})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,s.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,s.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:v}of m)p.push({report:v,status:"draft"});try{const _=(yield l.sharedDataService.listFiles()).filter(D=>{if(!D.startsWith("Disturbances")||D.includes("_report_"))return!1;const L=D.replace(".json","");return/^Disturbances\d{8}_\d{6}$/.test(L)&&!D.includes("_backup")&&!D.includes("_draft")&&!D.includes("_queue")});for(const D of _)try{const L=yield l.sharedDataService.readJsonFile(D);L&&p.push({report:L,status:L.status.sent?"submitted":"pending"})}catch(L){console.warn("DisturbancesSyncService: Failed to read report file",D,L)}}catch(v){console.error("DisturbancesSyncService: Failed to list files:",v)}return p.sort((v,_)=>{const D=new Date(v.report.updatedAt||v.report.createdAt).getTime();return new Date(_.report.updatedAt||_.report.createdAt).getTime()-D}),p})()}submitFinal(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=!0===l.isEditMode,_=l.existingReportId||p.generateReportId(),D={reportId:_,createdAt:m,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:{harvest:l.photos.harvest||null,clearing:l.photos.clearing||null,construction:l.photos.construction||null,fallenTree:l.photos.fallenTree||null,erosion:l.photos.erosion||null,accretion:l.photos.accretion||null,diseases:l.photos.diseases||null},status:{incomplete:!1,sent:!1,pending:!1}};v&&(D.editedAt=m);const L=`${_}.json`;yield p.sharedDataService.writeJsonFile(L,D);const K=yield p.sharedDataService.readJsonFile(L);if(!K||K.reportId!==_)throw new Error("DisturbancesSyncService: local report verification failed");const ae=yield p.storage.getUser(),B=ae?ae.organization||ae.username:null;let Z;if(l.originalSubmittedBy&&B&&l.originalSubmittedBy!==B?Z=`${l.originalSubmittedBy}, ${B}`:B&&(Z=B),D.submittedBy=Z,yield p.sharedDataService.writeJsonFile(L,D),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:_,localReportFile:L}),{reportId:_,queued:!0};try{yield p.uploadReportAndImages(D,l.originalSubmittedBy),D.status.sent=!0,D.status.pending=!1,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.clearDraft();const fe=(yield p.storage.getUser())?.username||"unknown",_e=p.getFormSummary(l.formValue),Re=D.submittedBy;return v?p.monitoringLog.recordFormEdited(fe,"disturbances",_,!1,_e,Re):p.monitoringLog.recordFormSubmitted(fe,"disturbances",_,!1,_e,Re),{reportId:_,queued:!1}}catch(he){const fe=String(he?.message?he.message:he);D.status.pending=!0,D.status.lastError=fe,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.enqueuePending({reportId:_,localReportFile:L});const Re=(yield p.storage.getUser())?.username||"unknown",ve=p.getFormSummary(l.formValue),Ye=D.submittedBy;return v?p.monitoringLog.recordFormEdited(Re,"disturbances",_,!0,ve,Ye):p.monitoringLog.recordFormSubmitted(Re,"disturbances",_,!0,ve,Ye),{reportId:_,queued:!0}}})()}enqueuePending(l){var p=this;return(0,s.A)(function*(){console.log("\u{1f4dd} DisturbancesSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(_=>_.reportId===l.reportId)?console.log("\u26a0\ufe0f DisturbancesSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 DisturbancesSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} DisturbancesSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,s.A)(function*(){if(console.log("\u{1f504} DisturbancesSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f DisturbancesSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f DisturbancesSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} DisturbancesSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 DisturbancesSyncService: Queue is empty, nothing to process");const m=[];for(const v of p.items){console.log("\u{1f50d} DisturbancesSyncService: Processing item:",v.reportId,"(attempt",v.attempts+1,")");try{const _=yield l.sharedDataService.readJsonFile(v.localReportFile);if(!_){console.error("\u274c DisturbancesSyncService: Local report file missing for",v.reportId),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(_),console.log("\u2705 DisturbancesSyncService: Upload succeeded for",v.reportId),_.status.sent=!0,_.status.pending=!1,_.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(v.localReportFile,_),console.log("\u{1f4be} DisturbancesSyncService: Marked report as sent")}catch(_){console.error("\u274c DisturbancesSyncService: Upload failed for",v.reportId,":",_),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} DisturbancesSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} DisturbancesSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,s.A)(function*(){console.log("\u{1f4e4} DisturbancesSyncService: Starting upload for report",l.reportId);const v=m.getClient(),_={};l.photos.harvest&&(_.harvest=yield m.uploadImageDataUrl(`${l.reportId}/harvest.jpg`,l.photos.harvest)),l.photos.clearing&&(_.clearing=yield m.uploadImageDataUrl(`${l.reportId}/clearing.jpg`,l.photos.clearing)),l.photos.construction&&(_.construction=yield m.uploadImageDataUrl(`${l.reportId}/construction.jpg`,l.photos.construction)),l.photos.fallenTree&&(_.fallenTree=yield m.uploadImageDataUrl(`${l.reportId}/fallenTree.jpg`,l.photos.fallenTree)),l.photos.erosion&&(_.erosion=yield m.uploadImageDataUrl(`${l.reportId}/erosion.jpg`,l.photos.erosion)),l.photos.accretion&&(_.accretion=yield m.uploadImageDataUrl(`${l.reportId}/accretion.jpg`,l.photos.accretion)),l.photos.diseases&&(_.diseases=yield m.uploadImageDataUrl(`${l.reportId}/diseases.jpg`,l.photos.diseases));const D=JSON.parse(JSON.stringify(l));D.photos=_,D.status={incomplete:!1,sent:!0,pending:!1};const L=`${l.reportId}.json`,K=new Blob([JSON.stringify(D)],{type:"application/json"}),{error:ae}=yield v.storage.from(m.REPORTS_BUCKET).upload(L,K,{contentType:"application/json",upsert:!0});if(ae)throw console.error("\u274c DisturbancesSyncService: JSON upload error:",ae),ae;console.log("\u2705 DisturbancesSyncService: Successfully uploaded JSON to",L);const B=yield m.storage.getUser(),Z=B?B.organization||B.username:null;let G;G=p&&Z&&p!==Z?`${p}, ${Z}`:Z;const he={report_id:l.reportId,submitted_by:G,json_path:L,location:l.form.location||null,report_date:l.form.reportDate||null,zone_number:m.getZoneName(l.form.zoneNumber)||null,quad_number:m.getQuadDisplay(l.form.quadNumber)||null,requires_urgent_action:l.form.requiresUrgentAction||!1,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:fe}=yield v.from("disturbances_reports").upsert(he,{onConflict:"report_id"});if(fe)throw console.error("\u274c DisturbancesSyncService: Database upsert error:",fe),fe;console.log("\u2705 DisturbancesSyncService: Successfully upserted into disturbances_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,s.A)(function*(){const v=m.getClient(),_=yield m.dataUrlToBlob(p),{error:D}=yield v.storage.from(m.IMAGES_BUCKET).upload(l,_,{contentType:_.type||"image/jpeg",upsert:!0});if(D)throw console.error("\u274c DisturbancesSyncService: Image upload error for",l,":",D),D;return console.log("\u2705 DisturbancesSyncService: Successfully uploaded image to",l),l})()}static#e=me=()=>(this.\u0275fac=function(p){return new(p||ie)(S.KVO(Pe.H),S.KVO(Ce.L),S.KVO(k.w),S.KVO(Le.u))},this.\u0275prov=S.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return me(),ie})()},6354(Wt,ut,b){"use strict";b.d(ut,{T:()=>S});var s=b(9974),o=b(4360);function S(Pe,Ce){return(0,s.N)((k,Le)=>{let Je=0;k.subscribe((0,o._)(Le,me=>{Le.next(Pe.call(Ce,me,Je++))}))})}},6358(Wt,ut,b){"use strict";b.d(ut,{T:()=>Je});var s=b(467),o=b(2084),S=b(2615),Pe=b(918),Ce=b(5029),k=b(4938),Le=b(8863);let Je=(()=>{var me;class ie{constructor(l,p,m,v){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=v,this.REPORTS_BUCKET="restoration",this.IMAGES_BUCKET="restoration-images",this.DRAFT_FILE="restoration_draft_current.json",this.PENDING_QUEUE_FILE="restoration_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} RestorationSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} RestorationSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(_=>console.error("\u274c RestorationSyncService: processPendingQueue failed:",_))}),setTimeout(()=>{console.log("\u{1f680} RestorationSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(_=>console.error("\u274c RestorationSyncService: Initial queue check failed:",_))},7e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 RestorationSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(_=>console.error("\u274c RestorationSyncService: Periodic queue check failed:",_))},3e5),console.log("\u2705 RestorationSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Restoration${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];(l?.site||l?.location)&&p.push(l.site||l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];if(l?.seedCollection&&Array.isArray(l.seedCollection)){const v=l.seedCollection.reduce((_,D)=>_+(D||0),0);v>0&&m.push(`${v} collected`)}if(l?.seedsSowed&&Array.isArray(l.seedsSowed)){const v=l.seedsSowed.reduce((_,D)=>_+(D||0),0);v>0&&m.push(`${v} sowed`)}if(l?.outplanting&&Array.isArray(l.outplanting)){const v=l.outplanting.reduce((_,D)=>_+(D||0),0);v>0&&m.push(`${v} outplanted`)}return l?.averageGrowth>0&&m.push(`Growth: ${l.averageGrowth}cm`),l?.deadTrees>0&&m.push(`${l.deadTrees} dead`),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"restoration"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",v=l?.quadNumber||"";let _=`restoration_draft_${p}`;return m&&(_+=`_zone${m}`),v&&(_+=`_quad${v}`),`${_}.json`}dataUrlToBlob(l){return(0,s.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,s.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,s.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("RestorationSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=l.reportId||p.generateReportId(),_={reportId:v,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos||[],status:l.status||{incomplete:!0,sent:!1,pending:!1}},D=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(D,_);const L=yield p.sharedDataService.readJsonFile(D);if(!L||L.reportId!==_.reportId)throw new Error("RestorationSyncService: draft verification failed");const K=yield p.storage.getUser(),ae=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(K?.username||"unknown","restoration",v,ae)})()}loadDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,s.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(_=>_.startsWith("restoration_draft_")),v=[];for(const _ of m)try{const D=yield l.sharedDataService.readJsonFile(_);if(D){const L=l.getLocationLabelFromFilename(_,D.form);v.push({draft:D,locationLabel:L})}}catch(D){console.warn("RestorationSyncService: Failed to read draft file",_,D)}return v})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,s.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,s.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:v}of m)p.push({report:v,status:"draft"});try{const _=(yield l.sharedDataService.listFiles()).filter(D=>{if(!D.startsWith("Restoration")||D.includes("_report_"))return!1;const L=D.replace(".json","");return/^Restoration\d{8}_\d{6}$/.test(L)&&!D.includes("_backup")&&!D.includes("_draft")&&!D.includes("_queue")});for(const D of _)try{const L=yield l.sharedDataService.readJsonFile(D);L&&p.push({report:L,status:L.status.sent?"submitted":"pending"})}catch(L){console.warn("RestorationSyncService: Failed to read report file",D,L)}}catch(v){console.error("RestorationSyncService: Failed to list files:",v)}return p.sort((v,_)=>{const D=new Date(v.report.updatedAt||v.report.createdAt).getTime();return new Date(_.report.updatedAt||_.report.createdAt).getTime()-D}),p})()}submitFinal(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=!0===l.isEditMode,_=l.existingReportId||p.generateReportId(),D={reportId:_,createdAt:m,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:[...l.photos||[]],status:{incomplete:!1,sent:!1,pending:!1},project_key:l.project_key,sequence_number:l.sequence_number||1,parent_report_id:l.parent_report_id,is_ongoing:void 0===l.is_ongoing||l.is_ongoing};v&&(D.editedAt=m);const L=`${_}.json`;yield p.sharedDataService.writeJsonFile(L,D);const K=yield p.sharedDataService.readJsonFile(L);if(!K||K.reportId!==_)throw new Error("RestorationSyncService: local report verification failed");const ae=yield p.storage.getUser(),B=ae?ae.organization||ae.username:null;let Z;if(l.originalSubmittedBy&&B&&l.originalSubmittedBy!==B?Z=`${l.originalSubmittedBy}, ${B}`:B&&(Z=B),D.submittedBy=Z,yield p.sharedDataService.writeJsonFile(L,D),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:_,localReportFile:L}),{reportId:_,queued:!0};try{yield p.uploadReportAndImages(D,l.originalSubmittedBy),D.status.sent=!0,D.status.pending=!1,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.clearDraft();const fe=(yield p.storage.getUser())?.username||"unknown",_e=p.getFormSummary(l.formValue),Re=D.submittedBy;return v?p.monitoringLog.recordFormEdited(fe,"restoration",_,!1,_e,Re):p.monitoringLog.recordFormSubmitted(fe,"restoration",_,!1,_e,Re),{reportId:_,queued:!1}}catch(he){const fe=String(he?.message?he.message:he);D.status.pending=!0,D.status.lastError=fe,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.enqueuePending({reportId:_,localReportFile:L});const Re=(yield p.storage.getUser())?.username||"unknown",ve=p.getFormSummary(l.formValue),Ye=D.submittedBy;return v?p.monitoringLog.recordFormEdited(Re,"restoration",_,!0,ve,Ye):p.monitoringLog.recordFormSubmitted(Re,"restoration",_,!0,ve,Ye),{reportId:_,queued:!0}}})()}enqueuePending(l){var p=this;return(0,s.A)(function*(){console.log("\u{1f4dd} RestorationSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(_=>_.reportId===l.reportId)?console.log("\u26a0\ufe0f RestorationSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 RestorationSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} RestorationSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,s.A)(function*(){if(console.log("\u{1f504} RestorationSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f RestorationSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f RestorationSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} RestorationSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 RestorationSyncService: Queue is empty, nothing to process");const m=[];for(const v of p.items){console.log("\u{1f50d} RestorationSyncService: Processing item:",v.reportId,"(attempt",v.attempts+1,")");try{const _=yield l.sharedDataService.readJsonFile(v.localReportFile);if(!_){console.error("\u274c RestorationSyncService: Local report file missing for",v.reportId),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(_),console.log("\u2705 RestorationSyncService: Upload succeeded for",v.reportId),_.status.sent=!0,_.status.pending=!1,_.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(v.localReportFile,_),console.log("\u{1f4be} RestorationSyncService: Marked report as sent")}catch(_){console.error("\u274c RestorationSyncService: Upload failed for",v.reportId,":",_),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} RestorationSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} RestorationSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,s.A)(function*(){console.log("\u{1f4e4} RestorationSyncService: Starting upload for report",l.reportId);const v=m.getClient(),_=[];for(let _e=0;_e<(l.photos||[]).length;_e++){const Re=l.photos[_e],ve=yield m.uploadImageDataUrl(`${l.reportId}/photo_${_e+1}.jpg`,Re);_.push(ve)}const D=JSON.parse(JSON.stringify(l));D.photos=_,D.status={incomplete:!1,sent:!0,pending:!1};const L=`${l.reportId}.json`,K=new Blob([JSON.stringify(D)],{type:"application/json"}),{error:ae}=yield v.storage.from(m.REPORTS_BUCKET).upload(L,K,{contentType:"application/json",upsert:!0});if(ae)throw console.error("\u274c RestorationSyncService: JSON upload error:",ae),ae;console.log("\u2705 RestorationSyncService: Successfully uploaded JSON to",L);const B=yield m.storage.getUser(),Z=B?B.organization||B.username:null;let G;G=p&&Z&&p!==Z?`${p}, ${Z}`:Z;const he={report_id:l.reportId,submitted_by:G,json_path:L,location:l.form.site||null,restoration_date:l.form.date||null,zone_number:l.form.zoneNumber?`Zone ${l.form.zoneNumber}`:null,quad_number:l.form.quadNumber?`Quad ${l.form.quadNumber.replace(/\D/g,"")}`:null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null,project_key:l.project_key||null,sequence_number:l.sequence_number||1,parent_report_id:l.parent_report_id||null,is_ongoing:void 0===l.is_ongoing||l.is_ongoing},{error:fe}=yield v.from("restoration_reports").upsert(he,{onConflict:"report_id"});if(fe)throw console.error("\u274c RestorationSyncService: Database upsert error:",fe),fe;console.log("\u2705 RestorationSyncService: Successfully upserted into restoration_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,s.A)(function*(){const v=m.getClient(),_=yield m.dataUrlToBlob(p),{error:D}=yield v.storage.from(m.IMAGES_BUCKET).upload(l,_,{contentType:_.type||"image/jpeg",upsert:!0});if(D)throw console.error("\u274c RestorationSyncService: Image upload error for",l,":",D),D;return console.log("\u2705 RestorationSyncService: Successfully uploaded image to",l),l})()}static#e=me=()=>(this.\u0275fac=function(p){return new(p||ie)(S.KVO(Pe.H),S.KVO(Ce.L),S.KVO(k.w),S.KVO(Le.u))},this.\u0275prov=S.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return me(),ie})()},6365(Wt,ut,b){"use strict";b.d(ut,{U:()=>S});var s=b(1397),o=b(3669);function S(Pe=1/0){return(0,s.Z)(o.D,Pe)}},6450(Wt,ut,b){"use strict";b.d(ut,{I:()=>Pe});var s=b(6354);const{isArray:o}=Array;function Pe(Ce){return(0,s.T)(k=>function S(Ce,k){return o(k)?Ce(...k):Ce(k)}(Ce,k))}},6528(){},6648(Wt,ut,b){"use strict";b.d(ut,{H:()=>he});var s=b(8750),o=b(5225),S=b(9974),Pe=b(4360);function Ce(fe,_e=0){return(0,S.N)((Re,ve)=>{Re.subscribe((0,Pe._)(ve,Ye=>(0,o.N)(ve,fe,()=>ve.next(Ye),_e),()=>(0,o.N)(ve,fe,()=>ve.complete(),_e),Ye=>(0,o.N)(ve,fe,()=>ve.error(Ye),_e)))})}function k(fe,_e=0){return(0,S.N)((Re,ve)=>{ve.add(fe.schedule(()=>Re.subscribe(ve),_e))})}var me=b(1985),we=b(4761),l=b(8071);function m(fe,_e){if(!fe)throw new Error("Iterable cannot be null");return new me.c(Re=>{(0,o.N)(Re,_e,()=>{const ve=fe[Symbol.asyncIterator]();(0,o.N)(Re,_e,()=>{ve.next().then(Ye=>{Ye.done?Re.complete():Re.next(Ye.value)})},0,!0)})})}var v=b(5055),_=b(9858),D=b(7441),L=b(5397),K=b(7953),ae=b(591),B=b(5196);function he(fe,_e){return _e?function G(fe,_e){if(null!=fe){if((0,v.l)(fe))return function Le(fe,_e){return(0,s.Tg)(fe).pipe(k(_e),Ce(_e))}(fe,_e);if((0,D.X)(fe))return function ie(fe,_e){return new me.c(Re=>{let ve=0;return _e.schedule(function(){ve===fe.length?Re.complete():(Re.next(fe[ve++]),Re.closed||this.schedule())})})}(fe,_e);if((0,_.y)(fe))return function Je(fe,_e){return(0,s.Tg)(fe).pipe(k(_e),Ce(_e))}(fe,_e);if((0,K.T)(fe))return m(fe,_e);if((0,L.x)(fe))return function p(fe,_e){return new me.c(Re=>{let ve;return(0,o.N)(Re,_e,()=>{ve=fe[we.l](),(0,o.N)(Re,_e,()=>{let Ye,ge;try{({value:Ye,done:ge}=ve.next())}catch(nt){return void Re.error(nt)}ge?Re.complete():Re.next(Ye)},0,!0)}),()=>(0,l.T)(ve?.return)&&ve.return()})}(fe,_e);if((0,B.U)(fe))return function Z(fe,_e){return m((0,B.C)(fe),_e)}(fe,_e)}throw(0,ae.L)(fe)}(fe,_e):(0,s.Tg)(fe)}},6697(Wt,ut,b){"use strict";b.d(ut,{s:()=>Pe});var s=b(983),o=b(9974),S=b(4360);function Pe(Ce){return Ce<=0?()=>s.w:(0,o.N)((k,Le)=>{let Je=0;k.subscribe((0,S._)(Le,me=>{++Je<=Ce&&(Le.next(me),Ce<=Je&&Le.complete())}))})}},6855(Wt,ut,b){"use strict";b.d(ut,{a:()=>S,b:()=>fe,i:()=>_e});var s=b(5705);const S=(Re,ve)=>("string"==typeof Re&&(ve=Re,Re=void 0),(Re=>Pe(Re))(Re).includes(ve)),Pe=(Re=window)=>{if(typeof Re>"u")return[];Re.Ionic=Re.Ionic||{};let ve=Re.Ionic.platforms;return null==ve&&(ve=Re.Ionic.platforms=Ce(Re),ve.forEach(Ye=>Re.document.documentElement.classList.add(`plt-${Ye}`))),ve},Ce=Re=>{const ve=s.e.get("platform");return Object.keys(G).filter(Ye=>{const ge=ve?.[Ye];return"function"==typeof ge?ge(Re):G[Ye](Re)})},Le=Re=>!!(B(Re,/iPad/i)||B(Re,/Macintosh/i)&&m(Re)),ie=Re=>B(Re,/android|sink/i),m=Re=>Z(Re,"(any-pointer:coarse)"),_=Re=>D(Re)||L(Re),D=Re=>!!(Re.cordova||Re.phonegap||Re.PhoneGap),L=Re=>{const ve=Re.Capacitor;return!!(ve?.isNative||ve?.isNativePlatform&&ve.isNativePlatform())},B=(Re,ve)=>ve.test(Re.navigator.userAgent),Z=(Re,ve)=>{var Ye;return null===(Ye=Re.matchMedia)||void 0===Ye?void 0:Ye.call(Re,ve).matches},G={ipad:Le,iphone:Re=>B(Re,/iPhone/i),ios:Re=>B(Re,/iPhone|iPod/i)||Le(Re),android:ie,phablet:Re=>{const ve=Re.innerWidth,Ye=Re.innerHeight,ge=Math.min(ve,Ye),nt=Math.max(ve,Ye);return ge>390&&ge<520&&nt>620&&nt<800},tablet:Re=>{const ve=Re.innerWidth,Ye=Re.innerHeight,ge=Math.min(ve,Ye),nt=Math.max(ve,Ye);return Le(Re)||(Re=>ie(Re)&&!B(Re,/mobile/i))(Re)||ge>460&&ge<820&&nt>780&&nt<1400},cordova:D,capacitor:L,electron:Re=>B(Re,/electron/i),pwa:Re=>{var ve;return!!(null!==(ve=Re.matchMedia)&&void 0!==ve&&ve.call(Re,"(display-mode: standalone)").matches||Re.navigator.standalone)},mobile:m,mobileweb:Re=>m(Re)&&!_(Re),desktop:Re=>!m(Re),hybrid:_};let he;const fe=Re=>Re&&(0,s.o)(Re)||he,_e=(Re={})=>{if(typeof window>"u")return;const ve=window.document,Ye=window,ge=Ye.Ionic=Ye.Ionic||{},nt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,s.l)(Ye)),{persistConfig:!1}),ge.config),(0,s.m)(Ye)),Re);s.e.reset(nt),s.e.getBoolean("persistConfig")&&(0,s.n)(Ye,nt),Pe(Ye),ge.config=s.e,ge.mode=he=s.e.get("mode",ve.documentElement.getAttribute("mode")||(S(Ye,"ios")?"ios":"md")),s.e.set("mode",he),ve.documentElement.setAttribute("mode",he),ve.documentElement.classList.add(he),s.e.getBoolean("_testing")&&s.e.set("animated",!1);const ze=xe=>{var rt;return null===(rt=xe.tagName)||void 0===rt?void 0:rt.startsWith("ION-")},Fe=xe=>["ios","md"].includes(xe);(0,s.q)(xe=>{for(;xe;){const rt=xe.mode||xe.getAttribute("mode");if(rt){if(Fe(rt))return rt;ze(xe)&&(0,s.f)('Invalid ionic mode: "'+rt+'", expected: "ios" or "md"')}xe=xe.parentElement}return he})}},7223(Wt,ut,b){"use strict";b.d(ut,{U:()=>l});var s=b(467),o=b(2084),S=b(4412),Pe=b(2615),Ce=b(5029),k=b(4938),Le=b(918),Je=b(3205),me=b(7643),ie=b(4356),we=b(8863);let l=(()=>{var p;class m{constructor(_,D,L,K,ae,B,Z){this.supabaseService=_,this.storage=D,this.sharedDataService=L,this.auth=K,this.siteSyncService=ae,this.speciesSyncService=B,this.monitoringLogService=Z,this.syncProgress$=new S.t([]),this.CLIENT=this.supabaseService.getClient()}getSyncProgress(){return this.syncProgress$.asObservable()}downloadAllAccountData(){var _=this;return(0,s.A)(function*(){const D=_.auth.getCurrentUser();if(!D)throw new Error("User not authenticated");console.log("\u{1f680} AccountSyncService: Starting full account data download");const L=Date.now(),K=D.level||1,ae=_.isDesktopDevice(),B=K>=4&&ae;console.log(`\u{1f4cb} AccountSyncService: User level ${K}, Desktop: ${ae}, Privileged Access: ${B}`),console.log(`\u{1f5a5}\ufe0f AccountSyncService: Device details - UserAgent: ${navigator.userAgent}, Screen: ${window.screen.width}x${window.screen.height}, Platform: ${navigator.platform}`);const Z=_.getAccessibleServices(K);console.log("\u{1f50d} AccountSyncService: Accessible services:",Z);const G=[],he=[];let fe=0;for(const ve of Z){const Ye={service:ve,total:0,downloaded:0,status:"pending"};G.push(Ye);try{Ye.status="downloading",_.updateProgress(G);const ge=yield _.downloadServiceData(ve,D.organization||D.username,B);Ye.downloaded=ge,Ye.total=ge,Ye.status="completed",fe+=ge,console.log(`\u2705 AccountSyncService: ${ve} - Downloaded ${ge} items`)}catch(ge){Ye.status="error",Ye.error=ge instanceof Error?ge.message:String(ge),he.push(`${ve}: ${Ye.error}`),console.error(`\u274c AccountSyncService: ${ve} - Error:`,ge)}_.updateProgress(G)}if(B||(yield _.cleanupNonAccessibleServiceFiles(Z,D.organization||D.username)),K>=4)try{console.log("\u{1f504} AccountSyncService: Syncing sites for L4 users"),yield _.siteSyncService.forceSync(),G.push({service:"sites",total:1,downloaded:1,status:"completed"}),fe+=1,console.log("\u2705 AccountSyncService: Sites synced successfully")}catch(ve){console.error("\u274c AccountSyncService: Site sync failed:",ve),he.push("Site sync failed: "+(ve instanceof Error?ve.message:"Unknown error"));const Ye={service:"sites",total:0,downloaded:0,status:"error",error:ve instanceof Error?ve.message:"Unknown error"};G.push(Ye)}try{console.log("\u{1f33f} AccountSyncService: Syncing species"),yield _.speciesSyncService.forceSync(),G.push({service:"species",total:1,downloaded:1,status:"completed"}),fe+=1,console.log("\u2705 AccountSyncService: Species synced successfully")}catch(ve){console.error("\u274c AccountSyncService: Species sync failed:",ve),he.push("Species sync failed: "+(ve instanceof Error?ve.message:"Unknown error"));const Ye={service:"species",total:0,downloaded:0,status:"error",error:ve instanceof Error?ve.message:"Unknown error"};G.push(Ye)}try{console.log("\u{1f4cb} AccountSyncService: Uploading monitoring logs to server"),yield _.monitoringLogService.uploadToServer(),console.log("\u2705 AccountSyncService: Monitoring logs uploaded")}catch(ve){console.warn("\u26a0\ufe0f AccountSyncService: Monitoring log upload failed:",ve)}if(B)try{console.log("\u{1f4e5} AccountSyncService: Downloading all device monitoring logs (L4 desktop)"),yield _.monitoringLogService.downloadAllDeviceLogs(),console.log("\u2705 AccountSyncService: All device monitoring logs downloaded")}catch(ve){console.warn("\u26a0\ufe0f AccountSyncService: Monitoring log download failed:",ve)}const _e=Date.now()-L,Re={success:0===he.length,totalDownloaded:fe,services:G,errors:he,isPrivilegedAccess:B,isDesktopAccess:ae};return console.log(`\u{1f3c1} AccountSyncService: Sync completed in ${_e}ms - ${fe} total items downloaded`),Re})()}getAccessibleServices(_){let K=["pollution","disturbances","flora-fauna","cleanup"];return _>=2&&K.push("health","restoration","outplanting"),K}downloadServiceData(_,D){var L=this;return(0,s.A)(function*(K,ae,B=!1){console.log(`\u{1f4e5} AccountSyncService: Downloading ${K} data for ${B?"ALL ACCOUNTS (Privileged)":`user: ${ae}`}`);const G=yield L.getLocalServiceFiles(K),he=new Set(G.map(ge=>L.extractReportId(ge)));console.log(`\u{1f4cb} AccountSyncService: Found ${G.length} local ${K} files`);const fe=yield L.fetchFromServer(K,B?null:ae);console.log(`\u{1f310} AccountSyncService: Found ${fe.length} server ${K} records`);const _e=new Set(fe.map(ge=>ge.report_id));yield L.cleanupLocalFiles(K,_e);const Re=fe.filter(ge=>!he.has(ge.report_id));console.log(`\u{1f195} AccountSyncService: ${Re.length} new ${K} items to download`);let ve=0,Ye=0;for(const ge of Re)try{yield L.downloadAndSaveItem(K,ge,B),ve++}catch(nt){Ye++,console.error(`\u274c AccountSyncService: Failed to download ${K} item ${ge.report_id}:`,nt)}return Ye>0&&console.warn(`\u26a0\ufe0f AccountSyncService: ${K} - ${Ye} items failed to download, ${ve} succeeded`),ve}).apply(this,arguments)}getAllServiceNames(){return["pollution","disturbances","flora-fauna","cleanup","health","restoration","outplanting"]}cleanupNonAccessibleServiceFiles(_,D){var L=this;return(0,s.A)(function*(){const ae=L.getAllServiceNames().filter(B=>!_.includes(B));if(0!==ae.length){console.log(`\u{1f9f9} AccountSyncService: Cleaning up non-accessible service files for: ${ae.join(", ")}`);for(const B of ae)try{const Z=yield L.getLocalServiceFiles(B);if(0===Z.length)continue;console.log(`\u{1f50d} AccountSyncService: Checking ${Z.length} local ${B} files for ownership`);for(const G of Z)try{const he=yield L.sharedDataService.readJsonFile(G);if(!he)continue;const fe=he.submittedBy||"",_e=he._syncMetadata?.originalSubmittedBy||"";!fe&&!_e||fe&&fe.includes(D)||_e&&_e.includes(D)||(yield L.sharedDataService.deleteJsonFile(G),console.log(`\u{1f5d1}\ufe0f AccountSyncService: Deleted non-owned ${B} file: ${G}`))}catch(he){console.warn(`\u26a0\ufe0f AccountSyncService: Error checking file ${G}:`,he)}}catch(Z){console.warn(`\u26a0\ufe0f AccountSyncService: Error cleaning up ${B} files:`,Z)}}})()}cleanupLocalFiles(_,D){var L=this;return(0,s.A)(function*(){console.log(`\u{1f9f9} AccountSyncService: Cleaning up local ${_} files not on server`);const K=yield L.getLocalServiceFiles(_),B=(new Set(K.map(Z=>L.extractReportId(Z))),K.filter(Z=>{const G=L.extractReportId(Z);return!D.has(G)}));console.log(`\u{1f5d1}\ufe0f AccountSyncService: Found ${B.length} local ${_} files to delete`);for(const Z of B)try{yield L.sharedDataService.deleteJsonFile(Z),console.log(`\u2705 AccountSyncService: Deleted local file ${Z}`)}catch(G){console.error(`\u274c AccountSyncService: Failed to delete local file ${Z}:`,G)}})()}getLocalServiceFiles(_){var D=this;return(0,s.A)(function*(){try{return(yield D.sharedDataService.listFiles()).filter(K=>{if(K.includes("_report_"))return!1;const B={"flora-fauna":"FloraFauna",biomass:"Biomass",pollution:"Pollution",disturbances:"Disturbances",cleanup:"Cleanup",health:"Health",restoration:"Restoration",outplanting:"Outplanting"}[_];if(!B||!K.startsWith(B))return!1;const Z=K.replace(".json","");return new RegExp(`^${B}\\d{8}_\\d{6}$`).test(Z)&&!K.includes("_backup")&&!K.includes("_draft")&&!K.includes("_queue")})}catch(L){return console.warn(`\u26a0\ufe0f AccountSyncService: Could not list local files for ${_}:`,L),[]}})()}extractReportId(_){return _.replace(".json","")}fetchFromServer(_,D){var L=this;return(0,s.A)(function*(){try{const K=L.getTableName(_);let ae=L.CLIENT.from(K).select("*");D&&(ae=ae.eq("submitted_by",D));const{data:B,error:Z}=yield ae.order("created_at",{ascending:!1});if(Z)throw new Error(`Server query failed for ${_}: ${Z.message}`);return B||[]}catch(K){throw console.error(`\u274c AccountSyncService: Server fetch failed for ${_}:`,K),K}})()}getTableName(_){return{"flora-fauna":"flora_fauna_reports",pollution:"pollution_reports",disturbances:"disturbances_reports",cleanup:"cleanup_reports",health:"health_reports",restoration:"restoration_reports",outplanting:"outplanting_reports",biomass:"biomass_reports"}[_]||`${_}_reports`}downloadAndSaveItem(_,D){var L=this;return(0,s.A)(function*(K,ae,B=!1){try{const Z=L.getStorageBucketName(K);console.log(`\u{1f4c1} AccountSyncService: Downloading from bucket: ${Z}, file: ${ae.json_path}`);const{data:G,error:he}=yield L.CLIENT.storage.from(Z).download(ae.json_path);if(he)throw console.error(`\u274c AccountSyncService: Storage error for ${K}:`,he),new Error(`Failed to download file ${ae.json_path}: ${JSON.stringify(he)}`);const fe=JSON.parse(yield G.text());fe.photos&&L.serviceHasPhotos(K)&&(yield L.downloadPhotosForReport(fe,K)),fe.status&&(fe.status.sent=!0,fe.status.pending=!1),B&&(fe._syncMetadata={downloadedBy:L.auth.getCurrentUser()?.username||"unknown",downloadTime:(0,o.E)(),privilegedAccess:!0,originalSubmittedBy:ae.submitted_by});const _e=`${ae.report_id}.json`;yield L.sharedDataService.writeJsonFile(_e,fe),console.log(`\u{1f4be} AccountSyncService: ${B?"[PRIVILEGED]":""} Saved ${K} report ${ae.report_id} locally`)}catch(Z){throw console.error(`\u274c AccountSyncService: Failed to save ${K} item ${ae.report_id}:`,Z),Z}}).apply(this,arguments)}getStorageBucketName(_){return{"flora-fauna":"flora-fauna",pollution:"pollution",disturbances:"disturbances",cleanup:"cleanup",health:"health",restoration:"restoration",outplanting:"outplanting",biomass:"biomass"}[_]||`${_}-reports`}getImageBucketName(_){return{"flora-fauna":"flora-fauna-images",pollution:"pollution-images",disturbances:"disturbances-images",cleanup:"cleanup-images",health:"health-images",restoration:"restoration-images",outplanting:"outplanting-images",biomass:"biomass-images"}[_]||`${_}-images`}updateProgress(_){this.syncProgress$.next([..._])}getSyncSummary(){var _=this;return(0,s.A)(function*(){const D=_.auth.getCurrentUser();if(!D)return{};const K=_.getAccessibleServices(D.level||1),ae={};for(const B of K)try{const Z=yield _.getLocalServiceFiles(B);ae[B]=Z.length}catch{ae[B]=0}return ae})()}forceResyncService(_){var D=this;return(0,s.A)(function*(){const L=D.auth.getCurrentUser();if(!L)throw new Error("User not authenticated");console.log(`\u{1f504} AccountSyncService: Force re-syncing ${_}`);const K=yield D.getLocalServiceFiles(_);for(const B of K)yield D.sharedDataService.deleteJsonFile(B);const ae=(L.level||1)>=4&&D.isDesktopDevice();return D.downloadServiceData(_,L.organization||L.username,ae)})()}isDesktopDevice(){const _=navigator.userAgent.toLowerCase();return/macintosh|windows|linux/i.test(_)&&!/android/i.test(_)}serviceHasPhotos(_){return["flora-fauna","biomass","health","pollution","disturbances","cleanup","restoration","outplanting"].includes(_)}downloadPhotosForReport(_,D){var L=this;return(0,s.A)(function*(){try{const K=L.getImageBucketName(D),ae=_.photos;if(!ae||"object"!=typeof ae)return;if(Array.isArray(ae))for(let B=0;B<ae.length;B++)ae[B]&&"string"==typeof ae[B]&&(ae[B]=yield L.downloadPhotoAsBase64(ae[B],K));else for(const[B,Z]of Object.entries(ae))Z&&"string"==typeof Z&&(ae[B]=yield L.downloadPhotoAsBase64(Z,K))}catch(K){console.warn(`\u26a0\ufe0f AccountSyncService: Failed to download photos for ${D}:`,K)}})()}downloadPhotoAsBase64(_,D){var L=this;return(0,s.A)(function*(){try{const{data:K,error:ae}=yield L.CLIENT.storage.from(D).download(_);return ae?(console.warn(`\u26a0\ufe0f AccountSyncService: Failed to download photo ${_}:`,ae),""):`data:image/jpeg;base64,${yield L.blobToBase64(K)}`}catch(K){return console.warn(`\u26a0\ufe0f AccountSyncService: Error converting photo ${_}:`,K),""}})()}blobToBase64(_){return new Promise((D,L)=>{const K=new FileReader;K.onload=()=>{const B=K.result.split(",")[1];D(B)},K.onerror=L,K.readAsDataURL(_)})}static#e=p=()=>(this.\u0275fac=function(D){return new(D||m)(Pe.KVO(Ce.L),Pe.KVO(k.w),Pe.KVO(Le.H),Pe.KVO(Je.N),Pe.KVO(me.k),Pe.KVO(ie.h),Pe.KVO(we.u))},this.\u0275prov=Pe.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}))}return p(),m})()},7303(Wt,ut,b){"use strict";b.d(ut,{Q:()=>l,Sm:()=>v,Vw:()=>Le,aZ:()=>_,hb:()=>p,hj:()=>Je,ig:()=>Ce,kB:()=>m,om:()=>ie,qj:()=>k,rb:()=>Pe});var s=b(2615),o=b(1413);let S=null;function Pe(){return S}function Ce(B){S??=B}class k{}let Le=(()=>{class B{historyGo(G){throw new Error("")}static \u0275fac=function(he){return new(he||B)};static \u0275prov=s.jDH({token:B,factory:()=>(0,s.WQX)(me),providedIn:"platform"})}return B})();const Je=new s.nKC("");let me=(()=>{class B extends Le{_location;_history;_doc=(0,s.WQX)(s.qQL);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pe().getBaseHref(this._doc)}onPopState(G){const he=Pe().getGlobalEventTarget(this._doc,"window");return he.addEventListener("popstate",G,!1),()=>he.removeEventListener("popstate",G)}onHashChange(G){const he=Pe().getGlobalEventTarget(this._doc,"window");return he.addEventListener("hashchange",G,!1),()=>he.removeEventListener("hashchange",G)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(G){this._location.pathname=G}pushState(G,he,fe){this._history.pushState(G,he,fe)}replaceState(G,he,fe){this._history.replaceState(G,he,fe)}forward(){this._history.forward()}back(){this._history.back()}historyGo(G=0){this._history.go(G)}getState(){return this._history.state}static \u0275fac=function(he){return new(he||B)};static \u0275prov=s.jDH({token:B,factory:()=>new B,providedIn:"platform"})}return B})();function ie(B,Z){return B?Z?B.endsWith("/")?Z.startsWith("/")?B+Z.slice(1):B+Z:Z.startsWith("/")?B+Z:`${B}/${Z}`:B:Z}function we(B){const Z=B.search(/#|\?|$/);return"/"===B[Z-1]?B.slice(0,Z-1)+B.slice(Z):B}function l(B){return B&&"?"!==B[0]?`?${B}`:B}let p=(()=>{class B{historyGo(G){throw new Error("")}static \u0275fac=function(he){return new(he||B)};static \u0275prov=s.jDH({token:B,factory:()=>(0,s.WQX)(v),providedIn:"root"})}return B})();const m=new s.nKC("");let v=(()=>{class B extends p{_platformLocation;_baseHref;_removeListenerFns=[];constructor(G,he){super(),this._platformLocation=G,this._baseHref=he??this._platformLocation.getBaseHrefFromDOM()??(0,s.WQX)(s.qQL).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(G){this._removeListenerFns.push(this._platformLocation.onPopState(G),this._platformLocation.onHashChange(G))}getBaseHref(){return this._baseHref}prepareExternalUrl(G){return ie(this._baseHref,G)}path(G=!1){const he=this._platformLocation.pathname+l(this._platformLocation.search),fe=this._platformLocation.hash;return fe&&G?`${he}${fe}`:he}pushState(G,he,fe,_e){const Re=this.prepareExternalUrl(fe+l(_e));this._platformLocation.pushState(G,he,Re)}replaceState(G,he,fe,_e){const Re=this.prepareExternalUrl(fe+l(_e));this._platformLocation.replaceState(G,he,Re)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(G=0){this._platformLocation.historyGo?.(G)}static \u0275fac=function(he){return new(he||B)(s.KVO(Le),s.KVO(m,8))};static \u0275prov=s.jDH({token:B,factory:B.\u0275fac,providedIn:"root"})}return B})(),_=(()=>{class B{_subject=new o.B;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(G){this._locationStrategy=G;const he=this._locationStrategy.getBaseHref();this._basePath=function ae(B){if(new RegExp("^(https?:)?//").test(B)){const[,G]=B.split(/\/\/[^\/]+/);return G}return B}(we(K(he))),this._locationStrategy.onPopState(fe=>{this._subject.next({url:this.path(!0),pop:!0,state:fe.state,type:fe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(G=!1){return this.normalize(this._locationStrategy.path(G))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(G,he=""){return this.path()==this.normalize(G+l(he))}normalize(G){return B.stripTrailingSlash(function L(B,Z){if(!B||!Z.startsWith(B))return Z;const G=Z.substring(B.length);return""===G||["/",";","?","#"].includes(G[0])?G:Z}(this._basePath,K(G)))}prepareExternalUrl(G){return G&&"/"!==G[0]&&(G="/"+G),this._locationStrategy.prepareExternalUrl(G)}go(G,he="",fe=null){this._locationStrategy.pushState(fe,"",G,he),this._notifyUrlChangeListeners(this.prepareExternalUrl(G+l(he)),fe)}replaceState(G,he="",fe=null){this._locationStrategy.replaceState(fe,"",G,he),this._notifyUrlChangeListeners(this.prepareExternalUrl(G+l(he)),fe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(G=0){this._locationStrategy.historyGo?.(G)}onUrlChange(G){return this._urlChangeListeners.push(G),this._urlChangeSubscription??=this.subscribe(he=>{this._notifyUrlChangeListeners(he.url,he.state)}),()=>{const he=this._urlChangeListeners.indexOf(G);this._urlChangeListeners.splice(he,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(G="",he){this._urlChangeListeners.forEach(fe=>fe(G,he))}subscribe(G,he,fe){return this._subject.subscribe({next:G,error:he??void 0,complete:fe??void 0})}static normalizeQueryParams=l;static joinWithSlash=ie;static stripTrailingSlash=we;static \u0275fac=function(he){return new(he||B)(s.KVO(p))};static \u0275prov=s.jDH({token:B,factory:()=>function D(){return new _((0,s.KVO)(p))}(),providedIn:"root"})}return B})();function K(B){return B.replace(/\/index.html$/,"")}},7343(Wt,ut,b){"use strict";b.d(ut,{hG:()=>q,hB:()=>ye,U1:()=>on,el:()=>Kr,In:()=>Dt,Jm:()=>Vn,QW:()=>wn,b_:()=>hn,I9:()=>Pt,ME:()=>_n,HW:()=>Tt,tN:()=>$t,eY:()=>an,hU:()=>An,W9:()=>or,M0:()=>Ar,lO:()=>Jn,eU:()=>er,iq:()=>vr,$w:()=>Sn,uz:()=>tr,Dg:()=>bn,he:()=>Ft,nf:()=>Vt,T6:()=>P,Sb:()=>Ke,JI:()=>sr,FH:()=>gn,KO:()=>Br,f0:()=>jr,Rg:()=>Yr,ln:()=>et,S1:()=>St,Gp:()=>Xt,eP:()=>vn,Nm:()=>ir,Ip:()=>Ur,w2:()=>Ln,IO:()=>Er,nc:()=>br,BC:()=>Fr,BY:()=>kr,ai:()=>Dr,bv:()=>fr,Xi:()=>Qe,W3:()=>qt,su:()=>Me,IE:()=>rn,Je:()=>He,Gw:()=>ot,K_:()=>Kt});var s=b(3664),o=b(2615),S=b(7705),Pe=b(4341),Ce=b(5032),k=b(1635),Le=b(3726),Je=b(7303),me=b(2200),ie=b(5921),_=(b(2541),b(1841),b(499),b(8313),b(6011),b(6855)),L=(b(4674),b(5705)),K=b(9147),B=(b(9081),b(3827));b(9596),b(8607),b(9431),b(6118);var Re=b(467);const ve=_.i,Ye=function(){var W=(0,Re.A)(function*(Bn,Y){if(!(typeof window>"u"))return yield ve(),(0,L.b)(JSON.parse('[["ion-menu_3",[[289,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[289,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[257,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-input-password-toggle",[[289,"ion-input-password-toggle",{"color":[513],"showIcon":[1,"show-icon"],"hideIcon":[1,"hide-icon"],"type":[1025]},null,{"type":["onTypeChange"]}]]],["ion-fab_3",[[289,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[257,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[257,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[256,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[288,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[289,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[289,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[289,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[288,"ion-card-content"],[289,"ion-card-header",{"color":[513],"translucent":[4]}],[289,"ion-card-subtitle",{"color":[513]}],[289,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[289,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[288,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[256,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[305,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32],"hasInteracted":[32]},null,{"value":["valueChanged"]}],[289,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[288,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[256,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[289,"ion-reorder",null,[[2,"click","onClick"]]],[256,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[289,"ion-segment-button",{"contentId":[513,"content-id"],"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[289,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[16,"ionSegmentViewScroll","handleSegmentViewScroll"],[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-chip",[[289,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-input",[[294,"ion-input",{"color":[513],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearInputIcon":[1,"clear-input-icon"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[516],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[516],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"type":[1],"value":[1032],"hasFocus":[32],"isInvalid":[32],"setFocus":[64],"getInputElement":[64]},[[2,"click","onClickCapture"]],{"debounce":["debounceChanged"],"type":["onTypeChange"],"value":["valueChanged"],"dir":["onDirChanged"]}]]],["ion-searchbar",[[290,"ion-searchbar",{"color":[513],"animated":[4],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"lang":["onLangChanged"],"dir":["onDirChanged"],"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[289,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"required":[4],"activated":[32],"isInvalid":[32],"hintTextId":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[257,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64],"getLength":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[256,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-tab_2",[[257,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[257,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-textarea",[[294,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"shape":[1],"hasFocus":[32],"isInvalid":[32],"setFocus":[64],"getInputElement":[64]},[[2,"click","onClickCapture"]],{"debounce":["debounceChanged"],"value":["valueChanged"],"dir":["onDirChanged"]}]]],["ion-backdrop",[[289,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[290,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[289,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[289,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-tab-bar_2",[[289,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[289,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-datetime-button",[[289,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[257,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[289,"ion-avatar"],[289,"ion-badge",{"color":[513]}],[257,"ion-thumbnail"]]],["ion-col_3",[[257,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[257,"ion-grid",{"fixed":[4]}],[257,"ion-row"]]],["ion-img",[[257,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-input-otp",[[294,"ion-input-otp",{"autocapitalize":[1],"color":[513],"disabled":[516],"fill":[1],"inputmode":[1],"length":[2],"pattern":[1],"readonly":[516],"separators":[1],"shape":[1],"size":[1],"type":[1],"value":[1032],"inputValues":[32],"hasFocus":[32],"previousInputValues":[32],"setFocus":[64]},null,{"value":["valueChanged"],"separators":["processSeparators"],"length":["processSeparators"]}]]],["ion-progress-bar",[[289,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[289,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"step":["stepChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-segment-content",[[257,"ion-segment-content"]]],["ion-segment-view",[[289,"ion-segment-view",{"disabled":[4],"isManualScroll":[32],"setContent":[64]},[[1,"scroll","handleScroll"],[1,"touchstart","handleScrollStart"],[1,"touchend","handleTouchEnd"]]]]],["ion-split-pane",[[289,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32],"isVisible":[64]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[257,"ion-text",{"color":[513]}]]],["ion-select-modal",[[290,"ion-select-modal",{"header":[1],"multiple":[4],"options":[16]}]]],["ion-datetime_3",[[289,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"formatOptions":[16],"readonly":[4],"isDateEnabled":[16],"showAdjacentDays":[4,"show-adjacent-days"],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"formatOptions":["formatOptionsChanged"],"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"presentation":["presentationChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[290,"ion-picker-legacy",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[288,"ion-picker-legacy-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-action-sheet",[[290,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"activeRadioId":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[0,"keydown","onKeydown"]],{"buttons":["buttonsChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[290,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-modal",[[289,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"expandToScroll":[4,"expand-to-scroll"],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"focusTrap":[4,"focus-trap"],"canDismiss":[4,"can-dismiss"],"isSheetModal":[32],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},[[9,"resize","onWindowResize"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-picker",[[289,"ion-picker",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-picker-column",[[257,"ion-picker-column",{"disabled":[4],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"ariaLabel":[32],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64],"setFocus":[64]},null,{"aria-label":["ariaLabelChanged"],"value":["valueChange"]}]]],["ion-picker-column-option",[[289,"ion-picker-column-option",{"disabled":[4],"value":[8],"color":[513],"ariaLabel":[32]},null,{"aria-label":["onAriaLabelChange"]}]]],["ion-popover",[[289,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"focusTrap":[4,"focus-trap"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[289,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"required":[4],"isInvalid":[32],"hintTextId":[32],"setFocus":[64]}]]],["ion-item_8",[[289,"ion-item-divider",{"color":[513],"sticky":[4]}],[288,"ion-item-group"],[289,"ion-note",{"color":[513]}],[257,"ion-skeleton-text",{"animated":[4]}],[294,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[289,"ion-list-header",{"color":[513],"lines":[1]}],[289,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[516],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32],"isInteractive":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"]}],[288,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}]]],["ion-app_8",[[256,"ion-app",{"setFocus":[64]}],[292,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[257,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[257,"ion-content",{"color":[513],"fullscreen":[4],"fixedSlotPlacement":[1,"fixed-slot-placement"],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"recalculateDimensions":[64],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[292,"ion-header",{"collapse":[1],"translucent":[4]}],[289,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[289,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[294,"ion-buttons",{"collapse":[4]}]]],["ion-select_3",[[289,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"required":[4],"isExpanded":[32],"hasFocus":[32],"isInvalid":[32],"hintTextId":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[257,"ion-select-option",{"disabled":[4],"value":[8]}],[290,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-spinner",[[257,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-radio_2",[[289,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"]}],[292,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032],"helperText":[1,"helper-text"],"errorText":[1,"error-text"],"isInvalid":[32],"hintTextId":[32],"setFocus":[64]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[257,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[289,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1],"isCircle":[32]},null,{"disabled":["disabledChanged"],"aria-checked":["onAriaChanged"],"aria-label":["onAriaChanged"],"aria-pressed":["onAriaChanged"]}],[257,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]]]'),Y)});return function(Y,x){return W.apply(this,arguments)}}();!function(){if(typeof window<"u"&&void 0!==window.Reflect&&void 0!==window.customElements){var W=HTMLElement;window.HTMLElement=function(){return Reflect.construct(W,[],this.constructor)},HTMLElement.prototype=W.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,W)}}();const ge=["*"],nt=["outletContent"];function Ae(W,Bn){if(1&W&&(s.j41(0,"div",1),s.eu8(1,2),s.k0s()),2&W){const Y=s.XpG();s.R7$(),s.Y8G("ngTemplateOutlet",Y.template)}}let ye=(()=>{class W extends Ce.fL{constructor(Y,x){super(Y,x)}writeValue(Y){this.elementRef.nativeElement.checked=this.lastValue=Y,(0,Ce.z3)(this.elementRef)}_handleIonChange(Y){this.handleValueChange(Y,Y.checked)}static \u0275fac=function(x){return new(x||W)(s.rXU(o.zZn),s.rXU(s.aKT))};static \u0275dir=s.FsC({type:W,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(x,Te){1&x&&s.bIt("ionChange",function(Yt){return Te._handleIonChange(Yt.target)})},standalone:!1,features:[s.Jv_([{provide:Pe.kq,useExisting:W,multi:!0}]),s.Vt3]})}return W})(),Me=(()=>{class W extends Ce.fL{el;constructor(Y,x){super(Y,x),this.el=x}handleInputEvent(Y){this.handleValueChange(Y,Y.value)}registerOnChange(Y){super.registerOnChange("ION-INPUT"===this.el.nativeElement.tagName||"ION-INPUT-OTP"===this.el.nativeElement.tagName?x=>{Y(""===x?null:parseFloat(x))}:Y)}static \u0275fac=function(x){return new(x||W)(s.rXU(o.zZn),s.rXU(s.aKT))};static \u0275dir=s.FsC({type:W,selectors:[["ion-input","type","number"],["ion-input-otp",3,"type","text"],["ion-range"]],hostBindings:function(x,Te){1&x&&s.bIt("ionInput",function(Yt){return Te.handleInputEvent(Yt.target)})},standalone:!1,features:[s.Jv_([{provide:Pe.kq,useExisting:W,multi:!0}]),s.Vt3]})}return W})(),He=(()=>{class W extends Ce.fL{constructor(Y,x){super(Y,x)}_handleChangeEvent(Y){this.handleValueChange(Y,Y.value)}static \u0275fac=function(x){return new(x||W)(s.rXU(o.zZn),s.rXU(s.aKT))};static \u0275dir=s.FsC({type:W,selectors:[["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(x,Te){1&x&&s.bIt("ionChange",function(Yt){return Te._handleChangeEvent(Yt.target)})},standalone:!1,features:[s.Jv_([{provide:Pe.kq,useExisting:W,multi:!0}]),s.Vt3]})}return W})(),ot=(()=>{class W extends Ce.fL{constructor(Y,x){super(Y,x)}_handleInputEvent(Y){this.handleValueChange(Y,Y.value)}static \u0275fac=function(x){return new(x||W)(s.rXU(o.zZn),s.rXU(s.aKT))};static \u0275dir=s.FsC({type:W,selectors:[["ion-input",3,"type","number"],["ion-input-otp","type","text"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(x,Te){1&x&&s.bIt("ionInput",function(Yt){return Te._handleInputEvent(Yt.target)})},standalone:!1,features:[s.Jv_([{provide:Pe.kq,useExisting:W,multi:!0}]),s.Vt3]})}return W})();const pt=(W,Bn)=>{const Y=W.prototype;Bn.forEach(x=>{Object.defineProperty(Y,x,{get(){return this.el[x]},set(Te){this.z.runOutsideAngular(()=>this.el[x]=Te)},configurable:!0})})},At=(W,Bn)=>{const Y=W.prototype;Bn.forEach(x=>{Y[x]=function(){const Te=arguments;return this.z.runOutsideAngular(()=>this.el[x].apply(this.el,Te))}})},vt=(W,Bn,Y)=>{Y.forEach(x=>W[x]=(0,Le.R)(Bn,x))};function dt(W){return function(Y){const{defineCustomElementFn:x,inputs:Te,methods:Fn}=W;return void 0!==x&&x(),Te&&pt(Y,Te),Fn&&At(Y,Fn),Y}}let on=(()=>{let W=class ef{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||ef)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:ef,selectors:[["ion-app"]],standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({methods:["setFocus"]})],W),W})(),Dt=(()=>{let W=class rf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||rf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:rf,selectors:[["ion-badge"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","mode"]})],W),W})(),Vn=(()=>{let W=class cf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement,vt(this,this.el,["ionFocus","ionBlur"])}static \u0275fac=function(x){return new(x||cf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:cf,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],W),W})(),wn=(()=>{let W=class lf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||lf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:lf,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["collapse"]})],W),W})(),hn=(()=>{let W=class uf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||uf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:uf,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],W),W})(),Pt=(()=>{let W=class df{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||df)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:df,selectors:[["ion-card-content"]],inputs:{mode:"mode"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["mode"]})],W),W})(),_n=(()=>{let W=class ff{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||ff)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:ff,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","mode","translucent"]})],W),W})(),Tt=(()=>{let W=class hf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||hf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:hf,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","mode"]})],W),W})(),$t=(()=>{let W=class pf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||pf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:pf,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","mode"]})],W),W})(),an=(()=>{let W=class gf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement,vt(this,this.el,["ionChange","ionFocus","ionBlur"])}static \u0275fac=function(x){return new(x||gf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:gf,selectors:[["ion-checkbox"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",errorText:"errorText",helperText:"helperText",indeterminate:"indeterminate",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",required:"required",value:"value"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["alignment","checked","color","disabled","errorText","helperText","indeterminate","justify","labelPlacement","mode","name","required","value"]})],W),W})(),An=(()=>{let W=class _f{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||_f)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:_f,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],W),W})(),or=(()=>{let W=class vf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement,vt(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}static \u0275fac=function(x){return new(x||vf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:vf,selectors:[["ion-content"]],inputs:{color:"color",fixedSlotPlacement:"fixedSlotPlacement",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","fixedSlotPlacement","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],W),W})(),Ar=(()=>{let W=class Cf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||Cf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Cf,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["collapse","mode","translucent"]})],W),W})(),Jn=(()=>{let W=class Af{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||Af)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Af,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["fixed"]})],W),W})(),er=(()=>{let W=class If{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||If)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:If,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["collapse","mode","translucent"]})],W),W})(),vr=(()=>{let W=class wf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||wf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:wf,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],W),W})(),Sn=(()=>{let W=class Pf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement,vt(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}static \u0275fac=function(x){return new(x||Pf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Pf,selectors:[["ion-input"]],inputs:{autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearInputIcon:"clearInputIcon",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearInputIcon","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],W),W})(),tr=(()=>{let W=class Lf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||Lf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Lf,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],W),W})(),bn=(()=>{let W=class Nf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||Nf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Nf,selectors:[["ion-item-divider"]],inputs:{color:"color",mode:"mode",sticky:"sticky"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","mode","sticky"]})],W),W})(),Ft=(()=>{let W=class Bf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||Bf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Bf,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","mode","position"]})],W),W})(),Vt=(()=>{let W=class jf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||jf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:jf,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],W),W})(),sr=(()=>{let W=class Xf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||Xf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Xf,selectors:[["ion-note"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","mode"]})],W),W})(),gn=(()=>{let W=class Zf{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||Zf)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Zf,selectors:[["ion-progress-bar"]],inputs:{buffer:"buffer",color:"color",mode:"mode",reversed:"reversed",type:"type",value:"value"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["buffer","color","mode","reversed","type","value"]})],W),W})(),Br=(()=>{let W=class eh{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement,vt(this,this.el,["ionFocus","ionBlur"])}static \u0275fac=function(x){return new(x||eh)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:eh,selectors:[["ion-radio"]],inputs:{alignment:"alignment",color:"color",disabled:"disabled",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["alignment","color","disabled","justify","labelPlacement","mode","name","value"]})],W),W})(),jr=(()=>{let W=class th{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement,vt(this,this.el,["ionChange"])}static \u0275fac=function(x){return new(x||th)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:th,selectors:[["ion-radio-group"]],inputs:{allowEmptySelection:"allowEmptySelection",compareWith:"compareWith",errorText:"errorText",helperText:"helperText",name:"name",value:"value"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["allowEmptySelection","compareWith","errorText","helperText","name","value"]})],W),W})(),et=(()=>{let W=class ch{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||ch)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:ch,selectors:[["ion-row"]],standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({})],W),W})(),St=(()=>{let W=class lh{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement,vt(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}static \u0275fac=function(x){return new(x||lh)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:lh,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["animated","autocapitalize","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],W),W})(),Xt=(()=>{let W=class uh{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement,vt(this,this.el,["ionChange"])}static \u0275fac=function(x){return new(x||uh)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:uh,selectors:[["ion-segment"]],inputs:{color:"color",disabled:"disabled",mode:"mode",scrollable:"scrollable",selectOnFocus:"selectOnFocus",swipeGesture:"swipeGesture",value:"value"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","disabled","mode","scrollable","selectOnFocus","swipeGesture","value"]})],W),W})(),vn=(()=>{let W=class dh{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||dh)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:dh,selectors:[["ion-segment-button"]],inputs:{contentId:"contentId",disabled:"disabled",layout:"layout",mode:"mode",type:"type",value:"value"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["contentId","disabled","layout","mode","type","value"]})],W),W})(),ir=(()=>{let W=class ph{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement,vt(this,this.el,["ionChange","ionCancel","ionDismiss","ionFocus","ionBlur"])}static \u0275fac=function(x){return new(x||ph)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:ph,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",color:"color",compareWith:"compareWith",disabled:"disabled",errorText:"errorText",expandedIcon:"expandedIcon",fill:"fill",helperText:"helperText",interface:"interface",interfaceOptions:"interfaceOptions",justify:"justify",label:"label",labelPlacement:"labelPlacement",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",required:"required",selectedText:"selectedText",shape:"shape",toggleIcon:"toggleIcon",value:"value"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["cancelText","color","compareWith","disabled","errorText","expandedIcon","fill","helperText","interface","interfaceOptions","justify","label","labelPlacement","mode","multiple","name","okText","placeholder","required","selectedText","shape","toggleIcon","value"],methods:["open"]})],W),W})(),Ur=(()=>{let W=class mh{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||mh)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:mh,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["disabled","value"]})],W),W})(),Ln=(()=>{let W=class vh{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||vh)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:vh,selectors:[["ion-spinner"]],inputs:{color:"color",duration:"duration",name:"name",paused:"paused"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","duration","name","paused"]})],W),W})(),Er=(()=>{let W=class Sh{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||Sh)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Sh,selectors:[["ion-text"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","mode"]})],W),W})(),br=(()=>{let W=class Ch{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement,vt(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}static \u0275fac=function(x){return new(x||Ch)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Ch,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",shape:"shape",spellcheck:"spellcheck",value:"value",wrap:"wrap"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","maxlength","minlength","mode","name","placeholder","readonly","required","rows","shape","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],W),W})(),Fr=(()=>{let W=class Ih{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||Ih)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Ih,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","size"]})],W),W})(),kr=(()=>{let W=class Th{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement,vt(this,this.el,["ionChange","ionFocus","ionBlur"])}static \u0275fac=function(x){return new(x||Th)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Th,selectors:[["ion-toggle"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",enableOnOffLabels:"enableOnOffLabels",errorText:"errorText",helperText:"helperText",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",required:"required",value:"value"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["alignment","checked","color","disabled","enableOnOffLabels","errorText","helperText","justify","labelPlacement","mode","name","required","value"]})],W),W})(),Dr=(()=>{let W=class Mh{z;el;constructor(Y,x,Te){this.z=Te,Y.detach(),this.el=x.nativeElement}static \u0275fac=function(x){return new(x||Mh)(s.rXU(S.gRc),s.rXU(s.aKT),s.rXU(s.SKi))};static \u0275cmp=s.VBU({type:Mh,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})};return W=(0,k.Cg)([dt({inputs:["color","mode"]})],W),W})(),Yr=(()=>{class W extends Ce.Rg{parentOutlet;outletContent;constructor(Y,x,Te,Fn,Yt,Pn,Xn,Wn){super(Y,x,Te,Fn,Yt,Pn,Xn,Wn),this.parentOutlet=Wn}static \u0275fac=function(x){return new(x||W)(s.kS0("name"),s.kS0("tabs"),s.rXU(Je.aZ),s.rXU(s.aKT),s.rXU(ie.Ix),s.rXU(s.SKi),s.rXU(ie.nX),s.rXU(W,12))};static \u0275cmp=s.VBU({type:W,selectors:[["ion-router-outlet"]],viewQuery:function(x,Te){if(1&x&&s.GBs(nt,7,s.c1b),2&x){let Fn;s.mGM(Fn=s.lsd())&&(Te.outletContent=Fn.first)}},standalone:!1,features:[s.Vt3],ngContentSelectors:ge,decls:3,vars:0,consts:[["outletContent",""]],template:function(x,Te){1&x&&(s.NAR(),s.qex(0,null,0),s.SdG(2),s.bVm())},encapsulation:2})}return W})(),Kr=(()=>{class W extends Ce.el{constructor(Y,x,Te,Fn,Yt,Pn){super(Y,x,Te,Fn,Yt,Pn)}static \u0275fac=function(x){return new(x||W)(s.rXU(Yr,8),s.rXU(Ce.q9),s.rXU(Ce.TS),s.rXU(s.aKT),s.rXU(s.SKi),s.rXU(S.gRc))};static \u0275cmp=s.VBU({type:W,selectors:[["ion-back-button"]],standalone:!1,features:[s.Vt3],ngContentSelectors:ge,decls:1,vars:0,template:function(x,Te){1&x&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})}return W})(),Ke=(()=>{class W extends Ce.Sb{static \u0275fac=(()=>{let Y;return function(Te){return(Y||(Y=s.xGo(W)))(Te||W)}})();static \u0275cmp=s.VBU({type:W,selectors:[["ion-modal"]],standalone:!1,features:[s.Vt3],decls:1,vars:1,consts:[["class","ion-delegate-host ion-page",4,"ngIf"],[1,"ion-delegate-host","ion-page"],[3,"ngTemplateOutlet"]],template:function(x,Te){1&x&&s.DNE(0,Ae,2,1,"div",0),2&x&&s.Y8G("ngIf",Te.isCmpOpen||Te.keepContentsMounted)},dependencies:[me.bT,me.T3],encapsulation:2,changeDetection:0})}return W})();const A={provide:Pe.cz,useExisting:(0,o.Rfq)(()=>ee),multi:!0};let ee=(()=>{class W extends Pe.zX{static \u0275fac=(()=>{let Y;return function(Te){return(Y||(Y=s.xGo(W)))(Te||W)}})();static \u0275dir=s.FsC({type:W,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(x,Te){2&x&&s.BMQ("max",Te._enabled?Te.max:null)},standalone:!1,features:[s.Jv_([A]),s.Vt3]})}return W})();const j={provide:Pe.cz,useExisting:(0,o.Rfq)(()=>P),multi:!0};let P=(()=>{class W extends Pe.VZ{static \u0275fac=(()=>{let Y;return function(Te){return(Y||(Y=s.xGo(W)))(Te||W)}})();static \u0275dir=s.FsC({type:W,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(x,Te){2&x&&s.BMQ("min",Te._enabled?Te.min:null)},standalone:!1,features:[s.Jv_([j]),s.Vt3]})}return W})(),q=(()=>{class W extends Ce.Kb{constructor(){super(B.a)}static \u0275fac=function(x){return new(x||W)};static \u0275prov=o.jDH({token:W,factory:W.\u0275fac,providedIn:"root"})}return W})(),Qe=(()=>{class W extends Ce.Kb{constructor(){super(B.l)}static \u0275fac=function(x){return new(x||W)};static \u0275prov=o.jDH({token:W,factory:W.\u0275fac,providedIn:"root"})}return W})(),qt=(()=>{class W extends Ce.Kb{angularDelegate=(0,o.WQX)(Ce.Yq);injector=(0,o.WQX)(o.zZn);environmentInjector=(0,o.WQX)(o.uvJ);constructor(){super(B.m)}create(Y){return super.create({...Y,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}static \u0275fac=function(x){return new(x||W)};static \u0275prov=o.jDH({token:W,factory:W.\u0275fac})}return W})();class rn extends Ce.Kb{angularDelegate=(0,o.WQX)(Ce.Yq);injector=(0,o.WQX)(o.zZn);environmentInjector=(0,o.WQX)(o.uvJ);constructor(){super(B.c)}create(Bn){return super.create({...Bn,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}let Kt=(()=>{class W extends Ce.Kb{constructor(){super(B.t)}static \u0275fac=function(x){return new(x||W)};static \u0275prov=o.jDH({token:W,factory:W.\u0275fac,providedIn:"root"})}return W})();const Nn=(W,Bn,Y)=>()=>{const x=Bn.defaultView;if(x&&typeof window<"u"){(0,K.s)({...W,_zoneGate:Fn=>Y.run(Fn)});const Te="__zone_symbol__addEventListener"in Bn.body?"__zone_symbol__addEventListener":"addEventListener";return Ye(x,{exclude:["ion-tabs"],syncQueue:!0,raf:Ce.er,jmp:Fn=>Y.runOutsideAngular(Fn),ael(Fn,Yt,Pn,Xn){Fn[Te](Yt,Pn,Xn)},rel(Fn,Yt,Pn,Xn){Fn.removeEventListener(Yt,Pn,Xn)}})}};let fr=(()=>{class W{static forRoot(Y={}){return{ngModule:W,providers:[{provide:Ce.sR,useValue:Y},{provide:s.hnV,useFactory:Nn,multi:!0,deps:[Ce.sR,o.qQL,s.SKi]},Ce.Yq,(0,Ce.YV)()]}}static \u0275fac=function(x){return new(x||W)};static \u0275mod=s.$C({type:W});static \u0275inj=o.G2t({providers:[qt,rn],imports:[me.MD]})}return W})()},7441(Wt,ut,b){"use strict";b.d(ut,{X:()=>s});const s=o=>o&&"number"==typeof o.length&&"function"!=typeof o},7522(Wt,ut,b){"use strict";b.d(ut,{$:()=>Je});var s=b(467),o=b(2084),S=b(2615),Pe=b(918),Ce=b(5029),k=b(4938),Le=b(8863);let Je=(()=>{var me;class ie{constructor(l,p,m,v){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=v,this.REPORTS_BUCKET="cleanup",this.IMAGES_BUCKET="cleanup-images",this.DRAFT_FILE="cleanup_draft_current.json",this.PENDING_QUEUE_FILE="cleanup_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} CleanupSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} CleanupSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(_=>console.error("\u274c CleanupSyncService: processPendingQueue failed:",_))}),setTimeout(()=>{console.log("\u{1f680} CleanupSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(_=>console.error("\u274c CleanupSyncService: Initial queue check failed:",_))},8e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 CleanupSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(_=>console.error("\u274c CleanupSyncService: Periodic queue check failed:",_))},3e5),console.log("\u2705 CleanupSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Cleanup${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[],_=["flipFlops","toys","bagsBottles","pens","toothbrushes","lollipopSticks","juicePackets","cigaretteButts","foodWrappers","takeAwayContainers","lids","bottleCaps","beverageBottles","straws","forksKnivesSpoons","bags","cupsPlates","plasticBottle","toothpasteTubes","elasticBands","boxPackaging","wipesPacket","foam","largeFoam","foamPieces","balloons","lighters","householdItems","diapersSanitary","wipes","rubber","biologicalWaste","wovenPlastic"].reduce((K,ae)=>K+(l?.[ae]||0),0);_>0&&m.push(`${_} plastics`);const L=["lures","fishingLineRopes","nets","buoysFloats","otherFishingGear"].reduce((K,ae)=>K+(l?.[ae]||0),0);return L>0&&m.push(`${L} fishing gear`),l?.totalWeight>0&&m.push(`${l.totalWeight}kg`),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"cleanup"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",v=l?.quadNumber||"";let _=`cleanup_draft_${p}`;return m&&(_+=`_zone${m}`),v&&(_+=`_quad${v}`),`${_}.json`}dataUrlToBlob(l){return(0,s.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,s.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,s.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("CleanupSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=l.reportId||p.generateReportId(),_={reportId:v,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos||[],status:l.status||{incomplete:!0,sent:!1,pending:!1}},D=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(D,_);const L=yield p.sharedDataService.readJsonFile(D);if(!L||L.reportId!==_.reportId)throw new Error("CleanupSyncService: draft verification failed");const K=yield p.storage.getUser(),ae=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(K?.username||"unknown","cleanup",v,ae)})()}loadDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,s.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(_=>_.startsWith("cleanup_draft_")),v=[];for(const _ of m)try{const D=yield l.sharedDataService.readJsonFile(_);if(D){const L=l.getLocationLabelFromFilename(_,D.form);v.push({draft:D,locationLabel:L})}}catch(D){console.warn("CleanupSyncService: Failed to read draft file",_,D)}return v})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,s.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,s.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:v}of m)p.push({report:v,status:"draft"});try{const _=(yield l.sharedDataService.listFiles()).filter(D=>{if(!D.startsWith("Cleanup")||D.includes("_report_"))return!1;const L=D.replace(".json","");return/^Cleanup\d{8}_\d{6}$/.test(L)&&!D.includes("_backup")&&!D.includes("_draft")&&!D.includes("_queue")});for(const D of _)try{const L=yield l.sharedDataService.readJsonFile(D);L&&p.push({report:L,status:L.status.sent?"submitted":"pending"})}catch(L){console.warn("CleanupSyncService: Failed to read report file",D,L)}}catch(v){console.error("CleanupSyncService: Failed to list files:",v)}return p.sort((v,_)=>{const D=new Date(v.report.updatedAt||v.report.createdAt).getTime();return new Date(_.report.updatedAt||_.report.createdAt).getTime()-D}),p})()}submitFinal(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=!0===l.isEditMode,_=l.existingReportId||p.generateReportId(),D={reportId:_,createdAt:m,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:[...l.photos||[]],status:{incomplete:!1,sent:!1,pending:!1}};v&&(D.editedAt=m);const L=`${_}.json`;yield p.sharedDataService.writeJsonFile(L,D);const K=yield p.sharedDataService.readJsonFile(L);if(!K||K.reportId!==_)throw new Error("CleanupSyncService: local report verification failed");const ae=yield p.storage.getUser(),B=ae?ae.organization||ae.username:null;let Z;if(l.originalSubmittedBy&&B&&l.originalSubmittedBy!==B?Z=`${l.originalSubmittedBy}, ${B}`:B&&(Z=B),D.submittedBy=Z,yield p.sharedDataService.writeJsonFile(L,D),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:_,localReportFile:L}),{reportId:_,queued:!0};try{yield p.uploadReportAndImages(D,l.originalSubmittedBy),D.status.sent=!0,D.status.pending=!1,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.clearDraft();const fe=(yield p.storage.getUser())?.username||"unknown",_e=p.getFormSummary(l.formValue),Re=D.submittedBy;return v?p.monitoringLog.recordFormEdited(fe,"cleanup",_,!1,_e,Re):p.monitoringLog.recordFormSubmitted(fe,"cleanup",_,!1,_e,Re),{reportId:_,queued:!1}}catch(he){const fe=String(he?.message?he.message:he);D.status.pending=!0,D.status.lastError=fe,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.enqueuePending({reportId:_,localReportFile:L});const Re=(yield p.storage.getUser())?.username||"unknown",ve=p.getFormSummary(l.formValue),Ye=D.submittedBy;return v?p.monitoringLog.recordFormEdited(Re,"cleanup",_,!0,ve,Ye):p.monitoringLog.recordFormSubmitted(Re,"cleanup",_,!0,ve,Ye),{reportId:_,queued:!0}}})()}enqueuePending(l){var p=this;return(0,s.A)(function*(){console.log("\u{1f4dd} CleanupSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(_=>_.reportId===l.reportId)?console.log("\u26a0\ufe0f CleanupSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 CleanupSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} CleanupSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,s.A)(function*(){if(console.log("\u{1f504} CleanupSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f CleanupSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f CleanupSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} CleanupSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 CleanupSyncService: Queue is empty, nothing to process");const m=[];for(const v of p.items){console.log("\u{1f50d} CleanupSyncService: Processing item:",v.reportId,"(attempt",v.attempts+1,")");try{const _=yield l.sharedDataService.readJsonFile(v.localReportFile);if(!_){console.error("\u274c CleanupSyncService: Local report file missing for",v.reportId),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(_),console.log("\u2705 CleanupSyncService: Upload succeeded for",v.reportId),_.status.sent=!0,_.status.pending=!1,_.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(v.localReportFile,_),console.log("\u{1f4be} CleanupSyncService: Marked report as sent")}catch(_){console.error("\u274c CleanupSyncService: Upload failed for",v.reportId,":",_),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} CleanupSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} CleanupSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,s.A)(function*(){console.log("\u{1f4e4} CleanupSyncService: Starting upload for report",l.reportId);const v=m.getClient(),_=[];for(let _e=0;_e<(l.photos||[]).length;_e++){const Re=l.photos[_e],ve=yield m.uploadImageDataUrl(`${l.reportId}/photo_${_e+1}.jpg`,Re);_.push(ve)}const D=JSON.parse(JSON.stringify(l));D.photos=_,D.status={incomplete:!1,sent:!0,pending:!1};const L=`${l.reportId}.json`,K=new Blob([JSON.stringify(D)],{type:"application/json"}),{error:ae}=yield v.storage.from(m.REPORTS_BUCKET).upload(L,K,{contentType:"application/json",upsert:!0});if(ae)throw console.error("\u274c CleanupSyncService: JSON upload error:",ae),ae;console.log("\u2705 CleanupSyncService: Successfully uploaded JSON to",L);const B=yield m.storage.getUser(),Z=B?B.organization||B.username:null;let G;G=p&&Z&&p!==Z?`${p}, ${Z}`:Z;const he={report_id:l.reportId,submitted_by:G,json_path:L,cleanup_date:l.form.date||null,team:l.form.team||null,location:l.form.location||null,zone_number:l.form.zoneNumber?`Zone ${l.form.zoneNumber}`:null,quad_number:l.form.quadNumber?`Quad ${l.form.quadNumber.replace(/\D/g,"")}`:null,total_weight:l.form.totalWeight||null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:fe}=yield v.from("cleanup_reports").upsert(he,{onConflict:"report_id"});if(fe)throw console.error("\u274c CleanupSyncService: Database upsert error:",fe),fe;console.log("\u2705 CleanupSyncService: Successfully upserted into cleanup_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,s.A)(function*(){const v=m.getClient(),_=yield m.dataUrlToBlob(p),{error:D}=yield v.storage.from(m.IMAGES_BUCKET).upload(l,_,{contentType:_.type||"image/jpeg",upsert:!0});if(D)throw console.error("\u274c CleanupSyncService: Image upload error for",l,":",D),D;return console.log("\u2705 CleanupSyncService: Successfully uploaded image to",l),l})()}static#e=me=()=>(this.\u0275fac=function(p){return new(p||ie)(S.KVO(Pe.H),S.KVO(Ce.L),S.KVO(k.w),S.KVO(Le.u))},this.\u0275prov=S.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return me(),ie})()},7643(Wt,ut,b){"use strict";b.d(ut,{k:()=>ie});var s=b(467),o=b(2084),S=b(4412),Pe=b(5312),Ce=b(2615),k=b(5029),Le=b(918),Je=b(3205),me=b(8863);let ie=(()=>{var we;class l{constructor(m,v,_,D){this.supabaseService=m,this.sharedDataService=v,this.auth=_,this.monitoringLog=D,this.SITES_TABLE="sites",this.LOCAL_SITES_FILE="local_sites.json",this.SYNC_TIMESTAMP_FILE="sites_last_sync.json",this.PENDING_REQUESTS_FILE="pending_site_requests.json",this.MAX_RETRY_ATTEMPTS=10,this.RETRY_DELAYS=[5e3,15e3,3e4,6e4,3e5,6e5,18e5,36e5,72e5,144e5],this.sitesSubject=new S.t([]),this.sites$=this.sitesSubject.asObservable(),this.pendingRequests=[],this.retryTimer=null,console.log(" SiteSyncService: Initializing..."),this.initializeSites(),this.loadPendingRequests(),window.addEventListener("online",()=>{console.log(" SiteSyncService: ONLINE event detected - triggering sync"),this.syncWithServer().catch(L=>console.error(" SiteSyncService: sync failed:",L)),this.processPendingRequests().catch(L=>console.error(" SiteSyncService: Failed to process pending requests:",L))}),setInterval(()=>{console.log(" SiteSyncService: 5-minute periodic sync"),this.syncWithServer().catch(L=>console.error(" SiteSyncService: Periodic sync failed:",L))},3e5),setInterval(()=>{this.processPendingRequests().catch(L=>console.error(" SiteSyncService: Failed to process pending requests:",L))},6e4)}getClient(){return this.supabaseService.getClient()}initializeSites(){var m=this;return(0,s.A)(function*(){try{const v=yield m.loadLocalSites();if(0===v.length)yield m.syncWithServer();else if(v.some(D=>void 0===D.approved)){console.log(" SiteSyncService: Migrating old sites to include approved property");const D=v.map(L=>({...L,approved:void 0!==L.approved?L.approved:!L.requires_permission}));yield m.saveLocalSites(D),m.sitesSubject.next(D)}else m.sitesSubject.next(v)}catch(v){console.error(" SiteSyncService: Error initializing sites:",v)}})()}loadLocalSites(){var m=this;return(0,s.A)(function*(){try{return(yield m.sharedDataService.readJsonFile(m.LOCAL_SITES_FILE))||[]}catch(v){return console.error(" SiteSyncService: Error loading local sites:",v),[]}})()}saveLocalSites(m){var v=this;return(0,s.A)(function*(){try{yield v.sharedDataService.writeJsonFile(v.LOCAL_SITES_FILE,m)}catch(_){console.error(" SiteSyncService: Error saving local sites:",_)}})()}addNewSite(m){var v=this;return(0,s.A)(function*(){if(navigator.onLine)try{yield v.syncWithServer()}catch{}const _=v.auth.getCurrentUser(),D=_?.level||1,L=D<4,K={...m,id:v.generateSiteId(),added_at:(0,o.E)(),synced:!1,requires_permission:L,permission_requested:L,approved:!L};try{const B=[...yield v.loadLocalSites(),K];return yield v.saveLocalSites(B),v.sitesSubject.next(B),D>=4?(navigator.onLine?v.syncSingleSiteToServer(K).catch(G=>{console.error(" SiteSyncService: Error syncing new site to server:",G),v.addToPendingQueue(K)}):(console.log(" SiteSyncService: Device offline, adding site to pending queue"),v.addToPendingQueue(K)),console.log(" SiteSyncService: L4 site added:",K.name)):(console.log(` SiteSyncService: L${D} site added locally (permission required):`,K.name),v.requestSitePermission(K,D).catch(G=>{console.error(" SiteSyncService: Error requesting site permission:",G)})),v.monitoringLog.recordSiteAdded(_?.username||_?.email||"unknown",K.name,L),K}catch(ae){throw console.error(" SiteSyncService: Error adding new site:",ae),ae}})()}syncSingleSiteToServer(m){var v=this;return(0,s.A)(function*(){try{const _=v.getClient(),D={name:m.name,description:m.description,gps_latitude:m.gps_latitude,gps_longitude:m.gps_longitude,added_by:m.added_by,added_at:m.added_at,map_path:m.map_path||m.site_photo||"assets/maps/generic_map.jpg",site_photo:m.site_photo,site_map:m.site_map,zones:m.zones?JSON.stringify(m.zones):null,sample_points:m.sample_points?JSON.stringify(m.sample_points):null,requires_permission:m.requires_permission||!1,permission_requested:m.permission_requested||!1,approved:void 0===m.approved||m.approved},{data:L,error:K}=yield _.from(v.SITES_TABLE).upsert(D,{onConflict:"name"}).select().single();if(K)throw console.error(" SiteSyncService: Supabase error:",K),K;const B=(yield v.loadLocalSites()).map(Z=>Z.name===m.name?{...Z,id:L.id,synced:!0}:Z);yield v.saveLocalSites(B),v.sitesSubject.next(B),console.log(" SiteSyncService: Site synced to server:",m.name)}catch(_){console.error(" SiteSyncService: Error syncing site to server:",_)}})()}syncWithServer(){var m=this;return(0,s.A)(function*(){try{const v=m.getClient(),_=yield m.getLastSyncTimestamp();let D=v.from(m.SITES_TABLE).select("*");_&&(D=D.gt("added_at",_));const{data:L,error:K}=yield D;if(K)return void console.error(" SiteSyncService: Error fetching from server:",K);if(L&&L.length>0){const ae=yield m.loadLocalSites(),B=L.map(G=>({id:G.id,name:G.name,description:G.description,gps_latitude:G.gps_latitude,gps_longitude:G.gps_longitude,added_by:G.added_by,added_at:G.added_at,map_path:G.map_path,zones:G.zones?"string"==typeof G.zones?JSON.parse(G.zones):G.zones:[],sample_points:G.sample_points?"string"==typeof G.sample_points?JSON.parse(G.sample_points):G.sample_points:[],synced:!0,requires_permission:G.requires_permission||!1,permission_requested:G.permission_requested||!1,approved:void 0!==G.approved?G.approved:!G.requires_permission})),Z=m.mergeSites(ae,B);yield m.saveLocalSites(Z),m.sitesSubject.next(Z),console.log(" SiteSyncService: Synced",L.length,"sites from server")}yield m.syncUnsyncedSites(),yield m.cleanupOrphanedSites(),yield m.updateLastSyncTimestamp()}catch(v){console.error(" SiteSyncService: Error syncing with server:",v)}})()}cleanupOrphanedSites(){var m=this;return(0,s.A)(function*(){try{const v=m.getClient(),_=yield m.loadLocalSites();if(0===_.length)return;const{data:D,error:L}=yield v.from(m.SITES_TABLE).select("id");if(L)return void console.error("\u{1f3dd}\ufe0f SiteSyncService: Error fetching server sites:",L);const K=new Set;D?.forEach(B=>K.add(B.id));const ae=_.filter(B=>!(B.id&&!K.has(B.id)&&B.synced&&(console.log("\u{1f3dd}\ufe0f SiteSyncService: Removing orphaned site:",B.name||B.id),1)));ae.length!==_.length&&(yield m.saveLocalSites(ae),m.sitesSubject.next(ae),console.log("\u{1f3dd}\ufe0f SiteSyncService: Cleaned up",_.length-ae.length,"orphaned sites"))}catch(v){console.error("\u{1f3dd}\ufe0f SiteSyncService: Error cleaning up orphaned sites:",v)}})()}syncUnsyncedSites(){var m=this;return(0,s.A)(function*(){const v=yield m.loadLocalSites(),D=m.auth.getCurrentUser()?.level||1,L=v.filter(K=>!K.synced&&(!0===K.approved||D>=4));for(const K of L)yield m.syncSingleSiteToServer(K)})()}mergeSites(m,v){const _=new Map;return m.forEach(D=>_.set(D.name.toLowerCase(),D)),v.forEach(D=>_.set(D.name.toLowerCase(),D)),Array.from(_.values())}getLastSyncTimestamp(){var m=this;return(0,s.A)(function*(){try{return(yield m.sharedDataService.readJsonFile(m.SYNC_TIMESTAMP_FILE))?.timestamp||null}catch{return null}})()}updateLastSyncTimestamp(){var m=this;return(0,s.A)(function*(){try{yield m.sharedDataService.writeJsonFile(m.SYNC_TIMESTAMP_FILE,{timestamp:(0,o.E)()})}catch(v){console.error(" SiteSyncService: Error updating sync timestamp:",v)}})()}generateSiteId(){return`site_${this.formatTimestamp()}_${Math.random().toString(36).substr(2,4)}`}forceSync(){var m=this;return(0,s.A)(function*(){console.log(" SiteSyncService: Force sync triggered"),yield m.syncWithServer()})()}requestSitePermission(m,v){var _=this;return(0,s.A)(function*(){try{const D=_.auth.getCurrentUser();if(!D)throw new Error("User not authenticated");const L=`${Pe.c.supabase.url}/functions/v1/send-site-request-request`,K=yield fetch(L,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pe.c.supabase.anonKey}`},body:JSON.stringify({requesterEmail:D.email,requesterUsername:D.username||D.email,siteName:m.name,siteDescription:m.description,gpsLatitude:m.gps_latitude,gpsLongitude:m.gps_longitude,sitePhoto:m.site_photo,siteMap:m.site_map,reason:`L${v} user requesting site access for monitoring activities`,timestamp:(0,o.E)()})});if(!K.ok){const B=yield K.json();throw new Error(B.error||"Failed to submit permission request")}const ae=yield K.json();console.log(" SiteSyncService: Site permission request submitted successfully:",ae.request_id)}catch(D){throw console.error(" SiteSyncService: Error requesting site permission:",D),D}})()}getAllSites(){var m=this;return(0,s.A)(function*(){const v=yield m.loadLocalSites(),_=m.auth.getCurrentUser(),D=_?.level||1,L=_?.email||"";return D>=4?v:v.filter(ae=>!0===ae.approved||void 0===ae.approved&&!ae.requires_permission||ae.added_by===L)})()}siteExists(m){var v=this;return(0,s.A)(function*(){return(yield v.loadLocalSites()).some(D=>D.name.toLowerCase()===m.toLowerCase())})()}loadPendingRequests(){var m=this;return(0,s.A)(function*(){try{const v=yield m.sharedDataService.readJsonFile(m.PENDING_REQUESTS_FILE);v&&(m.pendingRequests=v,console.log(` SiteSyncService: Loaded ${m.pendingRequests.length} pending requests`),m.processPendingRequests().catch(_=>console.error(" SiteSyncService: Error processing pending requests:",_)))}catch{console.log(" SiteSyncService: No pending requests file found"),m.pendingRequests=[]}})()}savePendingRequests(){var m=this;return(0,s.A)(function*(){try{yield m.sharedDataService.writeJsonFile(m.PENDING_REQUESTS_FILE,m.pendingRequests)}catch(v){console.error(" SiteSyncService: Error saving pending requests:",v)}})()}addToPendingQueue(m){const v={id:this.generateSiteId(),timestamp:Date.now(),site:m,retryCount:0,maxRetries:this.MAX_RETRY_ATTEMPTS,nextRetryTime:Date.now()+this.RETRY_DELAYS[0]};this.pendingRequests.push(v),this.savePendingRequests(),console.log(` SiteSyncService: Added site to pending queue: ${m.name}`)}processPendingRequests(){var m=this;return(0,s.A)(function*(){if(!navigator.onLine||0===m.pendingRequests.length)return;const v=Date.now(),_=m.pendingRequests.filter(D=>D.nextRetryTime<=v);if(0!==_.length){console.log(` SiteSyncService: Processing ${_.length} pending requests`);for(const D of _)try{const L=yield m.uploadPendingPhotos(D.site);yield m.syncSingleSiteToServer(L),yield m.updateLocalSitePhotos(D.site.name,L),m.pendingRequests=m.pendingRequests.filter(K=>K.id!==D.id),console.log(` SiteSyncService: Successfully synced pending site: ${D.site.name}`)}catch(L){if(console.error(` SiteSyncService: Failed to sync pending site ${D.site.name}:`,L),D.retryCount++,D.retryCount>=D.maxRetries)m.pendingRequests=m.pendingRequests.filter(K=>K.id!==D.id),console.error(` SiteSyncService: Max retries reached for site ${D.site.name}, removing from queue`);else{const K=Math.min(D.retryCount,m.RETRY_DELAYS.length-1);D.nextRetryTime=Date.now()+m.RETRY_DELAYS[K],console.log(` SiteSyncService: Scheduling retry ${D.retryCount}/${D.maxRetries} for site ${D.site.name} in ${m.RETRY_DELAYS[K]/1e3}s`)}}yield m.savePendingRequests()}})()}isBase64Image(m){return!!m&&m.startsWith("data:image")}uploadPendingPhotos(m){var v=this;return(0,s.A)(function*(){const _={...m};try{if(_.site_photo&&v.isBase64Image(_.site_photo)){console.log(` SiteSyncService: Uploading pending site photo for ${m.name}`);const D=yield v.uploadBase64Image(_.site_photo,m.name,"photo");_.site_photo=D}if(_.site_map&&v.isBase64Image(_.site_map)){console.log(` SiteSyncService: Uploading pending site map for ${m.name}`);const D=yield v.uploadBase64Image(_.site_map,m.name,"map");_.site_map=D}_.site_map?_.map_path=_.site_map:_.site_photo&&(_.map_path=_.site_photo)}catch(D){throw console.error(" SiteSyncService: Error uploading pending photos:",D),D}return _})()}formatTimestamp(){const m=new Date;return`${String(m.getDate()).padStart(2,"0")}${String(m.getMonth()+1).padStart(2,"0")}${m.getFullYear()}_${String(m.getHours()).padStart(2,"0")}${String(m.getMinutes()).padStart(2,"0")}${String(m.getSeconds()).padStart(2,"0")}`}uploadBase64Image(m,v,_){var D=this;return(0,s.A)(function*(){try{const K=yield(yield fetch(m)).blob(),ae=v.trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""),B=D.formatTimestamp(),Z=K.type.split("/")[1]||"jpg",he=`site-${_}s/${ae}_${_}_${B}.${Z}`,{error:fe}=yield D.getClient().storage.from("site-images").upload(he,K);if(fe)throw fe;const{data:{publicUrl:_e}}=D.getClient().storage.from("site-images").getPublicUrl(he);return console.log(` SiteSyncService: Uploaded ${_} to:`,_e),_e}catch(L){throw console.error(" SiteSyncService: Error uploading base64 image:",L),L}})()}updateLocalSitePhotos(m,v){var _=this;return(0,s.A)(function*(){try{const L=(yield _.loadLocalSites()).map(K=>K.name===m?{...K,site_photo:v.site_photo,site_map:v.site_map,map_path:v.map_path}:K);yield _.saveLocalSites(L),_.sitesSubject.next(L)}catch(D){console.error(" SiteSyncService: Error updating local site photos:",D)}})()}updateSite(m,v){var _=this;return(0,s.A)(function*(){if((_.auth.getCurrentUser()?.level||1)<4)throw new Error("Only L4+ users can edit sites");try{const K=yield _.loadLocalSites(),ae=K.findIndex(G=>G.name===m);if(-1===ae)throw new Error("Site not found");const Z={...K[ae],...v,synced:!1};if(K[ae]=Z,yield _.saveLocalSites(K),_.sitesSubject.next(K),navigator.onLine){const G=yield _.uploadPendingPhotos(Z),he={name:G.name,description:G.description,gps_latitude:G.gps_latitude,gps_longitude:G.gps_longitude,site_photo:G.site_photo,site_map:G.site_map,map_path:G.map_path||G.site_map||G.site_photo},{error:fe}=yield _.getClient().from(_.SITES_TABLE).update(he).eq("name",m);fe?(console.error("\u{1f3dd}\ufe0f SiteSyncService: Error updating site on server:",fe),_.addToPendingQueue(G)):(K[ae]={...G,synced:!0},yield _.saveLocalSites(K),_.sitesSubject.next(K),console.log("\u{1f3dd}\ufe0f SiteSyncService: Site updated on server:",Z.name))}else console.log("\u{1f3dd}\ufe0f SiteSyncService: Offline - site update queued for sync"),_.addToPendingQueue(Z);return console.log("\u{1f3dd}\ufe0f SiteSyncService: Site updated:",Z.name),Z}catch(K){throw console.error("\u{1f3dd}\ufe0f SiteSyncService: Error updating site:",K),K}})()}deleteSite(m){var v=this;return(0,s.A)(function*(){if((v.auth.getCurrentUser()?.level||1)<4)throw new Error("Only L4+ users can delete sites");try{const L=yield v.loadLocalSites(),K=L.find(B=>B.name===m),ae=L.filter(B=>B.name!==m);if(yield v.saveLocalSites(ae),v.sitesSubject.next(ae),navigator.onLine){const{error:B}=yield v.getClient().from(v.SITES_TABLE).delete().eq("name",m);if(B&&console.error("\u{1f3dd}\ufe0f SiteSyncService: Error deleting from server:",B),K){const G=[K.site_photo,K.site_map,K.map_path].filter(he=>!!he&&he.includes("site-images/")).map(he=>he.split("site-images/")[1]);if(G.length>0){const{error:he}=yield v.getClient().storage.from("site-images").remove(G);he?console.error("\u{1f3dd}\ufe0f SiteSyncService: Error deleting images from storage:",he):console.log("\u{1f3dd}\ufe0f SiteSyncService: Deleted",G.length,"images from storage")}}}console.log("\u{1f3dd}\ufe0f SiteSyncService: Site deleted:",m)}catch(L){throw console.error("\u{1f3dd}\ufe0f SiteSyncService: Error deleting site:",L),L}})()}getSiteByName(m){var v=this;return(0,s.A)(function*(){return(yield v.loadLocalSites()).find(D=>D.name===m)||null})()}static#e=we=()=>(this.\u0275fac=function(v){return new(v||l)(Ce.KVO(k.L),Ce.KVO(Le.H),Ce.KVO(Je.N),Ce.KVO(me.u))},this.\u0275prov=Ce.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}))}return we(),l})()},7673(Wt,ut,b){"use strict";b.d(ut,{of:()=>S});var s=b(9326),o=b(6648);function S(...Pe){const Ce=(0,s.lI)(Pe);return(0,o.H)(Pe,Ce)}},7691(Wt,ut,b){"use strict";b.d(ut,{i7:()=>Je,LK:()=>Ce,ru:()=>S});var s=b(5083),o=b(467),S=function(me){return me.Prompt="PROMPT",me.Camera="CAMERA",me.Photos="PHOTOS",me}(S||{}),Pe=function(me){return me.Rear="REAR",me.Front="FRONT",me}(Pe||{}),Ce=function(me){return me.Uri="uri",me.Base64="base64",me.DataUrl="dataUrl",me}(Ce||{});class k extends s.E_{getPhoto(ie){var we=this;return(0,o.A)(function*(){return new Promise(function(){var l=(0,o.A)(function*(p,m){if(ie.webUseInput||ie.source===S.Photos)we.fileInputExperience(ie,p,m);else if(ie.source===S.Prompt){let v=document.querySelector("pwa-action-sheet");v||(v=document.createElement("pwa-action-sheet"),document.body.appendChild(v)),v.header=ie.promptLabelHeader||"Photo",v.cancelable=!1,v.options=[{title:ie.promptLabelPhoto||"From Photos"},{title:ie.promptLabelPicture||"Take Picture"}],v.addEventListener("onSelection",function(){var _=(0,o.A)(function*(D){0===D.detail?we.fileInputExperience(ie,p,m):we.cameraExperience(ie,p,m)});return function(D){return _.apply(this,arguments)}}())}else we.cameraExperience(ie,p,m)});return function(p,m){return l.apply(this,arguments)}}())})()}pickImages(ie){var we=this;return(0,o.A)(function*(){return new Promise(function(){var l=(0,o.A)(function*(p,m){we.multipleFileInputExperience(p,m)});return function(p,m){return l.apply(this,arguments)}}())})()}cameraExperience(ie,we,l){var p=this;return(0,o.A)(function*(){if(customElements.get("pwa-camera-modal")){const m=document.createElement("pwa-camera-modal");m.facingMode=ie.direction===Pe.Front?"user":"environment",document.body.appendChild(m);try{yield m.componentOnReady(),m.addEventListener("onPhoto",function(){var v=(0,o.A)(function*(_){const D=_.detail;null===D?l(new s.I9("User cancelled photos app")):D instanceof Error?l(D):we(yield p._getCameraPhoto(D,ie)),m.dismiss(),document.body.removeChild(m)});return function(_){return v.apply(this,arguments)}}()),m.present()}catch{p.fileInputExperience(ie,we,l)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),p.fileInputExperience(ie,we,l)})()}fileInputExperience(ie,we,l){let p=document.querySelector("#_capacitor-camera-input");const m=()=>{var v;null===(v=p.parentNode)||void 0===v||v.removeChild(p)};p||(p=document.createElement("input"),p.id="_capacitor-camera-input",p.type="file",p.hidden=!0,document.body.appendChild(p),p.addEventListener("change",v=>{const _=p.files[0];let D="jpeg";if("image/png"===_.type?D="png":"image/gif"===_.type&&(D="gif"),"dataUrl"===ie.resultType||"base64"===ie.resultType){const L=new FileReader;L.addEventListener("load",()=>{if("dataUrl"===ie.resultType)we({dataUrl:L.result,format:D});else if("base64"===ie.resultType){const K=L.result.split(",")[1];we({base64String:K,format:D})}m()}),L.readAsDataURL(_)}else we({webPath:URL.createObjectURL(_),format:D}),m()}),p.addEventListener("cancel",v=>{l(new s.I9("User cancelled photos app")),m()})),p.accept="image/*",p.capture=!0,ie.source===S.Photos||ie.source===S.Prompt?p.removeAttribute("capture"):ie.direction===Pe.Front?p.capture="user":ie.direction===Pe.Rear&&(p.capture="environment"),p.click()}multipleFileInputExperience(ie,we){let l=document.querySelector("#_capacitor-camera-input-multiple");const p=()=>{var m;null===(m=l.parentNode)||void 0===m||m.removeChild(l)};l||(l=document.createElement("input"),l.id="_capacitor-camera-input-multiple",l.type="file",l.hidden=!0,l.multiple=!0,document.body.appendChild(l),l.addEventListener("change",m=>{const v=[];for(let _=0;_<l.files.length;_++){const D=l.files[_];let L="jpeg";"image/png"===D.type?L="png":"image/gif"===D.type&&(L="gif"),v.push({webPath:URL.createObjectURL(D),format:L})}ie({photos:v}),p()}),l.addEventListener("cancel",m=>{we(new s.I9("User cancelled photos app")),p()})),l.accept="image/*",l.click()}_getCameraPhoto(ie,we){return new Promise((l,p)=>{const m=new FileReader,v=ie.type.split("/")[1];"uri"===we.resultType?l({webPath:URL.createObjectURL(ie),format:v,saved:!1}):(m.readAsDataURL(ie),m.onloadend=()=>{const _=m.result;l("dataUrl"===we.resultType?{dataUrl:_,format:v,saved:!1}:{base64String:_.split(",")[1],format:v,saved:!1})},m.onerror=_=>{p(_)})})}checkPermissions(){var ie=this;return(0,o.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw ie.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw ie.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var ie=this;return(0,o.A)(function*(){throw ie.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var ie=this;return(0,o.A)(function*(){throw ie.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var ie=this;return(0,o.A)(function*(){throw ie.unavailable("Not implemented on web.")})()}}new k;const Je=(0,s.F3)("Camera",{web:()=>new k})},7705(Wt,ut,b){"use strict";b.d(ut,{ES_:()=>we,HJs:()=>go,Hbi:()=>fn,L39:()=>A,MKu:()=>_t,_q3:()=>Xe,a0P:()=>uo,fpN:()=>ln,gRc:()=>Hn,hFB:()=>D,naY:()=>an,oH4:()=>Dt});var s=b(2615),o=b(8440),S=b(3664);const Pe=Symbol("InputSignalNode#UNSET"),Ce={...o.s0,transformFn:void 0,applyValueToInputSignal(Ee,Q){(0,o.j2)(Ee,Q)}};function Le(Ee,Q){const de=Object.create(Ce);function je(){if((0,o.mK)(de),de.value===Pe)throw new s.buA(-950,null);return de.value}return de.value=Ee,de.transformFn=Q?.transform,je[o.bh]=de,je}class we{attributeName;constructor(Q){this.attributeName=Q}__NG_ELEMENT_ID__=()=>(0,S.kS0)(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}function v(Ee,Q){return Le(Ee,Q)}new s.nKC("").__NG_ELEMENT_ID__=Ee=>{const Q=(0,s.Mx4)();if(null===Q)throw new s.buA(204,!1);if(2&Q.type)return Q.value;if(8&Ee)return null;throw new s.buA(204,!1)};const D=(v.required=function _(Ee){return Le(Pe,Ee)},v),At=new s.nKC(""),vt=new s.nKC("");function Ut(Ee){return!Ee.moduleRef}let Bt;function ht(){Bt=Nt}function Nt(Ee,Q){const de=Ee.injector.get(S.o8S);if(Ee._bootstrapComponents.length>0)Ee._bootstrapComponents.forEach(je=>de.bootstrap(je));else{if(!Ee.instance.ngDoBootstrap)throw new s.buA(-403,!1);Ee.instance.ngDoBootstrap(de)}Q.push(Ee)}let on=(()=>{class Ee{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(de){this._injector=de}bootstrapModuleFactory(de,je){const mt=je?.scheduleInRootZone,kt=je?.ignoreChangesOutsideZone,Zt=[(0,S.SdI)({ngZoneFactory:()=>(0,S.G5x)(je?.ngZone,{...(0,S.cZr)({eventCoalescing:je?.ngZoneEventCoalescing,runCoalescing:je?.ngZoneRunCoalescing}),scheduleInRootZone:mt}),ignoreChangesOutsideZone:kt}),{provide:s.hk6,useExisting:S.Ts$},s.gv8],Dn=(0,S.VzW)(de.moduleType,this.injector,Zt);return ht(),function dt(Ee){const Q=Ut(Ee)?Ee.r3Injector:Ee.moduleRef.injector,de=Q.get(S.SKi);return de.run(()=>{Ut(Ee)?Ee.r3Injector.resolveInjectorInitializers():Ee.moduleRef.resolveInjectorInitializers();const je=Q.get(s.ZTf);let mt;if(de.runOutsideAngular(()=>{mt=de.onError.subscribe({next:je})}),Ut(Ee)){const xt=()=>Q.destroy(),kt=Ee.platformInjector.get(At);kt.add(xt),Q.onDestroy(()=>{mt.unsubscribe(),kt.delete(xt)})}else{const xt=()=>Ee.moduleRef.destroy(),kt=Ee.platformInjector.get(At);kt.add(xt),Ee.moduleRef.onDestroy(()=>{(0,S.TFI)(Ee.allPlatformModules,Ee.moduleRef),mt.unsubscribe(),kt.delete(xt)})}return function Ot(Ee,Q,de){try{const je=de();return(0,S.yLl)(je)?je.catch(mt=>{throw Q.runOutsideAngular(()=>Ee(mt)),mt}):je}catch(je){throw Q.runOutsideAngular(()=>Ee(je)),je}}(je,de,()=>{const xt=Q.get(s.rev),kt=xt.add(),Zt=Q.get(S.H1s);return Zt.runInitializers(),Zt.donePromise.then(()=>{const Dn=Q.get(S.xe9,S.DkB);if((0,S.e6s)(Dn||S.DkB),!Q.get(vt,!0))return Ut(Ee)?Q.get(S.o8S):(Ee.allPlatformModules.push(Ee.moduleRef),Ee.moduleRef);if(Ut(Ee)){const Yn=Q.get(S.o8S);return void 0!==Ee.rootComponent&&Yn.bootstrap(Ee.rootComponent),Yn}return Bt?.(Ee.moduleRef,Ee.allPlatformModules),Ee.moduleRef}).finally(()=>{xt.remove(kt)})})})}({moduleRef:Dn,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(de,je=[]){const mt=(0,S.lJT)({},je);return ht(),function Ae(Ee,Q,de){const je=new S.Co$(de);return Promise.resolve(je)}(0,0,de).then(xt=>this.bootstrapModuleFactory(xt,mt))}onDestroy(de){this._destroyListeners.push(de)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new s.buA(404,!1);this._modules.slice().forEach(je=>je.destroy()),this._destroyListeners.forEach(je=>je());const de=this._injector.get(At,null);de&&(de.forEach(je=>je()),de.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(je){return new(je||Ee)((0,s.KVO)(s.zZn))};static \u0275prov=(0,s.jDH)({token:Ee,factory:Ee.\u0275fac,providedIn:"platform"})}return Ee})(),ft=null;function Dt(Ee,Q,de=[]){const je=`Platform: ${Q}`,mt=new s.nKC(je);return(xt=[])=>{let kt=Vn();if(!kt){const Zt=[...de,...xt,{provide:mt,useValue:!0}];kt=Ee?.(Zt)??function yt(Ee){if(Vn())throw new s.buA(400,!1);(0,S.pl0)(),(0,S.ypd)(),ft=Ee;const Q=Ee.get(on);return function _n(Ee){const Q=Ee.get(S.PLl,null);(0,s.N4e)(Ee,()=>{Q?.forEach(de=>de())})}(Ee),Q}(function en(Ee=[],Q){return s.zZn.create({name:Q,providers:[{provide:s.GBX,useValue:"platform"},{provide:At,useValue:new Set([()=>ft=null])},...Ee]})}(Zt,je))}return function Cn(){const Q=Vn();if(!Q)throw new s.buA(-401,!1);return Q}()}}function Vn(){return ft?.get(on)??null}function an(){return!1}let Hn=(()=>class Ee{static __NG_ELEMENT_ID__=ur})();function ur(Ee){return function gr(Ee,Q,de){if((0,s.Qs1)(Ee)&&!de){const je=(0,s.KdJ)(Ee.index,Q);return new S.NCX(je,je)}return 175&Ee.type?new S.NCX(Q[s.b5C],Q):null}((0,s.Mx4)(),(0,s.OAn)(),!(16&~Ee))}class Jn{constructor(){}supports(Q){return(0,S.ozJ)(Q)}create(Q){return new vr(Q)}}const er=(Ee,Q)=>Q;class vr{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(Q){this._trackByFn=Q||er}forEachItem(Q){let de;for(de=this._itHead;null!==de;de=de._next)Q(de)}forEachOperation(Q){let de=this._itHead,je=this._removalsHead,mt=0,xt=null;for(;de||je;){const kt=!je||de&&de.currentIndex<Sn(je,mt,xt)?de:je,Zt=Sn(kt,mt,xt),Dn=kt.currentIndex;if(kt===je)mt--,je=je._nextRemoved;else if(de=de._next,null==kt.previousIndex)mt++;else{xt||(xt=[]);const jn=Zt-mt,Yn=Dn-mt;if(jn!=Yn){for(let Mr=0;Mr<jn;Mr++){const Or=Mr<xt.length?xt[Mr]:xt[Mr]=0,_r=Or+Mr;Yn<=_r&&_r<jn&&(xt[Mr]=Or+1)}xt[kt.previousIndex]=Yn-jn}}Zt!==Dn&&Q(kt,Zt,Dn)}}forEachPreviousItem(Q){let de;for(de=this._previousItHead;null!==de;de=de._nextPrevious)Q(de)}forEachAddedItem(Q){let de;for(de=this._additionsHead;null!==de;de=de._nextAdded)Q(de)}forEachMovedItem(Q){let de;for(de=this._movesHead;null!==de;de=de._nextMoved)Q(de)}forEachRemovedItem(Q){let de;for(de=this._removalsHead;null!==de;de=de._nextRemoved)Q(de)}forEachIdentityChange(Q){let de;for(de=this._identityChangesHead;null!==de;de=de._nextIdentityChange)Q(de)}diff(Q){if(null==Q&&(Q=[]),!(0,S.ozJ)(Q))throw new s.buA(900,!1);return this.check(Q)?this:null}onDestroy(){}check(Q){this._reset();let mt,xt,kt,de=this._itHead,je=!1;if(Array.isArray(Q)){this.length=Q.length;for(let Zt=0;Zt<this.length;Zt++)xt=Q[Zt],kt=this._trackByFn(Zt,xt),null!==de&&Object.is(de.trackById,kt)?(je&&(de=this._verifyReinsertion(de,xt,kt,Zt)),Object.is(de.item,xt)||this._addIdentityChange(de,xt)):(de=this._mismatch(de,xt,kt,Zt),je=!0),de=de._next}else mt=0,(0,S.utN)(Q,Zt=>{kt=this._trackByFn(mt,Zt),null!==de&&Object.is(de.trackById,kt)?(je&&(de=this._verifyReinsertion(de,Zt,kt,mt)),Object.is(de.item,Zt)||this._addIdentityChange(de,Zt)):(de=this._mismatch(de,Zt,kt,mt),je=!0),de=de._next,mt++}),this.length=mt;return this._truncate(de),this.collection=Q,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let Q;for(Q=this._previousItHead=this._itHead;null!==Q;Q=Q._next)Q._nextPrevious=Q._next;for(Q=this._additionsHead;null!==Q;Q=Q._nextAdded)Q.previousIndex=Q.currentIndex;for(this._additionsHead=this._additionsTail=null,Q=this._movesHead;null!==Q;Q=Q._nextMoved)Q.previousIndex=Q.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(Q,de,je,mt){let xt;return null===Q?xt=this._itTail:(xt=Q._prev,this._remove(Q)),null!==(Q=null===this._unlinkedRecords?null:this._unlinkedRecords.get(je,null))?(Object.is(Q.item,de)||this._addIdentityChange(Q,de),this._reinsertAfter(Q,xt,mt)):null!==(Q=null===this._linkedRecords?null:this._linkedRecords.get(je,mt))?(Object.is(Q.item,de)||this._addIdentityChange(Q,de),this._moveAfter(Q,xt,mt)):Q=this._addAfter(new Cr(de,je),xt,mt),Q}_verifyReinsertion(Q,de,je,mt){let xt=null===this._unlinkedRecords?null:this._unlinkedRecords.get(je,null);return null!==xt?Q=this._reinsertAfter(xt,Q._prev,mt):Q.currentIndex!=mt&&(Q.currentIndex=mt,this._addToMoves(Q,mt)),Q}_truncate(Q){for(;null!==Q;){const de=Q._next;this._addToRemovals(this._unlink(Q)),Q=de}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(Q,de,je){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(Q);const mt=Q._prevRemoved,xt=Q._nextRemoved;return null===mt?this._removalsHead=xt:mt._nextRemoved=xt,null===xt?this._removalsTail=mt:xt._prevRemoved=mt,this._insertAfter(Q,de,je),this._addToMoves(Q,je),Q}_moveAfter(Q,de,je){return this._unlink(Q),this._insertAfter(Q,de,je),this._addToMoves(Q,je),Q}_addAfter(Q,de,je){return this._insertAfter(Q,de,je),this._additionsTail=null===this._additionsTail?this._additionsHead=Q:this._additionsTail._nextAdded=Q,Q}_insertAfter(Q,de,je){const mt=null===de?this._itHead:de._next;return Q._next=mt,Q._prev=de,null===mt?this._itTail=Q:mt._prev=Q,null===de?this._itHead=Q:de._next=Q,null===this._linkedRecords&&(this._linkedRecords=new Ir),this._linkedRecords.put(Q),Q.currentIndex=je,Q}_remove(Q){return this._addToRemovals(this._unlink(Q))}_unlink(Q){null!==this._linkedRecords&&this._linkedRecords.remove(Q);const de=Q._prev,je=Q._next;return null===de?this._itHead=je:de._next=je,null===je?this._itTail=de:je._prev=de,Q}_addToMoves(Q,de){return Q.previousIndex===de||(this._movesTail=null===this._movesTail?this._movesHead=Q:this._movesTail._nextMoved=Q),Q}_addToRemovals(Q){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ir),this._unlinkedRecords.put(Q),Q.currentIndex=null,Q._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=Q,Q._prevRemoved=null):(Q._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=Q),Q}_addIdentityChange(Q,de){return Q.item=de,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=Q:this._identityChangesTail._nextIdentityChange=Q,Q}}class Cr{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(Q,de){this.item=Q,this.trackById=de}}class $r{_head=null;_tail=null;add(Q){null===this._head?(this._head=this._tail=Q,Q._nextDup=null,Q._prevDup=null):(this._tail._nextDup=Q,Q._prevDup=this._tail,Q._nextDup=null,this._tail=Q)}get(Q,de){let je;for(je=this._head;null!==je;je=je._nextDup)if((null===de||de<=je.currentIndex)&&Object.is(je.trackById,Q))return je;return null}remove(Q){const de=Q._prevDup,je=Q._nextDup;return null===de?this._head=je:de._nextDup=je,null===je?this._tail=de:je._prevDup=de,null===this._head}}class Ir{map=new Map;put(Q){const de=Q.trackById;let je=this.map.get(de);je||(je=new $r,this.map.set(de,je)),je.add(Q)}get(Q,de){const mt=this.map.get(Q);return mt?mt.get(Q,de):null}remove(Q){const de=Q.trackById;return this.map.get(de).remove(Q)&&this.map.delete(de),Q}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Sn(Ee,Q,de){const je=Ee.previousIndex;if(null===je)return je;let mt=0;return de&&je<de.length&&(mt=de[je]),je+Q+mt}class wr{constructor(){}supports(Q){return Q instanceof Map||(0,S.vDg)(Q)}create(){return new Nr}}class Nr{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(Q){let de;for(de=this._mapHead;null!==de;de=de._next)Q(de)}forEachPreviousItem(Q){let de;for(de=this._previousMapHead;null!==de;de=de._nextPrevious)Q(de)}forEachChangedItem(Q){let de;for(de=this._changesHead;null!==de;de=de._nextChanged)Q(de)}forEachAddedItem(Q){let de;for(de=this._additionsHead;null!==de;de=de._nextAdded)Q(de)}forEachRemovedItem(Q){let de;for(de=this._removalsHead;null!==de;de=de._nextRemoved)Q(de)}diff(Q){if(Q){if(!(Q instanceof Map||(0,S.vDg)(Q)))throw new s.buA(900,!1)}else Q=new Map;return this.check(Q)?this:null}onDestroy(){}check(Q){this._reset();let de=this._mapHead;if(this._appendAfter=null,this._forEach(Q,(je,mt)=>{if(de&&de.key===mt)this._maybeAddToChanges(de,je),this._appendAfter=de,de=de._next;else{const xt=this._getOrCreateRecordForKey(mt,je);de=this._insertBeforeOrAppend(de,xt)}}),de){de._prev&&(de._prev._next=null),this._removalsHead=de;for(let je=de;null!==je;je=je._nextRemoved)je===this._mapHead&&(this._mapHead=null),this._records.delete(je.key),je._nextRemoved=je._next,je.previousValue=je.currentValue,je.currentValue=null,je._prev=null,je._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(Q,de){if(Q){const je=Q._prev;return de._next=Q,de._prev=je,Q._prev=de,je&&(je._next=de),Q===this._mapHead&&(this._mapHead=de),this._appendAfter=Q,Q}return this._appendAfter?(this._appendAfter._next=de,de._prev=this._appendAfter):this._mapHead=de,this._appendAfter=de,null}_getOrCreateRecordForKey(Q,de){if(this._records.has(Q)){const mt=this._records.get(Q);this._maybeAddToChanges(mt,de);const xt=mt._prev,kt=mt._next;return xt&&(xt._next=kt),kt&&(kt._prev=xt),mt._next=null,mt._prev=null,mt}const je=new tr(Q);return this._records.set(Q,je),je.currentValue=de,this._addToAdditions(je),je}_reset(){if(this.isDirty){let Q;for(this._previousMapHead=this._mapHead,Q=this._previousMapHead;null!==Q;Q=Q._next)Q._nextPrevious=Q._next;for(Q=this._changesHead;null!==Q;Q=Q._nextChanged)Q.previousValue=Q.currentValue;for(Q=this._additionsHead;null!=Q;Q=Q._nextAdded)Q.previousValue=Q.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(Q,de){Object.is(de,Q.currentValue)||(Q.previousValue=Q.currentValue,Q.currentValue=de,this._addToChanges(Q))}_addToAdditions(Q){null===this._additionsHead?this._additionsHead=this._additionsTail=Q:(this._additionsTail._nextAdded=Q,this._additionsTail=Q)}_addToChanges(Q){null===this._changesHead?this._changesHead=this._changesTail=Q:(this._changesTail._nextChanged=Q,this._changesTail=Q)}_forEach(Q,de){Q instanceof Map?Q.forEach(de):Object.keys(Q).forEach(je=>de(Q[je],je))}}class tr{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(Q){this.key=Q}}function bn(){return new Xe([new Jn])}let Xe=(()=>{class Ee{factories;static \u0275prov=(0,s.jDH)({token:Ee,providedIn:"root",factory:bn});constructor(de){this.factories=de}static create(de,je){if(null!=je){const mt=je.factories.slice();de=de.concat(mt)}return new Ee(de)}static extend(de){return{provide:Ee,useFactory:()=>{const je=(0,s.WQX)(Ee,{optional:!0,skipSelf:!0});return Ee.create(de,je||bn())}}}find(de){const je=this.factories.find(mt=>mt.supports(de));if(null!=je)return je;throw new s.buA(901,!1)}}return Ee})();function It(){return new _t([new wr])}let _t=(()=>{class Ee{static \u0275prov=(0,s.jDH)({token:Ee,providedIn:"root",factory:It});factories;constructor(de){this.factories=de}static create(de,je){if(je){const mt=je.factories.slice();de=de.concat(mt)}return new Ee(de)}static extend(de){return{provide:Ee,useFactory:()=>{const je=(0,s.WQX)(Ee,{optional:!0,skipSelf:!0});return Ee.create(de,je||It())}}}find(de){const je=this.factories.find(mt=>mt.supports(de));if(je)return je;throw new s.buA(901,!1)}}return Ee})();const ln=Dt(null,"core",[]);let fn=(()=>{class Ee{constructor(de){}static \u0275fac=function(je){return new(je||Ee)((0,s.KVO)(S.o8S))};static \u0275mod=(0,S.$C)({type:Ee});static \u0275inj=(0,s.G2t)({})}return Ee})();function A(Ee){return"boolean"==typeof Ee?Ee:null!=Ee&&"false"!==Ee}function uo(Ee,Q){const de=(0,s.xUg)(Ee),je=Q.elementInjector||(0,s.WB9)();return new S.eHC(de).create(je,Q.projectableNodes,Q.hostElement,Q.environmentInjector,Q.directives,Q.bindings)}function go(Ee){const Q=(0,s.xUg)(Ee);if(!Q)return null;const de=new S.eHC(Q);return{get selector(){return de.selector},get type(){return de.componentType},get inputs(){return de.inputs},get outputs(){return de.outputs},get ngContentSelectors(){return de.ngContentSelectors},get isStandalone(){return Q.standalone},get isSignal(){return Q.signals}}}},7707(Wt,ut,b){"use strict";b.d(ut,{Ms:()=>_,vU:()=>l});var s=b(8071),o=b(8359),S=b(1026),Pe=b(5334),Ce=b(5343);const k=me("C",void 0,void 0);function me(B,Z,G){return{kind:B,value:Z,error:G}}var ie=b(9270),we=b(9786);class l extends o.yU{constructor(Z){super(),this.isStopped=!1,Z?(this.destination=Z,(0,o.Uv)(Z)&&Z.add(this)):this.destination=ae}static create(Z,G,he){return new _(Z,G,he)}next(Z){this.isStopped?K(function Je(B){return me("N",B,void 0)}(Z),this):this._next(Z)}error(Z){this.isStopped?K(function Le(B){return me("E",void 0,B)}(Z),this):(this.isStopped=!0,this._error(Z))}complete(){this.isStopped?K(k,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Z){this.destination.next(Z)}_error(Z){try{this.destination.error(Z)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const p=Function.prototype.bind;function m(B,Z){return p.call(B,Z)}class v{constructor(Z){this.partialObserver=Z}next(Z){const{partialObserver:G}=this;if(G.next)try{G.next(Z)}catch(he){D(he)}}error(Z){const{partialObserver:G}=this;if(G.error)try{G.error(Z)}catch(he){D(he)}else D(Z)}complete(){const{partialObserver:Z}=this;if(Z.complete)try{Z.complete()}catch(G){D(G)}}}class _ extends l{constructor(Z,G,he){let fe;if(super(),(0,s.T)(Z)||!Z)fe={next:Z??void 0,error:G??void 0,complete:he??void 0};else{let _e;this&&S.$.useDeprecatedNextContext?(_e=Object.create(Z),_e.unsubscribe=()=>this.unsubscribe(),fe={next:Z.next&&m(Z.next,_e),error:Z.error&&m(Z.error,_e),complete:Z.complete&&m(Z.complete,_e)}):fe=Z}this.destination=new v(fe)}}function D(B){S.$.useDeprecatedSynchronousErrorHandling?(0,we.l)(B):(0,Pe.m)(B)}function K(B,Z){const{onStoppedNotification:G}=S.$;G&&ie.f.setTimeout(()=>G(B,Z))}const ae={closed:!0,next:Ce.l,error:function L(B){throw B},complete:Ce.l}},7762(Wt,ut,b){"use strict";b.d(ut,{L:()=>S});var s=b(5083),o=b(8254);const S=(0,s.F3)("Geolocation",{web:()=>b.e(2920).then(b.bind(b,2920)).then(Pe=>new Pe.GeolocationWeb)});(0,o.Y)()},7837(Wt,ut,b){"use strict";b.d(ut,{a:()=>we,c:()=>o,p:()=>ie});class s{constructor(){this.m=new Map}reset(m){this.m=new Map(Object.entries(m))}get(m,v){const _=this.m.get(m);return void 0!==_?_:v}getBoolean(m,v=!1){const _=this.m.get(m);return void 0===_?v:"string"==typeof _?"true"===_:!!_}getNumber(m,v){const _=parseFloat(this.m.get(m));return isNaN(_)?void 0!==v?v:NaN:_}set(m,v){this.m.set(m,v)}}const o=new s;var me=function(p){return p.OFF="OFF",p.ERROR="ERROR",p.WARN="WARN",p}(me||{});const ie=(p,...m)=>{const v=o.get("logLevel",me.WARN);if([me.WARN].includes(v))return console.warn(`[Ionic Warning]: ${p}`,...m)},we=(p,...m)=>{const v=o.get("logLevel",me.ERROR);if([me.ERROR,me.WARN].includes(v))return console.error(`[Ionic Error]: ${p}`,...m)}},7908(Wt,ut,b){"use strict";function s(o,S){if(o){const Pe=o.indexOf(S);0<=Pe&&o.splice(Pe,1)}}b.d(ut,{o:()=>s})},7953(Wt,ut,b){"use strict";b.d(ut,{T:()=>o});var s=b(8071);function o(S){return Symbol.asyncIterator&&(0,s.T)(S?.[Symbol.asyncIterator])}},8060(Wt,ut,b){"use strict";b.d(ut,{r:()=>Je});var s=b(467),o=b(2084),S=b(2615),Pe=b(918),Ce=b(5029),k=b(4938),Le=b(8863);let Je=(()=>{var me;class ie{constructor(l,p,m,v){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=v,this.REPORTS_BUCKET="health",this.IMAGES_BUCKET="health-images",this.DRAFT_FILE="health_draft_current.json",this.PENDING_QUEUE_FILE="health_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} HealthSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} HealthSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(_=>console.error("\u274c HealthSyncService: processPendingQueue failed:",_))}),setTimeout(()=>{console.log("\u{1f680} HealthSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(_=>console.error("\u274c HealthSyncService: Initial queue check failed:",_))},5e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 HealthSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(_=>console.error("\u274c HealthSyncService: Periodic queue check failed:",_))},3e5),console.log("\u2705 HealthSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Health${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];return l?.canopyCover&&"<1%"!==l.canopyCover&&m.push(`Canopy ${l.canopyCover}`),l?.recruitmentCover&&"<1%"!==l.recruitmentCover&&m.push(`Recruitment ${l.recruitmentCover}`),l?.deadTrees>0&&m.push(`${l.deadTrees} dead`),l?.predation&&m.push(`predation: ${l.predation.replace(/_/g," ")}`),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"health"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",v=l?.quadNumber||"";let _=`health_draft_${p}`;return m&&(_+=`_zone${m}`),v&&(_+=`_quad${v}`),`${_}.json`}dataUrlToBlob(l){return(0,s.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,s.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,s.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("HealthSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=l.reportId||p.generateReportId(),_={reportId:v,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos,status:l.status||{incomplete:!0,sent:!1,pending:!1}},D=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(D,_);const L=yield p.sharedDataService.readJsonFile(D);if(!L||L.reportId!==_.reportId)throw new Error("HealthSyncService: draft verification failed");const K=yield p.storage.getUser(),ae=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(K?.username||"unknown","health",v,ae)})()}loadDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,s.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,s.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(_=>_.startsWith("health_draft_")),v=[];for(const _ of m)try{const D=yield l.sharedDataService.readJsonFile(_);if(D){const L=l.getLocationLabelFromFilename(_,D.form);v.push({draft:D,locationLabel:L})}}catch(D){console.warn("HealthSyncService: Failed to read draft file",_,D)}return v})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,s.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,s.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:v}of m)p.push({report:v,status:"draft"});try{const _=(yield l.sharedDataService.listFiles()).filter(D=>{if(!D.startsWith("Health")||D.includes("_report_"))return!1;const L=D.replace(".json","");return/^Health\d{8}_\d{6}$/.test(L)&&!D.includes("_backup")&&!D.includes("_draft")&&!D.includes("_queue")});for(const D of _)try{const L=yield l.sharedDataService.readJsonFile(D);L&&p.push({report:L,status:L.status.sent?"submitted":"pending"})}catch(L){console.warn("HealthSyncService: Failed to read report file",D,L)}}catch(v){console.error("HealthSyncService: Failed to list files:",v)}return p.sort((v,_)=>{const D=new Date(v.report.updatedAt||v.report.createdAt).getTime();return new Date(_.report.updatedAt||_.report.createdAt).getTime()-D}),p})()}submitFinal(l){var p=this;return(0,s.A)(function*(){const m=(0,o.E)(),v=!0===l.isEditMode,_=l.existingReportId||p.generateReportId(),D={reportId:_,createdAt:m,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:{soil:l.photos.soil||null,predation:l.photos.predation||null,pollution:l.photos.pollution||null},status:{incomplete:!1,sent:!1,pending:!1}};v&&(D.editedAt=m);const L=`${_}.json`;yield p.sharedDataService.writeJsonFile(L,D);const K=yield p.sharedDataService.readJsonFile(L);if(!K||K.reportId!==_)throw new Error("HealthSyncService: local report verification failed");const ae=yield p.storage.getUser(),B=ae?ae.organization||ae.username:null;let Z;if(l.originalSubmittedBy&&B&&l.originalSubmittedBy!==B?Z=`${l.originalSubmittedBy}, ${B}`:B&&(Z=B),D.submittedBy=Z,yield p.sharedDataService.writeJsonFile(L,D),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:_,localReportFile:L}),{reportId:_,queued:!0};try{yield p.uploadReportAndImages(D,l.originalSubmittedBy),D.status.sent=!0,D.status.pending=!1,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.clearDraft();const fe=(yield p.storage.getUser())?.username||"unknown",_e=p.getFormSummary(l.formValue),Re=D.submittedBy;return v?p.monitoringLog.recordFormEdited(fe,"health",_,!1,_e,Re):p.monitoringLog.recordFormSubmitted(fe,"health",_,!1,_e,Re),{reportId:_,queued:!1}}catch(he){const fe=String(he?.message?he.message:he);D.status.pending=!0,D.status.lastError=fe,D.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(L,D),yield p.enqueuePending({reportId:_,localReportFile:L});const Re=(yield p.storage.getUser())?.username||"unknown",ve=p.getFormSummary(l.formValue),Ye=D.submittedBy;return v?p.monitoringLog.recordFormEdited(Re,"health",_,!0,ve,Ye):p.monitoringLog.recordFormSubmitted(Re,"health",_,!0,ve,Ye),{reportId:_,queued:!0}}})()}enqueuePending(l){var p=this;return(0,s.A)(function*(){console.log("\u{1f4dd} HealthSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(_=>_.reportId===l.reportId)?console.log("\u26a0\ufe0f HealthSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 HealthSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} HealthSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,s.A)(function*(){if(console.log("\u{1f504} HealthSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f HealthSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f HealthSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} HealthSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 HealthSyncService: Queue is empty, nothing to process");const m=[];for(const v of p.items){console.log("\u{1f50d} HealthSyncService: Processing item:",v.reportId,"(attempt",v.attempts+1,")");try{const _=yield l.sharedDataService.readJsonFile(v.localReportFile);if(!_){console.error("\u274c HealthSyncService: Local report file missing for",v.reportId),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(_),console.log("\u2705 HealthSyncService: Upload succeeded for",v.reportId),_.status.sent=!0,_.status.pending=!1,_.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(v.localReportFile,_),console.log("\u{1f4be} HealthSyncService: Marked report as sent")}catch(_){console.error("\u274c HealthSyncService: Upload failed for",v.reportId,":",_),m.push({...v,attempts:v.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} HealthSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} HealthSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,s.A)(function*(){console.log("\u{1f4e4} HealthSyncService: Starting upload for report",l.reportId);const v=m.getClient(),_={};l.photos.soil&&(_.soil=yield m.uploadImageDataUrl(`${l.reportId}/soil.jpg`,l.photos.soil)),l.photos.predation&&(_.predation=yield m.uploadImageDataUrl(`${l.reportId}/predation.jpg`,l.photos.predation)),l.photos.pollution&&(_.pollution=yield m.uploadImageDataUrl(`${l.reportId}/pollution.jpg`,l.photos.pollution));const D=JSON.parse(JSON.stringify(l));D.photos=_,D.status={incomplete:!1,sent:!0,pending:!1};const L=`${l.reportId}.json`,K=new Blob([JSON.stringify(D)],{type:"application/json"}),{error:ae}=yield v.storage.from(m.REPORTS_BUCKET).upload(L,K,{contentType:"application/json",upsert:!0});if(ae)throw console.error("\u274c HealthSyncService: JSON upload error:",ae),ae;console.log("\u2705 HealthSyncService: Successfully uploaded JSON to",L);const B=yield m.storage.getUser(),Z=B?B.organization||B.username:null;let G;G=p&&Z&&p!==Z?`${p}, ${Z}`:Z;const he={report_id:l.reportId,submitted_by:G,json_path:L,location:l.form.location||null,assessment_date:l.form.date||null,zone_number:l.form.zoneNumber?`Zone ${l.form.zoneNumber}`:null,quad_number:l.form.quadNumber?`Quad ${l.form.quadNumber.replace(/\D/g,"")}`:null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:fe}=yield v.from("health_reports").upsert(he,{onConflict:"report_id"});if(fe)throw console.error("\u274c HealthSyncService: Database upsert error:",fe),fe;console.log("\u2705 HealthSyncService: Successfully upserted into health_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,s.A)(function*(){const v=m.getClient(),_=yield m.dataUrlToBlob(p),{error:D}=yield v.storage.from(m.IMAGES_BUCKET).upload(l,_,{contentType:_.type||"image/jpeg",upsert:!0});if(D)throw console.error("\u274c HealthSyncService: Image upload error for",l,":",D),D;return console.log("\u2705 HealthSyncService: Successfully uploaded image to",l),l})()}static#e=me=()=>(this.\u0275fac=function(p){return new(p||ie)(S.KVO(Pe.H),S.KVO(Ce.L),S.KVO(k.w),S.KVO(Le.u))},this.\u0275prov=S.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return me(),ie})()},8071(Wt,ut,b){"use strict";function s(o){return"function"==typeof o}b.d(ut,{T:()=>s})},8132(Wt,ut,b){"use strict";b.d(ut,{Kp:()=>Z,Wk:()=>L,iI:()=>ft});var s=b(467),o=b(7303),S=b(177),Pe=b(2200),Ce=b(7705),k=b(2615),Le=b(3664),Je=b(9295),me=b(5921),ie=b(1413),we=b(6648),l=b(7673),p=b(9437),m=b(274),v=b(5964),_=b(6365),D=b(1397);let L=(()=>{class Pt{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=(0,k.vPA)(null);get href(){return(0,Je.O8)(this.reactiveHref)}set href(Tt){this.reactiveHref.set(Tt)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ie.B;applicationErrorHandler=(0,k.WQX)(k.ZTf);options=(0,k.WQX)(me.J_,{optional:!0});constructor(Tt,$t,an,pn,An,or){this.router=Tt,this.route=$t,this.tabIndexAttribute=an,this.renderer=pn,this.el=An,this.locationStrategy=or,this.reactiveHref.set((0,k.WQX)(new Ce.ES_("href"),{optional:!0}));const Zn=An.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Zn||"area"===Zn||!("object"!=typeof customElements||!customElements.get(Zn)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(void 0!==this.subscription||!this.isAnchorElement)return;let Tt=this.preserveFragment;const $t=an=>"merge"===an||"preserve"===an;Tt||=$t(this.queryParamsHandling),Tt||=!this.queryParamsHandling&&!$t(this.options?.defaultQueryParamsHandling),Tt&&(this.subscription=this.router.events.subscribe(an=>{an instanceof me.wF&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(Tt){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",Tt)}ngOnChanges(Tt){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(Tt){null==Tt?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=(0,me.wO)(Tt)||Array.isArray(Tt)?Tt:[Tt],this.setTabIndexIfNotOnNativeEl("0"))}onClick(Tt,$t,an,pn,An){const or=this.urlTree;if(null===or||this.isAnchorElement&&(0!==Tt||$t||an||pn||An||"string"==typeof this.target&&"_self"!=this.target))return!0;const Zn={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(or,Zn)?.catch(Hn=>{this.applicationErrorHandler(Hn)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const Tt=this.urlTree;this.reactiveHref.set(null!==Tt&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(Tt))??"":null)}applyAttributeValue(Tt,$t){const an=this.renderer,pn=this.el.nativeElement;null!==$t?an.setAttribute(pn,Tt,$t):an.removeAttribute(pn,Tt)}get urlTree(){return null===this.routerLinkInput?null:(0,me.wO)(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function($t){return new($t||Pt)(Le.rXU(me.Ix),Le.rXU(me.nX),Le.kS0("tabindex"),Le.rXU(Le.sFG),Le.rXU(Le.aKT),Le.rXU(o.hb))};static \u0275dir=Le.FsC({type:Pt,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function($t,an){1&$t&&Le.bIt("click",function(An){return an.onClick(An.button,An.ctrlKey,An.shiftKey,An.altKey,An.metaKey)}),2&$t&&Le.BMQ("href",an.reactiveHref(),Le.n$t)("target",an.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ce.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ce.L39],replaceUrl:[2,"replaceUrl","replaceUrl",Ce.L39],routerLink:"routerLink"},features:[Le.OA$]})}return Pt})();class B{}let Z=(()=>{class Pt{preload(Tt,$t){return $t().pipe((0,p.W)(()=>(0,l.of)(null)))}static \u0275fac=function($t){return new($t||Pt)};static \u0275prov=k.jDH({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}return Pt})(),he=(()=>{class Pt{router;injector;preloadingStrategy;loader;subscription;constructor(Tt,$t,an,pn){this.router=Tt,this.injector=$t,this.preloadingStrategy=an,this.loader=pn}setUpPreloading(){this.subscription=this.router.events.pipe((0,v.p)(Tt=>Tt instanceof me.wF),(0,m.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(Tt,$t){const an=[];for(const pn of $t){pn.providers&&!pn._injector&&(pn._injector=(0,Le.Ol2)(pn.providers,Tt,`Route: ${pn.path}`));const An=pn._injector??Tt,or=pn._loadedInjector??An;(pn.loadChildren&&!pn._loadedRoutes&&void 0===pn.canLoad||pn.loadComponent&&!pn._loadedComponent)&&an.push(this.preloadConfig(An,pn)),(pn.children||pn._loadedRoutes)&&an.push(this.processRoutes(or,pn.children??pn._loadedRoutes))}return(0,we.H)(an).pipe((0,_.U)())}preloadConfig(Tt,$t){return this.preloadingStrategy.preload($t,()=>{let an;an=$t.loadChildren&&void 0===$t.canLoad?this.loader.loadChildren(Tt,$t):(0,l.of)(null);const pn=an.pipe((0,D.Z)(An=>null===An?(0,l.of)(void 0):($t._loadedRoutes=An.routes,$t._loadedInjector=An.injector,this.processRoutes(An.injector??Tt,An.routes))));if($t.loadComponent&&!$t._loadedComponent){const An=this.loader.loadComponent(Tt,$t);return(0,we.H)([pn,An]).pipe((0,_.U)())}return pn})}static \u0275fac=function($t){return new($t||Pt)(k.KVO(me.Ix),k.KVO(k.uvJ),k.KVO(B),k.KVO(me.D$))};static \u0275prov=k.jDH({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}return Pt})();const fe=new k.nKC("");let _e=(()=>{class Pt{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=me.wU;restoredId=0;store={};constructor(Tt,$t,an,pn,An={}){this.urlSerializer=Tt,this.transitions=$t,this.viewportScroller=an,this.zone=pn,this.options=An,An.scrollPositionRestoration||="disabled",An.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(Tt=>{Tt instanceof me.Z?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=Tt.navigationTrigger,this.restoredId=Tt.restoredState?Tt.restoredState.navigationId:0):Tt instanceof me.wF?(this.lastId=Tt.id,this.scheduleScrollEvent(Tt,this.urlSerializer.parse(Tt.urlAfterRedirects).fragment)):Tt instanceof me.lW&&Tt.code===me.mo.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(Tt,this.urlSerializer.parse(Tt.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(Tt=>{if(!(Tt instanceof me.OY))return;const $t={behavior:"instant"};Tt.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0],$t):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(Tt.position,$t):Tt.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(Tt.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(Tt,$t){var an=this;this.zone.runOutsideAngular((0,s.A)(function*(){yield new Promise(pn=>{setTimeout(pn),typeof requestAnimationFrame<"u"&&requestAnimationFrame(pn)}),an.zone.run(()=>{an.transitions.events.next(new me.OY(Tt,"popstate"===an.lastSource?an.store[an.restoredId]:null,$t))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function($t){Le.QTQ()};static \u0275prov=k.jDH({token:Pt,factory:Pt.\u0275fac})}return Pt})();function ze(Pt,_n){return{\u0275kind:Pt,\u0275providers:_n}}function Ae(){const Pt=(0,k.WQX)(k.zZn);return _n=>{const Tt=Pt.get(Le.o8S);if(_n!==Tt.components[0])return;const $t=Pt.get(me.Ix),an=Pt.get(H);1===Pt.get(ye)&&$t.initialNavigation(),Pt.get(pt,null,{optional:!0})?.setUpPreloading(),Pt.get(fe,null,{optional:!0})?.init(),$t.resetRootComponentType(Tt.componentTypes[0]),an.closed||(an.next(),an.complete(),an.unsubscribe())}}const H=new k.nKC("",{factory:()=>new ie.B}),ye=new k.nKC("",{providedIn:"root",factory:()=>1}),pt=new k.nKC("");function At(Pt){return ze(0,[{provide:pt,useExisting:he},{provide:B,useExisting:Pt}])}function ht(Pt){return(0,Le._jY)("NgRouterViewTransitions"),ze(9,[{provide:me.Pu,useValue:me.Lg},{provide:me.bK,useValue:{skipNextTransition:!!Pt?.skipInitialTransition,...Pt}}])}const on=[o.aZ,{provide:me.Sd,useClass:me.nU},me.Ix,me.Zp,{provide:me.nX,useFactory:function nt(Pt){return Pt.routerState.root},deps:[me.Ix]},me.D$,[]];let ft=(()=>{class Pt{constructor(){}static forRoot(Tt,$t){return{ngModule:Pt,providers:[on,[],{provide:me.bw,multi:!0,useValue:Tt},[],$t?.errorHandler?{provide:me.XR,useValue:$t.errorHandler}:[],{provide:me.J_,useValue:$t||{}},$t?.useHash?{provide:o.hb,useClass:Pe.fw}:{provide:o.hb,useClass:o.Sm},{provide:fe,useFactory:()=>{const Pt=(0,k.WQX)(S.Xr),_n=(0,k.WQX)(Le.SKi),Tt=(0,k.WQX)(me.J_),$t=(0,k.WQX)(me.J2),an=(0,k.WQX)(me.Sd);return Tt.scrollOffset&&Pt.setOffset(Tt.scrollOffset),new _e(an,$t,Pt,_n,Tt)}},$t?.preloadingStrategy?At($t.preloadingStrategy).\u0275providers:[],$t?.initialNavigation?Vn($t):[],$t?.bindToComponentInputs?ze(8,[me.tD,{provide:me.c1,useExisting:me.tD}]).\u0275providers:[],$t?.enableViewTransitions?ht().\u0275providers:[],[{provide:wn,useFactory:Ae},{provide:Le.iLQ,multi:!0,useExisting:wn}]]}}static forChild(Tt){return{ngModule:Pt,providers:[{provide:me.bw,multi:!0,useValue:Tt}]}}static \u0275fac=function($t){return new($t||Pt)};static \u0275mod=Le.$C({type:Pt});static \u0275inj=k.G2t({})}return Pt})();function Vn(Pt){return["disabled"===Pt.initialNavigation?ze(3,[(0,Le.phd)(()=>{(0,k.WQX)(me.Ix).setUpLocationChangeListener()}),{provide:ye,useValue:2}]).\u0275providers:[],"enabledBlocking"===Pt.initialNavigation?ze(2,[{provide:Le.tvf,useValue:!0},{provide:ye,useValue:0},(0,Le.phd)(()=>{const _n=(0,k.WQX)(k.zZn);return _n.get(o.hj,Promise.resolve()).then(()=>new Promise($t=>{const an=_n.get(me.Ix),pn=_n.get(H);(0,me.gk)(an,()=>{$t(!0)}),_n.get(me.J2).afterPreactivation=()=>($t(!0),pn.closed?(0,l.of)(void 0):pn),an.initialNavigation()}))})]).\u0275providers:[]]}const wn=new k.nKC("")},8178(Wt,ut,b){"use strict";var s=b(7303),o=b(2512),S=b(2615),Pe=b(177),Ce=b(2200),k=b(3664),Le=b(7705);class Je{_doc;constructor(q){this._doc=q}manager}let me=(()=>{class P extends Je{constructor(ce){super(ce)}supports(ce){return!0}addEventListener(ce,oe,ne,Qe){return ce.addEventListener(oe,ne,Qe),()=>this.removeEventListener(ce,oe,ne,Qe)}removeEventListener(ce,oe,ne,Qe){return ce.removeEventListener(oe,ne,Qe)}static \u0275fac=function(oe){return new(oe||P)(S.KVO(S.qQL))};static \u0275prov=S.jDH({token:P,factory:P.\u0275fac})}return P})();const ie=new S.nKC("");let we=(()=>{class P{_zone;_plugins;_eventNameToPlugin=new Map;constructor(ce,oe){this._zone=oe,ce.forEach(bt=>{bt.manager=this});const ne=ce.filter(bt=>!(bt instanceof me));this._plugins=ne.slice().reverse();const Qe=ce.find(bt=>bt instanceof me);Qe&&this._plugins.push(Qe)}addEventListener(ce,oe,ne,Qe){return this._findPluginFor(oe).addEventListener(ce,oe,ne,Qe)}getZone(){return this._zone}_findPluginFor(ce){let oe=this._eventNameToPlugin.get(ce);if(oe)return oe;if(oe=this._plugins.find(Qe=>Qe.supports(ce)),!oe)throw new S.buA(5101,!1);return this._eventNameToPlugin.set(ce,oe),oe}static \u0275fac=function(oe){return new(oe||P)(S.KVO(ie),S.KVO(k.SKi))};static \u0275prov=S.jDH({token:P,factory:P.\u0275fac})}return P})();const l="ng-app-id";function p(P){for(const q of P)q.remove()}function m(P,q){const ce=q.createElement("style");return ce.textContent=P,ce}function _(P,q){const ce=q.createElement("link");return ce.setAttribute("rel","stylesheet"),ce.setAttribute("href",P),ce}let D=(()=>{class P{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(ce,oe,ne,Qe={}){this.doc=ce,this.appId=oe,this.nonce=ne,function v(P,q,ce,oe){const ne=P.head?.querySelectorAll(`style[${l}="${q}"],link[${l}="${q}"]`);if(ne)for(const Qe of ne)Qe.removeAttribute(l),Qe instanceof HTMLLinkElement?oe.set(Qe.href.slice(Qe.href.lastIndexOf("/")+1),{usage:0,elements:[Qe]}):Qe.textContent&&ce.set(Qe.textContent,{usage:0,elements:[Qe]})}(ce,oe,this.inline,this.external),this.hosts.add(ce.head)}addStyles(ce,oe){for(const ne of ce)this.addUsage(ne,this.inline,m);oe?.forEach(ne=>this.addUsage(ne,this.external,_))}removeStyles(ce,oe){for(const ne of ce)this.removeUsage(ne,this.inline);oe?.forEach(ne=>this.removeUsage(ne,this.external))}addUsage(ce,oe,ne){const Qe=oe.get(ce);Qe?Qe.usage++:oe.set(ce,{usage:1,elements:[...this.hosts].map(bt=>this.addElement(bt,ne(ce,this.doc)))})}removeUsage(ce,oe){const ne=oe.get(ce);ne&&(ne.usage--,ne.usage<=0&&(p(ne.elements),oe.delete(ce)))}ngOnDestroy(){for(const[,{elements:ce}]of[...this.inline,...this.external])p(ce);this.hosts.clear()}addHost(ce){this.hosts.add(ce);for(const[oe,{elements:ne}]of this.inline)ne.push(this.addElement(ce,m(oe,this.doc)));for(const[oe,{elements:ne}]of this.external)ne.push(this.addElement(ce,_(oe,this.doc)))}removeHost(ce){this.hosts.delete(ce)}addElement(ce,oe){return this.nonce&&oe.setAttribute("nonce",this.nonce),ce.appendChild(oe)}static \u0275fac=function(oe){return new(oe||P)(S.KVO(S.qQL),S.KVO(k.sZ2),S.KVO(k.BIS,8),S.KVO(k.Agw))};static \u0275prov=S.jDH({token:P,factory:P.\u0275fac})}return P})();const L={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},K=/%COMP%/g,Z="%COMP%",G=`_nghost-${Z}`,he=`_ngcontent-${Z}`,_e=new S.nKC("",{providedIn:"root",factory:()=>!0});function Ye(P,q){return q.map(ce=>ce.replace(K,P))}let nt=(()=>{class P{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(ce,oe,ne,Qe,bt,qt,Jt=null,rn=null){this.eventManager=ce,this.sharedStylesHost=oe,this.appId=ne,this.removeStylesOnCompDestroy=Qe,this.doc=bt,this.ngZone=qt,this.nonce=Jt,this.tracingService=rn,this.platformIsServer=!1,this.defaultRenderer=new ze(ce,bt,qt,this.platformIsServer,this.tracingService)}createRenderer(ce,oe){if(!ce||!oe)return this.defaultRenderer;const ne=this.getOrCreateRenderer(ce,oe);return ne instanceof H?ne.applyToHost(ce):ne instanceof Ae&&ne.applyStyles(),ne}getOrCreateRenderer(ce,oe){const ne=this.rendererByCompId;let Qe=ne.get(oe.id);if(!Qe){const bt=this.doc,qt=this.ngZone,Jt=this.eventManager,rn=this.sharedStylesHost,Kt=this.removeStylesOnCompDestroy,Nn=this.platformIsServer,dr=this.tracingService;switch(oe.encapsulation){case k.gXe.Emulated:Qe=new H(Jt,rn,oe,this.appId,Kt,bt,qt,Nn,dr);break;case k.gXe.ShadowDom:return new Ve(Jt,rn,ce,oe,bt,qt,this.nonce,Nn,dr);default:Qe=new Ae(Jt,rn,oe,Kt,bt,qt,Nn,dr)}ne.set(oe.id,Qe)}return Qe}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(ce){this.rendererByCompId.delete(ce)}static \u0275fac=function(oe){return new(oe||P)(S.KVO(we),S.KVO(D),S.KVO(k.sZ2),S.KVO(_e),S.KVO(S.qQL),S.KVO(k.SKi),S.KVO(k.BIS),S.KVO(k.a8H,8))};static \u0275prov=S.jDH({token:P,factory:P.\u0275fac})}return P})();class ze{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(q,ce,oe,ne,Qe){this.eventManager=q,this.doc=ce,this.ngZone=oe,this.platformIsServer=ne,this.tracingService=Qe}destroy(){}destroyNode=null;createElement(q,ce){return ce?this.doc.createElementNS(L[ce]||ce,q):this.doc.createElement(q)}createComment(q){return this.doc.createComment(q)}createText(q){return this.doc.createTextNode(q)}appendChild(q,ce){(rt(q)?q.content:q).appendChild(ce)}insertBefore(q,ce,oe){q&&(rt(q)?q.content:q).insertBefore(ce,oe)}removeChild(q,ce){ce.remove()}selectRootElement(q,ce){let oe="string"==typeof q?this.doc.querySelector(q):q;if(!oe)throw new S.buA(-5104,!1);return ce||(oe.textContent=""),oe}parentNode(q){return q.parentNode}nextSibling(q){return q.nextSibling}setAttribute(q,ce,oe,ne){if(ne){ce=ne+":"+ce;const Qe=L[ne];Qe?q.setAttributeNS(Qe,ce,oe):q.setAttribute(ce,oe)}else q.setAttribute(ce,oe)}removeAttribute(q,ce,oe){if(oe){const ne=L[oe];ne?q.removeAttributeNS(ne,ce):q.removeAttribute(`${oe}:${ce}`)}else q.removeAttribute(ce)}addClass(q,ce){q.classList.add(ce)}removeClass(q,ce){q.classList.remove(ce)}setStyle(q,ce,oe,ne){ne&(k.czy.DashCase|k.czy.Important)?q.style.setProperty(ce,oe,ne&k.czy.Important?"important":""):q.style[ce]=oe}removeStyle(q,ce,oe){oe&k.czy.DashCase?q.style.removeProperty(ce):q.style[ce]=""}setProperty(q,ce,oe){null!=q&&(q[ce]=oe)}setValue(q,ce){q.nodeValue=ce}listen(q,ce,oe,ne){if("string"==typeof q&&!(q=(0,s.rb)().getGlobalEventTarget(this.doc,q)))throw new S.buA(5102,!1);let Qe=this.decoratePreventDefault(oe);return this.tracingService?.wrapEventListener&&(Qe=this.tracingService.wrapEventListener(q,ce,Qe)),this.eventManager.addEventListener(q,ce,Qe,ne)}decoratePreventDefault(q){return ce=>{if("__ngUnwrap__"===ce)return q;!1===q(ce)&&ce.preventDefault()}}}function rt(P){return"TEMPLATE"===P.tagName&&void 0!==P.content}class Ve extends ze{sharedStylesHost;hostEl;shadowRoot;constructor(q,ce,oe,ne,Qe,bt,qt,Jt,rn){super(q,Qe,bt,Jt,rn),this.sharedStylesHost=ce,this.hostEl=oe,this.shadowRoot=oe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let Kt=ne.styles;Kt=Ye(ne.id,Kt);for(const dr of Kt){const cr=document.createElement("style");qt&&cr.setAttribute("nonce",qt),cr.textContent=dr,this.shadowRoot.appendChild(cr)}const Nn=ne.getExternalStyles?.();if(Nn)for(const dr of Nn){const cr=_(dr,Qe);qt&&cr.setAttribute("nonce",qt),this.shadowRoot.appendChild(cr)}}nodeOrShadowRoot(q){return q===this.hostEl?this.shadowRoot:q}appendChild(q,ce){return super.appendChild(this.nodeOrShadowRoot(q),ce)}insertBefore(q,ce,oe){return super.insertBefore(this.nodeOrShadowRoot(q),ce,oe)}removeChild(q,ce){return super.removeChild(null,ce)}parentNode(q){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(q)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ae extends ze{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(q,ce,oe,ne,Qe,bt,qt,Jt,rn){super(q,Qe,bt,qt,Jt),this.sharedStylesHost=ce,this.removeStylesOnCompDestroy=ne;let Kt=oe.styles;this.styles=rn?Ye(rn,Kt):Kt,this.styleUrls=oe.getExternalStyles?.(rn)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===k.DUP.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class H extends Ae{contentAttr;hostAttr;constructor(q,ce,oe,ne,Qe,bt,qt,Jt,rn){const Kt=ne+"-"+oe.id;super(q,ce,oe,Qe,bt,qt,Jt,rn,Kt),this.contentAttr=function Re(P){return he.replace(K,P)}(Kt),this.hostAttr=function ve(P){return G.replace(K,P)}(Kt)}applyToHost(q){this.applyStyles(),this.setAttribute(q,this.hostAttr,"")}createElement(q,ce){const oe=super.createElement(q,ce);return super.setAttribute(oe,this.contentAttr,""),oe}}class ye extends s.qj{supportsDOMEvents=!0;static makeCurrent(){(0,s.ig)(new ye)}onAndCancel(q,ce,oe,ne){return q.addEventListener(ce,oe,ne),()=>{q.removeEventListener(ce,oe,ne)}}dispatchEvent(q,ce){q.dispatchEvent(ce)}remove(q){q.remove()}createElement(q,ce){return(ce=ce||this.getDefaultDocument()).createElement(q)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(q){return q.nodeType===Node.ELEMENT_NODE}isShadowRoot(q){return q instanceof DocumentFragment}getGlobalEventTarget(q,ce){return"window"===ce?window:"document"===ce?q:"body"===ce?q.body:null}getBaseHref(q){const ce=function He(){return Me=Me||document.head.querySelector("base"),Me?Me.getAttribute("href"):null}();return null==ce?null:function ot(P){return new URL(P,document.baseURI).pathname}(ce)}resetBaseElement(){Me=null}getUserAgent(){return window.navigator.userAgent}getCookie(q){return(0,o.b)(document.cookie,q)}}let Me=null,At=(()=>{class P{build(){return new XMLHttpRequest}static \u0275fac=function(oe){return new(oe||P)};static \u0275prov=S.jDH({token:P,factory:P.\u0275fac})}return P})();const vt=["alt","control","meta","shift"],Ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dt={alt:P=>P.altKey,control:P=>P.ctrlKey,meta:P=>P.metaKey,shift:P=>P.shiftKey};let Bt=(()=>{class P extends Je{constructor(ce){super(ce)}supports(ce){return null!=P.parseEventName(ce)}addEventListener(ce,oe,ne,Qe){const bt=P.parseEventName(oe),qt=P.eventCallback(bt.fullKey,ne,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,s.rb)().onAndCancel(ce,bt.domEventName,qt,Qe))}static parseEventName(ce){const oe=ce.toLowerCase().split("."),ne=oe.shift();if(0===oe.length||"keydown"!==ne&&"keyup"!==ne)return null;const Qe=P._normalizeKey(oe.pop());let bt="",qt=oe.indexOf("code");if(qt>-1&&(oe.splice(qt,1),bt="code."),vt.forEach(rn=>{const Kt=oe.indexOf(rn);Kt>-1&&(oe.splice(Kt,1),bt+=rn+".")}),bt+=Qe,0!=oe.length||0===Qe.length)return null;const Jt={};return Jt.domEventName=ne,Jt.fullKey=bt,Jt}static matchEventFullKeyCode(ce,oe){let ne=Ut[ce.key]||ce.key,Qe="";return oe.indexOf("code.")>-1&&(ne=ce.code,Qe="code."),!(null==ne||!ne)&&(ne=ne.toLowerCase()," "===ne?ne="space":"."===ne&&(ne="dot"),vt.forEach(bt=>{bt!==ne&&(0,dt[bt])(ce)&&(Qe+=bt+".")}),Qe+=ne,Qe===oe)}static eventCallback(ce,oe,ne){return Qe=>{P.matchEventFullKeyCode(Qe,ce)&&ne.runGuarded(()=>oe(Qe))}}static _normalizeKey(ce){return"esc"===ce?"escape":ce}static \u0275fac=function(oe){return new(oe||P)(S.KVO(S.qQL))};static \u0275prov=S.jDH({token:P,factory:P.\u0275fac})}return P})();const Cn=(0,Le.oH4)(Le.fpN,"browser",[{provide:k.Agw,useValue:Pe.AJ},{provide:k.PLl,useValue:function ft(){ye.makeCurrent()},multi:!0},{provide:S.qQL,useFactory:function Dt(){return(0,k._9u)(document),document}}]),wn=[{provide:k.$Ln,useClass:class pt{addToWindow(q){S.laP.getAngularTestability=(oe,ne=!0)=>{const Qe=q.findTestabilityInTree(oe,ne);if(null==Qe)throw new S.buA(5103,!1);return Qe},S.laP.getAllAngularTestabilities=()=>q.getAllTestabilities(),S.laP.getAllAngularRootElements=()=>q.getAllRootElements(),S.laP.frameworkStabilizers||(S.laP.frameworkStabilizers=[]),S.laP.frameworkStabilizers.push(oe=>{const ne=S.laP.getAllAngularTestabilities();let Qe=ne.length;const bt=function(){Qe--,0==Qe&&oe()};ne.forEach(qt=>{qt.whenStable(bt)})})}findTestabilityInTree(q,ce,oe){return null==ce?null:q.getTestability(ce)??(oe?(0,s.rb)().isShadowRoot(ce)?this.findTestabilityInTree(q,ce.host,!0):this.findTestabilityInTree(q,ce.parentElement,!0):null)}}},{provide:k.dOL,useClass:k.NYb,deps:[k.SKi,k.giA,k.$Ln]},{provide:k.NYb,useClass:k.NYb,deps:[k.SKi,k.giA,k.$Ln]}],hn=[{provide:S.GBX,useValue:"root"},{provide:S.zcH,useFactory:function yt(){return new S.zcH}},{provide:ie,useClass:me,multi:!0,deps:[S.qQL]},{provide:ie,useClass:Bt,multi:!0,deps:[S.qQL]},nt,D,we,{provide:k._9s,useExisting:nt},{provide:o.N,useClass:At},[]];let Pt=(()=>{class P{constructor(){}static \u0275fac=function(oe){return new(oe||P)};static \u0275mod=k.$C({type:P});static \u0275inj=S.G2t({providers:[...hn,...wn],imports:[Ce.MD,Le.Hbi]})}return P})();var _n=b(5921),Tt=b(9330),$t=b(1985),an=b(1413),pn=b(5343);const An=new $t.c(pn.l);var Zn=b(5558),Hn=b(6697),ur=b(5964),gr=b(6354);const Sr="Service workers are disabled or not supported by this browser";class Ar{serviceWorker;worker;registration;events;constructor(q,ce){if(this.serviceWorker=q,q){let oe=null;const ne=new an.B;this.worker=new $t.c(rn=>(null!==oe&&rn.next(oe),ne.subscribe(Kt=>rn.next(Kt))));const Qe=()=>{const{controller:rn}=q;null!==rn&&(oe=rn,ne.next(oe))};q.addEventListener("controllerchange",Qe),Qe(),this.registration=this.worker.pipe((0,Zn.n)(()=>q.getRegistration().then(rn=>{if(!rn)throw new S.buA(5601,!1);return rn})));const bt=new an.B;this.events=bt.asObservable();const qt=rn=>{const{data:Kt}=rn;Kt?.type&&bt.next(Kt)};q.addEventListener("message",qt),ce?.get(k.o8S,null,{optional:!0})?.onDestroy(()=>{q.removeEventListener("controllerchange",Qe),q.removeEventListener("message",qt)})}else this.worker=this.events=this.registration=new $t.c(oe=>oe.error(new S.buA(5601,!1)))}postMessage(q,ce){return new Promise(oe=>{this.worker.pipe((0,Hn.s)(1)).subscribe(ne=>{ne.postMessage({action:q,...ce}),oe()})})}postMessageWithOperation(q,ce,oe){const ne=this.waitForOperationCompleted(oe),Qe=this.postMessage(q,ce);return Promise.all([Qe,ne]).then(([,bt])=>bt)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(q){let ce;return ce="string"==typeof q?oe=>oe.type===q:oe=>q.includes(oe.type),this.events.pipe((0,ur.p)(ce))}nextEventOfType(q){return this.eventsOfType(q).pipe((0,Hn.s)(1))}waitForOperationCompleted(q){return new Promise((ce,oe)=>{this.eventsOfType("OPERATION_COMPLETED").pipe((0,ur.p)(ne=>ne.nonce===q),(0,Hn.s)(1),(0,gr.T)(ne=>{if(void 0!==ne.result)return ne.result;throw new Error(ne.error)})).subscribe({next:ce,error:oe})})}get isEnabled(){return!!this.serviceWorker}}let Jn=(()=>{class P{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new an.B;constructor(ce){if(this.sw=ce,!ce.isEnabled)return this.messages=An,this.notificationClicks=An,this.notificationCloses=An,this.pushSubscriptionChanges=An,void(this.subscription=An);this.messages=this.sw.eventsOfType("PUSH").pipe((0,gr.T)(ne=>ne.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,gr.T)(ne=>ne.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe((0,gr.T)(ne=>ne.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe((0,gr.T)(ne=>ne.data)),this.pushManager=this.sw.registration.pipe((0,gr.T)(ne=>ne.pushManager));const oe=this.pushManager.pipe((0,Zn.n)(ne=>ne.getSubscription()));this.subscription=new $t.c(ne=>{const Qe=oe.subscribe(ne),bt=this.subscriptionChanges.subscribe(ne);return()=>{Qe.unsubscribe(),bt.unsubscribe()}})}requestSubscription(ce){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(Sr));const oe={userVisibleOnly:!0};let ne=this.decodeBase64(ce.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),Qe=new Uint8Array(new ArrayBuffer(ne.length));for(let bt=0;bt<ne.length;bt++)Qe[bt]=ne.charCodeAt(bt);return oe.applicationServerKey=Qe,new Promise((bt,qt)=>{this.pushManager.pipe((0,Zn.n)(Jt=>Jt.subscribe(oe)),(0,Hn.s)(1)).subscribe({next:Jt=>{this.subscriptionChanges.next(Jt),bt(Jt)},error:qt})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Sr));const ce=oe=>{if(null===oe)throw new S.buA(5602,!1);return oe.unsubscribe().then(ne=>{if(!ne)throw new S.buA(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((oe,ne)=>{this.subscription.pipe((0,Hn.s)(1),(0,Zn.n)(ce)).subscribe({next:oe,error:ne})})}decodeBase64(ce){return atob(ce)}static \u0275fac=function(oe){return new(oe||P)(S.KVO(Ar))};static \u0275prov=S.jDH({token:P,factory:P.\u0275fac})}return P})(),er=(()=>{class P{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(ce){if(this.sw=ce,!ce.isEnabled)return this.versionUpdates=An,void(this.unrecoverable=An);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Sr));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;const ce=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:ce},ce).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new S.buA(5601,!1));const ce=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:ce},ce)}static \u0275fac=function(oe){return new(oe||P)(S.KVO(Ar))};static \u0275prov=S.jDH({token:P,factory:P.\u0275fac})}return P})();const vr=new S.nKC("");function Cr(){const P=(0,S.WQX)(Sn);if(!("serviceWorker"in navigator)||!1===P.enabled)return;const q=(0,S.WQX)(vr),ce=(0,S.WQX)(k.SKi),oe=(0,S.WQX)(k.o8S);ce.runOutsideAngular(()=>{const ne=navigator.serviceWorker,Qe=()=>ne.controller?.postMessage({action:"INITIALIZE"});ne.addEventListener("controllerchange",Qe),oe.onDestroy(()=>{ne.removeEventListener("controllerchange",Qe)})}),ce.runOutsideAngular(()=>{let ne;const{registrationStrategy:Qe}=P;if("function"==typeof Qe)ne=new Promise(bt=>Qe().subscribe(()=>bt()));else{const[bt,...qt]=(Qe||"registerWhenStable:30000").split(":");switch(bt){case"registerImmediately":ne=Promise.resolve();break;case"registerWithDelay":ne=$r(+qt[0]||0);break;case"registerWhenStable":ne=Promise.race([oe.whenStable(),$r(+qt[0])]);break;default:throw new S.buA(5600,!1)}}ne.then(()=>{oe.destroyed||navigator.serviceWorker.register(q,{scope:P.scope,updateViaCache:P.updateViaCache,type:P.type}).catch(bt=>console.error((0,S.OsK)(5604,!1)))})})}function $r(P){return new Promise(q=>setTimeout(q,P))}function Ir(P,q){return new Ar(!1!==P.enabled?navigator.serviceWorker:void 0,q)}class Sn{enabled;updateViaCache;type;scope;registrationStrategy}function wr(P,q={}){return(0,S.EmA)([Jn,er,{provide:vr,useValue:P},{provide:Sn,useValue:q},{provide:Ar,useFactory:Ir,deps:[Sn,S.zZn]},(0,k.phd)(Cr)])}let Nr=(()=>{class P{static register(ce,oe={}){return{ngModule:P,providers:[wr(ce,oe)]}}static \u0275fac=function(oe){return new(oe||P)};static \u0275mod=k.$C({type:P});static \u0275inj=S.G2t({providers:[Jn,er]})}return P})();var tr=b(5032),bn=b(7343),Xe=b(4688),Ze=b(467),It=b(8941),_t=b(5083),Ft=function(P){return P.Dark="DARK",P.Light="LIGHT",P.Default="DEFAULT",P}(Ft||{});const ln=(0,_t.F3)("StatusBar");var fn=b(918),zn=b(4632),Tn=b(6201),sr=b(1084),Kn=b(752),Tr=b(8060),mr=b(6358),Mn=b(7522),gn=b(5735),Br=b(7223),jr=b(3205),ke=b(2084);const tt="__capgo_history_stack__";if(typeof window<"u"&&typeof document<"u"&&typeof history<"u"){const P=window;if(!P.__capgoHistoryPatched){P.__capgoHistoryPatched=!0;const q=()=>{try{if(P.__capgoKeepUrlPathAfterReload)return!0}catch{}try{return"1"===window.localStorage.getItem("__capgo_keep_url_path_after_reload")}catch{return!1}},ce=()=>{try{const Yt=window.sessionStorage.getItem(tt);if(!Yt)return{stack:[],index:-1};const Pn=JSON.parse(Yt);return Pn&&Array.isArray(Pn.stack)&&"number"==typeof Pn.index?Pn:{stack:[],index:-1}}catch{return{stack:[],index:-1}}},oe=(Yt,Pn)=>{try{window.sessionStorage.setItem(tt,JSON.stringify({stack:Yt,index:Pn}))}catch{}},ne=()=>{try{window.sessionStorage.removeItem(tt)}catch{}},Qe=Yt=>{try{const Pn=Yt??window.location.href,Xn=new URL(Pn instanceof URL?Pn.toString():Pn,window.location.href);return`${Xn.pathname}${Xn.search}${Xn.hash}`}catch{return null}},bt=(Yt,Pn)=>{if(Yt.length<=100)return{stack:Yt,index:Pn};const Xn=Yt.length-100;return{stack:Yt.slice(Xn),index:Math.max(0,Pn-Xn)}},qt=Yt=>{"complete"===document.readyState||"interactive"===document.readyState?Yt():window.addEventListener("DOMContentLoaded",Yt,{once:!0})};let Jt=!1,rn=!1,Kt=!1;const Nn=()=>{if(!Jt)return;const Yt=ce(),Pn=Qe();if(Pn){if(0===Yt.stack.length)return Yt.stack.push(Pn),Yt.index=0,void oe(Yt.stack,Yt.index);(Yt.index<0||Yt.index>=Yt.stack.length)&&(Yt.index=Yt.stack.length-1),Yt.stack[Yt.index]!==Pn&&(Yt.stack[Yt.index]=Pn,oe(Yt.stack,Yt.index))}},dr=(Yt,Pn)=>{if(!Jt||rn)return;const Xn=Qe(Yt);if(!Xn)return;let{stack:Wn,index:Pr}=ce();0===Wn.length?(Wn.push(Xn),Pr=Wn.length-1):Pn?((Pr<0||Pr>=Wn.length)&&(Pr=Wn.length-1),Wn[Pr]=Xn):Pr>=Wn.length-1?(Wn.push(Xn),Pr=Wn.length-1):(Wn=Wn.slice(0,Pr+1),Wn.push(Xn),Pr=Wn.length-1),({stack:Wn,index:Pr}=bt(Wn,Pr)),oe(Wn,Pr)},cr=()=>{if(!Jt||rn)return;const Yt=ce();if(0===Yt.stack.length)return void Nn();const Pn=Yt.index>=0&&Yt.index<Yt.stack.length?Yt.index:Yt.stack.length-1,Xn=Qe();if(1===Yt.stack.length&&Xn===Yt.stack[0])return;const Wn=Yt.stack[0];if(!Wn)return;rn=!0;try{history.replaceState(history.state,document.title,Wn);for(let go=1;go<Yt.stack.length;go+=1)history.pushState(history.state,document.title,Yt.stack[go])}catch{return void(rn=!1)}rn=!1;const uo=Pn-(Yt.stack.length-1);0!==uo?history.go(uo):(history.replaceState(history.state,document.title,Yt.stack[Pn]),window.dispatchEvent(new PopStateEvent("popstate")))},fr=()=>{!Jt||Kt||(Kt=!0,qt(()=>{Kt=!1,cr()}))};let W=null,Bn=null;const Y=()=>{if(!Jt||rn)return;const Yt=Qe();if(!Yt)return;const Pn=ce(),Xn=Pn.stack.lastIndexOf(Yt);Xn>=0?Pn.index=Xn:(Pn.stack.push(Yt),Pn.index=Pn.stack.length-1);const Wn=bt(Pn.stack,Pn.index);oe(Wn.stack,Wn.index)},x=()=>{W&&Bn||(W=history.pushState,Bn=history.replaceState,history.pushState=function(Pn,Xn,Wn){const Pr=W?.call(history,Pn,Xn,Wn);return dr(Wn,!1),Pr},history.replaceState=function(Pn,Xn,Wn){const Pr=Bn?.call(history,Pn,Xn,Wn);return dr(Wn,!0),Pr},window.addEventListener("popstate",Y))},Te=()=>{W&&(history.pushState=W,W=null),Bn&&(history.replaceState=Bn,Bn=null),window.removeEventListener("popstate",Y)},Fn=Yt=>{Jt!==Yt?(Jt=Yt,Jt?(x(),Nn(),fr()):(Te(),ne())):Jt&&(Nn(),fr())};window.addEventListener("CapacitorUpdaterKeepUrlPathAfterReload",Yt=>{var Pn;const Xn=Yt,Wn=null===(Pn=Xn?.detail)||void 0===Pn?void 0:Pn.enabled;"boolean"==typeof Wn?(P.__capgoKeepUrlPathAfterReload=Wn,Fn(Wn)):(P.__capgoKeepUrlPathAfterReload=!0,Fn(!0))}),Fn(q())}}b(9564);const et=(0,_t.F3)("CapacitorUpdater",{web:()=>b.e(8080).then(b.bind(b,8080)).then(P=>new P.CapacitorUpdaterWeb)});function St(P,q){if(1&P&&(k.j41(0,"li"),k.EFF(1),k.k0s()),2&P){const ce=q.$implicit;k.R7$(),k.JRh(ce)}}function Xt(P,q){if(1&P&&(k.j41(0,"div",10)(1,"h4"),k.EFF(2,"What's new:"),k.k0s(),k.j41(3,"ul"),k.DNE(4,St,2,1,"li",11),k.k0s()()),2&P){const ce=k.XpG();k.R7$(4),k.Y8G("ngForOf",ce.versionInfo.changelog.split("\n"))}}function vn(P,q){1&P&&k.nrm(0,"ion-progress-bar",12)}function On(P,q){if(1&P&&(k.j41(0,"p",13),k.EFF(1),k.k0s()),2&P){const ce=k.XpG();k.R7$(),k.SpI(" Downloading update... ",ce.downloadProgress,"% ")}}function Rn(P,q){if(1&P&&(k.j41(0,"ion-card",14)(1,"ion-card-content"),k.nrm(2,"ion-icon",15),k.j41(3,"p"),k.EFF(4),k.k0s()()()),2&P){const ce=k.XpG();k.R7$(4),k.SpI("You can dismiss this ",ce.remainingDismisses," more time(s) before the update becomes required.")}}function ir(P,q){if(1&P){const ce=k.RV6();k.j41(0,"ion-buttons",16)(1,"ion-button",17),k.bIt("click",function(){S.eBV(ce);const ne=k.XpG();return S.Njj(ne.dismiss())}),k.nrm(2,"ion-icon",18),k.EFF(3),k.k0s()()}if(2&P){const ce=k.XpG();k.R7$(),k.Y8G("disabled",ce.downloading),k.R7$(2),k.SpI(" Later (",ce.remainingDismisses," left) ")}}let Xr=(()=>{var P;class q{constructor(oe,ne){this.modalController=oe,this.updateService=ne,this.remainingDismisses=3,this.downloading=!1,this.downloadProgress=0}ngOnInit(){console.log("UpdatePromptComponent initialized with:",{versionInfo:this.versionInfo,currentVersion:this.currentVersion,remainingDismisses:this.remainingDismisses})}updateNow(){var oe=this;return(0,Ze.A)(function*(){if(oe.versionInfo){oe.downloading=!0;try{yield oe.updateService.downloadAndInstall(oe.versionInfo),oe.modalController.dismiss({updated:!0})}catch(ne){console.error("Update failed:",ne),oe.downloading=!1}}else console.error("No version info available")})()}dismiss(){var oe=this;return(0,Ze.A)(function*(){oe.modalController.dismiss({dismissed:!0})})()}static#e=P=()=>(this.\u0275fac=function(ne){return new(ne||q)(k.rXU(bn.W3),k.rXU(nr))},this.\u0275cmp=k.VBU({type:q,selectors:[["app-update-prompt"]],inputs:{versionInfo:"versionInfo",currentVersion:"currentVersion",remainingDismisses:"remainingDismisses"},standalone:!1,decls:25,vars:10,consts:[["color","primary"],[1,"ion-padding"],["class","changelog",4,"ngIf"],["type","indeterminate","color","primary",4,"ngIf"],["class","download-text",4,"ngIf"],["class","warning-card",4,"ngIf"],["slot","primary"],["expand","block","color","primary",3,"click","disabled"],["name","download","slot","start"],["slot","secondary",4,"ngIf"],[1,"changelog"],[4,"ngFor","ngForOf"],["type","indeterminate","color","primary"],[1,"download-text"],[1,"warning-card"],["name","warning","color","warning"],["slot","secondary"],["expand","block","fill","clear",3,"click","disabled"],["name","time","slot","start"]],template:function(ne,Qe){1&ne&&(k.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),k.EFF(3,"Update Available"),k.k0s()()(),k.j41(4,"ion-content",1)(5,"ion-card")(6,"ion-card-header")(7,"ion-card-title"),k.EFF(8),k.k0s(),k.j41(9,"ion-card-subtitle"),k.EFF(10),k.k0s()(),k.j41(11,"ion-card-content")(12,"p"),k.EFF(13),k.k0s(),k.DNE(14,Xt,5,1,"div",2)(15,vn,1,0,"ion-progress-bar",3)(16,On,2,1,"p",4),k.k0s()(),k.DNE(17,Rn,5,1,"ion-card",5),k.k0s(),k.j41(18,"ion-footer")(19,"ion-toolbar")(20,"ion-buttons",6)(21,"ion-button",7),k.bIt("click",function(){return Qe.updateNow()}),k.nrm(22,"ion-icon",8),k.EFF(23),k.k0s()(),k.DNE(24,ir,4,2,"ion-buttons",9),k.k0s()()),2&ne&&(k.R7$(8),k.SpI("Version ",null==Qe.versionInfo?null:Qe.versionInfo.latestVersion),k.R7$(2),k.SpI("Current: ",Qe.currentVersion),k.R7$(3),k.JRh(null==Qe.versionInfo?null:Qe.versionInfo.updateMessage),k.R7$(),k.Y8G("ngIf",null==Qe.versionInfo?null:Qe.versionInfo.changelog),k.R7$(),k.Y8G("ngIf",Qe.downloading),k.R7$(),k.Y8G("ngIf",Qe.downloading),k.R7$(),k.Y8G("ngIf",Qe.remainingDismisses<3),k.R7$(4),k.Y8G("disabled",Qe.downloading),k.R7$(2),k.SpI(" ",Qe.downloading?"Downloading...":"Update Now"," "),k.R7$(),k.Y8G("ngIf",!(null!=Qe.versionInfo&&Qe.versionInfo.forceUpdate)))},dependencies:[Ce.Sq,Ce.bT,bn.Jm,bn.QW,bn.b_,bn.I9,bn.ME,bn.HW,bn.tN,bn.W9,bn.M0,bn.eU,bn.iq,bn.FH,bn.BC,bn.ai],styles:[".changelog[_ngcontent-%COMP%]{margin-top:16px}.changelog[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:8px;color:var(--ion-color-primary)}.changelog[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.download-text[_ngcontent-%COMP%]{text-align:center;margin-top:16px;color:var(--ion-color-medium)}.warning-card[_ngcontent-%COMP%]{--background: var(--ion-color-warning-tint);margin-top:16px}.warning-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;vertical-align:middle}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--padding-top: 8px;--padding-bottom: 8px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:4px}"]}))}return P(),q})();function Ur(P,q){if(1&P&&(k.j41(0,"li"),k.EFF(1),k.k0s()),2&P){const ce=q.$implicit;k.R7$(),k.JRh(ce)}}function Qn(P,q){if(1&P&&(k.j41(0,"div",12)(1,"h4"),k.EFF(2,"What's new:"),k.k0s(),k.j41(3,"ul"),k.DNE(4,Ur,2,1,"li",13),k.k0s()()),2&P){const ce=k.XpG();k.R7$(4),k.Y8G("ngForOf",ce.versionInfo.changelog.split("\n"))}}function Ln(P,q){1&P&&k.nrm(0,"ion-progress-bar",14)}function Gn(P,q){if(1&P&&(k.j41(0,"p",15),k.EFF(1),k.k0s()),2&P){const ce=k.XpG();k.R7$(),k.SpI(" Downloading update... ",ce.downloadProgress,"% ")}}let yr=(()=>{var P;class q{constructor(oe,ne){this.modalController=oe,this.updateService=ne,this.downloading=!1,this.downloadProgress=0}ngOnInit(){console.log("ForceUpdateComponent initialized with:",{versionInfo:this.versionInfo,currentVersion:this.currentVersion}),history.pushState(null,"",location.href),window.onpopstate=()=>{history.pushState(null,"",location.href)}}updateNow(){var oe=this;return(0,Ze.A)(function*(){if(oe.versionInfo){oe.downloading=!0;try{yield oe.updateService.downloadAndInstall(oe.versionInfo)}catch(ne){console.error("Update failed:",ne),oe.downloading=!1;const Qe=document.createElement("ion-alert");Qe.innerHTML='\n        <ion-alert-header>\n          <h2>Update Failed</h2>\n        </ion-alert-header>\n        <ion-alert-content>\n          <p>Failed to download update. Please check your connection and try again.</p>\n        </ion-alert-content>\n        <ion-alert-buttons>\n          <ion-button onclick="this.parentElement.parentElement.dismiss()">Retry</ion-button>\n        </ion-alert-buttons>\n      ',document.body.appendChild(Qe),Qe.present()}}else console.error("No version info available")})()}static#e=P=()=>(this.\u0275fac=function(ne){return new(ne||q)(k.rXU(bn.W3),k.rXU(nr))},this.\u0275cmp=k.VBU({type:q,selectors:[["app-force-update"]],inputs:{versionInfo:"versionInfo",currentVersion:"currentVersion"},standalone:!1,decls:35,vars:8,consts:[["color","danger"],[1,"ion-padding","force-update-content"],[1,"force-update-container"],["name","alert-circle","color","danger",1,"alert-icon"],[1,"force-message"],["class","changelog",4,"ngIf"],["type","indeterminate","color","danger",4,"ngIf"],["class","download-text",4,"ngIf"],[1,"update-notice"],["name","information-circle","color","primary"],["expand","block","color","light",3,"click","disabled"],["name","download","slot","start"],[1,"changelog"],[4,"ngFor","ngForOf"],["type","indeterminate","color","danger"],[1,"download-text"]],template:function(ne,Qe){1&ne&&(k.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),k.EFF(3,"Update Required"),k.k0s()()(),k.j41(4,"ion-content",1)(5,"div",2),k.nrm(6,"ion-icon",3),k.j41(7,"h2"),k.EFF(8,"Update Required"),k.k0s(),k.j41(9,"p",4),k.EFF(10," You've dismissed the update reminder multiple times. You must update to continue using the app. "),k.k0s(),k.j41(11,"ion-card")(12,"ion-card-header")(13,"ion-card-title"),k.EFF(14),k.k0s(),k.j41(15,"ion-card-subtitle"),k.EFF(16),k.k0s()(),k.j41(17,"ion-card-content")(18,"p"),k.EFF(19),k.k0s(),k.DNE(20,Qn,5,1,"div",5)(21,Ln,1,0,"ion-progress-bar",6)(22,Gn,2,1,"p",7),k.k0s()(),k.j41(23,"div",8),k.nrm(24,"ion-icon",9),k.j41(25,"p")(26,"strong"),k.EFF(27,"Please update now to continue."),k.k0s(),k.nrm(28,"br"),k.EFF(29," This ensures you have the latest features and security updates. "),k.k0s()()()(),k.j41(30,"ion-footer")(31,"ion-toolbar",0)(32,"ion-button",10),k.bIt("click",function(){return Qe.updateNow()}),k.nrm(33,"ion-icon",11),k.EFF(34),k.k0s()()()),2&ne&&(k.R7$(14),k.SpI("Version ",null==Qe.versionInfo?null:Qe.versionInfo.latestVersion),k.R7$(2),k.SpI("Current: ",Qe.currentVersion),k.R7$(3),k.JRh(null==Qe.versionInfo?null:Qe.versionInfo.updateMessage),k.R7$(),k.Y8G("ngIf",null==Qe.versionInfo?null:Qe.versionInfo.changelog),k.R7$(),k.Y8G("ngIf",Qe.downloading),k.R7$(),k.Y8G("ngIf",Qe.downloading),k.R7$(10),k.Y8G("disabled",Qe.downloading),k.R7$(2),k.SpI(" ",Qe.downloading?"Downloading...":"Update Now"," "))},dependencies:[Ce.Sq,Ce.bT,bn.Jm,bn.b_,bn.I9,bn.ME,bn.HW,bn.tN,bn.W9,bn.M0,bn.eU,bn.iq,bn.FH,bn.BC,bn.ai],styles:[".force-update-content[_ngcontent-%COMP%]{--background: var(--ion-color-light);display:flex;align-items:center;justify-content:center}.force-update-container[_ngcontent-%COMP%]{max-width:400px;text-align:center}.alert-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}h2[_ngcontent-%COMP%]{color:var(--ion-color-danger);margin-bottom:16px}.force-message[_ngcontent-%COMP%]{font-size:16px;color:var(--ion-color-dark);margin-bottom:24px}.changelog[_ngcontent-%COMP%]{margin-top:16px;text-align:left}.changelog[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:8px;color:var(--ion-color-primary)}.changelog[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.download-text[_ngcontent-%COMP%]{text-align:center;margin-top:16px;color:var(--ion-color-medium)}.update-notice[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background-color:var(--ion-color-primary-tint);border-radius:8px;display:flex;align-items:flex-start;gap:8px}.update-notice[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{flex-shrink:0;margin-top:2px}.update-notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:left;font-size:14px}ion-footer[_ngcontent-%COMP%]{--background: var(--ion-color-danger)}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:8px 16px;height:48px;font-weight:600}"]}))}return P(),q})();var ar=b(5029);let nr=(()=>{var P;class q{constructor(oe,ne,Qe,bt){this.alertController=oe,this.loadingController=ne,this.modalController=Qe,this.supabase=bt,this.UPDATE_DISMISS_KEY="update_dismiss_count",this.UPDATE_DISMISS_DATE_KEY="update_dismiss_date",this.LAST_CHECK_KEY="last_update_check",this.MAX_DISMISSES=3,this.CHECK_INTERVAL=864e5}checkForUpdates(){var oe=this;return(0,Ze.A)(function*(ne=!1){if(_t.Ii.isNativePlatform()){if(!ne){const Qe=localStorage.getItem(oe.LAST_CHECK_KEY);if(Qe&&Date.now()-parseInt(Qe)<oe.CHECK_INTERVAL)return void console.log("Update check skipped - checked recently")}try{console.log("Checking for updates...");const Qe=yield oe.getCurrentVersion();console.log("Current version:",Qe);const bt=yield oe.getVersionInfo();console.log("Latest version:",bt.latestVersion),localStorage.setItem(oe.LAST_CHECK_KEY,Date.now().toString()),oe.needsUpdate(Qe,bt)?(console.log("Update available!"),yield oe.showUpdatePrompt(bt,Qe)):console.log("App is up to date")}catch(Qe){console.error("Update check failed:",Qe)}}}).apply(this,arguments)}getCurrentVersion(){return(0,Ze.A)(function*(){try{yield et.current();const{App:ne}=yield Promise.resolve().then(b.bind(b,8941));return(yield ne.getInfo()).version}catch{const{App:ne}=yield Promise.resolve().then(b.bind(b,8941));return(yield ne.getInfo()).version}})()}getVersionInfo(){var oe=this;return(0,Ze.A)(function*(){try{const{data:ne,error:Qe}=yield oe.supabase.getClient().storage.from("app-config").download("version.json");if(Qe)throw Qe;const bt=yield ne.text();return JSON.parse(bt)}catch(ne){return console.error("Failed to fetch version info:",ne),{latestVersion:"0.0.0",minVersion:"0.0.0",updateMessage:"Unable to check for updates",forceUpdate:!1,downloadUrl:"",changelog:"",releaseDate:(0,ke.E)()}}})()}needsUpdate(oe,ne){const Qe=this.parseVersion(oe),bt=this.parseVersion(ne.latestVersion),qt=this.parseVersion(ne.minVersion);return this.compareVersions(Qe,qt)<0||this.compareVersions(Qe,bt)<0}parseVersion(oe){const ne=oe.split(".").map(Qe=>parseInt(Qe)||0);return{major:ne[0]||0,minor:ne[1]||0,patch:ne[2]||0}}compareVersions(oe,ne){return oe.major!==ne.major?oe.major-ne.major:oe.minor!==ne.minor?oe.minor-ne.minor:oe.patch-ne.patch}showUpdatePrompt(oe,ne){var Qe=this;return(0,Ze.A)(function*(){const bt=parseInt(localStorage.getItem(Qe.UPDATE_DISMISS_KEY)||"0");if(bt>=Qe.MAX_DISMISSES||oe.forceUpdate)return void(yield Qe.showForceUpdateScreen(oe,ne));const qt=yield Qe.modalController.create({component:Xr,componentProps:{versionInfo:oe,currentVersion:ne,remainingDismisses:Qe.MAX_DISMISSES-bt},backdropDismiss:!1,cssClass:"update-prompt-modal"});yield qt.present();const{data:Jt}=yield qt.onWillDismiss();if(Jt?.dismissed){const rn=bt+1;localStorage.setItem(Qe.UPDATE_DISMISS_KEY,rn.toString()),localStorage.setItem(Qe.UPDATE_DISMISS_DATE_KEY,(0,ke.E)()),console.log(`Update dismissed ${rn}/${Qe.MAX_DISMISSES} times`)}})()}showForceUpdateScreen(oe,ne){var Qe=this;return(0,Ze.A)(function*(){yield(yield Qe.modalController.create({component:yr,componentProps:{versionInfo:oe,currentVersion:ne},backdropDismiss:!1,cssClass:"force-update-modal"})).present()})()}downloadAndInstall(oe){var ne=this;return(0,Ze.A)(function*(){const Qe=_t.Ii.getPlatform();try{const bt=yield ne.loadingController.create({message:"Downloading update...",backdropDismiss:!1});yield bt.present(),console.log("Downloading update from:",oe.downloadUrl);const qt=yield et.download({url:oe.downloadUrl,version:oe.latestVersion});console.log("Download complete:",qt),yield bt.dismiss(),"android"===Qe?oe.forceUpdate?(yield et.set({id:qt.id}),console.log("Force updating - app will restart")):(yield et.next({id:qt.id}),console.log("Update scheduled for next restart"),yield(yield ne.alertController.create({header:"Update Downloaded",message:"The update will be installed when you restart the app.",buttons:["OK"]})).present()):"ios"===Qe&&(yield ne.showIOSInstallPrompt(qt))}catch(bt){console.error("Update failed:",bt),yield(yield ne.alertController.create({header:"Update Failed",message:"Failed to download update. Please try again later.",buttons:["OK"]})).present()}})()}showIOSInstallPrompt(oe){var ne=this;return(0,Ze.A)(function*(){var bt;yield(yield ne.alertController.create({header:"Update Ready",message:"The update has been downloaded. Please install it now.",buttons:[{text:"Install Now",handler:(bt=(0,Ze.A)(function*(){try{yield et.next({id:oe.id}),console.log("iOS update scheduled - user needs to install manually"),yield(yield ne.alertController.create({header:"Installation Scheduled",message:"Please restart the app to complete the update.",buttons:["OK"]})).present()}catch(qt){console.error("iOS install failed:",qt)}}),function(){return bt.apply(this,arguments)})}]})).present()})()}resetDismissCount(){localStorage.removeItem(this.UPDATE_DISMISS_KEY),localStorage.removeItem(this.UPDATE_DISMISS_DATE_KEY)}getDismissCount(){return parseInt(localStorage.getItem(this.UPDATE_DISMISS_KEY)||"0")}static#e=P=()=>(this.\u0275fac=function(ne){return new(ne||q)(S.KVO(bn.hG),S.KVO(bn.Xi),S.KVO(bn.W3),S.KVO(ar.L))},this.\u0275prov=S.jDH({token:q,factory:q.\u0275fac,providedIn:"root"}))}return P(),q})();var Er=b(7762),br=b(7691),xr=b(2739);(0,_t.F3)("AppSettings");let Wr=(()=>{var P;class q{constructor(){this.platform=_t.Ii.getPlatform()}requestAllPermissions(){var oe=this;return(0,Ze.A)(function*(){const ne=[],Qe=[];console.log("\u{1f510} Requesting all necessary permissions...");try{if("granted"!==(yield Er.L.checkPermissions()).location){console.log("\u{1f4cd} Requesting location permissions...");const qt=yield Er.L.requestPermissions();"granted"===qt.location?(ne.push("Location (Fine)"),console.log("\u2705 Fine location permission granted")):(Qe.push("Location (Fine)"),console.log("\u274c Fine location permission denied")),"granted"===qt.coarseLocation?(ne.push("Location (Coarse)"),console.log("\u2705 Coarse location permission granted")):(Qe.push("Location (Coarse)"),console.log("\u274c Coarse location permission denied"))}else ne.push("Location (Fine)"),ne.push("Location (Coarse)"),console.log("\u2705 Location permissions already granted")}catch(bt){console.error("Error requesting location permissions:",bt),Qe.push("Location")}try{"granted"===(yield br.i7.requestPermissions()).camera?(ne.push("Camera"),console.log("\u2705 Camera permission granted")):(Qe.push("Camera"),console.log("\u274c Camera permission denied"))}catch(bt){console.error("Error requesting camera permissions:",bt),Qe.push("Camera")}if("android"===oe.platform)try{(yield oe.requestPermissionWithExplanation("storage"))?(ne.push("Storage"),console.log("\u2705 Storage permission granted")):(Qe.push("Storage"),console.log("\u274c Storage permission denied"))}catch(bt){console.error("Error requesting storage permissions:",bt),Qe.push("Storage")}return console.log(`\u2705 Permissions granted: ${ne.join(", ")}`),console.log(`\u274c Permissions denied: ${Qe.join(", ")}`),{granted:ne,denied:Qe}})()}checkAllPermissions(){var oe=this;return(0,Ze.A)(function*(){const ne={location:!1,camera:!1,storage:!1};try{const Qe=yield Er.L.checkPermissions();ne.location="granted"===Qe.location||"granted"===Qe.coarseLocation}catch(Qe){console.error("Error checking location permissions:",Qe)}try{const Qe=yield br.i7.checkPermissions();ne.camera="granted"===Qe.camera}catch(Qe){console.error("Error checking camera permissions:",Qe)}return"android"===oe.platform&&(ne.storage=!0),ne})()}requestPermissionWithExplanation(oe){return(0,Ze.A)(function*(){switch(oe){case"location":try{return"granted"===(yield Er.L.checkPermissions()).location||"granted"===(yield Er.L.requestPermissions()).location}catch(ne){return console.error("Error requesting location permission:",ne),!1}case"camera":try{return"granted"===(yield br.i7.checkPermissions()).camera||"granted"===(yield br.i7.requestPermissions()).camera}catch(ne){return console.error("Error requesting camera permission:",ne),!1}case"storage":if("android"===_t.Ii.getPlatform())try{return"granted"===(yield xr.YA.checkPermissions()).publicStorage||"granted"===(yield xr.YA.requestPermissions()).publicStorage}catch(ne){return console.error("Error requesting storage permission:",ne),!1}return!0;case"storage":try{const ne=yield xr.YA.checkPermissions();if(console.log("\u{1f4c1} PermissionsService: Storage permission check:",ne),"granted"===ne.publicStorage)return console.log("\u2705 PermissionsService: Storage permission already granted"),!0;console.log("\u{1f4c1} PermissionsService: Requesting storage permission...");const Qe=yield xr.YA.requestPermissions();return console.log("\u{1f4c1} PermissionsService: Storage permission result:",Qe),"granted"===Qe.publicStorage}catch(ne){return console.error("\u{1f4c1} PermissionsService: Error requesting storage permission:",ne),!!ne.message?.includes("MANAGE_EXTERNAL_STORAGE")&&(console.log("\u26a0\ufe0f PermissionsService: MANAGE_EXTERNAL_STORAGE not granted, using scoped storage"),!0)}default:return!1}})()}static#e=P=()=>(this.\u0275fac=function(ne){return new(ne||q)},this.\u0275prov=S.jDH({token:q,factory:q.\u0275fac,providedIn:"root"}))}return P(),q})(),kr=(()=>{var P;class q{constructor(oe,ne,Qe,bt,qt,Jt,rn,Kt,Nn,dr,cr,fr,W,Bn,Y){this.sharedDataService=oe,this.pollutionSyncService=ne,this.disturbancesSyncService=Qe,this.floraFaunaSyncService=bt,this.biomassSyncService=qt,this.healthSyncService=Jt,this.restorationSyncService=rn,this.cleanupSyncService=Kt,this.outplantingSyncService=Nn,this.accountSyncService=dr,this.auth=cr,this.updateCheckService=fr,this.permissionsService=W,this.toastController=Bn,this.alertController=Y,this.hasRunInitialSync=!1,this.lastResumeSync=0,this.RESUME_SYNC_THROTTLE=3e4,console.log("AppComponent: Constructor called - All sync services initialized"),this.sharedDataService.checkAndCreateDataStore().then(()=>{this.cleanupOrphanedBackupFiles()}).catch(x=>{console.error("Failed to initialize SharedDataService datastore:",x)}),console.log("AppComponent: All sync services injected - network listeners active for all services"),this.initializeAutoSync(),this.setupAppLifecycleListeners(),_t.Ii.isNativePlatform()&&(ln.setOverlaysWebView({overlay:!0}),ln.setStyle({style:Ft.Dark}),ln.setBackgroundColor({color:"#00000000"})),setTimeout(()=>{this.updateCheckService.checkForUpdates().catch(x=>{console.error("Update check failed:",x)})},2e3)}ngOnInit(){}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe(),this.periodicSyncTimer&&clearInterval(this.periodicSyncTimer)}initializeAutoSync(){var oe=this;console.log("\u{1f680} AppComponent: Initializing automatic account sync - waiting for auth"),console.log("\u{1f680} AppComponent: Current user:",this.auth.getCurrentUser()),this.authSubscription=this.auth.currentUser$.pipe((0,ur.p)(ne=>(console.log("\u{1f680} AppComponent: Auth filter - user:",ne?.username),null!==ne)),(0,Hn.s)(1)).subscribe(function(){var ne=(0,Ze.A)(function*(Qe){console.log("\u{1f680} AppComponent: Auth subscription triggered for user:",Qe.username),oe.hasRunInitialSync?console.log("\u23f8\ufe0f AppComponent: Initial sync already ran, skipping"):(oe.hasRunInitialSync=!0,yield new Promise(bt=>setTimeout(bt,1e3)),yield oe.runAutoSync(Qe),oe.startPeriodicSync())});return function(Qe){return ne.apply(this,arguments)}}()),setTimeout(()=>{if(console.log("\u{1f504} AppComponent: 10s fallback check - hasRunInitialSync:",this.hasRunInitialSync),!this.hasRunInitialSync){const ne=this.auth.getCurrentUser();console.log("\u{1f504} AppComponent: Fallback - current user:",ne?.username),ne?(console.log("\u{1f504} AppComponent: Fallback sync trigger"),this.hasRunInitialSync=!0,this.runAutoSync(ne),this.startPeriodicSync()):console.log("\u23f8\ufe0f AppComponent: No user after 10s fallback, skipping auto sync")}},1e4)}runAutoSync(oe){var ne=this;return(0,Ze.A)(function*(){try{const Qe=oe.level||1;console.log(`\u{1f464} AppComponent: Auto-sync for user ${oe.username} (Level ${Qe})`),yield ne.showAutoSyncToast(Qe);const bt=yield ne.accountSyncService.downloadAllAccountData();bt.success?(console.log(`\u2705 AppComponent: Auto-sync completed - ${bt.totalDownloaded} items downloaded`),yield ne.showSyncCompleteToast(bt)):console.error("\u274c AppComponent: Auto-sync failed:",bt.errors)}catch(Qe){console.error("\u274c AppComponent: Auto-sync error:",Qe)}})()}startPeriodicSync(){var oe=this;console.log("\u23f0 AppComponent: Starting 30-minute periodic sync timer"),this.periodicSyncTimer&&clearInterval(this.periodicSyncTimer),this.periodicSyncTimer=setInterval((0,Ze.A)(function*(){if(oe.auth.getCurrentUser()&&navigator.onLine){console.log("\u23f0 AppComponent: Triggering periodic 30-minute sync");try{yield oe.accountSyncService.downloadAllAccountData(),console.log("\u2705 AppComponent: Periodic sync completed")}catch(Qe){console.error("\u274c AppComponent: Periodic sync failed:",Qe)}}else console.log("\u23f0 AppComponent: Skipping periodic sync - no user or offline")}),18e5)}requestAllPermissions(){var oe=this;return(0,Ze.A)(function*(){try{if(typeof _t.Ii<"u"&&"web"!==_t.Ii.getPlatform()){console.log("\u{1f510} AppComponent: Requesting all necessary permissions at app launch");const ne=[],Qe=[{type:"location",name:"Location"},{type:"camera",name:"Camera"},{type:"storage",name:"Storage"}];for(const bt of Qe)(yield oe.permissionsService.requestPermissionWithExplanation(bt.type))||ne.push(bt.name);ne.length>0?yield oe.showPermissionsDeniedAlert(ne):yield oe.showPermissionsGrantedToast()}}catch(ne){console.error("\u274c AppComponent: Error requesting permissions:",ne)}})()}showPermissionsDeniedAlert(oe){var ne=this;return(0,Ze.A)(function*(){yield(yield ne.alertController.create({header:"\u26a0\ufe0f Permissions Required",message:`The following permissions are required for full functionality:\n\n${oe.join("\n")}\n\nSome features may not work correctly without these permissions.`,buttons:[{text:"Retry",handler:()=>{ne.requestAllPermissions()}},{text:"Continue",role:"cancel"}]})).present()})()}showPermissionsGrantedToast(){var oe=this;return(0,Ze.A)(function*(){yield(yield oe.toastController.create({message:"\u2705 All permissions granted successfully!",duration:3e3,position:"top",cssClass:"custom-success-toast"})).present()})()}setupAppLifecycleListeners(){var oe=this;try{It.App.addListener("appStateChange",function(){var ne=(0,Ze.A)(function*(Qe){if(Qe.isActive){console.log("\u{1f4f1} AppComponent: App resumed from background");const bt=Date.now();if(bt-oe.lastResumeSync<oe.RESUME_SYNC_THROTTLE)return void console.log("\u23f8\ufe0f AppComponent: Resume sync throttled");if(oe.auth.getCurrentUser()&&navigator.onLine){console.log("\u{1f504} AppComponent: Triggering sync on app resume"),oe.lastResumeSync=bt;try{yield oe.accountSyncService.downloadAllAccountData(),console.log("\u2705 AppComponent: Resume sync completed")}catch(rn){console.error("\u274c AppComponent: Resume sync failed:",rn)}const Jt=localStorage.getItem("last_update_check");(!Jt||bt-parseInt(Jt)>864e5)&&(console.log("\u{1f504} AppComponent: Checking for updates on resume"),oe.updateCheckService.checkForUpdates().catch(rn=>{console.error("Update check on resume failed:",rn)}))}}});return function(Qe){return ne.apply(this,arguments)}}())}catch{console.log("\u{1f4f1} AppComponent: Capacitor App plugin not available (browser mode)")}}showAutoSyncToast(oe){var ne=this;return(0,Ze.A)(function*(){try{const Qe=ne.isDesktopDevice(),bt=oe>=4?Qe?"\u{1f537} Auto-syncing ALL account data\n(Level 4 Desktop)...":"\u{1f4e5} Auto-syncing your account data\n(Level 4 Mobile)...":"\u{1f4e5} Auto-syncing your account data...";yield(yield ne.toastController.create({message:bt,duration:3e3,position:"top",cssClass:"custom-sync-loading-toast"})).present()}catch(Qe){console.warn("\u26a0\ufe0f AppComponent: Could not show auto-sync toast:",Qe)}})()}showSyncCompleteToast(oe){var ne=this;return(0,Ze.A)(function*(){try{const Qe=oe.isPrivilegedAccess?`\u2705 Privileged sync complete: ${oe.totalDownloaded} items from all accounts`:`\u2705 Sync complete: ${oe.totalDownloaded} items downloaded`;yield(yield ne.toastController.create({message:Qe,duration:4e3,position:"top",cssClass:"custom-sync-success-toast"})).present()}catch(Qe){console.warn("\u26a0\ufe0f AppComponent: Could not show sync complete toast:",Qe)}})()}showSyncErrorToast(oe){var ne=this;return(0,Ze.A)(function*(){try{yield(yield ne.toastController.create({message:`\u274c Sync failed: ${oe[0]}`,duration:5e3,position:"top",cssClass:"custom-sync-error-toast",buttons:[{text:"Retry",handler:()=>{ne.initializeAutoSync()}}]})).present()}catch(Qe){console.warn("\u26a0\ufe0f AppComponent: Could not show sync error toast:",Qe)}})()}isDesktopDevice(){const oe=navigator.userAgent.toLowerCase();return/macintosh|windows|linux/i.test(oe)&&!/android/i.test(oe)}cleanupOrphanedBackupFiles(){var oe=this;return(0,Ze.A)(function*(){try{const Qe=(yield oe.sharedDataService.listFiles()).filter(bt=>bt.includes("_backup"));if(0===Qe.length)return;console.log(`\u{1f9f9} AppComponent: Cleaning up ${Qe.length} orphaned backup file(s)`);for(const bt of Qe)try{yield oe.sharedDataService.deleteJsonFile(bt)}catch(qt){console.warn(`\u26a0\ufe0f AppComponent: Failed to delete backup file ${bt}:`,qt)}console.log("\u2705 AppComponent: Backup file cleanup complete")}catch(ne){console.warn("\u26a0\ufe0f AppComponent: Backup cleanup skipped:",ne)}})()}static#e=P=()=>(this.\u0275fac=function(ne){return new(ne||q)(k.rXU(fn.H),k.rXU(zn.T),k.rXU(Tn.s),k.rXU(sr.G),k.rXU(Kn.P),k.rXU(Tr.r),k.rXU(mr.T),k.rXU(Mn.$),k.rXU(gn.Q),k.rXU(Br.U),k.rXU(jr.N),k.rXU(nr),k.rXU(Wr),k.rXU(bn.K_),k.rXU(bn.hG))},this.\u0275cmp=k.VBU({type:q,selectors:[["app-root"]],standalone:!1,decls:2,vars:0,template:function(ne,Qe){1&ne&&(k.j41(0,"ion-app"),k.nrm(1,"ion-router-outlet"),k.k0s())},dependencies:[bn.U1,bn.Rg],encapsulation:2}))}return P(),q})();var Dr=b(8132);const Lr=(P,q)=>{const ce=(0,S.WQX)(jr.N),oe=(0,S.WQX)(_n.Ix);if(console.log("Level access guard:",{route:P.routeConfig?.path,requiredLevel:P.data?.requiredLevel,desktopOnly:P.data?.desktopOnly}),!ce.isAuthenticated())return console.log("User not authenticated, redirecting to login"),oe.navigate(["/login"]),!1;const ne=P.data?.requiredLevel;if(ne&&!ce.hasMinimumLevel(ne))return console.log(`User doesn't have required level ${ne}, redirecting to home`),oe.navigate(["/home"]),!1;const Qe=P.data?.desktopOnly;if(Qe){const bt=function Yr(){const P=navigator.userAgent.toLowerCase();return/macintosh|windows|linux/i.test(P)&&!/android/i.test(P)}();if(console.log("Desktop check:",{desktopOnly:Qe,isDesktop:bt}),!bt)return console.log("User is not on desktop, redirecting to statistics"),oe.navigate(["/statistics"]),!1}return console.log("Access granted"),!0},Kr=[{path:"login",loadChildren:()=>b.e(3485).then(b.bind(b,3485)).then(P=>P.LoginPageModule)},{path:"register",loadChildren:()=>b.e(8618).then(b.bind(b,8618)).then(P=>P.RegisterPageModule)},{path:"home",loadChildren:()=>b.e(1299).then(b.bind(b,1299)).then(P=>P.HomePageModule),canActivate:[Lr]},{path:"biodiversity",loadChildren:()=>b.e(5053).then(b.bind(b,5053)).then(P=>P.BiodiversityPageModule),canActivate:[Lr]},{path:"health",loadChildren:()=>b.e(38).then(b.bind(b,38)).then(P=>P.HealthPageModule),canActivate:[Lr]},{path:"threats",loadChildren:()=>b.e(3081).then(b.bind(b,3081)).then(P=>P.ThreatsPageModule),canActivate:[Lr]},{path:"",redirectTo:"login",pathMatch:"full"},{path:"flora-fauna",loadChildren:()=>Promise.all([b.e(5010),b.e(6059),b.e(2076),b.e(6268)]).then(b.bind(b,6268)).then(P=>P.FloraFaunaPageModule),canActivate:[Lr]},{path:"pollution",loadChildren:()=>Promise.all([b.e(5010),b.e(745)]).then(b.bind(b,745)).then(P=>P.PollutionPageModule),canActivate:[Lr]},{path:"cleanup",loadChildren:()=>b.e(6524).then(b.bind(b,6524)).then(P=>P.CleanupPageModule),canActivate:[Lr]},{path:"disturbances",loadChildren:()=>Promise.all([b.e(5010),b.e(3800)]).then(b.bind(b,3800)).then(P=>P.DisturbancesPageModule),canActivate:[Lr]},{path:"health-form",loadChildren:()=>Promise.all([b.e(5010),b.e(2076),b.e(9081)]).then(b.bind(b,1462)).then(P=>P.HealthFormPageModule),canActivate:[Lr],data:{requiredLevel:2}},{path:"restoration",loadChildren:()=>Promise.all([b.e(6059),b.e(8061)]).then(b.bind(b,8061)).then(P=>P.RestorationPageModule),canActivate:[Lr],data:{requiredLevel:2}},{path:"outplanting",loadChildren:()=>Promise.all([b.e(6059),b.e(5369)]).then(b.bind(b,5369)).then(P=>P.OutplantingPageModule)},{path:"location-flora-fauna",loadChildren:()=>Promise.all([b.e(5010),b.e(5065),b.e(6354)]).then(b.bind(b,3973)).then(P=>P.LocationFloraFaunaPageModule)},{path:"location-health",loadChildren:()=>Promise.all([b.e(5010),b.e(5065),b.e(6637)]).then(b.bind(b,6637)).then(P=>P.LocationHealthPageModule)},{path:"statistics",loadChildren:()=>b.e(5579).then(b.bind(b,5579)).then(P=>P.StatisticsPageModule)},{path:"location-restoration",loadChildren:()=>Promise.all([b.e(5010),b.e(5065),b.e(1954)]).then(b.bind(b,1954)).then(P=>P.LocationRestorationPageModule)},{path:"location-outplanting",loadChildren:()=>Promise.all([b.e(5010),b.e(5065),b.e(1515)]).then(b.bind(b,1515)).then(P=>P.LocationOutplantingPageModule)},{path:"location-cleanup",loadChildren:()=>Promise.all([b.e(5010),b.e(5065),b.e(4562)]).then(b.bind(b,4562)).then(P=>P.LocationCleanupPageModule)},{path:"location-pollution",loadChildren:()=>Promise.all([b.e(5010),b.e(5065),b.e(4176)]).then(b.bind(b,4176)).then(P=>P.LocationPollutionPageModule)},{path:"location-disturbances",loadChildren:()=>Promise.all([b.e(5010),b.e(5065),b.e(6358)]).then(b.bind(b,3977)).then(P=>P.LocationDisturbancesPageModule)},{path:"location-biomass",loadChildren:()=>Promise.all([b.e(5010),b.e(5065),b.e(5676)]).then(b.bind(b,3295)).then(P=>P.LocationBiomassPageModule),canActivate:[Lr],data:{requiredLevel:3}},{path:"biomass",loadChildren:()=>Promise.all([b.e(2076),b.e(9724)]).then(b.bind(b,9724)).then(P=>P.BiomassPageModule),canActivate:[Lr],data:{requiredLevel:3}},{path:"data-analysis",loadChildren:()=>b.e(6368).then(b.bind(b,6368)).then(P=>P.DataAnalysisPageModule),canActivate:[Lr],data:{requiredLevel:4,desktopOnly:!0}},{path:"version-manager",loadChildren:()=>b.e(1153).then(b.bind(b,1153)).then(P=>P.VersionManagerModule),canActivate:[Lr],data:{requiredLevel:4,desktopOnly:!0}},{path:"monitoring-log",loadChildren:()=>b.e(609).then(b.bind(b,609)).then(P=>P.MonitoringLogPageModule)}];let Hr=(()=>{var P;class q{static#e=P=()=>(this.\u0275fac=function(ne){return new(ne||q)},this.\u0275mod=k.$C({type:q}),this.\u0275inj=S.G2t({imports:[Dr.iI.forRoot(Kr,{preloadingStrategy:Dr.Kp}),Dr.iI]}))}return P(),q})();var zr=b(4341);let Ne=(()=>{var P;class q{static#e=P=()=>(this.\u0275fac=function(ne){return new(ne||q)},this.\u0275mod=k.$C({type:q}),this.\u0275inj=S.G2t({imports:[Ce.MD,bn.bv,zr.YN]}))}return P(),q})(),Ke=(()=>{var P;class q{static#e=P=()=>(this.\u0275fac=function(ne){return new(ne||q)},this.\u0275mod=k.$C({type:q}),this.\u0275inj=S.G2t({imports:[Ce.MD,bn.bv,zr.YN]}))}return P(),q})(),pe=(()=>{var P;class q{static#e=P=()=>(this.\u0275fac=function(ne){return new(ne||q)},this.\u0275mod=k.$C({type:q,bootstrap:[kr]}),this.\u0275inj=S.G2t({providers:[{provide:_n.b,useClass:tr.jM},ar.L,{provide:k.hnV,useFactory:()=>()=>et.notifyAppReady(),multi:!0}],imports:[Pt,bn.bv.forRoot(),Hr,Tt.q1,Xe.sN.forRoot({echarts:()=>b.e(4209).then(b.bind(b,4209))}),Ne,Ke,Nr.register("ngsw-worker.js",{enabled:!(0,Le.naY)(),registrationStrategy:"registerWhenStable:30000"})]}))}return P(),q})();var A=b(1288);window,typeof window>"u"?Promise.resolve():(0,A.p)().then(()=>(0,A.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],void 0)),Cn().bootstrapModule(pe).catch(P=>console.log(P))},8254(Wt,ut,b){"use strict";b.d(ut,{Y:()=>Pe});var s=b(467);function Pe(Ce=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},void 0===window.Capacitor||Ce?void 0!==window.cordova&&function S(Ce){Ce.CapacitorUtils.Synapse=new Proxy({},{get:(k,Le)=>Ce.cordova.plugins[Le]})}(window):function o(Ce){Ce.CapacitorUtils.Synapse=new Proxy({},{get:(k,Le)=>new Proxy({},{get:(Je,me)=>(ie,we,l)=>{const p=Ce.Capacitor.Plugins[Le];void 0!==p?"function"==typeof p[me]?(0,s.A)(function*(){try{const m=yield p[me](ie);we(m)}catch(m){l(m)}})():l(new Error(`Method ${me} not found in Capacitor plugin ${Le}`)):l(new Error(`Capacitor plugin ${Le} not found`))}})})}(window))}},8313(Wt,ut,b){"use strict";b.r(ut),b.d(ut,{mdTransitionAnimation:()=>k});var s=b(2541),o=b(1841);b(5705),b(9596),b(4674);const k=(Le,Je)=>{var me,ie,we;const l="40px",m="back"===Je.direction,_=Je.leavingEl,D=(0,o.g)(Je.enteringEl),L=D.querySelector("ion-toolbar"),K=(0,s.c)();if(K.addElement(D).fill("both").beforeRemoveClass("ion-page-invisible"),m?K.duration((null!==(me=Je.duration)&&void 0!==me?me:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):K.duration((null!==(ie=Je.duration)&&void 0!==ie?ie:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${l})`,"translateY(0px)").fromTo("opacity",.01,1),L){const ae=(0,s.c)();ae.addElement(L),K.addAnimation(ae)}if(_&&m){K.duration((null!==(we=Je.duration)&&void 0!==we?we:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ae=(0,s.c)();ae.addElement((0,o.g)(_)).onFinish(B=>{1===B&&ae.elements.length>0&&ae.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${l})`).fromTo("opacity",1,0),K.addAnimation(ae)}return K}},8359(Wt,ut,b){"use strict";b.d(ut,{Kn:()=>k,yU:()=>Ce,Uv:()=>Le});var s=b(8071);const S=(0,b(1853).L)(me=>function(we){me(this),this.message=we?`${we.length} errors occurred during unsubscription:\n${we.map((l,p)=>`${p+1}) ${l.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=we});var Pe=b(7908);class Ce{constructor(ie){this.initialTeardown=ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ie;if(!this.closed){this.closed=!0;const{_parentage:we}=this;if(we)if(this._parentage=null,Array.isArray(we))for(const m of we)m.remove(this);else we.remove(this);const{initialTeardown:l}=this;if((0,s.T)(l))try{l()}catch(m){ie=m instanceof S?m.errors:[m]}const{_finalizers:p}=this;if(p){this._finalizers=null;for(const m of p)try{Je(m)}catch(v){ie=ie??[],v instanceof S?ie=[...ie,...v.errors]:ie.push(v)}}if(ie)throw new S(ie)}}add(ie){var we;if(ie&&ie!==this)if(this.closed)Je(ie);else{if(ie instanceof Ce){if(ie.closed||ie._hasParent(this))return;ie._addParent(this)}(this._finalizers=null!==(we=this._finalizers)&&void 0!==we?we:[]).push(ie)}}_hasParent(ie){const{_parentage:we}=this;return we===ie||Array.isArray(we)&&we.includes(ie)}_addParent(ie){const{_parentage:we}=this;this._parentage=Array.isArray(we)?(we.push(ie),we):we?[we,ie]:ie}_removeParent(ie){const{_parentage:we}=this;we===ie?this._parentage=null:Array.isArray(we)&&(0,Pe.o)(we,ie)}remove(ie){const{_finalizers:we}=this;we&&(0,Pe.o)(we,ie),ie instanceof Ce&&ie._removeParent(this)}}Ce.EMPTY=(()=>{const me=new Ce;return me.closed=!0,me})();const k=Ce.EMPTY;function Le(me){return me instanceof Ce||me&&"closed"in me&&(0,s.T)(me.remove)&&(0,s.T)(me.add)&&(0,s.T)(me.unsubscribe)}function Je(me){(0,s.T)(me)?me():me.unsubscribe()}},8440(Wt,ut,b){"use strict";b.d(ut,{Ag:()=>ze,Bg:()=>L,EF:()=>xe,H8:()=>ge,Ht:()=>k,JC:()=>p,KE:()=>Je,KO:()=>ye,KZ:()=>nt,Ny:()=>Fe,TO:()=>D,Wu:()=>ae,XR:()=>G,a7:()=>Re,bh:()=>Ce,j2:()=>At,mC:()=>vt,mK:()=>we,n5:()=>He,nR:()=>Le,pL:()=>ie,s0:()=>dt,si:()=>Z});let s=null,o=!1,S=1;const Ce=Symbol("SIGNAL");function k(ht){const Nt=s;return s=ht,Nt}function Le(){return s}function Je(){return o}const ie={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function we(ht){if(o)throw new Error("");if(null===s)return;s.consumerOnSignalRead(ht);const Nt=s.producersTail;if(void 0!==Nt&&Nt.producer===ht)return;let Ot;const on=s.recomputing;if(on&&(Ot=void 0!==Nt?Nt.nextProducer:s.producers,void 0!==Ot&&Ot.producer===ht))return s.producersTail=Ot,void(Ot.lastReadVersion=ht.version);const ft=ht.consumersTail;if(void 0!==ft&&ft.consumer===s&&(!on||function Ye(ht,Nt){const Ot=Nt.producersTail;if(void 0!==Ot){let on=Nt.producers;do{if(on===ht)return!0;if(on===Ot)break;on=on.nextProducer}while(void 0!==on)}return!1}(ft,s)))return;const yt=_e(s),Dt={producer:ht,consumer:s,nextProducer:Ot,prevConsumer:ft,lastReadVersion:ht.version,nextConsumer:void 0};s.producersTail=Dt,void 0!==Nt?Nt.nextProducer=Dt:s.producers=Dt,yt&&he(ht,Dt)}function p(ht){if((!_e(ht)||ht.dirty)&&(ht.dirty||ht.lastCleanEpoch!==S)){if(!ht.producerMustRecompute(ht)&&!Z(ht))return void D(ht);ht.producerRecomputeValue(ht),D(ht)}}function m(ht){if(void 0===ht.consumers)return;const Nt=o;o=!0;try{for(let Ot=ht.consumers;void 0!==Ot;Ot=Ot.nextConsumer){const on=Ot.consumer;on.dirty||_(on)}}finally{o=Nt}}function v(){return!1!==s?.consumerAllowSignalWrites}function _(ht){ht.dirty=!0,m(ht),ht.consumerMarkedDirty?.(ht)}function D(ht){ht.dirty=!1,ht.lastCleanEpoch=S}function L(ht){return ht&&function K(ht){ht.producersTail=void 0,ht.recomputing=!0}(ht),k(ht)}function ae(ht,Nt){k(Nt),ht&&function B(ht){ht.recomputing=!1;const Nt=ht.producersTail;let Ot=void 0!==Nt?Nt.nextProducer:ht.producers;if(void 0!==Ot){if(_e(ht))do{Ot=fe(Ot)}while(void 0!==Ot);void 0!==Nt?Nt.nextProducer=void 0:ht.producers=void 0}}(ht)}function Z(ht){for(let Nt=ht.producers;void 0!==Nt;Nt=Nt.nextProducer){const Ot=Nt.producer,on=Nt.lastReadVersion;if(on!==Ot.version||(p(Ot),on!==Ot.version))return!0}return!1}function G(ht){if(_e(ht)){let Nt=ht.producers;for(;void 0!==Nt;)Nt=fe(Nt)}ht.producers=void 0,ht.producersTail=void 0,ht.consumers=void 0,ht.consumersTail=void 0}function he(ht,Nt){const Ot=ht.consumersTail,on=_e(ht);if(void 0!==Ot?(Nt.nextConsumer=Ot.nextConsumer,Ot.nextConsumer=Nt):(Nt.nextConsumer=void 0,ht.consumers=Nt),Nt.prevConsumer=Ot,ht.consumersTail=Nt,!on)for(let ft=ht.producers;void 0!==ft;ft=ft.nextProducer)he(ft.producer,ft)}function fe(ht){const Nt=ht.producer,Ot=ht.nextProducer,on=ht.nextConsumer,ft=ht.prevConsumer;if(ht.nextConsumer=void 0,ht.prevConsumer=void 0,void 0!==on?on.prevConsumer=ft:Nt.consumersTail=ft,void 0!==ft)ft.nextConsumer=on;else if(Nt.consumers=on,!_e(Nt)){let yt=Nt.producers;for(;void 0!==yt;)yt=fe(yt)}return Ot}function _e(ht){return ht.consumerIsAlwaysLive||void 0!==ht.consumers}function Re(ht){}function ge(ht,Nt){return Object.is(ht,Nt)}function nt(ht,Nt){const Ot=Object.create(rt);Ot.computation=ht,void 0!==Nt&&(Ot.equal=Nt);const on=()=>{if(p(Ot),we(Ot),Ot.value===xe)throw Ot.error;return Ot.value};return on[Ce]=Ot,on}const ze=Symbol("UNSET"),Fe=Symbol("COMPUTING"),xe=Symbol("ERRORED"),rt={...ie,value:ze,dirty:!0,error:null,equal:ge,kind:"computed",producerMustRecompute:ht=>ht.value===ze||ht.value===Fe,producerRecomputeValue(ht){if(ht.value===Fe)throw new Error("");const Nt=ht.value;ht.value=Fe;const Ot=L(ht);let on,ft=!1;try{on=ht.computation(),k(null),ft=Nt!==ze&&Nt!==xe&&on!==xe&&ht.equal(Nt,on)}catch(yt){on=xe,ht.error=yt}finally{ae(ht,Ot)}ft?ht.value=Nt:(ht.value=on,ht.version++)}};let Ae=function Ve(){throw new Error};function H(ht){Ae(ht)}function ye(ht){Ae=ht}function He(ht,Nt){const Ot=Object.create(dt);Ot.value=ht,void 0!==Nt&&(Ot.equal=Nt);const on=()=>function pt(ht){return we(ht),ht.value}(Ot);return on[Ce]=Ot,[on,Dt=>At(Ot,Dt),Dt=>vt(Ot,Dt)]}function At(ht,Nt){v()||H(ht),ht.equal(ht.value,Nt)||(ht.value=Nt,function Bt(ht){ht.version++,function l(){S++}(),m(ht)}(ht))}function vt(ht,Nt){v()||H(ht),At(ht,Nt(ht.value))}const dt={...ie,equal:ge,value:void 0,kind:"signal"}},8496(Wt,ut,b){"use strict";function s(o,S){return o.reduce((Pe,Ce,k)=>(Pe[Ce]=S[k],Pe),{})}b.d(ut,{e:()=>s})},8607(Wt,ut,b){"use strict";b.d(ut,{B:()=>Pe,G:()=>Ce});class o{constructor(Le,Je,me,ie,we){this.id=Je,this.name=me,this.disableScroll=we,this.priority=1e6*ie+Je,this.ctrl=Le}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Le=this.ctrl.capture(this.name,this.id,this.priority);return Le&&this.disableScroll&&this.ctrl.disableScroll(this.id),Le}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class S{constructor(Le,Je,me,ie){this.id=Je,this.disable=me,this.disableScroll=ie,this.ctrl=Le}block(){if(this.ctrl){if(this.disable)for(const Le of this.disable)this.ctrl.disableGesture(Le,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Le of this.disable)this.ctrl.enableGesture(Le,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Pe="backdrop-no-scroll",Ce=new class s{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Le){var Je;return new o(this,this.newID(),Le.name,null!==(Je=Le.priority)&&void 0!==Je?Je:0,!!Le.disableScroll)}createBlocker(Le={}){return new S(this,this.newID(),Le.disable,!!Le.disableScroll)}start(Le,Je,me){return this.canStart(Le)?(this.requestedStart.set(Je,me),!0):(this.requestedStart.delete(Je),!1)}capture(Le,Je,me){if(!this.start(Le,Je,me))return!1;const ie=this.requestedStart;let we=-1e4;if(ie.forEach(l=>{we=Math.max(we,l)}),we===me){this.capturedId=Je,ie.clear();const l=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Le}});return document.dispatchEvent(l),!0}return ie.delete(Je),!1}release(Le){this.requestedStart.delete(Le),this.capturedId===Le&&(this.capturedId=void 0)}disableGesture(Le,Je){let me=this.disabledGestures.get(Le);void 0===me&&(me=new Set,this.disabledGestures.set(Le,me)),me.add(Je)}enableGesture(Le,Je){const me=this.disabledGestures.get(Le);void 0!==me&&me.delete(Je)}disableScroll(Le){this.disabledScroll.add(Le),1===this.disabledScroll.size&&document.body.classList.add(Pe)}enableScroll(Le){this.disabledScroll.delete(Le),0===this.disabledScroll.size&&document.body.classList.remove(Pe)}canStart(Le){return!(void 0!==this.capturedId||this.isDisabled(Le))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Le){const Je=this.disabledGestures.get(Le);return!!(Je&&Je.size>0)}newID(){return this.gestureId++,this.gestureId}}},8750(Wt,ut,b){"use strict";b.d(ut,{Tg:()=>p});var s=b(1635),o=b(7441),S=b(9858),Pe=b(1985),Ce=b(5055),k=b(7953),Le=b(591),Je=b(5397),me=b(5196),ie=b(8071),we=b(5334),l=b(3494);function p(B){if(B instanceof Pe.c)return B;if(null!=B){if((0,Ce.l)(B))return function m(B){return new Pe.c(Z=>{const G=B[l.s]();if((0,ie.T)(G.subscribe))return G.subscribe(Z);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(B);if((0,o.X)(B))return function v(B){return new Pe.c(Z=>{for(let G=0;G<B.length&&!Z.closed;G++)Z.next(B[G]);Z.complete()})}(B);if((0,S.y)(B))return function _(B){return new Pe.c(Z=>{B.then(G=>{Z.closed||(Z.next(G),Z.complete())},G=>Z.error(G)).then(null,we.m)})}(B);if((0,k.T)(B))return L(B);if((0,Je.x)(B))return function D(B){return new Pe.c(Z=>{for(const G of B)if(Z.next(G),Z.closed)return;Z.complete()})}(B);if((0,me.U)(B))return function K(B){return L((0,me.C)(B))}(B)}throw(0,Le.L)(B)}function L(B){return new Pe.c(Z=>{(function ae(B,Z){var G,he,fe,_e;return(0,s.sH)(this,void 0,void 0,function*(){try{for(G=(0,s.xN)(B);!(he=yield G.next()).done;)if(Z.next(he.value),Z.closed)return}catch(Re){fe={error:Re}}finally{try{he&&!he.done&&(_e=G.return)&&(yield _e.call(G))}finally{if(fe)throw fe.error}}Z.complete()})})(B,Z).catch(G=>Z.error(G))})}},8839(Wt,ut,b){"use strict";b.d(ut,{b:()=>ie,E:()=>me});var s=b(8359);class o extends s.yU{constructor(l,p){super()}schedule(l,p=0){return this}}const S={setInterval(we,l,...p){const{delegate:m}=S;return m?.setInterval?m.setInterval(we,l,...p):setInterval(we,l,...p)},clearInterval(we){const{delegate:l}=S;return(l?.clearInterval||clearInterval)(we)},delegate:void 0};var Pe=b(7908),k=b(6129);class Le{constructor(l,p=Le.now){this.schedulerActionCtor=l,this.now=p}schedule(l,p=0,m){return new this.schedulerActionCtor(this,l).schedule(m,p)}}Le.now=k.U.now;const me=new class Je extends Le{constructor(l,p=Le.now){super(l,p),this.actions=[],this._active=!1}flush(l){const{actions:p}=this;if(this._active)return void p.push(l);let m;this._active=!0;do{if(m=l.execute(l.state,l.delay))break}while(l=p.shift());if(this._active=!1,m){for(;l=p.shift();)l.unsubscribe();throw m}}}(class Ce extends o{constructor(l,p){super(l,p),this.scheduler=l,this.work=p,this.pending=!1}schedule(l,p=0){var m;if(this.closed)return this;this.state=l;const v=this.id,_=this.scheduler;return null!=v&&(this.id=this.recycleAsyncId(_,v,p)),this.pending=!0,this.delay=p,this.id=null!==(m=this.id)&&void 0!==m?m:this.requestAsyncId(_,this.id,p),this}requestAsyncId(l,p,m=0){return S.setInterval(l.flush.bind(l,this),m)}recycleAsyncId(l,p,m=0){if(null!=m&&this.delay===m&&!1===this.pending)return p;null!=p&&S.clearInterval(p)}execute(l,p){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const m=this._execute(l,p);if(m)return m;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(l,p){let v,m=!1;try{this.work(l)}catch(_){m=!0,v=_||new Error("Scheduled action threw falsy error")}if(m)return this.unsubscribe(),v}unsubscribe(){if(!this.closed){const{id:l,scheduler:p}=this,{actions:m}=p;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Pe.o)(m,this),null!=l&&(this.id=this.recycleAsyncId(p,l,null)),this.delay=null,super.unsubscribe()}}}),ie=me},8863(Wt,ut,b){"use strict";b.d(ut,{u:()=>we});var s=b(467),o=b(2084),S=b(2615),Pe=b(918),Ce=b(5029),k=b(4938);const Le="monitoring-log.json",Je="monitoring-log_master.json",me="monitoring-logs";let we=(()=>{var l;class p{constructor(v,_,D){this.sharedDataService=v,this.supabaseService=_,this.storage=D,this.draftLogTimestamps=new Map,this.DRAFT_THROTTLE_MS=3e5}recordEvent(v){var _=this;return(0,s.A)(function*(){try{const D=new Date,L=240,K=D.getTimezoneOffset(),ae=new Date(D.getTime()+60*(L+K)*1e3),B=ae.toLocaleDateString("en-CA"),Z=ae.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),G=`${B.replace(/-/g,"")}_${Z.replace(/:/g,"")}_${Math.random().toString(36).substr(2,5)}`,he=_.getDeviceInfo(),fe={id:G,timestamp:(0,o.E)(),date:B,time:Z,device:he,...v};let _e=[];try{_e=(yield _.sharedDataService.readJsonFile(Le))||[]}catch{_e=[]}_e.push(fe),_e.length>1e3&&(_e=_e.slice(-1e3)),yield _.sharedDataService.writeJsonFile(Le,_e)}catch(D){console.error("MonitoringLogService: Error recording event:",D)}})()}getEntries(){var v=this;return(0,s.A)(function*(){try{return(yield v.sharedDataService.readJsonFile(Le))||[]}catch{return[]}})()}recordLogin(v){var _=this;return(0,s.A)(function*(){yield _.recordEvent({eventType:"login",username:v})})()}recordLogout(v){var _=this;return(0,s.A)(function*(){yield _.recordEvent({eventType:"logout",username:v})})()}recordDraftSaved(v,_,D,L){var K=this;return(0,s.A)(function*(){const ae=`draft_${_}`,B=Date.now(),Z=K.draftLogTimestamps.get(ae);Z&&B-Z<K.DRAFT_THROTTLE_MS||(K.draftLogTimestamps.set(ae,B),yield K.recordEvent({eventType:"draft_saved",username:v,formType:_,reportId:D,details:L?`Draft: ${L}`:`Draft saved for ${_}`}))})()}recordFormSubmitted(v,_,D,L,K,ae){var B=this;return(0,s.A)(function*(){const Z=L?"Submitted (queued offline)":"Submitted";yield B.recordEvent({eventType:"form_submitted",username:v,formType:_,reportId:D,details:K?`${Z}: ${K}`:`${Z} ${_}`,submittedBy:ae})})()}recordFormEdited(v,_,D,L,K,ae){var B=this;return(0,s.A)(function*(){const Z=L?"Edited (queued offline)":"Edited";yield B.recordEvent({eventType:"form_edited",username:v,formType:_,reportId:D,details:K?`${Z}: ${K}`:`${Z} ${_}`,submittedBy:ae})})()}recordFormDeleted(v,_,D,L){var K=this;return(0,s.A)(function*(){yield K.recordEvent({eventType:"form_deleted",username:v,formType:_,reportId:D,details:L?`Deleted: ${L}`:`Deleted ${_} report`})})()}recordSpeciesAdded(v,_,D,L){var K=this;return(0,s.A)(function*(){yield K.recordEvent({eventType:"species_added",username:v,details:L?`New ${D} species added (pending approval): ${_}`:`New ${D} species added: ${_}`})})()}recordSiteAdded(v,_,D){var L=this;return(0,s.A)(function*(){yield L.recordEvent({eventType:"site_added",username:v,details:D?`New site added (pending permission): ${_}`:`New site added: ${_}`})})()}recordLevelRequest(v,_){var D=this;return(0,s.A)(function*(){yield D.recordEvent({eventType:"level_request",username:v,details:`Requested L${_} access`})})()}recordUserRegistered(v,_){var D=this;return(0,s.A)(function*(){yield D.recordEvent({eventType:"user_registered",username:v,details:`New user registered (L${_})`})})()}uploadToServer(){var v=this;return(0,s.A)(function*(){try{const _=yield v.sharedDataService.readJsonFile(Le);if(!_||0===_.length)return console.log("\u{1f4cb} MonitoringLogService: No local log entries to upload"),!0;const L=`device-logs/monitoring-log_${yield v.getUploadDeviceId()}.json`,K=JSON.stringify(_,null,2),ae=new Blob([K],{type:"application/json"}),B=v.supabaseService.getClient(),{error:Z}=yield B.storage.from(me).upload(L,ae,{upsert:!0});return Z?(console.error("\u274c MonitoringLogService: Upload error:",Z),!1):(console.log(`\u2705 MonitoringLogService: Uploaded ${_.length} log entries to ${L}`),!0)}catch(_){return console.error("\u274c MonitoringLogService: Error uploading logs:",_),!1}})()}downloadAllDeviceLogs(){var v=this;return(0,s.A)(function*(){try{const _=v.supabaseService.getClient(),{data:D,error:L}=yield _.storage.from(me).list("device-logs",{limit:500,sortBy:{column:"created_at",order:"desc"}});if(L)return console.error("\u274c MonitoringLogService: Error listing device logs:",L),!1;if(!D||0===D.length)return console.log("\u{1f4cb} MonitoringLogService: No device logs found on server"),!0;console.log(`\u{1f4e5} MonitoringLogService: Found ${D.length} device log files on server`);const K=[],ae=new Set;for(const Z of D)if(Z.name.endsWith(".json"))try{const{data:G,error:he}=yield _.storage.from(me).download(`device-logs/${Z.name}`);if(he||!G){console.warn(`\u26a0\ufe0f MonitoringLogService: Failed to download ${Z.name}:`,he);continue}const fe=yield G.text(),_e=JSON.parse(fe);if(Array.isArray(_e))for(const Re of _e)ae.has(Re.id)||(ae.add(Re.id),K.push(Re))}catch(G){console.warn(`\u26a0\ufe0f MonitoringLogService: Error parsing ${Z.name}:`,G)}K.sort((Z,G)=>(G.timestamp||"").localeCompare(Z.timestamp||""));const B=K.slice(0,1e3);return yield v.sharedDataService.writeJsonFile(Je,B),console.log(`\u2705 MonitoringLogService: Saved master log with ${B.length} entries (from ${D.length} device files)`),!0}catch(_){return console.error("\u274c MonitoringLogService: Error downloading device logs:",_),!1}})()}getAllEntries(){var v=this;return(0,s.A)(function*(){const _=new Set,D=[],L=yield v.getEntries();for(const K of L)_.has(K.id)||(_.add(K.id),D.push(K));try{const K=yield v.sharedDataService.readJsonFile(Je);if(K&&Array.isArray(K))for(const ae of K)_.has(ae.id)||(_.add(ae.id),D.push(ae))}catch{}return D.sort((K,ae)=>(ae.timestamp||"").localeCompare(K.timestamp||"")),D})()}getDeviceInfo(){const v=navigator.userAgent||"";let _="Unknown OS";/iPad|iPhone|iPod/.test(v)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1?_="iOS":/Android/.test(v)?_="Android":/Mac OS X|Macintosh/.test(v)?_="macOS":/Windows/.test(v)?_="Windows":/Linux/.test(v)?_="Linux":/CrOS/.test(v)&&(_="ChromeOS");let D="Laptop";return/iPad/.test(v)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||/Android/.test(v)&&!/Mobile/.test(v)?D="Tablet":(/iPhone|iPod/.test(v)||/Android/.test(v)&&/Mobile/.test(v))&&(D="Mobile"),`${D} \xb7 ${_}`}getUploadDeviceId(){var v=this;return(0,s.A)(function*(){try{return`${(yield v.storage.getUser())?.username||"unknown"}_${navigator.platform||"unknown"}`.replace(/\s+/g,"_").substring(0,50)}catch{return"unknown_device"}})()}static#e=l=()=>(this.\u0275fac=function(_){return new(_||p)(S.KVO(Pe.H),S.KVO(Ce.L),S.KVO(k.w))},this.\u0275prov=S.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}))}return l(),p})()},8941(Wt,ut,b){"use strict";b.r(ut),b.d(ut,{App:()=>o});const o=(0,b(5083).F3)("App",{web:()=>b.e(9303).then(b.bind(b,9303)).then(S=>new S.AppWeb)})},9081(Wt,ut,b){"use strict";b.d(ut,{m:()=>p});var s=b(467),o=b(9596),S=b(9431),Pe=b(5705),Ce=b(4674),k=b(6855),Le=b(2541);const Je=m=>(0,Le.c)().duration(m?400:300),me=m=>{let v,_;const D=m.width+8,L=(0,Le.c)(),K=(0,Le.c)();m.isEndSide?(v=D+"px",_="0px"):(v=-D+"px",_="0px"),L.addElement(m.menuInnerEl).fromTo("transform",`translateX(${v})`,`translateX(${_})`);const B="ios"===(0,k.b)(m),Z=B?.2:.25;return K.addElement(m.backdropEl).fromTo("opacity",.01,Z),Je(B).addAnimation([L,K])},ie=m=>{let v,_;const D=(0,k.b)(m),L=m.width;m.isEndSide?(v=-L+"px",_=L+"px"):(v=L+"px",_=-L+"px");const K=(0,Le.c)().addElement(m.menuInnerEl).fromTo("transform",`translateX(${_})`,"translateX(0px)"),ae=(0,Le.c)().addElement(m.contentEl).fromTo("transform","translateX(0px)",`translateX(${v})`),B=(0,Le.c)().addElement(m.backdropEl).fromTo("opacity",.01,.32);return Je("ios"===D).addAnimation([K,ae,B])},we=m=>{const v=(0,k.b)(m),_=m.width*(m.isEndSide?-1:1)+"px",D=(0,Le.c)().addElement(m.contentEl).fromTo("transform","translateX(0px)",`translateX(${_})`);return Je("ios"===v).addAnimation(D)},p=(()=>{const m=new Map,v=[],_=function(){var Ae=(0,s.A)(function*(H){const ye=yield G(H,!0);return!!ye&&ye.open()});return function(ye){return Ae.apply(this,arguments)}}(),D=function(){var Ae=(0,s.A)(function*(H){const ye=yield void 0!==H?G(H,!0):he();return void 0!==ye&&ye.close()});return function(ye){return Ae.apply(this,arguments)}}(),L=function(){var Ae=(0,s.A)(function*(H){const ye=yield G(H,!0);return!!ye&&ye.toggle()});return function(ye){return Ae.apply(this,arguments)}}(),K=function(){var Ae=(0,s.A)(function*(H,ye){const Me=yield G(ye);return Me&&(Me.disabled=!H),Me});return function(ye,Me){return Ae.apply(this,arguments)}}(),ae=function(){var Ae=(0,s.A)(function*(H,ye){const Me=yield G(ye);return Me&&(Me.swipeGesture=H),Me});return function(ye,Me){return Ae.apply(this,arguments)}}(),B=function(){var Ae=(0,s.A)(function*(H){if(null!=H){const ye=yield G(H);return void 0!==ye&&ye.isOpen()}return void 0!==(yield he())});return function(ye){return Ae.apply(this,arguments)}}(),Z=function(){var Ae=(0,s.A)(function*(H){const ye=yield G(H);return!!ye&&!ye.disabled});return function(ye){return Ae.apply(this,arguments)}}(),G=function(){var Ae=(0,s.A)(function*(H,ye=!1){if(yield Ve(),"start"===H||"end"===H){const He=v.filter(pt=>pt.side===H&&!pt.disabled);if(He.length>=1)return He.length>1&&ye&&(0,Pe.f)(`menuController queried for a menu on the "${H}" side, but ${He.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,He.map(pt=>pt.el)),He[0].el;const ot=v.filter(pt=>pt.side===H);if(ot.length>=1)return ot.length>1&&ye&&(0,Pe.f)(`menuController queried for a menu on the "${H}" side, but ${ot.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,ot.map(pt=>pt.el)),ot[0].el}else if(null!=H)return rt(He=>He.menuId===H);return rt(He=>!He.disabled)||(v.length>0?v[0].el:void 0)});return function(ye){return Ae.apply(this,arguments)}}(),he=function(){var Ae=(0,s.A)(function*(){return yield Ve(),ze()});return function(){return Ae.apply(this,arguments)}}(),fe=function(){var Ae=(0,s.A)(function*(){return yield Ve(),Fe()});return function(){return Ae.apply(this,arguments)}}(),_e=function(){var Ae=(0,s.A)(function*(){return yield Ve(),xe()});return function(){return Ae.apply(this,arguments)}}(),Re=(Ae,H)=>{m.set(Ae,H)},ge=function(){var Ae=(0,s.A)(function*(H,ye,Me,He){if(xe())return!1;if(ye){const ot=yield he();ot&&H.el!==ot&&(yield ot.setOpen(!1,!1))}return H._setOpen(ye,Me,He)});return function(ye,Me,He,ot){return Ae.apply(this,arguments)}}(),ze=()=>rt(Ae=>Ae._isOpen),Fe=()=>v.map(Ae=>Ae.el),xe=()=>v.some(Ae=>Ae.isAnimating),rt=Ae=>{const H=v.find(Ae);if(void 0!==H)return H.el},Ve=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Ae=>new Promise(H=>(0,Ce.c)(Ae,H))));return Re("reveal",we),Re("push",ie),Re("overlay",me),null==o.d||o.d.addEventListener("ionBackButton",Ae=>{const H=ze();H&&Ae.detail.register(S.MENU_BACK_BUTTON_PRIORITY,()=>H.close())}),{registerAnimation:Re,get:G,getMenus:fe,getOpen:he,isEnabled:Z,swipeGesture:ae,isAnimating:_e,isOpen:B,enable:K,toggle:L,close:D,open:_,_getOpenSync:ze,_createAnimation:(Ae,H)=>{const ye=m.get(Ae);if(!ye)throw new Error("animation not registered");return ye(H)},_register:Ae=>{v.indexOf(Ae)<0&&v.push(Ae)},_unregister:Ae=>{const H=v.indexOf(Ae);H>-1&&v.splice(H,1)},_setOpen:ge}})()},9147(Wt,ut,b){"use strict";b.d(ut,{E:()=>we,a:()=>o,s:()=>me});var s=b(5705);const o=l=>{try{if(l instanceof Je)return l.value;if(!Ce()||"string"!=typeof l||""===l)return l;if(l.includes("onload="))return"";const p=document.createDocumentFragment(),m=document.createElement("div");p.appendChild(m),m.innerHTML=l,Le.forEach(L=>{const K=p.querySelectorAll(L);for(let ae=K.length-1;ae>=0;ae--){const B=K[ae];B.parentNode?B.parentNode.removeChild(B):p.removeChild(B);const Z=Pe(B);for(let G=0;G<Z.length;G++)S(Z[G])}});const v=Pe(p);for(let L=0;L<v.length;L++)S(v[L]);const _=document.createElement("div");_.appendChild(p);const D=_.querySelector("div");return null!==D?D.innerHTML:_.innerHTML}catch(p){return(0,s.j)("sanitizeDOMString",p),""}},S=l=>{if(l.nodeType&&1!==l.nodeType)return;if(typeof NamedNodeMap<"u"&&!(l.attributes instanceof NamedNodeMap))return void l.remove();for(let m=l.attributes.length-1;m>=0;m--){const v=l.attributes.item(m),_=v.name;if(!k.includes(_.toLowerCase())){l.removeAttribute(_);continue}const D=v.value,L=l[_];(null!=D&&D.toLowerCase().includes("javascript:")||null!=L&&L.toLowerCase().includes("javascript:"))&&l.removeAttribute(_)}const p=Pe(l);for(let m=0;m<p.length;m++)S(p[m])},Pe=l=>null!=l.children?l.children:l.childNodes,Ce=()=>{var l;const p=window,m=null===(l=p?.Ionic)||void 0===l?void 0:l.config;return!m||(m.get?m.get("sanitizerEnabled",!0):!0===m.sanitizerEnabled||void 0===m.sanitizerEnabled)},k=["class","id","href","src","name","slot"],Le=["script","style","iframe","meta","link","object","embed"];class Je{constructor(p){this.value=p}}const me=l=>{const p=window,m=p.Ionic;if(!m||!m.config||"Object"===m.config.constructor.name)return p.Ionic=p.Ionic||{},p.Ionic.config=Object.assign(Object.assign({},p.Ionic.config),l),p.Ionic.config},we=!1},9270(Wt,ut,b){"use strict";b.d(ut,{f:()=>s});const s={setTimeout(o,S,...Pe){const{delegate:Ce}=s;return Ce?.setTimeout?Ce.setTimeout(o,S,...Pe):setTimeout(o,S,...Pe)},clearTimeout(o){const{delegate:S}=s;return(S?.clearTimeout||clearTimeout)(o)},delegate:void 0}},9295(Wt,ut,b){"use strict";b.d(ut,{EW:()=>m,O8:()=>p}),b(467);var o=b(2615),S=b(8440);function p(Ae){return function Je(Ae){const H=(0,S.Ht)(null);try{return Ae()}finally{(0,S.Ht)(H)}}(Ae)}function m(Ae,H){return(0,S.KZ)(Ae,H?.equal)}Error,Error},9326(Wt,ut,b){"use strict";b.d(ut,{lI:()=>Ce,ms:()=>Pe});var s=b(8071),o=b(9470);function S(Le){return Le[Le.length-1]}function Pe(Le){return(0,s.T)(S(Le))?Le.pop():void 0}function Ce(Le){return(0,o.m)(S(Le))?Le.pop():void 0}},9330(Wt,ut,b){"use strict";b.d(ut,{Qq:()=>dt,q1:()=>Br}),b(467);var o=b(2615),S=b(3664),Pe=b(274),Ce=b(5964),k=b(980),Le=b(6354),Je=b(5558),me=b(1985),we=(b(6648),b(7673)),l=b(2512);class p{}class m{}class v{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(st){st?"string"==typeof st?this.lazyInit=()=>{this.headers=new Map,st.split("\n").forEach(tt=>{const be=tt.indexOf(":");if(be>0){const We=tt.slice(0,be),Se=tt.slice(be+1).trim();this.addHeaderEntry(We,Se)}})}:typeof Headers<"u"&&st instanceof Headers?(this.headers=new Map,st.forEach((tt,be)=>{this.addHeaderEntry(be,tt)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(st).forEach(([tt,be])=>{this.setHeaderEntries(tt,be)})}:this.headers=new Map}has(st){return this.init(),this.headers.has(st.toLowerCase())}get(st){this.init();const tt=this.headers.get(st.toLowerCase());return tt&&tt.length>0?tt[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(st){return this.init(),this.headers.get(st.toLowerCase())||null}append(st,tt){return this.clone({name:st,value:tt,op:"a"})}set(st,tt){return this.clone({name:st,value:tt,op:"s"})}delete(st,tt){return this.clone({name:st,value:tt,op:"d"})}maybeSetNormalizedName(st,tt){this.normalizedNames.has(tt)||this.normalizedNames.set(tt,st)}init(){this.lazyInit&&(this.lazyInit instanceof v?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(st=>this.applyUpdate(st)),this.lazyUpdate=null))}copyFrom(st){st.init(),Array.from(st.headers.keys()).forEach(tt=>{this.headers.set(tt,st.headers.get(tt)),this.normalizedNames.set(tt,st.normalizedNames.get(tt))})}clone(st){const tt=new v;return tt.lazyInit=this.lazyInit&&this.lazyInit instanceof v?this.lazyInit:this,tt.lazyUpdate=(this.lazyUpdate||[]).concat([st]),tt}applyUpdate(st){const tt=st.name.toLowerCase();switch(st.op){case"a":case"s":let be=st.value;if("string"==typeof be&&(be=[be]),0===be.length)return;this.maybeSetNormalizedName(st.name,tt);const We=("a"===st.op?this.headers.get(tt):void 0)||[];We.push(...be),this.headers.set(tt,We);break;case"d":const Se=st.value;if(Se){let et=this.headers.get(tt);if(!et)return;et=et.filter(St=>-1===Se.indexOf(St)),0===et.length?(this.headers.delete(tt),this.normalizedNames.delete(tt)):this.headers.set(tt,et)}else this.headers.delete(tt),this.normalizedNames.delete(tt)}}addHeaderEntry(st,tt){const be=st.toLowerCase();this.maybeSetNormalizedName(st,be),this.headers.has(be)?this.headers.get(be).push(tt):this.headers.set(be,[tt])}setHeaderEntries(st,tt){const be=(Array.isArray(tt)?tt:[tt]).map(Se=>Se.toString()),We=st.toLowerCase();this.headers.set(We,be),this.maybeSetNormalizedName(st,We)}forEach(st){this.init(),Array.from(this.normalizedNames.keys()).forEach(tt=>st(this.normalizedNames.get(tt),this.headers.get(tt)))}}class D{encodeKey(st){return B(st)}encodeValue(st){return B(st)}decodeKey(st){return decodeURIComponent(st)}decodeValue(st){return decodeURIComponent(st)}}const K=/%(\d[a-f0-9])/gi,ae={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function B(ke){return encodeURIComponent(ke).replace(K,(st,tt)=>ae[tt]??st)}function Z(ke){return`${ke}`}class G{map;encoder;updates=null;cloneFrom=null;constructor(st={}){if(this.encoder=st.encoder||new D,st.fromString){if(st.fromObject)throw new o.buA(2805,!1);this.map=function L(ke,st){const tt=new Map;return ke.length>0&&ke.replace(/^\?/,"").split("&").forEach(We=>{const Se=We.indexOf("="),[et,St]=-1==Se?[st.decodeKey(We),""]:[st.decodeKey(We.slice(0,Se)),st.decodeValue(We.slice(Se+1))],Xt=tt.get(et)||[];Xt.push(St),tt.set(et,Xt)}),tt}(st.fromString,this.encoder)}else st.fromObject?(this.map=new Map,Object.keys(st.fromObject).forEach(tt=>{const be=st.fromObject[tt],We=Array.isArray(be)?be.map(Z):[Z(be)];this.map.set(tt,We)})):this.map=null}has(st){return this.init(),this.map.has(st)}get(st){this.init();const tt=this.map.get(st);return tt?tt[0]:null}getAll(st){return this.init(),this.map.get(st)||null}keys(){return this.init(),Array.from(this.map.keys())}append(st,tt){return this.clone({param:st,value:tt,op:"a"})}appendAll(st){const tt=[];return Object.keys(st).forEach(be=>{const We=st[be];Array.isArray(We)?We.forEach(Se=>{tt.push({param:be,value:Se,op:"a"})}):tt.push({param:be,value:We,op:"a"})}),this.clone(tt)}set(st,tt){return this.clone({param:st,value:tt,op:"s"})}delete(st,tt){return this.clone({param:st,value:tt,op:"d"})}toString(){return this.init(),this.keys().map(st=>{const tt=this.encoder.encodeKey(st);return this.map.get(st).map(be=>tt+"="+this.encoder.encodeValue(be)).join("&")}).filter(st=>""!==st).join("&")}clone(st){const tt=new G({encoder:this.encoder});return tt.cloneFrom=this.cloneFrom||this,tt.updates=(this.updates||[]).concat(st),tt}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(st=>this.map.set(st,this.cloneFrom.map.get(st))),this.updates.forEach(st=>{switch(st.op){case"a":case"s":const tt=("a"===st.op?this.map.get(st.param):void 0)||[];tt.push(Z(st.value)),this.map.set(st.param,tt);break;case"d":if(void 0===st.value){this.map.delete(st.param);break}{let be=this.map.get(st.param)||[];const We=be.indexOf(Z(st.value));-1!==We&&be.splice(We,1),be.length>0?this.map.set(st.param,be):this.map.delete(st.param)}}}),this.cloneFrom=this.updates=null)}}class fe{map=new Map;set(st,tt){return this.map.set(st,tt),this}get(st){return this.map.has(st)||this.map.set(st,st.defaultValue()),this.map.get(st)}delete(st){return this.map.delete(st),this}has(st){return this.map.has(st)}keys(){return this.map.keys()}}function Re(ke){return typeof ArrayBuffer<"u"&&ke instanceof ArrayBuffer}function ve(ke){return typeof Blob<"u"&&ke instanceof Blob}function Ye(ke){return typeof FormData<"u"&&ke instanceof FormData}const nt="Content-Type",Fe="X-Request-URL",xe="text/plain",rt="application/json",Ve=`${rt}, ${xe}, */*`;class Ae{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(st,tt,be,We){let Se;if(this.url=tt,this.method=st.toUpperCase(),function _e(ke){switch(ke){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||We?(this.body=void 0!==be?be:null,Se=We):Se=be,Se){if(this.reportProgress=!!Se.reportProgress,this.withCredentials=!!Se.withCredentials,this.keepalive=!!Se.keepalive,Se.responseType&&(this.responseType=Se.responseType),Se.headers&&(this.headers=Se.headers),Se.context&&(this.context=Se.context),Se.params&&(this.params=Se.params),Se.priority&&(this.priority=Se.priority),Se.cache&&(this.cache=Se.cache),Se.credentials&&(this.credentials=Se.credentials),"number"==typeof Se.timeout){if(Se.timeout<1||!Number.isInteger(Se.timeout))throw new o.buA(2822,"");this.timeout=Se.timeout}Se.mode&&(this.mode=Se.mode),Se.redirect&&(this.redirect=Se.redirect),Se.integrity&&(this.integrity=Se.integrity),Se.referrer&&(this.referrer=Se.referrer),this.transferCache=Se.transferCache}if(this.headers??=new v,this.context??=new fe,this.params){const et=this.params.toString();if(0===et.length)this.urlWithParams=tt;else{const St=tt.indexOf("?");this.urlWithParams=tt+(-1===St?"?":St<tt.length-1?"&":"")+et}}else this.params=new G,this.urlWithParams=tt}serializeBody(){return null===this.body?null:"string"==typeof this.body||Re(this.body)||ve(this.body)||Ye(this.body)||function ge(ke){return typeof URLSearchParams<"u"&&ke instanceof URLSearchParams}(this.body)?this.body:this.body instanceof G?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ye(this.body)?null:ve(this.body)?this.body.type||null:Re(this.body)?null:"string"==typeof this.body?xe:this.body instanceof G?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?rt:null}clone(st={}){const tt=st.method||this.method,be=st.url||this.url,We=st.responseType||this.responseType,Se=st.keepalive??this.keepalive,et=st.priority||this.priority,St=st.cache||this.cache,Xt=st.mode||this.mode,vn=st.redirect||this.redirect,On=st.credentials||this.credentials,Rn=st.referrer||this.referrer,ir=st.integrity||this.integrity,Xr=st.transferCache??this.transferCache,Ur=st.timeout??this.timeout,Qn=void 0!==st.body?st.body:this.body,Ln=st.withCredentials??this.withCredentials,Gn=st.reportProgress??this.reportProgress;let yr=st.headers||this.headers,ar=st.params||this.params;const nr=st.context??this.context;return void 0!==st.setHeaders&&(yr=Object.keys(st.setHeaders).reduce((Er,br)=>Er.set(br,st.setHeaders[br]),yr)),st.setParams&&(ar=Object.keys(st.setParams).reduce((Er,br)=>Er.set(br,st.setParams[br]),ar)),new Ae(tt,be,Qn,{params:ar,headers:yr,context:nr,reportProgress:Gn,responseType:We,withCredentials:Ln,transferCache:Xr,keepalive:Se,cache:St,priority:et,timeout:Ur,mode:Xt,redirect:vn,credentials:On,referrer:Rn,integrity:ir})}}var H=function(ke){return ke[ke.Sent=0]="Sent",ke[ke.UploadProgress=1]="UploadProgress",ke[ke.ResponseHeader=2]="ResponseHeader",ke[ke.DownloadProgress=3]="DownloadProgress",ke[ke.Response=4]="Response",ke[ke.User=5]="User",ke}(H||{});class ye{headers;status;statusText;url;ok;type;redirected;constructor(st,tt=200,be="OK"){this.headers=st.headers||new v,this.status=void 0!==st.status?st.status:tt,this.statusText=st.statusText||be,this.url=st.url||null,this.redirected=st.redirected,this.ok=this.status>=200&&this.status<300}}class Me extends ye{constructor(st={}){super(st)}type=H.ResponseHeader;clone(st={}){return new Me({headers:st.headers||this.headers,status:void 0!==st.status?st.status:this.status,statusText:st.statusText||this.statusText,url:st.url||this.url||void 0})}}class He extends ye{body;constructor(st={}){super(st),this.body=void 0!==st.body?st.body:null}type=H.Response;clone(st={}){return new He({body:void 0!==st.body?st.body:this.body,headers:st.headers||this.headers,status:void 0!==st.status?st.status:this.status,statusText:st.statusText||this.statusText,url:st.url||this.url||void 0,redirected:st.redirected??this.redirected})}}class ot extends ye{name="HttpErrorResponse";message;error;ok=!1;constructor(st){super(st,0,"Unknown Error"),this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${st.url||"(unknown url)"}`:`Http failure response for ${st.url||"(unknown url)"}: ${st.status} ${st.statusText}`,this.error=st.error||null}}function Ut(ke,st){return{body:st,headers:ke.headers,context:ke.context,observe:ke.observe,params:ke.params,reportProgress:ke.reportProgress,responseType:ke.responseType,withCredentials:ke.withCredentials,credentials:ke.credentials,transferCache:ke.transferCache,timeout:ke.timeout,keepalive:ke.keepalive,priority:ke.priority,cache:ke.cache,mode:ke.mode,redirect:ke.redirect,integrity:ke.integrity,referrer:ke.referrer}}let dt=(()=>{class ke{handler;constructor(tt){this.handler=tt}request(tt,be,We={}){let Se;if(tt instanceof Ae)Se=tt;else{let Xt,vn;Xt=We.headers instanceof v?We.headers:new v(We.headers),We.params&&(vn=We.params instanceof G?We.params:new G({fromObject:We.params})),Se=new Ae(tt,be,void 0!==We.body?We.body:null,{headers:Xt,context:We.context,params:vn,reportProgress:We.reportProgress,responseType:We.responseType||"json",withCredentials:We.withCredentials,transferCache:We.transferCache,keepalive:We.keepalive,priority:We.priority,cache:We.cache,mode:We.mode,redirect:We.redirect,credentials:We.credentials,referrer:We.referrer,integrity:We.integrity,timeout:We.timeout})}const et=(0,we.of)(Se).pipe((0,Pe.H)(Xt=>this.handler.handle(Xt)));if(tt instanceof Ae||"events"===We.observe)return et;const St=et.pipe((0,Ce.p)(Xt=>Xt instanceof He));switch(We.observe||"body"){case"body":switch(Se.responseType){case"arraybuffer":return St.pipe((0,Le.T)(Xt=>{if(null!==Xt.body&&!(Xt.body instanceof ArrayBuffer))throw new o.buA(2806,!1);return Xt.body}));case"blob":return St.pipe((0,Le.T)(Xt=>{if(null!==Xt.body&&!(Xt.body instanceof Blob))throw new o.buA(2807,!1);return Xt.body}));case"text":return St.pipe((0,Le.T)(Xt=>{if(null!==Xt.body&&"string"!=typeof Xt.body)throw new o.buA(2808,!1);return Xt.body}));default:return St.pipe((0,Le.T)(Xt=>Xt.body))}case"response":return St;default:throw new o.buA(2809,!1)}}delete(tt,be={}){return this.request("DELETE",tt,be)}get(tt,be={}){return this.request("GET",tt,be)}head(tt,be={}){return this.request("HEAD",tt,be)}jsonp(tt,be){return this.request("JSONP",tt,{params:(new G).append(be,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(tt,be={}){return this.request("OPTIONS",tt,be)}patch(tt,be,We={}){return this.request("PATCH",tt,Ut(We,be))}post(tt,be,We={}){return this.request("POST",tt,Ut(We,be))}put(tt,be,We={}){return this.request("PUT",tt,Ut(We,be))}static \u0275fac=function(be){return new(be||ke)(o.KVO(p))};static \u0275prov=o.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const Nt=new o.nKC("");function en(ke,st){return st(ke)}function Cn(ke,st){return(tt,be)=>st.intercept(tt,{handle:We=>ke(We,be)})}const wn=new o.nKC(""),hn=new o.nKC(""),Pt=new o.nKC(""),_n=new o.nKC("",{providedIn:"root",factory:()=>!0});function Tt(){let ke=null;return(st,tt)=>{null===ke&&(ke=((0,o.WQX)(wn,{optional:!0})??[]).reduceRight(Cn,en));const be=(0,o.WQX)(o.u5s);if((0,o.WQX)(_n)){const Se=be.add();return ke(st,tt).pipe((0,k.j)(Se))}return ke(st,tt)}}let an=(()=>{class ke extends p{backend;injector;chain=null;pendingTasks=(0,o.WQX)(o.u5s);contributeToStability=(0,o.WQX)(_n);constructor(tt,be){super(),this.backend=tt,this.injector=be}handle(tt){if(null===this.chain){const be=Array.from(new Set([...this.injector.get(hn),...this.injector.get(Pt,[])]));this.chain=be.reduceRight((We,Se)=>function Vn(ke,st,tt){return(be,We)=>(0,o.N4e)(tt,()=>st(be,Se=>ke(Se,We)))}(We,Se,this.injector),en)}if(this.contributeToStability){const be=this.pendingTasks.add();return this.chain(tt,We=>this.backend.handle(We)).pipe((0,k.j)(be))}return this.chain(tt,be=>this.backend.handle(be))}static \u0275fac=function(be){return new(be||ke)(o.KVO(m),o.KVO(o.uvJ))};static \u0275prov=o.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const vr=/^\)\]\}',?\n/,Cr=RegExp(`^${Fe}:`,"m");let Sn=(()=>{class ke{xhrFactory;constructor(tt){this.xhrFactory=tt}handle(tt){if("JSONP"===tt.method)throw new o.buA(-2800,!1);const be=this.xhrFactory;return(0,we.of)(null).pipe((0,Je.n)(()=>new me.c(Se=>{const et=be.build();if(et.open(tt.method,tt.urlWithParams),tt.withCredentials&&(et.withCredentials=!0),tt.headers.forEach((Ln,Gn)=>et.setRequestHeader(Ln,Gn.join(","))),tt.headers.has("Accept")||et.setRequestHeader("Accept",Ve),!tt.headers.has(nt)){const Ln=tt.detectContentTypeHeader();null!==Ln&&et.setRequestHeader(nt,Ln)}if(tt.timeout&&(et.timeout=tt.timeout),tt.responseType){const Ln=tt.responseType.toLowerCase();et.responseType="json"!==Ln?Ln:"text"}const St=tt.serializeBody();let Xt=null;const vn=()=>{if(null!==Xt)return Xt;const Ln=et.statusText||"OK",Gn=new v(et.getAllResponseHeaders()),yr=function $r(ke){return"responseURL"in ke&&ke.responseURL?ke.responseURL:Cr.test(ke.getAllResponseHeaders())?ke.getResponseHeader(Fe):null}(et)||tt.url;return Xt=new Me({headers:Gn,status:et.status,statusText:Ln,url:yr}),Xt},On=()=>{let{headers:Ln,status:Gn,statusText:yr,url:ar}=vn(),nr=null;204!==Gn&&(nr=typeof et.response>"u"?et.responseText:et.response),0===Gn&&(Gn=nr?200:0);let Er=Gn>=200&&Gn<300;if("json"===tt.responseType&&"string"==typeof nr){const br=nr;nr=nr.replace(vr,"");try{nr=""!==nr?JSON.parse(nr):null}catch(xr){nr=br,Er&&(Er=!1,nr={error:xr,text:nr})}}Er?(Se.next(new He({body:nr,headers:Ln,status:Gn,statusText:yr,url:ar||void 0})),Se.complete()):Se.error(new ot({error:nr,headers:Ln,status:Gn,statusText:yr,url:ar||void 0}))},Rn=Ln=>{const{url:Gn}=vn(),yr=new ot({error:Ln,status:et.status||0,statusText:et.statusText||"Unknown Error",url:Gn||void 0});Se.error(yr)};let ir=Rn;tt.timeout&&(ir=Ln=>{const{url:Gn}=vn(),yr=new ot({error:new DOMException("Request timed out","TimeoutError"),status:et.status||0,statusText:et.statusText||"Request timeout",url:Gn||void 0});Se.error(yr)});let Xr=!1;const Ur=Ln=>{Xr||(Se.next(vn()),Xr=!0);let Gn={type:H.DownloadProgress,loaded:Ln.loaded};Ln.lengthComputable&&(Gn.total=Ln.total),"text"===tt.responseType&&et.responseText&&(Gn.partialText=et.responseText),Se.next(Gn)},Qn=Ln=>{let Gn={type:H.UploadProgress,loaded:Ln.loaded};Ln.lengthComputable&&(Gn.total=Ln.total),Se.next(Gn)};return et.addEventListener("load",On),et.addEventListener("error",Rn),et.addEventListener("timeout",ir),et.addEventListener("abort",Rn),tt.reportProgress&&(et.addEventListener("progress",Ur),null!==St&&et.upload&&et.upload.addEventListener("progress",Qn)),et.send(St),Se.next({type:H.Sent}),()=>{et.removeEventListener("error",Rn),et.removeEventListener("abort",Rn),et.removeEventListener("load",On),et.removeEventListener("timeout",ir),tt.reportProgress&&(et.removeEventListener("progress",Ur),null!==St&&et.upload&&et.upload.removeEventListener("progress",Qn)),et.readyState!==et.DONE&&et.abort()}})))}static \u0275fac=function(be){return new(be||ke)(o.KVO(l.N))};static \u0275prov=o.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const wr=new o.nKC(""),tr=new o.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Xe=new o.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Ze{}let It=(()=>{class ke{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(tt,be){this.doc=tt,this.cookieName=be}getToken(){const tt=this.doc.cookie||"";return tt!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,l.b)(tt,this.cookieName),this.lastCookieString=tt),this.lastToken}static \u0275fac=function(be){return new(be||ke)(o.KVO(o.qQL),o.KVO(tr))};static \u0275prov=o.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const _t=/^(?:https?:)?\/\//i;function Ft(ke,st){if(!(0,o.WQX)(wr)||"GET"===ke.method||"HEAD"===ke.method||_t.test(ke.url))return st(ke);const tt=(0,o.WQX)(Ze).getToken(),be=(0,o.WQX)(Xe);return null!=tt&&!ke.headers.has(be)&&(ke=ke.clone({headers:ke.headers.set(be,tt)})),st(ke)}var Gt=function(ke){return ke[ke.Interceptors=0]="Interceptors",ke[ke.LegacyInterceptors=1]="LegacyInterceptors",ke[ke.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ke[ke.NoXsrfProtection=3]="NoXsrfProtection",ke[ke.JsonpSupport=4]="JsonpSupport",ke[ke.RequestsMadeViaParent=5]="RequestsMadeViaParent",ke[ke.Fetch=6]="Fetch",ke}(Gt||{});function ln(...ke){const st=[dt,Sn,an,{provide:p,useExisting:an},{provide:m,useFactory:()=>(0,o.WQX)(Nt,{optional:!0})??(0,o.WQX)(Sn)},{provide:hn,useValue:Ft,multi:!0},{provide:wr,useValue:!0},{provide:Ze,useClass:It}];for(const tt of ke)st.push(...tt.\u0275providers);return(0,o.EmA)(st)}const zn=new o.nKC("");function Tn(){return function cn(ke,st){return{\u0275kind:ke,\u0275providers:st}}(Gt.LegacyInterceptors,[{provide:zn,useFactory:Tt},{provide:hn,useExisting:zn,multi:!0}])}let Br=(()=>{class ke{static \u0275fac=function(be){return new(be||ke)};static \u0275mod=S.$C({type:ke});static \u0275inj=o.G2t({providers:[ln(Tn())]})}return ke})()},9431(Wt,ut,b){"use strict";b.r(ut),b.d(ut,{MENU_BACK_BUTTON_PRIORITY:()=>Je,OVERLAY_BACK_BUTTON_PRIORITY:()=>Le,blockHardwareBackButton:()=>Ce,shouldUseCloseWatcher:()=>Pe,startHardwareBackButton:()=>k});var s=b(467),o=b(9596),S=b(5705);const Pe=()=>S.e.get("experimentalCloseWatcher",!1)&&void 0!==o.w&&"CloseWatcher"in o.w,Ce=()=>{document.addEventListener("backbutton",()=>{})},k=()=>{const me=document;let ie=!1;const we=()=>{if(ie)return;let l=0,p=[];const m=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(D,L){p.push({priority:D,handler:L,id:l++})}}});me.dispatchEvent(m);const v=function(){var D=(0,s.A)(function*(L){try{if(L?.handler){const K=L.handler(_);null!=K&&(yield K)}}catch(K){(0,S.j)("[ion-app] - Exception in startHardwareBackButton:",K)}});return function(K){return D.apply(this,arguments)}}(),_=()=>{if(p.length>0){let D={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};p.forEach(L=>{L.priority>=D.priority&&(D=L)}),ie=!0,p=p.filter(L=>L.id!==D.id),v(D).then(()=>ie=!1)}};_()};if(Pe()){let l;const p=()=>{l?.destroy(),l=new o.w.CloseWatcher,l.onclose=()=>{we(),p()}};p()}else me.addEventListener("backbutton",we)},Le=100,Je=99},9437(Wt,ut,b){"use strict";b.d(ut,{W:()=>Pe});var s=b(8750),o=b(4360),S=b(9974);function Pe(Ce){return(0,S.N)((k,Le)=>{let ie,Je=null,me=!1;Je=k.subscribe((0,o._)(Le,void 0,void 0,we=>{ie=(0,s.Tg)(Ce(we,Pe(Ce)(k))),Je?(Je.unsubscribe(),Je=null,ie.subscribe(Le)):me=!0})),me&&(Je.unsubscribe(),Je=null,ie.subscribe(Le))})}},9470(Wt,ut,b){"use strict";b.d(ut,{m:()=>o});var s=b(8071);function o(S){return S&&(0,s.T)(S.schedule)}},9564(Wt,ut,b){"use strict";b.d(ut,{I8:()=>s});var s=function(Pe){return Pe[Pe.UNKNOWN=0]="UNKNOWN",Pe[Pe.UPDATE_NOT_AVAILABLE=1]="UPDATE_NOT_AVAILABLE",Pe[Pe.UPDATE_AVAILABLE=2]="UPDATE_AVAILABLE",Pe[Pe.UPDATE_IN_PROGRESS=3]="UPDATE_IN_PROGRESS",Pe}(s||{})},9596(Wt,ut,b){"use strict";b.d(ut,{d:()=>o,w:()=>s});const s=typeof window<"u"?window:void 0,o=typeof document<"u"?document:void 0},9786(Wt,ut,b){"use strict";b.d(ut,{Y:()=>S,l:()=>Pe});var s=b(1026);let o=null;function S(Ce){if(s.$.useDeprecatedSynchronousErrorHandling){const k=!o;if(k&&(o={errorThrown:!1,error:null}),Ce(),k){const{errorThrown:Le,error:Je}=o;if(o=null,Le)throw Je}}else Ce()}function Pe(Ce){s.$.useDeprecatedSynchronousErrorHandling&&o&&(o.errorThrown=!0,o.error=Ce)}},9858(Wt,ut,b){"use strict";b.d(ut,{y:()=>o});var s=b(8071);function o(S){return(0,s.T)(S?.then)}},9974(Wt,ut,b){"use strict";b.d(ut,{N:()=>S,S:()=>o});var s=b(8071);function o(Pe){return(0,s.T)(Pe?.lift)}function S(Pe){return Ce=>{if(o(Ce))return Ce.lift(function(k){try{return Pe(k,this)}catch(Le){this.error(Le)}});throw new TypeError("Unable to lift unknown Observable type")}}}},Wt=>{Wt(Wt.s=8178)}]);