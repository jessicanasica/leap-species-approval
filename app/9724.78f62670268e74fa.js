"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9724],{152(Q,N,h){h.d(N,{B:()=>I});var k=h(8839),F=h(9974),g=h(4360);function I(v,w=k.E){return(0,F.N)((e,p)=>{let E=null,j=null,s=null;const m=()=>{if(E){E.unsubscribe(),E=null;const u=j;j=null,p.next(u)}};function c(){const u=s+v,b=w.now();if(b<u)return E=this.schedule(void 0,u-b),void p.add(E);m()}e.subscribe((0,g._)(p,u=>{j=u,s=w.now(),E||(E=w.schedule(c,v),p.add(E))},()=>{m(),p.complete()},void 0,()=>{j=E=null}))})}},9187(Q,N,h){h.d(N,{C:()=>e});var k=h(467),F=h(2084),g=h(2615),I=h(5029),v=h(918),w=h(8863);let e=(()=>{var p;class E{constructor(s,m,c){this.supabase=s,this.sharedDataService=m,this.monitoringLog=c}deleteEntry(s){var m=this;return(0,k.A)(function*(){console.log("[EntryDeletionService] Starting deletion process for:",s);try{const c=yield m.fetchOriginalEntry(s.tableName,s.reportId);if(!c)throw new Error(`Entry not found in table ${s.tableName} with reportId ${s.reportId}`);console.log("[EntryDeletionService] Original entry fetched:",c);const u=yield m.backupToDeletedFiles(s,c);console.log("[EntryDeletionService] Backup completed:",u),yield m.recordDeletionMetadata(s,u,c),console.log("[EntryDeletionService] Deletion metadata recorded"),yield m.deleteImagesFromBucket(c,s.formType,s.reportId),console.log("[EntryDeletionService] Images deleted from bucket"),yield m.deleteJsonFromStorage(s.formType,s.reportId),console.log("[EntryDeletionService] JSON file deleted from storage"),yield m.deleteFromTable(s.tableName,s.reportId),console.log("[EntryDeletionService] Entry deleted from table"),yield m.deleteLocalFile(s.formType,s.reportId),console.log("[EntryDeletionService] Local file deleted");const b=m.getEntrySummary(c,s.formType);m.monitoringLog.recordFormDeleted(s.deletedBy,s.formType,s.reportId,b),console.log("[EntryDeletionService] \u2705 Deletion process completed successfully")}catch(c){throw console.error("[EntryDeletionService] \u274c Deletion process failed:",c),c}})()}getEntrySummary(s,m){const c=[];return s?.location&&c.push(s.location),s?.zone_number&&c.push(`Z${s.zone_number}`),s?.quad_number&&c.push(`Q${s.quad_number}`),s?.observation_date&&c.push(s.observation_date),c.join(", ")||m}fetchOriginalEntry(s,m){var c=this;return(0,k.A)(function*(){const{data:u,error:b}=yield c.supabase.getClient().from(s).select("*").eq("report_id",m).single();if(b)throw console.error("[EntryDeletionService] Error fetching original entry:",b),b;return u})()}backupToDeletedFiles(s,m){var c=this;return(0,k.A)(function*(){const u=`${s.formType}/${s.reportId}`,b=`${u}/${s.reportId}.json`,S=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),{error:T}=yield c.supabase.getClient().storage.from("deleted_files").upload(b,S);if(T)throw console.error("[EntryDeletionService] Error backing up JSON:",T),T;const D=[],V=c.getImageBucketName(s.formType),X=c.extractImagePathsFromEntry(m,s.formType,s.reportId);for(const $ of X)if($)try{const{data:z,error:G}=yield c.supabase.getClient().storage.from(V).download($);if(G){console.warn("[EntryDeletionService] Could not download image:",$,G);continue}const A=`${u}/${$.split("/").pop()}`,{error:Y}=yield c.supabase.getClient().storage.from("deleted_files").upload(A,z);Y?console.warn("[EntryDeletionService] Could not backup image:",A,Y):D.push(A)}catch(z){console.warn("[EntryDeletionService] Error processing image:",z)}return{backupFolderPath:u,jsonBackupPath:b,imageBackupPaths:D}})()}recordDeletionMetadata(s,m,c){var u=this;return(0,k.A)(function*(){const b={original_entry:c,backup_paths:{json:m.jsonBackupPath,images:m.imageBackupPaths},deletion_timestamp:(0,F.E)()},{error:S}=yield u.supabase.getClient().from("deleted_metadata_files").insert({original_report_id:s.reportId,form_type:s.formType,deleted_by:s.deletedBy,deleted_by_email:s.deletedByEmail,original_submitted_by:s.originalSubmittedBy||c.submittedBy,original_submitted_at:s.originalSubmittedAt||c.createdAt,backup_folder_path:m.backupFolderPath,original_table_name:s.tableName,original_storage_path:u.getStoragePath(s.tableName,s.reportId),metadata:b});if(S)throw console.error("[EntryDeletionService] Error recording deletion metadata:",S),S})()}deleteImagesFromBucket(s,m,c){var u=this;return(0,k.A)(function*(){const b=u.getImageBucketName(m),S=u.extractImagePathsFromEntry(s,m,c);for(const T of S)if(T)try{const{error:D}=yield u.supabase.getClient().storage.from(b).remove([T]);D&&console.warn("[EntryDeletionService] Could not delete image:",T,D)}catch(D){console.warn("[EntryDeletionService] Error deleting image:",D)}})()}deleteJsonFromStorage(s,m){var c=this;return(0,k.A)(function*(){const u=c.getReportsBucketName(s),b=`${m}.json`,{error:S}=yield c.supabase.getClient().storage.from(u).remove([b]);S&&console.warn("[EntryDeletionService] Could not delete JSON from storage:",b,S)})()}deleteFromTable(s,m){var c=this;return(0,k.A)(function*(){const{error:u}=yield c.supabase.getClient().from(s).delete().eq("report_id",m);if(u)throw console.error("[EntryDeletionService] Error deleting from table:",u),u})()}deleteLocalFile(s,m){var c=this;return(0,k.A)(function*(){try{const u=c.getLocalFileName(s,m);yield c.sharedDataService.deleteJsonFile(u)}catch(u){console.warn("[EntryDeletionService] Could not delete local file:",u)}})()}getReportsBucketName(s){return s}getImageBucketName(s){return{"flora-fauna":"flora-fauna-images",biomass:"biomass-images",health:"health-images",outplanting:"outplanting-images",restoration:"restoration-images",cleanup:"cleanup-images",pollution:"pollution-images",disturbances:"disturbances-images"}[s]||`${s}-images`}extractImagePathsFromEntry(s,m,c){const u=[];if("health"===m)return u.push(`${c}/soil.jpg`),u.push(`${c}/predation.jpg`),u.push(`${c}/pollution.jpg`),u;if("pollution"===m){u.push(`${c}/greyWater.jpg`),u.push(`${c}/trash.jpg`),u.push(`${c}/sewage.jpg`);for(let b=1;b<=10;b++)u.push(`${c}/photo_${b}.jpg`);return u}if("disturbances"===m)return u.push(`${c}/harvest.jpg`),u.push(`${c}/clearing.jpg`),u.push(`${c}/construction.jpg`),u.push(`${c}/fallenTree.jpg`),u.push(`${c}/erosion.jpg`),u.push(`${c}/accretion.jpg`),u.push(`${c}/diseases.jpg`),u;for(let b=1;b<=20;b++)u.push(`${c}/photo_${b}.jpg`);return u}getStoragePath(s,m){return`${s}/${m}.json`}getLocalFileName(s,m){return`${m}.json`}static#e=p=()=>(this.\u0275fac=function(m){return new(m||E)(g.KVO(I.L),g.KVO(v.H),g.KVO(w.u))},this.\u0275prov=g.jDH({token:E,factory:E.\u0275fac,providedIn:"root"}))}return p(),E})()},9724(Q,N,h){h.d(N,{BiomassPageModule:()=>qe});var k=h(2200),F=h(4341),g=h(7343),I=h(8132),v=h(467),w=h(152),e=h(3664),p=h(2615),E=h(5921),j=h(752),s=h(5858),m=h(5342),c=h(3205),u=h(918),b=h(9187),S=h(7643);function T(i,l){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const a=e.XpG();e.R7$(),e.SpI(" (edited: ",a.getEditedDateTime(),")")}}function D(i,l){1&i&&e.nrm(0,"ion-icon",46)}function V(i,l){if(1&i){const a=e.RV6();e.j41(0,"span",47),e.bIt("click",function(){p.eBV(a);const o=e.XpG();return p.Njj(o.editLocationAdmin())}),e.EFF(1," Edit location "),e.k0s()}}function X(i,l){if(1&i){const a=e.RV6();e.j41(0,"div",8),e.bIt("click",function(){p.eBV(a);const o=e.XpG();return p.Njj(!o.viewMode&&o.editZone())}),e.nrm(1,"ion-icon",48),e.j41(2,"span",10),e.EFF(3),e.k0s()()}if(2&i){let a;const t=e.XpG();e.R7$(3),e.JRh(t.getZoneName(null==(a=t.biomassForm.get("zoneNumber"))?null:a.value))}}function $(i,l){if(1&i){const a=e.RV6();e.j41(0,"div",8),e.bIt("click",function(){p.eBV(a);const o=e.XpG();return p.Njj(!o.viewMode&&o.editQuad())}),e.nrm(1,"ion-icon",49),e.j41(2,"span",10),e.EFF(3),e.k0s()()}if(2&i){let a;const t=e.XpG();e.R7$(3),e.SpI("Quad ",t.getQuadDisplay(null==(a=t.biomassForm.get("quadNumber"))?null:a.value))}}function z(i,l){1&i&&(e.j41(0,"ion-error",50),e.EFF(1," Location is required "),e.k0s())}function G(i,l){if(1&i){const a=e.RV6();e.j41(0,"div",51)(1,"ion-button",52),e.bIt("click",function(){p.eBV(a);const o=e.XpG();return p.Njj(o.enableEditMode())}),e.nrm(2,"ion-icon",53),e.EFF(3," Edit This Entry "),e.k0s()()}}function A(i,l){1&i&&(e.j41(0,"div",54),e.nrm(1,"ion-icon",55),e.j41(2,"span"),e.EFF(3,"Editing Entry - Changes will replace the original submission"),e.k0s()())}function Y(i,l){1&i&&e.nrm(0,"ion-icon",56)}function ie(i,l){1&i&&e.nrm(0,"ion-icon",57)}function re(i,l){1&i&&(e.j41(0,"ion-error"),e.EFF(1," Observer name is required "),e.k0s())}function ae(i,l){1&i&&e.nrm(0,"ion-icon",56)}function se(i,l){1&i&&e.nrm(0,"ion-icon",57)}function le(i,l){1&i&&(e.j41(0,"ion-error"),e.EFF(1," Weather selection is required "),e.k0s())}function ce(i,l){1&i&&e.nrm(0,"ion-icon",56)}function de(i,l){1&i&&e.nrm(0,"ion-icon",57)}function ue(i,l){1&i&&(e.j41(0,"ion-error"),e.EFF(1," Tide selection is required "),e.k0s())}function me(i,l){1&i&&e.nrm(0,"ion-icon",56)}function ge(i,l){1&i&&e.nrm(0,"ion-icon",57)}function pe(i,l){1&i&&(e.j41(0,"ion-error"),e.EFF(1," Plot size is required "),e.k0s())}function fe(i,l){1&i&&e.nrm(0,"ion-icon",56)}function _e(i,l){1&i&&e.nrm(0,"ion-icon",57)}function he(i,l){1&i&&(e.j41(0,"ion-error"),e.EFF(1," Vegetation type is required "),e.k0s())}function be(i,l){1&i&&(e.j41(0,"span"),e.EFF(1," and tree height in meters"),e.k0s())}function ve(i,l){1&i&&e.nrm(0,"ion-icon",56)}function ye(i,l){1&i&&e.nrm(0,"ion-icon",57)}function Fe(i,l){1&i&&e.nrm(0,"ion-icon",56)}function xe(i,l){1&i&&e.nrm(0,"ion-icon",57)}function Ee(i,l){1&i&&e.nrm(0,"ion-icon",56)}function Pe(i,l){1&i&&e.nrm(0,"ion-icon",57)}function ke(i,l){if(1&i){const a=e.RV6();e.j41(0,"ion-col",70)(1,"ion-item",20)(2,"ion-label",21),e.EFF(3,"Height (m)"),e.k0s(),e.j41(4,"ion-input",78),e.bIt("ionInput",function(o){p.eBV(a);const n=e.XpG(2);return p.Njj(n.newTree.height=+o.detail.value)}),e.k0s(),e.DNE(5,Ee,1,0,"ion-icon",23)(6,Pe,1,0,"ion-icon",24),e.k0s()()}if(2&i){const a=e.XpG(2);e.R7$(4),e.Y8G("value",a.newTree.height),e.R7$(),e.Y8G("ngIf",!a.newTree.height||a.newTree.height<=0),e.R7$(),e.Y8G("ngIf",a.newTree.height>0)}}function Me(i,l){if(1&i&&(e.j41(0,"div",79)(1,"strong",80),e.EFF(2,"Estimated Biomass Preview:"),e.k0s(),e.nrm(3,"br"),e.j41(4,"span",81),e.EFF(5),e.j41(6,"strong"),e.EFF(7),e.k0s()()()),2&i){const a=e.XpG(2);e.R7$(5),e.Lme(" AGB: ",a.calculateTreeBiomass(a.newTree).agb.toFixed(2)," kg | BGB: ",a.calculateTreeBiomass(a.newTree).bgb.toFixed(2)," kg | "),e.R7$(2),e.SpI("Total: ",a.calculateTreeBiomass(a.newTree).total.toFixed(2)," kg")}}function Se(i,l){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const a=e.XpG().$implicit;e.R7$(),e.SpI(" , H: ",a.height," m ")}}function Ce(i,l){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const a=e.XpG().$implicit,t=e.XpG(3);e.R7$(),e.SpI(" / BGB: ",t.calculateTreeBiomass(a).bgb.toFixed(1)," kg ")}}function Te(i,l){if(1&i){const a=e.RV6();e.j41(0,"ion-item")(1,"div",1)(2,"div",91)(3,"strong"),e.EFF(4),e.k0s(),e.nrm(5,"br"),e.j41(6,"span",92),e.EFF(7),e.DNE(8,Se,2,1,"span",5),e.k0s()()(),e.j41(9,"div",93)(10,"div",94)(11,"strong"),e.EFF(12),e.k0s(),e.nrm(13,"br"),e.j41(14,"span",95),e.EFF(15," AGB "),e.DNE(16,Ce,2,1,"span",5),e.k0s()(),e.j41(17,"ion-button",96),e.bIt("click",function(){const o=p.eBV(a).index,n=e.XpG(3);return p.Njj(n.removeTree(o))}),e.nrm(18,"ion-icon",97),e.k0s()()()}if(2&i){const a=l.$implicit,t=e.XpG(3);e.R7$(4),e.JRh(t.getSpeciesDisplayName(a.species)),e.R7$(3),e.SpI(" DBH: ",a.dbh," cm "),e.R7$(),e.Y8G("ngIf",t.currentUser&&t.currentUser.level>=3&&a.height),e.R7$(4),e.SpI("",t.calculateTreeBiomass(a).agb.toFixed(1)," kg"),e.R7$(4),e.Y8G("ngIf",t.calculateTreeBiomass(a).bgb>0)}}function De(i,l){if(1&i&&(e.j41(0,"div",82)(1,"ion-label")(2,"strong"),e.EFF(3),e.k0s()(),e.j41(4,"ion-list"),e.DNE(5,Te,19,5,"ion-item",83),e.k0s(),e.j41(6,"div",84)(7,"ion-grid")(8,"ion-row")(9,"ion-col",85)(10,"div",86)(11,"div",87),e.EFF(12,"Total Aboveground"),e.k0s(),e.j41(13,"div",88),e.EFF(14),e.k0s()()(),e.j41(15,"ion-col",85)(16,"div",86)(17,"div",87),e.EFF(18,"Total Belowground"),e.k0s(),e.j41(19,"div",88),e.EFF(20),e.k0s()()()(),e.j41(21,"ion-row")(22,"ion-col",60)(23,"div",89)(24,"div",87),e.EFF(25,"Total Biomass"),e.k0s(),e.j41(26,"div",90),e.EFF(27),e.k0s(),e.j41(28,"div",87),e.EFF(29),e.k0s()()()()()()()),2&i){let a;const t=e.XpG(2);e.R7$(3),e.SpI("Measured Trees (",t.treeMeasurements.length,")"),e.R7$(2),e.Y8G("ngForOf",t.treeMeasurements),e.R7$(9),e.SpI("",t.getTotalBiomass().agb.toFixed(1)," kg "),e.R7$(6),e.SpI("",t.getTotalBiomass().bgb.toFixed(1)," kg "),e.R7$(7),e.SpI(" ",t.getTotalBiomass().total.toFixed(1)," kg "),e.R7$(2),e.Lme(" ",t.getBiomassPerArea().toFixed(1)," kg/m\xb2 (",(null==(a=t.biomassForm.get("plotSize"))?null:a.value)||0," m\xb2 plot) ")}}function Be(i,l){1&i&&(e.j41(0,"div",98),e.nrm(1,"ion-icon",99),e.j41(2,"p"),e.EFF(3,"No trees measured yet. Add tree measurements above to calculate biomass."),e.k0s()())}function Oe(i,l){if(1&i){const a=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header",0)(2,"ion-card-title"),e.EFF(3,"Mangrove Tree Measurements"),e.k0s(),e.j41(4,"ion-card-subtitle"),e.EFF(5," Measure trees for biomass calculations "),e.j41(6,"ion-icon",58),e.bIt("click",function(){p.eBV(a);const o=e.XpG();return p.Njj(o.showEquationInfo())}),e.k0s()()(),e.j41(7,"ion-card-content")(8,"div",59)(9,"ion-grid")(10,"ion-row")(11,"ion-col",60)(12,"ion-label",21)(13,"strong"),e.EFF(14,"Add Tree Measurement"),e.k0s(),e.j41(15,"p",61),e.EFF(16," Measure diameter at breast height (1.3m above ground) in centimeters "),e.DNE(17,be,2,0,"span",5),e.k0s()()()(),e.j41(18,"ion-row")(19,"ion-col",62)(20,"ion-item",20)(21,"ion-label",21),e.EFF(22,"Species"),e.k0s(),e.j41(23,"ion-select",63),e.bIt("ionChange",function(o){p.eBV(a);const n=e.XpG();return p.Njj(n.newTree.species=o.detail.value)}),e.j41(24,"ion-select-option",64),e.EFF(25,"Rhizophora mucronata"),e.k0s(),e.j41(26,"ion-select-option",65),e.EFF(27,"Avicennia marina"),e.k0s(),e.j41(28,"ion-select-option",66),e.EFF(29,"Ceriops tagal"),e.k0s(),e.j41(30,"ion-select-option",67),e.EFF(31,"Bruguiera cylindrica"),e.k0s(),e.j41(32,"ion-select-option",68),e.EFF(33,"Sonneratia alba"),e.k0s(),e.j41(34,"ion-select-option",69),e.EFF(35,"Xylocarpus granatum"),e.k0s()(),e.DNE(36,ve,1,0,"ion-icon",23)(37,ye,1,0,"ion-icon",24),e.k0s()(),e.j41(38,"ion-col",70)(39,"ion-item",20)(40,"ion-label",21),e.EFF(41,"DBH (cm)"),e.k0s(),e.j41(42,"ion-input",71),e.bIt("ionInput",function(o){p.eBV(a);const n=e.XpG();return p.Njj(n.newTree.dbh=+o.detail.value)}),e.k0s(),e.DNE(43,Fe,1,0,"ion-icon",23)(44,xe,1,0,"ion-icon",24),e.k0s()(),e.DNE(45,ke,7,3,"ion-col",72),e.k0s(),e.j41(46,"ion-row")(47,"ion-col",60)(48,"ion-button",73),e.bIt("click",function(){p.eBV(a);const o=e.XpG();return p.Njj(o.addTree())}),e.nrm(49,"ion-icon",74),e.EFF(50," Add Tree "),e.k0s()()()()(),e.DNE(51,Me,8,3,"div",75)(52,De,30,7,"div",76)(53,Be,4,0,"div",77),e.k0s()()}if(2&i){const a=e.XpG();e.R7$(17),e.Y8G("ngIf",a.currentUser&&a.currentUser.level>=3),e.R7$(6),e.Y8G("value",a.newTree.species),e.R7$(13),e.Y8G("ngIf",!a.newTree.species),e.R7$(),e.Y8G("ngIf",a.newTree.species),e.R7$(5),e.Y8G("value",a.newTree.dbh),e.R7$(),e.Y8G("ngIf",!a.newTree.dbh||a.newTree.dbh<=0),e.R7$(),e.Y8G("ngIf",a.newTree.dbh>0),e.R7$(),e.Y8G("ngIf",a.currentUser&&a.currentUser.level>=3),e.R7$(3),e.Y8G("disabled",!a.newTree.species||!a.newTree.dbh||a.newTree.dbh<=0||a.currentUser&&a.currentUser.level>=3&&!a.newTree.height),e.R7$(3),e.Y8G("ngIf",a.newTree.species&&a.newTree.dbh>0),e.R7$(),e.Y8G("ngIf",a.treeMeasurements.length>0),e.R7$(),e.Y8G("ngIf",0===a.treeMeasurements.length)}}function we(i,l){1&i&&e.nrm(0,"ion-icon",56)}function Ie(i,l){1&i&&e.nrm(0,"ion-icon",57)}function je(i,l){1&i&&(e.j41(0,"ion-error"),e.EFF(1," Biomass estimate is required "),e.k0s())}function $e(i,l){if(1&i&&(e.j41(0,"ion-card")(1,"ion-card-header",0)(2,"ion-card-title"),e.EFF(3,"Biomass Estimate"),e.k0s()(),e.j41(4,"ion-card-content")(5,"ion-item",20)(6,"ion-label",21),e.EFF(7,"Biomass Estimate (kg/m\xb2)"),e.k0s(),e.nrm(8,"ion-input",100),e.DNE(9,we,1,0,"ion-icon",23)(10,Ie,1,0,"ion-icon",24)(11,je,2,0,"ion-error",5),e.k0s()()()),2&i){let a,t,o;const n=e.XpG();e.R7$(9),e.Y8G("ngIf",!(null!=(a=n.biomassForm.get("biomassEstimate"))&&a.value)),e.R7$(),e.Y8G("ngIf",null==(t=n.biomassForm.get("biomassEstimate"))?null:t.value),e.R7$(),e.Y8G("ngIf",(null==(o=n.biomassForm.get("biomassEstimate"))?null:o.hasError("required"))&&(null==(o=n.biomassForm.get("biomassEstimate"))?null:o.touched))}}function Re(i,l){if(1&i){const a=e.RV6();e.j41(0,"div",101)(1,"ion-button",102),e.nrm(2,"ion-icon",103),e.EFF(3," Submit Biomass Assessment "),e.k0s(),e.j41(4,"ion-button",104),e.bIt("click",function(){p.eBV(a);const o=e.XpG();return p.Njj(o.saveDraft())}),e.nrm(5,"ion-icon",105),e.EFF(6," Save Draft "),e.k0s(),e.j41(7,"ion-button",106),e.bIt("click",function(){p.eBV(a);const o=e.XpG();return p.Njj(o.discardForm())}),e.nrm(8,"ion-icon",107),e.EFF(9," Discard "),e.k0s()()}if(2&i){const a=e.XpG();e.R7$(),e.Y8G("disabled",!a.biomassForm.valid)}}function Ne(i,l){if(1&i){const a=e.RV6();e.j41(0,"div",108)(1,"ion-button",109),e.bIt("click",function(){p.eBV(a);const o=e.XpG();return p.Njj(o.deleteEntry())}),e.nrm(2,"ion-icon",107),e.EFF(3," Delete Entry "),e.k0s()()}}const ze={rhizophora_mucronata:.954,rhizophora_apiculata:.965,avicennia_marina:.843,sonneratia_alba:.683,bruguiera_cylindrica:.865,ceriops_tagal:.945,xylocarpus_granatum:.815},Ae={rhizophora_mucronata:"Rhizophora mucronata",rhizophora_apiculata:"Rhizophora apiculata",avicennia_marina:"Avicennia marina",sonneratia_alba:"Sonneratia alba",bruguiera_cylindrica:"Bruguiera cylindrica",ceriops_tagal:"Ceriops tagal",xylocarpus_granatum:"Xylocarpus granatum"},Ge=[{path:"",component:(()=>{var i;class l{forceDeleteDraftFile(t){var o=this;return(0,v.A)(function*(){for(let n=0;n<3;n++)try{yield o.sharedDataService.deleteJsonFile(t),console.log(`Draft file force deleted successfully (attempt ${n+1})`);break}catch(r){if(console.error(`Error force deleting draft file (attempt ${n+1}):`,r),2===n)try{yield o.sharedDataService.writeJsonFile(t,null),console.log("Draft file cleared with null write")}catch(d){console.error("Failed to clear draft file with null write:",d)}yield new Promise(d=>setTimeout(d,100))}})()}constructor(t,o,n,r,d,_,y,f,P,x,M,C,B){this.formBuilder=t,this.alertController=o,this.loadingController=n,this.modalController=r,this.router=d,this.route=_,this.biomassSyncService=y,this.weatherService=f,this.tideService=P,this.auth=x,this.sharedDataService=M,this.entryDeletionService=C,this.siteSyncService=B,this.viewMode=!1,this.currentUser=null,this.currentReportId="",this.loadedReport=null,this.locationData=null,this.draftId=null,this.progress=0,this.currentDateTime="",this.autosaveSub=null,this.isDiscarded=!1,this.isSubmitted=!1,this.isSubmitting=!1,this.isEditMode=!1,this.originalSubmittedBy="",this.treeMeasurements=[],this.newTree={species:"",dbh:0,height:null},this.maheLatitude=-4.6796,this.maheLongitude=55.492,this.availableLocations=[{name:"Ramsar",hasZones:!0,hasQuads:!0,zones:["1","2","3","4","5","6"],quads:Array.from({length:30},(O,R)=>`quad${R+1}`),zoneQuadMap:{1:[1,2,3],2:[13,14,15,16,17,18,20,21,22,23,25,27,28,29],3:[19,26],4:[4,5],5:[6,7,11,12,24,30],6:[8,9,10]}},{name:"Grand Anse",hasZones:!0,hasQuads:!0,zones:["1","2","3","4"],quads:Array.from({length:22},(O,R)=>`ga${R+1}`),zoneQuadMap:{1:[1,2,3,4],2:[5,6,7,8,9,10,21,22],3:[11,12,13,14,15,16,17,18],4:[19,20]}},{name:"Caiman",hasZones:!1,hasQuads:!0,zones:[],quads:["quad1","quad2","quad3","quad4","quad5"]},{name:"Canopy",hasZones:!1,hasQuads:!0,zones:[],quads:["quad1","quad2","quad3","quad4"]},{name:"Petit Barbarons",hasZones:!0,hasQuads:!1,zones:["1","2","3","4"],quads:[]},{name:"Kempinski",hasZones:!1,hasQuads:!1,zones:[],quads:[]},{name:"Roche Caiman",hasZones:!1,hasQuads:!1,zones:[],quads:[]}],this.initializeForm()}initializeForm(){const t=new Date,o=t.toISOString().split("T")[0],n=`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`;this.biomassForm=this.formBuilder.group({location:["",F.k0.required],zoneNumber:[""],quadNumber:[""],observer:["",F.k0.required],observationDate:[o],observationTime:[n],weather:["",F.k0.required],tide:["",F.k0.required],plotSize:["",F.k0.required],vegetationType:["mangrove",F.k0.required],biomassEstimate:["",F.k0.required],notes:[""]})}ngOnInit(){var t=this;return(0,v.A)(function*(){if(t.currentUser=t.auth.getCurrentUser(),t.setCurrentDateTime(),t.fetchWeatherAndTide(),yield t.loadDynamicSites(),t.currentUser&&t.currentUser.level<3)return void(yield(yield t.alertController.create({header:"Access Denied",message:"You require access level 3 to use the biomass assessment form.",buttons:[{text:"OK",handler:()=>{t.router.navigate(["/biodiversity"])}}]})).present());const o=t.route.snapshot.queryParams;if("true"===o.viewMode&&o.reportId)return void(yield t.loadReportForViewing(o.reportId));const n=t.router.getCurrentNavigation();n?.extras?.state&&(t.locationData=n.extras.state,t.biomassForm.patchValue({location:t.locationData.location,zoneNumber:t.locationData.zoneNumber||"",quadNumber:t.locationData.quadNumber||""})),yield t.loadDraft(),t.setCurrentDateTime(),t.currentReportId||(t.currentReportId=t.biomassSyncService.generateReportId()),t.route.queryParams.subscribe(r=>{r.location&&t.biomassForm.patchValue({location:r.location}),r.zone&&t.biomassForm.patchValue({zoneNumber:r.zone}),r.quad&&t.biomassForm.patchValue({quadNumber:r.quad})}),t.biomassForm.valueChanges.subscribe(()=>{t.updateProgress()}),t.setupAutoSave()})()}ngOnDestroy(){this.autosaveSub&&(this.autosaveSub.unsubscribe(),this.autosaveSub=null),!this.isSubmitted&&!this.isDiscarded&&this.saveDraftOnExit().catch(t=>console.error("BiomassPage: saveDraftOnExit failed:",t))}formatDateToYYYYMMDD(t){return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}setCurrentDateTime(t){if(this.biomassForm){const f=this.biomassForm.get("observationDate")?.value,P=this.biomassForm.get("observationTime")?.value;if(f&&P){const[x,M,C]=f.split("-"),[B,O]=P.split(":");return void(this.currentDateTime=`${C}/${M}/${x}  \u2022  ${B}:${O}`)}}if(t){const f=this.extractDateTimeFromReportId(t);if(f)return void(this.currentDateTime=f)}const o=new Date,n=String(o.getDate()).padStart(2,"0"),r=String(o.getMonth()+1).padStart(2,"0"),d=o.getFullYear(),_=String(o.getHours()).padStart(2,"0"),y=String(o.getMinutes()).padStart(2,"0");this.currentDateTime=`${n}/${r}/${d}  \u2022  ${_}:${y}`}extractDateTimeFromReportId(t){const o=t.match(/(\d{2})(\d{2})(\d{4})_(\d{2})(\d{2})(\d{2})/);if(o){const[,n,r,d,_,y]=o;return`${n}/${r}/${d}  \u2022  ${_}:${y}`}return null}fetchWeatherAndTide(){this.weatherService.getWeatherByCoordinates(this.maheLatitude,this.maheLongitude).subscribe({next:t=>{if(t&&t.weather&&t.weather.length>0){const o=this.weatherService.mapWeatherToOption(t.weather[0].main);this.biomassForm.patchValue({weather:o}),console.log("Weather auto-populated:",o)}},error:t=>{console.error("Error fetching weather:",t)}}),this.tideService.getTides(this.maheLatitude,this.maheLongitude).subscribe({next:t=>{if(t&&t.extremes){const o=this.tideService.getCurrentTideState(t.extremes);this.biomassForm.patchValue({tide:o}),console.log("Tide auto-populated:",o)}},error:t=>{console.error("Error fetching tide:",t)}})}loadDraft(){var t=this;return(0,v.A)(function*(){try{const o=t.route.snapshot.queryParams,n={location:o.location||t.biomassForm.get("location")?.value,zoneNumber:o.zone||t.biomassForm.get("zoneNumber")?.value,quadNumber:o.quad||t.biomassForm.get("quadNumber")?.value},r=yield t.biomassSyncService.loadDraft(n);r&&(t.draftId=r.reportId,r.reportId&&(t.currentReportId=r.reportId),t.biomassForm.patchValue(r.form),r.form.treeMeasurements&&Array.isArray(r.form.treeMeasurements)&&(t.treeMeasurements=r.form.treeMeasurements),t.locationData=r.coordinates?{location:r.form.location,coordinates:r.coordinates}:null,t.updateProgress())}catch(o){console.error("Failed to load draft:",o)}})()}setupAutoSave(){this.autosaveSub&&this.autosaveSub.unsubscribe(),this.autosaveSub=this.biomassForm.valueChanges.pipe((0,w.B)(750)).subscribe(()=>{this.isSubmitted||(this.updateProgress(),this.saveDraftOnExit().catch(t=>console.error("BiomassPage: autosave failed:",t)))})}saveDraft(){var t=this;return(0,v.A)(function*(){var n;t.viewMode||t.isDiscarded||t.isSubmitted||(yield(yield t.alertController.create({header:"Save Draft",message:"Are you sure you want to save this form as a draft? You can return to complete it later.",buttons:[{text:"Cancel",role:"cancel"},{text:"Save Draft",handler:(n=(0,v.A)(function*(){try{const r={...t.biomassForm.value,treeMeasurements:t.treeMeasurements};t.draftId?yield t.biomassSyncService.saveDraft({reportId:t.currentReportId,form:r,coordinates:t.locationData?.coordinates||null,photos:[]}):(yield t.biomassSyncService.saveDraft({reportId:t.currentReportId,form:r,coordinates:t.locationData?.coordinates||null,photos:[]}),t.draftId="current"),yield(yield t.alertController.create({header:"Draft Saved",message:"Your form has been saved as a draft. You can access it from the biodiversity page.",buttons:[{text:"OK",handler:()=>{t.router.navigate(["/biodiversity"])}}]})).present()}catch(r){console.error("Failed to save draft:",r),yield(yield t.alertController.create({header:"Save Failed",message:"Failed to save the draft. Please try again.",buttons:["OK"]})).present()}}),function(){return n.apply(this,arguments)})}]})).present())})()}saveDraftOnExit(){var t=this;return(0,v.A)(function*(){if(!(t.viewMode||t.isDiscarded||t.isSubmitted))try{const o={...t.biomassForm.value,treeMeasurements:t.treeMeasurements};t.draftId?yield t.biomassSyncService.saveDraft({reportId:t.currentReportId,form:o,coordinates:t.locationData?.coordinates||null,photos:[]}):(yield t.biomassSyncService.saveDraft({reportId:t.currentReportId,form:o,coordinates:t.locationData?.coordinates||null,photos:[]}),t.draftId="current")}catch(o){console.error("Failed to save draft:",o)}})()}onSubmit(){var t=this;return(0,v.A)(function*(){if(t.isSubmitting)return;if(t.isSubmitting=!0,t.biomassForm.markAllAsTouched(),!t.biomassForm.valid)return t.isSubmitting=!1,void(yield(yield t.alertController.create({header:"Incomplete Form",message:"Please fill in all required fields (Location, Observer, Weather, Tide, Plot Size, Vegetation Type, and Sampling Method).",buttons:["OK"]})).present());t.isSubmitted=!0,t.autosaveSub&&(t.autosaveSub.unsubscribe(),t.autosaveSub=null);const o=yield t.loadingController.create({message:"Submitting biomass assessment..."});yield o.present();try{const n={...t.biomassForm.value,treeMeasurements:t.treeMeasurements};n.status={incomplete:!1,sent:!0,pending:!1};const r={formValue:n,coordinates:t.locationData?.coordinates||null,photos:[],existingReportId:t.currentReportId||void 0};t.isEditMode&&(r.isEditMode=!0,r.originalSubmittedBy=t.originalSubmittedBy);const d=yield t.biomassSyncService.submitFinal(r);yield o.dismiss();try{t.autosaveSub&&(t.autosaveSub.unsubscribe(),t.autosaveSub=null),yield new Promise(B=>setTimeout(B,1e3));const f=t.biomassForm.value;yield t.biomassSyncService.clearDraft(f);const P=(f?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),x=f?.zoneNumber||"",M=f?.quadNumber||"";let C=`biomass_draft_${P}`;x&&(C+=`_zone${x}`),M&&(C+=`_quad${M}`),yield t.forceDeleteDraftFile(`${C}.json`),t.isSubmitted=!0,console.log("BiomassPage: Draft cleared and form reset successfully")}catch(f){console.error("BiomassPage: Failed to clear draft:",f)}const _=t.isEditMode?d.queued?"Updated assessment saved locally and queued for upload when online.":"Biomass assessment updated successfully!":d.queued?"Biomass assessment saved locally and queued for upload when online.":"Biomass assessment submitted successfully!";yield(yield t.alertController.create({header:"Success",message:_,buttons:[{text:"OK",handler:()=>{t.router.navigate(["/biodiversity"])}}]})).present()}catch(n){yield o.dismiss(),console.error("Error submitting assessment:",n),yield(yield t.alertController.create({header:"Error",message:"Failed to submit biomass assessment. Please try again.",buttons:["OK"]})).present()}})()}discardForm(){var t=this;return(0,v.A)(function*(){var n;yield(yield t.alertController.create({header:"Discard Form",message:"Are you sure you want to discard this form? All entered data will be lost.",buttons:[{text:"Cancel",role:"cancel"},{text:"Discard",role:"destructive",handler:(n=(0,v.A)(function*(){t.isDiscarded=!0,t.autosaveSub&&(t.autosaveSub.unsubscribe(),t.autosaveSub=null),yield new Promise(P=>setTimeout(P,1e3));const r=t.biomassForm.value;yield t.biomassSyncService.clearDraft(r);const d=(r?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),_=r?.zoneNumber||"",y=r?.quadNumber||"";let f=`biomass_draft_${d}`;_&&(f+=`_zone${_}`),y&&(f+=`_quad${y}`),yield t.forceDeleteDraftFile(`${f}.json`),yield new Promise(P=>setTimeout(P,200)),t.initializeForm(),t.router.navigate(["/biodiversity"])}),function(){return n.apply(this,arguments)})}]})).present()})()}editLocation(){this.router.navigate(["/location-biomass"])}canEditLocation(){return!this.viewMode}editZone(){console.log("Edit zone clicked")}editQuad(){console.log("Edit quad clicked")}locationHasZones(){const t=this.biomassForm.get("location")?.value;return!!t&&["Ramsar","Grand Anse","Petit Barbarons"].includes(t)}locationHasQuads(){const t=this.biomassForm.get("location")?.value;return!!t&&["Ramsar","Grand Anse","Caiman","Canopy"].includes(t)}getZoneName(t){return t?`Zone ${t}`:""}getQuadDisplay(t){if(!t)return"";const o=t.match(/\d+/);return o?o[0]:""}editLocationAdmin(){var t=this;return(0,v.A)(function*(){if(!t.currentUser||t.currentUser.level<4)return;const o=yield t.selectLocationStep();if(!o)return;const n=t.availableLocations.find(_=>_.name===o);let r="";if(n?.hasZones&&n.zones.length>0){const _=yield t.selectZoneStep(n);if(null===_)return;r=_}let d="";if(n?.hasQuads&&n.quads.length>0){const _=yield t.selectQuadStep(n,r);if(null===_)return;d=_}t.biomassForm.patchValue({location:o,zoneNumber:r,quadNumber:d}),t.isEditMode&&t.biomassForm.markAsDirty()})()}selectLocationStep(){var t=this;return new Promise(function(){var o=(0,v.A)(function*(n){const r=t.biomassForm.get("location")?.value||"",d=t.availableLocations.map(y=>({name:"location",type:"radio",label:y.name,value:y.name,checked:y.name===r}));yield(yield t.alertController.create({header:"Select Location",cssClass:"location-edit-alert",inputs:d,buttons:[{text:"Cancel",role:"cancel",handler:()=>n(null)},{text:"Next",handler:y=>n(y)}]})).present()});return function(n){return o.apply(this,arguments)}}())}selectZoneStep(t){var o=this;return new Promise(function(){var n=(0,v.A)(function*(r){const d=o.biomassForm.get("zoneNumber")?.value||"",_=t.zones.map(f=>({name:"zone",type:"radio",label:`Zone ${f}`,value:f,checked:f===d}));yield(yield o.alertController.create({header:"Select Zone",subHeader:t.name,cssClass:"location-edit-alert",inputs:_,buttons:[{text:"Cancel",role:"cancel",handler:()=>r(null)},{text:"Next",handler:f=>r(f)}]})).present()});return function(r){return n.apply(this,arguments)}}())}selectQuadStep(t,o){var n=this;return new Promise(function(){var r=(0,v.A)(function*(d){const _=n.biomassForm.get("quadNumber")?.value||"";let y=t.quads;if(o&&t.zoneQuadMap&&t.zoneQuadMap[o]){const x=t.zoneQuadMap[o];y=t.quads.filter(M=>{const C=parseInt(n.getQuadDisplay(M));return x.includes(C)})}const f=y.map(x=>({name:"quad",type:"radio",label:`Quad ${n.getQuadDisplay(x)}`,value:x,checked:n.getQuadDisplay(x)===_||x===_}));yield(yield n.alertController.create({header:"Select Quad",subHeader:t.name,cssClass:"location-edit-alert",inputs:f,buttons:[{text:"Cancel",role:"cancel",handler:()=>d(null)},{text:"Save",handler:x=>d(x)}]})).present()});return function(d){return r.apply(this,arguments)}}())}loadDynamicSites(){var t=this;return(0,v.A)(function*(){try{(yield t.siteSyncService.getAllSites()).forEach(n=>{t.availableLocations.some(r=>r.name===n.name)||t.availableLocations.push({name:n.name,hasZones:n.zones&&n.zones.length>0||!1,hasQuads:n.sample_points&&n.sample_points.length>0||!1,zones:n.zones?n.zones.map(r=>r.name?.replace("Zone ","")||r.id):[],quads:n.sample_points?n.sample_points.map(r=>r.id||r.label):[]})})}catch(o){console.error("Error loading dynamic sites:",o)}})()}addTree(){if(this.newTree.species&&this.newTree.dbh>0){if(this.currentUser&&this.currentUser.level>=3&&(!this.newTree.height||this.newTree.height<=0))return;this.treeMeasurements.push({...this.newTree}),this.newTree={species:"",dbh:0,height:null},this.updateProgress(),this.saveDraftOnExit()}}removeTree(t){this.treeMeasurements.splice(t,1),this.updateProgress(),this.saveDraftOnExit()}getSpeciesDisplayName(t){return Ae[t]||t}calculateTreeBiomass(t){const o=ze[t.species];if(!o)return{agb:0,bgb:0,total:0};let n,r;return this.currentUser&&this.currentUser.level>=3&&t.height?(n=((i,l,a)=>.0673*a*Math.pow(i*l,.976))(t.dbh,t.height,o),r=((i,l)=>.0189*Math.pow(i,2.13)*Math.pow(l,.652))(t.dbh,t.height)):(n=((i,l)=>.251*l*Math.pow(i,2.46))(t.dbh,o),r=(i=>.199*Math.pow(.251*Math.pow(i,2.46),.899))(t.dbh)),{agb:n,bgb:r,total:n+r}}getTotalBiomass(){let t=0,o=0;return this.treeMeasurements.forEach(n=>{const r=this.calculateTreeBiomass(n);t+=r.agb,o+=r.bgb}),{agb:t,bgb:o,total:t+o}}getBiomassPerArea(){const t=parseFloat(this.biomassForm.get("plotSize")?.value)||0;return t<=0?0:this.getTotalBiomass().total/t}showEquationInfo(){var t=this;return(0,v.A)(function*(){const o=t.currentUser?t.currentUser.level:2,r=`\u{1f4d0} LEVEL 2 (Diameter only)\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  AGB = \u03c1 \xd7 0.251 \xd7 D\xb2\xb7\u2074\u2076\n  BGB = 0.199 \xd7 AGB\u2070\xb7\u2078\u2079\u2079\n  Komiyama et al. (2005)\n\n\u{1f4cf} LEVEL 3-4 (Diameter + Height)\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  AGB = \u03c1 \xd7 0.0673 \xd7 (D\xd7H)\u2070\xb7\u2079\u2077\u2076\n  BGB = 0.0189 \xd7 D\xb2\xb7\xb9\xb3 \xd7 H\u2070\xb7\u2076\u2075\xb2\n  Chave et al. (2014)\n\n\u{1f333} WOOD DENSITIES (\u03c1, g/cm\xb3)\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  R. mucronata: 0.954\n  A. marina: 0.843\n  S. alba: 0.683\n  B. cylindrica: 0.865\n  C. tagal: 0.945\n  X. granatum: 0.815\n\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\nYour level: ${o} (${o>=3?"Advanced":"Simple"})\n\nD = Diameter (cm)\nH = Height (m)\n\u03c1 = Wood density`;yield(yield t.alertController.create({header:"Biomass Equations",message:r,buttons:["OK"],cssClass:"equation-info-alert"})).present()})()}updateProgress(){let t=0,o=5;this.biomassForm.get("observer")?.value&&t++,this.biomassForm.get("weather")?.value&&t++,this.biomassForm.get("tide")?.value&&t++,this.biomassForm.get("plotSize")?.value&&t++,this.biomassForm.get("vegetationType")?.value&&t++,"mangrove"===this.biomassForm.get("vegetationType")?.value?(o++,this.treeMeasurements.length>0&&t++):(o++,this.biomassForm.get("biomassEstimate")?.value&&t++),this.progress=t/o}setViewMode(t){this.viewMode=t,t?this.biomassForm.disable():this.biomassForm.enable()}enableEditMode(){!this.currentUser||this.currentUser.level<4||(this.isEditMode=!0,this.viewMode=!1,this.biomassForm.enable(),this.originalSubmittedBy=this.loadedReport?.submittedBy||"")}getEditedDateTime(){if(!this.loadedReport)return null;let t=this.loadedReport.editedAt||null;if(!t){const f=this.loadedReport.updatedAt,P=this.loadedReport.createdAt;f&&P&&f!==P&&Math.abs(new Date(f).getTime()-new Date(P).getTime())>5e3&&(t=f)}if(!t)return null;const o=new Date(t);return isNaN(o.getTime())?null:`${o.getDate().toString().padStart(2,"0")}/${(o.getMonth()+1).toString().padStart(2,"0")}/${o.getFullYear()} ${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`}loadReportForViewing(t){var o=this;return(0,v.A)(function*(){try{const n=yield o.biomassSyncService.getAllReports();console.log("BiomassPage: All reports:",n);const r=n.find(_=>_.report.reportId===t);if(!r)return console.error("BiomassPage: Report not found for viewing:",t),yield(yield o.alertController.create({header:"Report Not Found",message:"The requested report could not be found.",buttons:["OK"]})).present(),void o.router.navigate(["/biodiversity"]);const d=r.report;console.log("BiomassPage: Loading report for viewing:",d),o.loadedReport=d,o.biomassForm.patchValue({location:d.form.location||"",zoneNumber:d.form.zoneNumber||"",quadNumber:d.form.quadNumber||"",observer:d.form.observer||"",observationDate:d.form.observationDate||d.form.date||"",observationTime:d.form.observationTime||"",weather:d.form.weather||"",tide:d.form.tide||"",plotSize:d.form.plotSize||"",vegetationType:d.form.vegetationType||"",biomassEstimate:d.form.biomassEstimate||"",notes:d.form.notes||""}),d.form.treeMeasurements&&Array.isArray(d.form.treeMeasurements)&&(o.treeMeasurements=d.form.treeMeasurements),d.coordinates&&(o.locationData={location:d.form.location,coordinates:d.coordinates}),o.currentReportId=t,o.setCurrentDateTime(t),o.updateProgress(),o.setViewMode(!0)}catch(n){console.error("BiomassPage: Error loading report for viewing:",n),yield(yield o.alertController.create({header:"Error",message:"Failed to load the report for viewing.",buttons:["OK"]})).present(),o.router.navigate(["/biodiversity"])}})()}deleteEntry(){var t=this;return(0,v.A)(function*(){const o=t.auth.getCurrentUser();var r;!o||o.level<4?yield(yield t.alertController.create({header:"Permission Denied",message:"Only Level 4 users can delete entries.",buttons:["OK"]})).present():yield(yield t.alertController.create({header:"Delete Entry",message:"Are you sure you want to permanently delete this entry? This will remove it from the database and back it up to deleted files storage. This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:(r=(0,v.A)(function*(){yield t.performDeletion()}),function(){return r.apply(this,arguments)})}]})).present()})()}performDeletion(){var t=this;return(0,v.A)(function*(){const o=yield t.loadingController.create({message:"Deleting entry..."});yield o.present();try{const n=t.auth.getCurrentUser();yield t.entryDeletionService.deleteEntry({reportId:t.currentReportId,formType:"biomass",tableName:"biomass_reports",deletedBy:n?.username||"Unknown",deletedByEmail:n?.email||"",originalSubmittedBy:t.loadedReport?.submittedBy,originalSubmittedAt:t.loadedReport?.createdAt}),yield o.dismiss(),yield(yield t.alertController.create({header:"Success",message:"Entry has been deleted and backed up successfully.",buttons:[{text:"OK",handler:()=>{t.router.navigate(["/biodiversity"])}}]})).present()}catch(n){yield o.dismiss(),console.error("Error deleting entry:",n),yield(yield t.alertController.create({header:"Error",message:"Failed to delete entry. Please try again.",buttons:["OK"]})).present()}})()}static#e=i=()=>(this.\u0275fac=function(o){return new(o||l)(e.rXU(F.ok),e.rXU(g.hG),e.rXU(g.Xi),e.rXU(g.W3),e.rXU(E.Ix),e.rXU(E.nX),e.rXU(j.P),e.rXU(s.W),e.rXU(m.m),e.rXU(c.N),e.rXU(u.H),e.rXU(b.C),e.rXU(S.k))},this.\u0275cmp=e.VBU({type:l,selectors:[["app-biomass"]],standalone:!1,decls:115,vars:35,consts:[[1,"green1"],["slot","start"],[3,"defaultHref"],[1,"green1","compact-toolbar"],[1,"date-time-text"],[4,"ngIf"],[1,"green1","metadata-toolbar"],[1,"metadata-container"],[1,"metadata-item",3,"click"],["name","location",1,"metadata-icon"],[1,"metadata-label"],["name","alert-circle","class","status-icon required",4,"ngIf"],["class","edit-location-link",3,"click",4,"ngIf"],["class","metadata-item",3,"click",4,"ngIf"],["style","padding: 0 16px; font-size: 0.75rem; color: #e76f51;",4,"ngIf"],["color","light",3,"value"],[1,"progress-text"],[3,"ngSubmit","formGroup"],["class","edit-mode-banner",4,"ngIf"],["class","edit-mode-banner editing",4,"ngIf"],[2,"position","relative"],["position","stacked"],["formControlName","observer","type","text","placeholder","Enter observer name"],["name","close-circle","color","danger","style","position: absolute; top: 12px; right: 10px;",4,"ngIf"],["name","checkmark-circle","style","position: absolute; top: 12px; right: 10px; color: #52a676;",4,"ngIf"],["formControlName","weather","placeholder","Select weather","interface","popover"],["value","sunny"],["value","partly_cloudy"],["value","cloudy"],["value","rainy"],["value","windy"],["formControlName","tide","placeholder","Select tide","interface","popover"],["value","high"],["value","low"],["value","incoming"],["value","outgoing"],["formControlName","plotSize","type","number","step","0.1","placeholder","0"],["formControlName","vegetationType","placeholder","Select vegetation type","interface","popover"],["value","mangrove"],["value","seagrass"],["value","saltmarsh"],["value","algae"],["value","mixed"],["formControlName","notes","rows","6","placeholder","Enter any additional observations, methodology notes, environmental conditions, etc."],["class","form-buttons",4,"ngIf"],["class","button-container",4,"ngIf"],["name","alert-circle",1,"status-icon","required"],[1,"edit-location-link",3,"click"],["name","grid",1,"metadata-icon"],["name","apps",1,"metadata-icon"],[2,"padding","0 16px","font-size","0.75rem","color","#e76f51"],[1,"edit-mode-banner"],["expand","block","color","warning",3,"click"],["name","create-outline","slot","start"],[1,"edit-mode-banner","editing"],["name","create-outline"],["name","close-circle","color","danger",2,"position","absolute","top","12px","right","10px"],["name","checkmark-circle",2,"position","absolute","top","12px","right","10px","color","#52a676"],["name","information-circle",2,"vertical-align","middle","margin-left","8px","cursor","pointer",3,"click"],[1,"tree-input-section"],["size","12"],[1,"ion-text-wrap","ion-color-medium",2,"font-size","12px","margin-top","4px"],["size","12","size-md","4"],["placeholder","Select species","interface","popover",3,"ionChange","value"],["value","rhizophora_mucronata"],["value","avicennia_marina"],["value","ceriops_tagal"],["value","bruguiera_cylindrica"],["value","sonneratia_alba"],["value","xylocarpus_granatum"],["size","6","size-md","4"],["type","number","step","0.1","min","0","placeholder","Diameter in cm",3,"ionInput","value"],["size","6","size-md","4",4,"ngIf"],["expand","block","fill","outline",1,"coastal-blue-btn",3,"click","disabled"],["name","add","slot","start"],["style","padding: 12px; background: #e8f5e9; margin: 10px 0; border-radius: 8px; border-left: 4px solid #4fb3bf;",4,"ngIf"],["class","tree-list-section",4,"ngIf"],["style","text-align: center; padding: 20px; color: var(--ion-color-medium);",4,"ngIf"],["type","number","step","0.1","min","0","placeholder","0",3,"ionInput","value"],[2,"padding","12px","background","#e8f5e9","margin","10px 0","border-radius","8px","border-left","4px solid #4fb3bf"],[2,"color","#52a676"],[2,"font-size","14px"],[1,"tree-list-section"],[4,"ngFor","ngForOf"],[1,"biomass-summary",2,"margin-top","16px","padding","12px","background","var(--ion-color-light)","border-radius","8px"],["size","6"],[2,"text-align","center"],[2,"font-size","12px","color","var(--ion-color-medium)"],[2,"font-size","18px","font-weight","bold"],[2,"text-align","center","margin-top","8px","padding-top","8px","border-top","1px solid var(--ion-color-medium-tint)"],[2,"font-size","20px","font-weight","bold","color","#52a676"],[1,"tree-info"],[1,"ion-color-medium"],["slot","end"],[1,"tree-biomass",2,"text-align","right"],[1,"ion-color-medium",2,"font-size","12px"],["slot","end","fill","clear","size","small","color","danger",3,"click"],["name","remove-circle"],[2,"text-align","center","padding","20px","color","var(--ion-color-medium)"],["name","leaf-outline",2,"font-size","48px","opacity","0.3"],["formControlName","biomassEstimate","type","number","step","0.1","placeholder","0"],[1,"form-buttons"],["expand","block","size","large","type","submit",1,"green-button",3,"disabled"],["name","leaf","slot","start"],["expand","block","fill","outline","color","medium",1,"save-draft-button",3,"click"],["name","save-outline","slot","start"],["expand","block","fill","outline",1,"discard-button",3,"click"],["name","trash-outline","slot","start"],[1,"button-container"],["expand","block","color","danger",1,"delete-button",3,"click"]],template:function(o,n){if(1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Biomass Assessment"),e.k0s()(),e.j41(6,"ion-toolbar",3)(7,"ion-text",4),e.EFF(8),e.DNE(9,T,2,1,"span",5),e.k0s()(),e.j41(10,"ion-toolbar",6)(11,"div",7)(12,"div",8),e.bIt("click",function(){return!n.viewMode&&n.editLocation()}),e.nrm(13,"ion-icon",9),e.j41(14,"span",10),e.EFF(15),e.k0s(),e.DNE(16,D,1,0,"ion-icon",11),e.k0s(),e.DNE(17,V,2,0,"span",12)(18,X,4,1,"div",13)(19,$,4,1,"div",13),e.k0s(),e.DNE(20,z,2,0,"ion-error",14),e.k0s(),e.j41(21,"ion-toolbar",3),e.nrm(22,"ion-progress-bar",15),e.j41(23,"ion-text",16),e.EFF(24),e.k0s()()(),e.j41(25,"ion-content")(26,"form",17),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.DNE(27,G,4,0,"div",18)(28,A,4,0,"div",19),e.j41(29,"ion-card")(30,"ion-card-header",0)(31,"ion-card-title"),e.EFF(32,"Survey Information"),e.k0s()(),e.j41(33,"ion-card-content")(34,"ion-item",20)(35,"ion-label",21),e.EFF(36,"Observer"),e.k0s(),e.nrm(37,"ion-input",22),e.DNE(38,Y,1,0,"ion-icon",23)(39,ie,1,0,"ion-icon",24)(40,re,2,0,"ion-error",5),e.k0s(),e.j41(41,"ion-item",20)(42,"ion-label",21),e.EFF(43,"Weather"),e.k0s(),e.j41(44,"ion-select",25)(45,"ion-select-option",26),e.EFF(46,"Sunny"),e.k0s(),e.j41(47,"ion-select-option",27),e.EFF(48,"Partly Cloudy"),e.k0s(),e.j41(49,"ion-select-option",28),e.EFF(50,"Cloudy"),e.k0s(),e.j41(51,"ion-select-option",29),e.EFF(52,"Rainy"),e.k0s(),e.j41(53,"ion-select-option",30),e.EFF(54,"Windy"),e.k0s()(),e.DNE(55,ae,1,0,"ion-icon",23)(56,se,1,0,"ion-icon",24)(57,le,2,0,"ion-error",5),e.k0s(),e.j41(58,"ion-item",20)(59,"ion-label",21),e.EFF(60,"Tide"),e.k0s(),e.j41(61,"ion-select",31)(62,"ion-select-option",32),e.EFF(63,"High"),e.k0s(),e.j41(64,"ion-select-option",33),e.EFF(65,"Low"),e.k0s(),e.j41(66,"ion-select-option",34),e.EFF(67,"Incoming"),e.k0s(),e.j41(68,"ion-select-option",35),e.EFF(69,"Outgoing"),e.k0s()(),e.DNE(70,ce,1,0,"ion-icon",23)(71,de,1,0,"ion-icon",24)(72,ue,2,0,"ion-error",5),e.k0s()()(),e.j41(73,"ion-card")(74,"ion-card-header",0)(75,"ion-card-title"),e.EFF(76,"Plot Information"),e.k0s()(),e.j41(77,"ion-card-content")(78,"ion-item",20)(79,"ion-label",21),e.EFF(80,"Plot Size (m\xb2)"),e.k0s(),e.nrm(81,"ion-input",36),e.DNE(82,me,1,0,"ion-icon",23)(83,ge,1,0,"ion-icon",24)(84,pe,2,0,"ion-error",5),e.k0s(),e.j41(85,"ion-item",20)(86,"ion-label",21),e.EFF(87,"Vegetation Type"),e.k0s(),e.j41(88,"ion-select",37)(89,"ion-select-option",38),e.EFF(90,"Mangrove"),e.k0s(),e.j41(91,"ion-select-option",39),e.EFF(92,"Seagrass"),e.k0s(),e.j41(93,"ion-select-option",40),e.EFF(94,"Salt Marsh"),e.k0s(),e.j41(95,"ion-select-option",41),e.EFF(96,"Algae"),e.k0s(),e.j41(97,"ion-select-option",42),e.EFF(98,"Mixed Vegetation"),e.k0s()(),e.DNE(99,fe,1,0,"ion-icon",23)(100,_e,1,0,"ion-icon",24)(101,he,2,0,"ion-error",5),e.k0s()()(),e.DNE(102,Oe,54,12,"ion-card",5)(103,$e,12,3,"ion-card",5),e.j41(104,"ion-card")(105,"ion-card-header",0)(106,"ion-card-title"),e.EFF(107,"Additional Notes"),e.k0s()(),e.j41(108,"ion-card-content")(109,"ion-item")(110,"ion-label",21),e.EFF(111,"Notes"),e.k0s(),e.nrm(112,"ion-textarea",43),e.k0s()()(),e.DNE(113,Re,10,1,"div",44)(114,Ne,4,0,"div",45),e.k0s()()),2&o){let r,d,_,y,f,P,x,M,C,B,O,R,K,q,Z,J,U,ee,te,L,oe,ne;e.R7$(3),e.Y8G("defaultHref",n.viewMode?"/biodiversity":"/home"),e.R7$(5),e.SpI(" ",n.currentDateTime),e.R7$(),e.Y8G("ngIf",(n.viewMode||n.isEditMode)&&n.getEditedDateTime()),e.R7$(6),e.JRh((null==(r=n.biomassForm.get("location"))?null:r.value)||"Add location"),e.R7$(),e.Y8G("ngIf",!(null!=(d=n.biomassForm.get("location"))&&d.value||n.viewMode)),e.R7$(),e.Y8G("ngIf",n.isEditMode&&n.currentUser&&n.currentUser.level>=4),e.R7$(),e.Y8G("ngIf",(null==(_=n.biomassForm.get("zoneNumber"))?null:_.value)&&n.locationHasZones()),e.R7$(),e.Y8G("ngIf",(null==(y=n.biomassForm.get("quadNumber"))?null:y.value)&&n.locationHasQuads()),e.R7$(),e.Y8G("ngIf",(null==(f=n.biomassForm.get("location"))?null:f.hasError("required"))&&(null==(f=n.biomassForm.get("location"))?null:f.touched)),e.R7$(2),e.Y8G("value",n.progress),e.R7$(2),e.SpI(" ",(100*n.progress).toFixed(0),"% Complete "),e.R7$(),e.AVh("view-mode",n.viewMode),e.R7$(),e.Y8G("formGroup",n.biomassForm),e.R7$(),e.Y8G("ngIf",n.viewMode&&n.currentUser&&n.currentUser.level>=4),e.R7$(),e.Y8G("ngIf",n.isEditMode),e.R7$(10),e.Y8G("ngIf",!(null!=(P=n.biomassForm.get("observer"))&&P.value)),e.R7$(),e.Y8G("ngIf",null==(x=n.biomassForm.get("observer"))?null:x.value),e.R7$(),e.Y8G("ngIf",(null==(M=n.biomassForm.get("observer"))?null:M.hasError("required"))&&(null==(M=n.biomassForm.get("observer"))?null:M.touched)),e.R7$(15),e.Y8G("ngIf",!(null!=(C=n.biomassForm.get("weather"))&&C.value)),e.R7$(),e.Y8G("ngIf",null==(B=n.biomassForm.get("weather"))?null:B.value),e.R7$(),e.Y8G("ngIf",(null==(O=n.biomassForm.get("weather"))?null:O.hasError("required"))&&(null==(O=n.biomassForm.get("weather"))?null:O.touched)),e.R7$(13),e.Y8G("ngIf",!(null!=(R=n.biomassForm.get("tide"))&&R.value)),e.R7$(),e.Y8G("ngIf",null==(K=n.biomassForm.get("tide"))?null:K.value),e.R7$(),e.Y8G("ngIf",(null==(q=n.biomassForm.get("tide"))?null:q.hasError("required"))&&(null==(q=n.biomassForm.get("tide"))?null:q.touched)),e.R7$(10),e.Y8G("ngIf",!(null!=(Z=n.biomassForm.get("plotSize"))&&Z.value)),e.R7$(),e.Y8G("ngIf",null==(J=n.biomassForm.get("plotSize"))?null:J.value),e.R7$(),e.Y8G("ngIf",(null==(U=n.biomassForm.get("plotSize"))?null:U.hasError("required"))&&(null==(U=n.biomassForm.get("plotSize"))?null:U.touched)),e.R7$(15),e.Y8G("ngIf",!(null!=(ee=n.biomassForm.get("vegetationType"))&&ee.value)),e.R7$(),e.Y8G("ngIf",null==(te=n.biomassForm.get("vegetationType"))?null:te.value),e.R7$(),e.Y8G("ngIf",(null==(L=n.biomassForm.get("vegetationType"))?null:L.hasError("required"))&&(null==(L=n.biomassForm.get("vegetationType"))?null:L.touched)),e.R7$(),e.Y8G("ngIf","mangrove"===(null==(oe=n.biomassForm.get("vegetationType"))?null:oe.value)),e.R7$(),e.Y8G("ngIf","mangrove"!==(null==(ne=n.biomassForm.get("vegetationType"))?null:ne.value)),e.R7$(10),e.Y8G("ngIf",!n.viewMode),e.R7$(),e.Y8G("ngIf",n.viewMode&&(null==n.currentUser?null:n.currentUser.level)>=4)}},dependencies:[k.Sq,k.bT,F.qT,F.BC,F.cb,F.j4,F.JD,g.Jm,g.QW,g.b_,g.I9,g.ME,g.HW,g.tN,g.hU,g.W9,g.lO,g.eU,g.iq,g.$w,g.uz,g.he,g.nf,g.FH,g.ln,g.Nm,g.Ip,g.IO,g.nc,g.BC,g.ai,g.su,g.Je,g.Gw,g.el],styles:[".equation-info-alert{--max-width: 360px}  .equation-info-alert .alert-message{max-height:70vh;overflow-y:auto;white-space:pre-line!important;font-family:monospace!important;font-size:13px!important;line-height:1.5!important}.coastal-blue-btn[_ngcontent-%COMP%]{--color: #4fb3bf;--border-color: #4fb3bf;--background-hover: rgba(79, 179, 191, .1)}.coastal-blue-btn.ion-activated[_ngcontent-%COMP%]{--background: rgba(79, 179, 191, .2)}.green-background[_ngcontent-%COMP%]{--background: #f0f9f0}.green1[_ngcontent-%COMP%]{--background: #52a676;color:#fff}.green1[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{--color: white;transition:transform .2s}.green1[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]:hover{transform:translate(-4px)}.green1[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;text-align:center;position:absolute;left:0;right:0;padding:0 50px}.green1.compact-toolbar[_ngcontent-%COMP%]{--min-height: 28px;--padding-top: 5px;--padding-bottom: 5px}.edit-mode-banner[_ngcontent-%COMP%]{padding:.75rem 1rem;margin:.5rem;border-radius:.5rem}.edit-mode-banner[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: .5rem;font-weight:600}.edit-mode-banner.editing[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffc107;display:flex;align-items:center;gap:.5rem;color:#856404;font-weight:500}.edit-mode-banner.editing[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.date-time-text[_ngcontent-%COMP%]{display:block;text-align:center;color:#fffffff2;font-size:14px;padding:0;margin:3px 0;font-weight:400;letter-spacing:.3px;line-height:1.2}.progress-text[_ngcontent-%COMP%]{display:block;text-align:center;color:#fff;font-size:13px;padding:0;margin:0 0 4px}.metadata-toolbar[_ngcontent-%COMP%]{--min-height: 40px;--padding-top: 6px;--padding-bottom: 6px}.metadata-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px;padding:0 12px;flex-wrap:wrap}.metadata-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;background:#ffffff26;border-radius:16px;padding:5px 10px;cursor:pointer;transition:all .2s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.metadata-item[_ngcontent-%COMP%]:active{transform:scale(.95);background:#ffffff40}.metadata-icon[_ngcontent-%COMP%]{font-size:14px;color:#ffffffe6;min-width:14px}.metadata-label[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:500;letter-spacing:.2px;white-space:nowrap;max-width:120px;overflow:hidden;text-overflow:ellipsis}.edit-location-link[_ngcontent-%COMP%]{color:#ffffffe6;font-size:11px;text-decoration:underline;cursor:pointer;margin-left:8px;padding:4px 8px}.edit-location-link[_ngcontent-%COMP%]:active{opacity:.7}.status-icon.required[_ngcontent-%COMP%]{color:#ffcdd2;font-size:14px}ion-card[_ngcontent-%COMP%]{margin:16px;border-radius:12px;box-shadow:0 2px 8px #0000001a}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{border-radius:12px 12px 0 0;padding:16px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#fff}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#ffffffe6;font-size:.875rem;margin-top:4px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{background:#fff;padding:16px}ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;margin-bottom:16px;background:transparent;border:none}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:8px;color:#52a676;font-weight:600}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;color:#52a676;margin:0}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:.875rem;margin:4px 0 0}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{--background: white;--border-color: #e0e0e0;--border-radius: 8px;--padding-start: 12px;--padding-end: 12px;--padding-top: 12px;--padding-bottom: 12px;margin-top:8px;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 1px 3px #0000001a;transition:all .2s ease}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]:focus, ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]:focus, ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]:focus{--border-color: #52a676;box-shadow:0 2px 8px #52a67633}ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{min-height:120px}ion-icon[name=checkmark-circle][_ngcontent-%COMP%]{color:#52a676;animation:_ngcontent-%COMP%_checkmark .3s ease}ion-icon[name=close-circle][_ngcontent-%COMP%]{color:#f44336;animation:_ngcontent-%COMP%_shake .3s ease}@keyframes _ngcontent-%COMP%_checkmark{0%{transform:scale(0)}50%{transform:scale(1.2)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-4px)}75%{transform:translate(4px)}}.form-buttons[_ngcontent-%COMP%]{padding:0 16px;margin-top:24px;margin-bottom:32px}.form-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:12px;height:56px;font-weight:600;border-radius:12px;transition:all .2s ease}.form-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-buttons[_ngcontent-%COMP%]   ion-button.save-draft-button[_ngcontent-%COMP%]{margin:10px 0 12px}.form-buttons[_ngcontent-%COMP%]   .save-draft-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-size:1rem;font-weight:500;--background: rgba(107, 124, 122, .1);--border-color: #6b7c7a;--color: #6b7c7a;--background-hover: rgba(107, 124, 122, .2);--background-activated: rgba(107, 124, 122, .3)}.form-buttons[_ngcontent-%COMP%]   .discard-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-size:1rem;font-weight:500;--color: #e76f51;--border-color: #e76f51;--border-width: 2px;--background-hover: rgba(231, 111, 81, .1);--background-activated: rgba(231, 111, 81, .2);--ripple-color: rgba(231, 111, 81, .3)}.form-buttons[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{margin-top:20px;--background: #d32f2f;--background-hover: #b71c1c;--background-activated: #b71c1c;font-weight:600;height:48px;font-size:1rem}.green-button[_ngcontent-%COMP%]{--background: #52a676;--color: white}.green-button.compact-toolbar[_ngcontent-%COMP%]{--min-height: 28px;--padding-top: 5px;--padding-bottom: 5px;box-shadow:0 6px 16px #52a67666}.green-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.discard-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-size:1rem;font-weight:500;--color: #e76f51;--border-color: #e76f51;--border-width: 2px;--background-hover: rgba(231, 111, 81, .1);--background-activated: rgba(231, 111, 81, .2);--ripple-color: rgba(231, 111, 81, .3)}@media (max-width: 768px){.metadata-container[_ngcontent-%COMP%]{gap:6px}.metadata-item[_ngcontent-%COMP%]{padding:4px 8px}.metadata-label[_ngcontent-%COMP%]{font-size:11px}.progress-container[_ngcontent-%COMP%]{padding:12px}ion-card[_ngcontent-%COMP%]{margin:12px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:12px 16px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:16px}.form-buttons[_ngcontent-%COMP%]{padding:0 12px}}@media (max-width: 480px){.metadata-container[_ngcontent-%COMP%]{gap:4px}.metadata-item[_ngcontent-%COMP%]{padding:3px 6px}.metadata-label[_ngcontent-%COMP%]{font-size:10px}.progress-container[_ngcontent-%COMP%]{padding:8px}ion-card[_ngcontent-%COMP%]{margin:8px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:10px 12px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:12px}.form-buttons[_ngcontent-%COMP%]{padding:0 8px;margin-top:20px}.form-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:48px;font-size:16px}}ion-error[_ngcontent-%COMP%]{color:#e76f51!important;font-size:.75rem!important;margin-top:4px;padding-left:16px}  ion-content.view-mode ion-checkbox{pointer-events:none!important;cursor:default!important}  ion-content.view-mode ion-input,   ion-content.view-mode ion-textarea,   ion-content.view-mode ion-select{pointer-events:none!important;cursor:default!important}  ion-content.view-mode ion-button{pointer-events:none!important;cursor:default!important;opacity:.6}"]}))}return i(),l})()}];let Ye=(()=>{var i;class l{static#e=i=()=>(this.\u0275fac=function(o){return new(o||l)},this.\u0275mod=e.$C({type:l}),this.\u0275inj=p.G2t({imports:[I.iI.forChild(Ge),I.iI]}))}return i(),l})(),qe=(()=>{var i;class l{static#e=i=()=>(this.\u0275fac=function(o){return new(o||l)},this.\u0275mod=e.$C({type:l}),this.\u0275inj=p.G2t({imports:[k.MD,F.YN,F.X1,g.bv,Ye]}))}return i(),l})()}}]);