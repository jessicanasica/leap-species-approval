(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{177($t,ot,b){"use strict";b.d(ot,{AJ:()=>D,Xr:()=>Ge});var i=b(2615);const D="browser";let Ge=(()=>{class ye{static \u0275prov=(0,i.jDH)({token:ye,providedIn:"root",factory:()=>new pe((0,i.WQX)(i.qQL),window)})}return ye})();class pe{document;window;offset=()=>[0,0];constructor(We,Ee){this.document=We,this.window=Ee}setOffset(We){this.offset=Array.isArray(We)?()=>We:We}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(We,Ee){this.window.scrollTo({...Ee,left:We[0],top:We[1]})}scrollToAnchor(We,Ee){const et=function ie(ye,We){const Ee=ye.getElementById(We)||ye.getElementsByName(We)[0];if(Ee)return Ee;if("function"==typeof ye.createTreeWalker&&ye.body&&"function"==typeof ye.body.attachShadow){const et=ye.createTreeWalker(ye.body,NodeFilter.SHOW_ELEMENT);let bt=et.currentNode;for(;bt;){const zt=bt.shadowRoot;if(zt){const pn=zt.getElementById(We)||zt.querySelector(`[name="${We}"]`);if(pn)return pn}bt=et.nextNode()}}return null}(this.document,We);et&&(this.scrollToElement(et,Ee),et.focus())}setHistoryScrollRestoration(We){try{this.window.history.scrollRestoration=We}catch{console.warn((0,i.OsK)(2400,!1))}}scrollToElement(We,Ee){const et=We.getBoundingClientRect(),bt=et.left+this.window.pageXOffset,zt=et.top+this.window.pageYOffset,pn=this.offset();this.window.scrollTo({...Ee,left:bt-pn[0],top:zt-pn[1]})}}},274($t,ot,b){"use strict";b.d(ot,{H:()=>D});var i=b(1397),o=b(8071);function D(Ce,De){return(0,o.T)(De)?(0,i.Z)(Ce,De,1):(0,i.Z)(Ce,1)}},467($t,ot,b){"use strict";function i(D,Ce,De,B,Pe,Ge,pe){try{var ie=D[Ge](pe),Ae=ie.value}catch(l){return void De(l)}ie.done?Ce(Ae):Promise.resolve(Ae).then(B,Pe)}function o(D){return function(){var Ce=this,De=arguments;return new Promise(function(B,Pe){var Ge=D.apply(Ce,De);function pe(Ae){i(Ge,B,Pe,pe,ie,"next",Ae)}function ie(Ae){i(Ge,B,Pe,pe,ie,"throw",Ae)}pe(void 0)})}}b.d(ot,{A:()=>o})},499($t,ot,b){"use strict";b.r(ot),b.d(ot,{iosTransitionAnimation:()=>m,shadow:()=>Ge});var i=b(2541),o=b(1841);b(5705),b(9596),b(4674);const Pe=v=>document.querySelector(`${v}.ion-cloned-element`),Ge=v=>v.shadowRoot||v,pe=v=>{const M="ION-TABS"===v.tagName?v:v.querySelector("ion-tabs"),R="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=M){const V=M.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=V?V.querySelector(R):null}return v.querySelector(R)},ie=(v,M)=>{const R="ION-TABS"===v.tagName?v:v.querySelector("ion-tabs");let V=[];if(null!=R){const ce=R.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ce&&(V=ce.querySelectorAll("ion-buttons"))}else V=v.querySelectorAll("ion-buttons");for(const ce of V){const z=ce.closest("ion-header"),te=z&&!z.classList.contains("header-collapse-condense-inactive"),K=ce.querySelector("ion-back-button"),le=ce.classList.contains("buttons-collapse");if(null!==K&&("start"===ce.slot||""===ce.slot)&&(le&&te&&M||!le))return K}return null},l=(v,M,R,V,ce,z,te,K,le)=>{var ae,ve;const Ne=M?`calc(100% - ${ce.right+4}px)`:ce.left-4+"px",he=M?"right":"left",Le=M?"left":"right",re=M?"right":"left";let Ke=1,Fe=1,we=`scale(${Fe})`;const Oe="scale(1)";if(z&&te){const Xt=(null===(ae=z.textContent)||void 0===ae?void 0:ae.trim())===(null===(ve=K.textContent)||void 0===ve?void 0:ve.trim());Ke=le.width/te.width,Fe=(le.height-y)/te.height,we=Xt?`scale(${Ke}, ${Fe})`:`scale(${Fe})`}const Ve=Ge(V).querySelector("ion-icon").getBoundingClientRect(),be=M?Ve.width/2-(Ve.right-ce.right)+"px":ce.left-Ve.width/2+"px",q=M?`-${window.innerWidth-ce.right}px`:`${ce.left}px`,ge=`${le.top}px`,Ie=`${ce.top}px`,dt=R?[{offset:0,transform:`translate3d(${q}, ${Ie}, 0)`},{offset:1,transform:`translate3d(${be}, ${ge}, 0)`}]:[{offset:0,transform:`translate3d(${be}, ${ge}, 0)`},{offset:1,transform:`translate3d(${q}, ${Ie}, 0)`}],Ft=R?[{offset:0,opacity:1,transform:Oe},{offset:1,opacity:0,transform:we}]:[{offset:0,opacity:0,transform:we},{offset:1,opacity:1,transform:Oe}],ut=R?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],xt=(0,i.c)(),Tt=(0,i.c)(),Jt=(0,i.c)(),ct=Pe("ion-back-button"),_t=Ge(ct).querySelector(".button-text"),Et=Ge(ct).querySelector("ion-icon");ct.text=V.text,ct.mode=V.mode,ct.icon=V.icon,ct.color=V.color,ct.disabled=V.disabled,ct.style.setProperty("display","block"),ct.style.setProperty("position","fixed"),Tt.addElement(Et),xt.addElement(_t),Jt.addElement(ct),Jt.beforeStyles({position:"absolute",top:"0px",[re]:"0px"}).beforeAddWrite(()=>{V.style.setProperty("display","none"),ct.style.setProperty(he,Ne)}).afterAddWrite(()=>{V.style.setProperty("display",""),ct.style.setProperty("display","none"),ct.style.removeProperty(he)}).keyframes(dt),xt.beforeStyles({"transform-origin":`${he} top`}).keyframes(Ft),Tt.beforeStyles({"transform-origin":`${Le} center`}).keyframes(ut),v.addAnimation([xt,Tt,Jt])},p=(v,M,R,V,ce,z,te,K,le)=>{var ae,ve;const Ne=M?"right":"left",he=M?`calc(100% - ${ce.right}px)`:`${ce.left}px`,re=`${ce.top}px`;let Fe=M?`-${window.innerWidth-te.right-8}px`:`${te.x+8}px`,we=.5;const Oe="scale(1)";let Ye=`scale(${we})`;if(K&&le){Fe=M?`-${window.innerWidth-le.right-8}px`:le.x-8+"px";const St=(null===(ae=K.textContent)||void 0===ae?void 0:ae.trim())===(null===(ve=V.textContent)||void 0===ve?void 0:ve.trim());we=le.height/(z.height-y),Ye=St?`scale(${le.width/z.width}, ${we})`:`scale(${we})`}const q=te.top+te.height/2-ce.height*we/2+"px",He=R?[{offset:0,opacity:0,transform:`translate3d(${Fe}, ${q}, 0) ${Ye}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${re}, 0) ${Oe}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${re}, 0) ${Oe}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Fe}, ${q}, 0) ${Ye}`}],tt=Pe("ion-title"),dt=(0,i.c)();tt.innerText=V.innerText,tt.size=V.size,tt.color=V.color,dt.addElement(tt),dt.beforeStyles({"transform-origin":`${Ne} top`,height:`${ce.height}px`,display:"",position:"relative",[Ne]:he}).beforeAddWrite(()=>{V.style.setProperty("opacity","0")}).afterAddWrite(()=>{V.style.setProperty("opacity",""),tt.style.setProperty("display","none")}).keyframes(He),v.addAnimation(dt)},m=(v,M)=>{var R;try{const V="cubic-bezier(0.32,0.72,0,1)",ce="opacity",z="transform",le="rtl"===v.ownerDocument.dir,ae=le?"-99.5%":"99.5%",ve=le?"33%":"-33%",Ne=M.enteringEl,he=M.leavingEl,Le="back"===M.direction,re=Ne.querySelector(":scope > ion-content"),Ke=Ne.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Fe=Ne.querySelectorAll(":scope > ion-header > ion-toolbar"),we=(0,i.c)(),Oe=(0,i.c)();if(we.addElement(Ne).duration((null!==(R=M.duration)&&void 0!==R?R:0)||540).easing(M.easing||V).fill("both").beforeRemoveClass("ion-page-invisible"),he&&null!=v){const q=(0,i.c)();q.addElement(v),we.addAnimation(q)}if(re||0!==Fe.length||0!==Ke.length?(Oe.addElement(re),Oe.addElement(Ke)):Oe.addElement(Ne.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),we.addAnimation(Oe),Le?Oe.beforeClearStyles([ce]).fromTo("transform",`translateX(${ve})`,"translateX(0%)").fromTo(ce,.8,1):Oe.beforeClearStyles([ce]).fromTo("transform",`translateX(${ae})`,"translateX(0%)"),re){const q=Ge(re).querySelector(".transition-effect");if(q){const ge=q.querySelector(".transition-cover"),Ie=q.querySelector(".transition-shadow"),He=(0,i.c)(),tt=(0,i.c)(),dt=(0,i.c)();He.addElement(q).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),tt.addElement(ge).beforeClearStyles([ce]).fromTo(ce,0,.1),dt.addElement(Ie).beforeClearStyles([ce]).fromTo(ce,.03,.7),He.addAnimation([tt,dt]),Oe.addAnimation([He])}}const Ye=Ne.querySelector("ion-header.header-collapse-condense"),{forward:Ve,backward:be}=((v,M,R,V,ce)=>{const z=ie(V,R),te=pe(ce),K=pe(V),le=ie(ce,R),ae=null!==z&&null!==te&&!R,ve=null!==K&&null!==le&&R;if(ae){const Ne=te.getBoundingClientRect(),he=z.getBoundingClientRect(),Le=Ge(z).querySelector(".button-text"),re=Le?.getBoundingClientRect(),Fe=Ge(te).querySelector(".toolbar-title").getBoundingClientRect();p(v,M,R,te,Ne,Fe,he,Le,re),l(v,M,R,z,he,Le,re,te,Fe)}else if(ve){const Ne=K.getBoundingClientRect(),he=le.getBoundingClientRect(),Le=Ge(le).querySelector(".button-text"),re=Le?.getBoundingClientRect(),Fe=Ge(K).querySelector(".toolbar-title").getBoundingClientRect();p(v,M,R,K,Ne,Fe,he,Le,re),l(v,M,R,le,he,Le,re,K,Fe)}return{forward:ae,backward:ve}})(we,le,Le,Ne,he);if(Fe.forEach(q=>{const ge=(0,i.c)();ge.addElement(q),we.addAnimation(ge);const Ie=(0,i.c)();Ie.addElement(q.querySelector("ion-title"));const He=(0,i.c)(),tt=Array.from(q.querySelectorAll("ion-buttons,[menuToggle]")),dt=q.closest("ion-header"),St=dt?.classList.contains("header-collapse-condense-inactive");let vt;vt=tt.filter(Le?xt=>{const Tt=xt.classList.contains("buttons-collapse");return Tt&&!St||!Tt}:xt=>!xt.classList.contains("buttons-collapse")),He.addElement(vt);const Ft=(0,i.c)();Ft.addElement(q.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const lt=(0,i.c)();lt.addElement(Ge(q).querySelector(".toolbar-background"));const Ut=(0,i.c)(),ut=q.querySelector("ion-back-button");if(ut&&Ut.addElement(ut),ge.addAnimation([Ie,He,Ft,lt,Ut]),He.fromTo(ce,.01,1),Ft.fromTo(ce,.01,1),Le)St||Ie.fromTo("transform",`translateX(${ve})`,"translateX(0%)").fromTo(ce,.01,1),Ft.fromTo("transform",`translateX(${ve})`,"translateX(0%)"),Ut.fromTo(ce,.01,1);else if(Ye||Ie.fromTo("transform",`translateX(${ae})`,"translateX(0%)").fromTo(ce,.01,1),Ft.fromTo("transform",`translateX(${ae})`,"translateX(0%)"),lt.beforeClearStyles([ce,"transform"]),dt?.translucent?lt.fromTo("transform",le?"translateX(-100%)":"translateX(100%)","translateX(0px)"):lt.fromTo(ce,.01,"var(--opacity)"),Ve||Ut.fromTo(ce,.01,1),ut&&!Ve){const Tt=(0,i.c)();Tt.addElement(Ge(ut).querySelector(".button-text")).fromTo("transform",le?"translateX(-100px)":"translateX(100px)","translateX(0px)"),ge.addAnimation(Tt)}}),he){const q=(0,i.c)(),ge=he.querySelector(":scope > ion-content"),Ie=he.querySelectorAll(":scope > ion-header > ion-toolbar"),He=he.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(ge||0!==Ie.length||0!==He.length?(q.addElement(ge),q.addElement(He)):q.addElement(he.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),we.addAnimation(q),Le){q.beforeClearStyles([ce]).fromTo("transform","translateX(0%)",le?"translateX(-100%)":"translateX(100%)");const tt=(0,o.g)(he);we.afterAddWrite(()=>{"normal"===we.getDirection()&&tt.style.setProperty("display","none")})}else q.fromTo("transform","translateX(0%)",`translateX(${ve})`).fromTo(ce,1,.8);if(ge){const tt=Ge(ge).querySelector(".transition-effect");if(tt){const dt=tt.querySelector(".transition-cover"),St=tt.querySelector(".transition-shadow"),vt=(0,i.c)(),Ft=(0,i.c)(),lt=(0,i.c)();vt.addElement(tt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Ft.addElement(dt).beforeClearStyles([ce]).fromTo(ce,.1,0),lt.addElement(St).beforeClearStyles([ce]).fromTo(ce,.7,.03),vt.addAnimation([Ft,lt]),q.addAnimation([vt])}}Ie.forEach(tt=>{const dt=(0,i.c)();dt.addElement(tt);const St=(0,i.c)();St.addElement(tt.querySelector("ion-title"));const vt=(0,i.c)(),Ft=tt.querySelectorAll("ion-buttons,[menuToggle]"),lt=tt.closest("ion-header"),Ut=lt?.classList.contains("header-collapse-condense-inactive"),ut=Array.from(Ft).filter(Et=>{const Xt=Et.classList.contains("buttons-collapse");return Xt&&!Ut||!Xt});vt.addElement(ut);const xt=(0,i.c)(),Tt=tt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Tt.length>0&&xt.addElement(Tt);const Jt=(0,i.c)();Jt.addElement(Ge(tt).querySelector(".toolbar-background"));const ct=(0,i.c)(),_t=tt.querySelector("ion-back-button");if(_t&&ct.addElement(_t),dt.addAnimation([St,vt,xt,ct,Jt]),we.addAnimation(dt),ct.fromTo(ce,.99,0),vt.fromTo(ce,.99,0),xt.fromTo(ce,.99,0),Le){if(Ut||St.fromTo("transform","translateX(0%)",le?"translateX(-100%)":"translateX(100%)").fromTo(ce,.99,0),xt.fromTo("transform","translateX(0%)",le?"translateX(-100%)":"translateX(100%)"),Jt.beforeClearStyles([ce,"transform"]),lt?.translucent?Jt.fromTo("transform","translateX(0px)",le?"translateX(-100%)":"translateX(100%)"):Jt.fromTo(ce,"var(--opacity)",0),_t&&!be){const Xt=(0,i.c)();Xt.addElement(Ge(_t).querySelector(".button-text")).fromTo("transform","translateX(0%)",`translateX(${(le?-124:124)+"px"})`),dt.addAnimation(Xt)}}else Ut||St.fromTo("transform","translateX(0%)",`translateX(${ve})`).fromTo(ce,.99,0).afterClearStyles([z,ce]),xt.fromTo("transform","translateX(0%)",`translateX(${ve})`).afterClearStyles([z,ce]),ct.afterClearStyles([ce]),St.afterClearStyles([ce]),vt.afterClearStyles([ce])})}return we}catch(V){throw V}},y=10},591($t,ot,b){"use strict";function i(o){return new TypeError(`You provided ${null!==o&&"object"==typeof o?"an invalid object":`'${o}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}b.d(ot,{L:()=>i})},752($t,ot,b){"use strict";b.d(ot,{P:()=>Ge});var i=b(467),o=b(2084),D=b(2615),Ce=b(918),De=b(5029),B=b(4938),Pe=b(8863);let Ge=(()=>{var pe;class ie{constructor(l,p,m,y){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=y,this.REPORTS_BUCKET="biomass",this.IMAGES_BUCKET="biomass-images",this.DRAFT_FILE="biomass_draft_current.json",this.PENDING_QUEUE_FILE="biomass_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} BiomassSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} BiomassSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(v=>console.error("\u274c BiomassSyncService: processPendingQueue failed:",v))}),setTimeout(()=>{console.log("\u{1f680} BiomassSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(v=>console.error("\u274c BiomassSyncService: Initial queue check failed:",v))},6e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 BiomassSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(v=>console.error("\u274c BiomassSyncService: Periodic queue check failed:",v))},3e5),console.log("\u2705 BiomassSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Biomass${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];return l?.vegetationType&&m.push(`Vegetation: ${l.vegetationType}`),l?.biomassEstimate&&m.push(`Biomass: ${l.biomassEstimate}`),l?.samplingMethod&&m.push(`Method: ${l.samplingMethod}`),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"biomass"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",y=l?.quadNumber||"";let v=`biomass_draft_${p}`;return m&&(v+=`_zone${m}`),y&&(v+=`_quad${y}`),`${v}.json`}dataUrlToBlob(l){return(0,i.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,i.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,i.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("BiomassSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=l.reportId||p.generateReportId(),v={reportId:y,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos||[],status:l.status||{incomplete:!0,sent:!1,pending:!1}},M=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(M,v);const R=yield p.sharedDataService.readJsonFile(M);if(!R||R.reportId!==v.reportId)throw new Error("BiomassSyncService: draft verification failed");const V=yield p.storage.getUser(),ce=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(V?.username||"unknown","biomass",y,ce)})()}loadDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,i.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(v=>v.startsWith("biomass_draft_")),y=[];for(const v of m)try{const M=yield l.sharedDataService.readJsonFile(v);if(M){const R=l.getLocationLabelFromFilename(v,M.form);y.push({draft:M,locationLabel:R})}}catch(M){console.warn("BiomassSyncService: Failed to read draft file",v,M)}return y})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,i.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,i.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:y}of m)p.push({report:y,status:"draft"});try{const v=(yield l.sharedDataService.listFiles()).filter(M=>{if(!M.startsWith("Biomass")||M.includes("_report_"))return!1;const R=M.replace(".json","");return/^Biomass\d{8}_\d{6}$/.test(R)&&!M.includes("_backup")&&!M.includes("_draft")&&!M.includes("_queue")});for(const M of v)try{const R=yield l.sharedDataService.readJsonFile(M);R&&p.push({report:R,status:R.status.sent?"submitted":"pending"})}catch(R){console.warn("BiomassSyncService: Failed to read report file",M,R)}}catch(y){console.error("BiomassSyncService: Failed to list files:",y)}return p.sort((y,v)=>{const M=new Date(y.report.updatedAt||y.report.createdAt).getTime();return new Date(v.report.updatedAt||v.report.createdAt).getTime()-M}),p})()}submitFinal(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=!0===l.isEditMode,v=l.existingReportId||p.generateReportId();let M=m;try{const ae=yield p.sharedDataService.readJsonFile(`${v}.json`);ae?.createdAt&&(M=ae.createdAt)}catch{}const R={reportId:v,createdAt:M,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:[...l.photos||[]],status:{incomplete:!1,sent:!1,pending:!1}};y&&(R.editedAt=m);const V=`${v}.json`;yield p.sharedDataService.writeJsonFile(V,R);const ce=yield p.sharedDataService.readJsonFile(V);if(!ce||ce.reportId!==v)throw new Error("BiomassSyncService: local report verification failed");const z=yield p.storage.getUser(),te=z?z.organization||z.username:null;let K;if(l.originalSubmittedBy&&te&&l.originalSubmittedBy!==te?K=`${l.originalSubmittedBy}, ${te}`:te&&(K=te),R.submittedBy=K,yield p.sharedDataService.writeJsonFile(V,R),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:v,localReportFile:V}),{reportId:v,queued:!0};try{yield p.uploadReportAndImages(R,l.originalSubmittedBy),R.status.sent=!0,R.status.pending=!1,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.clearDraft();const ve=(yield p.storage.getUser())?.username||"unknown",Ne=p.getFormSummary(l.formValue),he=R.submittedBy;return y?p.monitoringLog.recordFormEdited(ve,"biomass",v,!1,Ne,he):p.monitoringLog.recordFormSubmitted(ve,"biomass",v,!1,Ne,he),{reportId:v,queued:!1}}catch(ae){const ve=String(ae?.message?ae.message:ae);R.status.pending=!0,R.status.lastError=ve,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.enqueuePending({reportId:v,localReportFile:V});const he=(yield p.storage.getUser())?.username||"unknown",Le=p.getFormSummary(l.formValue),re=R.submittedBy;return y?p.monitoringLog.recordFormEdited(he,"biomass",v,!0,Le,re):p.monitoringLog.recordFormSubmitted(he,"biomass",v,!0,Le,re),{reportId:v,queued:!0}}})()}enqueuePending(l){var p=this;return(0,i.A)(function*(){console.log("\u{1f4dd} BiomassSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(v=>v.reportId===l.reportId)?console.log("\u26a0\ufe0f BiomassSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 BiomassSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} BiomassSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,i.A)(function*(){if(console.log("\u{1f504} BiomassSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f BiomassSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f BiomassSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} BiomassSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 BiomassSyncService: Queue is empty, nothing to process");const m=[];for(const y of p.items){console.log("\u{1f50d} BiomassSyncService: Processing item:",y.reportId,"(attempt",y.attempts+1,")");try{const v=yield l.sharedDataService.readJsonFile(y.localReportFile);if(!v){console.error("\u274c BiomassSyncService: Local report file missing for",y.reportId),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(v),console.log("\u2705 BiomassSyncService: Upload succeeded for",y.reportId),v.status.sent=!0,v.status.pending=!1,v.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(y.localReportFile,v),console.log("\u{1f4be} BiomassSyncService: Marked report as sent")}catch(v){console.error("\u274c BiomassSyncService: Upload failed for",y.reportId,":",v),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} BiomassSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} BiomassSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,i.A)(function*(){console.log("\u{1f4e4} BiomassSyncService: Starting upload for report",l.reportId);const y=m.getClient(),v=[];for(let le=0;le<(l.photos||[]).length;le++){const ae=l.photos[le],ve=yield m.uploadImageDataUrl(`${l.reportId}/photo_${le+1}.jpg`,ae);v.push(ve)}const M=JSON.parse(JSON.stringify(l));M.photos=v,M.status={incomplete:!1,sent:!0,pending:!1};const R=`${l.reportId}.json`,V=new Blob([JSON.stringify(M)],{type:"application/json"}),{error:ce}=yield y.storage.from(m.REPORTS_BUCKET).upload(R,V,{contentType:"application/json",upsert:!0});if(ce)throw console.error("\u274c BiomassSyncService: JSON upload error:",ce),ce;console.log("\u2705 BiomassSyncService: Successfully uploaded JSON to",R);let z=l.submittedBy||null;if(!z){const le=yield m.storage.getUser();z=le?le.organization||le.username:null}const te={report_id:l.reportId,submitted_by:z,json_path:R,location:l.form.location||null,Biomass_date:l.form.observationDate||null,zone_number:l.form.zoneNumber?`Zone ${l.form.zoneNumber}`:null,quad_number:l.form.quadNumber?`Quad ${l.form.quadNumber.replace(/\D/g,"")}`:null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:K}=yield y.from("biomass_reports").upsert(te,{onConflict:"report_id"});if(K)throw console.error("\u274c BiomassSyncService: Database upsert error:",K),K;console.log("\u2705 BiomassSyncService: Successfully upserted into Biomass_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,i.A)(function*(){const y=m.getClient(),v=yield m.dataUrlToBlob(p),{error:M}=yield y.storage.from(m.IMAGES_BUCKET).upload(l,v,{contentType:v.type||"image/jpeg",upsert:!0});if(M)throw console.error("\u274c BiomassSyncService: Image upload error for",l,":",M),M;return console.log("\u2705 BiomassSyncService: Successfully uploaded image to",l),l})()}static#e=pe=()=>(this.\u0275fac=function(p){return new(p||ie)(D.KVO(Ce.H),D.KVO(De.L),D.KVO(B.w),D.KVO(Pe.u))},this.\u0275prov=D.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return pe(),ie})()},918($t,ot,b){"use strict";b.d(ot,{H:()=>De});var i=b(467),o=b(5083),D=b(2739),Ce=b(2615);let De=(()=>{var B;class Pe{constructor(){this.dbName="leapWetlandDatabase",this.dbVersion=1,this.defaultStoreName="leapDataStore",this.storesToEnsure=["leapDataStore","uploadProgress","pending_forms_metadata"],this.dbOpenPromise=null}isMobileFilesystemPlatform(){return(0,i.A)(function*(){const pe=o.Capacitor.getPlatform();return"ios"===pe||"android"===pe})()}openDb(){var pe=this;return(0,i.A)(function*(){return pe.dbOpenPromise||(pe.dbOpenPromise=new Promise((ie,Ae)=>{const l=indexedDB.open(pe.dbName,pe.dbVersion);l.onupgradeneeded=p=>{const m=p.target.result;pe.storesToEnsure.forEach(y=>{m.objectStoreNames.contains(y)||m.createObjectStore(y,{keyPath:"fileName"})})},l.onsuccess=p=>{const m=p.target.result;m.onclose=()=>{pe.dbOpenPromise=null},m.onversionchange=()=>{try{m.close()}finally{pe.dbOpenPromise=null}},ie(m)},l.onerror=p=>{Ae(p.target.error)},l.onblocked=()=>{Ae(new Error("IndexedDB open blocked"))}})),pe.dbOpenPromise})()}checkAndCreateDataStore(){var pe=this;return(0,i.A)(function*(){yield pe.openDb()})()}blobToString(pe){return(0,i.A)(function*(){return yield pe.text()})()}readdir(){return(0,i.A)(function*(){try{const ie=((yield D.Filesystem.readdir({directory:D.Directory.External,path:"Leap Wetland Monitoring"})).files||[]).map(Ae=>"string"==typeof Ae?Ae:Ae.name);return console.log("\u{1f4c2} SharedDataService: Files in secure directory:",ie),ie}catch(pe){return console.log("\u{1f4c2} SharedDataService: Directory not found or empty, error:",pe),[]}})()}verifyIfExists(pe,ie){return ie.includes(pe)}writeJsonFile(pe,ie){var Ae=this;return(0,i.A)(function*(){if(yield Ae.isMobileFilesystemPlatform()){const l=`Leap Wetland Monitoring/${pe}`;try{yield D.Filesystem.mkdir({path:"Leap Wetland Monitoring",directory:D.Directory.External,recursive:!0})}catch(p){console.log("Directory already exists or created:",p)}return void(yield D.Filesystem.writeFile({path:l,directory:D.Directory.External,encoding:D.Encoding.UTF8,data:JSON.stringify(ie)}))}yield Ae.saveDataToIndexedDB(pe,JSON.stringify(ie))})()}readJsonFile(pe){var ie=this;return(0,i.A)(function*(){if(yield ie.isMobileFilesystemPlatform())try{const l=`Leap Wetland Monitoring/${pe}`,p=yield ie.readdir();if(!ie.verifyIfExists(pe,p))return null;const m=yield D.Filesystem.readFile({path:l,directory:D.Directory.External,encoding:D.Encoding.UTF8}),y="string"==typeof m.data?m.data:yield ie.blobToString(m.data);return JSON.parse(y)}catch{return null}const Ae=yield ie.getDataFromIndexedDB(pe);if(null==Ae)return null;if("string"==typeof Ae)try{return JSON.parse(Ae)}catch{return Ae}return Ae})()}deleteJsonFile(pe){var ie=this;return(0,i.A)(function*(){if(yield ie.isMobileFilesystemPlatform())try{const Ae=`Leap Wetland Monitoring/${pe}`;yield D.Filesystem.deleteFile({path:Ae,directory:D.Directory.External}),console.log(`SharedDataService: Successfully deleted file: ${Ae}`)}catch(Ae){throw console.error(`SharedDataService: Failed to delete file ${pe}:`,Ae),Ae}else try{yield ie.deleteDataFromIndexedDB(pe),console.log(`SharedDataService: Successfully deleted from IndexedDB: ${pe}`)}catch(Ae){throw console.error(`SharedDataService: Failed to delete from IndexedDB ${pe}:`,Ae),Ae}})()}listFiles(){var pe=this;return(0,i.A)(function*(){if(yield pe.isMobileFilesystemPlatform())return yield pe.readdir();yield pe.checkAndCreateDataStore();const ie=yield pe.openDb();return yield new Promise((Ae,l)=>{const y=ie.transaction(pe.defaultStoreName,"readonly").objectStore(pe.defaultStoreName).getAllKeys();y.onsuccess=()=>{Ae((y.result||[]).map(String))},y.onerror=()=>{l(y.error)}})})()}saveDataToIndexedDB(pe,ie){var Ae=this;return(0,i.A)(function*(){yield Ae.checkAndCreateDataStore();const l=yield Ae.openDb();yield new Promise((p,m)=>{const y=l.transaction(Ae.defaultStoreName,"readwrite"),v=y.objectStore(Ae.defaultStoreName);let M=ie;if("string"==typeof ie&&(ie.trim().startsWith("{")||ie.trim().startsWith("[")))try{M=JSON.parse(ie)}catch{M=ie}v.put({fileName:pe,content:M}),y.oncomplete=()=>p(),y.onerror=()=>m(y.error),y.onabort=()=>m(y.error)})})()}getDataFromIndexedDB(pe){var ie=this;return(0,i.A)(function*(){yield ie.checkAndCreateDataStore();const Ae=yield ie.openDb();return yield new Promise((l,p)=>{const v=Ae.transaction(ie.defaultStoreName,"readonly").objectStore(ie.defaultStoreName).get(pe);v.onsuccess=()=>{const M=v.result;l(M?M.content:null)},v.onerror=()=>{p(v.error)}})})()}deleteDataFromIndexedDB(pe){var ie=this;return(0,i.A)(function*(){yield ie.checkAndCreateDataStore();const Ae=yield ie.openDb();yield new Promise((l,p)=>{const m=Ae.transaction(ie.defaultStoreName,"readwrite");m.objectStore(ie.defaultStoreName).delete(pe),m.oncomplete=()=>l(),m.onerror=()=>p(m.error),m.onabort=()=>p(m.error)})})()}static#e=B=()=>(this.\u0275fac=function(ie){return new(ie||Pe)},this.\u0275prov=Ce.jDH({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}))}return B(),Pe})()},980($t,ot,b){"use strict";b.d(ot,{j:()=>o});var i=b(9974);function o(D){return(0,i.N)((Ce,De)=>{try{Ce.subscribe(De)}finally{De.add(D)}})}},983($t,ot,b){"use strict";b.d(ot,{w:()=>o});const o=new(b(1985).c)(De=>De.complete())},1026($t,ot,b){"use strict";b.d(ot,{$:()=>i});const i={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},1084($t,ot,b){"use strict";b.d(ot,{G:()=>Ge});var i=b(467),o=b(2084),D=b(2615),Ce=b(918),De=b(5029),B=b(4938),Pe=b(8863);let Ge=(()=>{var pe;class ie{constructor(l,p,m,y){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=y,this.REPORTS_BUCKET="flora-fauna",this.IMAGES_BUCKET="flora-fauna-images",this.DRAFT_FILE="flora_fauna_draft_current.json",this.PENDING_QUEUE_FILE="flora_fauna_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} FloraFaunaSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} FloraFaunaSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(v=>console.error("\u274c FloraFaunaSyncService: processPendingQueue failed:",v))}),setTimeout(()=>{console.log("\u{1f680} FloraFaunaSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(v=>console.error("\u274c FloraFaunaSyncService: Initial queue check failed:",v))},4e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 FloraFaunaSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(v=>console.error("\u274c FloraFaunaSyncService: Periodic queue check failed:",v))},3e5),console.log("\u2705 FloraFaunaSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}getZoneName(l){return l?`Zone ${l}`:""}getQuadDisplay(l){if(!l)return"";const p=l.match(/\d+/);return p?`Quad ${p[0]}`:""}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`FloraFauna${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];if(l?.mangroves&&Array.isArray(l.mangroves)){const y=l.mangroves.filter(v=>v.numAdults>0||v.recruitsPresent).length;y>0&&m.push(`${y} mangrove spp`)}if(l?.otherFlora&&Array.isArray(l.otherFlora)){const y=l.otherFlora.length;y>0&&m.push(`${y} flora spp`)}if(l?.fauna&&Array.isArray(l.fauna)){const y=l.fauna.length;y>0&&m.push(`${y} fauna spp`)}return m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"flora-fauna"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",y=l?.quadNumber||"";let v=`flora_fauna_draft_${p}`;return m&&(v+=`_zone${m}`),y&&(v+=`_quad${y}`),`${v}.json`}dataUrlToBlob(l){return(0,i.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,i.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,i.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("FloraFaunaSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=l.reportId||p.generateReportId(),v={reportId:y,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos||[],status:l.status||{incomplete:!0,sent:!1,pending:!1}},M=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(M,v);const R=yield p.sharedDataService.readJsonFile(M);if(!R||R.reportId!==v.reportId)throw new Error("FloraFaunaSyncService: draft verification failed");const V=yield p.storage.getUser(),ce=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(V?.username||"unknown","flora-fauna",y,ce)})()}loadDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,i.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(v=>v.startsWith("flora_fauna_draft_")),y=[];for(const v of m)try{const M=yield l.sharedDataService.readJsonFile(v);if(M){const R=l.getLocationLabelFromFilename(v,M.form);y.push({draft:M,locationLabel:R})}}catch(M){console.warn("FloraFaunaSyncService: Failed to read draft file",v,M)}return y})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,i.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,i.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:y}of m)p.push({report:y,status:"draft"});try{const y=yield l.sharedDataService.listFiles();console.log("\u{1f4c1} FloraFaunaSyncService: All files found:",y);const v=y.filter(M=>{if(!M.startsWith("FloraFauna")||M.includes("_report_"))return!1;const R=M.replace(".json","");return/^FloraFauna\d{8}_\d{6}$/.test(R)&&!M.includes("_backup")&&!M.includes("_draft")&&!M.includes("_queue")});console.log("\u{1f4cb} FloraFaunaSyncService: Filtered report files:",v);for(const M of v)try{const R=yield l.sharedDataService.readJsonFile(M);R&&p.push({report:R,status:R.status.sent?"submitted":"pending"})}catch(R){console.warn("FloraFaunaSyncService: Failed to read report file",M,R)}}catch(y){console.error("FloraFaunaSyncService: Failed to list files:",y)}return p.sort((y,v)=>{const M=new Date(y.report.updatedAt||y.report.createdAt).getTime();return new Date(v.report.updatedAt||v.report.createdAt).getTime()-M}),p})()}submitFinal(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=!0===l.isEditMode,v=l.existingReportId||p.generateReportId();let M=m;try{const ae=yield p.sharedDataService.readJsonFile(`${v}.json`);ae?.createdAt&&(M=ae.createdAt)}catch{}const R={reportId:v,createdAt:M,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:[...l.photos||[]],status:{incomplete:!1,sent:!1,pending:!1}};y&&(R.editedAt=m);const V=`${v}.json`;yield p.sharedDataService.writeJsonFile(V,R);const ce=yield p.sharedDataService.readJsonFile(V);if(!ce||ce.reportId!==v)throw new Error("FloraFaunaSyncService: local report verification failed");const z=yield p.storage.getUser(),te=z?z.organization||z.username:null;let K;if(l.originalSubmittedBy&&te&&l.originalSubmittedBy!==te?K=`${l.originalSubmittedBy}, ${te}`:te&&(K=te),R.submittedBy=K,yield p.sharedDataService.writeJsonFile(V,R),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:v,localReportFile:V}),{reportId:v,queued:!0};try{yield p.uploadReportAndImages(R,l.originalSubmittedBy),R.status.sent=!0,R.status.pending=!1,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.clearDraft();const ve=(yield p.storage.getUser())?.username||"unknown",Ne=p.getFormSummary(l.formValue),he=R.submittedBy;return y?p.monitoringLog.recordFormEdited(ve,"flora-fauna",v,!1,Ne,he):p.monitoringLog.recordFormSubmitted(ve,"flora-fauna",v,!1,Ne,he),{reportId:v,queued:!1}}catch(ae){const ve=String(ae?.message?ae.message:ae);R.status.pending=!0,R.status.lastError=ve,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.enqueuePending({reportId:v,localReportFile:V});const he=(yield p.storage.getUser())?.username||"unknown",Le=p.getFormSummary(l.formValue),re=R.submittedBy;return y?p.monitoringLog.recordFormEdited(he,"flora-fauna",v,!0,Le,re):p.monitoringLog.recordFormSubmitted(he,"flora-fauna",v,!0,Le,re),{reportId:v,queued:!0}}})()}enqueuePending(l){var p=this;return(0,i.A)(function*(){console.log("\u{1f4dd} FloraFaunaSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(v=>v.reportId===l.reportId)?console.log("\u26a0\ufe0f FloraFaunaSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 FloraFaunaSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} FloraFaunaSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,i.A)(function*(){if(console.log("\u{1f504} FloraFaunaSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f FloraFaunaSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f FloraFaunaSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} FloraFaunaSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 FloraFaunaSyncService: Queue is empty, nothing to process");const m=[];for(const y of p.items){console.log("\u{1f50d} FloraFaunaSyncService: Processing item:",y.reportId,"(attempt",y.attempts+1,")");try{const v=yield l.sharedDataService.readJsonFile(y.localReportFile);if(!v){console.error("\u274c FloraFaunaSyncService: Local report file missing for",y.reportId),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(v),console.log("\u2705 FloraFaunaSyncService: Upload succeeded for",y.reportId),v.status.sent=!0,v.status.pending=!1,v.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(y.localReportFile,v),console.log("\u{1f4be} FloraFaunaSyncService: Marked report as sent")}catch(v){console.error("\u274c FloraFaunaSyncService: Upload failed for",y.reportId,":",v),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} FloraFaunaSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} FloraFaunaSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,i.A)(function*(){console.log("\u{1f4e4} FloraFaunaSyncService: Starting upload for report",l.reportId);const y=m.getClient(),v=[];for(let le=0;le<(l.photos||[]).length;le++){const ae=l.photos[le],ve=yield m.uploadImageDataUrl(`${l.reportId}/photo_${le+1}.jpg`,ae);v.push(ve)}const M=JSON.parse(JSON.stringify(l));M.photos=v,M.status={incomplete:!1,sent:!0,pending:!1};const R=`${l.reportId}.json`,V=new Blob([JSON.stringify(M)],{type:"application/json"}),{error:ce}=yield y.storage.from(m.REPORTS_BUCKET).upload(R,V,{contentType:"application/json",upsert:!0});if(ce)throw console.error("\u274c FloraFaunaSyncService: JSON upload error:",ce),ce;console.log("\u2705 FloraFaunaSyncService: Successfully uploaded JSON to",R);let z=l.submittedBy||null;if(!z){const le=yield m.storage.getUser();z=le?le.organization||le.username:null}const te={report_id:l.reportId,submitted_by:z,json_path:R,location:l.form.location||null,assessment_date:l.form.observationDate||null,zone_number:m.getZoneName(l.form.zoneNumber)||null,quad_number:m.getQuadDisplay(l.form.quadNumber)||null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:K}=yield y.from("flora_fauna_reports").upsert(te,{onConflict:"report_id"});if(K)throw console.error("\u274c FloraFaunaSyncService: Database upsert error:",K),K;console.log("\u2705 FloraFaunaSyncService: Successfully upserted into flora_fauna_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,i.A)(function*(){const y=m.getClient(),v=yield m.dataUrlToBlob(p),{error:M}=yield y.storage.from(m.IMAGES_BUCKET).upload(l,v,{contentType:v.type||"image/jpeg",upsert:!0});if(M)throw console.error("\u274c FloraFaunaSyncService: Image upload error for",l,":",M),M;return console.log("\u2705 FloraFaunaSyncService: Successfully uploaded image to",l),l})()}static#e=pe=()=>(this.\u0275fac=function(p){return new(p||ie)(D.KVO(Ce.H),D.KVO(De.L),D.KVO(B.w),D.KVO(Pe.u))},this.\u0275prov=D.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return pe(),ie})()},1169($t,ot,b){var i={"./pwa-action-sheet.entry.js":[6301,6301],"./pwa-camera-modal-instance.entry.js":[5640,5640],"./pwa-camera-modal.entry.js":[2982,2982],"./pwa-camera.entry.js":[6086,6086],"./pwa-toast.entry.js":[3574,3574]};function o(D){if(!b.o(i,D))return Promise.resolve().then(()=>{var B=new Error("Cannot find module '"+D+"'");throw B.code="MODULE_NOT_FOUND",B});var Ce=i[D],De=Ce[0];return b.e(Ce[1]).then(()=>b(De))}o.keys=()=>Object.keys(i),o.id=1169,$t.exports=o},1203($t,ot,b){"use strict";b.d(ot,{F:()=>o,m:()=>D});var i=b(3669);function o(...Ce){return D(Ce)}function D(Ce){return 0===Ce.length?i.D:1===Ce.length?Ce[0]:function(B){return Ce.reduce((Pe,Ge)=>Ge(Pe),B)}}},1288($t,ot,b){"use strict";b.d(ot,{H:()=>R,b:()=>Cn,c:()=>te,f:()=>ut,g:()=>z,h:()=>v,p:()=>gr,r:()=>Dn});var i=b(467);let D,Ce,De=!1,B=!1;const ie={},m=qe=>"object"==(qe=typeof qe)||"function"===qe;function y(qe){var Je,Ct,mt;return null!==(mt=null===(Ct=null===(Je=qe.head)||void 0===Je?void 0:Je.querySelector('meta[name="csp-nonce"]'))||void 0===Ct?void 0:Ct.getAttribute("content"))&&void 0!==mt?mt:void 0}const v=(qe,Je,...Ct)=>{let mt=null,kt=!1,jt=!1;const Kt=[],tn=nn=>{for(let Wn=0;Wn<nn.length;Wn++)mt=nn[Wn],Array.isArray(mt)?tn(mt):null!=mt&&"boolean"!=typeof mt&&((kt="function"!=typeof qe&&!m(mt))&&(mt=String(mt)),kt&&jt?Kt[Kt.length-1].$text$+=mt:Kt.push(kt?M(null,mt):mt),jt=kt)};if(tn(Ct),Je){const nn=Je.className||Je.class;nn&&(Je.class="object"!=typeof nn?nn:Object.keys(nn).filter(Wn=>nn[Wn]).join(" "))}const rn=M(qe,null);return rn.$attrs$=Je,Kt.length>0&&(rn.$children$=Kt),rn},M=(qe,Je)=>({$flags$:0,$tag$:qe,$text$:Je,$elm$:null,$children$:null,$attrs$:null}),R={},z=qe=>cn(qe).$hostElement$,te=(qe,Je,Ct)=>{const mt=z(qe);return{emit:kt=>K(mt,Je,{bubbles:!!(4&Ct),composed:!!(2&Ct),cancelable:!!(1&Ct),detail:kt})}},K=(qe,Je,Ct)=>{const mt=qn.ce(Je,Ct);return qe.dispatchEvent(mt),mt},le=new WeakMap,he=(qe,Je)=>"sc-"+qe.$tagName$,Le=(qe,Je,Ct,mt,kt,jt)=>{if(Ct!==mt){let Kt=Qn(qe,Je),tn=Je.toLowerCase();if("class"===Je){const rn=qe.classList,nn=Ke(Ct),Wn=Ke(mt);rn.remove(...nn.filter(An=>An&&!Wn.includes(An))),rn.add(...Wn.filter(An=>An&&!nn.includes(An)))}else if("style"===Je){for(const rn in Ct)(!mt||null==mt[rn])&&(rn.includes("-")?qe.style.removeProperty(rn):qe.style[rn]="");for(const rn in mt)(!Ct||mt[rn]!==Ct[rn])&&(rn.includes("-")?qe.style.setProperty(rn,mt[rn]):qe.style[rn]=mt[rn])}else if("ref"===Je)mt&&mt(qe);else if(Kt||"o"!==Je[0]||"n"!==Je[1]){const rn=m(mt);if((Kt||rn&&null!==mt)&&!kt)try{if(qe.tagName.includes("-"))qe[Je]=mt;else{const nn=mt??"";"list"===Je?Kt=!1:(null==Ct||qe[Je]!=nn)&&(qe[Je]=nn)}}catch{}null==mt||!1===mt?(!1!==mt||""===qe.getAttribute(Je))&&qe.removeAttribute(Je):(!Kt||4&jt||kt)&&!rn&&qe.setAttribute(Je,mt=!0===mt?"":mt)}else Je="-"===Je[2]?Je.slice(3):Qn(_r,tn)?tn.slice(2):tn[2]+Je.slice(3),Ct&&qn.rel(qe,Je,Ct,!1),mt&&qn.ael(qe,Je,mt,!1)}},re=/\s/,Ke=qe=>qe?qe.split(re):[],Fe=(qe,Je,Ct,mt)=>{const kt=11===Je.$elm$.nodeType&&Je.$elm$.host?Je.$elm$.host:Je.$elm$,jt=qe&&qe.$attrs$||ie,Kt=Je.$attrs$||ie;for(mt in jt)mt in Kt||Le(kt,mt,jt[mt],void 0,Ct,Je.$flags$);for(mt in Kt)Le(kt,mt,jt[mt],Kt[mt],Ct,Je.$flags$)},we=(qe,Je,Ct,mt)=>{const kt=Je.$children$[Ct];let Kt,tn,jt=0;if(null!==kt.$text$)Kt=kt.$elm$=Gn.createTextNode(kt.$text$);else{if(De||(De="svg"===kt.$tag$),Kt=kt.$elm$=Gn.createElementNS(De?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",kt.$tag$),De&&"foreignObject"===kt.$tag$&&(De=!1),Fe(null,kt,De),(qe=>null!=qe)(D)&&Kt["s-si"]!==D&&Kt.classList.add(Kt["s-si"]=D),kt.$children$)for(jt=0;jt<kt.$children$.length;++jt)tn=we(qe,kt,jt),tn&&Kt.appendChild(tn);"svg"===kt.$tag$?De=!1:"foreignObject"===Kt.tagName&&(De=!0)}return Kt},Oe=(qe,Je,Ct,mt,kt,jt)=>{let tn,Kt=qe;for(Kt.shadowRoot&&Kt.tagName===Ce&&(Kt=Kt.shadowRoot);kt<=jt;++kt)mt[kt]&&(tn=we(null,Ct,kt),tn&&(mt[kt].$elm$=tn,Kt.insertBefore(tn,Je)))},Ye=(qe,Je,Ct)=>{for(let mt=Je;mt<=Ct;++mt){const kt=qe[mt];if(kt){const jt=kt.$elm$;ge(kt),jt&&jt.remove()}}},be=(qe,Je)=>qe.$tag$===Je.$tag$,q=(qe,Je)=>{const Ct=Je.$elm$=qe.$elm$,mt=qe.$children$,kt=Je.$children$,jt=Je.$tag$,Kt=Je.$text$;null===Kt?(De="svg"===jt||"foreignObject"!==jt&&De,Fe(qe,Je,De),null!==mt&&null!==kt?((qe,Je,Ct,mt)=>{let er,kt=0,jt=0,Kt=Je.length-1,tn=Je[0],rn=Je[Kt],nn=mt.length-1,Wn=mt[0],An=mt[nn];for(;kt<=Kt&&jt<=nn;)null==tn?tn=Je[++kt]:null==rn?rn=Je[--Kt]:null==Wn?Wn=mt[++jt]:null==An?An=mt[--nn]:be(tn,Wn)?(q(tn,Wn),tn=Je[++kt],Wn=mt[++jt]):be(rn,An)?(q(rn,An),rn=Je[--Kt],An=mt[--nn]):be(tn,An)?(q(tn,An),qe.insertBefore(tn.$elm$,rn.$elm$.nextSibling),tn=Je[++kt],An=mt[--nn]):be(rn,Wn)?(q(rn,Wn),qe.insertBefore(rn.$elm$,tn.$elm$),rn=Je[--Kt],Wn=mt[++jt]):(er=we(Je&&Je[jt],Ct,jt),Wn=mt[++jt],er&&tn.$elm$.parentNode.insertBefore(er,tn.$elm$));kt>Kt?Oe(qe,null==mt[nn+1]?null:mt[nn+1].$elm$,Ct,mt,jt,nn):jt>nn&&Ye(Je,kt,Kt)})(Ct,mt,Je,kt):null!==kt?(null!==qe.$text$&&(Ct.textContent=""),Oe(Ct,null,Je,kt,0,kt.length-1)):null!==mt&&Ye(mt,0,mt.length-1),De&&"svg"===jt&&(De=!1)):qe.$text$!==Kt&&(Ct.data=Kt)},ge=qe=>{qe.$attrs$&&qe.$attrs$.ref&&qe.$attrs$.ref(null),qe.$children$&&qe.$children$.map(ge)},He=(qe,Je)=>{Je&&!qe.$onRenderResolve$&&Je["s-p"]&&Je["s-p"].push(new Promise(Ct=>qe.$onRenderResolve$=Ct))},tt=(qe,Je)=>{if(qe.$flags$|=16,!(4&qe.$flags$))return He(qe,qe.$ancestorComponent$),vn(()=>dt(qe,Je));qe.$flags$|=512},dt=(qe,Je)=>{const mt=qe.$lazyInstance$;return Je&&(qe.$flags$|=256,qe.$queuedListeners$&&(qe.$queuedListeners$.map(([jt,Kt])=>Tt(mt,jt,Kt)),qe.$queuedListeners$=void 0)),St(void 0,()=>Ft(qe,mt,Je))},St=(qe,Je)=>vt(qe)?qe.then(Je):Je(),vt=qe=>qe instanceof Promise||qe&&qe.then&&"function"==typeof qe.then,Ft=function(){var qe=(0,i.A)(function*(Je,Ct,mt){var kt;const jt=Je.$hostElement$,tn=jt["s-rc"];mt&&(qe=>{const Je=qe.$cmpMeta$,Ct=qe.$hostElement$,mt=Je.$flags$,jt=((qe,Je)=>{var kt;let jt=he(Je);const Kt=fr.get(jt);if(qe=11===qe.nodeType?qe:Gn,Kt)if("string"==typeof Kt){let rn,tn=le.get(qe=qe.head||qe);if(tn||le.set(qe,tn=new Set),!tn.has(jt)){{rn=Gn.createElement("style"),rn.innerHTML=Kt;const nn=null!==(kt=qn.$nonce$)&&void 0!==kt?kt:y(Gn);null!=nn&&rn.setAttribute("nonce",nn),qe.insertBefore(rn,qe.querySelector("link"))}tn&&tn.add(jt)}}else qe.adoptedStyleSheets.includes(Kt)||(qe.adoptedStyleSheets=[...qe.adoptedStyleSheets,Kt]);return jt})(Ct.shadowRoot?Ct.shadowRoot:Ct.getRootNode(),Je);10&mt&&(Ct["s-sc"]=jt,Ct.classList.add(jt+"-h"))})(Je);lt(Je,Ct),tn&&(tn.map(nn=>nn()),jt["s-rc"]=void 0);{const nn=null!==(kt=jt["s-p"])&&void 0!==kt?kt:[],Wn=()=>Ut(Je);0===nn.length?Wn():(Promise.all(nn).then(Wn),Je.$flags$|=4,nn.length=0)}});return function(Ct,mt,kt){return qe.apply(this,arguments)}}(),lt=(qe,Je,Ct)=>{try{Je=Je.render(),qe.$flags$&=-17,qe.$flags$|=2,((qe,Je)=>{const Ct=qe.$hostElement$,mt=qe.$vnode$||M(null,null),kt=(qe=>qe&&qe.$tag$===R)(Je)?Je:v(null,null,Je);Ce=Ct.tagName,kt.$tag$=null,kt.$flags$|=4,qe.$vnode$=kt,kt.$elm$=mt.$elm$=Ct.shadowRoot||Ct,D=Ct["s-sc"],q(mt,kt)})(qe,Je)}catch(mt){Vn(mt,qe.$hostElement$)}return null},Ut=qe=>{const Ct=qe.$hostElement$,kt=qe.$lazyInstance$,jt=qe.$ancestorComponent$;64&qe.$flags$||(qe.$flags$|=64,Jt(Ct),Tt(kt,"componentDidLoad"),qe.$onReadyResolve$(Ct),jt||xt()),qe.$onInstanceResolve$(Ct),qe.$onRenderResolve$&&(qe.$onRenderResolve$(),qe.$onRenderResolve$=void 0),512&qe.$flags$&&Jn(()=>tt(qe,!1)),qe.$flags$&=-517},ut=qe=>{{const Je=cn(qe),Ct=Je.$hostElement$.isConnected;return Ct&&2==(18&Je.$flags$)&&tt(Je,!1),Ct}},xt=qe=>{Jt(Gn.documentElement),Jn(()=>K(_r,"appload",{detail:{namespace:"ionicpwaelements"}}))},Tt=(qe,Je,Ct)=>{if(qe&&qe[Je])try{return qe[Je](Ct)}catch(mt){Vn(mt)}},Jt=qe=>qe.classList.add("hydrated"),Et=(qe,Je,Ct)=>{if(Je.$members$){const mt=Object.entries(Je.$members$),kt=qe.prototype;if(mt.map(([jt,[Kt]])=>{31&Kt||2&Ct&&32&Kt?Object.defineProperty(kt,jt,{get(){return((qe,Je)=>cn(this).$instanceValues$.get(Je))(0,jt)},set(tn){((qe,Je,Ct,mt)=>{const kt=cn(qe),jt=kt.$instanceValues$.get(Je),Kt=kt.$flags$,tn=kt.$lazyInstance$;Ct=((qe,Je)=>null==qe||m(qe)?qe:4&Je?"false"!==qe&&(""===qe||!!qe):2&Je?parseFloat(qe):1&Je?String(qe):qe)(Ct,mt.$members$[Je][0]);const rn=Number.isNaN(jt)&&Number.isNaN(Ct);(!(8&Kt)||void 0===jt)&&Ct!==jt&&!rn&&(kt.$instanceValues$.set(Je,Ct),tn&&2==(18&Kt)&&tt(kt,!1))})(this,jt,tn,Je)},configurable:!0,enumerable:!0}):1&Ct&&64&Kt&&Object.defineProperty(kt,jt,{value(...tn){const rn=cn(this);return rn.$onInstancePromise$.then(()=>rn.$lazyInstance$[jt](...tn))}})}),1&Ct){const jt=new Map;kt.attributeChangedCallback=function(Kt,tn,rn){qn.jmp(()=>{const nn=jt.get(Kt);if(this.hasOwnProperty(nn))rn=this[nn],delete this[nn];else if(kt.hasOwnProperty(nn)&&"number"==typeof this[nn]&&this[nn]==rn)return;this[nn]=(null!==rn||"boolean"!=typeof this[nn])&&rn})},qe.observedAttributes=mt.filter(([Kt,tn])=>15&tn[0]).map(([Kt,tn])=>{const rn=tn[1]||Kt;return jt.set(rn,Kt),rn})}}return qe},Xt=function(){var qe=(0,i.A)(function*(Je,Ct,mt,kt,jt){if(!(32&Ct.$flags$)){Ct.$flags$|=32;{if((jt=lr(mt)).then){const nn=()=>{};jt=yield jt,nn()}jt.isProxied||(Et(jt,mt,2),jt.isProxied=!0);const rn=()=>{};Ct.$flags$|=8;try{new jt(Ct)}catch(nn){Vn(nn)}Ct.$flags$&=-9,rn()}if(jt.style){let rn=jt.style;const nn=he(mt);if(!fr.has(nn)){const Wn=()=>{};((qe,Je,Ct)=>{let mt=fr.get(qe);mr&&Ct?(mt=mt||new CSSStyleSheet,"string"==typeof mt?mt=Je:mt.replaceSync(Je)):mt=Je,fr.set(qe,mt)})(nn,rn,!!(1&mt.$flags$)),Wn()}}}const Kt=Ct.$ancestorComponent$,tn=()=>tt(Ct,!0);Kt&&Kt["s-rc"]?Kt["s-rc"].push(tn):tn()});return function(Ct,mt,kt,jt,Kt){return qe.apply(this,arguments)}}(),Cn=(qe,Je={})=>{var Ct;const kt=[],jt=Je.exclude||[],Kt=_r.customElements,tn=Gn.head,rn=tn.querySelector("meta[charset]"),nn=Gn.createElement("style"),Wn=[];let An,er=!0;Object.assign(qn,Je),qn.$resourcesUrl$=new URL(Je.resourcesUrl||"./",Gn.baseURI).href,qe.map(Bn=>{Bn[1].map(br=>{const hr={$flags$:br[0],$tagName$:br[1],$members$:br[2],$listeners$:br[3]};hr.$members$=br[2],hr.$listeners$=br[3];const In=hr.$tagName$,dn=class extends HTMLElement{constructor(Lr){super(Lr),Zn(Lr=this,hr),1&hr.$flags$&&Lr.attachShadow({mode:"open"})}connectedCallback(){An&&(clearTimeout(An),An=null),er?Wn.push(this):qn.jmp(()=>(qe=>{if(!(1&qn.$flags$)){const Je=cn(qe),Ct=Je.$cmpMeta$,mt=()=>{};if(1&Je.$flags$)ln(qe,Je,Ct.$listeners$);else{Je.$flags$|=1;{let kt=qe;for(;kt=kt.parentNode||kt.host;)if(kt["s-p"]){He(Je,Je.$ancestorComponent$=kt);break}}Ct.$members$&&Object.entries(Ct.$members$).map(([kt,[jt]])=>{if(31&jt&&qe.hasOwnProperty(kt)){const Kt=qe[kt];delete qe[kt],qe[kt]=Kt}}),Xt(qe,Je,Ct)}mt()}})(this))}disconnectedCallback(){qn.jmp(()=>(()=>{if(!(1&qn.$flags$)){const Je=cn(this),Ct=Je.$lazyInstance$;Je.$rmListeners$&&(Je.$rmListeners$.map(mt=>mt()),Je.$rmListeners$=void 0),Tt(Ct,"disconnectedCallback")}})())}componentOnReady(){return cn(this).$onReadyPromise$}};hr.$lazyBundleId$=Bn[0],!jt.includes(In)&&!Kt.get(In)&&(kt.push(In),Kt.define(In,Et(dn,hr,1)))})});{nn.innerHTML=kt+"{visibility:hidden}.hydrated{visibility:inherit}",nn.setAttribute("data-styles","");const Bn=null!==(Ct=qn.$nonce$)&&void 0!==Ct?Ct:y(Gn);null!=Bn&&nn.setAttribute("nonce",Bn),tn.insertBefore(nn,rn?rn.nextSibling:tn.firstChild)}er=!1,Wn.length?Wn.map(Bn=>Bn.connectedCallback()):qn.jmp(()=>An=setTimeout(xt,30))},ln=(qe,Je,Ct,mt)=>{Ct&&Ct.map(([kt,jt,Kt])=>{const tn=hn(qe,kt),rn=Mt(Je,Kt),nn=wt(kt);qn.ael(tn,jt,rn,nn),(Je.$rmListeners$=Je.$rmListeners$||[]).push(()=>qn.rel(tn,jt,rn,nn))})},Mt=(qe,Je)=>Ct=>{try{256&qe.$flags$?qe.$lazyInstance$[Je](Ct):(qe.$queuedListeners$=qe.$queuedListeners$||[]).push([Je,Ct])}catch(mt){Vn(mt)}},hn=(qe,Je)=>16&Je?Gn.body:qe,wt=qe=>!!(2&qe),en=new WeakMap,cn=qe=>en.get(qe),Dn=(qe,Je)=>en.set(Je.$lazyInstance$=qe,Je),Zn=(qe,Je)=>{const Ct={$flags$:0,$hostElement$:qe,$cmpMeta$:Je,$instanceValues$:new Map};return Ct.$onInstancePromise$=new Promise(mt=>Ct.$onInstanceResolve$=mt),Ct.$onReadyPromise$=new Promise(mt=>Ct.$onReadyResolve$=mt),qe["s-p"]=[],qe["s-rc"]=[],ln(qe,Ct,Je.$listeners$),en.set(qe,Ct)},Qn=(qe,Je)=>Je in qe,Vn=(qe,Je)=>(0,console.error)(qe,Je),or=new Map,lr=(qe,Je,Ct)=>{const mt=qe.$tagName$.replace(/-/g,"_"),kt=qe.$lazyBundleId$,jt=or.get(kt);if(jt)return jt[mt];if(!Ct||!BUILD.hotModuleReplacement){const Kt=tn=>(or.set(kt,tn),tn[mt]);switch(kt){case"pwa-action-sheet":return b.e(6301).then(b.bind(b,6301)).then(Kt,Vn);case"pwa-camera-modal":return b.e(2982).then(b.bind(b,2982)).then(Kt,Vn);case"pwa-toast":return b.e(3574).then(b.bind(b,3574)).then(Kt,Vn);case"pwa-camera-modal-instance":return b.e(5640).then(b.bind(b,5640)).then(Kt,Vn);case"pwa-camera":return b.e(6086).then(b.bind(b,6086)).then(Kt,Vn)}}return b(1169)(`./${kt}.entry.js`).then(Kt=>(or.set(kt,Kt),Kt[mt]),Vn)},fr=new Map,_r=typeof window<"u"?window:{},Gn=_r.document||{head:{}},qn={$flags$:0,$resourcesUrl$:"",jmp:qe=>qe(),raf:qe=>requestAnimationFrame(qe),ael:(qe,Je,Ct,mt)=>qe.addEventListener(Je,Ct,mt),rel:(qe,Je,Ct,mt)=>qe.removeEventListener(Je,Ct,mt),ce:(qe,Je)=>new CustomEvent(qe,Je)},gr=qe=>Promise.resolve(qe),mr=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),kr=[],yr=[],yn=(qe,Je)=>Ct=>{qe.push(Ct),B||(B=!0,Je&&4&qn.$flags$?Jn(Or):qn.raf(Or))},Er=qe=>{for(let Je=0;Je<qe.length;Je++)try{qe[Je](performance.now())}catch(Ct){Vn(Ct)}qe.length=0},Or=()=>{Er(kr),Er(yr),(B=kr.length>0)&&qn.raf(Or)},Jn=qe=>gr().then(qe),vn=yn(yr,!0)},1397($t,ot,b){"use strict";b.d(ot,{Z:()=>Ge});var i=b(6354),o=b(8750),D=b(9974),Ce=b(5225),De=b(4360),Pe=b(8071);function Ge(pe,ie,Ae=1/0){return(0,Pe.T)(ie)?Ge((l,p)=>(0,i.T)((m,y)=>ie(l,m,p,y))((0,o.Tg)(pe(l,p))),Ae):("number"==typeof ie&&(Ae=ie),(0,D.N)((l,p)=>function B(pe,ie,Ae,l,p,m,y,v){const M=[];let R=0,V=0,ce=!1;const z=()=>{ce&&!M.length&&!R&&ie.complete()},te=le=>R<l?K(le):M.push(le),K=le=>{m&&ie.next(le),R++;let ae=!1;(0,o.Tg)(Ae(le,V++)).subscribe((0,De._)(ie,ve=>{p?.(ve),m?te(ve):ie.next(ve)},()=>{ae=!0},void 0,()=>{if(ae)try{for(R--;M.length&&R<l;){const ve=M.shift();y?(0,Ce.N)(ie,y,()=>K(ve)):K(ve)}z()}catch(ve){ie.error(ve)}}))};return pe.subscribe((0,De._)(ie,te,()=>{ce=!0,z()})),()=>{v?.()}}(l,p,pe,Ae)))}},1413($t,ot,b){"use strict";b.d(ot,{B:()=>Pe});var i=b(1985),o=b(8359);const Ce=(0,b(1853).L)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=b(7908),B=b(9786);let Pe=(()=>{class pe extends i.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ae){const l=new Ge(this,this);return l.operator=Ae,l}_throwIfClosed(){if(this.closed)throw new Ce}next(Ae){(0,B.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const l of this.currentObservers)l.next(Ae)}})}error(Ae){(0,B.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ae;const{observers:l}=this;for(;l.length;)l.shift().error(Ae)}})}complete(){(0,B.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ae}=this;for(;Ae.length;)Ae.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ae;return(null===(Ae=this.observers)||void 0===Ae?void 0:Ae.length)>0}_trySubscribe(Ae){return this._throwIfClosed(),super._trySubscribe(Ae)}_subscribe(Ae){return this._throwIfClosed(),this._checkFinalizedStatuses(Ae),this._innerSubscribe(Ae)}_innerSubscribe(Ae){const{hasError:l,isStopped:p,observers:m}=this;return l||p?o.Kn:(this.currentObservers=null,m.push(Ae),new o.yU(()=>{this.currentObservers=null,(0,De.o)(m,Ae)}))}_checkFinalizedStatuses(Ae){const{hasError:l,thrownError:p,isStopped:m}=this;l?Ae.error(p):m&&Ae.complete()}asObservable(){const Ae=new i.c;return Ae.source=this,Ae}}return pe.create=(ie,Ae)=>new Ge(ie,Ae),pe})();class Ge extends Pe{constructor(ie,Ae){super(),this.destination=ie,this.source=Ae}next(ie){var Ae,l;null===(l=null===(Ae=this.destination)||void 0===Ae?void 0:Ae.next)||void 0===l||l.call(Ae,ie)}error(ie){var Ae,l;null===(l=null===(Ae=this.destination)||void 0===Ae?void 0:Ae.error)||void 0===l||l.call(Ae,ie)}complete(){var ie,Ae;null===(Ae=null===(ie=this.destination)||void 0===ie?void 0:ie.complete)||void 0===Ae||Ae.call(ie)}_subscribe(ie){var Ae,l;return null!==(l=null===(Ae=this.source)||void 0===Ae?void 0:Ae.subscribe(ie))&&void 0!==l?l:o.Kn}}},1635($t,ot,b){"use strict";function Ce(q,ge){var Ie={};for(var He in q)Object.prototype.hasOwnProperty.call(q,He)&&ge.indexOf(He)<0&&(Ie[He]=q[He]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var tt=0;for(He=Object.getOwnPropertySymbols(q);tt<He.length;tt++)ge.indexOf(He[tt])<0&&Object.prototype.propertyIsEnumerable.call(q,He[tt])&&(Ie[He[tt]]=q[He[tt]])}return Ie}function De(q,ge,Ie,He){var St,tt=arguments.length,dt=tt<3?ge:null===He?He=Object.getOwnPropertyDescriptor(ge,Ie):He;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)dt=Reflect.decorate(q,ge,Ie,He);else for(var vt=q.length-1;vt>=0;vt--)(St=q[vt])&&(dt=(tt<3?St(dt):tt>3?St(ge,Ie,dt):St(ge,Ie))||dt);return tt>3&&dt&&Object.defineProperty(ge,Ie,dt),dt}function l(q,ge,Ie,He){return new(Ie||(Ie=Promise))(function(dt,St){function vt(Ut){try{lt(He.next(Ut))}catch(ut){St(ut)}}function Ft(Ut){try{lt(He.throw(Ut))}catch(ut){St(ut)}}function lt(Ut){Ut.done?dt(Ut.value):function tt(dt){return dt instanceof Ie?dt:new Ie(function(St){St(dt)})}(Ut.value).then(vt,Ft)}lt((He=He.apply(q,ge||[])).next())})}function z(q){return this instanceof z?(this.v=q,this):new z(q)}function te(q,ge,Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tt,He=Ie.apply(q,ge||[]),dt=[];return tt=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),vt("next"),vt("throw"),vt("return",function St(Tt){return function(Jt){return Promise.resolve(Jt).then(Tt,ut)}}),tt[Symbol.asyncIterator]=function(){return this},tt;function vt(Tt,Jt){He[Tt]&&(tt[Tt]=function(ct){return new Promise(function(_t,Et){dt.push([Tt,ct,_t,Et])>1||Ft(Tt,ct)})},Jt&&(tt[Tt]=Jt(tt[Tt])))}function Ft(Tt,Jt){try{!function lt(Tt){Tt.value instanceof z?Promise.resolve(Tt.value.v).then(Ut,ut):xt(dt[0][2],Tt)}(He[Tt](Jt))}catch(ct){xt(dt[0][3],ct)}}function Ut(Tt){Ft("next",Tt)}function ut(Tt){Ft("throw",Tt)}function xt(Tt,Jt){Tt(Jt),dt.shift(),dt.length&&Ft(dt[0][0],dt[0][1])}}function le(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,ge=q[Symbol.asyncIterator];return ge?ge.call(q):(q=function v(q){var ge="function"==typeof Symbol&&Symbol.iterator,Ie=ge&&q[ge],He=0;if(Ie)return Ie.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&He>=q.length&&(q=void 0),{value:q&&q[He++],done:!q}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),Ie={},He("next"),He("throw"),He("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie);function He(dt){Ie[dt]=q[dt]&&function(St){return new Promise(function(vt,Ft){!function tt(dt,St,vt,Ft){Promise.resolve(Ft).then(function(lt){dt({value:lt,done:vt})},St)}(vt,Ft,(St=q[dt](St)).done,St.value)})}}}b.d(ot,{AQ:()=>te,Cg:()=>De,N3:()=>z,Tt:()=>Ce,sH:()=>l,xN:()=>le}),"function"==typeof SuppressedError&&SuppressedError},1841($t,ot,b){"use strict";b.d(ot,{b:()=>B,c:()=>Pe,d:()=>Ge,e:()=>re,g:()=>Oe,l:()=>he,s:()=>Ke,t:()=>v,w:()=>Le});var i=b(467),o=b(5705),D=b(4674);const B="ionViewWillLeave",Pe="ionViewDidLeave",Ge="ionViewWillUnload",pe=Ve=>{Ve.tabIndex=-1,Ve.focus()},ie=Ve=>null!==Ve.offsetParent,l="ion-last-focus",y_saveViewFocus=q=>{if(o.e.get("focusManagerPriority",!1)){const Ie=document.activeElement;null!==Ie&&q?.contains(Ie)&&Ie.setAttribute(l,"true")}},y_setViewFocus=q=>{const ge=o.e.get("focusManagerPriority",!1);if(Array.isArray(ge)&&!q.contains(document.activeElement)){const Ie=q.querySelector(`[${l}]`);if(Ie&&ie(Ie))return void pe(Ie);for(const He of ge)switch(He){case"content":const tt=q.querySelector('main, [role="main"]');if(tt&&ie(tt))return void pe(tt);break;case"heading":const dt=q.querySelector('h1, [role="heading"][aria-level="1"]');if(dt&&ie(dt))return void pe(dt);break;case"banner":const St=q.querySelector('header, [role="banner"]');if(St&&ie(St))return void pe(St);break;default:(0,o.f)(`Unrecognized focus manager priority value ${He}`)}pe(q)}},v=Ve=>new Promise((be,q)=>{(0,o.w)(()=>{const ge=Ye(Ve);M(Ve,ge),R(Ve).then(Ie=>{Ie.animation&&Ie.animation.destroy(),V(Ve),be(Ie)},Ie=>{V(Ve),q(Ie)}).finally(()=>{we(ge,!1)})})}),M=(Ve,be)=>{const q=Ve.enteringEl,ge=Ve.leavingEl;y_saveViewFocus(ge),Fe(q,ge,Ve.direction),we(be,!0),Ve.showGoBack?q.classList.add("can-go-back"):q.classList.remove("can-go-back"),Ke(q,!1),q.style.setProperty("pointer-events","none"),ge&&(Ke(ge,!1),ge.style.setProperty("pointer-events","none"))},R=function(){var Ve=(0,i.A)(function*(be){const q=yield ce(be);return q&&o.B.isBrowser?z(q,be):te(be)});return function(q){return Ve.apply(this,arguments)}}(),V=Ve=>{const be=Ve.enteringEl,q=Ve.leavingEl;be.classList.remove("ion-page-invisible"),be.style.removeProperty("pointer-events"),void 0!==q&&(q.classList.remove("ion-page-invisible"),q.style.removeProperty("pointer-events")),y_setViewFocus(be)},ce=function(){var Ve=(0,i.A)(function*(be){return be.leavingEl&&be.animated&&0!==be.duration?be.animationBuilder?be.animationBuilder:"ios"===be.mode?(yield Promise.resolve().then(b.bind(b,499))).iosTransitionAnimation:(yield Promise.resolve().then(b.bind(b,8313))).mdTransitionAnimation:void 0});return function(q){return Ve.apply(this,arguments)}}(),z=function(){var Ve=(0,i.A)(function*(be,q){yield K(q,!0);const ge=be(q.baseEl,q);ve(q.enteringEl,q.leavingEl);const Ie=yield ae(ge,q);return q.progressCallback&&q.progressCallback(void 0),Ie&&Ne(q.enteringEl,q.leavingEl),{hasCompleted:Ie,animation:ge}});return function(q,ge){return Ve.apply(this,arguments)}}(),te=function(){var Ve=(0,i.A)(function*(be){const q=be.enteringEl,ge=be.leavingEl,Ie=o.e.get("focusManagerPriority",!1);return yield K(be,Ie),ve(q,ge),Ne(q,ge),{hasCompleted:!0}});return function(q){return Ve.apply(this,arguments)}}(),K=function(){var Ve=(0,i.A)(function*(be,q){(void 0!==be.deepWait?be.deepWait:q)&&(yield Promise.all([re(be.enteringEl),re(be.leavingEl)])),yield le(be.viewIsReady,be.enteringEl)});return function(q,ge){return Ve.apply(this,arguments)}}(),le=function(){var Ve=(0,i.A)(function*(be,q){be&&(yield be(q))});return function(q,ge){return Ve.apply(this,arguments)}}(),ae=(Ve,be)=>{const q=be.progressCallback,ge=new Promise(Ie=>{Ve.onFinish(He=>Ie(1===He))});return q?(Ve.progressStart(!0),q(Ve)):Ve.play(),ge},ve=(Ve,be)=>{he(be,B),he(Ve,"ionViewWillEnter")},Ne=(Ve,be)=>{he(Ve,"ionViewDidEnter"),he(be,Pe)},he=(Ve,be)=>{if(Ve){const q=new CustomEvent(be,{bubbles:!1,cancelable:!1});Ve.dispatchEvent(q)}},Le=()=>new Promise(Ve=>(0,D.r)(()=>(0,D.r)(()=>Ve()))),re=function(){var Ve=(0,i.A)(function*(be){const q=be;if(q){if(null!=q.componentOnReady){if(null!=(yield q.componentOnReady()))return}else if(null!=q.__registerHost)return void(yield new Promise(Ie=>(0,D.r)(Ie)));yield Promise.all(Array.from(q.children).map(re))}});return function(q){return Ve.apply(this,arguments)}}(),Ke=(Ve,be)=>{be?(Ve.setAttribute("aria-hidden","true"),Ve.classList.add("ion-page-hidden")):(Ve.hidden=!1,Ve.removeAttribute("aria-hidden"),Ve.classList.remove("ion-page-hidden"))},Fe=(Ve,be,q)=>{void 0!==Ve&&(Ve.style.zIndex="back"===q?"99":"101"),void 0!==be&&(be.style.zIndex="100")},we=(Ve,be)=>{if(!Ve)return;const q="header-transitioning";be?Ve.classList.add(q):Ve.classList.remove(q)},Oe=Ve=>Ve.classList.contains("ion-page")?Ve:Ve.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ve,Ye=Ve=>{if("ios"!==Ve.mode)return null;const He="back"===Ve.direction?Ve.leavingEl:Ve.enteringEl;return He?He.querySelector("ion-header"):null}},1853($t,ot,b){"use strict";function i(o){const Ce=o(De=>{Error.call(De),De.stack=(new Error).stack});return Ce.prototype=Object.create(Error.prototype),Ce.prototype.constructor=Ce,Ce}b.d(ot,{L:()=>i})},1889($t,ot,b){"use strict";b.d(ot,{Rz:()=>Ce,Vc:()=>D,Wi:()=>o,__:()=>i});var i=function(De){return De.Documents="DOCUMENTS",De.Data="DATA",De.Library="LIBRARY",De.Cache="CACHE",De.External="EXTERNAL",De.ExternalStorage="EXTERNAL_STORAGE",De.ExternalCache="EXTERNAL_CACHE",De.LibraryNoCloud="LIBRARY_NO_CLOUD",De.Temporary="TEMPORARY",De}(i||{}),o=function(De){return De.UTF8="utf8",De.ASCII="ascii",De.UTF16="utf16",De}(o||{});const D=i,Ce=o},1985($t,ot,b){"use strict";b.d(ot,{c:()=>Ge});var i=b(7707),o=b(8359),D=b(3494),Ce=b(1203),De=b(1026),B=b(8071),Pe=b(9786);let Ge=(()=>{class l{constructor(m){m&&(this._subscribe=m)}lift(m){const y=new l;return y.source=this,y.operator=m,y}subscribe(m,y,v){const M=function Ae(l){return l&&l instanceof i.vU||function ie(l){return l&&(0,B.T)(l.next)&&(0,B.T)(l.error)&&(0,B.T)(l.complete)}(l)&&(0,o.Uv)(l)}(m)?m:new i.Ms(m,y,v);return(0,Pe.Y)(()=>{const{operator:R,source:V}=this;M.add(R?R.call(M,V):V?this._subscribe(M):this._trySubscribe(M))}),M}_trySubscribe(m){try{return this._subscribe(m)}catch(y){m.error(y)}}forEach(m,y){return new(y=pe(y))((v,M)=>{const R=new i.Ms({next:V=>{try{m(V)}catch(ce){M(ce),R.unsubscribe()}},error:M,complete:v});this.subscribe(R)})}_subscribe(m){var y;return null===(y=this.source)||void 0===y?void 0:y.subscribe(m)}[D.s](){return this}pipe(...m){return(0,Ce.m)(m)(this)}toPromise(m){return new(m=pe(m))((y,v)=>{let M;this.subscribe(R=>M=R,R=>v(R),()=>y(M))})}}return l.create=p=>new l(p),l})();function pe(l){var p;return null!==(p=l??De.$.Promise)&&void 0!==p?p:Promise}},2084($t,ot,b){"use strict";function i(){const D=new Date((new Date).getTime()+144e5);return`${D.getUTCFullYear()}-${String(D.getUTCMonth()+1).padStart(2,"0")}-${String(D.getUTCDate()).padStart(2,"0")}T${String(D.getUTCHours()).padStart(2,"0")}:${String(D.getUTCMinutes()).padStart(2,"0")}:${String(D.getUTCSeconds()).padStart(2,"0")}.${String(D.getUTCMilliseconds()).padStart(3,"0")}+04:00`}b.d(ot,{E:()=>i})},2200($t,ot,b){"use strict";b.d(ot,{MD:()=>F,PV:()=>zn,Sq:()=>An,T3:()=>Ee,YU:()=>tn,bT:()=>br,fw:()=>B,vh:()=>nr});var i=b(7705),o=b(2615),D=b(3664),De=(b(9295),b(7303));let B=(()=>{class _ extends De.hb{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(C,O){super(),this._platformLocation=C,null!=O&&(this._baseHref=O)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}path(C=!1){const O=this._platformLocation.hash??"#";return O.length>0?O.substring(1):O}prepareExternalUrl(C){const O=(0,De.om)(this._baseHref,C);return O.length>0?"#"+O:O}pushState(C,O,H,Ue){const ft=this.prepareExternalUrl(H+(0,De.Q)(Ue))||this._platformLocation.pathname;this._platformLocation.pushState(C,O,ft)}replaceState(C,O,H,Ue){const ft=this.prepareExternalUrl(H+(0,De.Q)(Ue))||this._platformLocation.pathname;this._platformLocation.replaceState(C,O,ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(C=0){this._platformLocation.historyGo?.(C)}static \u0275fac=function(O){return new(O||_)(o.KVO(De.Vw),o.KVO(De.kB,8))};static \u0275prov=o.jDH({token:_,factory:_.\u0275fac})}return _})();var ie=function(_){return _[_.Format=0]="Format",_[_.Standalone=1]="Standalone",_}(ie||{}),Ae=function(_){return _[_.Narrow=0]="Narrow",_[_.Abbreviated=1]="Abbreviated",_[_.Wide=2]="Wide",_[_.Short=3]="Short",_}(Ae||{}),l=function(_){return _[_.Short=0]="Short",_[_.Medium=1]="Medium",_[_.Long=2]="Long",_[_.Full=3]="Full",_}(l||{});function te(_,k){return Ve((0,D.kBR)(_)[D.NSC.DateFormat],k)}function K(_,k){return Ve((0,D.kBR)(_)[D.NSC.TimeFormat],k)}function le(_,k){return Ve((0,D.kBR)(_)[D.NSC.DateTimeFormat],k)}function ae(_,k){const C=(0,D.kBR)(_),O=C[D.NSC.NumberSymbols][k];if(typeof O>"u"){if(12===k)return C[D.NSC.NumberSymbols][0];if(13===k)return C[D.NSC.NumberSymbols][1]}return O}function Fe(_){if(!_[D.NSC.ExtraData])throw new o.buA(2303,!1)}function Ve(_,k){for(let C=k;C>-1;C--)if(typeof _[C]<"u")return _[C];throw new o.buA(2304,!1)}function be(_){const[k,C]=_.split(":");return{hours:+k,minutes:+C}}const He=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,tt={},dt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function St(_,k,C,O){let H=function Dn(_){if(Qn(_))return _;if("number"==typeof _&&!isNaN(_))return new Date(_);if("string"==typeof _){if(_=_.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(_)){const[H,Ue=1,ft=1]=_.split("-").map(pt=>+pt);return Ft(H,Ue-1,ft)}const C=parseFloat(_);if(!isNaN(_-C))return new Date(C);let O;if(O=_.match(He))return function Zn(_){const k=new Date(0);let C=0,O=0;const H=_[8]?k.setUTCFullYear:k.setFullYear,Ue=_[8]?k.setUTCHours:k.setHours;_[9]&&(C=Number(_[9]+_[10]),O=Number(_[9]+_[11])),H.call(k,Number(_[1]),Number(_[2])-1,Number(_[3]));const ft=Number(_[4]||0)-C,pt=Number(_[5]||0)-O,an=Number(_[6]||0),un=Math.floor(1e3*parseFloat("0."+(_[7]||0)));return Ue.call(k,ft,pt,an,un),k}(O)}const k=new Date(_);if(!Qn(k))throw new o.buA(2311,!1);return k}(_);k=lt(C,k)||k;let pt,ft=[];for(;k;){if(pt=dt.exec(k),!pt){ft.push(k);break}{ft=ft.concat(pt.slice(1));const Rn=ft.pop();if(!Rn)break;k=Rn}}let an=H.getTimezoneOffset();O&&(an=Nt(O,an),H=function cn(_,k){const H=_.getTimezoneOffset();return function en(_,k){return(_=new Date(_.getTime())).setMinutes(_.getMinutes()+k),_}(_,-1*(Nt(k,H)-H))}(H,O));let un="";return ft.forEach(Rn=>{const En=function wt(_){if(hn[_])return hn[_];let k;switch(_){case"G":case"GG":case"GGG":k=ct(3,Ae.Abbreviated);break;case"GGGG":k=ct(3,Ae.Wide);break;case"GGGGG":k=ct(3,Ae.Narrow);break;case"y":k=Tt(0,1,0,!1,!0);break;case"yy":k=Tt(0,2,0,!0,!0);break;case"yyy":k=Tt(0,3,0,!1,!0);break;case"yyyy":k=Tt(0,4,0,!1,!0);break;case"Y":k=Mt(1);break;case"YY":k=Mt(2,!0);break;case"YYY":k=Mt(3);break;case"YYYY":k=Mt(4);break;case"M":case"L":k=Tt(1,1,1);break;case"MM":case"LL":k=Tt(1,2,1);break;case"MMM":k=ct(2,Ae.Abbreviated);break;case"MMMM":k=ct(2,Ae.Wide);break;case"MMMMM":k=ct(2,Ae.Narrow);break;case"LLL":k=ct(2,Ae.Abbreviated,ie.Standalone);break;case"LLLL":k=ct(2,Ae.Wide,ie.Standalone);break;case"LLLLL":k=ct(2,Ae.Narrow,ie.Standalone);break;case"w":k=ln(1);break;case"ww":k=ln(2);break;case"W":k=ln(1,!0);break;case"d":k=Tt(2,1);break;case"dd":k=Tt(2,2);break;case"c":case"cc":k=Tt(7,1);break;case"ccc":k=ct(1,Ae.Abbreviated,ie.Standalone);break;case"cccc":k=ct(1,Ae.Wide,ie.Standalone);break;case"ccccc":k=ct(1,Ae.Narrow,ie.Standalone);break;case"cccccc":k=ct(1,Ae.Short,ie.Standalone);break;case"E":case"EE":case"EEE":k=ct(1,Ae.Abbreviated);break;case"EEEE":k=ct(1,Ae.Wide);break;case"EEEEE":k=ct(1,Ae.Narrow);break;case"EEEEEE":k=ct(1,Ae.Short);break;case"a":case"aa":case"aaa":k=ct(0,Ae.Abbreviated);break;case"aaaa":k=ct(0,Ae.Wide);break;case"aaaaa":k=ct(0,Ae.Narrow);break;case"b":case"bb":case"bbb":k=ct(0,Ae.Abbreviated,ie.Standalone,!0);break;case"bbbb":k=ct(0,Ae.Wide,ie.Standalone,!0);break;case"bbbbb":k=ct(0,Ae.Narrow,ie.Standalone,!0);break;case"B":case"BB":case"BBB":k=ct(0,Ae.Abbreviated,ie.Format,!0);break;case"BBBB":k=ct(0,Ae.Wide,ie.Format,!0);break;case"BBBBB":k=ct(0,Ae.Narrow,ie.Format,!0);break;case"h":k=Tt(3,1,-12);break;case"hh":k=Tt(3,2,-12);break;case"H":k=Tt(3,1);break;case"HH":k=Tt(3,2);break;case"m":k=Tt(4,1);break;case"mm":k=Tt(4,2);break;case"s":k=Tt(5,1);break;case"ss":k=Tt(5,2);break;case"S":k=Tt(6,1);break;case"SS":k=Tt(6,2);break;case"SSS":k=Tt(6,3);break;case"Z":case"ZZ":case"ZZZ":k=Et(0);break;case"ZZZZZ":k=Et(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":k=Et(1);break;case"OOOO":case"ZZZZ":case"zzzz":k=Et(2);break;default:return null}return hn[_]=k,k}(Rn);un+=En?En(H,C,an):"''"===Rn?"'":Rn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),un}function Ft(_,k,C){const O=new Date(0);return O.setFullYear(_,k,C),O.setHours(0,0,0),O}function lt(_,k){const C=function y(_){return(0,D.kBR)(_)[D.NSC.LocaleId]}(_);if(tt[C]??={},tt[C][k])return tt[C][k];let O="";switch(k){case"shortDate":O=te(_,l.Short);break;case"mediumDate":O=te(_,l.Medium);break;case"longDate":O=te(_,l.Long);break;case"fullDate":O=te(_,l.Full);break;case"shortTime":O=K(_,l.Short);break;case"mediumTime":O=K(_,l.Medium);break;case"longTime":O=K(_,l.Long);break;case"fullTime":O=K(_,l.Full);break;case"short":const H=lt(_,"shortTime"),Ue=lt(_,"shortDate");O=Ut(le(_,l.Short),[H,Ue]);break;case"medium":const ft=lt(_,"mediumTime"),pt=lt(_,"mediumDate");O=Ut(le(_,l.Medium),[ft,pt]);break;case"long":const an=lt(_,"longTime"),un=lt(_,"longDate");O=Ut(le(_,l.Long),[an,un]);break;case"full":const Rn=lt(_,"fullTime"),En=lt(_,"fullDate");O=Ut(le(_,l.Full),[Rn,En])}return O&&(tt[C][k]=O),O}function Ut(_,k){return k&&(_=_.replace(/\{([^}]+)}/g,function(C,O){return null!=k&&O in k?k[O]:C})),_}function ut(_,k,C="-",O,H){let Ue="";(_<0||H&&_<=0)&&(H?_=1-_:(_=-_,Ue=C));let ft=String(_);for(;ft.length<k;)ft="0"+ft;return O&&(ft=ft.slice(ft.length-k)),Ue+ft}function Tt(_,k,C=0,O=!1,H=!1){return function(Ue,ft){let pt=function Jt(_,k){switch(_){case 0:return k.getFullYear();case 1:return k.getMonth();case 2:return k.getDate();case 3:return k.getHours();case 4:return k.getMinutes();case 5:return k.getSeconds();case 6:return k.getMilliseconds();case 7:return k.getDay();default:throw new o.buA(2301,!1)}}(_,Ue);if((C>0||pt>-C)&&(pt+=C),3===_)0===pt&&-12===C&&(pt=12);else if(6===_)return function xt(_,k){return ut(_,3).substring(0,k)}(pt,k);const an=ae(ft,5);return ut(pt,k,an,O,H)}}function ct(_,k,C=ie.Format,O=!1){return function(H,Ue){return function _t(_,k,C,O,H,Ue){switch(C){case 2:return function R(_,k,C){const O=(0,D.kBR)(_),Ue=Ve([O[D.NSC.MonthsFormat],O[D.NSC.MonthsStandalone]],k);return Ve(Ue,C)}(k,H,O)[_.getMonth()];case 1:return function M(_,k,C){const O=(0,D.kBR)(_),Ue=Ve([O[D.NSC.DaysFormat],O[D.NSC.DaysStandalone]],k);return Ve(Ue,C)}(k,H,O)[_.getDay()];case 0:const ft=_.getHours(),pt=_.getMinutes();if(Ue){const un=function we(_){const k=(0,D.kBR)(_);return Fe(k),(k[D.NSC.ExtraData][2]||[]).map(O=>"string"==typeof O?be(O):[be(O[0]),be(O[1])])}(k),Rn=function Oe(_,k,C){const O=(0,D.kBR)(_);Fe(O);const Ue=Ve([O[D.NSC.ExtraData][0],O[D.NSC.ExtraData][1]],k)||[];return Ve(Ue,C)||[]}(k,H,O),En=un.findIndex(Pn=>{if(Array.isArray(Pn)){const[Yt,jn]=Pn,Nr=ft>=Yt.hours&&pt>=Yt.minutes,wr=ft<jn.hours||ft===jn.hours&&pt<jn.minutes;if(Yt.hours<jn.hours){if(Nr&&wr)return!0}else if(Nr||wr)return!0}else if(Pn.hours===ft&&Pn.minutes===pt)return!0;return!1});if(-1!==En)return Rn[En]}return function v(_,k,C){const O=(0,D.kBR)(_),Ue=Ve([O[D.NSC.DayPeriodsFormat],O[D.NSC.DayPeriodsStandalone]],k);return Ve(Ue,C)}(k,H,O)[ft<12?0:1];case 3:return function V(_,k){return Ve((0,D.kBR)(_)[D.NSC.Eras],k)}(k,O)[_.getFullYear()<=0?0:1];default:throw new o.buA(2302,!1)}}(H,Ue,_,k,C,O)}}function Et(_){return function(k,C,O){const H=-1*O,Ue=ae(C,5),ft=H>0?Math.floor(H/60):Math.ceil(H/60);switch(_){case 0:return(H>=0?"+":"")+ut(ft,2,Ue)+ut(Math.abs(H%60),2,Ue);case 1:return"GMT"+(H>=0?"+":"")+ut(ft,1,Ue);case 2:return"GMT"+(H>=0?"+":"")+ut(ft,2,Ue)+":"+ut(Math.abs(H%60),2,Ue);case 3:return 0===O?"Z":(H>=0?"+":"")+ut(ft,2,Ue)+":"+ut(Math.abs(H%60),2,Ue);default:throw new o.buA(2310,!1)}}}function Cn(_){const k=_.getDay(),C=0===k?-3:4-k;return Ft(_.getFullYear(),_.getMonth(),_.getDate()+C)}function ln(_,k=!1){return function(C,O){let H;if(k){const Ue=new Date(C.getFullYear(),C.getMonth(),1).getDay()-1,ft=C.getDate();H=1+Math.floor((ft+Ue)/7)}else{const Ue=Cn(C),ft=function Un(_){const k=Ft(_,0,1).getDay();return Ft(_,0,1+(k<=4?4:11)-k)}(Ue.getFullYear()),pt=Ue.getTime()-ft.getTime();H=1+Math.round(pt/6048e5)}return ut(H,_,ae(O,5))}}function Mt(_,k=!1){return function(C,O){return ut(Cn(C).getFullYear(),_,ae(O,5),k)}}const hn={};function Nt(_,k){_=_.replace(/:/g,"");const C=Date.parse("Jan 01, 1970 00:00:00 "+_)/6e4;return isNaN(C)?k:C}function Qn(_){return _ instanceof Date&&!isNaN(_.valueOf())}const jt=/\s+/,Kt=[];let tn=(()=>{class _{_ngEl;_renderer;initialClasses=Kt;rawClass;stateMap=new Map;constructor(C,O){this._ngEl=C,this._renderer=O}set klass(C){this.initialClasses=null!=C?C.trim().split(jt):Kt}set ngClass(C){this.rawClass="string"==typeof C?C.trim().split(jt):C}ngDoCheck(){for(const O of this.initialClasses)this._updateState(O,!0);const C=this.rawClass;if(Array.isArray(C)||C instanceof Set)for(const O of C)this._updateState(O,!0);else if(null!=C)for(const O of Object.keys(C))this._updateState(O,!!C[O]);this._applyStateDiff()}_updateState(C,O){const H=this.stateMap.get(C);void 0!==H?(H.enabled!==O&&(H.changed=!0,H.enabled=O),H.touched=!0):this.stateMap.set(C,{enabled:O,changed:!0,touched:!0})}_applyStateDiff(){for(const C of this.stateMap){const O=C[0],H=C[1];H.changed?(this._toggleClass(O,H.enabled),H.changed=!1):H.touched||(H.enabled&&this._toggleClass(O,!1),this.stateMap.delete(O)),H.touched=!1}}_toggleClass(C,O){(C=C.trim()).length>0&&C.split(jt).forEach(H=>{O?this._renderer.addClass(this._ngEl.nativeElement,H):this._renderer.removeClass(this._ngEl.nativeElement,H)})}static \u0275fac=function(O){return new(O||_)(D.rXU(D.aKT),D.rXU(D.sFG))};static \u0275dir=D.FsC({type:_,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return _})();class Wn{$implicit;ngForOf;index;count;constructor(k,C,O,H){this.$implicit=k,this.ngForOf=C,this.index=O,this.count=H}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let An=(()=>{class _{_viewContainer;_template;_differs;set ngForOf(C){this._ngForOf=C,this._ngForOfDirty=!0}set ngForTrackBy(C){this._trackByFn=C}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(C,O,H){this._viewContainer=C,this._template=O,this._differs=H}set ngForTemplate(C){C&&(this._template=C)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const C=this._ngForOf;!this._differ&&C&&(this._differ=this._differs.find(C).create(this.ngForTrackBy))}if(this._differ){const C=this._differ.diff(this._ngForOf);C&&this._applyChanges(C)}}_applyChanges(C){const O=this._viewContainer;C.forEachOperation((H,Ue,ft)=>{if(null==H.previousIndex)O.createEmbeddedView(this._template,new Wn(H.item,this._ngForOf,-1,-1),null===ft?void 0:ft);else if(null==ft)O.remove(null===Ue?void 0:Ue);else if(null!==Ue){const pt=O.get(Ue);O.move(pt,ft),er(pt,H)}});for(let H=0,Ue=O.length;H<Ue;H++){const pt=O.get(H).context;pt.index=H,pt.count=Ue,pt.ngForOf=this._ngForOf}C.forEachIdentityChange(H=>{er(O.get(H.currentIndex),H)})}static ngTemplateContextGuard(C,O){return!0}static \u0275fac=function(O){return new(O||_)(D.rXU(D.c1b),D.rXU(D.C4Q),D.rXU(i._q3))};static \u0275dir=D.FsC({type:_,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return _})();function er(_,k){_.context.$implicit=k.item}let br=(()=>{class _{_viewContainer;_context=new hr;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(C,O){this._viewContainer=C,this._thenTemplateRef=O}set ngIf(C){this._context.$implicit=this._context.ngIf=C,this._updateView()}set ngIfThen(C){In(C),this._thenTemplateRef=C,this._thenViewRef=null,this._updateView()}set ngIfElse(C){In(C),this._elseTemplateRef=C,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(C,O){return!0}static \u0275fac=function(O){return new(O||_)(D.rXU(D.c1b),D.rXU(D.C4Q))};static \u0275dir=D.FsC({type:_,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return _})();class hr{$implicit=null;ngIf=null}function In(_,k){if(_&&!_.createEmbeddedView)throw new o.buA(2020,!1)}let Ee=(()=>{class _{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(C){this._viewContainerRef=C}ngOnChanges(C){if(this._shouldRecreateView(C)){const O=this._viewContainerRef;if(this._viewRef&&O.remove(O.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const H=this._createContextForwardProxy();this._viewRef=O.createEmbeddedView(this.ngTemplateOutlet,H,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(C){return!!C.ngTemplateOutlet||!!C.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(C,O,H)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,O,H),get:(C,O,H)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,O,H)}})}static \u0275fac=function(O){return new(O||_)(D.rXU(D.c1b))};static \u0275dir=D.FsC({type:_,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[D.OA$]})}return _})();function bt(_,k){return new o.buA(2100,!1)}const Pr=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let zn=(()=>{class _{transform(C){if(null==C)return null;if("string"!=typeof C)throw bt();return C.replace(Pr,O=>O[0].toUpperCase()+O.slice(1).toLowerCase())}static \u0275fac=function(O){return new(O||_)};static \u0275pipe=D.EJ8({name:"titlecase",type:_,pure:!0})}return _})();const sr=new o.nKC(""),cr=new o.nKC("");let nr=(()=>{class _{locale;defaultTimezone;defaultOptions;constructor(C,O,H){this.locale=C,this.defaultTimezone=O,this.defaultOptions=H}transform(C,O,H,Ue){if(null==C||""===C||C!=C)return null;try{return St(C,O??this.defaultOptions?.dateFormat??"mediumDate",Ue||this.locale,H??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(ft){throw bt()}}static \u0275fac=function(O){return new(O||_)(D.rXU(D.xe9,16),D.rXU(sr,24),D.rXU(cr,24))};static \u0275pipe=D.EJ8({name:"date",type:_,pure:!0})}return _})(),F=(()=>{class _{static \u0275fac=function(O){return new(O||_)};static \u0275mod=D.$C({type:_});static \u0275inj=o.G2t({})}return _})()},2327($t,ot,b){"use strict";b.r(ot),b.d(ot,{AppUpdateAvailability:()=>B.I8,AppUpdateResultCode:()=>B.hg,CapacitorUpdater:()=>Pe,FlexibleUpdateInstallStatus:()=>B.EB});var i=b(5083);const D="__capgo_history_stack__";if(typeof window<"u"&&typeof document<"u"&&typeof history<"u"){const Ge=window;if(!Ge.__capgoHistoryPatched){Ge.__capgoHistoryPatched=!0;const pe=()=>{try{if(Ge.__capgoKeepUrlPathAfterReload)return!0}catch{}try{return"1"===window.localStorage.getItem("__capgo_keep_url_path_after_reload")}catch{return!1}},ie=()=>{try{const Le=window.sessionStorage.getItem(D);if(!Le)return{stack:[],index:-1};const re=JSON.parse(Le);return re&&Array.isArray(re.stack)&&"number"==typeof re.index?re:{stack:[],index:-1}}catch{return{stack:[],index:-1}}},Ae=(Le,re)=>{try{window.sessionStorage.setItem(D,JSON.stringify({stack:Le,index:re}))}catch{}},l=()=>{try{window.sessionStorage.removeItem(D)}catch{}},p=Le=>{try{const re=Le??window.location.href,Ke=new URL(re instanceof URL?re.toString():re,window.location.href);return`${Ke.pathname}${Ke.search}${Ke.hash}`}catch{return null}},m=(Le,re)=>{if(Le.length<=100)return{stack:Le,index:re};const Ke=Le.length-100;return{stack:Le.slice(Ke),index:Math.max(0,re-Ke)}},y=Le=>{"complete"===document.readyState||"interactive"===document.readyState?Le():window.addEventListener("DOMContentLoaded",Le,{once:!0})};let v=!1,M=!1,R=!1;const V=()=>{if(!v)return;const Le=ie(),re=p();if(re){if(0===Le.stack.length)return Le.stack.push(re),Le.index=0,void Ae(Le.stack,Le.index);(Le.index<0||Le.index>=Le.stack.length)&&(Le.index=Le.stack.length-1),Le.stack[Le.index]!==re&&(Le.stack[Le.index]=re,Ae(Le.stack,Le.index))}},ce=(Le,re)=>{if(!v||M)return;const Ke=p(Le);if(!Ke)return;let{stack:Fe,index:we}=ie();0===Fe.length?(Fe.push(Ke),we=Fe.length-1):re?((we<0||we>=Fe.length)&&(we=Fe.length-1),Fe[we]=Ke):we>=Fe.length-1?(Fe.push(Ke),we=Fe.length-1):(Fe=Fe.slice(0,we+1),Fe.push(Ke),we=Fe.length-1),({stack:Fe,index:we}=m(Fe,we)),Ae(Fe,we)},z=()=>{if(!v||M)return;const Le=ie();if(0===Le.stack.length)return void V();const re=Le.index>=0&&Le.index<Le.stack.length?Le.index:Le.stack.length-1,Ke=p();if(1===Le.stack.length&&Ke===Le.stack[0])return;const Fe=Le.stack[0];if(!Fe)return;M=!0;try{history.replaceState(history.state,document.title,Fe);for(let Ye=1;Ye<Le.stack.length;Ye+=1)history.pushState(history.state,document.title,Le.stack[Ye])}catch{return void(M=!1)}M=!1;const Oe=re-(Le.stack.length-1);0!==Oe?history.go(Oe):(history.replaceState(history.state,document.title,Le.stack[re]),window.dispatchEvent(new PopStateEvent("popstate")))},te=()=>{!v||R||(R=!0,y(()=>{R=!1,z()}))};let K=null,le=null;const ae=()=>{if(!v||M)return;const Le=p();if(!Le)return;const re=ie(),Ke=re.stack.lastIndexOf(Le);Ke>=0?re.index=Ke:(re.stack.push(Le),re.index=re.stack.length-1);const Fe=m(re.stack,re.index);Ae(Fe.stack,Fe.index)},ve=()=>{K&&le||(K=history.pushState,le=history.replaceState,history.pushState=function(re,Ke,Fe){const we=K?.call(history,re,Ke,Fe);return ce(Fe,!1),we},history.replaceState=function(re,Ke,Fe){const we=le?.call(history,re,Ke,Fe);return ce(Fe,!0),we},window.addEventListener("popstate",ae))},Ne=()=>{K&&(history.pushState=K,K=null),le&&(history.replaceState=le,le=null),window.removeEventListener("popstate",ae)},he=Le=>{v!==Le?(v=Le,v?(ve(),V(),te()):(Ne(),l())):v&&(V(),te())};window.addEventListener("CapacitorUpdaterKeepUrlPathAfterReload",Le=>{var re;const Ke=Le,Fe=null===(re=Ke?.detail)||void 0===re?void 0:re.enabled;"boolean"==typeof Fe?(Ge.__capgoKeepUrlPathAfterReload=Fe,he(Fe)):(Ge.__capgoKeepUrlPathAfterReload=!0,he(!0))}),he(pe())}}var B=b(9564);const Pe=(0,i.registerPlugin)("CapacitorUpdater",{web:()=>b.e(8080).then(b.bind(b,8080)).then(Ge=>new Ge.CapacitorUpdaterWeb)})},2512($t,ot,b){"use strict";function i(D,Ce){Ce=encodeURIComponent(Ce);for(const De of D.split(";")){const B=De.indexOf("="),[Pe,Ge]=-1==B?[De,""]:[De.slice(0,B),De.slice(B+1)];if(Pe.trim()===Ce)return decodeURIComponent(Ge)}return null}b.d(ot,{N:()=>o,b:()=>i});class o{}},2541($t,ot,b){"use strict";b.d(ot,{c:()=>Pe});var i=b(5705),o=b(9596);let D;const De=(Ge,pe,ie)=>{const Ae=pe.startsWith("animation")?(Ge=>(void 0===D&&(D=void 0===Ge.style.animationName&&void 0!==Ge.style.webkitAnimationName?"-webkit-":""),D))(Ge):"";Ge.style.setProperty(Ae+pe,ie)},B=(Ge=[],pe)=>{if(void 0!==pe){const ie=Array.isArray(pe)?pe:[pe];return[...Ge,...ie]}return Ge},Pe=Ge=>{let pe,ie,Ae,l,p,m,V,Ne,he,Le,we,y=[],v=[],M=[],R=!1,ce={},z=[],te=[],K={},le=0,ae=!1,ve=!1,re=!0,Ke=!1,Fe=!0,Oe=!1;const Ye=Ge,Ve=[],be=[],q=[],ge=[],Ie=[],He=[],tt=[],dt=[],St=[],vt=[],Ft=[],lt="function"==typeof AnimationEffect||void 0!==o.w&&"function"==typeof o.w.AnimationEffect,Ut="function"==typeof Element&&"function"==typeof Element.prototype.animate&&lt,ut=()=>Ft,_t=(Ee,et)=>{const bt=et.findIndex(zt=>zt.c===Ee);bt>-1&&et.splice(bt,1)},Xt=(Ee,et)=>((et?.oneTimeCallback?be:Ve).push({c:Ee,o:et}),we),Un=()=>{Ut&&(Ft.forEach(Ee=>{Ee.cancel()}),Ft.length=0)},Cn=()=>{He.forEach(Ee=>{Ee?.parentNode&&Ee.parentNode.removeChild(Ee)}),He.length=0},lr=()=>void 0!==p?p:V?V.getFill():"both",fr=()=>void 0!==Ne?Ne:void 0!==m?m:V?V.getDirection():"normal",_r=()=>ae?"linear":void 0!==Ae?Ae:V?V.getEasing():"linear",Gn=()=>ve?0:void 0!==he?he:void 0!==ie?ie:V?V.getDuration():0,qn=()=>void 0!==l?l:V?V.getIterations():1,gr=()=>void 0!==Le?Le:void 0!==pe?pe:V?V.getDelay():0,Kt=()=>{0!==le&&(le--,0===le&&((()=>{St.forEach(pn=>pn()),vt.forEach(pn=>pn());const Ee=re?1:0,et=z,bt=te,zt=K;ge.forEach(pn=>{const Tn=pn.classList;et.forEach(Mn=>Tn.add(Mn)),bt.forEach(Mn=>Tn.remove(Mn));for(const Mn in zt)zt.hasOwnProperty(Mn)&&De(pn,Mn,zt[Mn])}),he=void 0,Ne=void 0,Le=void 0,Ve.forEach(pn=>pn.c(Ee,we)),be.forEach(pn=>pn.c(Ee,we)),be.length=0,Fe=!0,re&&(Ke=!0),re=!0})(),V&&V.animationFinish()))},rn=()=>{(()=>{tt.forEach(zt=>zt()),dt.forEach(zt=>zt());const Ee=v,et=M,bt=ce;ge.forEach(zt=>{const pn=zt.classList;Ee.forEach(Tn=>pn.add(Tn)),et.forEach(Tn=>pn.remove(Tn));for(const Tn in bt)bt.hasOwnProperty(Tn)&&De(zt,Tn,bt[Tn])})})(),y.length>0&&Ut&&(ge.forEach(Ee=>{const et=Ee.animate(y,{id:Ye,delay:gr(),duration:Gn(),easing:_r(),iterations:qn(),fill:lr(),direction:fr()});et.pause(),Ft.push(et)}),Ft.length>0&&(Ft[0].onfinish=()=>{Kt()})),R=!0},nn=Ee=>{Ee=Math.min(Math.max(Ee,0),.9999),Ut&&Ft.forEach(et=>{et.currentTime=et.effect.getComputedTiming().delay+Gn()*Ee,et.pause()})},Wn=Ee=>{Ft.forEach(et=>{et.effect.updateTiming({delay:gr(),duration:Gn(),easing:_r(),iterations:qn(),fill:lr(),direction:fr()})}),void 0!==Ee&&nn(Ee)},An=(Ee=!1,et=!0,bt)=>(Ee&&Ie.forEach(zt=>{zt.update(Ee,et,bt)}),Ut&&Wn(bt),we),hr=()=>{R&&(Ut?Ft.forEach(Ee=>{Ee.pause()}):ge.forEach(Ee=>{De(Ee,"animation-play-state","paused")}),Oe=!0)},xe=Ee=>new Promise(et=>{Ee?.sync&&(ve=!0,Xt(()=>ve=!1,{oneTimeCallback:!0})),R||rn(),Ke&&(Ut&&(nn(0),Wn()),Ke=!1),Fe&&(le=Ie.length+1,Fe=!1);const bt=()=>{_t(zt,be),et()},zt=()=>{_t(bt,q),et()};Xt(zt,{oneTimeCallback:!0}),(Ee=>{q.push({c:Ee,o:{oneTimeCallback:!0}})})(bt),Ie.forEach(pn=>{pn.play()}),Ut?(Ft.forEach(Ee=>{Ee.play()}),(0===y.length||0===ge.length)&&Kt()):Kt(),Oe=!1}),Ze=(Ee,et)=>{const bt=y[0];return void 0===bt||void 0!==bt.offset&&0!==bt.offset?y=[{offset:0,[Ee]:et},...y]:bt[Ee]=et,we};return we={parentAnimation:V,elements:ge,childAnimations:Ie,id:Ye,animationFinish:Kt,from:Ze,to:(Ee,et)=>{const bt=y[y.length-1];return void 0===bt||void 0!==bt.offset&&1!==bt.offset?y=[...y,{offset:1,[Ee]:et}]:bt[Ee]=et,we},fromTo:(Ee,et,bt)=>Ze(Ee,et).to(Ee,bt),parent:Ee=>(V=Ee,we),play:xe,pause:()=>(Ie.forEach(Ee=>{Ee.pause()}),hr(),we),stop:()=>{Ie.forEach(Ee=>{Ee.stop()}),R&&(Un(),R=!1),ae=!1,ve=!1,Fe=!0,Ne=void 0,he=void 0,Le=void 0,le=0,Ke=!1,re=!0,Oe=!1,q.forEach(Ee=>Ee.c(0,we)),q.length=0},destroy:Ee=>(Ie.forEach(et=>{et.destroy(Ee)}),(Ee=>{Un(),Ee&&Cn()})(Ee),ge.length=0,Ie.length=0,y.length=0,Ve.length=0,be.length=0,R=!1,Fe=!0,we),keyframes:Ee=>{const et=y!==Ee;return y=Ee,et&&(Ee=>{Ut&&ut().forEach(et=>{const bt=et.effect;if(bt.setKeyframes)bt.setKeyframes(Ee);else{const zt=new KeyframeEffect(bt.target,Ee,bt.getTiming());et.effect=zt}})})(y),we},addAnimation:Ee=>{if(null!=Ee)if(Array.isArray(Ee))for(const et of Ee)et.parent(we),Ie.push(et);else Ee.parent(we),Ie.push(Ee);return we},addElement:Ee=>{if(null!=Ee)if(1===Ee.nodeType)ge.push(Ee);else if(Ee.length>=0)for(let et=0;et<Ee.length;et++)ge.push(Ee[et]);else(0,i.j)("createAnimation - Invalid addElement value.");return we},update:An,fill:Ee=>(p=Ee,An(!0),we),direction:Ee=>(m=Ee,An(!0),we),iterations:Ee=>(l=Ee,An(!0),we),duration:Ee=>(!Ut&&0===Ee&&(Ee=1),ie=Ee,An(!0),we),easing:Ee=>(Ae=Ee,An(!0),we),delay:Ee=>(pe=Ee,An(!0),we),getWebAnimations:ut,getKeyframes:()=>y,getFill:lr,getDirection:fr,getDelay:gr,getIterations:qn,getEasing:_r,getDuration:Gn,afterAddRead:Ee=>(St.push(Ee),we),afterAddWrite:Ee=>(vt.push(Ee),we),afterClearStyles:(Ee=[])=>{for(const et of Ee)K[et]="";return we},afterStyles:(Ee={})=>(K=Ee,we),afterRemoveClass:Ee=>(te=B(te,Ee),we),afterAddClass:Ee=>(z=B(z,Ee),we),beforeAddRead:Ee=>(tt.push(Ee),we),beforeAddWrite:Ee=>(dt.push(Ee),we),beforeClearStyles:(Ee=[])=>{for(const et of Ee)ce[et]="";return we},beforeStyles:(Ee={})=>(ce=Ee,we),beforeRemoveClass:Ee=>(M=B(M,Ee),we),beforeAddClass:Ee=>(v=B(v,Ee),we),onFinish:Xt,isRunning:()=>0!==le&&!Oe,progressStart:(Ee=!1,et)=>(Ie.forEach(bt=>{bt.progressStart(Ee,et)}),hr(),ae=Ee,R||rn(),An(!1,!0,et),we),progressStep:Ee=>(Ie.forEach(et=>{et.progressStep(Ee)}),nn(Ee),we),progressEnd:(Ee,et,bt)=>(ae=!1,Ie.forEach(zt=>{zt.progressEnd(Ee,et,bt)}),void 0!==bt&&(he=bt),Ke=!1,re=!0,0===Ee?(Ne="reverse"===fr()?"normal":"reverse","reverse"===Ne&&(re=!1),Ut?(An(),nn(1-et)):(Le=(1-et)*Gn()*-1,An(!1,!1))):1===Ee&&(Ut?(An(),nn(et)):(Le=et*Gn()*-1,An(!1,!1))),void 0!==Ee&&!V&&xe(),we)}}},2615($t,ot,b){"use strict";let i;function o(){return i}function D(P){const oe=i;return i=P,oe}b.d(ot,{JEi:()=>it,Isx:()=>st,EJG:()=>Cr,Yrj:()=>pr,VVG:()=>_n,Y20:()=>qt,SKP:()=>Fn,hk6:()=>ol,eVN:()=>Ei,b5C:()=>Ir,rQE:()=>io,X5O:()=>Kr,qFA:()=>Bt,qQL:()=>ir,abz:()=>Vr,tQN:()=>ue,pcR:()=>W,oMQ:()=>mo,Mlv:()=>xr,MZA:()=>rr,M0L:()=>xn,Z63:()=>Dr,VML:()=>sl,uvJ:()=>N,zcH:()=>gs,Wg1:()=>je,Yw1:()=>It,jgP:()=>Y,tcA:()=>Gt,ID:()=>Ro,YEL:()=>Xn,B9r:()=>ao,GBX:()=>wr,ZTf:()=>wi,nKC:()=>ln,zZn:()=>so,rJ1:()=>fi,nfM:()=>Ht,s6P:()=>Dt,K29:()=>Pt,CQl:()=>qn,p9y:()=>yn,zSs:()=>yr,ONQ:()=>Cn,hmW:()=>kr,yAH:()=>Un,KXn:()=>ho,oTH:()=>$r,Czx:()=>x,f7T:()=>gt,wVl:()=>Qr,GYQ:()=>Tc,u5s:()=>ms,rev:()=>Zo,Ds7:()=>Eo,e5P:()=>Me,Iaj:()=>Te,GpT:()=>Sr,buA:()=>y,AQb:()=>Ea,jNX:()=>as,eDl:()=>fe,qlT:()=>Lt,bm_:()=>Rt,RxE:()=>Ae,r4V:()=>wc,ok8:()=>m,Evm:()=>Ic,Jy$:()=>Mc,laP:()=>R,EYC:()=>wn,ng7:()=>Wr,llW:()=>nr,gsJ:()=>cr,GZS:()=>_o,iYM:()=>dt,PEr:()=>Wo,z7f:()=>vt,LZP:()=>Ft,Xln:()=>Oe,yzR:()=>is,TWe:()=>Us,LIA:()=>we,GWr:()=>Ie,pbo:()=>He,bBq:()=>Io,Af3:()=>me,zQk:()=>Ko,oZy:()=>Mi,tF7:()=>lt,ZFY:()=>Lr,cP4:()=>qo,MdC:()=>ri,XvL:()=>q,KET:()=>co,Tkx:()=>ss,iw4:()=>Ye,tdH:()=>xh,pr_:()=>ut,IAh:()=>be,U45:()=>re,WrV:()=>Ke,kNT:()=>Ut,MI:()=>$s,biv:()=>$i,ZQF:()=>Ve,Cv0:()=>Fe,W0r:()=>Hr,R2n:()=>mn,O8q:()=>Xe,VKj:()=>de,Rom:()=>on,z6V:()=>Tn,n$e:()=>le,hjC:()=>bt,Pz9:()=>dr,PQT:()=>kt,VX4:()=>jt,_Z$:()=>vn,N79:()=>ds,xLP:()=>zn,zuh:()=>fr,BI7:()=>lr,U7d:()=>Vn,uXy:()=>or,nZS:()=>Qn,ihb:()=>c,ID8:()=>d,gv8:()=>Sc,dwj:()=>te,Bqz:()=>Pr,OsK:()=>M,Rfq:()=>Ne,c$7:()=>Ji,gxQ:()=>ps,ckz:()=>li,kLh:()=>z,xUg:()=>Re,KdJ:()=>Jr,db4:()=>oi,VPL:()=>Qi,MT:()=>Ai,Z9v:()=>Yi,Ab:()=>bi,w7Z:()=>$o,Mx4:()=>qi,veI:()=>Jo,HaV:()=>F,Agf:()=>ze,znI:()=>js,wGu:()=>tr,ebl:()=>bn,OAn:()=>Gi,_0$:()=>si,UaU:()=>Qe,vaC:()=>pi,d31:()=>Bi,ZRn:()=>ji,phH:()=>Br,WbQ:()=>jr,WB9:()=>ee,d_l:()=>_i,vNG:()=>zo,oyA:()=>_,_px:()=>h,CpD:()=>E,XRZ:()=>ls,klJ:()=>Xi,Fje:()=>Uo,b$O:()=>zs,SMZ:()=>ce,WQX:()=>et,MzJ:()=>dn,jXY:()=>Ue,MME:()=>Nr,JlV:()=>vo,Qs1:()=>Yn,srX:()=>ar,vOT:()=>gi,YWB:()=>Ws,EPY:()=>L,yoD:()=>Zr,P3H:()=>ui,Jzi:()=>Le,rFz:()=>Ks,JjR:()=>Ci,M6u:()=>wo,KtD:()=>ci,muV:()=>_t,A0l:()=>gn,q$2:()=>Sn,yP_:()=>eo,EFk:()=>Fr,Hps:()=>Zi,UhH:()=>Ho,QuC:()=>k,Y3W:()=>jn,n$r:()=>Rh,K7h:()=>Ar,FRF:()=>Rr,ezK:()=>Tr,m7n:()=>sn,niQ:()=>ne,krE:()=>Vs,bll:()=>Se,Hh6:()=>No,EmA:()=>C,blu:()=>Ki,HAh:()=>ii,WfI:()=>sr,xbp:()=>Ri,jvu:()=>Be,lQ1:()=>il,Rc9:()=>Xr,E6O:()=>$n,DyX:()=>Oi,eFE:()=>Or,dMS:()=>Fo,HUe:()=>cs,nl4:()=>he,N4e:()=>ni,XaM:()=>_r,Kw3:()=>Si,vQI:()=>Hs,RZ9:()=>Yo,GA0:()=>f,iMd:()=>fs,Pfq:()=>Xo,xyx:()=>xi,a2B:()=>In,kcM:()=>Dn,DFp:()=>wt,P2g:()=>Di,cBl:()=>hs,ypq:()=>S,vPA:()=>Ph,HO5:()=>Ac,M_e:()=>Bs,B22:()=>yi,ik5:()=>vi,AsM:()=>K,PP7:()=>Jn,$8:()=>St,$Hz:()=>rn,zAe:()=>hi,IvY:()=>xo,_gW:()=>us,F1c:()=>Vi,ITl:()=>Wi,brz:()=>pt,jRZ:()=>mi,SX7:()=>Vt,jDH:()=>xt,G2t:()=>Jt,fuf:()=>ya,cSN:()=>Hi,KVO:()=>We,dmw:()=>Ee,joV:()=>Z,By9:()=>$,qSk:()=>w,Njj:()=>Go,eBV:()=>Pi});const De=Symbol("NotFound");function Pe(P){return P===De||"\u0275NotFound"===P?.name}Error;var Ge=b(8440),pe=b(4412),ie=b(1985);class Ae{full;major;minor;patch;constructor(oe){this.full=oe;const $e=oe.split(".");this.major=$e[0],this.minor=$e[1],this.patch=$e.slice(2).join(".")}}const m="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class y extends Error{code;constructor(oe,$e){super(M(oe,$e)),this.code=oe}}function M(P,oe){return`${function v(P){return`NG0${Math.abs(P)}`}(P)}${oe?": "+oe:""}`}const R=globalThis;function ce(){return!1}function z(P){for(let oe in P)if(P[oe]===z)return oe;throw Error("")}function te(P,oe){for(const $e in oe)oe.hasOwnProperty($e)&&!P.hasOwnProperty($e)&&(P[$e]=oe[$e])}function K(P){if("string"==typeof P)return P;if(Array.isArray(P))return`[${P.map(K).join(", ")}]`;if(null==P)return""+P;const oe=P.overriddenName||P.name;if(oe)return`${oe}`;const $e=P.toString();if(null==$e)return""+$e;const At=$e.indexOf("\n");return At>=0?$e.slice(0,At):$e}function le(P,oe){return P?oe?`${P} ${oe}`:P:oe||""}const ve=z({__forward_ref__:z});function Ne(P){return P.__forward_ref__=Ne,P.toString=function(){return K(this())},P}function he(P){return Le(P)?P():P}function Le(P){return"function"==typeof P&&P.hasOwnProperty(ve)&&P.__forward_ref__===Ne}function re(P,oe){"number"!=typeof P&&St(oe,typeof P,"number","===")}function Ke(P,oe,$e){re(P,"Expected a number"),function ge(P,oe,$e){P<=oe||St($e,P,oe,"<=")}(P,$e,"Expected number to be less than or equal to"),He(P,oe,"Expected number to be greater than or equal to")}function Fe(P,oe){"string"!=typeof P&&St(oe,null===P?"null":typeof P,"string","===")}function we(P,oe){"function"!=typeof P&&St(oe,null===P?"null":typeof P,"function","===")}function Oe(P,oe,$e){P!=oe&&St($e,P,oe,"==")}function Ye(P,oe,$e){P==oe&&St($e,P,oe,"!=")}function Ve(P,oe,$e){P!==oe&&St($e,P,oe,"===")}function be(P,oe,$e){P===oe&&St($e,P,oe,"!==")}function q(P,oe,$e){P<oe||St($e,P,oe,"<")}function Ie(P,oe,$e){P>oe||St($e,P,oe,">")}function He(P,oe,$e){P>=oe||St($e,P,oe,">=")}function dt(P,oe){null==P&&St(oe,P,null,"!=")}function St(P,oe,$e,At){throw new Error(`ASSERTION ERROR: ${P}`+(null==At?"":` [Expected=> ${$e} ${At} ${oe} <=Actual]`))}function vt(P){P instanceof Node||St(`The provided value must be an instance of a DOM Node but got ${K(P)}`)}function Ft(P){P instanceof Element||St(`The provided value must be an element but got ${K(P)}`)}function lt(P,oe){dt(P,"Array must be defined.");const $e=P.length;(oe<0||oe>=$e)&&St(`Index expected to be less than ${$e} but got ${oe}`)}function Ut(P,...oe){if(-1!==oe.indexOf(P))return!0;St(`Expected value to be one of ${JSON.stringify(oe)} but was ${JSON.stringify(P)}.`)}function ut(P){null!==(0,Ge.nR)()&&St(`${P}() should never be called in a reactive context.`)}function xt(P){return{token:P.token,providedIn:P.providedIn||null,factory:P.factory,value:void 0}}function Jt(P){return{providers:P.providers||[],imports:P.imports||[]}}function ct(P){return function Et(P,oe){return P.hasOwnProperty(oe)&&P[oe]||null}(P,Un)}function _t(P){return null!==ct(P)}function bn(P){return P&&P.hasOwnProperty(Cn)?P[Cn]:null}const Un=z({\u0275prov:z}),Cn=z({\u0275inj:z});class ln{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(oe,$e){this._desc=oe,this.\u0275prov=void 0,"number"==typeof $e?this.__NG_ELEMENT_ID__=$e:void 0!==$e&&(this.\u0275prov=xt({token:this,providedIn:$e.providedIn||"root",factory:$e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}let Mt;function hn(){return St("getInjectorProfilerContext should never be called in production mode"),Mt}function wt(P){St("setInjectorProfilerContext should never be called in production mode");const oe=Mt;return Mt=P,oe}const Nt=[],en=()=>{};function Dn(P){return St("setInjectorProfiler should never be called in production mode"),null!==P?(Nt.includes(P)||Nt.push(P),()=>function cn(P){const oe=Nt.indexOf(P);-1!==oe&&Nt.splice(oe,1)}(P)):(Nt.length=0,en)}function Zn(P){St("Injector profiler should never be called in production mode");for(let oe=0;oe<Nt.length;oe++)(0,Nt[oe])(P)}function Qn(P,oe=!1){let $e;St("Injector profiler should never be called in production mode"),$e="function"==typeof P||P instanceof ln?P:he(P.provide);let At=P;P instanceof ln&&(At=P.\u0275prov||P),Zn({type:2,context:hn(),providerRecord:{token:$e,provider:At,isViewProvider:oe}})}function Vn(P){St("Injector profiler should never be called in production mode"),Zn({type:4,context:hn(),token:P})}function or(P){St("Injector profiler should never be called in production mode"),Zn({type:1,context:hn(),instance:{value:P}})}function lr(P,oe,$e){St("Injector profiler should never be called in production mode"),Zn({type:0,context:hn(),service:{token:P,value:oe,flags:$e}})}function fr(P){St("Injector profiler should never be called in production mode"),Zn({type:3,context:hn(),effect:P})}function _r(P,oe,$e){St("runInInjectorProfilerContext should never be called in production mode");const At=wt({injector:P,token:oe});try{$e()}finally{wt(At)}}function Gn(P){return P&&!!P.\u0275providers}const qn=z({\u0275cmp:z}),gr=z({\u0275dir:z}),mr=z({\u0275pipe:z}),kr=z({\u0275mod:z}),yr=z({\u0275fac:z}),yn=z({__NG_ELEMENT_ID__:z}),Er=z({__NG_ENV_ID__:z});function Or(P){return"string"==typeof P?P:null==P?"":String(P)}function Jn(P){return"function"==typeof P?P.name||P.toString():"object"==typeof P&&null!=P&&"function"==typeof P.type?P.type.name||P.type.toString():Or(P)}function vn(P){let oe=P[qn]||null;return null!==oe&&oe.debugInfo?function qe(P){return P.filePath&&P.lineNumber?`${P.className} (at ${P.filePath}:${P.lineNumber})`:P.className}(oe.debugInfo):Jn(P)}const Je=z({ngErrorCode:z}),Ct=z({ngErrorMessage:z}),mt=z({ngTokenPath:z});function kt(P,oe){return An("",-200,oe)}function jt(P,oe){return function Wn(P,oe){return P.message=function Bn(P,oe,$e=[],At=null){let Wt="";$e&&$e.length>1&&(Wt=` Path: ${$e.join(" -> ")}.`);return M(oe,`${P}${At?` Source: ${At}.`:""}${Wt}`)}(P[Ct]||P.message,P[Je],P[mt],oe),P}(kt(0,oe),null)}function rn(P,oe){throw new y(-201,!1)}function An(P,oe,$e){const At=new y(oe,P);return At[Je]=oe,At[Ct]=P,$e&&(At[mt]=$e),At}let br;function hr(){return br}function In(P){const oe=br;return br=P,oe}function dn(P,oe,$e){const At=ct(P);return At&&"root"==At.providedIn?void 0===At.value?At.value=At.factory():At.value:8&$e?null:void 0!==oe?oe:void rn()}function Lr(P){}const xe={},nt="__NG_DI_FLAG__";class Ze{injector;constructor(oe){this.injector=oe}retrieve(oe,$e){const At=bt($e)||0;try{return this.injector.get(oe,8&At?null:xe,At)}catch(Wt){if(Pe(Wt))return Wt;throw Wt}}}function ye(P,oe=0){const $e=o();if(void 0===$e)throw new y(-203,!1);if(null===$e)return dn(P,void 0,oe);{const At=function zt(P){return{optional:!!(8&P),host:!!(1&P),self:!!(2&P),skipSelf:!!(4&P)}}(oe),Wt=$e.retrieve(P,At);if(Pe(Wt)){if(At.optional)return null;throw Wt}return Wt}}function We(P,oe=0){return(hr()||ye)(he(P),oe)}function Ee(P){throw new y(202,!1)}function et(P,oe){return We(P,bt(oe))}function bt(P){return typeof P>"u"||"number"==typeof P?P:0|(P.optional&&8)|(P.host&&1)|(P.self&&2)|(P.skipSelf&&4)}function pn(P){const oe=[];for(let $e=0;$e<P.length;$e++){const At=he(P[$e]);if(Array.isArray(At)){if(0===At.length)throw new y(900,!1);let Wt,Ln=0;for(let no=0;no<At.length;no++){const ko=At[no],bo=Mn(ko);"number"==typeof bo?-1===bo?Wt=ko.token:Ln|=bo:Wt=ko}oe.push(We(Wt,Ln))}else oe.push(We(At))}return oe}function Tn(P,oe){return P[nt]=oe,P.prototype[nt]=oe,P}function Mn(P){return P[nt]}function tr(P,oe){return P.hasOwnProperty(yr)?P[yr]:null}function Wr(P,oe,$e){if(P.length!==oe.length)return!1;for(let At=0;At<P.length;At++){let Wt=P[At],Ln=oe[At];if($e&&(Wt=$e(Wt),Ln=$e(Ln)),Ln!==Wt)return!1}return!0}function Pr(P){return P.flat(Number.POSITIVE_INFINITY)}function zn(P,oe){P.forEach($e=>Array.isArray($e)?zn($e,oe):oe($e))}function wn(P,oe,$e){oe>=P.length?P.push($e):P.splice(oe,0,$e)}function $n(P,oe){return oe>=P.length-1?P.pop():P.splice(oe,1)[0]}function sr(P,oe){const $e=[];for(let At=0;At<P;At++)$e.push(oe);return $e}function cr(P,oe,$e){const At=P.length-$e;for(;oe<At;)P[oe]=P[oe+$e],oe++;for(;$e--;)P.pop()}function nr(P,oe,$e,At){let Wt=P.length;if(Wt==oe)P.push($e,At);else if(1===Wt)P.push(At,P[0]),P[0]=$e;else{for(Wt--,P.push(P[Wt-1],P[Wt]);Wt>oe;)P[Wt]=P[Wt-2],Wt--;P[oe]=$e,P[oe+1]=At}}function Tr(P,oe,$e){let At=Rr(P,oe);return At>=0?P[1|At]=$e:(At=~At,nr(P,At,oe,$e)),At}function Ar(P,oe){const $e=Rr(P,oe);if($e>=0)return P[1|$e]}function Rr(P,oe){return function Mr(P,oe,$e){let At=0,Wt=P.length>>$e;for(;Wt!==At;){const Ln=At+(Wt-At>>1),no=P[Ln<<$e];if(oe===no)return Ln<<$e;no>oe?Wt=Ln:At=Ln+1}return~(Wt<<$e)}(P,oe,1)}const rr={},xr=[],Dr=new ln(""),Gr=new ln("",-1),ao=new ln("");class $r{get(oe,$e=xe){if($e===xe){const Wt=An("",-201);throw Wt.name="\u0275NotFound",Wt}return $e}}function Br(P){return P[kr]||null}function jr(P){const oe=Br(P);if(!oe)throw new y(915,!1);return oe}function Re(P){return P[qn]||null}function ze(P){const oe=F(P);if(!oe)throw new y(916,!1);return oe}function F(P){return P[gr]||null}function _(P){return P[mr]||null}function k(P){const oe=Re(P)||F(P)||_(P);return null!==oe&&oe.standalone}function C(P){return{\u0275providers:P}}function H(...P){return{\u0275providers:Ue(0,P),\u0275fromNgModule:!0}}function Ue(P,...oe){const $e=[],At=new Set;let Wt;const Ln=no=>{$e.push(no)};return zn(oe,no=>{const ko=no;pt(ko,Ln,[],At)&&(Wt||=[],Wt.push(ko))}),void 0!==Wt&&ft(Wt,Ln),$e}function ft(P,oe){for(let $e=0;$e<P.length;$e++){const{ngModule:At,providers:Wt}=P[$e];un(Wt,Ln=>{oe(Ln,At)})}}function pt(P,oe,$e,At){if(!(P=he(P)))return!1;let Wt=null,Ln=bn(P);const no=!Ln&&Re(P);if(Ln||no){if(no&&!no.standalone)return!1;Wt=P}else{const bo=P.ngModule;if(Ln=bn(bo),!Ln)return!1;Wt=bo}const ko=At.has(Wt);if(no){if(ko)return!1;if(At.add(Wt),no.dependencies){const bo="function"==typeof no.dependencies?no.dependencies():no.dependencies;for(const uo of bo)pt(uo,oe,$e,At)}}else{if(!Ln)return!1;{if(null!=Ln.imports&&!ko){let uo;At.add(Wt);try{zn(Ln.imports,Li=>{pt(Li,oe,$e,At)&&(uo||=[],uo.push(Li))})}finally{}void 0!==uo&&ft(uo,oe)}if(!ko){const uo=tr(Wt)||(()=>new Wt);oe({provide:Wt,useFactory:uo,deps:xr},Wt),oe({provide:ao,useValue:Wt,multi:!0},Wt),oe({provide:Dr,useValue:()=>We(Wt),multi:!0},Wt)}const bo=Ln.providers;if(null!=bo&&!ko){const uo=P;un(bo,Li=>{oe(Li,uo)})}}}return Wt!==P&&void 0!==P.providers}function un(P,oe){for(let $e of P)Gn($e)&&($e=$e.\u0275providers),Array.isArray($e)?un($e,oe):oe($e)}const Rn=z({provide:String,useValue:z});function En(P){return null!==P&&"object"==typeof P&&Rn in P}function jn(P){return"function"==typeof P}function Nr(P){return!!P.useClass}const wr=new ln(""),ur={},X={};let Kn;function ee(){return void 0===Kn&&(Kn=new $r),Kn}class N{}class Me extends N{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(oe,$e,At,Wt){super(),this.parent=$e,this.source=At,this.scopes=Wt,Ao(oe,no=>this.processProvider(no)),this.records.set(Gr,So(void 0,this)),Wt.has("environment")&&this.records.set(N,So(void 0,this));const Ln=this.records.get(wr);null!=Ln&&"string"==typeof Ln.value&&this.scopes.add(Ln.value),this.injectorDefTypes=new Set(this.get(ao,xr,{self:!0}))}retrieve(oe,$e){const At=bt($e)||0;try{return this.get(oe,xe,At)}catch(Wt){if(Pe(Wt))return Wt;throw Wt}}destroy(){oo(this),this._destroyed=!0;const oe=(0,Ge.Ht)(null);try{for(const At of this._ngOnDestroyHooks)At.ngOnDestroy();const $e=this._onDestroyHooks;this._onDestroyHooks=[];for(const At of $e)At()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),(0,Ge.Ht)(oe)}}onDestroy(oe){return oo(this),this._onDestroyHooks.push(oe),()=>this.removeOnDestroy(oe)}runInContext(oe){oo(this);const $e=D(this),At=In(void 0);try{return oe()}finally{D($e),In(At)}}get(oe,$e=xe,At){if(oo(this),oe.hasOwnProperty(Er))return oe[Er](this);const Wt=bt(At),no=D(this),ko=In(void 0);try{if(!(4&Wt)){let uo=this.records.get(oe);if(void 0===uo){const Li=function ti(P){return"function"==typeof P||"object"==typeof P&&"InjectionToken"===P.ngMetadataName}(oe)&&ct(oe);uo=Li&&this.injectableDefInScope(Li)?So(Nn(oe),ur):null,this.records.set(oe,uo)}if(null!=uo)return this.hydrate(oe,uo,Wt)}return(2&Wt?ee():this.parent).get(oe,$e=8&Wt&&$e===xe?null:$e)}catch(bo){const uo=function er(P){return P[Je]}(bo);throw-200===uo||-201===uo?new y(uo,null):bo}finally{In(ko),D(no)}}resolveInjectorInitializers(){const oe=(0,Ge.Ht)(null),$e=D(this),At=In(void 0);try{const Ln=this.get(Dr,xr,{self:!0});for(const no of Ln)no()}finally{D($e),In(At),(0,Ge.Ht)(oe)}}toString(){const oe=[],$e=this.records;for(const At of $e.keys())oe.push(K(At));return`R3Injector[${oe.join(", ")}]`}processProvider(oe){let $e=jn(oe=he(oe))?oe:he(oe&&oe.provide);const At=function zr(P){return En(P)?So(void 0,P.useValue):So(Xr(P),ur)}(oe);if(!jn(oe)&&!0===oe.multi){let Wt=this.records.get($e);Wt||(Wt=So(void 0,ur,!0),Wt.factory=()=>pn(Wt.multi),this.records.set($e,Wt)),$e=oe,Wt.multi.push(oe)}this.records.set($e,At)}hydrate(oe,$e,At){const Wt=(0,Ge.Ht)(null);try{if($e.value===X)throw kt(K(oe));return $e.value===ur&&($e.value=X,$e.value=$e.factory(void 0,At)),"object"==typeof $e.value&&$e.value&&function Co(P){return null!==P&&"object"==typeof P&&"function"==typeof P.ngOnDestroy}($e.value)&&this._ngOnDestroyHooks.add($e.value),$e.value}finally{(0,Ge.Ht)(Wt)}}injectableDefInScope(oe){if(!oe.providedIn)return!1;const $e=he(oe.providedIn);return"string"==typeof $e?"any"===$e||this.scopes.has($e):this.injectorDefTypes.has($e)}removeOnDestroy(oe){const $e=this._onDestroyHooks.indexOf(oe);-1!==$e&&this._onDestroyHooks.splice($e,1)}}function Nn(P){const oe=ct(P),$e=null!==oe?oe.factory:tr(P);if(null!==$e)return $e;if(P instanceof ln)throw new y(204,!1);if(P instanceof Function)return function vr(P){if(P.length>0)throw new y(204,!1);const $e=function Xt(P){return(P?.[Un]??null)||null}(P);return null!==$e?()=>$e.factory(P):()=>new P}(P);throw new y(204,!1)}function Xr(P,oe,$e){let At;if(jn(P)){const Wt=he(P);return tr(Wt)||Nn(Wt)}if(En(P))At=()=>he(P.useValue);else if(function Yt(P){return!(!P||!P.useFactory)}(P))At=()=>P.useFactory(...pn(P.deps||[]));else if(function Pn(P){return!(!P||!P.useExisting)}(P))At=(Wt,Ln)=>We(he(P.useExisting),void 0!==Ln&&8&Ln?8:void 0);else{const Wt=he(P&&(P.useClass||P.provide));if(!function go(P){return!!P.deps}(P))return tr(Wt)||Nn(Wt);At=()=>new Wt(...pn(P.deps))}return At}function oo(P){if(P.destroyed)throw new y(205,!1)}function So(P,oe,$e=!1){return{factory:P,value:oe,multi:$e?[]:void 0}}function Ao(P,oe){for(const $e of P)Array.isArray($e)?Ao($e,oe):$e&&Gn($e)?Ao($e.\u0275providers,oe):oe($e)}function ni(P,oe){let $e;P instanceof Me?(oo(P),$e=P):$e=new Ze(P);const Wt=D($e),Ln=In(void 0);try{return oe()}finally{D(Wt),In(Ln)}}function wo(){return void 0!==hr()||null!=o()}function me(P){if(!wo())throw new y(-203,!1)}const Y=0,fe=1,je=2,gt=3,Pt=4,Lt=5,Gt=6,_n=7,Fn=8,Xn=9,xn=10,Sr=11,Cr=12,pr=13,Kr=14,Ir=15,io=16,Qr=17,Eo=18,Ro=19,mo=20,x=21,W=22,ue=23,Te=24,it=25,st=26,It=27,Bt=6,Dt=7,Rt=8,Ht=9,qt=10;function Sn(P){return Array.isArray(P)&&"object"==typeof P[1]}function gn(P){return Array.isArray(P)&&!0===P[1]}function ar(P){return!!(4&P.flags)}function Yn(P){return P.componentOffset>-1}function Zr(P){return!(1&~P.flags)}function vo(P){return!!P.template}function Fr(P){return!!(512&P[je])}function L(P){return!(256&~P[je])}function de(P,oe){on(P,oe[fe])}function Xe(P,oe){const $e=oe+It;lt(P,$e),q($e,P[fe].bindingStartIndex,"TNodes should be created before any bindings")}function on(P,oe){mn(P);const $e=oe.data;for(let At=It;At<$e.length;At++)if($e[At]===P)return;St("This TNode does not belong to this TView.")}function mn(P){dt(P,"TNode must be defined"),P&&"object"==typeof P&&P.hasOwnProperty("directiveStylingLast")||St("Not of type TNode, got: "+P)}function Hr(P){dt(P,"Expected TIcu to be defined"),"number"!=typeof P.currentCaseLViewIndex&&St("Object is not of TIcu type.")}function _o(P,oe="Type passed in is not ComponentType, it does not have '\u0275cmp' property."){Re(P)||St(oe)}function co(P,oe="Type passed in is not NgModuleType, it does not have '\u0275mod' property."){Br(P)||St(oe)}function Io(P){dt(P,"currentTNode should exist!"),dt(P.parent,"currentTNode should have a parent")}function qo(P){dt(P,"LContainer must be defined"),Oe(gn(P),!0,"Expecting LContainer")}function ri(P){dt(P,"LView must be defined"),Oe(Sn(P),!0,"Expecting LView")}function is(P,oe){Oe(P.firstCreatePass,!0,oe||"Should only be called in first create pass.")}function Us(P,oe){Oe(P.firstUpdatePass,!0,"Should only be called in first update pass.")}function Wo(P){(void 0===P.type||null==P.selectors||void 0===P.inputs)&&St("Expected a DirectiveDef/ComponentDef and this object does not seem to have the expected shape.")}function Ko(P,oe){Qo(It,P.bindingStartIndex,oe)}function Mi(P,oe){Qo(P[1].expandoStartIndex,P.length,oe)}function Qo(P,oe,$e){P<=$e&&$e<oe||St(`Index out of range (expecting ${P} <= ${$e} < ${oe})`)}function $i(P,oe){dt(P[Ir],"Component views should exist."),dt(P[Ir][Lt].projection,"Components with projection nodes (<ng-content>) must have projection slots defined.")}function $s(P,oe){dt(P,"Component views should always have a parent view (component's host view)")}function ss(P,oe){Mi(P,oe),Mi(P,oe+8),re(P[oe+0],"injectorIndex should point to a bloom filter"),re(P[oe+1],"injectorIndex should point to a bloom filter"),re(P[oe+2],"injectorIndex should point to a bloom filter"),re(P[oe+3],"injectorIndex should point to a bloom filter"),re(P[oe+4],"injectorIndex should point to a bloom filter"),re(P[oe+5],"injectorIndex should point to a bloom filter"),re(P[oe+6],"injectorIndex should point to a bloom filter"),re(P[oe+7],"injectorIndex should point to a bloom filter"),re(P[oe+8],"injectorIndex should point to parent injector")}const as="svg",fi="math";function xo(P){for(;Array.isArray(P);)P=P[Y];return P}function hi(P){for(;Array.isArray(P);){if("object"==typeof P[1])return P;P=P[Y]}return null}function pi(P,oe){return xo(oe[P])}function Bi(P,oe){return xo(oe[P.index])}function ji(P,oe){const $e=null===P?-1:P.index;return-1!==$e?xo(oe[$e]):null}function ls(P,oe){return P.data[oe]}function No(P,oe){return P[oe]}function Bs(P,oe,$e,At){$e>=P.data.length&&(P.data[$e]=null,P.blueprint[$e]=null),oe[$e]=At}function Jr(P,oe){const $e=oe[P];return Sn($e)?$e:$e[Y]}function gi(P){return!(4&~P[je])}function Vi(P){return!(128&~P[je])}function Wi(P){return gn(P[gt])}function oi(P,oe){return null==oe?null:P[oe]}function cs(P){P[Qr]=0}function ii(P){1024&P[je]||(P[je]|=1024,Vi(P)&&Ki(P))}function mi(P,oe){for(;P>0;)oe=oe[Kr],P--;return oe}function Fo(P){return!!(9216&P[je]||P[Te]?.dirty)}function us(P){P[xn].changeDetectionScheduler?.notify(8),64&P[je]&&(P[je]|=1024),Fo(P)&&Ki(P)}function Ki(P){P[xn].changeDetectionScheduler?.notify(0);let oe=si(P);for(;null!==oe&&!(8192&oe[je])&&(oe[je]|=8192,Vi(oe));)oe=si(oe)}function vi(P,oe){if(L(P))throw new y(911,!1);null===P[x]&&(P[x]=[]),P[x].push(oe)}function Oi(P,oe){if(null===P[x])return;const $e=P[x].indexOf(oe);-1!==$e&&P[x].splice($e,1)}function si(P){const oe=P[gt];return gn(oe)?oe[gt]:oe}function _i(P){return P[_n]??=[]}function zo(P){return P.cleanup??=[]}function yi(P,oe,$e,At){const Wt=_i(oe);Wt.push($e),P.firstCreatePass&&zo(P).push(At,Wt.length-1)}const Hn={lFrame:U(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ei=function(P){return P[P.Off=0]="Off",P[P.Exhaustive=1]="Exhaustive",P[P.OnlyDirtyViews=2]="OnlyDirtyViews",P}(Ei||{});let ai=0,zi=!1;function js(){return Hn.lFrame.elementDepthCount}function Uo(){Hn.lFrame.elementDepthCount++}function ds(){Hn.lFrame.elementDepthCount--}function li(){return Hn.bindingsEnabled}function ci(){return null!==Hn.skipHydrationRootTNode}function Ho(P){return Hn.skipHydrationRootTNode===P}function Hi(){Hn.bindingsEnabled=!0}function ya(){Hn.bindingsEnabled=!1}function Vs(){Hn.skipHydrationRootTNode=null}function Gi(){return Hn.lFrame.lView}function Xi(){return Hn.lFrame.tView}function Pi(P){return Hn.lFrame.contextLView=P,P[Fn]}function Go(P){return Hn.lFrame.contextLView=null,P}function qi(){let P=Jo();for(;null!==P&&64===P.type;)P=P.parent;return P}function Jo(){return Hn.lFrame.currentTNode}function bi(){const P=Hn.lFrame,oe=P.currentTNode;return P.isParent?oe:oe.parent}function fs(P,oe){const $e=Hn.lFrame;$e.currentTNode=P,$e.isParent=oe}function Ws(){return Hn.lFrame.isParent}function Xo(){Hn.lFrame.isParent=!1}function Qi(){return Hn.lFrame.contextLView}function Ks(){return St("Must never be called in production mode"),ai!==Ei.Off}function ui(){return St("Must never be called in production mode"),ai===Ei.Exhaustive}function Di(P){St("Must never be called in production mode"),ai=P}function eo(){return zi}function hs(P){const oe=zi;return zi=P,oe}function ps(){const P=Hn.lFrame;let oe=P.bindingRootIndex;return-1===oe&&(oe=P.bindingRootIndex=P.tView.bindingStartIndex),oe}function Ji(){return Hn.lFrame.bindingIndex}function Si(P){return Hn.lFrame.bindingIndex=P}function Ri(){return Hn.lFrame.bindingIndex++}function zs(P){const oe=Hn.lFrame,$e=oe.bindingIndex;return oe.bindingIndex=oe.bindingIndex+P,$e}function Ci(){return Hn.lFrame.inI18n}function xi(P){Hn.lFrame.inI18n=P}function Hs(P,oe){const $e=Hn.lFrame;$e.bindingIndex=$e.bindingRootIndex=P,Yo(oe)}function Yi(){return Hn.lFrame.currentDirectiveIndex}function Yo(P){Hn.lFrame.currentDirectiveIndex=P}function Ai(P){const oe=Hn.lFrame.currentDirectiveIndex;return-1===oe?null:P[oe]}function $o(){return Hn.lFrame.currentQueryIndex}function f(P){Hn.lFrame.currentQueryIndex=P}function u(P){const oe=P[fe];return 2===oe.type?oe.declTNode:1===oe.type?P[Lt]:null}function c(P,oe,$e){if(4&$e){let Wt=oe,Ln=P;for(;!(Wt=Wt.parent,null!==Wt||1&$e||(Wt=u(Ln),null===Wt||(Ln=Ln[Kr],10&Wt.type))););if(null===Wt)return!1;oe=Wt,P=Ln}const At=Hn.lFrame=I();return At.currentTNode=oe,At.lView=P,!0}function d(P){const oe=I(),$e=P[fe];Hn.lFrame=oe,oe.currentTNode=$e.firstChild,oe.lView=P,oe.tView=$e,oe.contextLView=P,oe.bindingIndex=$e.bindingStartIndex,oe.inI18n=!1}function I(){const P=Hn.lFrame,oe=null===P?null:P.child;return null===oe?U(P):oe}function U(P){const oe={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:P,child:null,inI18n:!1};return null!==P&&(P.child=oe),oe}function G(){const P=Hn.lFrame;return Hn.lFrame=P.parent,P.currentTNode=null,P.lView=null,P}const ne=G;function Se(){const P=G();P.isParent=!0,P.tView=null,P.selectedIndex=-1,P.contextLView=null,P.elementDepthCount=0,P.currentDirectiveIndex=-1,P.currentNamespace=null,P.bindingRootIndex=-1,P.bindingIndex=-1,P.currentQueryIndex=0}function Be(P){return(Hn.lFrame.contextLView=mi(P,Hn.lFrame.contextLView))[Fn]}function h(){return Hn.lFrame.selectedIndex}function S(P){Hn.lFrame.selectedIndex=P}function E(){const P=Hn.lFrame;return ls(P.tView,P.selectedIndex)}function w(){Hn.lFrame.currentNamespace=as}function $(){Hn.lFrame.currentNamespace=fi}function Z(){!function _e(){Hn.lFrame.currentNamespace=null}()}function Qe(){return Hn.lFrame.currentNamespace}let ht=!0;function Vt(){return ht}function sn(P){ht=P}function fn(P,oe=null,$e=null,At){const Wt=dr(P,oe,$e,At);return Wt.resolveInjectorInitializers(),Wt}function dr(P,oe=null,$e=null,At,Wt=new Set){const Ln=[$e||xr,H(P)];return At=At||("object"==typeof P?void 0:K(P)),new Me(Ln,oe||ee(),At||null,Wt)}class so{static THROW_IF_NOT_FOUND=xe;static NULL=new $r;static create(oe,$e){if(Array.isArray(oe))return fn({name:""},$e,oe,"");{const At=oe.name??"";return fn({name:At},oe.parent,oe.providers,At)}}static \u0275prov=xt({token:so,providedIn:"any",factory:()=>We(Gr)});static __NG_ELEMENT_ID__=-1}const ir=new ln("");let Vr=(()=>class P{static __NG_ELEMENT_ID__=To;static __NG_ENV_ID__=$e=>$e})();class ho extends Vr{_lView;constructor(oe){super(),this._lView=oe}get destroyed(){return L(this._lView)}onDestroy(oe){const $e=this._lView;return vi($e,oe),()=>Oi($e,oe)}}function To(){return new ho(Gi())}class gs{_console=console;handleError(oe){this._console.error("ERROR",oe)}}const wi=new ln("",{providedIn:"root",factory:()=>{const P=et(N);let oe;return $e=>{P.destroyed&&!oe?setTimeout(()=>{throw $e}):(oe??=P.get(gs),oe.handleError($e))}}}),Sc={provide:Dr,useValue:()=>{et(gs)},multi:!0};function Zi(P){return"function"==typeof P&&void 0!==P[Ge.bh]}function Ph(P,oe){const[$e,At,Wt]=(0,Ge.n5)(P,oe?.equal),Ln=$e;return Ln.set=At,Ln.update=Wt,Ln.asReadonly=Ac.bind(Ln),Ln}function Ac(){const P=this[Ge.bh];if(void 0===P.readonlyFn){const oe=()=>this();oe[Ge.bh]=P,P.readonlyFn=oe}return P.readonlyFn}function Rh(P){return Zi(P)&&"function"==typeof P.set}function xh(P,oe){if(null!==(0,Ge.nR)())throw new y(-602,!1)}let wc=(()=>class P{view;node;constructor($e,At){this.view=$e,this.node=At}static __NG_ELEMENT_ID__=rl})();function rl(){return new wc(Gi(),qi())}class ol{}const Ic=new ln("",{providedIn:"root",factory:()=>!1}),Tc=new ln("",{providedIn:"root",factory:()=>!1}),Mc=new ln(""),Ea=new ln("");let Zo=(()=>{class P{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new pe.t(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ie.c($e=>{$e.next(!1),$e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const $e=this.taskId++;return this.pendingTasks.add($e),$e}has($e){return this.pendingTasks.has($e)}remove($e){this.pendingTasks.delete($e),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=xt({token:P,providedIn:"root",factory:()=>new P})}return P})(),ms=(()=>{class P{internalPendingTasks=et(Zo);scheduler=et(ol);errorHandler=et(wi);add(){const $e=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has($e)&&(this.scheduler.notify(11),this.internalPendingTasks.remove($e))}}run($e){const At=this.add();$e().catch(this.errorHandler).finally(At)}static \u0275prov=xt({token:P,providedIn:"root",factory:()=>new P})}return P})();function il(...P){}let sl=(()=>{class P{static \u0275prov=xt({token:P,providedIn:"root",factory:()=>new al})}return P})();class al{dirtyEffectCount=0;queues=new Map;add(oe){this.enqueue(oe),this.schedule(oe)}schedule(oe){oe.dirty&&this.dirtyEffectCount++}remove(oe){const At=this.queues.get(oe.zone);At.has(oe)&&(At.delete(oe),oe.dirty&&this.dirtyEffectCount--)}enqueue(oe){const $e=oe.zone;this.queues.has($e)||this.queues.set($e,new Set);const At=this.queues.get($e);At.has(oe)||At.add(oe)}flush(){for(;this.dirtyEffectCount>0;){let oe=!1;for(const[$e,At]of this.queues)oe||=null===$e?this.flushQueue(At):$e.run(()=>this.flushQueue(At));oe||(this.dirtyEffectCount=0)}}flushQueue(oe){let $e=!1;for(const At of oe)At.dirty&&(this.dirtyEffectCount--,$e=!0,At.run());return $e}}},2739($t,ot,b){"use strict";b.r(ot),b.d(ot,{Directory:()=>D.__,Encoding:()=>D.Wi,Filesystem:()=>Ce,FilesystemDirectory:()=>D.Vc,FilesystemEncoding:()=>D.Rz});var i=b(5083),o=b(8254),D=b(1889);const Ce=(0,i.registerPlugin)("Filesystem",{web:()=>b.e(2937).then(b.bind(b,2937)).then(De=>new De.FilesystemWeb)});(0,o.Y)()},3073($t,ot,b){"use strict";b.d(ot,{D:()=>De});const{isArray:i}=Array,{getPrototypeOf:o,prototype:D,keys:Ce}=Object;function De(Pe){if(1===Pe.length){const Ge=Pe[0];if(i(Ge))return{args:Ge,keys:null};if(function B(Pe){return Pe&&"object"==typeof Pe&&o(Pe)===D}(Ge)){const pe=Ce(Ge);return{args:pe.map(ie=>Ge[ie]),keys:pe}}}return{args:Pe,keys:null}}},3205($t,ot,b){"use strict";b.d(ot,{N:()=>Ae});var i=b(467),o=b(4412),D=b(3878),De=b(2084),B=b(2615),Pe=b(4938),Ge=b(5921),pe=b(5029),ie=b(8863);let Ae=(()=>{var l;class p{constructor(y,v,M,R){this.storage=y,this.router=v,this.supabase=M,this.monitoringLog=R,console.log("Auth: Constructor called"),this.currentUserSubject=new o.t(null),this.currentUser$=this.currentUserSubject.asObservable(),this.loadUserFromStorage(),console.log("Auth: Constructor complete")}loadUserFromStorage(){var y=this;return(0,i.A)(function*(){console.log("Auth: Loading user from storage");try{const v=yield y.storage.getUser();v?(v.username=v.username?.toLowerCase()||"",console.log("Auth: User loaded from storage:",v.username),y.currentUserSubject.next(v)):console.log("Auth: No user in storage")}catch(v){console.error("Auth: Error loading user from storage:",v)}})()}login(y,v){var M=this;return(0,i.A)(function*(){const R=y.trim().toLowerCase(),V=v.trim();try{const{data:ce,error:z}=yield M.supabase.getCustomUser(R);if(z||!ce)return{success:!1,error:"Invalid username or password"};if(!(yield D.compare(V,ce.password_hash)))return{success:!1,error:"Invalid username or password"};if((2===ce.level||3===ce.level||4===ce.level)&&!ce.level_approved){yield M.checkAndUpdateApprovedLevel(ce.email);const{data:K}=yield M.supabase.getCustomUser(R);if(K&&!K.level_approved){const ae=yield M.supabase.getHighestApprovedLevel(K.email);let ve;ve=1===ae?"L1 - School Club (Temporary Access)":2===ae?"L2 - Conservation Partner":"L3 - Superuser";const Ne={...K,level:ae,level_name:ve};return console.log(`Login: L${K.level} pending approval, granted L${ae} access temporarily`),M.setUser(Ne)}return M.setUser(K)}return M.setUser(ce)}catch{return{success:!1,error:"Login failed. Please try again."}}})()}register(y){var v=this;return(0,i.A)(function*(){const{username:M,email:R,password:V,level:ce,organization:z,confirmPassword:te}=y;if(!(M&&R&&V&&ce))return{success:!1,error:"All fields are required"};if(V!==te)return{success:!1,error:"Passwords do not match"};if(V.length<6)return{success:!1,error:"Password must be at least 6 characters"};try{const{exists:K}=yield v.supabase.checkUsernameExists(M.trim().toLowerCase());if(K)return{success:!1,error:"Username already exists"};const{exists:le}=yield v.supabase.checkEmailExists(R.trim().toLowerCase());if(le)return{success:!1,error:"Email already exists"};const ae=yield D.genSalt(10),ve=yield D.hash(V,ae),Ne=Number(ce),he=v.getLevelName(Ne),Le={username:M.trim().toLowerCase(),email:R.trim().toLowerCase(),password_hash:ve,level:Ne,level_name:he,level_approved:1===Ne,organization:z?.trim()},{data:re,error:Ke}=yield v.supabase.createCustomUser(Le);if(Ke||!re)return{success:!1,error:"Registration failed. Please try again."};if(2===Ne||3===Ne||4===Ne)try{yield v.supabase.getClient().functions.invoke("send-level-request",{body:{requesterEmail:Le.email,requesterUsername:Le.username,requestedLevel:Ne,reason:`New user registration - ${z||"No organization provided"}`,timestamp:(0,De.E)()}}),console.log("Level access request email sent to admin")}catch(Fe){console.error("Failed to send level access request email:",Fe)}return v.monitoringLog.recordUserRegistered(Le.username,Ne),{success:!0}}catch{return{success:!1,error:"Registration failed. Please try again."}}})()}getLevelName(y){switch(y){case 1:return"L1 - School Club";case 2:return"L2 - Conservation Partner";case 3:return"L3 - Superuser";case 4:return"L4 - Admin";default:return"Unknown Level"}}requestLevelAccess(y,v,M){var R=this;return(0,i.A)(function*(){const V=y.trim().toLowerCase();try{const{data:ce,error:z}=yield R.supabase.getCustomUser(V);if(z||!ce)return{success:!1,error:"User not found. Please check your username."};const{data:te}=yield R.supabase.checkPendingLevelRequest(V);if(te&&te.length>0){const ae=te[0];if(ae.requested_level>=v)return{success:!1,error:`You already have a pending request for L${ae.requested_level} access.`}}const{error:le}=yield R.supabase.getClient().functions.invoke("send-level-request",{body:{requesterEmail:ce.email,requesterUsername:V,requestedLevel:v,reason:M,timestamp:(0,De.E)()}});return le?{success:!1,error:"Failed to send request. Please try again."}:(R.monitoringLog.recordLevelRequest(V,v),{success:!0})}catch{return{success:!1,error:"Failed to send request. Please try again."}}})()}checkPendingRequest(y){var v=this;return(0,i.A)(function*(){try{const{data:M}=yield v.supabase.checkPendingLevelRequest(y);return!!(M&&M.length>0)}catch{return!1}})()}checkAndUpdateApprovedLevel(y){var v=this;return(0,i.A)(function*(){try{const{data:M}=yield v.supabase.checkApprovedLevelRequest(y);M&&M.length>0&&console.log("Approved level request found, user level will be updated on next login")}catch(M){console.warn("Error checking approved requests:",M)}})()}setUser(y){var v=this;return(0,i.A)(function*(){try{return y.username=y.username?.toLowerCase()||"",console.log("Auth: Setting user:",y.username),v.currentUserSubject.next(y),yield v.storage.setUser(y),console.log("Auth: User saved successfully"),v.monitoringLog.recordLogin(y.username),{success:!0}}catch(M){return console.error("Auth: Failed to save user:",M),v.currentUserSubject.next(y),{success:!0}}})()}logout(){var y=this;return(0,i.A)(function*(){const v=y.currentUserSubject.value;v&&(yield y.monitoringLog.recordLogout(v.username)),y.currentUserSubject.next(null),y.router.navigate(["/login"])})()}getCurrentUser(){return this.currentUserSubject.value}isAuthenticated(){return null!==this.currentUserSubject.value}hasMinimumLevel(y){const v=this.currentUserSubject.value;return!!v&&v.level>=y}getPermissions(){const y=this.currentUserSubject.value;if(!y)return{canAccessBiodiversity:!1,canAccessHealth:!1,canAccessThreats:!1};switch(y.level){case 1:case 2:case 3:case 4:return{canAccessBiodiversity:!0,canAccessHealth:!0,canAccessThreats:!0};default:return{canAccessBiodiversity:!1,canAccessHealth:!1,canAccessThreats:!1}}}static#e=l=()=>(this.\u0275fac=function(v){return new(v||p)(B.KVO(Pe.w),B.KVO(Ge.Ix),B.KVO(pe.L),B.KVO(ie.u))},this.\u0275prov=B.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}))}return l(),p})()},3494($t,ot,b){"use strict";b.d(ot,{s:()=>i});const i="function"==typeof Symbol&&Symbol.observable||"@@observable"},3664($t,ot,b){"use strict";b.d(ot,{$C:()=>Yg,$Ln:()=>Bm,AVh:()=>wd,Ab1:()=>As,Agw:()=>Xn,B4B:()=>xc,BIS:()=>Cr,BMQ:()=>Ju,C4Q:()=>Ma,C5r:()=>B_,C7A:()=>Cm,Co$:()=>qg,DH7:()=>S_,DNE:()=>Fu,DUP:()=>_s,DkB:()=>vd,E5c:()=>Od,EBC:()=>Hh,EFF:()=>s_,EJ8:()=>em,FsC:()=>Zg,G5x:()=>g0,GBs:()=>Bv,H1s:()=>Km,HbH:()=>Jv,JRh:()=>Td,Jt5:()=>pv,Jv_:()=>T_,KED:()=>Gw,Lme:()=>Md,NAR:()=>Fv,NCX:()=>Il,NOj:()=>qh,NSC:()=>pa,NYb:()=>CS,OA$:()=>Oe,OR8:()=>Ss,Ocv:()=>_I,Ol2:()=>xu,PLl:()=>Fn,PYt:()=>Xg,QTQ:()=>_g,Ql9:()=>hI,R50:()=>Pd,R7$:()=>np,RV6:()=>dv,SKi:()=>ro,SdG:()=>Uv,SdI:()=>iy,SpI:()=>vc,TFI:()=>Yl,Ts$:()=>ly,UQu:()=>dI,V5L:()=>oy,VBU:()=>Qg,VeQ:()=>Kr,VkB:()=>w_,Vt3:()=>ku,VzW:()=>Jb,XpG:()=>Nv,Xx1:()=>v,Y8G:()=>ad,YEm:()=>Lt,Zhj:()=>Wb,_9s:()=>gu,_9u:()=>Pt,_jY:()=>Mo,_qm:()=>Wr,_ys:()=>mp,a8H:()=>Aa,aKT:()=>wn,bIt:()=>Ed,bMT:()=>U_,bVm:()=>Ga,bkB:()=>Ni,c1b:()=>Vl,cDI:()=>FD,cZr:()=>jd,cdK:()=>Wm,czy:()=>hl,d80:()=>pI,dOL:()=>$m,e6s:()=>qC,eHC:()=>jl,eq3:()=>P_,eu8:()=>hd,gXe:()=>$o,giA:()=>jm,hnV:()=>zu,i5U:()=>$_,iLQ:()=>zm,j41:()=>lc,k0s:()=>cc,kBR:()=>md,kS0:()=>Ur,kdw:()=>R,lJ4:()=>O_,lJT:()=>Hm,lsd:()=>Vv,mGM:()=>jv,mal:()=>zc,mxI:()=>Rd,n$t:()=>Kh,nI1:()=>F_,nrm:()=>cd,o8S:()=>Jl,ozJ:()=>Eu,phd:()=>wS,pl0:()=>IS,qex:()=>uc,rXU:()=>ra,sFG:()=>XE,sZ2:()=>Gt,sdS:()=>Wv,sgu:()=>Hb,tSv:()=>zh,tvf:()=>de,uiO:()=>ce,utN:()=>ub,vDg:()=>Ag,w6W:()=>Qb,wni:()=>$v,xGo:()=>hr,xc7:()=>Ad,xe9:()=>cy,yLl:()=>Vm,ypd:()=>TS,zoo:()=>gp});var i=b(467),o=b(2615),D=b(8440),Ce=b(1413),De=b(8359),B=b(6354);function Pe(e){return{toString:e}.toString()}const Ge="__annotations__",pe="__parameters__",ie="__prop__metadata__";function Ae(e,t,n,r,s){return Pe(()=>{const a=l(t);function g(...A){if(this instanceof g)return a.call(this,...A),this;const T=new g(...A);return function(se){return s&&s(se,...A),(se.hasOwnProperty(Ge)?se[Ge]:Object.defineProperty(se,Ge,{value:[]})[Ge]).push(T),se}}return n&&(g.prototype=Object.create(n.prototype)),g.prototype.ngMetadataName=e,g.annotationCls=g,g})}function l(e){return function(...n){if(e){const r=e(...n);for(const s in r)this[s]=r[s]}}}function p(e,t,n){return Pe(()=>{const r=l(t);function s(...a){if(this instanceof s)return r.apply(this,a),this;const g=new s(...a);return A.annotation=g,A;function A(T,J,se){const ke=T.hasOwnProperty(pe)?T[pe]:Object.defineProperty(T,pe,{value:[]})[pe];for(;ke.length<=se;)ke.push(null);return(ke[se]=ke[se]||[]).push(g),T}}return s.prototype.ngMetadataName=e,s.annotationCls=s,s})}const y=(0,o.z6V)(p("Inject",e=>({token:e})),-1),v=(0,o.z6V)(p("Optional"),8),M=(0,o.z6V)(p("Self"),2),R=(0,o.z6V)(p("SkipSelf"),4),V=(0,o.z6V)(p("Host"),1);function ce(e){const t=o.laP.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}const z={\u0275\u0275defineInjectable:o.jDH,\u0275\u0275defineInjector:o.G2t,\u0275\u0275inject:o.KVO,\u0275\u0275invalidFactoryDep:o.dmw,resolveForwardRef:o.nl4},te=Function;function K(e){return"function"==typeof e}const le=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,ae=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,ve=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Ne=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class Le{_reflect;constructor(t){this._reflect=t||o.laP.Reflect}factory(t){return(...n)=>new t(...n)}_zipTypesAndAnnotations(t,n){let r;r=(0,o.WfI)(typeof t>"u"?n.length:t.length);for(let s=0;s<r.length;s++)r[s]=typeof t>"u"?[]:t[s]&&t[s]!=Object?[t[s]]:[],n&&null!=n[s]&&(r[s]=r[s].concat(n[s]));return r}_ownParameters(t,n){if(function he(e){return le.test(e)||Ne.test(e)||ae.test(e)&&!ve.test(e)}(t.toString()))return null;if(t.parameters&&t.parameters!==n.parameters)return t.parameters;const s=t.ctorParameters;if(s&&s!==n.ctorParameters){const A="function"==typeof s?s():s,T=A.map(se=>se&&se.type),J=A.map(se=>se&&re(se.decorators));return this._zipTypesAndAnnotations(T,J)}const a=t.hasOwnProperty(pe)&&t[pe],g=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return g||a?this._zipTypesAndAnnotations(g,a):(0,o.WfI)(t.length)}parameters(t){if(!K(t))return[];const n=Ke(t);let r=this._ownParameters(t,n);return!r&&n!==Object&&(r=this.parameters(n)),r||[]}_ownAnnotations(t,n){if(t.annotations&&t.annotations!==n.annotations){let r=t.annotations;return"function"==typeof r&&r.annotations&&(r=r.annotations),r}return t.decorators&&t.decorators!==n.decorators?re(t.decorators):t.hasOwnProperty(Ge)?t[Ge]:null}annotations(t){if(!K(t))return[];const n=Ke(t),r=this._ownAnnotations(t,n)||[];return(n!==Object?this.annotations(n):[]).concat(r)}_ownPropMetadata(t,n){if(t.propMetadata&&t.propMetadata!==n.propMetadata){let r=t.propMetadata;return"function"==typeof r&&r.propMetadata&&(r=r.propMetadata),r}if(t.propDecorators&&t.propDecorators!==n.propDecorators){const r=t.propDecorators,s={};return Object.keys(r).forEach(a=>{s[a]=re(r[a])}),s}return t.hasOwnProperty(ie)?t[ie]:null}propMetadata(t){if(!K(t))return{};const n=Ke(t),r={};if(n!==Object){const a=this.propMetadata(n);Object.keys(a).forEach(g=>{r[g]=a[g]})}const s=this._ownPropMetadata(t,n);return s&&Object.keys(s).forEach(a=>{const g=[];r.hasOwnProperty(a)&&g.push(...r[a]),g.push(...s[a]),r[a]=g}),r}ownPropMetadata(t){return K(t)&&this._ownPropMetadata(t,Ke(t))||{}}hasLifecycleHook(t,n){return t instanceof te&&n in t.prototype}}function re(e){return e?e.map(t=>new(0,t.type.annotationCls)(...t.args?t.args:[])):[]}function Ke(e){const t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}class Fe{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function we(e,t,n,r){null!==t?t.applyValueToInputSignal(t,r):e[n]=r}const Oe=(()=>{const e=()=>Ye;return e.ngInherit=!0,e})();function Ye(e){return e.type.prototype.ngOnChanges&&(e.setInput=be),Ve}function Ve(){const e=ge(this),t=e?.current;if(t){const n=e.previous;if(n===o.MZA)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function be(e,t,n,r,s){const a=this.declaredInputs[r],g=ge(e)||function Ie(e,t){return e[q]=t}(e,{previous:o.MZA,current:null}),A=g.current||(g.current={}),T=g.previous,J=T[a];A[a]=new Fe(J&&J.currentValue,n,T===o.MZA),we(e,t,s,n)}const q="__ngSimpleChanges__";function ge(e){return e[q]||null}const He=[],vt=function(e,t=null,n){for(let r=0;r<He.length;r++)(0,He[r])(e,t,n)};function lt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const a=e.data[n].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:A,ngAfterViewInit:T,ngAfterViewChecked:J,ngOnDestroy:se}=a;g&&(e.contentHooks??=[]).push(-n,g),A&&((e.contentHooks??=[]).push(n,A),(e.contentCheckHooks??=[]).push(n,A)),T&&(e.viewHooks??=[]).push(-n,T),J&&((e.viewHooks??=[]).push(n,J),(e.viewCheckHooks??=[]).push(n,J)),null!=se&&(e.destroyHooks??=[]).push(n,se)}}function Ut(e,t,n){Tt(e,t,3,n)}function ut(e,t,n,r){(3&e[o.Wg1])===n&&Tt(e,t,n,r)}function xt(e,t){let n=e[o.Wg1];(3&n)===t&&(n&=16383,n+=1,e[o.Wg1]=n)}function Tt(e,t,n,r){const a=r??-1,g=t.length-1;let A=0;for(let T=void 0!==r?65535&e[o.wVl]:0;T<g;T++)if("number"==typeof t[T+1]){if(A=t[T],null!=r&&A>=r)break}else t[T]<0&&(e[o.wVl]+=65536),(A<a||-1==a)&&(ct(e,n,t,T),e[o.wVl]=(4294901760&e[o.wVl])+T+2),T++}function Jt(e,t){vt(4,e,t);const n=(0,D.Ht)(null);try{t.call(e)}finally{(0,D.Ht)(n),vt(5,e,t)}}function ct(e,t,n,r){const s=n[r]<0,a=n[r+1],A=e[s?-n[r]:n[r]];s?e[o.Wg1]>>14<e[o.wVl]>>16&&(3&e[o.Wg1])===t&&(e[o.Wg1]+=16384,Jt(A,a)):Jt(A,a)}class Et{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,s){this.factory=t,this.name=s,this.canSeeViewProviders=n,this.injectImpl=r}}function bn(e){return null!=e&&"object"==typeof e&&(null===e.insertBeforeIndex||"number"==typeof e.insertBeforeIndex||Array.isArray(e.insertBeforeIndex))}function Nt(e){return 3===e||4===e||6===e}function en(e){return 64===e.charCodeAt(0)}function cn(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const s=t[r];"number"==typeof s?n=s:0===n||Dn(e,n,s,0,-1===n||2===n?t[++r]:null)}}return e}function Dn(e,t,n,r,s){let a=0,g=e.length;if(-1===t)g=-1;else for(;a<e.length;){const A=e[a++];if("number"==typeof A){if(A===t){g=-1;break}if(A>t){g=a-1;break}}}for(;a<e.length;){const A=e[a];if("number"==typeof A)break;if(A===n)return void(null!==s&&(e[a+1]=s));a++,null!==s&&a++}-1!==g&&(e.splice(g,0,t),a=g+1),e.splice(a++,0,n),null!==s&&e.splice(a++,0,s)}function Zn(e){return-1!==e}function Qn(e){return 32767&e}function or(e,t){let n=function Vn(e){return e>>16}(e),r=t;for(;n>0;)r=r[o.X5O],n--;return r}let lr=!0;function fr(e){const t=lr;return lr=e,t}let gr=0;const mr={};function yr(e,t){const n=Er(e,t);if(-1!==n)return n;const r=t[o.eDl];r.firstCreatePass&&(e.injectorIndex=t.length,yn(r.data,e),yn(t,null),yn(r.blueprint,null));const s=Or(e,t),a=e.injectorIndex;if(Zn(s)){const g=Qn(s),A=or(s,t),T=A[o.eDl].data;for(let J=0;J<8;J++)t[a+J]=A[g+J]|T[g+J]}return t[a+8]=s,a}function yn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Er(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Or(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,s=t;for(;null!==s;){if(r=Lr(s),null===r)return-1;if(n++,s=s[o.X5O],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Jn(e,t,n){!function kr(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(o.p9y)&&(r=n[o.p9y]),null==r&&(r=n[o.p9y]=gr++);const s=255&r;t.data[e+(s>>5)]|=1<<s}(e,t,n)}function qe(e,t,n){if(8&n||void 0!==e)return e;(0,o.$Hz)(t,"NodeInjector")}function Je(e,t,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const s=e[o.YEL],a=(0,o.a2B)(void 0);try{return s?s.get(t,r,8&n):(0,o.MzJ)(t,r,8&n)}finally{(0,o.a2B)(a)}}return qe(r,t,n)}function Ct(e,t,n,r=0,s){if(null!==e){if(2048&t[o.Wg1]&&!(2&r)){const g=function dn(e,t,n,r,s){let a=e,g=t;for(;null!==a&&null!==g&&2048&g[o.Wg1]&&!(0,o.EFk)(g);){const A=mt(a,g,n,2|r,mr);if(A!==mr)return A;let T=a.parent;if(!T){const J=g[o.oMQ];if(J){const se=J.get(n,mr,r);if(se!==mr)return se}T=Lr(g),g=g[o.X5O]}a=T}return s}(e,t,n,r,mr);if(g!==mr)return g}const a=mt(e,t,n,r,mr);if(a!==mr)return a}return Je(t,n,r,s)}function mt(e,t,n,r,s){const a=function rn(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(o.p9y)?e[o.p9y]:void 0;return"number"==typeof t?t>=0?255&t:br:t}(n);if("function"==typeof a){if(!(0,o.ihb)(t,e,r))return 1&r?qe(s,n,r):Je(t,n,r,s);try{let g;if(g=a(r),null!=g||8&r)return g;(0,o.$Hz)(n)}finally{(0,o.niQ)()}}else if("number"==typeof a){let g=null,A=Er(e,t),T=-1,J=1&r?t[o.b5C][o.qlT]:null;for((-1===A||4&r)&&(T=-1===A?Or(e,t):t[A+8],-1!==T&&Wn(r,!1)?(g=t[o.eDl],A=Qn(T),t=or(T,t)):A=-1);-1!==A;){const se=t[o.eDl];if(nn(a,A,se.data)){const ke=kt(A,t,n,g,r,J);if(ke!==mr)return ke}T=t[A+8],-1!==T&&Wn(r,t[o.eDl].data[A+8]===J)&&nn(a,A,t)?(g=se,A=Qn(T),t=or(T,t)):A=-1}}return s}function kt(e,t,n,r,s,a){const g=t[o.eDl],A=g.data[e+8],se=jt(A,g,n,null==r?(0,o.Qs1)(A)&&lr:r!=g&&!!(3&A.type),1&s&&a===A);return null!==se?tn(t,g,se,A,s):mr}function jt(e,t,n,r,s){const a=e.providerIndexes,g=t.data,A=1048575&a,T=e.directiveStart,se=a>>20,rt=s?A+se:e.directiveEnd;for(let at=r?A:A+se;at<rt;at++){const Ot=g[at];if(at<T&&n===Ot||at>=T&&Ot.type===n)return at}if(s){const at=g[T];if(at&&(0,o.JlV)(at)&&at.type===n)return T}return null}function tn(e,t,n,r,s){let a=e[n];const g=t.data;if(a instanceof Et){const A=a;if(A.resolving){const at=(0,o.PP7)(g[n]);throw(0,o.PQT)(at)}const T=fr(A.canSeeViewProviders);A.resolving=!0;const ke=A.injectImpl?(0,o.a2B)(A.injectImpl):null;(0,o.ihb)(e,r,0);try{a=e[n]=A.factory(void 0,s,g,e,r),t.firstCreatePass&&n>=r.directiveStart&&function Ft(e,t,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:a}=t.type.prototype;if(r){const g=Ye(t);(n.preOrderHooks??=[]).push(e,g),(n.preOrderCheckHooks??=[]).push(e,g)}s&&(n.preOrderHooks??=[]).push(0-e,s),a&&((n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a))}(n,g[n],t)}finally{null!==ke&&(0,o.a2B)(ke),fr(T),A.resolving=!1,(0,o.niQ)()}}return a}function nn(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Wn(e,t){return!(2&e||1&e&&t)}class Bn{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Ct(this._tNode,this._lView,t,(0,o.hjC)(r),n)}}function br(){return new Bn((0,o.Mx4)(),(0,o.OAn)())}function hr(e){return Pe(()=>{const t=e.prototype.constructor,n=t[o.zSs]||In(t),r=Object.prototype;let s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==r;){const a=s[o.zSs]||In(s);if(a&&a!==n)return a;s=Object.getPrototypeOf(s)}return a=>new a})}function In(e){return(0,o.Jzi)(e)?()=>{const t=In((0,o.nl4)(e));return t&&t()}:(0,o.wGu)(e)}function Lr(e){const t=e[o.eDl],n=t.type;return 2===n?t.declTNode:1===n?e[o.qlT]:null}function Ur(e){return function vn(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let s=0;for(;s<r;){const a=n[s];if(Nt(a))break;if(0===a)s+=2;else if("number"==typeof a)for(s++;s<r&&"string"==typeof n[s];)s++;else{if(a===t)return n[s+1];s+=2}}}return null}((0,o.Mx4)(),e)}const xe=p("Attribute",e=>({attributeName:e,__NG_ELEMENT_ID__:()=>Ur(e)}));let nt=null;function ye(e){return We(function Ze(){return nt=nt||new Le}().parameters(e))}function We(e){return e.map(t=>function Ee(e){const t={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(e)&&e.length>0)for(let n=0;n<e.length;n++){const r=e[n];if(void 0===r)continue;const s=Object.getPrototypeOf(r);if(r instanceof v||"Optional"===s.ngMetadataName)t.optional=!0;else if(r instanceof R||"SkipSelf"===s.ngMetadataName)t.skipSelf=!0;else if(r instanceof M||"Self"===s.ngMetadataName)t.self=!0;else if(r instanceof V||"Host"===s.ngMetadataName)t.host=!0;else if(r instanceof y)t.token=r.token;else if(r instanceof xe){if(void 0===r.attributeName)throw new o.buA(204,!1);t.attribute=r.attributeName}else t.token=r}else t.token=void 0===e||Array.isArray(e)&&0===e.length?null:e;return t}(t))}const bt=(0,o.kLh)({provide:String,useValue:o.kLh});function zt(e){return void 0!==e.useClass}function Tn(e){return void 0!==e.useFactory}const Wr=Ae("Injectable",void 0,void 0,0,(e,t)=>function et(e,t){let n=null,r=null;e.hasOwnProperty(o.yAH)||Object.defineProperty(e,o.yAH,{get:()=>(null===n&&(n=ce().compileInjectable(z,`ng:///${e.name}/\u0275prov.js`,function tr(e,t){const n=t||{providedIn:null},r={name:e.name,type:e,typeArgumentCount:0,providedIn:n.providedIn};return(zt(n)||Tn(n))&&void 0!==n.deps&&(r.deps=We(n.deps)),zt(n)?r.useClass=n.useClass:function pn(e){return bt in e}(n)?r.useValue=n.useValue:Tn(n)?r.useFactory=n.useFactory:function Mn(e){return void 0!==e.useExisting}(n)&&(r.useExisting=n.useExisting),r}(e,t))),n)}),e.hasOwnProperty(o.zSs)||Object.defineProperty(e,o.zSs,{get:()=>{if(null===r){const s=ce();r=s.compileFactory(z,`ng:///${e.name}/\u0275fac.js`,{name:e.name,type:e,typeArgumentCount:0,deps:ye(e),target:s.FactoryTarget.Injectable})}return r},configurable:!0})}(e,t));function Pr(){return zn((0,o.Mx4)(),(0,o.OAn)())}function zn(e,t){return new wn((0,o.d31)(e,t))}let wn=(()=>class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Pr})();function $n(e){return e instanceof wn?e.nativeElement:e}function sr(){return this._results[Symbol.iterator]()}class cr{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ce.B}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;const r=(0,o.Bqz)(t);(this._changesDetected=!(0,o.ng7)(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=sr}function Mr(e){return!(128&~e.flags)}var Dr=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Dr||{});const Gr=new Map;let ao=0;function Re(e){Gr.delete(e[o.ID])}const O="__ngContext__";function H(e,t){(0,o.q$2)(t)?(e[O]=t[o.ID],function Br(e){Gr.set(e[o.ID],e)}(t)):e[O]=t}function X(e){return ee(e[o.EJG])}function Kn(e){return ee(e[o.K29])}function ee(e){for(;null!==e&&!(0,o.A0l)(e);)e=e[o.K29];return e}let gt;function Pt(e){gt=e}function Lt(){if(void 0!==gt)return gt;if(typeof document<"u")return document;throw new o.buA(210,!1)}const Gt=new o.nKC("",{providedIn:"root",factory:()=>_n}),_n="ng",Fn=new o.nKC(""),Xn=new o.nKC("",{providedIn:"platform",factory:()=>"unknown"}),Cr=new o.nKC("",{providedIn:"root",factory:()=>Lt().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),pr={breakpoints:[16,32,48,64,96,128,256,384,640,750,828,1080,1200,1920,2048,3840],placeholderResolution:30,disableImageSizeWarning:!1,disableImageLazyLoadWarning:!1},Kr=new o.nKC("",{providedIn:"root",factory:()=>pr});function io(){const e=new Qr;return e.store=function Eo(e,t){const n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+t,r)}return{}}(Lt(),(0,o.WQX)(Gt)),e}let Qr=(()=>{class e{static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:io});store={};onSerializeCallbacks={};get(n,r){return void 0!==this.store[n]?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(const n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();const Zr=new o.nKC("",{providedIn:"root",factory:()=>!1}),Q=new o.nKC(""),de=new o.nKC(""),Xe={passive:!0,capture:!0},on=new WeakMap,mn=new WeakMap,Hr=new WeakMap,_o=["click","keydown"],co=["mouseenter","mouseover","focusin"];let Io=null,qo=0;class Lo{callbacks=new Set;listener=()=>{for(const t of this.callbacks)t()}}function ri(e,t){let n=mn.get(e);if(!n){n=new Lo,mn.set(e,n);for(const r of _o)e.addEventListener(r,n.listener,Xe)}return n.callbacks.add(t),()=>{const{callbacks:r,listener:s}=n;if(r.delete(t),0===r.size){mn.delete(e);for(const a of _o)e.removeEventListener(a,s,Xe)}}}function is(e,t){let n=on.get(e);if(!n){n=new Lo,on.set(e,n);for(const r of co)e.addEventListener(r,n.listener,Xe)}return n.callbacks.add(t),()=>{const{callbacks:r,listener:s}=n;if(r.delete(t),0===r.size){for(const a of co)e.removeEventListener(a,s,Xe);on.delete(e)}}}const No=new o.nKC("");function Jr(e){return!(32&~e.flags)}function Oi(e){let t=e._lView;return 2===t[o.eDl].type?null:((0,o.EFk)(t)&&(t=t[o.Yw1]),t)}function Ho(e){return e.get(Q,!1,{optional:!0})}function Yi(e,t){const n=e.contentQueries;if(null!==n){const r=(0,D.Ht)(null);try{for(let s=0;s<n.length;s+=2){const g=n[s+1];if(-1!==g){const A=e.data[g];(0,o.GA0)(n[s]),A.contentQueries(2,t[g],g)}}}finally{(0,D.Ht)(r)}}}function Yo(e,t,n){(0,o.GA0)(0);const r=(0,D.Ht)(null);try{t(e,n)}finally{(0,D.Ht)(r)}}function Ai(e,t,n){if((0,o.srX)(t)){const r=(0,D.Ht)(null);try{const a=t.directiveEnd;for(let g=t.directiveStart;g<a;g++){const A=e.data[g];A.contentQueries&&A.contentQueries(1,n[g],g)}}finally{(0,D.Ht)(r)}}}var $o=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}($o||{});let Qe,fn;function ht(){if(void 0===Qe&&(Qe=null,o.laP.trustedTypes))try{Qe=o.laP.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Qe}function Vt(e){return ht()?.createHTML(e)||e}function dr(){if(void 0===fn&&(fn=null,o.laP.trustedTypes))try{fn=o.laP.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return fn}function so(e){return dr()?.createHTML(e)||e}function ir(e){return dr()?.createScript(e)||e}function Vr(e){return dr()?.createScriptURL(e)||e}class ho{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${o.ok8})`}}function ki(e){return e instanceof ho?e.changingThisBreaksApplicationSecurity:e}function Zi(e,t){const n=function Oh(e){return e instanceof ho&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${o.ok8})`)}return n===t}function rl(e){const t=new Ic(e);return function Tc(){try{return!!(new window.DOMParser).parseFromString(Vt(""),"text/html")}catch{return!1}}()?new ol(t):t}class ol{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(Vt(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.firstChild?.remove(),n)}catch{return null}}}class Ic{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const n=this.inertDocument.createElement("template");return n.innerHTML=Vt(t),n}}const Mc=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ea(e){return(e=String(e)).match(Mc)?e:"unsafe:"+e}function Zo(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function ms(...e){const t={};for(const n of e)for(const r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}const il=Zo("area,br,col,hr,img,wbr"),sl=Zo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),al=Zo("rp,rt"),At=ms(il,ms(sl,Zo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ms(al,Zo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ms(al,sl)),Wt=Zo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ko=ms(Wt,Zo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),bo=Zo("script,style,template");class uo{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let n=t.firstChild,r=!0,s=[];for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)s.push(n),n=my(n);else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let a=gy(n);if(a){n=a;break}n=s.pop()}return this.buf.join("")}startElement(t){const n=kh(t).toLowerCase();if(!At.hasOwnProperty(n))return this.sanitizedSomething=!0,!bo.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=t.attributes;for(let s=0;s<r.length;s++){const a=r.item(s),g=a.name,A=g.toLowerCase();if(!ko.hasOwnProperty(A)){this.sanitizedSomething=!0;continue}let T=a.value;Wt[A]&&(T=Ea(T)),this.buf.push(" ",g,'="',Nh(T),'"')}return this.buf.push(">"),!0}endElement(t){const n=kh(t).toLowerCase();At.hasOwnProperty(n)&&!il.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(Nh(t))}}function gy(e){const t=e.nextSibling;if(t&&e!==t.previousSibling)throw Lh(t);return t}function my(e){const t=e.firstChild;if(t&&function Li(e,t){return(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(e,t))throw Lh(t);return t}function kh(e){const t=e.nodeName;return"string"==typeof t?t:"FORM"}function Lh(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}const vy=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_y=/([^\#-~ |!])/g;function Nh(e){return e.replace(/&/g,"&amp;").replace(vy,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(_y,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ll;function Oc(e){return"content"in e&&function Ey(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}const by=/^>|^->|<!--|-->|--!>|<!-$/g,Dy=/(<|>)/g;function Pc(e,t){return e.createText(t)}function Uh(e,t,n){e.setValue(t,n)}function Rc(e,t){return e.createComment(function Fh(e){return e.replace(by,t=>t.replace(Dy,"\u200b$1\u200b"))}(t))}function cl(e,t,n){return e.createElement(t,n)}function vs(e,t,n,r,s){e.insertBefore(t,n,r,s)}function $h(e,t,n){e.appendChild(t,n)}function Bh(e,t,n,r,s){null!==r?vs(e,t,n,r,s):$h(e,t,n)}function ba(e,t,n,r){e.removeChild(null,t,n,r)}function Vh(e,t,n){const{mergedAttrs:r,classes:s,styles:a}=n;null!==r&&function wt(e,t,n){let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const a=n[r++],g=n[r++],A=n[r++];e.setAttribute(t,g,A,a)}else{const a=s,g=n[++r];en(a)?e.setProperty(t,a,g):e.setAttribute(t,a,g),r++}}}(e,t,r),null!==s&&function Ay(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}(e,t,s),null!==a&&function Cy(e,t,n){e.setAttribute(t,"style",n)}(e,t,a)}var Gs=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Gs||{});function xc(e){const t=Da();return t?t.sanitize(Gs.URL,e)||"":Zi(e,"URL")?ki(e):Ea((0,o.eFE)(e))}function Wh(e){const t=Da();if(t)return Vr(t.sanitize(Gs.RESOURCE_URL,e)||"");if(Zi(e,"ResourceURL"))return Vr(ki(e));throw new o.buA(904,!1)}const Ry=new Set(["embed","frame","iframe","media","script"]),xy=new Set(["base","link","script"]);function Kh(e,t,n){return function ky(e,t){return"src"===t&&Ry.has(e)||"href"===t&&xy.has(e)||"xlink:href"===t&&"script"===e?Wh:xc}(t,n)(e)}function Da(){const e=(0,o.OAn)();return e&&e[o.M0L].sanitizer}const ul=new Set(["attributename"]),Ly={iframe:new Set(["sandbox","allow","allowfullscreen","referrerpolicy","csp","fetchpriority"]),animate:ul,set:ul,animatemotion:ul,animatetransform:ul};function zh(e){return e.ownerDocument.defaultView}function Hh(e){return e.ownerDocument}function Ii(e){return e instanceof Function?e():e}function qh(e){if(!(0,o.xUg)(e))throw new o.buA(906,`The ${(0,o.PP7)(e)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}function Vy(e,t,n){let r=e.length;for(;;){const s=e.indexOf(t,n);if(-1===s)return s;if(0===s||e.charCodeAt(s-1)<=32){const a=t.length;if(s+a===r||e.charCodeAt(s+a)<=32)return s}n=s+1}}const Yh="ng-template";function Wy(e,t,n,r){let s=0;if(r){for(;s<t.length&&"string"==typeof t[s];s+=2)if("class"===t[s]&&-1!==Vy(t[s+1].toLowerCase(),n,0))return!0}else if(kc(e))return!1;if(s=t.indexOf(1,s),s>-1){let a;for(;++s<t.length&&"string"==typeof(a=t[s]);)if(a.toLowerCase()===n)return!0}return!1}function kc(e){return 4===e.type&&e.value!==Yh}function Ky(e,t,n){return t===(4!==e.type||n?e.value:Yh)}function zy(e,t,n){let r=4;const s=e.attrs,a=null!==s?function Xy(e){for(let t=0;t<e.length;t++)if(Nt(e[t]))return t;return e.length}(s):0;let g=!1;for(let A=0;A<t.length;A++){const T=t[A];if("number"!=typeof T){if(!g)if(4&r){if(r=2|1&r,""!==T&&!Ky(e,T,n)||""===T&&1===t.length){if(di(r))return!1;g=!0}}else if(8&r){if(null===s||!Wy(e,s,T,n)){if(di(r))return!1;g=!0}}else{const J=t[++A],se=Hy(T,s,kc(e),n);if(-1===se){if(di(r))return!1;g=!0;continue}if(""!==J){let ke;if(ke=se>a?"":s[se+1].toLowerCase(),2&r&&J!==ke){if(di(r))return!1;g=!0}}}}else{if(!g&&!di(r)&&!di(T))return!1;if(g&&di(T))continue;g=!1,r=T|1&r}}return di(r)||g}function di(e){return!(1&e)}function Hy(e,t,n,r){if(null===t)return-1;let s=0;if(r||!n){let a=!1;for(;s<t.length;){const g=t[s];if(g===e)return s;if(3===g||6===g)a=!0;else{if(1===g||2===g){let A=t[++s];for(;"string"==typeof A;)A=t[++s];continue}if(4===g)break;if(0===g){s+=4;continue}}s+=a?1:2}return-1}return function qy(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Zh(e,t,n=!1){for(let r=0;r<t.length;r++)if(zy(e,t[r],n))return!0;return!1}function Qy(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let s=0;s<e.length;s++)if(e[s]!==r[s])continue e;return!0}}return!1}function ep(e,t){return e?":not("+t.trim()+")":t}function Jy(e){let t=e[0],n=1,r=2,s="",a=!1;for(;n<e.length;){let g=e[n];if("string"==typeof g)if(2&r){const A=e[++n];s+="["+g+(A.length>0?'="'+A+'"':"")+"]"}else 8&r?s+="."+g:4&r&&(s+=" "+g);else""!==s&&!di(g)&&(t+=ep(a,s),s=""),r=g,a=a||!di(r);n++}return""!==s&&(t+=ep(a,s)),t}const Yr={};function Lc(e,t,n,r,s,a,g,A,T,J,se){const ke=o.Yw1+r,rt=ke+s,at=function e0(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Yr);return n}(ke,rt),Ot="function"==typeof J?J():J;return at[o.eDl]={type:e,blueprint:at,template:n,queries:null,viewQuery:A,declTNode:t,data:at.slice().fill(null,ke),bindingStartIndex:ke,expandoStartIndex:rt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:T,consts:Ot,incompleteFirstPass:!1,ssrId:se}}function tp(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Lc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function dl(e,t,n,r,s,a,g,A,T,J,se){const ke=t.blueprint.slice();return ke[o.jgP]=s,ke[o.Wg1]=1228|r,(null!==J||e&&2048&e[o.Wg1])&&(ke[o.Wg1]|=2048),(0,o.HUe)(ke),ke[o.f7T]=ke[o.X5O]=e,ke[o.SKP]=n,ke[o.M0L]=g||e&&e[o.M0L],ke[o.GpT]=A||e&&e[o.GpT],ke[o.YEL]=T||e&&e[o.YEL]||null,ke[o.qlT]=a,ke[o.ID]=function $r(){return ao++}(),ke[o.tcA]=se,ke[o.oMQ]=J,ke[o.b5C]=2==t.type?e[o.b5C]:ke,ke}function Nc(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Sa(e,t,n,r){if(0===n)return-1;const s=t.length;for(let a=0;a<n;a++)t.push(r),e.blueprint.push(r),e.data.push(null);return s}function Fc(e,t){return e[o.EJG]?e[o.Yrj][o.K29]=t:e[o.EJG]=t,e[o.Yrj]=t,t}function np(e=1){rp((0,o.klJ)(),(0,o.OAn)(),(0,o._px)()+e,!1)}function rp(e,t,n,r){if(!r)if(3&~t[o.Wg1]){const a=e.preOrderHooks;null!==a&&ut(t,a,0,n)}else{const a=e.preOrderCheckHooks;null!==a&&Ut(t,a,n)}(0,o.ypq)(n)}var fl=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(fl||{});function Ca(e,t,n,r){const s=(0,D.Ht)(null);try{const[a,g,A]=e.inputs[n];let T=null;0!==(g&fl.SignalBased)&&(T=t[a][D.bh]),null!==T&&void 0!==T.transformFn?r=T.transformFn(r):null!==A&&(r=A.call(t,r)),null!==e.setInput?e.setInput(t,T,r,n,a):we(t,T,a,r)}finally{(0,D.Ht)(s)}}var hl=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(hl||{});let Uc;function $c(e,t){return Uc(e,t)}function pl(e){if(!e)return 0;const t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function qs(e,t){return e.getPropertyValue(t).split(",").map(r=>r.trim())}function op(e,t){return void 0!==e&&e.duration>t.duration}function ip(e){return(null!=e.animationName||null!=e.propertyName)&&e.duration>0}function sp(e,t,n){if(!n)return;const r=e.getAnimations();return 0===r.length?function s0(e,t){const n=getComputedStyle(e),r=function o0(e){const t=qs(e,"animation-name"),n=qs(e,"animation-delay"),r=qs(e,"animation-duration"),s={animationName:"",propertyName:void 0,duration:0};for(let a=0;a<t.length;a++){const g=pl(n[a])+pl(r[a]);g>s.duration&&(s.animationName=t[a],s.duration=g)}return s}(n),s=function r0(e){const t=qs(e,"transition-property"),n=qs(e,"transition-duration"),r=qs(e,"transition-delay"),s={propertyName:"",duration:0,animationName:void 0};for(let a=0;a<t.length;a++){const g=pl(r[a])+pl(n[a]);g>s.duration&&(s.propertyName=t[a],s.duration=g)}return s}(n),a=r.duration>s.duration?r:s;op(t.get(e),a)||ip(a)&&t.set(e,a)}(e,t):function a0(e,t,n){let r={animationName:void 0,propertyName:void 0,duration:0};for(const s of n){const a=s.effect?.getTiming(),g="number"==typeof a?.duration?a.duration:0;let T,J,A=(a?.delay??0)+g;s.animationName?J=s.animationName:T=s.transitionProperty,A>=r.duration&&(r={animationName:J,propertyName:T,duration:A})}op(t.get(e),r)||ip(r)&&t.set(e,r)}(e,t,r)}const _s=new Set;var Bc=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(Bc||{});const Aa=new o.nKC(""),ap=new Set;function Mo(e){ap.has(e)||(ap.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}const lp=!1,Ni=class l0 extends Ce.B{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,(0,o.M6u)()&&(this.destroyRef=(0,o.WQX)(o.abz,{optional:!0})??void 0,this.pendingTasks=(0,o.WQX)(o.rev,{optional:!0})??void 0)}emit(t){const n=(0,D.Ht)(null);try{super.next(t)}finally{(0,D.Ht)(n)}}subscribe(t,n,r){let s=t,a=n||(()=>null),g=r;if(t&&"object"==typeof t){const T=t;s=T.next?.bind(T),a=T.error?.bind(T),g=T.complete?.bind(T)}this.__isAsync&&(a=this.wrapInTimeout(a),s&&(s=this.wrapInTimeout(s)),g&&(g=this.wrapInTimeout(g)));const A=super.subscribe({next:s,error:a,complete:g});return t instanceof De.yU&&t.add(A),A}wrapInTimeout(t){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function cp(e){let t,n;function r(){e=o.lQ1;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==t&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function up(e){return queueMicrotask(()=>e()),()=>{e=o.lQ1}}const jc="isAngularZone",gl=jc+"_ID";let c0=0;class ro{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ni(!1);onMicrotaskEmpty=new Ni(!1);onStable=new Ni(!1);onError=new Ni(!1);constructor(t){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:s=!1,scheduleInRootZone:a=lp}=t;if(typeof Zone>"u")throw new o.buA(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!s&&r,g.shouldCoalesceRunChangeDetection=s,g.callbackScheduled=!1,g.scheduleInRootZone=a,function f0(e){const t=()=>{!function d0(e){function t(){cp(()=>{e.callbackScheduled=!1,Wc(e),e.isCheckStableRunning=!0,Vc(e),e.isCheckStableRunning=!1})}e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Wc(e))}(e)},n=c0++;e._inner=e._inner.fork({name:"angular",properties:{[jc]:!0,[gl]:n,[gl+n]:!0},onInvokeTask:(r,s,a,g,A,T)=>{if(function h0(e){return hp(e,"__ignore_ng_zone__")}(T))return r.invokeTask(a,g,A,T);try{return dp(e),r.invokeTask(a,g,A,T)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||e.shouldCoalesceRunChangeDetection)&&t(),fp(e)}},onInvoke:(r,s,a,g,A,T,J)=>{try{return dp(e),r.invoke(a,g,A,T,J)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!function p0(e){return hp(e,"__scheduler_tick__")}(T)&&t(),fp(e)}},onHasTask:(r,s,a,g)=>{r.hasTask(a,g),s===a&&("microTask"==g.change?(e._hasPendingMicrotasks=g.microTask,Wc(e),Vc(e)):"macroTask"==g.change&&(e.hasPendingMacrotasks=g.macroTask))},onHandleError:(r,s,a,g)=>(r.handleError(a,g),e.runOutsideAngular(()=>e.onError.emit(g)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(jc)}static assertInAngularZone(){if(!ro.isInAngularZone())throw new o.buA(909,!1)}static assertNotInAngularZone(){if(ro.isInAngularZone())throw new o.buA(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,s){const a=this._inner,g=a.scheduleEventTask("NgZoneEvent: "+s,t,u0,o.lQ1,o.lQ1);try{return a.runTask(g,n,r)}finally{a.cancelTask(g)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const u0={};function Vc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Wc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&!0===e.callbackScheduled)}function dp(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function fp(e){e._nesting--,Vc(e)}class Kc{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ni;onMicrotaskEmpty=new Ni;onStable=new Ni;onError=new Ni;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,s){return t.apply(n,r)}}function hp(e,t){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0]?.data?.[t]}function g0(e="zone.js",t){return"noop"===e?new Kc:"zone.js"===e?new ro(t):e}let pp=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:()=>new e})}return e})();const gp=[0,1,2,3];let m0=(()=>{class e{ngZone=(0,o.WQX)(ro);scheduler=(0,o.WQX)(o.hk6);errorHandler=(0,o.WQX)(o.zcH,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){(0,o.WQX)(Aa,{optional:!0})}execute(){const n=this.sequences.size>0;n&&vt(16),this.executing=!0;for(const r of gp)for(const s of this.sequences)if(!s.erroredOrDestroyed&&s.hooks[r])try{s.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,s.hooks[r])(s.pipelinedValue),s.snapshot))}catch(a){s.erroredOrDestroyed=!0,this.errorHandler?.handleError(a)}this.executing=!1;for(const r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(const r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&vt(17)}register(n){const{view:r}=n;void 0!==r?((r[o.JEi]??=[]).push(n),(0,o.blu)(r),r[o.Wg1]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Bc.AFTER_NEXT_RENDER,n):n()}static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:()=>new e})}return e})();class mp{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,s,a,g=null){this.impl=t,this.hooks=n,this.view=r,this.once=s,this.snapshot=g,this.unregisterOnDestroy=a?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const t=this.view?.[o.JEi];t&&(this.view[o.JEi]=t.filter(n=>n!==this))}}function zc(e,t){const n=t?.injector??(0,o.WQX)(o.zZn);return Mo("NgAfterNextRender"),vp(e,n,t,!0)}function vp(e,t,n,r){const s=t.get(pp);s.impl??=t.get(m0);const a=t.get(Aa,null,{optional:!0}),g=!0!==n?.manualCleanup?t.get(o.abz):null,A=t.get(o.r4V,null,{optional:!0}),T=new mp(s.impl,function _0(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}(e),A?.view,r,g,a?.snapshot(null));return s.impl.register(T),T}const ml=new o.nKC("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function _p(e,t,n){const r=e.get(ml);if(Array.isArray(t))for(const s of t)r.queue.add(s),n?.detachedLeaveAnimationFns?.push(s);else r.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(e)}function E0(e){const t=e.get(ml);t.isScheduled||(zc(()=>{t.isScheduled=!1;for(let n of t.queue)n();t.queue.clear()},{injector:e}),t.isScheduled=!0)}function vl(e){const t=e.get(ml);t.scheduler=E0,t.scheduler(e)}function Hc(e,t){for(const[n,r]of t)_p(e,r.animateFns)}function yp(e,t,n,r){const s=e?.[o.Isx]?.enter;null!==t&&s&&s.has(n.index)&&Hc(r,s)}function Qs(e,t,n,r,s,a,g,A){if(null!=s){let T,J=!1;(0,o.A0l)(s)?T=s:(0,o.q$2)(s)&&(J=!0,s=s[o.jgP]);const se=(0,o.IvY)(s);0===e&&null!==r?(yp(A,r,a,n),null==g?$h(t,r,se):vs(t,r,se,g||null,!0)):1===e&&null!==r?(yp(A,r,a,n),vs(t,r,se,g||null,!0)):2===e?Dp(A,a,n,ke=>{ba(t,se,J,ke)}):3===e&&Dp(A,a,n,()=>{t.destroyNode(se)}),null!=T&&function I0(e,t,n,r,s,a,g){const A=r[o.s6P];A!==(0,o.IvY)(r)&&Qs(t,e,n,a,A,s,g);for(let J=o.Y20;J<r.length;J++){const se=r[J];yl(se[o.eDl],se,e,t,a,A)}}(t,e,n,T,a,r,g)}}function Ep(e,t){bp(e,t),t[o.jgP]=null,t[o.qlT]=null}function bp(e,t){t[o.M0L].changeDetectionScheduler?.notify(9),yl(e,t,t[o.GpT],2,null,null)}function Gc(e,t){const n=e[o.nfM],r=n.indexOf(t);n.splice(r,1)}function wa(e,t){if((0,o.EPY)(t))return;const n=t[o.GpT];n.destroyNode&&yl(e,t,n,3,null,null),function D0(e){let t=e[o.EJG];if(!t)return Xc(e[o.eDl],e);for(;t;){let n=null;if((0,o.q$2)(t))n=t[o.EJG];else{const r=t[o.Y20];r&&(n=r)}if(!n){for(;t&&!t[o.K29]&&t!==e;)(0,o.q$2)(t)&&Xc(t[o.eDl],t),t=t[o.f7T];null===t&&(t=e),(0,o.q$2)(t)&&Xc(t[o.eDl],t),n=t&&t[o.K29]}t=n}}(t)}function Xc(e,t){if((0,o.EPY)(t))return;const n=(0,D.Ht)(null);try{t[o.Wg1]&=-129,t[o.Wg1]|=256,t[o.Iaj]&&(0,D.XR)(t[o.Iaj]),function A0(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const s=t[n[r]];if(!(s instanceof Et)){const a=n[r+1];if(Array.isArray(a))for(let g=0;g<a.length;g+=2){const A=s[a[g]],T=a[g+1];vt(4,A,T);try{T.call(A)}finally{vt(5,A,T)}}else{vt(4,s,a);try{a.call(s)}finally{vt(5,s,a)}}}}}(e,t),function C0(e,t){const n=e.cleanup,r=t[o.VVG];if(null!==n)for(let g=0;g<n.length-1;g+=2)if("string"==typeof n[g]){const A=n[g+3];A>=0?r[A]():r[-A].unsubscribe(),g+=2}else n[g].call(r[n[g+1]]);null!==r&&(t[o.VVG]=null);const s=t[o.Czx];if(null!==s){t[o.Czx]=null;for(let g=0;g<s.length;g++)(0,s[g])()}const a=t[o.tQN];if(null!==a){t[o.tQN]=null;for(const g of a)g.destroy()}}(e,t),1===t[o.eDl].type&&t[o.GpT].destroy();const r=t[o.rQE];if(null!==r&&(0,o.A0l)(t[o.f7T])){r!==t[o.f7T]&&Gc(r,t);const s=t[o.Ds7];null!==s&&s.detachView(e)}Re(t)}finally{(0,D.Ht)(n)}}function Dp(e,t,n,r){const s=e?.[o.Isx];if(null==s||null==s.leave||!s.leave.has(t.index))return r(!1);e&&_s.add(e),_p(n,()=>{if(s.leave&&s.leave.has(t.index)){const g=s.leave.get(t.index),A=[];if(g){for(let T=0;T<g.animateFns.length;T++){const J=g.animateFns[T],{promise:se}=J();A.push(se)}s.detachedLeaveAnimationFns=void 0}s.running=Promise.allSettled(A),function S0(e,t){const n=e[o.Isx]?.running;n?n.then(()=>{e[o.Isx].running=void 0,_s.delete(e),t(!0)}):t(!1)}(e,r)}else e&&_s.delete(e),r(!1)},s)}function qc(e,t,n){return Sp(e,t.parent,n)}function Sp(e,t,n){let r=t;for(;null!==r&&168&r.type;)r=(t=r).parent;if(null===r)return n[o.jgP];if((0,o.Qs1)(r)){const{encapsulation:s}=e.data[r.directiveStart+r.componentOffset];if(s===$o.None||s===$o.Emulated)return null}return(0,o.d31)(r,n)}function Cp(e,t,n){return wp(e,t,n)}function Ap(e,t,n){return 40&e.type?(0,o.d31)(e,n):null}let Qc,wp=Ap;function Ip(e,t){wp=e,Qc=t}function Jc(e,t,n,r){const s=qc(e,r,t),a=t[o.GpT],A=Cp(r.parent||t[o.qlT],r,t);if(null!=s)if(Array.isArray(n))for(let T=0;T<n.length;T++)Bh(a,s,n[T],A,!1);else Bh(a,s,n,A,!1);void 0!==Qc&&Qc(a,r,t,n,s)}function ys(e,t){if(null!==t){const n=t.type;if(3&n)return(0,o.d31)(t,e);if(4&n)return _l(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return ys(e,r);{const s=e[t.index];return(0,o.A0l)(s)?_l(-1,s):(0,o.IvY)(s)}}if(128&n)return ys(e,t.next);if(32&n)return $c(t,e)()||(0,o.IvY)(e[t.index]);{const r=Tp(e,t);return null!==r?Array.isArray(r)?r[0]:ys((0,o._0$)(e[o.b5C]),r):ys(e,t.next)}}return null}function Tp(e,t){return null!==t?e[o.b5C][o.qlT].projection[t.projection]:null}function _l(e,t){const n=o.Y20+e+1;if(n<t.length){const r=t[n],s=r[o.eDl].firstChild;if(null!==s)return ys(r,s)}return t[o.s6P]}function Yc(e,t,n,r,s,a,g){for(;null!=n;){const A=r[o.YEL];if(128===n.type){n=n.next;continue}const T=r[n.index],J=n.type;if(g&&0===t&&(T&&H((0,o.IvY)(T),r),n.flags|=2),!Jr(n))if(8&J)Yc(e,t,n.child,r,s,a,!1),Qs(t,e,A,s,T,n,a,r);else if(32&J){const se=$c(n,r);let ke;for(;ke=se();)Qs(t,e,A,s,ke,n,a,r);Qs(t,e,A,s,T,n,a,r)}else 16&J?Mp(e,t,r,n,s,a):Qs(t,e,A,s,T,n,a,r);n=g?n.projectionNext:n.next}}function yl(e,t,n,r,s,a){Yc(n,r,e.firstChild,t,s,a,!1)}function Mp(e,t,n,r,s,a){const g=n[o.b5C],T=g[o.qlT].projection[r.projection];if(Array.isArray(T))for(let J=0;J<T.length;J++)Qs(t,e,n[o.YEL],s,T[J],r,a,n);else{let J=T;const se=g[o.f7T];Mr(r)&&(J.flags|=128),Yc(e,t,J,se,s,a,!0)}}function Op(e,t,n,r,s){const a=(0,o._px)(),g=2&r;try{(0,o.ypq)(-1),g&&t.length>o.Yw1&&rp(e,t,o.Yw1,!1),vt(g?2:0,s,n),n(r,s)}finally{(0,o.ypq)(a),vt(g?3:1,s,n)}}function El(e,t,n){(function x0(e,t,n){const r=n.directiveStart,s=n.directiveEnd;(0,o.Qs1)(n)&&function t0(e,t,n){const r=(0,o.d31)(t,e),s=tp(n),a=e[o.M0L].rendererFactory,g=Fc(e,dl(e,s,null,Nc(n),r,t,null,a.createRenderer(r,n),null,null,null));e[t.index]=g}(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||yr(n,t);const a=n.initialInputs;for(let g=r;g<s;g++){const A=e.data[g],T=tn(t,e,g,n);H(T,t),null!==a&&F0(0,g-r,T,A,0,a),(0,o.JlV)(A)&&((0,o.KdJ)(n.index,t)[o.SKP]=tn(t,e,g,n))}})(e,t,n),!(64&~n.flags)&&function k0(e,t,n){const r=n.directiveStart,s=n.directiveEnd,a=n.index,g=(0,o.Z9v)();try{(0,o.ypq)(a);for(let A=r;A<s;A++){const T=e.data[A],J=t[A];(0,o.RZ9)(A),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&L0(T,J)}}finally{(0,o.ypq)(-1),(0,o.RZ9)(g)}}(e,t,n)}function Js(e,t,n=o.d31){const r=t.localNames;if(null!==r){let s=t.index+1;for(let a=0;a<r.length;a+=2){const g=r[a+1],A=-1===g?n(t,e):e[g];e[s++]=A}}}let Pp=()=>null;function Zc(e,t,n,r,s,a){Cl(e,t[o.eDl],t,n,r)?(0,o.Qs1)(e)&&Rp(t,e.index):(3&e.type&&(n=function R0(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(n)),eu(e,t,n,r,s,a))}function eu(e,t,n,r,s,a){if(3&e.type){const g=(0,o.d31)(e,t);r=null!=a?a(r,e.value||"",n):r,s.setProperty(g,n,r)}}function Rp(e,t){const n=(0,o.KdJ)(t,e);16&n[o.Wg1]||(n[o.Wg1]|=64)}function L0(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function tu(e,t){const n=e.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const a=n[s];Zh(t,a.selectors,!1)&&(r??=[],(0,o.JlV)(a)?r.unshift(a):r.push(a))}return r}function bl(e,t,n,r,s,a,g){if(null==a)e.removeAttribute(t,s,n);else{const A=null==g?(0,o.eFE)(a):g(a,r||"",s);e.setAttribute(t,s,A,n)}}function F0(e,t,n,r,s,a){const g=a[t];if(null!==g)for(let A=0;A<g.length;A+=2)Ca(r,n,g[A],g[A+1])}function Dl(e,t,n,r,s){const a=o.Yw1+n,g=t[o.eDl],A=s(g,t,e,r,n);t[a]=A,(0,o.iMd)(e,!0);const T=2===e.type;return T?(Vh(t[o.GpT],A,e),(0===(0,o.znI)()||(0,o.yoD)(e))&&H(A,t),(0,o.Fje)()):H(A,t),(0,o.SX7)()&&(!T||!Jr(e))&&Jc(g,t,A,e),e}function Sl(e){let t=e;return(0,o.YWB)()?(0,o.Pfq)():(t=t.parent,(0,o.iMd)(t,!1)),t}function kp(e,t,n){return(null===e||(0,o.JlV)(e))&&(n=(0,o.zAe)(n[t.index])),n[o.GpT]}function nu(e,t){const n=e[o.YEL];if(!n)return;let r;try{r=n.get(o.ZTf,null)}catch{r=null}r?.(t)}function Cl(e,t,n,r,s){const a=e.inputs?.[r],g=e.hostDirectiveInputs?.[r];let A=!1;if(g)for(let T=0;T<g.length;T+=2){const J=g[T];Ca(t.data[J],n[J],g[T+1],s),A=!0}if(a)for(const T of a)Ca(t.data[T],n[T],r,s),A=!0;return A}function $0(e,t){const n=(0,o.KdJ)(t,e),r=n[o.eDl];!function B0(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const s=n[o.jgP];null!==s&&null===n[o.tcA]&&(n[o.tcA]=null),vt(18),Al(r,n,n[o.SKP]),vt(19,n[o.SKP])}function Al(e,t,n){(0,o.ID8)(t);try{const r=e.viewQuery;null!==r&&Yo(1,r,n);const s=e.template;null!==s&&Op(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[o.Ds7]?.finishViewCreation(e),e.staticContentQueries&&Yi(e,t),e.staticViewQueries&&Yo(2,e.viewQuery,n);const a=e.components;null!==a&&function j0(e,t){for(let n=0;n<t.length;n++)$0(e,t[n])}(t,a)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[o.Wg1]&=-5,(0,o.bll)()}}function Ys(e,t,n,r){const s=(0,D.Ht)(null);try{const a=t.tView,T=dl(e,a,n,4096&e[o.Wg1]?4096:16,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);T[o.rQE]=e[t.index];const se=e[o.Ds7];return null!==se&&(T[o.Ds7]=se.createEmbeddedView(a)),Al(a,T,n),T}finally{(0,D.Ht)(s)}}function Es(e,t){return!t||null===t.firstChild||Mr(e)}function Ia(e,t,n,r,s=!1){for(;null!==n;){if(128===n.type){n=s?n.projectionNext:n.next;continue}const a=t[n.index];null!==a&&r.push((0,o.IvY)(a)),(0,o.A0l)(a)&&V0(a,r);const g=n.type;if(8&g)Ia(e,t,n.child,r);else if(32&g){const A=$c(n,t);let T;for(;T=A();)r.push(T)}else if(16&g){const A=Tp(t,n);if(Array.isArray(A))r.push(...A);else{const T=(0,o._0$)(t[o.b5C]);Ia(T[o.eDl],T,A,r,!0)}}n=s?n.projectionNext:n.next}return r}function V0(e,t){for(let n=o.Y20;n<e.length;n++){const r=e[n],s=r[o.eDl].firstChild;null!==s&&Ia(r[o.eDl],r,s,t)}e[o.s6P]!==e[o.jgP]&&t.push(e[o.s6P])}function Lp(e){if(null!==e[o.JEi]){for(const t of e[o.JEi])t.impl.addSequence(t);e[o.JEi].length=0}}let Np=[];const H0={...D.pL,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{(0,o.blu)(e.lView)},consumerOnSignalRead(){this.lView[o.Iaj]=this}},X0={...D.pL,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=(0,o._0$)(e.lView);for(;t&&!Fp(t[o.eDl]);)t=(0,o._0$)(t);t&&(0,o.HAh)(t)},consumerOnSignalRead(){this.lView[o.Iaj]=this}};function Fp(e){return 2!==e.type}function Up(e){if(null===e[o.tQN])return;let t=!0;for(;t;){let n=!1;for(const r of e[o.tQN])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(8192&e[o.Wg1])}}function wl(e,t=0){const r=e[o.M0L].rendererFactory;r.begin?.();try{!function Q0(e,t){const n=(0,o.yP_)();try{(0,o.cBl)(!0),ru(e,t);let r=0;for(;(0,o.dMS)(e);){if(100===r)throw new o.buA(103,!1);r++,ru(e,1)}}finally{(0,o.cBl)(n)}}(e,t)}finally{r.end?.()}}function $p(e,t,n,r){if((0,o.EPY)(t))return;const s=t[o.Wg1];(0,o.ID8)(t);let A=!0,T=null,J=null;Fp(e)?(J=function W0(e){return e[o.Iaj]??function K0(e){const t=Np.pop()??Object.create(H0);return t.lView=e,t}(e)}(t),T=(0,D.Bg)(J)):null===(0,D.nR)()?(A=!1,J=function G0(e){const t=e[o.Iaj]??Object.create(X0);return t.lView=e,t}(t),T=(0,D.Bg)(J)):t[o.Iaj]&&((0,D.XR)(t[o.Iaj]),t[o.Iaj]=null);try{(0,o.HUe)(t),(0,o.Kw3)(e.bindingStartIndex),null!==n&&Op(e,t,n,2,r);const se=!(3&~s);if(se){const at=e.preOrderCheckHooks;null!==at&&Ut(t,at,null)}else{const at=e.preOrderHooks;null!==at&&ut(t,at,0,null),xt(t,0)}if(function J0(e){for(let t=X(e);null!==t;t=Kn(t)){if(!(2&t[o.Wg1]))continue;const n=t[o.nfM];for(let r=0;r<n.length;r++)(0,o.HAh)(n[r])}}(t),Up(t),Bp(t,0),null!==e.contentQueries&&Yi(e,t),se){const at=e.contentCheckHooks;null!==at&&Ut(t,at)}else{const at=e.contentHooks;null!==at&&ut(t,at,1),xt(t,1)}!function Z0(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const s=n[r];if(s<0)(0,o.ypq)(~s);else{const a=s,g=n[++r],A=n[++r];(0,o.vQI)(g,a);const T=t[a];vt(24,T),A(2,T),vt(25,T)}}}finally{(0,o.ypq)(-1)}}(e,t);const ke=e.components;null!==ke&&Vp(t,ke,0);const rt=e.viewQuery;if(null!==rt&&Yo(2,rt,r),se){const at=e.viewCheckHooks;null!==at&&Ut(t,at)}else{const at=e.viewHooks;null!==at&&ut(t,at,2),xt(t,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[o.pcR]){for(const at of t[o.pcR])at();t[o.pcR]=null}Lp(t),t[o.Wg1]&=-73}catch(se){throw(0,o.blu)(t),se}finally{null!==J&&((0,D.Wu)(J,T),A&&function z0(e){e.lView[o.Iaj]!==e&&(e.lView=null,Np.push(e))}(J)),(0,o.bll)()}}function Bp(e,t){for(let n=X(e);null!==n;n=Kn(n))for(let r=o.Y20;r<n.length;r++)jp(n[r],t)}function Y0(e,t,n){vt(18);const r=(0,o.KdJ)(t,e);jp(r,n),vt(19,r[o.SKP])}function jp(e,t){(0,o.F1c)(e)&&ru(e,t)}function ru(e,t){const r=e[o.eDl],s=e[o.Wg1],a=e[o.Iaj];let g=!!(0===t&&16&s);if(g||=!!(64&s&&0===t),g||=!!(1024&s),g||=!(!a?.dirty||!(0,D.si)(a)),g||=!1,a&&(a.dirty=!1),e[o.Wg1]&=-9217,g)$p(r,e,r.template,e[o.SKP]);else if(8192&s){const A=(0,D.Ht)(null);try{Up(e),Bp(e,1);const T=r.components;null!==T&&Vp(e,T,1),Lp(e)}finally{(0,D.Ht)(A)}}}function Vp(e,t,n){for(let r=0;r<t.length;r++)Y0(e,t[r],n)}function Zs(e,t){const n=(0,o.yP_)()?64:1088;for(e[o.M0L].changeDetectionScheduler?.notify(t);e;){e[o.Wg1]|=n;const r=(0,o._0$)(e);if((0,o.EFk)(e)&&!r)return e;e=r}return null}function Wp(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Kp(e,t){const n=o.Y20+t;if(n<e.length)return e[n]}function ea(e,t,n,r=!0){const s=t[o.eDl];if(function eE(e,t,n,r){const s=o.Y20+r,a=n.length;r>0&&(n[s-1][o.K29]=t),r<a-o.Y20?(t[o.K29]=n[s],(0,o.EYC)(n,o.Y20+r,t)):(n.push(t),t[o.K29]=null),t[o.f7T]=n;const g=t[o.rQE];null!==g&&n!==g&&zp(g,t);const A=t[o.Ds7];null!==A&&A.insertView(e),(0,o._gW)(t),t[o.Wg1]|=128}(s,t,e,n),r){const g=_l(n,e),A=t[o.GpT],T=A.parentNode(e[o.s6P]);null!==T&&function b0(e,t,n,r,s,a){r[o.jgP]=s,r[o.qlT]=t,yl(e,r,n,1,s,a)}(s,e[o.qlT],A,t,T,g)}const a=t[o.tcA];null!==a&&null!==a.firstChild&&(a.firstChild=null)}function ou(e,t){const n=Ta(e,t);return void 0!==n&&wa(n[o.eDl],n),n}function Ta(e,t){if(e.length<=o.Y20)return;const n=o.Y20+t,r=e[n];if(r){const s=r[o.rQE];null!==s&&s!==e&&Gc(s,r),t>0&&(e[n-1][o.K29]=r[o.K29]);const a=(0,o.E6O)(e,o.Y20+t);Ep(r[o.eDl],r);const g=a[o.Ds7];null!==g&&g.detachView(a[o.eDl]),r[o.f7T]=null,r[o.K29]=null,r[o.Wg1]&=-129}return r}function zp(e,t){const n=e[o.nfM],r=t[o.f7T];((0,o.q$2)(r)||t[o.b5C]!==r[o.f7T][o.b5C])&&(e[o.Wg1]|=2),null===n?e[o.nfM]=[t]:n.push(t)}class Il{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const t=this._lView,n=t[o.eDl];return Ia(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[o.SKP]}set context(t){this._lView[o.SKP]=t}get destroyed(){return(0,o.EPY)(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[o.f7T];if((0,o.A0l)(t)){const n=t[o.bm_],r=n?n.indexOf(this):-1;r>-1&&(Ta(t,r),(0,o.E6O)(n,r))}this._attachedToViewContainer=!1}wa(this._lView[o.eDl],this._lView)}onDestroy(t){(0,o.ik5)(this._lView,t)}markForCheck(){Zs(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[o.Wg1]&=-129}reattach(){(0,o._gW)(this._lView),this._lView[o.Wg1]|=128}detectChanges(){this._lView[o.Wg1]|=1024,wl(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new o.buA(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const t=(0,o.EFk)(this._lView),n=this._lView[o.rQE];null!==n&&!t&&Gc(n,this._lView),bp(this._lView[o.eDl],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new o.buA(902,!1);this._appRef=t;const n=(0,o.EFk)(this._lView),r=this._lView[o.rQE];null!==r&&!n&&zp(r,this._lView),(0,o._gW)(this._lView)}}let Ma=(()=>class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=tE;constructor(n,r,s){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,s){const a=Ys(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:s});return new Il(a)}})();function tE(){return Tl((0,o.Mx4)(),(0,o.OAn)())}function Tl(e,t){return 4&e.type?new Ma(t,e,zn(e,t)):null}function Xp(e,t,n){const r=t.insertBeforeIndex,s=Array.isArray(r)?r[0]:r;return null===s?Ap(e,0,n):(0,o.IvY)(n[s])}function qp(e,t,n,r,s){const a=t.insertBeforeIndex;if(Array.isArray(a)){let g=r,A=null;if(3&t.type||(A=g,g=s),null!==g&&-1===t.componentOffset)for(let T=1;T<a.length;T++)vs(e,g,n[a[T]],A,!1)}}function bs(e,t,n,r,s){let a=e.data[t];if(null===a)a=lu(e,t,n,r,s),(0,o.JjR)()&&(a.flags|=32);else if(64&a.type){a.type=n,a.value=r,a.attrs=s;const g=(0,o.Ab)();a.injectorIndex=null===g?-1:g.injectorIndex}return(0,o.iMd)(a,!0),a}function lu(e,t,n,r,s){const a=(0,o.veI)(),g=(0,o.YWB)(),T=e.data[t]=function uE(e,t,n,r,s,a){let g=t?t.injectorIndex:-1,A=0;return(0,o.KtD)()&&(A|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:g,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:A,providerIndexes:0,value:s,attrs:a,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?a:a&&a.parent,n,t,r,s);return function cE(e,t,n,r){null===e.firstChild&&(e.firstChild=t),null!==n&&(r?null==n.child&&null!==t.parent&&(n.child=t):null===n.next&&(n.next=t,t.prev=n))}(e,T,a,g),T}function Qp(e,t){if(e.push(t),e.length>1)for(let n=e.length-2;n>=0;n--){const r=e[n];Jp(r)||dE(r,t)&&null===fE(r)&&hE(r,t.index)}}function Jp(e){return!(64&e.type)}function dE(e,t){return Jp(t)||e.index>t.index}function fE(e){const t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function hE(e,t){const n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(Ip(Xp,qp),e.insertBeforeIndex=t)}function xa(e,t){const n=e.data[t];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function mE(e,t,n){const r=lu(e,n,64,null,null);return Qp(t,r),r}function Ol(e,t){const n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}function Yp(e){return e>>>17}function Zp(e){return(131070&e)>>>1}function cu(e,t,n){e.index=0;const r=Ol(t,n);e.removes=null!==r?t.remove[r]:o.Mlv}function Pl(e){if(e.index<e.removes.length){const t=e.removes[e.index++];return t>0?e.lView[t]:(e.stack.push(e.index,e.removes),cu(e,e.lView[o.eDl].data[~t],e.lView),Pl(e))}return 0===e.stack.length?(e.lView=void 0,null):(e.removes=e.stack.pop(),e.index=e.stack.pop(),Pl(e))}function _E(){const e={stack:[],index:-1};return function t(n,r){for(e.lView=r;e.stack.length;)e.stack.pop();return cu(e,n.value,r),Pl.bind(null,e)}}function UE(e,t,n){for(const r of n.node.cases[n.case]){const s=t.get(r.index-o.Yw1);s&&ba(e,s,!1)}}function xl(e){const t=e[o.qFA]??[],r=e[o.f7T][o.GpT],s=[];for(const a of t)void 0!==a.data.di?s.push(a):ug(a,r);e[o.qFA]=s}function $E(e){const{lContainer:t}=e,n=t[o.qFA];if(null===n)return;const s=t[o.f7T][o.GpT];for(const a of n)ug(a,s)}function ug(e,t){let n=0,r=e.firstChild;if(r){const s=e.data.r;for(;n<s;){const a=r.nextSibling;ba(t,r,!1),r=a,n++}}}function kl(e){xl(e);const t=e[o.jgP];(0,o.q$2)(t)&&Ll(t);for(let n=o.Y20;n<e.length;n++)Ll(e[n])}function Ll(e){!function FE(e){const t=e[o.tcA];if(t){const{i18nNodes:n,dehydratedIcuData:r}=t;if(n&&r){const s=e[o.GpT];for(const a of r.values())UE(s,n,a)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}(e);const t=e[o.eDl];for(let n=o.Yw1;n<t.bindingStartIndex;n++)(0,o.A0l)(e[n])?kl(e[n]):(0,o.q$2)(e[n])&&Ll(e[n])}let HE=class{},mg=class{};class GE{resolveComponentFactory(t){throw new o.buA(917,!1)}}let Nl=class{static NULL=new GE};class gu{}let XE=(()=>class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>function qE(){const e=(0,o.OAn)(),t=(0,o.Mx4)(),n=(0,o.KdJ)(t.index,e);return((0,o.q$2)(n)?n:e)[o.GpT]}()})(),QE=(()=>{class e{static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:()=>null})}return e})();function mu(e){return void 0!==e.ngModule}function Ss(e){return!!(0,o.phH)(e)}function Fl(e){return!!(0,o.oyA)(e)}function vg(e){return!!(0,o.HaV)(e)}function Fa(e){return!!(0,o.xUg)(e)}function YE(e,t){if((0,o.Jzi)(e)&&!(e=(0,o.nl4)(e)))throw new Error(`Expected forwardRef function, imported from "${(0,o.PP7)(t)}", to return a standalone entity or NgModule but got "${(0,o.PP7)(e)||e}".`);if(null==(0,o.phH)(e)){const n=(0,o.xUg)(e)||(0,o.HaV)(e)||(0,o.oyA)(e);if(null==n)throw mu(e)?new Error(`A module with providers was imported from "${(0,o.PP7)(t)}". Modules with providers are not supported in standalone components imports.`):new Error(`The "${(0,o.PP7)(e)}" type, imported from "${(0,o.PP7)(t)}", must be a standalone component / directive / pipe or an NgModule. Did you forget to add the required @Component / @Directive / @Pipe or @NgModule annotation?`);if(!n.standalone)throw new Error(`The "${(0,o.PP7)(e)}" ${function JE(e){return(0,o.xUg)(e)?"component":(0,o.HaV)(e)?"directive":(0,o.oyA)(e)?"pipe":"type"}(e)}, imported from "${(0,o.PP7)(t)}", is not standalone. Did you forget to add the standalone: true flag?`)}}class ZE{ownerNgModule=new Map;ngModulesWithSomeUnresolvedDecls=new Set;ngModulesScopeCache=new Map;standaloneComponentsScopeCache=new Map;resolveNgModulesDecls(){if(0!==this.ngModulesWithSomeUnresolvedDecls.size){for(const t of this.ngModulesWithSomeUnresolvedDecls){const n=(0,o.phH)(t);if(n?.declarations)for(const r of Ii(n.declarations))Fa(r)&&this.ownerNgModule.set(r,t)}this.ngModulesWithSomeUnresolvedDecls.clear()}}getComponentDependencies(t,n){this.resolveNgModulesDecls();const r=(0,o.xUg)(t);if(null===r)throw new Error(`Attempting to get component dependencies for a type that is not a component: ${t}`);if(r.standalone){const s=this.getStandaloneComponentScope(t,n);return s.compilation.isPoisoned?{dependencies:[]}:{dependencies:[...s.compilation.directives,...s.compilation.pipes,...s.compilation.ngModules]}}{if(!this.ownerNgModule.has(t))return{dependencies:[]};const s=this.getNgModuleScope(this.ownerNgModule.get(t));return s.compilation.isPoisoned?{dependencies:[]}:{dependencies:[...s.compilation.directives,...s.compilation.pipes]}}}registerNgModule(t,n){if(!Ss(t))throw new Error(`Attempting to register a Type which is not NgModule as NgModule: ${t}`);this.ngModulesWithSomeUnresolvedDecls.add(t)}clearScopeCacheFor(t){this.ngModulesScopeCache.delete(t),this.standaloneComponentsScopeCache.delete(t)}getNgModuleScope(t){if(this.ngModulesScopeCache.has(t))return this.ngModulesScopeCache.get(t);const n=this.computeNgModuleScope(t);return this.ngModulesScopeCache.set(t,n),n}computeNgModuleScope(t){const n=(0,o.WbQ)(t),r={exported:{directives:new Set,pipes:new Set},compilation:{directives:new Set,pipes:new Set}};for(const s of Ii(n.imports))if(Ss(s)){const a=this.getNgModuleScope(s);es(a.exported.directives,r.compilation.directives),es(a.exported.pipes,r.compilation.pipes)}else{if(!(0,o.QuC)(s)){r.compilation.isPoisoned=!0;break}if(vg(s)||Fa(s))r.compilation.directives.add(s);else{if(!Fl(s))throw new o.buA(980,"The standalone imported type is neither a component nor a directive nor a pipe");r.compilation.pipes.add(s)}}if(!r.compilation.isPoisoned)for(const s of Ii(n.declarations)){if(Ss(s)||(0,o.QuC)(s)){r.compilation.isPoisoned=!0;break}Fl(s)?r.compilation.pipes.add(s):r.compilation.directives.add(s)}for(const s of Ii(n.exports))if(Ss(s)){const a=this.getNgModuleScope(s);es(a.exported.directives,r.exported.directives),es(a.exported.pipes,r.exported.pipes),es(a.exported.directives,r.compilation.directives),es(a.exported.pipes,r.compilation.pipes)}else Fl(s)?r.exported.pipes.add(s):r.exported.directives.add(s);return r}getStandaloneComponentScope(t,n){if(this.standaloneComponentsScopeCache.has(t))return this.standaloneComponentsScopeCache.get(t);const r=this.computeStandaloneComponentScope(t,n);return this.standaloneComponentsScopeCache.set(t,r),r}computeStandaloneComponentScope(t,n){const r={compilation:{directives:new Set([t]),pipes:new Set,ngModules:new Set}};for(const s of(0,o.Bqz)(n??[])){const a=(0,o.nl4)(s);try{YE(a,t)}catch{return r.compilation.isPoisoned=!0,r}if(Ss(a)){r.compilation.ngModules.add(a);const g=this.getNgModuleScope(a);if(g.exported.isPoisoned)return r.compilation.isPoisoned=!0,r;es(g.exported.directives,r.compilation.directives),es(g.exported.pipes,r.compilation.pipes)}else if(Fl(a))r.compilation.pipes.add(a);else{if(!vg(a)&&!Fa(a))return r.compilation.isPoisoned=!0,r;r.compilation.directives.add(a)}}return r}isOrphanComponent(t){const n=(0,o.xUg)(t);return!(!n||n.standalone||(this.resolveNgModulesDecls(),this.ownerNgModule.has(t)))}}function es(e,t){for(const n of e)t.add(n)}const Ua=new ZE,vu={};class na{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){const s=this.injector.get(t,vu,r);return s!==vu||n===vu?s:this.parentInjector.get(t,n,r)}}function Ul(e,t,n){let r=n?e.styles:null,s=n?e.classes:null,a=0;if(null!==t)for(let g=0;g<t.length;g++){const A=t[g];if("number"==typeof A)a=A;else if(1==a)s=(0,o.n$e)(s,A);else if(2==a){const J=t[++g];r=(0,o.n$e)(r,A+": "+J+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=s:e.classesWithoutHost=s}function ra(e,t=0){const n=(0,o.OAn)();return null===n?(0,o.KVO)(e,t):Ct((0,o.Mx4)(),n,(0,o.nl4)(e),t)}function _g(){throw new Error("invalid")}function yg(e,t,n,r,s){const a=null===r?null:{"":-1},g=s(e,n);if(null!==g){let A=g,T=null,J=null;for(const se of g)if(null!==se.resolveHostDirectives){[A,T,J]=se.resolveHostDirectives(g);break}!function nb(e,t,n,r,s,a,g){const A=r.length;let T=!1;for(let rt=0;rt<A;rt++){const at=r[rt];!T&&(0,o.JlV)(at)&&(T=!0,tb(e,n,rt)),Jn(yr(n,t),e,at.type)}!function lb(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,A);for(let rt=0;rt<A;rt++){const at=r[rt];at.providersResolver&&at.providersResolver(at)}let J=!1,se=!1,ke=Sa(e,t,A,null);A>0&&(n.directiveToIndex=new Map);for(let rt=0;rt<A;rt++){const at=r[rt];if(n.mergedAttrs=cn(n.mergedAttrs,at.hostAttrs),ob(e,n,t,ke,at),ab(ke,at,s),null!==g&&g.has(at)){const[Qt,On]=g.get(at);n.directiveToIndex.set(at.type,[ke,Qt+n.directiveStart,On+n.directiveStart])}else(null===a||!a.has(at))&&n.directiveToIndex.set(at.type,ke);null!==at.contentQueries&&(n.flags|=4),(null!==at.hostBindings||null!==at.hostAttrs||0!==at.hostVars)&&(n.flags|=64);const Ot=at.type.prototype;!J&&(Ot.ngOnChanges||Ot.ngOnInit||Ot.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),J=!0),!se&&(Ot.ngOnChanges||Ot.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),se=!0),ke++}!function rb(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){const s=e.data[r];if(null!==n&&n.has(s)){const a=n.get(s);bg(0,t,a,r),bg(1,t,a,r),Sg(t,r,!0)}else Eg(0,t,s,r),Eg(1,t,s,r),Sg(t,r,!1)}}(e,n,a)}(e,t,n,A,a,T,J)}null!==a&&null!==r&&function eb(e,t,n){const r=e.localNames=[];for(let s=0;s<t.length;s+=2){const a=n[t[s+1]];if(null==a)throw new o.buA(-301,!1);r.push(t[s],a)}}(n,r,a)}function tb(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Eg(e,t,n,r){const s=0===e?n.inputs:n.outputs;for(const a in s)if(s.hasOwnProperty(a)){let g;g=0===e?t.inputs??={}:t.outputs??={},g[a]??=[],g[a].push(r),Dg(t,a)}}function bg(e,t,n,r){const s=0===e?n.inputs:n.outputs;for(const a in s)if(s.hasOwnProperty(a)){const g=s[a];let A;A=0===e?t.hostDirectiveInputs??={}:t.hostDirectiveOutputs??={},A[g]??=[],A[g].push(r,a),Dg(t,g)}}function Dg(e,t){"class"===t?e.flags|=8:"style"===t&&(e.flags|=16)}function Sg(e,t,n){const{attrs:r,inputs:s,hostDirectiveInputs:a}=e;if(null===r||!n&&null===s||n&&null===a||kc(e))return e.initialInputs??=[],void e.initialInputs.push(null);let g=null,A=0;for(;A<r.length;){const T=r[A];if(0!==T)if(5!==T){if("number"==typeof T)break;if(!n&&s.hasOwnProperty(T)){const J=s[T];for(const se of J)if(se===t){g??=[],g.push(T,r[A+1]);break}}else if(n&&a.hasOwnProperty(T)){const J=a[T];for(let se=0;se<J.length;se+=2)if(J[se]===t){g??=[],g.push(J[se+1],r[A+1]);break}}A+=2}else A+=2;else A+=4}e.initialInputs??=[],e.initialInputs.push(g)}function ob(e,t,n,r,s){e.data[r]=s;const a=s.factory||(s.factory=(0,o.wGu)(s.type,!0)),g=new Et(a,(0,o.JlV)(s),ra,null);e.blueprint[r]=g,n[r]=g,function ib(e,t,n,r,s){const a=s.hostBindings;if(a){let g=e.hostBindingOpCodes;null===g&&(g=e.hostBindingOpCodes=[]);const A=~t.index;(function sb(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(g)!=A&&g.push(A),g.push(n,r,a)}}(e,t,r,Sa(e,n,s.hostVars,Yr),s)}function ab(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;(0,o.JlV)(t)&&(n[""]=e)}}function _u(e,t,n,r,s,a,g,A){const T=t[o.eDl],J=T.consts,ke=bs(T,e,n,r,(0,o.db4)(J,g));return a&&yg(T,t,ke,(0,o.db4)(J,A),s),ke.mergedAttrs=cn(ke.mergedAttrs,ke.attrs),null!==ke.attrs&&Ul(ke,ke.attrs,!1),null!==ke.mergedAttrs&&Ul(ke,ke.mergedAttrs,!0),null!==T.queries&&T.queries.elementStart(T,ke),ke}function yu(e,t){lt(e,t),(0,o.srX)(t)&&e.queries.elementEnd(t)}function Cg(e,t,n,r,s,a){const g=t.consts,T=bs(t,e,n,r,(0,o.db4)(g,s));if(T.mergedAttrs=cn(T.mergedAttrs,T.attrs),null!=a){const J=(0,o.db4)(g,a);T.localNames=[];for(let se=0;se<J.length;se+=2)T.localNames.push(J[se],-1)}return null!==T.attrs&&Ul(T,T.attrs,!1),null!==T.mergedAttrs&&Ul(T,T.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,T),T}function Eu(e){return!!Ag(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function ub(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}function Ag(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ti(e,t,n){return e[t]=n}function $a(e,t){return e[t]}function lo(e,t,n){return n!==Yr&&(!Object.is(e[t],n)&&(e[t]=n,!0))}function Cs(e,t,n,r){const s=lo(e,t,n);return lo(e,t+1,r)||s}function $l(e,t,n,r,s){const a=Cs(e,t,n,r);return lo(e,t+2,s)||a}function ei(e,t,n,r,s,a){const g=Cs(e,t,n,r);return Cs(e,t+2,s,a)||g}function Ba(e,t,n){return function r(s){Zs((0,o.Qs1)(e)?(0,o.KdJ)(e.index,t):t,5);const g=t[o.SKP];let A=wg(t,g,n,s),T=r.__ngNextListenerFn__;for(;T;)A=wg(t,g,T,s)&&A,T=T.__ngNextListenerFn__;return A}}function wg(e,t,n,r){const s=(0,D.Ht)(null);try{return vt(6,t,n),!1!==n(r)}catch(a){return nu(e,a),!1}finally{vt(7,t,n),(0,D.Ht)(s)}}function Ig(e,t,n,r,s,a,g,A){const T=(0,o.yoD)(e);let J=!1,se=null;if(!r&&T&&(se=function hb(e,t,n,r){const s=e.cleanup;if(null!=s)for(let a=0;a<s.length-1;a+=2){const g=s[a];if(g===n&&s[a+1]===r){const A=t[o.VVG],T=s[a+2];return A&&A.length>T?A[T]:null}"string"==typeof g&&(a+=2)}return null}(t,n,a,e.index)),null!==se)(se.__ngLastListenerFn__||se).__ngNextListenerFn__=g,se.__ngLastListenerFn__=g,J=!0;else{const ke=(0,o.d31)(e,n),rt=r?r(ke):ke,at=s.listen(rt,a,A);(function fb(e){return e.startsWith("animation")||e.startsWith("transition")})(a)||Tg(r?Qt=>r((0,o.IvY)(Qt[e.index])):e.index,t,n,a,A,at,!1)}return J}function Tg(e,t,n,r,s,a,g){const A=t.firstCreatePass?(0,o.vNG)(t):null,T=(0,o.d_l)(n),J=T.length;T.push(s,a),A&&A.push(r,e,J,(J+1)*(g?-1:1))}function Bl(e,t,n,r,s,a){const A=t[o.eDl],ke=t[n][A.data[n].outputs[r]].subscribe(a);Tg(e.index,A,t,s,a,ke,!0)}const ts=Symbol("BINDING");class Mg extends Nl{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=(0,o.xUg)(t);return new jl(n,this.ngModule)}}class jl extends mg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function bb(e){return Object.keys(e).map(t=>{const[n,r,s]=e[t],a={propName:n,templateName:t,isSignal:0!==(r&fl.SignalBased)};return s&&(a.transform=s),a})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function Db(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Yy(e){return e.map(Jy).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,s,a,g){vt(22);const A=(0,D.Ht)(null);try{const T=this.componentDef,J=function Ib(e,t,n,r){const s=e?["ng-version","20.3.16"]:function Zy(e){const t=[],n=[];let r=1,s=2;for(;r<e.length;){let a=e[r];if("string"==typeof a)2===s?""!==a&&t.push(a,e[++r]):8===s&&n.push(a);else{if(!di(s))break;s=a}r++}return n.length&&t.push(1,...n),t}(t.selectors[0]);let a=null,g=null,A=0;if(n)for(const se of n)A+=se[ts].requiredVars,se.create&&(se.targetIdx=0,(a??=[]).push(se)),se.update&&(se.targetIdx=0,(g??=[]).push(se));if(r)for(let se=0;se<r.length;se++){const ke=r[se];if("function"!=typeof ke)for(const rt of ke.bindings){A+=rt[ts].requiredVars;const at=se+1;rt.create&&(rt.targetIdx=at,(a??=[]).push(rt)),rt.update&&(rt.targetIdx=at,(g??=[]).push(rt))}}const T=[t];if(r)for(const se of r){const rt=(0,o.HaV)("function"==typeof se?se:se.type);T.push(rt)}return Lc(0,null,function Tb(e,t){return e||t?n=>{if(1&n&&e)for(const r of e)r.create();if(2&n&&t)for(const r of t)r.update()}:null}(a,g),1,A,T,null,null,null,[s],null)}(r,T,g,a),se=function Sb(e,t,n){let r=t instanceof o.uvJ?t:t?.injector;return r&&null!==e.getStandaloneInjector&&(r=e.getStandaloneInjector(r)||r),r?new na(n,r):n}(T,s||this.ngModule,t),ke=function Cb(e){const t=e.get(gu,null);if(null===t)throw new o.buA(407,!1);return{rendererFactory:t,sanitizer:e.get(QE,null),changeDetectionScheduler:e.get(o.hk6,null),ngReflect:!1}}(se),rt=ke.rendererFactory.createRenderer(null,T),at=r?function M0(e,t,n,r){const a=r.get(Zr,!1)||n===$o.ShadowDom,g=e.selectRootElement(t,a);return function O0(e){Pp(e)}(g),g}(rt,r,T.encapsulation,se):function Ab(e,t){const n=function wb(e){return(e.selectors[0][0]||"div").toLowerCase()}(e);return cl(t,n,"svg"===n?o.jNX:"math"===n?o.rJ1:null)}(T,rt),Ot=g?.some(Og)||a?.some(kn=>"function"!=typeof kn&&kn.bindings.some(Og)),Qt=dl(null,J,null,512|Nc(T),null,null,ke,rt,se,null,null);Qt[o.Yw1]=at,(0,o.ID8)(Qt);let On=null;try{const kn=_u(o.Yw1,Qt,2,"#host",()=>J.directiveRegistry,!0,0);Vh(rt,at,kn),H(at,Qt),El(J,Qt,kn),Ai(J,kn,Qt),yu(J,kn),void 0!==n&&function Ob(e,t,n){const r=e.projection=[];for(let s=0;s<t.length;s++){const a=n[s];r.push(null!=a&&a.length?Array.from(a):null)}}(kn,this.ngContentSelectors,n),On=(0,o.KdJ)(kn.index,Qt),Qt[o.SKP]=On[o.SKP],Al(J,Qt,null)}catch(kn){throw null!==On&&Re(On),Re(Qt),kn}finally{vt(23),(0,o.bll)()}return new Mb(this.componentType,Qt,!!Ot)}finally{(0,D.Ht)(A)}}}function Og(e){const t=e[ts].kind;return"input"===t||"twoWay"===t}class Mb extends HE{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=(0,o.XRZ)(n[o.eDl],o.Yw1),this.location=zn(this._tNode,n),this.instance=(0,o.KdJ)(this._tNode.index,n)[o.SKP],this.hostView=this.changeDetectorRef=new Il(n,void 0),this.componentType=t}setInput(t,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const s=this._rootLView;Cl(r,s[o.eDl],s,t,n),this.previousInputValues.set(t,n),Zs((0,o.KdJ)(r.index,s),1)}get injector(){return new Bn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}let Vl=(()=>class e{static __NG_ELEMENT_ID__=Pb})();function Pb(){return xg((0,o.Mx4)(),(0,o.OAn)())}const Rb=Vl,Pg=class extends Rb{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return zn(this._hostTNode,this._hostLView)}get injector(){return new Bn(this._hostTNode,this._hostLView)}get parentInjector(){const t=Or(this._hostTNode,this._hostLView);if(Zn(t)){const n=or(t,this._hostLView),r=Qn(t);return new Bn(n[o.eDl].data[r+8],n)}return new Bn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=Rg(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-o.Y20}createEmbeddedView(t,n,r){let s,a;"number"==typeof r?s=r:null!=r&&(s=r.index,a=r.injector);const A=t.createEmbeddedViewImpl(n||{},a,null);return this.insertImpl(A,s,Es(this._hostTNode,null)),A}createComponent(t,n,r,s,a,g,A){const T=t&&!K(t);let J;if(T)J=n;else{const On=n||{};J=On.index,r=On.injector,s=On.projectableNodes,a=On.environmentInjector||On.ngModuleRef,g=On.directives,A=On.bindings}const se=T?t:new jl((0,o.xUg)(t)),ke=r||this.parentInjector;if(!a&&null==se.ngModule){const kn=(T?ke:this.parentInjector).get(o.uvJ,null);kn&&(a=kn)}(0,o.xUg)(se.componentType??{});const Qt=se.create(ke,s,null,a,g,A);return this.insertImpl(Qt.hostView,J,Es(this._hostTNode,null)),Qt}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){const s=t._lView;if((0,o.ITl)(s)){const A=this.indexOf(t);if(-1!==A)this.detach(A);else{const T=s[o.f7T],J=new Pg(T,T[o.qlT],T[o.f7T]);J.detach(J.indexOf(t))}}const a=this._adjustIndex(n),g=this._lContainer;return ea(g,s,a,r),t.attachToViewContainerRef(),(0,o.EYC)(bu(g),a,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=Rg(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Ta(this._lContainer,n);r&&((0,o.E6O)(bu(this._lContainer),n),wa(r[o.eDl],r))}detach(t){const n=this._adjustIndex(t,-1),r=Ta(this._lContainer,n);return r&&null!=(0,o.E6O)(bu(this._lContainer),n)?new Il(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Rg(e){return e[o.bm_]}function bu(e){return e[o.bm_]||(e[o.bm_]=[])}function xg(e,t){let n;const r=t[e.index];return(0,o.A0l)(r)?n=r:(n=Wp(r,t,null,e),t[e.index]=n,Fc(t,n)),kg(n,t,e,r),new Pg(n,e,t)}let kg=function Ng(e,t,n,r){if(e[o.s6P])return;let s;s=8&n.type?(0,o.IvY)(r):function xb(e,t){const n=e[o.GpT],r=n.createComment(""),s=(0,o.d31)(t,e),a=n.parentNode(s);return vs(n,a,r,n.nextSibling(s),!1),r}(t,n),e[o.s6P]=s};class Su{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new Su(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cu{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,s=[];for(let a=0;a<r;a++){const g=n.getByIndex(a);s.push(this.queries[g.indexInDeclarationView].clone())}return new Cu(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==Mu(t,n).matches&&this.queries[n].setDirty()}}class Fg{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof t?function Bb(e){return e.split(",").map(t=>t.trim())}(t):t}}class Au{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const s=null!==n?n.length:0,a=this.getByIndex(r).embeddedTView(t,s);a&&(a.indexInDeclarationView=r,null!==n?n.push(a):n=[a])}return null!==n?new Au(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class wu{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new wu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){const a=r[s];this.matchTNodeWithReadOption(t,n,Nb(n,a)),this.matchTNodeWithReadOption(t,n,jt(n,t,a,!1,!1))}else r===Ma?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,jt(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const s=this.metadata.read;if(null!==s)if(s===wn||s===Vl||s===Ma&&4&n.type)this.addMatch(n.index,-2);else{const a=jt(n,t,s,!1,!1);null!==a&&this.addMatch(n.index,a)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function Nb(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Ub(e,t,n,r){return-1===n?function Fb(e,t){return 11&e.type?zn(e,t):4&e.type?Tl(e,t):null}(t,e):-2===n?function $b(e,t,n){return n===wn?zn(t,e):n===Ma?Tl(t,e):n===Vl?xg(t,e):void 0}(e,t,r):tn(e,e[o.eDl],n,t)}function Ug(e,t,n,r){const s=t[o.Ds7].queries[r];if(null===s.matches){const a=e.data,g=n.matches,A=[];for(let T=0;null!==g&&T<g.length;T+=2){const J=g[T];A.push(J<0?null:Ub(t,a[J],g[T+1],n.metadata.read))}s.matches=A}return s.matches}function Iu(e,t,n,r){const s=e.queries.getByIndex(n),a=s.matches;if(null!==a){const g=Ug(e,t,s,n);for(let A=0;A<a.length;A+=2){const T=a[A];if(T>0)r.push(g[A/2]);else{const J=a[A+1],se=t[-T];for(let ke=o.Y20;ke<se.length;ke++){const rt=se[ke];rt[o.rQE]===rt[o.f7T]&&Iu(rt[o.eDl],rt,J,r)}if(null!==se[o.nfM]){const ke=se[o.nfM];for(let rt=0;rt<ke.length;rt++){const at=ke[rt];Iu(at[o.eDl],at,J,r)}}}}}return r}function Tu(e,t){return e[o.Ds7].queries[t].queryList}function $g(e,t,n){const r=new cr(!(4&~n));return(0,o.B22)(e,t,r,r.destroy),(t[o.Ds7]??=new Cu).queries.push(new Su(r))-1}function Bg(e,t,n){const r=(0,o.klJ)();return r.firstCreatePass&&(Vg(r,new Fg(e,t,n),-1),!(2&~t)&&(r.staticViewQueries=!0)),$g(r,(0,o.OAn)(),t)}function jg(e,t,n,r){const s=(0,o.klJ)();if(s.firstCreatePass){const a=(0,o.Mx4)();Vg(s,new Fg(t,n,r),a.index),function jb(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(s,e),!(2&~n)&&(s.staticContentQueries=!0)}return $g(s,(0,o.OAn)(),n)}function Vg(e,t,n){null===e.queries&&(e.queries=new Au),e.queries.track(new wu(t,n))}function Mu(e,t){return e.queries.getByIndex(t)}function Wg(e,t){const n=e[o.eDl],r=Mu(n,t);return r.crossesNgTemplate?Iu(n,e,t,[]):Ug(n,e,r,t)}function Kg(e,t){const n=e[D.bh];n._lView=(0,o.OAn)(),n._queryIndex=t,n._queryList=Tu(n._lView,t),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function Wb(e){const t=[],n=new Map;function r(s){let a=n.get(s);if(!a){const g=e(s);n.set(s,a=g.then(A=>function Gb(e,t){return"string"==typeof t?t:void 0!==t.status&&200!==t.status?Promise.reject(new o.buA(918,!1)):t.text()}(0,A)))}return a}return oa.forEach((s,a)=>{const g=[];s.templateUrl&&g.push(r(s.templateUrl).then(J=>{s.template=J}));const A="string"==typeof s.styles?[s.styles]:s.styles||[];if(s.styles=A,s.styleUrl&&s.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(s.styleUrls?.length){const J=s.styles.length,se=s.styleUrls;s.styleUrls.forEach((ke,rt)=>{A.push(""),g.push(r(ke).then(at=>{A[J+rt]=at,se.splice(se.indexOf(ke),1),0==se.length&&(s.styleUrls=void 0)}))})}else s.styleUrl&&g.push(r(s.styleUrl).then(J=>{A.push(J),s.styleUrl=void 0}));const T=Promise.all(g).then(()=>function Xb(e){ja.delete(e)}(a));t.push(T)}),function zb(){const e=oa;oa=new Map}(),Promise.all(t).then(()=>{})}let oa=new Map;const ja=new Set;function Hb(){return 0===oa.size}const Pu=new Map;function Gg(e,t){(function qb(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${(0,o.AsM)(t)} vs ${(0,o.AsM)(t.name)}`)})(t,Pu.get(t)||null,e),Pu.set(t,e)}let As=class{},Xg=class{};function Qb(e,t){return new Ru(e,t??null,[])}class Ru extends As{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Mg(this);constructor(t,n,r,s=!0){super(),this.ngModuleType=t,this._parent=n;const a=(0,o.phH)(t);this._bootstrapComponents=Ii(a.bootstrap),this._r3Injector=(0,o.Pz9)(t,n,[{provide:As,useValue:this},{provide:Nl,useValue:this.componentFactoryResolver},...r],(0,o.AsM)(t),new Set(["environment"])),s&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class qg extends Xg{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Ru(this.moduleType,t,[])}}function Jb(e,t,n){return new Ru(e,t,n,!1)}class Yb extends As{injector;componentFactoryResolver=new Mg(this);instance=null;constructor(t){super();const n=new o.e5P([...t.providers,{provide:As,useValue:this},{provide:Nl,useValue:this.componentFactoryResolver}],t.parent||(0,o.WB9)(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function xu(e,t,n=null){return new Yb({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}let Zb=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=(0,o.jXY)(!1,n.type),s=r.length>0?xu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=(0,o.jDH)({token:e,providedIn:"environment",factory:()=>new e((0,o.KVO)(o.uvJ))})}return e})();function Qg(e){return Pe(()=>{const t=tm(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Dr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?s=>s.get(Zb).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||$o.Emulated,styles:e.styles||o.Mlv,_:null,schemas:e.schemas||null,tView:null,id:""};t.standalone&&Mo("NgStandalone"),nm(n);const r=e.dependencies;return n.directiveDefs=Wl(r,Jg),n.pipeDefs=Wl(r,o.oyA),n.id=function rD(e){let t=0;const r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,"function"==typeof e.consts?"":e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(const a of r.join("|"))t=Math.imul(31,t)+a.charCodeAt(0)|0;return t+=2147483648,"c"+t}(n),n})}function Jg(e){return(0,o.xUg)(e)||(0,o.HaV)(e)}function Yg(e){return Pe(()=>({type:e.type,bootstrap:e.bootstrap||o.Mlv,declarations:e.declarations||o.Mlv,imports:e.imports||o.Mlv,exports:e.exports||o.Mlv,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function eD(e,t){if(null==e)return o.MZA;const n={};for(const r in e)if(e.hasOwnProperty(r)){const s=e[r];let a,g,A,T;Array.isArray(s)?(A=s[0],a=s[1],g=s[2]??a,T=s[3]||null):(a=s,g=s,A=fl.None,T=null),n[a]=[r,A,T],t[a]=g}return n}function tD(e){if(null==e)return o.MZA;const t={};for(const n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Zg(e){return Pe(()=>{const t=tm(e);return nm(t),t})}function em(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function tm(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||o.MZA,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:!0===e.signals,selectors:e.selectors||o.Mlv,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:eD(e.inputs,t),outputs:tD(e.outputs),debugInfo:null}}function nm(e){e.features?.forEach(t=>t(e))}function Wl(e,t){return e?()=>{const n="function"==typeof e?e():e,r=[];for(const s of n){const a=t(s);null!==a&&r.push(a)}return r}:null}function rm(e){return Object.getPrototypeOf(e.prototype).constructor}function ku(e){let t=rm(e.type),n=!0;const r=[e];for(;t;){let s;if((0,o.JlV)(e))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new o.buA(903,!1);s=t.\u0275dir}if(s){if(n){r.push(s);const g=e;g.inputs=Lu(e.inputs),g.declaredInputs=Lu(e.declaredInputs),g.outputs=Lu(e.outputs);const A=s.hostBindings;A&&lD(e,A);const T=s.viewQuery,J=s.contentQueries;if(T&&sD(e,T),J&&aD(e,J),oD(e,s),(0,o.dwj)(e.outputs,s.outputs),(0,o.JlV)(s)&&s.data.animation){const se=e.data;se.animation=(se.animation||[]).concat(s.data.animation)}}const a=s.features;if(a)for(let g=0;g<a.length;g++){const A=a[g];A&&A.ngInherit&&A(e),A===ku&&(n=!1)}}t=Object.getPrototypeOf(t)}!function iD(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const s=e[r];s.hostVars=t+=s.hostVars,s.hostAttrs=cn(s.hostAttrs,n=cn(n,s.hostAttrs))}}(r)}function oD(e,t){for(const n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;const r=t.inputs[n];void 0!==r&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function Lu(e){return e===o.MZA?{}:e===o.Mlv?[]:e}function sD(e,t){const n=e.viewQuery;e.viewQuery=n?(r,s)=>{t(r,s),n(r,s)}:t}function aD(e,t){const n=e.contentQueries;e.contentQueries=n?(r,s,a)=>{t(r,s,a),n(r,s,a)}:t}function lD(e,t){const n=e.hostBindings;e.hostBindings=n?(r,s)=>{t(r,s),n(r,s)}:t}const cD=["providersResolver"],uD=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function hD(e){const t=[];let n=!1,r=null,s=null;for(let a=0;a<e.length;a++){const g=e[a];if(null!==g.hostDirectives){const A=t.length;r??=new Map,s??=new Map,om(g,t,r),s.set(g,[A,t.length-1])}0===a&&(0,o.JlV)(g)&&(n=!0,t.push(g))}for(let a=n?1:0;a<e.length;a++)t.push(e[a]);return[t,r,s]}function om(e,t,n){if(null!==e.hostDirectives)for(const r of e.hostDirectives)if("function"==typeof r){const s=r();for(const a of s)im(Nu(a),t,n)}else im(r,t,n)}function im(e,t,n){const r=(0,o.HaV)(e.directive);(function pD(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=e[n])})(r.declaredInputs,e.inputs),om(r,t,n),n.set(r,e),t.push(r)}function Nu(e){return"function"==typeof e?{directive:(0,o.nl4)(e),inputs:o.MZA,outputs:o.MZA}:{directive:(0,o.nl4)(e.directive),inputs:sm(e.inputs),outputs:sm(e.outputs)}}function sm(e){if(void 0===e||0===e.length)return o.MZA;const t={};for(let n=0;n<e.length;n+=2)t[e[n]]=e[n+1];return t}function lm(e,t,n,r,s,a,g,A){if(n.firstCreatePass){e.mergedAttrs=cn(e.mergedAttrs,e.attrs);const se=e.tView=Lc(2,e,s,a,g,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);null!==n.queries&&(n.queries.template(n,e),se.queries=n.queries.embeddedTView(e))}A&&(e.flags|=A),(0,o.iMd)(e,!1);const T=um(n,t,e,r);(0,o.SX7)()&&Jc(n,t,T,e),H(T,t);const J=Wp(T,t,T,e);t[r+o.Yw1]=J,Fc(t,J)}function ws(e,t,n,r,s,a,g,A,T,J,se){const ke=n+o.Yw1;let rt;if(t.firstCreatePass){if(rt=bs(t,ke,4,g||null,A||null),null!=J){const at=(0,o.db4)(t.consts,J);rt.localNames=[];for(let Ot=0;Ot<at.length;Ot+=2)rt.localNames.push(at[Ot],-1)}}else rt=t.data[ke];return lm(rt,e,t,n,r,s,a,T),null!=J&&Js(e,rt,se),rt}function Fu(e,t,n,r,s,a,g,A){const T=(0,o.OAn)(),J=(0,o.klJ)();return function gD(e,t,n,r,s,a,g,A,T,J,se){const ke=n+o.Yw1;let rt;t.firstCreatePass?(rt=bs(t,ke,4,g||null,A||null),(0,o.ckz)()&&yg(t,e,rt,(0,o.db4)(t.consts,J),tu),lt(t,rt)):rt=t.data[ke],lm(rt,e,t,n,r,s,a,T),(0,o.yoD)(rt)&&El(t,e,rt),null!=J&&Js(e,rt,se)}(T,J,e,t,n,r,s,(0,o.db4)(J.consts,a),void 0,g,A),Fu}let um=function dm(e,t,n,r){return(0,o.m7n)(!0),t[o.GpT].createComment("")};var yo=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.COMPLETE=2]="COMPLETE",e[e.FAILED=3]="FAILED",e}(yo||{}),to=function(e){return e[e.Placeholder=0]="Placeholder",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete",e[e.Error=3]="Error",e}(to||{}),ia=function(e){return e[e.Initial=-1]="Initial",e}(ia||{}),hm=function(e){return e[e.Manual=0]="Manual",e[e.Playthrough=1]="Playthrough",e}(hm||{});function Wa(e,t,n){const r=gm(e);null===t[r]&&(t[r]=[]),t[r].push(n)}function Hl(e,t){const n=gm(e),r=t[n];if(null!==r){for(const s of r)s();t[n]=null}}function pm(e){Hl(1,e),Hl(0,e),Hl(2,e)}function gm(e){let t=4;return 1===e?t=5:2===e&&(t=9),t}function Ka(e){return e+1}function Bo(e,t){return e[Ka(t.index)]}function Oo(e,t){const n=Ka(t.index);return e.data[n]}function Uu(e,t){return t===to.Placeholder?e.placeholderBlockConfig?.[0]??null:t===to.Loading?e.loadingBlockConfig?.[0]??null:null}function mm(e){return e.loadingBlockConfig?.[1]??null}function vm(e,t){if(!e||0===e.length)return t;const n=new Set(e);for(const r of t)n.add(r);return e.length===n.size?e:Array.from(n)}function $u(e,t,n){const r=n.get(ro);return function Wo(e,t,n){let r=Hr.get(e);return Io=Io||n(),r||(r=new Lo,Io.observe(e),Hr.set(e,r),qo++),r.callbacks.add(t),()=>{Hr.has(e)&&(r.callbacks.delete(t),0===r.callbacks.size&&(Io?.unobserve(e),Hr.delete(e),qo--),0===qo&&(Io?.disconnect(),Io=null))}}(e,()=>r.run(t),()=>r.runOutsideAngular(()=>function Us(){return new IntersectionObserver(e=>{for(const t of e)t.isIntersecting&&Hr.has(t.target)&&Hr.get(t.target).listener()})}()))}function la(e,t,n,r,s,a,g){const A=e[o.YEL],T=A.get(ro);let J;J=function v0(e,t){const n=t?.injector??(0,o.WQX)(o.zZn);return Mo("NgAfterRender"),vp(e,n,t,!1)}({read:function se(){if((0,o.EPY)(e))return void J.destroy();const ke=Bo(e,t),rt=ke[1];if(rt!==ia.Initial&&rt!==to.Placeholder)return void J.destroy();const at=function AD(e,t,n){return null==n?e:n>=0?(0,o.jRZ)(n,e):e[t.index][o.Y20]??null}(e,t,r);if(!at||(J.destroy(),(0,o.EPY)(at)))return;const Ot=function wD(e,t){return(0,o.vaC)(o.Yw1+t,e)}(at,n),Qt=s(Ot,()=>{T.run(()=>{e!==at&&(0,o.DyX)(at,Qt),a()})},A);e!==at&&(0,o.ik5)(at,Qt),Wa(g,ke,Qt)}},{injector:A})}function Gl(e,t){const n=t.get(MD);return n.add(e),()=>n.remove(e)}let MD=(()=>{class e{executingCallbacks=!1;idleId=null;current=new Set;deferred=new Set;ngZone=(0,o.WQX)(ro);requestIdleCallbackFn=(()=>typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout)().bind(globalThis);cancelIdleCallbackFn=(()=>typeof requestIdleCallback<"u"?cancelIdleCallback:clearTimeout)().bind(globalThis);add(n){(this.executingCallbacks?this.deferred:this.current).add(n),null===this.idleId&&this.scheduleIdleCallback()}remove(n){const{current:r,deferred:s}=this;r.delete(n),s.delete(n),0===r.size&&0===s.size&&this.cancelIdleCallback()}scheduleIdleCallback(){const n=()=>{this.cancelIdleCallback(),this.executingCallbacks=!0;for(const r of this.current)r();if(this.current.clear(),this.executingCallbacks=!1,this.deferred.size>0){for(const r of this.deferred)this.current.add(r);this.deferred.clear(),this.scheduleIdleCallback()}};this.idleId=this.requestIdleCallbackFn(()=>this.ngZone.run(n))}cancelIdleCallback(){null!==this.idleId&&(this.cancelIdleCallbackFn(this.idleId),this.idleId=null)}ngOnDestroy(){this.cancelIdleCallback(),this.current.clear(),this.deferred.clear()}static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:()=>new e})}return e})();function Xl(e){return(t,n)=>ym(e,t,n)}function ym(e,t,n){const r=n.get(OD),s=n.get(ro);return r.add(e,t,s),()=>r.remove(t)}let OD=(()=>{class e{executingCallbacks=!1;timeoutId=null;invokeTimerAt=null;current=[];deferred=[];add(n,r,s){this.addToQueue(this.executingCallbacks?this.deferred:this.current,Date.now()+n,r),this.scheduleTimer(s)}remove(n){const{current:r,deferred:s}=this;-1===this.removeFromQueue(r,n)&&this.removeFromQueue(s,n),0===r.length&&0===s.length&&this.clearTimeout()}addToQueue(n,r,s){let a=n.length;for(let g=0;g<n.length;g+=2)if(n[g]>r){a=g;break}(0,o.llW)(n,a,r,s)}removeFromQueue(n,r){let s=-1;for(let a=0;a<n.length;a+=2)if(n[a+1]===r){s=a;break}return s>-1&&(0,o.gsJ)(n,s,2),s}scheduleTimer(n){const r=()=>{this.clearTimeout(),this.executingCallbacks=!0;const a=[...this.current],g=Date.now();for(let T=0;T<a.length;T+=2){const se=a[T+1];if(!(a[T]<=g))break;se()}let A=-1;for(let T=0;T<this.current.length&&this.current[T]<=g;T+=2)A=T+1;if(A>=0&&(0,o.gsJ)(this.current,0,A+1),this.executingCallbacks=!1,this.deferred.length>0){for(let T=0;T<this.deferred.length;T+=2)this.addToQueue(this.current,this.deferred[T],this.deferred[T+1]);this.deferred.length=0}this.scheduleTimer(n)};if(this.current.length>0){const a=Date.now(),g=this.current[0];if(null===this.timeoutId||this.invokeTimerAt&&this.invokeTimerAt-g>16){this.clearTimeout();const A=Math.max(g-a,16);this.invokeTimerAt=g,this.timeoutId=n.runOutsideAngular(()=>setTimeout(()=>n.run(r),A))}}}clearTimeout(){null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}ngOnDestroy(){this.clearTimeout(),this.current.length=0,this.deferred.length=0}static \u0275prov=(0,o.jDH)({token:e,providedIn:"root",factory:()=>new e})}return e})(),PD=(()=>{class e{cachedInjectors=new Map;getOrCreateInjector(n,r,s,a){if(!this.cachedInjectors.has(n)){const g=s.length>0?xu(s,r,a):null;this.cachedInjectors.set(n,g)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=(0,o.jDH)({token:e,providedIn:"environment",factory:()=>new e})}return e})();const RD=new o.nKC("");function Bu(e,t,n){return e.get(PD).getOrCreateInjector(t,e,n,"")}function ns(e,t,n,r=!1){const s=n[o.f7T],a=s[o.eDl];if((0,o.EPY)(s))return;const g=Bo(s,t),T=g[7];if(!(null!==T&&e<T)&&Dm(g[1],e)&&Dm(g[0]??-1,e)){const J=Oo(a,t),ke=r||null===mm(J)&&null===Uu(J,to.Loading)&&!Uu(J,to.Placeholder)?Em:ju;try{ke(e,g,n,t,s)}catch(rt){nu(s,rt)}}}function Em(e,t,n,r,s){vt(20);const a=function SD(e,t,n){const s=Oo(t[o.eDl],n);switch(e){case to.Complete:return s.primaryTmplIndex;case to.Loading:return s.loadingTmplIndex;case to.Error:return s.errorTmplIndex;case to.Placeholder:return s.placeholderTmplIndex;default:return null}}(e,s,r);if(null!==a){t[1]=e;const g=s[o.eDl],T=(0,o.XRZ)(g,a+o.Yw1),J=0;let se;if(ou(n,J),e===to.Complete){const Ot=Oo(g,r),Qt=Ot.providers;Qt&&Qt.length>0&&(se=function xD(e,t,n){if(e instanceof na){const s=e.injector,g=Bu(e.parentInjector,t,n);return new na(s,g)}const r=e.get(o.uvJ);if(r!==e){const s=Bu(r,t,n);return new na(e,s)}return Bu(e,t,n)}(s[o.YEL],Ot,Qt))}const{dehydratedView:ke,dehydratedViewIx:rt}=function kD(e,t){const n=e[o.qFA]?.findIndex(s=>s.data.s===t[1])??-1;return{dehydratedView:n>-1?e[o.qFA][n]:null,dehydratedViewIx:n}}(n,t),at=Ys(s,T,null,{injector:se,dehydratedView:ke});if(ea(n,at,J,Es(T,ke)),Zs(at,2),rt>-1&&n[o.qFA]?.splice(rt,1),(e===to.Complete||e===to.Error)&&Array.isArray(t[8])){for(const Ot of t[8])Ot();t[8]=null}}vt(21)}function LD(e,t,n,r,s){const a=Date.now(),A=Oo(s[o.eDl],r);if(null===t[2]||t[2]<=a){t[2]=null;const T=mm(A),J=null!==t[3];if(e!==to.Loading||null===T||J){e>to.Loading&&J&&(t[3](),t[3]=null,t[0]=null),Em(e,t,n,r,s);const se=Uu(A,e);null!==se&&(t[2]=a+se,bm(se,t,r,n,s))}else{t[0]=e;const se=bm(T,t,r,n,s);t[3]=se}}else t[0]=e}function bm(e,t,n,r,s){return ym(e,()=>{const g=t[0];t[2]=null,t[0]=null,null!==g&&ns(g,n,r)},s[o.YEL])}function Dm(e,t){return e<t}function ca(e,t){ns(to.Placeholder,t,e[t.index])}function Sm(e,t,n){e.loadingPromise.then(()=>{e.loadingState===yo.COMPLETE?ns(to.Complete,t,n):e.loadingState===yo.FAILED&&ns(to.Error,t,n)})}let ju=null;function FD(e,t,n,r){return Pe(()=>{const s=e;null!==t&&(s.hasOwnProperty("decorators")&&void 0!==s.decorators?s.decorators.push(...t):s.decorators=t),null!==n&&(s.ctorParameters=n),null!==r&&(s.propDecorators=s.hasOwnProperty("propDecorators")&&void 0!==s.propDecorators?{...s.propDecorators,...r}:r)})}let Cm=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const $m=new o.nKC(""),Bm=new o.nKC("");let Ku,CS=(()=>{class e{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(n,r,s){this._ngZone=n,this.registry=r,(0,o.M6u)()&&(this._destroyRef=(0,o.WQX)(o.abz,{optional:!0})??void 0),Ku||(function AS(e){Ku=e}(s),s.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){const n=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{ro.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{n.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,s){let a=-1;r&&r>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==a),n()},r)),this._callbacks.push({doneCb:n,timeoutId:a,updateCb:s})}whenStable(n,r,s){if(s&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,s),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,s){return[]}static \u0275fac=function(r){return new(r||e)((0,o.KVO)(ro),(0,o.KVO)(jm),(0,o.KVO)(Bm))};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac})}return e})(),jm=(()=>{class e{_applications=new Map;registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Ku?.findTestabilityInTree(this,n,r)??null}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function Vm(e){return!!e&&"function"==typeof e.then}function Wm(e){return!!e&&"function"==typeof e.subscribe}const zu=new o.nKC("");function wS(e){return(0,o.EmA)([{provide:zu,multi:!0,useValue:e}])}let Km=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=(0,o.WQX)(zu,{optional:!0})??[];injector=(0,o.WQX)(o.zZn);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const s of this.appInits){const a=(0,o.N4e)(this.injector,s);if(Vm(a))n.push(a);else if(Wm(a)){const g=new Promise((A,T)=>{a.subscribe({complete:A,error:T})});n.push(g)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(s=>{this.reject(s)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const zm=new o.nKC("");function IS(){}function TS(){(0,D.KO)(()=>{throw new o.buA(600,"")})}function Hm(e,t){return Array.isArray(t)?t.reduce(Hm,e):{...e,...t}}let Jl=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=(0,o.WQX)(o.ZTf);afterRenderManager=(0,o.WQX)(pp);zonelessEnabled=(0,o.WQX)(o.Evm);rootEffectScheduler=(0,o.WQX)(o.VML);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ce.B;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=(0,o.WQX)(o.rev);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe((0,B.T)(n=>!n))}constructor(){(0,o.WQX)(Aa,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:s=>{s&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=(0,o.WQX)(o.uvJ);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,s=o.zZn.NULL){return this._injector.get(ro).run(()=>{vt(10);const g=n instanceof mg;if(!this._injector.get(Km).done)throw new o.buA(405,"");let T;T=g?n:this._injector.get(Nl).resolveComponentFactory(n),this.componentTypes.push(T.componentType);const J=function MS(e){return e.isBoundToModule}(T)?void 0:this._injector.get(As),ke=T.create(s,[],r||T.selector,J),rt=ke.location.nativeElement,at=ke.injector.get($m,null);return at?.registerApplication(rt),ke.onDestroy(()=>{this.detachView(ke.hostView),Yl(this.components,ke),at?.unregisterApplication(rt)}),this._loadComponent(ke),vt(11,ke),ke})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){vt(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(Bc.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new o.buA(101,!1);const n=(0,D.Ht)(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,(0,D.Ht)(n),this.afterTick.next(),vt(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(gu,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;)vt(14),this.synchronizeOnce(),vt(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:s}of this.allViews)(r||(0,o.dMS)(s))&&(wl(s,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>(0,o.dMS)(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Yl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(s){this.internalErrorHandler(s)}this.components.push(n),this._injector.get(zm,[]).forEach(s=>s(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Yl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new o.buA(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Yl(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function Hu(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}function Gm(e){const t=(0,o.OAn)(),n=(0,o.Mx4)();if(ca(t,n),!Qm(0,t))return;const r=t[o.YEL];Wa(0,Bo(t,n),e(()=>Ms(0,t,n),r))}function Xm(e){const t=(0,o.OAn)(),n=t[o.YEL],r=(0,o.Mx4)(),a=Oo(t[o.eDl],r);a.loadingState===yo.NOT_STARTED&&Wa(1,Bo(t,r),e(()=>Ha(a,t,r),n))}function qm(e,t,n){const r=t[o.YEL],s=Bo(t,n),a=s[6];Wa(2,s,e(()=>Os(r,a),r))}function Ha(e,t,n){Gu(e,t,n)}function Gu(e,t,n){const r=t[o.YEL],s=t[o.eDl];if(e.loadingState!==yo.NOT_STARTED)return e.loadingPromise??Promise.resolve();const a=Bo(t,n),g=function CD(e,t){return(0,o.XRZ)(e,t.primaryTmplIndex+o.Yw1)}(s,e);e.loadingState=yo.IN_PROGRESS,Hl(1,a);let A=e.dependencyResolverFn;const T=r.get(o.u5s).add();return A?(e.loadingPromise=Promise.allSettled(A()).then(J=>{let se=!1;const ke=[],rt=[];for(const at of J){if("fulfilled"!==at.status){se=!0;break}{const Ot=at.value,Qt=(0,o.xUg)(Ot)||(0,o.HaV)(Ot);if(Qt)ke.push(Qt);else{const On=(0,o.oyA)(Ot);On&&rt.push(On)}}}if(se){if(e.loadingState=yo.FAILED,null===e.errorTmplIndex){const Ot=new o.buA(-750,!1);nu(t,Ot)}}else{e.loadingState=yo.COMPLETE;const at=g.tView;if(ke.length>0){at.directiveRegistry=vm(at.directiveRegistry,ke);const Ot=ke.map(On=>On.type),Qt=(0,o.jXY)(!1,...Ot);e.providers=Qt}rt.length>0&&(at.pipeRegistry=vm(at.pipeRegistry,rt))}}),e.loadingPromise.finally(()=>{e.loadingPromise=null,T()})):(e.loadingPromise=Promise.resolve().then(()=>{e.loadingPromise=null,e.loadingState=yo.COMPLETE,T()}),e.loadingPromise)}function Qm(e,t){return t[o.YEL].get(RD,null,{optional:!0})?.behavior!==hm.Manual}function Ms(e,t,n){const r=t[o.eDl],s=t[n.index];if(!Qm(0,t))return;const a=Bo(t,n),g=Oo(r,n);switch(pm(a),g.loadingState){case yo.NOT_STARTED:ns(to.Loading,n,s),Gu(g,t,n),g.loadingState===yo.IN_PROGRESS&&Sm(g,n,s);break;case yo.IN_PROGRESS:ns(to.Loading,n,s),Sm(g,n,s);break;case yo.COMPLETE:ns(to.Complete,n,s);break;case yo.FAILED:ns(to.Error,n,s)}}function Os(e,t,n){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,i.A)(function*(e,t,n){const r=e.get(No);if(r.hydrating.has(t))return;const{parentBlockPromise:a,hydrationQueue:g}=function Xo(e,t){const n=t.get(No),s=t.get(Qr).get("__nghDeferData__",{});let a=!1,g=e,A=null;const T=[];for(;!a&&g;){a=n.has(g);const J=n.hydrating.get(g);if(null===A&&null!=J){A=J.promise;break}T.unshift(g),g=s[g].p}return{parentBlockPromise:A,hydrationQueue:T}}(t,e);if(0===g.length)return;null!==a&&g.shift(),function xS(e,t){for(let n of t)e.hydrating.set(n,Hu())}(r,g),null!==a&&(yield a);const A=g[0];r.has(A)?yield Jm(e,g,n):r.awaitParentBlock(A,(0,i.A)(function*(){return yield Jm(e,g,n)}))})).apply(this,arguments)}function Jm(e,t,n){return qu.apply(this,arguments)}function qu(){return(qu=(0,i.A)(function*(e,t,n){const r=e.get(No),s=r.hydrating,a=e.get(o.rev),g=a.add();for(let T=0;T<t.length;T++){const J=t[T],se=r.get(J);if(null==se){RS(T,t,r),Ym(t.slice(T),r);break}if(yield LS(se),yield kS(e),PS(se)){$E(se),Ym(t.slice(T),r);break}s.get(J).resolve()}const A=t[t.length-1];yield s.get(A)?.promise,a.remove(g),n&&n(t),function jE(e,t,n,r){null!==e&&(n.cleanup(t),kl(e.lContainer),function BE(e){const t=e._views;for(const n of t){const r=Oi(n);null!==r&&null!==r[o.jgP]&&((0,o.q$2)(r)?Ll(r):kl(r))}}(r))}(r.get(A),t,r,e.get(Jl))})).apply(this,arguments)}function PS(e){return Bo(e.lView,e.tNode)[1]===to.Error}function RS(e,t,n){const r=e-1,s=r>-1?n.get(t[r]):null;s&&kl(s.lContainer)}function Ym(e,t){const n=t.hydrating;for(const r in e)n.get(r)?.reject();t.cleanup(e)}function kS(e){return new Promise(t=>zc(t,{injector:e}))}function LS(e){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,i.A)(function*(e){const{tNode:t,lView:n}=e,r=Bo(n,t);return new Promise(s=>{(function NS(e,t){Array.isArray(e[8])||(e[8]=[]),e[8].push(t)})(r,s),Ms(0,n,t)})})).apply(this,arguments)}function po(e,t,n){return 0===e?Zm(t,n):2!==e||!Zm(t,n)}function Zm(e,t){const n=e[o.YEL],r=Oo(e[o.eDl],t),s=Ho(n),a=function FS(e){return null!=e&&!(1&~e)}(r.flags),A=null!==Bo(e,t)[6];return!(a&&A&&s)}function rs(e,t){const n=Oo(e,t);return n.hydrateTriggers??=new Map}function Ju(e,t,n,r){const s=(0,o.OAn)();return lo(s,(0,o.xbp)(),t)&&((0,o.klJ)(),function N0(e,t,n,r,s,a){const g=(0,o.d31)(e,t);bl(t[o.GpT],g,a,e.value,n,r,s)}((0,o.CpD)(),s,e,t,n,r)),Ju}const dC=new o.nKC("",{providedIn:"root",factory:()=>!1}),fC=new o.nKC("",{providedIn:"root",factory:()=>hC}),hC=4e3,Ps=typeof document<"u"&&"function"==typeof document?.documentElement?.getAnimations;function Zl(e){return e[o.YEL].get(dC,!1)}function Yu(e){const t=da.get(e);if(t){for(const n of t.cleanupFns)n();da.delete(e)}Rs.delete(e)}const mC=()=>{},da=new WeakMap,Rs=new WeakMap,fa=new WeakMap;function Zu(e,t){const n=fa.get(e);if(n&&n.length>0){const r=n.findIndex(s=>s===t);r>-1&&n.splice(r,1)}0===n?.length&&fa.delete(e)}function ec(e,t){const n=fa.get(e)?.shift(),r=t[o.rQE];if(r){const a=_l(e.index,r)?.previousSibling;n&&a&&n===a&&n.dispatchEvent(new CustomEvent("animationend",{detail:{cancel:!0}}))}}function nv(e,t){fa.has(e)?fa.get(e)?.push(t):fa.set(e,[t])}function tc(e){const t=e[o.Isx]??={};return t.enter??=new Map}function xs(e){const t=e[o.Isx]??={};return t.leave??=new Map}function rv(e){const t="function"==typeof e?e():e;let n=Array.isArray(t)?t:null;return"string"==typeof t&&(n=t.trim().split(/\s+/).filter(r=>r)),n}function ov(e,t){const n=Rs.get(t);return void 0===n||t===e.target&&(void 0!==n.animationName&&e.animationName===n.animationName||void 0!==n.propertyName&&e.propertyName===n.propertyName)}function nc(e,t,n){const r=e.get(t.index)??{animateFns:[]};r.animateFns.push(n),e.set(t.index,r)}function ed(e,t){if(e)for(const n of e)n();for(const n of t)n()}function td(e,t){const n=xs(e).get(t.index);n&&(n.resolvers=void 0)}function rc(e,t,n,r,s){Zu(t,n),ed(r,s),td(e,t)}class wC{destroy(t){}updateValue(t,n){}swap(t,n){const r=Math.min(t,n),s=Math.max(t,n),a=this.detach(s);if(s-r>1){const g=this.detach(r);this.attach(r,a),this.attach(s,g)}else this.attach(r,a)}move(t,n){this.attach(n,this.detach(t))}}function rd(e,t,n,r,s){return e===n&&Object.is(t,r)?1:Object.is(s(e,t),s(n,r))?-1:0}function od(e,t,n,r){return!(void 0===t||!t.has(r)||(e.attach(n,t.get(r)),t.delete(r),0))}function iv(e,t,n,r,s){if(od(e,t,r,n(r,s)))e.updateValue(r,s);else{const a=e.create(r,s);e.attach(r,a)}}function sv(e,t,n,r){const s=new Set;for(let a=t;a<=n;a++)s.add(r(a,e.at(a)));return s}class av{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;const n=this.kvMap.get(t);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);void 0===this._vMap&&(this._vMap=new Map);const s=this._vMap;for(;s.has(r);)r=s.get(r);s.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),void 0!==this._vMap){const s=this._vMap;for(;s.has(r);)r=s.get(r),t(r,n)}}}function id(e,t,n,r,s,a,g,A){Mo("NgControlFlow");const T=(0,o.OAn)(),J=(0,o.klJ)();return ws(T,J,e,t,n,r,s,(0,o.db4)(J.consts,a),512,g,A),id}class OC{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-o.Y20}}class xC{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}}class LC extends wC{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-o.Y20}at(t){return this.getLView(t)[o.SKP].$implicit}attach(t,n){const r=n[o.tcA];this.needsIndexUpdate||=t!==this.length,ea(this.lContainer,n,t,Es(this.templateTNode,r)),function FC(e,t){if(e.length<=o.Y20)return;const r=e[o.Y20+t],s=r?r[o.Isx]:void 0;r&&s&&s.detachedLeaveAnimationFns&&s.detachedLeaveAnimationFns.length>0&&(function y0(e,t){const n=e.get(ml);if(t.detachedLeaveAnimationFns){for(const r of t.detachedLeaveAnimationFns)n.queue.delete(r);t.detachedLeaveAnimationFns=void 0}}(r[o.YEL],s),_s.delete(r),s.detachedLeaveAnimationFns=void 0)}(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,function UC(e,t){if(e.length<=o.Y20)return;const r=e[o.Y20+t],s=r?r[o.Isx]:void 0;s&&s.leave&&s.leave.size>0&&(s.detachedLeaveAnimationFns=[])}(this.lContainer,t),function $C(e,t){return Ta(e,t)}(this.lContainer,t)}create(t,n){const s=Ys(this.hostLView,this.templateTNode,new OC(this.lContainer,n,t),{dehydratedView:null});return this.operationsCounter?.recordCreate(),s}destroy(t){wa(t[o.eDl],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[o.SKP].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[o.SKP].$index=t}getLView(t){return function BC(e,t){return Kp(e,t)}(this.lContainer,t)}}function ac(e,t){return e[t]}function sd(e,t){return(0,o.XRZ)(e,t)}function ad(e,t,n){const r=(0,o.OAn)();return lo(r,(0,o.xbp)(),t)&&((0,o.klJ)(),Zc((0,o.CpD)(),r,e,t,r[o.GpT],n)),ad}function ld(e,t,n,r,s){Cl(t,e,n,s?"class":"style",r)}function lc(e,t,n,r){const s=(0,o.OAn)(),a=s[o.eDl],g=e+o.Yw1,A=a.firstCreatePass?_u(g,s,2,t,tu,(0,o.ckz)(),n,r):a.data[g];if(Dl(A,s,e,t,fd),(0,o.yoD)(A)){const T=s[o.eDl];El(T,s,A),Ai(T,A,s)}return null!=r&&Js(s,A),lc}function cc(){const e=(0,o.klJ)(),n=Sl((0,o.Mx4)());return e.firstCreatePass&&yu(e,n),(0,o.UhH)(n)&&(0,o.krE)(),(0,o.N79)(),null!=n.classesWithoutHost&&function Cn(e){return!!(8&e.flags)}(n)&&ld(e,n,(0,o.OAn)(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function ln(e){return!!(16&e.flags)}(n)&&ld(e,n,(0,o.OAn)(),n.stylesWithoutHost,!1),cc}function cd(e,t,n,r){return lc(e,t,n,r),cc(),cd}function ud(e,t,n,r){const s=(0,o.OAn)(),a=s[o.eDl],g=e+o.Yw1,A=a.firstCreatePass?Cg(g,a,2,t,n,r):a.data[g];return Dl(A,s,e,t,fd),null!=r&&Js(s,A),ud}function dd(){const t=Sl((0,o.Mx4)());return(0,o.UhH)(t)&&(0,o.krE)(),(0,o.N79)(),dd}let fd=(e,t,n,r,s)=>((0,o.m7n)(!0),cl(t[o.GpT],r,(0,o.UaU)()));function uc(e,t,n){const r=(0,o.OAn)(),s=r[o.eDl],a=e+o.Yw1,g=s.firstCreatePass?_u(a,r,8,"ng-container",tu,(0,o.ckz)(),t,n):s.data[a];if(Dl(g,r,e,"ng-container",gd),(0,o.yoD)(g)){const A=r[o.eDl];El(A,r,g),Ai(A,g,r)}return null!=n&&Js(r,g),uc}function Ga(){const e=(0,o.klJ)(),n=Sl((0,o.Mx4)());return e.firstCreatePass&&yu(e,n),Ga}function hd(e,t,n){return uc(e,t,n),Ga(),hd}function pd(e,t,n){const r=(0,o.OAn)(),s=r[o.eDl],a=e+o.Yw1,g=s.firstCreatePass?Cg(a,s,8,"ng-container",t,n):s.data[a];return Dl(g,r,e,"ng-container",gd),null!=n&&Js(r,g),pd}function cv(){return Sl((0,o.Mx4)()),Ga}let gd=(e,t,n,r,s)=>((0,o.m7n)(!0),Rc(t[o.GpT],""));function dv(){return(0,o.OAn)()}const dc=void 0;var KC=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dc,"{1} 'at' {0}",dc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function WC(e){const t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let ha={};function md(e){const t=function zC(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=gv(t);if(n)return n;const r=t.split("-")[0];if(n=gv(r),n)return n;if("en"===r)return KC;throw new o.buA(701,!1)}function pv(e){return md(e)[pa.PluralCase]}function gv(e){return e in ha||(ha[e]=o.laP.ng&&o.laP.ng.common&&o.laP.ng.common.locales&&o.laP.ng.common.locales[e]),ha[e]}var pa=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(pa||{});const HC=["zero","one","two","few","many"],vd="en-US",fc={marker:"element"},hc={marker:"ICU"};var Vo=function(e){return e[e.SHIFT=2]="SHIFT",e[e.APPEND_EAGERLY=1]="APPEND_EAGERLY",e[e.COMMENT=2]="COMMENT",e}(Vo||{});let mv=vd;function qC(e){"string"==typeof e&&(mv=e.toLowerCase().replace(/_/g,"-"))}let Xa=0,qa=0;let Qa=(e,t,n,r)=>((0,o.m7n)(!0),function vv(e,t,n){const r=e[o.GpT];switch(n){case Node.COMMENT_NODE:return Rc(r,t);case Node.TEXT_NODE:return Pc(r,t);case Node.ELEMENT_NODE:return cl(r,t,null)}}(e,n,r));function _v(e,t,n,r){const s=n[o.GpT];let g,a=null;for(let A=0;A<t.length;A++){const T=t[A];if("string"==typeof T){const J=t[++A];null===n[J]&&(n[J]=Qa(n,0,T,Node.TEXT_NODE))}else if("number"==typeof T)switch(1&T){case 0:const J=Yp(T);let se,ke;if(null===a&&(a=J,g=s.parentNode(r)),J===a?(se=r,ke=g):(se=null,ke=(0,o.IvY)(n[J])),null!==ke){const Qt=Zp(T);vs(s,ke,n[Qt],se,!1);const kn=xa(e,Qt);if(null!==kn&&"object"==typeof kn){const Zt=Ol(kn,n);null!==Zt&&_v(e,kn.create[Zt],n,n[kn.anchorIdx])}}break;case 1:const at=t[++A],Ot=t[++A];bl(s,(0,o.vaC)(T>>>1,n),null,null,at,Ot,null)}else switch(T){case hc:const J=t[++A],se=t[++A];null===n[se]&&H(n[se]=Qa(n,0,J,Node.COMMENT_NODE),n);break;case fc:const ke=t[++A],rt=t[++A];null===n[rt]&&H(n[rt]=Qa(n,0,ke,Node.ELEMENT_NODE),n)}}}function yv(e,t,n,r,s){for(let a=0;a<n.length;a++){const g=n[a],A=n[++a];if(g&s){let T="";for(let J=a+1;J<=a+A;J++){const se=n[J];if("string"==typeof se)T+=se;else if("number"==typeof se)if(se<0)T+=(0,o.eFE)(t[r-se]);else{const ke=se>>>2;switch(3&se){case 1:const rt=n[++J],at=n[++J],Ot=e.data[ke];"string"==typeof Ot?bl(t[o.GpT],t[ke],null,Ot,rt,T,at):Zc(Ot,t,rt,T,t[o.GpT],at);break;case 0:const Qt=t[ke];null!==Qt&&Uh(t[o.GpT],Qt,T);break;case 2:tA(e,xa(e,ke),t,T);break;case 3:Ev(e,xa(e,ke),r,t)}}}}else{const T=n[a+1];if(T>0&&!(3&~T)){const se=xa(e,T>>>2);t[se.currentCaseLViewIndex]<0&&Ev(e,se,r,t)}}a+=A}}function Ev(e,t,n,r){let s=r[t.currentCaseLViewIndex];if(null!==s){let a=Xa;s<0&&(s=r[t.currentCaseLViewIndex]=~s,a=-1),yv(e,r,t.update[s],n,a)}}function tA(e,t,n,r){const s=function nA(e,t){let n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:{const r=function GC(e,t){const n=pv(t)(parseInt(e,10)),r=HC[n];return void 0!==r?r:"other"}(t,function QC(){return mv}());n=e.cases.indexOf(r),-1===n&&"other"!==r&&(n=e.cases.indexOf("other"));break}case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,r);if(Ol(t,n)!==s&&(bv(e,t,n),n[t.currentCaseLViewIndex]=null===s?null:~s,null!==s)){const g=n[t.anchorIdx];g&&_v(e,t.create[s],n,g)}}function bv(e,t,n){let r=Ol(t,n);if(null!==r){const s=t.remove[r];for(let a=0;a<s.length;a++){const g=s[a];if(g>0){const A=(0,o.vaC)(g,n);null!==A&&ba(n[o.GpT],A)}else bv(e,xa(e,~g),n)}}}const pc=/\ufffd(\d+):?\d*\ufffd/gi,rA=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,oA=/\ufffd(\d+)\ufffd/,Sv=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,iA=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,sA=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,aA=/\uE500/g;function Cv(e,t,n,r,s,a,g){const A=Sa(e,r,1,null);let T=A<<Vo.SHIFT,J=(0,o.Ab)();t===J&&(J=null),null===J&&(T|=Vo.APPEND_EAGERLY),g&&(T|=Vo.COMMENT,function n0(e){void 0===Uc&&(Uc=e())}(_E)),s.push(T,null===a?"":a);const se=lu(e,A,g?32:1,null===a?"":a,null);Qp(n,se);const ke=se.index;return(0,o.iMd)(se,!1),null!==J&&t!==J&&function gE(e,t){let n=e.insertBeforeIndex;null===n?(Ip(Xp,qp),n=e.insertBeforeIndex=[null,t]):((0,o.Xln)(Array.isArray(n),!0,"Expecting array here"),n.push(t))}(J,ke),se}function uA(e,t,n,r,s,a,g,A){const T=A.match(pc),se=Cv(t,n,r,g,s,T?null:A,!1).index;T&&Ya(a,A,se,null,0,null),e.push({kind:0,index:se})}function Ya(e,t,n,r,s,a){const g=e.length,A=g+1;e.push(null,null);const T=g+2,J=t.split(pc);let se=0;for(let ke=0;ke<J.length;ke++){const rt=J[ke];if(1&ke){const at=s+parseInt(rt,10);e.push(-1-at),se|=Av(at)}else""!==rt&&e.push(rt)}return e.push(n<<2|(r?1:0)),r&&e.push(r,a),e[g]=se,e[A]=e.length-T,se}function fA(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r&&r<0&&t++}return t}function Av(e){return 1<<Math.min(e,31)}function wv(e){let t,a,n="",r=0,s=!1;for(;null!==(t=iA.exec(e));)s?t[0]===`\ufffd/*${a}\ufffd`&&(r=t.index,s=!1):(n+=e.substring(r,t.index+t[0].length),a=t[1],s=!0);return n+=e.slice(r),n}function Iv(e,t,n,r,s,a,g){let A=0;const T={type:a.type,currentCaseLViewIndex:Sa(t,n,1,null),anchorIdx:g,cases:[],create:[],remove:[],update:[]};(function vA(e,t,n){e.push(Av(t.mainBinding),2,-1-t.mainBinding,n<<2|2)})(r,a,g),function pE(e,t,n){const r=e.data[t];null===r?e.data[t]=n:r.value=n}(t,g,T);const J=a.values,se=[];for(let ke=0;ke<J.length;ke++){const rt=J[ke],at=[];for(let Qt=0;Qt<rt.length;Qt++){const On=rt[Qt];if("string"!=typeof On){const kn=at.push(On)-1;rt[Qt]=`\x3c!--\ufffd${kn}\ufffd--\x3e`}}const Ot=[];se.push(Ot),A=gA(Ot,t,T,n,r,s,a.cases[ke],rt.join(""),at)|A}A&&function _A(e,t,n){e.push(t,1,n<<2|3)}(r,A,g),e.push({kind:3,index:g,cases:se,currentCaseLViewIndex:T.currentCaseLViewIndex})}function pA(e){const t=[],n=[];let r=1,s=0;const a=_d(e=e.replace(Sv,function(g,A,T){return r="select"===T?0:1,s=parseInt(A.slice(1),10),""}));for(let g=0;g<a.length;){let A=a[g++].trim();1===r&&(A=A.replace(/\s*(?:=)?(\w+)\s*/,"$1")),A.length&&t.push(A);const T=_d(a[g++]);t.length>n.length&&n.push(T)}return{type:r,mainBinding:s,cases:t,values:n}}function _d(e){if(!e)return[];let t=0;const n=[],r=[],s=/[{}]/g;let a;for(s.lastIndex=0;a=s.exec(e);){const A=a.index;if("}"==a[0]){if(n.pop(),0==n.length){const T=e.substring(t,A);Sv.test(T)?r.push(pA(T)):r.push(T),t=A+1}}else{if(0==n.length){const T=e.substring(t,A);r.push(T),t=A+1}n.push("{")}}const g=e.substring(t);return r.push(g),r}function gA(e,t,n,r,s,a,g,A,T){const J=[],se=[],ke=[];n.cases.push(g),n.create.push(J),n.remove.push(se),n.update.push(ke);const at=rl(Lt()).getInertBodyElement(A),Ot=Oc(at)||at;return Ot?Tv(e,t,n,r,s,J,se,ke,Ot,a,T,0):0}function Tv(e,t,n,r,s,a,g,A,T,J,se,ke){let rt=0,at=T.firstChild;for(;at;){const Ot=Sa(t,r,1,null);switch(at.nodeType){case Node.ELEMENT_NODE:const Qt=at,On=Qt.tagName.toLowerCase();if(At.hasOwnProperty(On)){yd(a,fc,On,J,Ot),t.data[Ot]=On;const Po=Qt.attributes;for(let Ui=0;Ui<Po.length;Ui++){const Ns=Po.item(Ui),hy=Ns.name.toLowerCase();Ns.value.match(pc)?ko.hasOwnProperty(hy)&&Ya(A,Ns.value,Ot,Ns.name,0,Wt[hy]?Ea:null):yA(a,Ot,Ns)}const fo={kind:1,index:Ot,children:[]};e.push(fo),rt=Tv(fo.children,t,n,r,s,a,g,A,at,Ot,se,ke+1)|rt,Mv(g,Ot,ke)}break;case Node.TEXT_NODE:const kn=at.textContent||"",Zt=kn.match(pc);yd(a,null,Zt?"":kn,J,Ot),Mv(g,Ot,ke),Zt&&(rt=Ya(A,kn,Ot,null,0,null)|rt),e.push({kind:0,index:Ot});break;case Node.COMMENT_NODE:const qr=oA.exec(at.textContent||"");if(qr){const fo=se[parseInt(qr[1],10)];yd(a,hc,"",J,Ot),Iv(e,t,r,s,J,fo,Ot),mA(g,Ot,ke)}}at=at.nextSibling}return rt}function Mv(e,t,n){0===n&&e.push(t)}function mA(e,t,n){0===n&&(e.push(~t),e.push(t))}function yd(e,t,n,r,s){null!==t&&e.push(t),e.push(n,s,function vE(e,t,n){return e|t<<17|n<<1}(0,r,s))}function yA(e,t,n){e.push(t<<1|1,n.name,n.value)}const EA=/\[(\ufffd.+?\ufffd?)\]/,bA=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,DA=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,SA=/{([A-Z0-9_]+)}/g,CA=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,AA=/\/\*/,wA=/\d+\:(\d+)/;function Pv(e,t,n=-1){const r=(0,o.klJ)(),s=(0,o.OAn)(),a=o.Yw1+e,g=(0,o.db4)(r.consts,t),A=(0,o.Ab)();r.firstCreatePass&&function cA(e,t,n,r,s,a){const g=(0,o.Ab)(),A=[],T=[],J=[[]],se=[[]];s=function hA(e,t){if(function tg(e){return-1===e}(t))return wv(e);{const n=e.indexOf(`:${t}\ufffd`)+2+t.toString().length,r=e.search(new RegExp(`\ufffd\\/\\*\\d+:${t}\ufffd`));return wv(e.substring(n,r))}}(s,a);const ke=function lA(e){return e.replace(aA," ")}(s).split(sA);for(let rt=0;rt<ke.length;rt++){let at=ke[rt];if(1&rt){const Ot=47===at.charCodeAt(0),Qt=at.charCodeAt(Ot?1:0),On=o.Yw1+Number.parseInt(at.substring(Ot?2:1));if(Ot)J.shift(),se.shift(),(0,o.iMd)((0,o.Ab)(),!1);else{const kn=mE(e,J[0],On);J.unshift([]),(0,o.iMd)(kn,!0);const Zt={kind:2,index:On,children:[],type:35===Qt?0:1};se[0].push(Zt),se.unshift(Zt.children)}}else{const Ot=_d(at);for(let Qt=0;Qt<Ot.length;Qt++){let On=Ot[Qt];if(1&Qt){const kn=On;if("object"!=typeof kn)throw new Error(`Unable to parse ICU expression in "${s}" message.`);const qr=Cv(e,g,J[0],n,A,"",!0).index;Iv(se[0],e,n,T,t,kn,qr)}else""!==On&&uA(se[0],e,g,J[0],A,T,n,On)}}}e.data[r]={create:A,update:T,ast:se[0],parentTNodeIndex:t}}(r,null===A?0:A.index,s,a,g,n),2===r.type?s[o.b5C][o.Wg1]|=32:s[o.Wg1]|=32;const T=r.data[a],se=Sp(r,A===s[o.qlT]?null:A,s);(function eA(e,t,n,r){const s=e[o.GpT];for(let a=0;a<t.length;a++){const g=t[a++],J=(g&Vo.APPEND_EAGERLY)===Vo.APPEND_EAGERLY,se=g>>>Vo.SHIFT;let ke=e[se],rt=!1;null===ke&&(ke=e[se]=Qa(e,0,t[a],(g&Vo.COMMENT)===Vo.COMMENT?Node.COMMENT_NODE:Node.TEXT_NODE),rt=(0,o.SX7)()),J&&null!==n&&rt&&vs(s,n,ke,r,!1)}})(s,T.create,se,A&&8&A.type?s[A.index]:null),(0,o.xyx)(!0)}function Rv(){(0,o.xyx)(!1)}function Ed(e,t,n){const r=(0,o.OAn)(),s=(0,o.klJ)(),a=(0,o.Mx4)();return bd(s,r,r[o.GpT],a,e,t,n),Ed}function bd(e,t,n,r,s,a,g){let A=!0,T=null;if((3&r.type||g)&&(T??=Ba(r,t,a),Ig(r,e,t,g,n,s,a,T)&&(A=!1)),A){const J=r.outputs?.[s],se=r.hostDirectiveOutputs?.[s];if(se&&se.length)for(let ke=0;ke<se.length;ke+=2){const rt=se[ke],at=se[ke+1];T??=Ba(r,t,a),Bl(r,t,rt,at,s,T)}if(J&&J.length)for(const ke of J)T??=Ba(r,t,a),Bl(r,t,ke,s,s,T)}}function Nv(e=1){return(0,o.jvu)(e)}function RA(e,t){let n=null;const r=function Gy(e){const t=e.attrs;if(null!=t){const n=t.indexOf(5);if(!(1&n))return t[n+1]}return null}(e);for(let s=0;s<t.length;s++){const a=t[s];if("*"!==a){if(null===r?Zh(e,a,!0):Qy(r,a))return s}else n=s}return n}function Fv(e){const t=(0,o.OAn)()[o.b5C][o.qlT];if(!t.projection){const r=t.projection=(0,o.WfI)(e?e.length:1,null),s=r.slice();let a=t.child;for(;null!==a;){if(128!==a.type){const g=e?RA(a,e):0;null!==g&&(s[g]?s[g].projectionNext=a:r[g]=a,s[g]=a)}a=a.next}}}function Uv(e,t=0,n,r,s,a){const g=(0,o.OAn)(),A=(0,o.klJ)(),T=r?e+1:null;null!==T&&ws(g,A,T,r,s,a,null,n);const J=bs(A,o.Yw1+e,16,null,n||null);null===J.projection&&(J.projection=t),(0,o.Pfq)();const ke=!g[o.tcA]||(0,o.KtD)();null===g[o.b5C][o.qlT].projection[J.projection]&&null!==T?function xA(e,t,n){const r=o.Yw1+n,s=t.data[r],a=e[r];ea(a,Ys(e,s,void 0,{dehydratedView:null}),0,Es(s,null))}(g,A,T):ke&&!Jr(J)&&function w0(e,t,n){Mp(t[o.GpT],0,t,n,qc(e,n,t),Cp(n.parent||t[o.qlT],n,t))}(A,g,J)}function $v(e,t,n,r){jg(e,t,n,r)}function Bv(e,t,n){Bg(e,t,n)}function jv(e){const t=(0,o.OAn)(),n=(0,o.klJ)(),r=(0,o.w7Z)();(0,o.GA0)(r+1);const s=Mu(n,r);if(e.dirty&&(0,o.vOT)(t)===!(2&~s.metadata.flags)){if(null===s.matches)e.reset([]);else{const a=Wg(t,r);e.reset(a,$n),e.notifyOnChanges()}return!0}return!1}function Vv(){return Tu((0,o.OAn)(),(0,o.w7Z)())}function Wv(e){const t=(0,o.VPL)();return(0,o.Hh6)(t,o.Yw1+e)}function gc(e,t){return e<<17|t<<2}function ks(e){return e>>17&32767}function Dd(e){return 2|e}function ga(e){return(131068&e)>>2}function Sd(e,t){return-131069&e|t<<2}function Cd(e){return 1|e}function Kv(e,t,n,r){const s=e[n+1],a=null===t;let g=r?ks(s):ga(s),A=!1;for(;0!==g&&(!1===A||a);){const J=e[g+1];VA(e[g],t)&&(A=!0,e[g+1]=r?Cd(J):Dd(J)),g=r?ks(J):ga(J)}A&&(e[n+1]=r?Dd(s):Cd(s))}function VA(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&(0,o.FRF)(e,t)>=0}const Do={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zv(e){return e.substring(Do.key,Do.keyEnd)}function WA(e){return e.substring(Do.value,Do.valueEnd)}function Hv(e,t){const n=Do.textEnd;return n===t?-1:(t=Do.keyEnd=function HA(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Do.key=t,n),ma(e,t,n))}function Gv(e,t){const n=Do.textEnd;let r=Do.key=ma(e,t,n);return n===r?-1:(r=Do.keyEnd=function GA(e,t,n){let r;for(;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=qv(e,r,n),r=Do.value=ma(e,r,n),r=Do.valueEnd=function XA(e,t,n){let r=-1,s=-1,a=-1,g=t,A=g;for(;g<n;){const T=e.charCodeAt(g++);if(59===T)return A;34===T||39===T?A=g=Qv(e,T,g,n):t===g-4&&85===a&&82===s&&76===r&&40===T?A=g=Qv(e,41,g,n):T>32&&(A=g),a=s,s=r,r=-33&T}return A}(e,r,n),qv(e,r,n))}function Xv(e){Do.key=0,Do.keyEnd=0,Do.value=0,Do.valueEnd=0,Do.textEnd=e.length}function ma(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function qv(e,t,n,r){return(t=ma(e,t,n))<n&&t++,t}function Qv(e,t,n,r){let s=-1,a=n;for(;a<r;){const g=e.charCodeAt(a++);if(g==t&&92!==s)return a;s=92==g&&92===s?0:g}throw new Error}function Ad(e,t,n){return Yv(e,t,n,!1),Ad}function wd(e,t){return Yv(e,t,null,!0),wd}function QA(e,t){for(let n=function zA(e){return Xv(e),Gv(e,ma(e,0,Do.textEnd))}(t);n>=0;n=Gv(t,n))n_(e,zv(t),WA(t))}function Jv(e){Zv(rw,JA,e,!0)}function JA(e,t){for(let n=function KA(e){return Xv(e),Hv(e,ma(e,0,Do.textEnd))}(t);n>=0;n=Hv(t,n))(0,o.ezK)(e,zv(t),!0)}function Yv(e,t,n,r){const s=(0,o.OAn)(),a=(0,o.klJ)(),g=(0,o.b$O)(2);a.firstUpdatePass&&t_(a,e,g,r),t!==Yr&&lo(s,g,t)&&r_(a,a.data[(0,o._px)()],s,s[o.GpT],e,s[g+1]=function iw(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=(0,o.AsM)(ki(e)))),e}(t,n),r,g)}function Zv(e,t,n,r){const s=(0,o.klJ)(),a=(0,o.b$O)(2);s.firstUpdatePass&&t_(s,null,a,r);const g=(0,o.OAn)();if(n!==Yr&&lo(g,a,n)){const A=s.data[(0,o._px)()];if(i_(A,r)&&!e_(s,a)){let T=r?A.classesWithoutHost:A.stylesWithoutHost;null!==T&&(n=(0,o.n$e)(T,n||"")),ld(s,A,g,n,r)}else!function ow(e,t,n,r,s,a,g,A){s===Yr&&(s=o.Mlv);let T=0,J=0,se=0<s.length?s[0]:null,ke=0<a.length?a[0]:null;for(;null!==se||null!==ke;){const rt=T<s.length?s[T+1]:void 0,at=J<a.length?a[J+1]:void 0;let Qt,Ot=null;se===ke?(T+=2,J+=2,rt!==at&&(Ot=ke,Qt=at)):null===ke||null!==se&&se<ke?(T+=2,Ot=se):(J+=2,Ot=ke,Qt=at),null!==Ot&&r_(e,t,n,r,Ot,Qt,g,A),se=T<s.length?s[T]:null,ke=J<a.length?a[J]:null}}(s,A,g,g[o.GpT],g[a+1],g[a+1]=function nw(e,t,n){if(null==n||""===n)return o.Mlv;const r=[],s=ki(n);if(Array.isArray(s))for(let a=0;a<s.length;a++)e(r,s[a],!0);else if("object"==typeof s)for(const a in s)s.hasOwnProperty(a)&&e(r,a,s[a]);else"string"==typeof s&&t(r,s);return r}(e,t,n),r,a)}}function e_(e,t){return t>=e.expandoStartIndex}function t_(e,t,n,r){const s=e.data;if(null===s[n+1]){const a=s[(0,o._px)()],g=e_(e,n);i_(a,r)&&null===t&&!g&&(t=!1),t=function YA(e,t,n,r){const s=(0,o.MT)(e);let a=r?t.residualClasses:t.residualStyles;if(null===s)0===(r?t.classBindings:t.styleBindings)&&(n=Za(n=Id(null,e,t,n,r),t.attrs,r),a=null);else{const g=t.directiveStylingLast;if(-1===g||e[g]!==s)if(n=Id(s,e,t,n,r),null===a){let T=function ZA(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==ga(r))return e[ks(r)]}(e,t,r);void 0!==T&&Array.isArray(T)&&(T=Id(null,e,t,T[1],r),T=Za(T,t.attrs,r),function ew(e,t,n,r){e[ks(n?t.classBindings:t.styleBindings)]=r}(e,t,r,T))}else a=function tw(e,t,n){let r;const s=t.directiveEnd;for(let a=1+t.directiveStylingLast;a<s;a++)r=Za(r,e[a].hostAttrs,n);return Za(r,t.attrs,n)}(e,t,r)}return void 0!==a&&(r?t.residualClasses=a:t.residualStyles=a),n}(s,a,t,r),function BA(e,t,n,r,s,a){let g=a?t.classBindings:t.styleBindings,A=ks(g),T=ga(g);e[r]=n;let se,J=!1;if(Array.isArray(n)?(se=n[1],(null===se||(0,o.FRF)(n,se)>0)&&(J=!0)):se=n,s)if(0!==T){const rt=ks(e[A+1]);e[r+1]=gc(rt,A),0!==rt&&(e[rt+1]=Sd(e[rt+1],r)),e[A+1]=function UA(e,t){return 131071&e|t<<17}(e[A+1],r)}else e[r+1]=gc(A,0),0!==A&&(e[A+1]=Sd(e[A+1],r)),A=r;else e[r+1]=gc(T,0),0===A?A=r:e[T+1]=Sd(e[T+1],r),T=r;J&&(e[r+1]=Dd(e[r+1])),Kv(e,se,r,!0),Kv(e,se,r,!1),function jA(e,t,n,r,s){const a=s?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof t&&(0,o.FRF)(a,t)>=0&&(n[r+1]=Cd(n[r+1]))}(t,se,e,r,a),g=gc(A,T),a?t.classBindings=g:t.styleBindings=g}(s,a,t,n,g,r)}}function Id(e,t,n,r,s){let a=null;const g=n.directiveEnd;let A=n.directiveStylingLast;for(-1===A?A=n.directiveStart:A++;A<g&&(a=t[A],r=Za(r,a.hostAttrs,s),a!==e);)A++;return null!==e&&(n.directiveStylingLast=A),r}function Za(e,t,n){const r=n?1:2;let s=-1;if(null!==t)for(let a=0;a<t.length;a++){const g=t[a];"number"==typeof g?s=g:s===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),(0,o.ezK)(e,g,!!n||t[++a]))}return void 0===e?null:e}function n_(e,t,n){(0,o.ezK)(e,t,ki(n))}function rw(e,t,n){const r=String(t);""!==r&&!r.includes(" ")&&(0,o.ezK)(e,r,n)}function r_(e,t,n,r,s,a,g,A){if(!(3&t.type))return;const T=e.data,J=T[A+1],se=function $A(e){return!(1&~e)}(J)?o_(T,t,n,s,ga(J),g):void 0;mc(se)||(mc(a)||function FA(e){return!(2&~e)}(J)&&(a=o_(T,null,n,s,A,g)),function T0(e,t,n,r,s){if(t)s?e.addClass(n,r):e.removeClass(n,r);else{let a=-1===r.indexOf("-")?void 0:hl.DashCase;null==s?e.removeStyle(n,r,a):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),a|=hl.Important),e.setStyle(n,r,s,a))}}(r,g,(0,o.vaC)((0,o._px)(),n),s,a))}function o_(e,t,n,r,s,a){const g=null===t;let A;for(;s>0;){const T=e[s],J=Array.isArray(T),se=J?T[1]:T,ke=null===se;let rt=n[s+1];rt===Yr&&(rt=ke?o.Mlv:void 0);let at=ke?(0,o.K7h)(rt,r):se===r?rt:void 0;if(J&&!mc(at)&&(at=(0,o.K7h)(T,r)),mc(at)&&(A=at,g))return A;const Ot=e[s+1];s=g?ks(Ot):ga(Ot)}if(null!==t){let T=a?t.residualClasses:t.residualStyles;null!=T&&(A=(0,o.K7h)(T,r))}return A}function mc(e){return void 0!==e}function i_(e,t){return!!(e.flags&(t?8:16))}function s_(e,t=""){const n=(0,o.OAn)(),r=(0,o.klJ)(),s=e+o.Yw1,a=r.firstCreatePass?bs(r,s,1,t,null):r.data[s],g=a_(r,n,a,t,e);n[s]=g,(0,o.SX7)()&&Jc(r,n,g,a),(0,o.iMd)(a,!1)}let a_=(e,t,n,r,s)=>((0,o.m7n)(!0),Pc(t[o.GpT],r));function l_(e,t){let n=!1,r=(0,o.c$7)();for(let a=1;a<t.length;a+=2)n=lo(e,r++,t[a])||n;if((0,o.Kw3)(r),!n)return Yr;let s=t[0];for(let a=1;a<t.length;a+=2)s+=(0,o.eFE)(t[a])+(a+1!==t.length?t[a+1]:"");return s}function c_(e,t,n,r=""){return lo(e,(0,o.xbp)(),n)?t+(0,o.eFE)(n)+r:Yr}function u_(e,t,n,r,s,a=""){const A=Cs(e,(0,o.c$7)(),n,s);return(0,o.b$O)(2),A?t+(0,o.eFE)(n)+r+(0,o.eFE)(s)+a:Yr}function d_(e,t,n,r,s,a,g,A=""){const J=$l(e,(0,o.c$7)(),n,s,g);return(0,o.b$O)(3),J?t+(0,o.eFE)(n)+r+(0,o.eFE)(s)+a+(0,o.eFE)(g)+A:Yr}function f_(e,t,n,r,s,a,g,A,T,J=""){const ke=ei(e,(0,o.c$7)(),n,s,g,T);return(0,o.b$O)(4),ke?t+(0,o.eFE)(n)+r+(0,o.eFE)(s)+a+(0,o.eFE)(g)+A+(0,o.eFE)(T)+J:Yr}function h_(e,t,n,r,s,a,g,A,T,J,se,ke=""){const rt=(0,o.c$7)();let at=ei(e,rt,n,s,g,T);return at=lo(e,rt+4,se)||at,(0,o.b$O)(5),at?t+(0,o.eFE)(n)+r+(0,o.eFE)(s)+a+(0,o.eFE)(g)+A+(0,o.eFE)(T)+J+(0,o.eFE)(se)+ke:Yr}function p_(e,t,n,r,s,a,g,A,T,J,se,ke,rt,at=""){const Ot=(0,o.c$7)();let Qt=ei(e,Ot,n,s,g,T);return Qt=Cs(e,Ot+4,se,rt)||Qt,(0,o.b$O)(6),Qt?t+(0,o.eFE)(n)+r+(0,o.eFE)(s)+a+(0,o.eFE)(g)+A+(0,o.eFE)(T)+J+(0,o.eFE)(se)+ke+(0,o.eFE)(rt)+at:Yr}function g_(e,t,n,r,s,a,g,A,T,J,se,ke,rt,at,Ot,Qt=""){const On=(0,o.c$7)();let kn=ei(e,On,n,s,g,T);return kn=$l(e,On+4,se,rt,Ot)||kn,(0,o.b$O)(7),kn?t+(0,o.eFE)(n)+r+(0,o.eFE)(s)+a+(0,o.eFE)(g)+A+(0,o.eFE)(T)+J+(0,o.eFE)(se)+ke+(0,o.eFE)(rt)+at+(0,o.eFE)(Ot)+Qt:Yr}function m_(e,t,n,r,s,a,g,A,T,J,se,ke,rt,at,Ot,Qt,On,kn=""){const Zt=(0,o.c$7)();let qr=ei(e,Zt,n,s,g,T);return qr=ei(e,Zt+4,se,rt,Ot,On)||qr,(0,o.b$O)(8),qr?t+(0,o.eFE)(n)+r+(0,o.eFE)(s)+a+(0,o.eFE)(g)+A+(0,o.eFE)(T)+J+(0,o.eFE)(se)+ke+(0,o.eFE)(rt)+at+(0,o.eFE)(Ot)+Qt+(0,o.eFE)(On)+kn:Yr}function Td(e){return vc("",e),Td}function vc(e,t,n){const r=(0,o.OAn)(),s=c_(r,e,t,n);return s!==Yr&&Fi(r,(0,o._px)(),s),vc}function Md(e,t,n,r,s){const a=(0,o.OAn)(),g=u_(a,e,t,n,r,s);return g!==Yr&&Fi(a,(0,o._px)(),g),Md}function Od(e,t,n,r,s,a,g){const A=(0,o.OAn)(),T=d_(A,e,t,n,r,s,a,g);return T!==Yr&&Fi(A,(0,o._px)(),T),Od}function Fi(e,t,n){const r=(0,o.vaC)(t,e);Uh(e[o.GpT],r,n)}function Pd(e,t,n){(0,o.n$r)(t)&&(t=t());const r=(0,o.OAn)();return lo(r,(0,o.xbp)(),t)&&((0,o.klJ)(),Zc((0,o.CpD)(),r,e,t,r[o.GpT],n)),Pd}function S_(e,t){const n=(0,o.n$r)(e);return n&&e.set(t),n}function Rd(e,t){const n=(0,o.OAn)(),r=(0,o.klJ)(),s=(0,o.Mx4)();return bd(r,n,n[o.GpT],s,e,t),Rd}const C_={};function w_(e,t,n=""){return c_((0,o.OAn)(),e,t,n)}function xd(e,t,n,r,s){if(e=(0,o.nl4)(e),Array.isArray(e))for(let a=0;a<e.length;a++)xd(e[a],t,n,r,s);else{const a=(0,o.klJ)(),g=(0,o.OAn)(),A=(0,o.Mx4)();let T=(0,o.Y3W)(e)?e:(0,o.nl4)(e.provide);const J=(0,o.Rc9)(e),se=1048575&A.providerIndexes,ke=A.directiveStart,rt=A.providerIndexes>>20;if((0,o.Y3W)(e)||!e.multi){const at=new Et(J,s,ra,null),Ot=Ld(T,t,s?se:se+rt,ke);-1===Ot?(Jn(yr(A,g),a,T),kd(a,e,t.length),t.push(T),A.directiveStart++,A.directiveEnd++,s&&(A.providerIndexes+=1048576),n.push(at),g.push(at)):(n[Ot]=at,g[Ot]=at)}else{const at=Ld(T,t,se+rt,ke),Ot=Ld(T,t,se,se+rt),On=Ot>=0&&n[Ot];if(s&&!On||!s&&!(at>=0&&n[at])){Jn(yr(A,g),a,T);const kn=function Dw(e,t,n,r,s){const g=new Et(e,n,ra,null);return g.multi=[],g.index=t,g.componentProviders=0,I_(g,s,r&&!n),g}(s?bw:Ew,n.length,s,r,J);!s&&On&&(n[Ot].providerFactory=kn),kd(a,e,t.length,0),t.push(T),A.directiveStart++,A.directiveEnd++,s&&(A.providerIndexes+=1048576),n.push(kn),g.push(kn)}else kd(a,e,at>-1?at:Ot,I_(n[s?Ot:at],J,!s&&r));!s&&r&&On&&n[Ot].componentProviders++}}}function kd(e,t,n,r){const s=(0,o.Y3W)(t),a=(0,o.MME)(t);if(s||a){const T=(a?(0,o.nl4)(t.useClass):t).prototype.ngOnDestroy;if(T){const J=e.destroyHooks||(e.destroyHooks=[]);if(!s&&t.multi){const se=J.indexOf(n);-1===se?J.push(n,[r,T]):J[se+1].push(r,T)}else J.push(n,T)}}}function I_(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Ld(e,t,n,r){for(let s=n;s<r;s++)if(t[s]===e)return s;return-1}function Ew(e,t,n,r,s){return Nd(this.multi,[])}function bw(e,t,n,r,s){const a=this.multi;let g;if(this.providerFactory){const A=this.providerFactory.componentProviders,T=tn(r,r[o.eDl],this.providerFactory.index,s);g=T.slice(0,A),Nd(a,g);for(let J=A;J<T.length;J++)g.push(T[J])}else g=[],Nd(a,g);return g}function Nd(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function T_(e,t=[]){return n=>{n.providersResolver=(r,s)=>function yw(e,t,n){const r=(0,o.klJ)();if(r.firstCreatePass){const s=(0,o.JlV)(e);xd(n,r.data,r.blueprint,s,!0),xd(t,r.data,r.blueprint,s,!1)}}(r,s?s(e):e,t)}}function _c(e){if("function"==typeof e)return e;const t=(0,o.Bqz)(e);return t.some(o.Jzi)?()=>t.map(o.nl4).map(M_):t.map(M_)}function M_(e){return mu(e)?e.ngModule:e}function O_(e,t,n){const r=(0,o.gxQ)()+e,s=(0,o.OAn)();return s[r]===Yr?Ti(s,r,n?t.call(n):t()):$a(s,r)}function P_(e,t,n,r){return R_((0,o.OAn)(),(0,o.gxQ)(),e,t,n,r)}function el(e,t){const n=e[t];return n===Yr?void 0:n}function R_(e,t,n,r,s,a){const g=t+n;return lo(e,g,s)?Ti(e,g+1,a?r.call(a,s):r(s)):el(e,g+1)}function x_(e,t,n,r,s,a,g){const A=t+n;return Cs(e,A,s,a)?Ti(e,A+2,g?r.call(g,s,a):r(s,a)):el(e,A+2)}function k_(e,t,n,r,s,a,g,A){const T=t+n;return $l(e,T,s,a,g)?Ti(e,T+3,A?r.call(A,s,a,g):r(s,a,g)):el(e,T+3)}function L_(e,t,n,r,s,a,g,A,T){const J=t+n;return ei(e,J,s,a,g,A)?Ti(e,J+4,T?r.call(T,s,a,g,A):r(s,a,g,A)):el(e,J+4)}function N_(e,t,n,r,s,a){let g=t+n,A=!1;for(let T=0;T<s.length;T++)lo(e,g++,s[T])&&(A=!0);return A?Ti(e,g,r.apply(a,s)):el(e,g)}function F_(e,t){const n=(0,o.klJ)();let r;const s=e+o.Yw1;n.firstCreatePass?(r=function kw(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}}(t,n.pipeRegistry),n.data[s]=r,r.onDestroy&&(n.destroyHooks??=[]).push(s,r.onDestroy)):r=n.data[s];const a=r.factory||(r.factory=(0,o.wGu)(r.type,!0)),A=(0,o.a2B)(ra);try{const T=fr(!1),J=a();return fr(T),(0,o.M_e)(n,(0,o.OAn)(),s,J),J}finally{(0,o.a2B)(A)}}function U_(e,t,n){const r=e+o.Yw1,s=(0,o.OAn)(),a=(0,o.Hh6)(s,r);return tl(s,r)?R_(s,(0,o.gxQ)(),t,a.transform,n,a):a.transform(n)}function $_(e,t,n,r){const s=e+o.Yw1,a=(0,o.OAn)(),g=(0,o.Hh6)(a,s);return tl(a,s)?x_(a,(0,o.gxQ)(),t,g.transform,n,r,g):g.transform(n,r)}function tl(e,t){return e[o.eDl].data[t].pure}function B_(e,t){return Tl(e,t)}function yc(e,t,n,r,s){const a=s[o.eDl];if(a!==r.tView)for(let g=o.Yw1;g<a.bindingStartIndex;g++){const A=s[g];if((0,o.A0l)(A)){(0,o.q$2)(A[o.jgP])&&yc(e,t,n,r,A[o.jgP]);for(let T=o.Y20;T<A.length;T++)yc(e,t,n,r,A[T])}else(0,o.q$2)(A)&&yc(e,t,n,r,A)}else!function Kw(e,t,n,r,s){const a=s[o.SKP];let g=s[o.jgP];const A=s[o.f7T],T=s[o.qlT],J=s[o.YEL].get(ro,null),se=()=>{if(r.encapsulation===$o.ShadowDom){const Ot=g.cloneNode(!1);g.replaceWith(Ot),g=Ot}const ke=tp(n),rt=dl(A,ke,a,Nc(n),g,T,null,null,null,null,null);(function zw(e,t,n,r){for(let s=o.Yw1;s<e[o.eDl].bindingStartIndex;s++){const a=e[s];if(((0,o.q$2)(a)||(0,o.A0l)(a))&&a[o.K29]===t){a[o.K29]=n;break}}e[o.EJG]===t&&(e[o.EJG]=n),e[o.Yrj]===t&&(e[o.Yrj]=n),n[o.K29]=t[o.K29],t[o.K29]=null,e[r]=n})(A,s,rt,T.index),wa(s[o.eDl],s);const at=s[o.M0L].rendererFactory;(function Ww(e,t){e.componentReplaced?.(t.id)})(at,r),rt[o.GpT]=at.createRenderer(g,n),Ep(s[o.eDl],s),function Hw(e){if(null!==e.projection){for(const t of e.projection)bn(t)&&(t.projectionNext=null,t.flags&=-3);e.projection=null}}(T),Al(ke,rt,a),$p(ke,rt,ke.template,a)};null===J?j_(e,t,se):J.run(()=>j_(e,t,se))}(e,t,n,r,s)}function j_(e,t,n){try{n()}catch(r){if(null!==t&&r.message){const a=r.message+(r.stack?"\n"+r.stack:"");e?.hot?.send?.("angular:invalidate",{id:t,message:a,error:!0})}throw r}}const os={\u0275\u0275animateEnter:function oc(e){if(Mo("NgAnimateEnter"),!Ps)return oc;const t=(0,o.OAn)();if(Zl(t))return oc;const n=(0,o.Mx4)();return ec(n,t),nc(tc(t),n,()=>function yC(e,t,n){const r=(0,o.d31)(t,e),s=e[o.GpT],a=e[o.YEL].get(ro),g=rv(n),A=[],T=se=>{if(se.target!==r)return;const ke=se instanceof AnimationEvent?"animationend":"transitionend";a.runOutsideAngular(()=>{s.listen(r,ke,J)})},J=se=>{se.target===r&&function EC(e,t,n){const r=da.get(t);if(e.target===t&&r&&ov(e,t)){e.stopImmediatePropagation();for(const s of r.classList)n.removeClass(t,s);Yu(t)}}(se,r,s)};if(g&&g.length>0){a.runOutsideAngular(()=>{A.push(s.listen(r,"animationstart",T)),A.push(s.listen(r,"transitionstart",T))}),function gC(e,t,n){const r=da.get(e);if(r){for(const s of t)r.classList.push(s);for(const s of n)r.cleanupFns.push(s)}else da.set(e,{classList:t,cleanupFns:n})}(r,g,A);for(const se of g)s.addClass(r,se);a.runOutsideAngular(()=>{requestAnimationFrame(()=>{if(sp(r,Rs,Ps),!Rs.has(r)){for(const se of g)s.removeClass(r,se);Yu(r)}})})}}(t,n,e)),vl(t[o.YEL]),Hc(t[o.YEL],tc(t)),oc},\u0275\u0275animateEnterListener:function ic(e){if(Mo("NgAnimateEnter"),!Ps)return ic;const t=(0,o.OAn)();if(Zl(t))return ic;const n=(0,o.Mx4)();return ec(n,t),nc(tc(t),n,()=>function bC(e,t,n){const r=(0,o.d31)(t,e);n.call(e[o.SKP],{target:r,animationComplete:mC})}(t,n,e)),vl(t[o.YEL]),Hc(t[o.YEL],tc(t)),ic},\u0275\u0275animateLeave:function sc(e){if(Mo("NgAnimateLeave"),!Ps)return sc;const t=(0,o.OAn)();if(Zl(t))return sc;const r=(0,o.Mx4)();return ec(r,t),nc(xs(t),r,()=>function DC(e,t,n){const{promise:r,resolve:s}=Hu(),a=(0,o.d31)(t,e),g=e[o.GpT],A=e[o.YEL].get(ro);_s.add(e),(xs(e).get(t.index).resolvers??=[]).push(s);const T=rv(n);return T&&T.length>0?function SC(e,t,n,r,s,a){!function vC(e,t){if(!Ps)return;const n=da.get(e);if(n&&n.classList.length>0&&function _C(e,t){for(const n of t)if(e.classList.contains(n))return!0;return!1}(e,n.classList))for(const r of n.classList)t.removeClass(e,r);Yu(e)}(e,s);const g=[],A=xs(n).get(t.index)?.resolvers,T=J=>{if(J.target===e&&(J instanceof CustomEvent||ov(J,e))){if(J.stopImmediatePropagation(),Rs.delete(e),Zu(t,e),Array.isArray(t.projection))for(const se of r)s.removeClass(e,se);ed(A,g),td(n,t)}};a.runOutsideAngular(()=>{g.push(s.listen(e,"animationend",T)),g.push(s.listen(e,"transitionend",T))}),nv(t,e);for(const J of r)s.addClass(e,J);a.runOutsideAngular(()=>{requestAnimationFrame(()=>{sp(e,Rs,Ps),Rs.has(e)||(Zu(t,e),ed(A,g),td(n,t))})})}(a,t,e,T,g,A):s(),{promise:r,resolve:s}}(t,r,e)),vl(t[o.YEL]),sc},\u0275\u0275animateLeaveListener:function nd(e){if(Mo("NgAnimateLeave"),!Ps)return nd;const t=(0,o.OAn)(),n=(0,o.Mx4)();return ec(n,t),_s.add(t),nc(xs(t),n,()=>function CC(e,t,n){const{promise:r,resolve:s}=Hu(),a=(0,o.d31)(t,e),g=[],A=e[o.GpT],T=Zl(e),J=e[o.YEL].get(ro),se=e[o.YEL].get(fC);(xs(e).get(t.index).resolvers??=[]).push(s);const ke=xs(e).get(t.index)?.resolvers;if(T)rc(e,t,a,ke,g);else{const rt=setTimeout(()=>rc(e,t,a,ke,g),se),at={target:a,animationComplete:()=>{rc(e,t,a,ke,g),clearTimeout(rt)}};nv(t,a),J.runOutsideAngular(()=>{g.push(A.listen(a,"animationend",()=>{rc(e,t,a,ke,g),clearTimeout(rt)},{once:!0}))}),n.call(e[o.SKP],at)}return{promise:r,resolve:s}}(t,n,e)),vl(t[o.YEL]),nd},\u0275\u0275attribute:Ju,\u0275\u0275defineComponent:Qg,\u0275\u0275defineDirective:Zg,\u0275\u0275defineInjectable:o.jDH,\u0275\u0275defineInjector:o.G2t,\u0275\u0275defineNgModule:Yg,\u0275\u0275definePipe:em,\u0275\u0275directiveInject:ra,\u0275\u0275getInheritedFactory:hr,\u0275\u0275inject:o.KVO,\u0275\u0275injectAttribute:Ur,\u0275\u0275invalidFactory:_g,\u0275\u0275invalidFactoryDep:o.dmw,\u0275\u0275templateRefExtractor:B_,\u0275\u0275resetView:o.Njj,\u0275\u0275HostDirectivesFeature:function fD(e){const t=n=>{const r=Array.isArray(e);null===n.hostDirectives?(n.resolveHostDirectives=hD,n.hostDirectives=r?e.map(Nu):[e]):r?n.hostDirectives.unshift(...e.map(Nu)):n.hostDirectives.unshift(e)};return t.ngInherit=!0,t},\u0275\u0275NgOnChangesFeature:Oe,\u0275\u0275ProvidersFeature:T_,\u0275\u0275CopyDefinitionFeature:function dD(e){let n,t=rm(e.type);n=(0,o.JlV)(e)?t.\u0275cmp:t.\u0275dir;const r=e;for(const s of cD)r[s]=n[s];if((0,o.JlV)(n))for(const s of uD)r[s]=n[s]},\u0275\u0275InheritDefinitionFeature:ku,\u0275\u0275ExternalStylesFeature:function Sw(e){return t=>{e.length<1||(t.getExternalStyles=n=>e.map(s=>s+"?ngcomp"+(n?"="+encodeURIComponent(n):"")+"&e="+t.encapsulation))}},\u0275\u0275nextContext:Nv,\u0275\u0275namespaceHTML:o.joV,\u0275\u0275namespaceMathML:o.By9,\u0275\u0275namespaceSVG:o.qSk,\u0275\u0275enableBindings:o.cSN,\u0275\u0275disableBindings:o.fuf,\u0275\u0275elementStart:lc,\u0275\u0275elementEnd:cc,\u0275\u0275element:cd,\u0275\u0275elementContainerStart:uc,\u0275\u0275elementContainerEnd:Ga,\u0275\u0275domElement:function lv(e,t,n,r){return ud(e,t,n,r),dd(),lv},\u0275\u0275domElementStart:ud,\u0275\u0275domElementEnd:dd,\u0275\u0275domElementContainer:function uv(e,t,n){return pd(e,t,n),cv(),uv},\u0275\u0275domElementContainerStart:pd,\u0275\u0275domElementContainerEnd:cv,\u0275\u0275domTemplate:function cm(e,t,n,r,s,a,g,A){const T=(0,o.OAn)(),J=(0,o.klJ)();return ws(T,J,e,t,n,r,s,(0,o.db4)(J.consts,a),void 0,g,A),cm},\u0275\u0275domListener:function Lv(e,t,n){const r=(0,o.OAn)(),s=(0,o.klJ)(),a=(0,o.Mx4)();return(3&a.type||n)&&Ig(a,s,r,n,r[o.GpT],e,t,Ba(a,r,t)),Lv},\u0275\u0275elementContainer:hd,\u0275\u0275pureFunction0:O_,\u0275\u0275pureFunction1:P_,\u0275\u0275pureFunction2:function ww(e,t,n,r,s){return x_((0,o.OAn)(),(0,o.gxQ)(),e,t,n,r,s)},\u0275\u0275pureFunction3:function Iw(e,t,n,r,s,a){return k_((0,o.OAn)(),(0,o.gxQ)(),e,t,n,r,s,a)},\u0275\u0275pureFunction4:function Tw(e,t,n,r,s,a,g){return L_((0,o.OAn)(),(0,o.gxQ)(),e,t,n,r,s,a,g)},\u0275\u0275pureFunction5:function Mw(e,t,n,r,s,a,g,A){const T=(0,o.gxQ)()+e,J=(0,o.OAn)(),se=ei(J,T,n,r,s,a);return lo(J,T+4,g)||se?Ti(J,T+5,A?t.call(A,n,r,s,a,g):t(n,r,s,a,g)):$a(J,T+5)},\u0275\u0275pureFunction6:function Ow(e,t,n,r,s,a,g,A,T){const J=(0,o.gxQ)()+e,se=(0,o.OAn)(),ke=ei(se,J,n,r,s,a);return Cs(se,J+4,g,A)||ke?Ti(se,J+6,T?t.call(T,n,r,s,a,g,A):t(n,r,s,a,g,A)):$a(se,J+6)},\u0275\u0275pureFunction7:function Pw(e,t,n,r,s,a,g,A,T,J){const se=(0,o.gxQ)()+e,ke=(0,o.OAn)();let rt=ei(ke,se,n,r,s,a);return $l(ke,se+4,g,A,T)||rt?Ti(ke,se+7,J?t.call(J,n,r,s,a,g,A,T):t(n,r,s,a,g,A,T)):$a(ke,se+7)},\u0275\u0275pureFunction8:function Rw(e,t,n,r,s,a,g,A,T,J,se){const ke=(0,o.gxQ)()+e,rt=(0,o.OAn)(),at=ei(rt,ke,n,r,s,a);return ei(rt,ke+4,g,A,T,J)||at?Ti(rt,ke+8,se?t.call(se,n,r,s,a,g,A,T,J):t(n,r,s,a,g,A,T,J)):$a(rt,ke+8)},\u0275\u0275pureFunctionV:function xw(e,t,n,r){return N_((0,o.OAn)(),(0,o.gxQ)(),e,t,n,r)},\u0275\u0275getCurrentView:dv,\u0275\u0275restoreView:o.eBV,\u0275\u0275listener:Ed,\u0275\u0275projection:Uv,\u0275\u0275syntheticHostProperty:function hv(e,t,n){const r=(0,o.OAn)();if(lo(r,(0,o.xbp)(),t)){const a=(0,o.klJ)(),g=(0,o.CpD)();eu(g,r,e,t,kp((0,o.MT)(a.data),g,r),n)}return hv},\u0275\u0275syntheticHostListener:function kv(e,t){const n=(0,o.Mx4)(),r=(0,o.OAn)(),s=(0,o.klJ)();return bd(s,r,kp((0,o.MT)(s.data),n,r),n,e,t),kv},\u0275\u0275pipeBind1:U_,\u0275\u0275pipeBind2:$_,\u0275\u0275pipeBind3:function Lw(e,t,n,r,s){const a=e+o.Yw1,g=(0,o.OAn)(),A=(0,o.Hh6)(g,a);return tl(g,a)?k_(g,(0,o.gxQ)(),t,A.transform,n,r,s,A):A.transform(n,r,s)},\u0275\u0275pipeBind4:function Nw(e,t,n,r,s,a){const g=e+o.Yw1,A=(0,o.OAn)(),T=(0,o.Hh6)(A,g);return tl(A,g)?L_(A,(0,o.gxQ)(),t,T.transform,n,r,s,a,T):T.transform(n,r,s,a)},\u0275\u0275pipeBindV:function Fw(e,t,n){const r=e+o.Yw1,s=(0,o.OAn)(),a=(0,o.Hh6)(s,r);return tl(s,r)?N_(s,(0,o.gxQ)(),t,a.transform,n,a):a.transform.apply(a,n)},\u0275\u0275projectionDef:Fv,\u0275\u0275domProperty:function fv(e,t,n){const r=(0,o.OAn)();return lo(r,(0,o.xbp)(),t)&&((0,o.klJ)(),eu((0,o.CpD)(),r,e,t,r[o.GpT],n)),fv},\u0275\u0275ariaProperty:function tv(e,t){const n=(0,o.OAn)();if(lo(n,(0,o.xbp)(),t)){const s=(0,o.klJ)(),a=(0,o.CpD)();if(Cl(a,s,n,e,t))(0,o.Qs1)(a)&&Rp(n,a.index);else{const A=(0,o.d31)(a,n);bl(n[o.GpT],A,null,a.value,e,t,null)}}return tv},\u0275\u0275property:ad,\u0275\u0275pipe:F_,\u0275\u0275queryRefresh:jv,\u0275\u0275queryAdvance:function NA(e=1){(0,o.GA0)((0,o.w7Z)()+e)},\u0275\u0275viewQuery:Bv,\u0275\u0275viewQuerySignal:function LA(e,t,n,r){Kg(e,Bg(t,n,r))},\u0275\u0275loadQuery:Vv,\u0275\u0275contentQuery:$v,\u0275\u0275contentQuerySignal:function kA(e,t,n,r,s){Kg(t,jg(e,n,r,s))},\u0275\u0275reference:Wv,\u0275\u0275classMap:Jv,\u0275\u0275styleMap:function qA(e){Zv(n_,QA,e,!1)},\u0275\u0275styleProp:Ad,\u0275\u0275classProp:wd,\u0275\u0275advance:np,\u0275\u0275template:Fu,\u0275\u0275conditional:function MC(e,t){Mo("NgControlFlow");const n=(0,o.OAn)(),r=(0,o.xbp)(),s=n[r]!==Yr?n[r]:-1,a=-1!==s?ac(n,o.Yw1+s):void 0;if(lo(n,r,e)){const A=(0,D.Ht)(null);try{if(void 0!==a&&ou(a,0),-1!==e){const T=o.Yw1+e,J=ac(n,T),se=sd(n[o.eDl],T),ke=null;ea(J,Ys(n,se,t,{dehydratedView:ke}),0,Es(se,ke))}}finally{(0,D.Ht)(A)}}else if(void 0!==a){const A=Kp(a,0);void 0!==A&&(A[o.SKP]=t)}},\u0275\u0275conditionalCreate:function TC(e,t,n,r,s,a,g,A){Mo("NgControlFlow");const T=(0,o.OAn)(),J=(0,o.klJ)();return ws(T,J,e,t,n,r,s,(0,o.db4)(J.consts,a),256,g,A),id},\u0275\u0275conditionalBranchCreate:id,\u0275\u0275defer:function VS(e,t,n,r,s,a,g,A,T,J){const se=(0,o.OAn)(),ke=(0,o.klJ)(),rt=e+o.Yw1,at=ws(se,ke,e,null,0,0),Ot=se[o.YEL],Qt=Ho(Ot);if(ke.firstCreatePass){Mo("NgDefer");const Ui={primaryTmplIndex:t,loadingTmplIndex:r??null,placeholderTmplIndex:s??null,errorTmplIndex:a??null,placeholderBlockConfig:null,loadingBlockConfig:null,dependencyResolverFn:n??null,loadingState:yo.NOT_STARTED,loadingPromise:null,providers:null,hydrateTriggers:null,debug:null,flags:J??0};T?.(ke,Ui,A,g),function DD(e,t,n){const r=Ka(t);e.data[r]=n}(ke,rt,Ui)}const On=se[rt];let kn=null,Zt=null;if(On[o.qFA]?.length>0){const Ui=On[o.qFA][0].data;Zt=Ui.di??null,kn=Ui.s}const qr=[null,ia.Initial,null,null,null,null,Zt,kn,null,null];!function bD(e,t,n){e[Ka(t)]=n}(se,rt,qr);let Po=null;null!==Zt&&Qt&&(Po=Ot.get(No),Po.add(Zt,{lView:se,tNode:at,lContainer:On}));const fo=()=>{pm(qr),null!==Zt&&Po?.cleanup([Zt])};Wa(0,qr,()=>(0,o.DyX)(se,fo)),(0,o.ik5)(se,fo)},\u0275\u0275deferWhen:function WS(e){const t=(0,o.OAn)(),n=(0,o.CpD)();if(po(0,t,n)&&lo(t,(0,o.xbp)(),e)){const s=(0,D.Ht)(null);try{const a=!!e,A=Bo(t,n)[1];!1===a&&A===ia.Initial?ca(t,n):!0===a&&(A===ia.Initial||A===to.Placeholder)&&Ms(0,t,n)}finally{(0,D.Ht)(s)}}},\u0275\u0275deferOnIdle:function GS(){po(0,(0,o.OAn)(),(0,o.Mx4)())&&Gm(Gl)},\u0275\u0275deferOnImmediate:function QS(){const e=(0,o.OAn)(),t=(0,o.Mx4)();po(0,e,t)&&(null===Oo(e[o.eDl],t).loadingTmplIndex&&ca(e,t),Ms(0,e,t))},\u0275\u0275deferOnTimer:function ZS(e){po(0,(0,o.OAn)(),(0,o.Mx4)())&&Gm(Xl(e))},\u0275\u0275deferOnHover:function nC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();po(0,n,r)&&(ca(n,r),la(n,r,e,t,is,()=>Ms(0,n,r),0))},\u0275\u0275deferOnInteraction:function iC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();po(0,n,r)&&(ca(n,r),la(n,r,e,t,ri,()=>Ms(0,n,r),0))},\u0275\u0275deferOnViewport:function lC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();po(0,n,r)&&(ca(n,r),la(n,r,e,t,$u,()=>Ms(0,n,r),0))},\u0275\u0275deferPrefetchWhen:function KS(e){const t=(0,o.OAn)(),n=(0,o.CpD)();if(po(1,t,n)&&lo(t,(0,o.xbp)(),e)){const s=(0,D.Ht)(null);try{const a=!!e,A=Oo(t[o.eDl],n);!0===a&&A.loadingState===yo.NOT_STARTED&&Ha(A,t,n)}finally{(0,D.Ht)(s)}}},\u0275\u0275deferPrefetchOnIdle:function XS(){po(1,(0,o.OAn)(),(0,o.Mx4)())&&Xm(Gl)},\u0275\u0275deferPrefetchOnImmediate:function JS(){const e=(0,o.OAn)(),t=(0,o.Mx4)();if(!po(1,e,t))return;const r=Oo(e[o.eDl],t);r.loadingState===yo.NOT_STARTED&&Gu(r,e,t)},\u0275\u0275deferPrefetchOnTimer:function eC(e){po(1,(0,o.OAn)(),(0,o.Mx4)())&&Xm(Xl(e))},\u0275\u0275deferPrefetchOnHover:function rC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();if(!po(1,n,r))return;const a=Oo(n[o.eDl],r);a.loadingState===yo.NOT_STARTED&&la(n,r,e,t,is,()=>Ha(a,n,r),1)},\u0275\u0275deferPrefetchOnInteraction:function sC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();if(!po(1,n,r))return;const a=Oo(n[o.eDl],r);a.loadingState===yo.NOT_STARTED&&la(n,r,e,t,ri,()=>Ha(a,n,r),1)},\u0275\u0275deferPrefetchOnViewport:function cC(e,t){const n=(0,o.OAn)(),r=(0,o.Mx4)();if(!po(1,n,r))return;const a=Oo(n[o.eDl],r);a.loadingState===yo.NOT_STARTED&&la(n,r,e,t,$u,()=>Ha(a,n,r),1)},\u0275\u0275deferHydrateWhen:function zS(e){const t=(0,o.OAn)(),n=(0,o.CpD)();if(!po(2,t,n))return;const r=(0,o.xbp)();if(rs((0,o.klJ)(),n).set(6,null),lo(t,r,e)){const g=t[o.YEL],A=(0,D.Ht)(null);try{1==!!e&&Os(g,Bo(t,n)[6])}finally{(0,D.Ht)(A)}}},\u0275\u0275deferHydrateNever:function HS(){const e=(0,o.OAn)(),t=(0,o.Mx4)();po(2,e,t)&&rs((0,o.klJ)(),t).set(7,null)},\u0275\u0275deferHydrateOnIdle:function qS(){const e=(0,o.OAn)(),t=(0,o.Mx4)();po(2,e,t)&&(rs((0,o.klJ)(),t).set(0,null),qm(Gl,e,t))},\u0275\u0275deferHydrateOnImmediate:function YS(){const e=(0,o.OAn)(),t=(0,o.Mx4)();po(2,e,t)&&(rs((0,o.klJ)(),t).set(1,null),Os(e[o.YEL],Bo(e,t)[6]))},\u0275\u0275deferHydrateOnTimer:function tC(e){const t=(0,o.OAn)(),n=(0,o.Mx4)();po(2,t,n)&&(rs((0,o.klJ)(),n).set(5,{delay:e}),qm(Xl(e),t,n))},\u0275\u0275deferHydrateOnHover:function oC(){const e=(0,o.OAn)(),t=(0,o.Mx4)();po(2,e,t)&&rs((0,o.klJ)(),t).set(4,null)},\u0275\u0275deferHydrateOnInteraction:function aC(){const e=(0,o.OAn)(),t=(0,o.Mx4)();po(2,e,t)&&rs((0,o.klJ)(),t).set(3,null)},\u0275\u0275deferHydrateOnViewport:function uC(){const e=(0,o.OAn)(),t=(0,o.Mx4)();po(2,e,t)&&rs((0,o.klJ)(),t).set(2,null)},\u0275\u0275deferEnableTimerScheduling:function ND(e,t,n,r){const s=e.consts;null!=n&&(t.placeholderBlockConfig=(0,o.db4)(s,n)),null!=r&&(t.loadingBlockConfig=(0,o.db4)(s,r)),null===ju&&(ju=LD)},\u0275\u0275repeater:function NC(e){const t=(0,D.Ht)(null),n=(0,o._px)();try{const r=(0,o.OAn)(),s=r[o.eDl],a=r[n],g=n+1,A=ac(r,g);if(void 0===a.liveCollection){const J=sd(s,g);a.liveCollection=new LC(A,r,J)}else a.liveCollection.reset();const T=a.liveCollection;if(function IC(e,t,n){let r,s,a=0,g=e.length-1;if(Array.isArray(t)){let T=t.length-1;for(;a<=g&&a<=T;){const J=e.at(a),se=t[a],ke=rd(a,J,a,se,n);if(0!==ke){ke<0&&e.updateValue(a,se),a++;continue}const rt=e.at(g),at=t[T],Ot=rd(g,rt,T,at,n);if(0!==Ot){Ot<0&&e.updateValue(g,at),g--,T--;continue}const Qt=n(a,J),On=n(g,rt),kn=n(a,se);if(Object.is(kn,On)){const Zt=n(T,at);Object.is(Zt,Qt)?(e.swap(a,g),e.updateValue(g,at),T--,g--):e.move(g,a),e.updateValue(a,se),a++;continue}if(r??=new av,s??=sv(e,a,g,n),od(e,r,a,kn))e.updateValue(a,se),a++,g++;else if(s.has(kn))r.set(Qt,e.detach(a)),g--;else{const Zt=e.create(a,t[a]);e.attach(a,Zt),a++,g++}}for(;a<=T;)iv(e,r,n,a,t[a]),a++}else if(null!=t){const T=t[Symbol.iterator]();let J=T.next();for(;!J.done&&a<=g;){const se=e.at(a),ke=J.value,rt=rd(a,se,a,ke,n);if(0!==rt)rt<0&&e.updateValue(a,ke),a++,J=T.next();else{r??=new av,s??=sv(e,a,g,n);const at=n(a,ke);if(od(e,r,a,at))e.updateValue(a,ke),a++,g++,J=T.next();else if(s.has(at)){const Ot=n(a,se);r.set(Ot,e.detach(a)),g--}else e.attach(a,e.create(a,ke)),a++,g++,J=T.next()}}for(;!J.done;)iv(e,r,n,e.length,J.value),J=T.next()}for(;a<=g;)e.destroy(e.detach(g--));r?.forEach(T=>{e.destroy(T)})}(T,e,a.trackByFn),T.updateIndexes(),a.hasEmptyBlock){const J=(0,o.xbp)(),se=0===T.length;if(lo(r,J,se)){const ke=n+2,rt=ac(r,ke);if(se){const at=sd(s,ke),Ot=null;ea(rt,Ys(r,at,void 0,{dehydratedView:Ot}),0,Es(at,Ot))}else s.firstUpdatePass&&xl(rt),ou(rt,0)}}}finally{(0,D.Ht)(t)}},\u0275\u0275repeaterCreate:function kC(e,t,n,r,s,a,g,A,T,J,se,ke,rt){Mo("NgControlFlow");const at=(0,o.OAn)(),Ot=(0,o.klJ)(),Qt=void 0!==T,On=(0,o.OAn)(),kn=A?g.bind(On[o.b5C][o.SKP]):g,Zt=new xC(Qt,kn);On[o.Yw1+e]=Zt,ws(at,Ot,e+1,t,n,r,s,(0,o.db4)(Ot.consts,a),256),Qt&&ws(at,Ot,e+2,T,J,se,ke,(0,o.db4)(Ot.consts,rt),512)},\u0275\u0275repeaterTrackByIndex:function PC(e){return e},\u0275\u0275repeaterTrackByIdentity:function RC(e,t){return t},\u0275\u0275componentInstance:function AC(){return(0,o.OAn)()[o.b5C][o.SKP]},\u0275\u0275text:s_,\u0275\u0275textInterpolate:Td,\u0275\u0275textInterpolate1:vc,\u0275\u0275textInterpolate2:Md,\u0275\u0275textInterpolate3:Od,\u0275\u0275textInterpolate4:function v_(e,t,n,r,s,a,g,A,T){const J=(0,o.OAn)(),se=f_(J,e,t,n,r,s,a,g,A,T);return se!==Yr&&Fi(J,(0,o._px)(),se),v_},\u0275\u0275textInterpolate5:function __(e,t,n,r,s,a,g,A,T,J,se){const ke=(0,o.OAn)(),rt=h_(ke,e,t,n,r,s,a,g,A,T,J,se);return rt!==Yr&&Fi(ke,(0,o._px)(),rt),__},\u0275\u0275textInterpolate6:function y_(e,t,n,r,s,a,g,A,T,J,se,ke,rt){const at=(0,o.OAn)(),Ot=p_(at,e,t,n,r,s,a,g,A,T,J,se,ke,rt);return Ot!==Yr&&Fi(at,(0,o._px)(),Ot),y_},\u0275\u0275textInterpolate7:function E_(e,t,n,r,s,a,g,A,T,J,se,ke,rt,at,Ot){const Qt=(0,o.OAn)(),On=g_(Qt,e,t,n,r,s,a,g,A,T,J,se,ke,rt,at,Ot);return On!==Yr&&Fi(Qt,(0,o._px)(),On),E_},\u0275\u0275textInterpolate8:function b_(e,t,n,r,s,a,g,A,T,J,se,ke,rt,at,Ot,Qt,On){const kn=(0,o.OAn)(),Zt=m_(kn,e,t,n,r,s,a,g,A,T,J,se,ke,rt,at,Ot,Qt,On);return Zt!==Yr&&Fi(kn,(0,o._px)(),Zt),b_},\u0275\u0275textInterpolateV:function D_(e){const t=(0,o.OAn)(),n=l_(t,e);return n!==Yr&&Fi(t,(0,o._px)(),n),D_},\u0275\u0275i18n:function TA(e,t,n){Pv(e,t,n),Rv()},\u0275\u0275i18nAttributes:function MA(e,t){const n=(0,o.klJ)(),r=(0,o.db4)(n.consts,t);!function dA(e,t,n){const s=(0,o.Mx4)().index,a=[];if(e.firstCreatePass&&null===e.data[t]){for(let g=0;g<n.length;g+=2){const A=n[g],T=n[g+1];if(""!==T){if(rA.test(T))throw new Error(`ICU expressions are not supported in attributes. Message: "${T}".`);Ya(a,T,s,A,fA(a),null)}}e.data[t]=a}}(n,e+o.Yw1,r)},\u0275\u0275i18nExp:function xv(e){return function JC(e){e&&(Xa|=1<<Math.min(qa,31)),qa++}(lo((0,o.OAn)(),(0,o.xbp)(),e)),xv},\u0275\u0275i18nStart:Pv,\u0275\u0275i18nEnd:Rv,\u0275\u0275i18nApply:function OA(e){!function YC(e,t,n){if(qa>0){const r=e.data[n];yv(e,t,Array.isArray(r)?r:r.update,(0,o.c$7)()-qa-1,Xa)}Xa=0,qa=0}((0,o.klJ)(),(0,o.OAn)(),e+o.Yw1)},\u0275\u0275i18nPostprocess:function PA(e,t={}){return function IA(e,t={}){let n=e;if(EA.test(e)){const r={},s=[0];n=n.replace(bA,(a,g,A)=>{const T=g||A,J=r[T]||[];if(J.length||(T.split("|").forEach(Qt=>{const On=Qt.match(wA),kn=On?parseInt(On[1],10):0,Zt=AA.test(Qt);J.push([kn,Zt,Qt])}),r[T]=J),!J.length)throw new Error(`i18n postprocess: unmatched placeholder - ${T}`);const se=s[s.length-1];let ke=0;for(let Qt=0;Qt<J.length;Qt++)if(J[Qt][0]===se){ke=Qt;break}const[rt,at,Ot]=J[ke];return at?s.pop():se!==rt&&s.push(rt),J.splice(ke,1),Ot})}return Object.keys(t).length&&(n=n.replace(DA,(r,s,a,g,A,T)=>t.hasOwnProperty(a)?`${s}${t[a]}${T}`:r),n=n.replace(SA,(r,s)=>t.hasOwnProperty(s)?t[s]:r),n=n.replace(CA,(r,s)=>{if(t.hasOwnProperty(s)){const a=t[s];if(!a.length)throw new Error(`i18n postprocess: unmatched ICU - ${r} with key: ${s}`);return a.shift()}return r})),n}(e,t)},\u0275\u0275resolveWindow:zh,\u0275\u0275resolveDocument:Hh,\u0275\u0275resolveBody:function Gh(e){return e.ownerDocument.body},\u0275\u0275setComponentScope:function Cw(e,t,n){const r=e.\u0275cmp;r.directiveDefs=Wl(t,Jg),r.pipeDefs=Wl(n,o.oyA)},\u0275\u0275setNgModuleScope:function Aw(e,t){return Pe(()=>{const n=(0,o.WbQ)(e);n.declarations=_c(t.declarations||o.Mlv),n.imports=_c(t.imports||o.Mlv),n.exports=_c(t.exports||o.Mlv),t.bootstrap&&(n.bootstrap=_c(t.bootstrap)),Ua.registerNgModule(e,t)})},\u0275\u0275registerNgModuleType:Gg,\u0275\u0275getComponentDepsFactory:function Uw(e,t){return()=>{try{return Ua.getComponentDependencies(e,t).dependencies}catch(n){throw console.error(`Computing dependencies in local compilation mode for the component "${e.name}" failed with the exception:`,n),n}}},\u0275setClassDebugInfo:function $w(e,t){const n=(0,o.xUg)(e);null!==n&&(n.debugInfo=t)},\u0275\u0275declareLet:function A_(e){const t=(0,o.klJ)(),n=(0,o.OAn)(),r=e+o.Yw1,s=bs(t,r,128,null,null);return(0,o.iMd)(s,!1),(0,o.M_e)(t,n,r,C_),A_},\u0275\u0275storeLet:function aw(e){Mo("NgLet");const t=(0,o.klJ)(),n=(0,o.OAn)(),r=(0,o._px)();return(0,o.M_e)(t,n,r,e),e},\u0275\u0275readContextLet:function lw(e){const t=(0,o.VPL)(),n=(0,o.Hh6)(t,o.Yw1+e);if(n===C_)throw new o.buA(314,!1);return n},\u0275\u0275attachSourceLocations:function cw(e,t){const n=(0,o.klJ)(),r=(0,o.OAn)(),s=r[o.GpT],a="data-ng-source-location";for(const[g,A,T,J]of t){(0,o.XRZ)(n,g+o.Yw1);const ke=(0,o.vaC)(g+o.Yw1,r);ke.hasAttribute(a)||s.setAttribute(ke,a,`${e}@o:${A},l:${T},c:${J}`)}},\u0275\u0275interpolate:function uw(e){return lo((0,o.OAn)(),(0,o.xbp)(),e)?(0,o.eFE)(e):Yr},\u0275\u0275interpolate1:w_,\u0275\u0275interpolate2:function dw(e,t,n,r,s=""){return u_((0,o.OAn)(),e,t,n,r,s)},\u0275\u0275interpolate3:function fw(e,t,n,r,s,a,g=""){return d_((0,o.OAn)(),e,t,n,r,s,a,g)},\u0275\u0275interpolate4:function hw(e,t,n,r,s,a,g,A,T=""){return f_((0,o.OAn)(),e,t,n,r,s,a,g,A,T)},\u0275\u0275interpolate5:function pw(e,t,n,r,s,a,g,A,T,J,se=""){return h_((0,o.OAn)(),e,t,n,r,s,a,g,A,T,J,se)},\u0275\u0275interpolate6:function gw(e,t,n,r,s,a,g,A,T,J,se,ke,rt=""){return p_((0,o.OAn)(),e,t,n,r,s,a,g,A,T,J,se,ke,rt)},\u0275\u0275interpolate7:function mw(e,t,n,r,s,a,g,A,T,J,se,ke,rt,at,Ot=""){return g_((0,o.OAn)(),e,t,n,r,s,a,g,A,T,J,se,ke,rt,at,Ot)},\u0275\u0275interpolate8:function vw(e,t,n,r,s,a,g,A,T,J,se,ke,rt,at,Ot,Qt,On=""){return m_((0,o.OAn)(),e,t,n,r,s,a,g,A,T,J,se,ke,rt,at,Ot,Qt,On)},\u0275\u0275interpolateV:function _w(e){return l_((0,o.OAn)(),e)},\u0275\u0275sanitizeHtml:function Iy(e){const t=Da();return t?so(t.sanitize(Gs.HTML,e)||""):Zi(e,"HTML")?so(ki(e)):function yy(e,t){let n=null;try{ll=ll||rl(e);let r=t?String(t):"";n=ll.getInertBodyElement(r);let s=5,a=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=a,a=n.innerHTML,n=ll.getInertBodyElement(r)}while(r!==a);return Vt((new uo).sanitizeChildren(Oc(n)||n))}finally{if(n){const r=Oc(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}(Lt(),(0,o.eFE)(e))},\u0275\u0275sanitizeStyle:function Ty(e){const t=Da();return t?t.sanitize(Gs.STYLE,e)||"":Zi(e,"Style")?ki(e):(0,o.eFE)(e)},\u0275\u0275sanitizeResourceUrl:Wh,\u0275\u0275sanitizeScript:function My(e){const t=Da();if(t)return ir(t.sanitize(Gs.SCRIPT,e)||"");if(Zi(e,"Script"))return ir(ki(e));throw new o.buA(905,!1)},\u0275\u0275validateAttribute:function Ny(e,t,n){const r=t.toLowerCase(),s=n.toLowerCase();if(!Ly[r]?.has(s))return e;const a=(0,o.CpD)();if(2!==a.type)return e;const g=(0,o.OAn)();throw"iframe"===r&&function wy(e){const t=(0,o.OAn)();e.src="",e.srcdoc=Vt(""),ba(t[o.GpT],e)}((0,o.d31)(a,g)),new o.buA(-910,!1)},\u0275\u0275sanitizeUrl:xc,\u0275\u0275sanitizeUrlOrResourceUrl:Kh,\u0275\u0275trustConstantHtml:function Oy(e){return Vt(e[0])},\u0275\u0275trustConstantResourceUrl:function Py(e){return function sn(e){return ht()?.createScriptURL(e)||e}(e[0])},forwardRef:o.Rfq,resolveForwardRef:o.nl4,\u0275\u0275twoWayProperty:Pd,\u0275\u0275twoWayBindingSet:S_,\u0275\u0275twoWayListener:Rd,\u0275\u0275replaceMetadata:function jw(e,t,n,r,s=null,a=null){const g=(0,o.xUg)(e);t.apply(null,[e,n,...r]);const{newDef:A,oldDef:T}=function Vw(e,t){const n={...e};return{newDef:Object.assign(e,t,{directiveDefs:n.directiveDefs,pipeDefs:n.pipeDefs,setInput:n.setInput,type:n.type}),oldDef:n}}(g,(0,o.xUg)(e));if(e[o.CQl]=A,T.tView){const J=function ze(){return Gr}().values();for(const se of J)(0,o.EFk)(se)&&null===se[o.f7T]&&yc(s,a,A,T,se)}},\u0275\u0275getReplaceMetadataURL:function Bw(e,t,n){const r=`./@ng/component?c=${e}&t=${encodeURIComponent(t)}`;return new URL(r,n).href}};let va=null;function Gw(e){null!==va&&(e.defaultEncapsulation!==va.defaultEncapsulation||e.preserveWhitespaces!==va.preserveWhitespaces)||(va=e)}const nl=[];function G_(e){return mu(e)?e.ngModule:e}const dI=Ae("NgModule",e=>e,void 0,0,(e,t)=>function Jw(e,t={}){(function Yw(e,t){const r=(0,o.Bqz)(t.declarations||o.Mlv);let s=null;Object.defineProperty(e,o.hmW,{configurable:!0,get:()=>(null===s&&(s=ce().compileNgModule(os,`ng:///${e.name}/\u0275mod.js`,{type:e,bootstrap:(0,o.Bqz)(t.bootstrap||o.Mlv).map(o.nl4),declarations:r.map(o.nl4),imports:(0,o.Bqz)(t.imports||o.Mlv).map(o.nl4).map(G_),exports:(0,o.Bqz)(t.exports||o.Mlv).map(o.nl4).map(G_),schemas:t.schemas?(0,o.Bqz)(t.schemas):null,id:t.id||null}),s.schemas||(s.schemas=[])),s)});let a=null;Object.defineProperty(e,o.zSs,{get:()=>{if(null===a){const A=ce();a=A.compileFactory(os,`ng:///${e.name}/\u0275fac.js`,{name:e.name,type:e,deps:ye(e),target:A.FactoryTarget.NgModule,typeArgumentCount:0})}return a},configurable:!1});let g=null;Object.defineProperty(e,o.ONQ,{get:()=>{if(null===g){const A={name:e.name,type:e,providers:t.providers||o.Mlv,imports:[(t.imports||o.Mlv).map(o.nl4),(t.exports||o.Mlv).map(o.nl4)]};g=ce().compileInjector(os,`ng:///${e.name}/\u0275inj.js`,A)}return g},configurable:!1})})(e,t),void 0!==t.id&&Gg(e,t.id),function qw(e,t){nl.push({moduleType:e,ngModule:t})}(e,t)}(e,t));class fI{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let hI=(()=>{class e{compileModuleSync(n){return new qg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),a=Ii((0,o.phH)(n).declarations).reduce((g,A)=>{const T=(0,o.xUg)(A);return T&&g.push(new jl(T)),g},[]);return new fI(r,a)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const pI=new o.nKC("");let gI=(()=>{class e{zone=(0,o.WQX)(ro);changeDetectionScheduler=(0,o.WQX)(o.hk6);applicationRef=(0,o.WQX)(Jl);applicationErrorHandler=(0,o.WQX)(o.ZTf);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const oy=new o.nKC("",{factory:()=>!1});function iy({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new ro({...jd(),scheduleInRootZone:n}),[{provide:ro,useFactory:e},{provide:o.Z63,multi:!0,useFactory:()=>{const r=(0,o.WQX)(gI,{optional:!0});return()=>r.initialize()}},{provide:o.Z63,multi:!0,useFactory:()=>{const r=(0,o.WQX)(mI);return()=>{r.initialize()}}},!0===t?{provide:o.Jy$,useValue:!0}:[],{provide:o.AQb,useValue:n??lp},{provide:o.ZTf,useFactory:()=>{const r=(0,o.WQX)(ro),s=(0,o.WQX)(o.uvJ);let a;return g=>{r.runOutsideAngular(()=>{s.destroyed&&!a?setTimeout(()=>{throw g}):(a??=s.get(o.zcH),a.handleError(g))})}}}]}function jd(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}let mI=(()=>{class e{subscription=new De.yU;initialized=!1;zone=(0,o.WQX)(ro);pendingTasks=(0,o.WQX)(o.rev);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ro.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ro.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ly=(()=>{class e{applicationErrorHandler=(0,o.WQX)(o.ZTf);appRef=(0,o.WQX)(Jl);taskService=(0,o.WQX)(o.rev);ngZone=(0,o.WQX)(ro);zonelessEnabled=(0,o.WQX)(o.Evm);tracing=(0,o.WQX)(Aa,{optional:!0});disableScheduling=(0,o.WQX)(o.Jy$,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new De.yU;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(gl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&((0,o.WQX)(o.AQb,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Kc||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;let r=!1;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const s=this.useMicrotaskScheduler?up:cp;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>s(()=>this.tick())):this.ngZone.runOutsideAngular(()=>s(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(gl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,up(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=(0,o.jDH)({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const cy=new o.nKC("",{providedIn:"root",factory:()=>(0,o.WQX)(cy,{optional:!0,skipSelf:!0})||function vI(){return typeof $localize<"u"&&$localize.locale||vd}()}),_I=new o.nKC("",{providedIn:"root",factory:()=>"USD"})},3669($t,ot,b){"use strict";function i(o){return o}b.d(ot,{D:()=>i})},3726($t,ot,b){"use strict";b.d(ot,{R:()=>ie});var i=b(8750),o=b(1985),D=b(1397),Ce=b(7441),De=b(8071),B=b(6450);const Pe=["addListener","removeListener"],Ge=["addEventListener","removeEventListener"],pe=["on","off"];function ie(y,v,M,R){if((0,De.T)(M)&&(R=M,M=void 0),R)return ie(y,v,M).pipe((0,B.I)(R));const[V,ce]=function m(y){return(0,De.T)(y.addEventListener)&&(0,De.T)(y.removeEventListener)}(y)?Ge.map(z=>te=>y[z](v,te,M)):function l(y){return(0,De.T)(y.addListener)&&(0,De.T)(y.removeListener)}(y)?Pe.map(Ae(y,v)):function p(y){return(0,De.T)(y.on)&&(0,De.T)(y.off)}(y)?pe.map(Ae(y,v)):[];if(!V&&(0,Ce.X)(y))return(0,D.Z)(z=>ie(z,v,M))((0,i.Tg)(y));if(!V)throw new TypeError("Invalid event target");return new o.c(z=>{const te=(...K)=>z.next(1<K.length?K:K[0]);return V(te),()=>ce(te)})}function Ae(y,v){return M=>R=>y[M](v,R)}},3827($t,ot,b){"use strict";b.d(ot,{B:()=>lt,F:()=>Jt,G:()=>Ut,O:()=>ut,a:()=>R,b:()=>V,c:()=>K,d:()=>xt,e:()=>Tt,f:()=>be,g:()=>ge,h:()=>tt,i:()=>St,j:()=>ae,k:()=>ve,l:()=>ce,m:()=>z,n:()=>ie,o:()=>Ye,q:()=>Ae,s:()=>Ft,t:()=>le});var i=b(467),o=b(9596),D=b(4674),Ce=b(9431),De=b(5705),B=b(6855),Pe=b(6118),Ge=b(8607);const pe='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), ion-checkbox:not([tabindex^="-"]):not([hidden]):not([disabled]), ion-radio:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',ie=(ct,_t)=>{const Et=ct.querySelector(pe);l(Et,_t??ct)},Ae=(ct,_t)=>{const Et=Array.from(ct.querySelectorAll(pe));l(Et.length>0?Et[Et.length-1]:null,_t??ct)},l=(ct,_t)=>{let Et=ct;const Xt=ct?.shadowRoot;if(Xt&&(Et=Xt.querySelector(pe)||ct),Et){const bn=Et.closest("ion-radio-group");bn?bn.setFocus():(0,D.n)(Et)}else _t.focus()};let p=0,m=0;const y=new WeakMap,v=ct=>{var _t;return!1!==ct.showBackdrop&&!((null!==(_t=ct.backdropBreakpoint)&&void 0!==_t?_t:0)>0)},M=ct=>({create:_t=>Ne(ct,_t),dismiss:(_t,Et,Xt)=>Fe(document,_t,Et,ct,Xt),getTop:()=>(0,i.A)(function*(){return Ye(document,ct)})()}),R=M("ion-alert"),V=M("ion-action-sheet"),ce=M("ion-loading"),z=M("ion-modal"),K=M("ion-popover"),le=M("ion-toast"),ae=ct=>{typeof document<"u"&&Ke(document);const _t=p++;ct.overlayIndex=_t},ve=ct=>(ct.hasAttribute("id")||(ct.id="ion-overlay-"+ ++m),ct.id),Ne=(ct,_t)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(ct).then(()=>{const Et=document.createElement(ct);return Et.classList.add("overlay-hidden"),Object.assign(Et,Object.assign(Object.assign({},_t),{hasController:!0})),Ie(document).appendChild(Et),new Promise(Xt=>(0,D.c)(Et,Xt))}):Promise.resolve(),Le=(ct,_t)=>{let Et=ct;const Xt=ct?.shadowRoot;Xt&&(Et=Xt.querySelector(pe)||ct),Et?(0,D.n)(Et):_t.focus()},Ke=ct=>{0===p&&(p=1,ct.addEventListener("focus",_t=>{((ct,_t)=>{const Et=Ye(_t,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),Xt=ct.target;Et&&Xt&&!Et.classList.contains(Jt)&&(Et.shadowRoot?(()=>{if(Et.contains(Xt))Et.lastFocus=Xt;else if("ION-TOAST"===Xt.tagName)Le(Et.lastFocus,Et);else{const Cn=Et.lastFocus;ie(Et),Cn===_t.activeElement&&Ae(Et),Et.lastFocus=_t.activeElement}})():(()=>{if(Et===Xt)Et.lastFocus=void 0;else if("ION-TOAST"===Xt.tagName)Le(Et.lastFocus,Et);else{const Cn=(0,D.g)(Et);if(!Cn.contains(Xt))return;const ln=Cn.querySelector(".ion-overlay-wrapper");if(!ln)return;if(ln.contains(Xt)||Xt===Cn.querySelector("ion-backdrop"))Et.lastFocus=Xt;else{const Mt=Et.lastFocus;ie(ln,Et),Mt===_t.activeElement&&Ae(ln,Et),Et.lastFocus=_t.activeElement}}})())})(_t,ct)},!0),ct.addEventListener("ionBackButton",_t=>{const Et=Ye(ct);Et?.backdropDismiss&&_t.detail.register(Ce.OVERLAY_BACK_BUTTON_PRIORITY,()=>{Et.dismiss(void 0,lt)})}),(0,Ce.shouldUseCloseWatcher)()||ct.addEventListener("keydown",_t=>{if("Escape"===_t.key){const Et=Ye(ct);Et?.backdropDismiss&&Et.dismiss(void 0,lt)}}))},Fe=(ct,_t,Et,Xt,bn)=>{const Un=Ye(ct,Xt,bn);return Un?Un.dismiss(_t,Et):Promise.reject("overlay does not exist")},Oe=(ct,_t)=>((ct,_t)=>(void 0===_t&&(_t="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(ct.querySelectorAll(_t)).filter(Et=>Et.overlayIndex>0)))(ct,_t).filter(Et=>!(ct=>ct.classList.contains("overlay-hidden"))(Et)),Ye=(ct,_t,Et)=>{const Xt=Oe(ct,_t);return(void 0===Et?Xt:Xt.filter(bn=>bn.id===Et)).slice(-1)[0]},Ve=(ct=!1)=>{const Et=Ie(document).querySelector("ion-router-outlet, #ion-view-container-root");Et&&(ct?Et.setAttribute("aria-hidden","true"):Et.removeAttribute("aria-hidden"))},be=function(){var ct=(0,i.A)(function*(_t,Et,Xt,bn,Un){var Cn,ln;if(_t.presented)return;"ION-TOAST"!==_t.el.tagName&&q(_t.el);const Mt=_t.el,wt="ION-TOAST"!==Mt.tagName&&!1!==Mt.focusTrap&&v(Mt);if(_t.presented=!0,_t.willPresent.emit(),wt){const Zn=Ie(document).querySelector("ion-router-outlet, #ion-view-container-root");!!Zn&&Zn.contains(Mt)||Ve(!0),document.body.classList.add(Ge.B)}null===(Cn=_t.willPresentShorthand)||void 0===Cn||Cn.emit();const Nt=(0,B.b)(_t),en=_t.enterAnimation?_t.enterAnimation:De.e.get(Et,"ios"===Nt?Xt:bn);(yield He(_t,en,_t.el,Un))&&(_t.didPresent.emit(),null===(ln=_t.didPresentShorthand)||void 0===ln||ln.emit()),_t.keyboardClose&&(null===document.activeElement||!_t.el.contains(document.activeElement))&&_t.el.focus(),_t.el.removeAttribute("aria-hidden"),_t.el.removeAttribute("inert")});return function(Et,Xt,bn,Un,Cn){return ct.apply(this,arguments)}}(),q=function(){var ct=(0,i.A)(function*(_t){let Et=document.activeElement;if(!Et)return;Et.blur();const Xt=Et?.shadowRoot;Xt&&(Et=Xt.querySelector(pe)||Et),yield _t.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&Et.focus()});return function(Et){return ct.apply(this,arguments)}}(),ge=function(){var ct=(0,i.A)(function*(_t,Et,Xt,bn,Un,Cn,ln){var Mt,hn;if(!_t.presented)return!1;const Nt=(void 0!==o.d?Oe(o.d):[]).filter(Zn=>"ION-TOAST"!==Zn.tagName&&!1!==Zn.focusTrap&&v(Zn)),en=_t.el;"ION-TOAST"!==en.tagName&&!1!==en.focusTrap&&v(en)&&1===Nt.length&&Nt[0].id===en.id&&(Ve(!1),document.body.classList.remove(Ge.B)),_t.presented=!1;try{_t.el.style.setProperty("pointer-events","none"),_t.willDismiss.emit({data:Et,role:Xt}),null===(Mt=_t.willDismissShorthand)||void 0===Mt||Mt.emit({data:Et,role:Xt});const Zn=(0,B.b)(_t),Qn=_t.leaveAnimation?_t.leaveAnimation:De.e.get(bn,"ios"===Zn?Un:Cn);Xt!==Ut&&(yield He(_t,Qn,_t.el,ln)),_t.didDismiss.emit({data:Et,role:Xt}),null===(hn=_t.didDismissShorthand)||void 0===hn||hn.emit({data:Et,role:Xt}),(y.get(_t)||[]).forEach(or=>or.destroy()),y.delete(_t),_t.el.classList.add("overlay-hidden"),_t.el.style.removeProperty("pointer-events"),void 0!==_t.el.lastFocus&&(_t.el.lastFocus=void 0)}catch(Zn){(0,De.j)(`[${_t.el.tagName.toLowerCase()}] - `,Zn)}return _t.el.remove(),!0});return function(Et,Xt,bn,Un,Cn,ln,Mt){return ct.apply(this,arguments)}}(),Ie=ct=>ct.querySelector("ion-app")||ct.body,He=function(){var ct=(0,i.A)(function*(_t,Et,Xt,bn){Xt.classList.remove("overlay-hidden");const Cn=Et(_t.el,bn);(!_t.animated||!De.e.getBoolean("animated",!0))&&Cn.duration(0),_t.keyboardClose&&Cn.beforeAddWrite(()=>{const Mt=Xt.ownerDocument.activeElement;Mt?.matches("input,ion-input, ion-textarea")&&Mt.blur()});const ln=y.get(_t)||[];return y.set(_t,[...ln,Cn]),yield Cn.play(),!0});return function(Et,Xt,bn,Un){return ct.apply(this,arguments)}}(),tt=(ct,_t)=>{let Et;const Xt=new Promise(bn=>Et=bn);return dt(ct,_t,bn=>{Et(bn.detail)}),Xt},dt=(ct,_t,Et)=>{const Xt=bn=>{(0,D.m)(ct,_t,Xt),Et(bn)};(0,D.f)(ct,_t,Xt)},St=ct=>"cancel"===ct||ct===lt,vt=ct=>ct(),Ft=(ct,_t)=>{if("function"==typeof ct)return De.e.get("_zoneGate",vt)(()=>{try{return ct(_t)}catch(Xt){throw Xt}})},lt="backdrop",Ut="gesture",ut=39,xt=ct=>{let Et,_t=!1;const Xt=(0,Pe.C)(),bn=(ln=!1)=>{if(Et&&!ln)return{delegate:Et,inline:_t};const{el:Mt,hasController:hn,delegate:wt}=ct;return _t=null!==Mt.parentNode&&!hn,Et=_t?wt||Xt:wt,{inline:_t,delegate:Et}};return{attachViewToDom:function(){var ln=(0,i.A)(function*(Mt){const{delegate:hn}=bn(!0);if(hn)return yield hn.attachViewToDom(ct.el,Mt);const{hasController:wt}=ct;if(wt&&void 0!==Mt)throw new Error("framework delegate is missing");return null});return function(hn){return ln.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:ln}=bn();ln&&void 0!==ct.el&&ln.removeViewFromDom(ct.el.parentElement,ct.el)}}},Tt=()=>{let ct;const _t=()=>{ct&&(ct(),ct=void 0)};return{addClickListener:(Xt,bn)=>{_t();const Un=void 0!==bn?document.getElementById(bn):null;Un?ct=((ln,Mt)=>{const hn=()=>{Mt.present()};return ln.addEventListener("click",hn),()=>{ln.removeEventListener("click",hn)}})(Un,Xt):(0,De.f)(`[${Xt.tagName.toLowerCase()}] - A trigger element with the ID "${bn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,Xt)},removeClickListener:_t}},Jt="ion-disable-focus-trap"},3878($t,ot,b){var i,D;$t=b.nmd($t),void 0!==(D="function"==typeof(i=function(){"use strict";var Ce={},De=null;function B(re){if($t&&$t.exports)try{return b(6528).randomBytes(re)}catch{}try{var Ke;return(self.crypto||self.msCrypto).getRandomValues(Ke=new Uint32Array(re)),Array.prototype.slice.call(Ke)}catch{}if(!De)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return De(re)}try{B(1)}catch{}function Ge(re,Ke){for(var Fe=0,we=0,Oe=0,Ye=re.length;Oe<Ye;++Oe)re.charCodeAt(Oe)===Ke.charCodeAt(Oe)?++Fe:++we;return!(Fe<0)&&0===we}De=null,Ce.setRandomFallback=function(re){De=re},Ce.genSaltSync=function(re,Ke){if("number"!=typeof(re=re||R))throw Error("Illegal arguments: "+typeof re+", "+typeof Ke);re<4?re=4:re>31&&(re=31);var Fe=[];return Fe.push("$2a$"),re<10&&Fe.push("0"),Fe.push(re.toString()),Fe.push("$"),Fe.push(m(B(M),M)),Fe.join("")},Ce.genSalt=function(re,Ke,Fe){if("function"==typeof Ke&&(Fe=Ke,Ke=void 0),"function"==typeof re&&(Fe=re,re=void 0),typeof re>"u")re=R;else if("number"!=typeof re)throw Error("illegal arguments: "+typeof re);function we(Oe){pe(function(){try{Oe(null,Ce.genSaltSync(re))}catch(Ye){Oe(Ye)}})}if(!Fe)return new Promise(function(Oe,Ye){we(function(Ve,be){Ve?Ye(Ve):Oe(be)})});if("function"!=typeof Fe)throw Error("Illegal callback: "+typeof Fe);we(Fe)},Ce.hashSync=function(re,Ke){if(typeof Ke>"u"&&(Ke=R),"number"==typeof Ke&&(Ke=Ce.genSaltSync(Ke)),"string"!=typeof re||"string"!=typeof Ke)throw Error("Illegal arguments: "+typeof re+", "+typeof Ke);return Le(re,Ke)},Ce.hash=function(re,Ke,Fe,we){function Oe(Ye){"string"==typeof re&&"number"==typeof Ke?Ce.genSalt(Ke,function(Ve,be){Le(re,be,Ye,we)}):"string"==typeof re&&"string"==typeof Ke?Le(re,Ke,Ye,we):pe(Ye.bind(this,Error("Illegal arguments: "+typeof re+", "+typeof Ke)))}if(!Fe)return new Promise(function(Ye,Ve){Oe(function(be,q){be?Ve(be):Ye(q)})});if("function"!=typeof Fe)throw Error("Illegal callback: "+typeof Fe);Oe(Fe)},Ce.compareSync=function(re,Ke){if("string"!=typeof re||"string"!=typeof Ke)throw Error("Illegal arguments: "+typeof re+", "+typeof Ke);return 60===Ke.length&&Ge(Ce.hashSync(re,Ke.substr(0,Ke.length-31)),Ke)},Ce.compare=function(re,Ke,Fe,we){function Oe(Ye){"string"==typeof re&&"string"==typeof Ke?60===Ke.length?Ce.hash(re,Ke.substr(0,29),function(Ve,be){Ve?Ye(Ve):Ye(null,Ge(be,Ke))},we):pe(Ye.bind(this,null,!1)):pe(Ye.bind(this,Error("Illegal arguments: "+typeof re+", "+typeof Ke)))}if(!Fe)return new Promise(function(Ye,Ve){Oe(function(be,q){be?Ve(be):Ye(q)})});if("function"!=typeof Fe)throw Error("Illegal callback: "+typeof Fe);Oe(Fe)},Ce.getRounds=function(re){if("string"!=typeof re)throw Error("Illegal arguments: "+typeof re);return parseInt(re.split("$")[2],10)},Ce.getSalt=function(re){if("string"!=typeof re)throw Error("Illegal arguments: "+typeof re);if(60!==re.length)throw Error("Illegal hash length: "+re.length+" != 60");return re.substring(0,29)};var pe=typeof process<"u"&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout;var Ae="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],p=String.fromCharCode;function m(re,Ke){var Oe,Ye,Fe=0,we=[];if(Ke<=0||Ke>re.length)throw Error("Illegal len: "+Ke);for(;Fe<Ke;){if(Oe=255&re[Fe++],we.push(Ae[Oe>>2&63]),Oe=(3&Oe)<<4,Fe>=Ke){we.push(Ae[63&Oe]);break}if(Ye=255&re[Fe++],we.push(Ae[63&(Oe|=Ye>>4&15)]),Oe=(15&Ye)<<2,Fe>=Ke){we.push(Ae[63&Oe]);break}Ye=255&re[Fe++],we.push(Ae[63&(Oe|=Ye>>6&3)]),we.push(Ae[63&Ye])}return we.join("")}function y(re,Ke){var Ve,be,q,Ie,He,Fe=0,we=re.length,Oe=0,Ye=[];if(Ke<=0)throw Error("Illegal len: "+Ke);for(;Fe<we-1&&Oe<Ke&&(Ve=(He=re.charCodeAt(Fe++))<l.length?l[He]:-1,be=(He=re.charCodeAt(Fe++))<l.length?l[He]:-1,!(-1==Ve||-1==be||(Ie=Ve<<2>>>0,Ie|=(48&be)>>4,Ye.push(p(Ie)),++Oe>=Ke||Fe>=we)||(He=re.charCodeAt(Fe++),q=He<l.length?l[He]:-1,-1==q)||(Ie=(15&be)<<4>>>0,Ie|=(60&q)>>2,Ye.push(p(Ie)),++Oe>=Ke||Fe>=we)));)He=re.charCodeAt(Fe++),Ie=(3&q)<<6>>>0,Ye.push(p(Ie|=He<l.length?l[He]:-1)),++Oe;var tt=[];for(Fe=0;Fe<Oe;Fe++)tt.push(Ye[Fe].charCodeAt(0));return tt}var re,v=re={MAX_CODEPOINT:1114111,encodeUTF8:function(Ke,Fe){var we=null;for("number"==typeof Ke&&(we=Ke,Ke=function(){return null});null!==we||null!==(we=Ke());)we<128?Fe(127&we):we<2048?(Fe(we>>6&31|192),Fe(63&we|128)):we<65536?(Fe(we>>12&15|224),Fe(we>>6&63|128),Fe(63&we|128)):(Fe(we>>18&7|240),Fe(we>>12&63|128),Fe(we>>6&63|128),Fe(63&we|128)),we=null},decodeUTF8:function(Ke,Fe){for(var we,Oe,Ye,Ve,be=function(q){q=q.slice(0,q.indexOf(null));var ge=Error(q.toString());throw ge.name="TruncatedError",ge.bytes=q,ge};null!==(we=Ke());)if(128&we)if(192==(224&we))null===(Oe=Ke())&&be([we,Oe]),Fe((31&we)<<6|63&Oe);else if(224==(240&we))(null===(Oe=Ke())||null===(Ye=Ke()))&&be([we,Oe,Ye]),Fe((15&we)<<12|(63&Oe)<<6|63&Ye);else{if(240!=(248&we))throw RangeError("Illegal starting byte: "+we);(null===(Oe=Ke())||null===(Ye=Ke())||null===(Ve=Ke()))&&be([we,Oe,Ye,Ve]),Fe((7&we)<<18|(63&Oe)<<12|(63&Ye)<<6|63&Ve)}else Fe(we)},UTF16toUTF8:function(Ke,Fe){for(var we,Oe=null;null!==(we=null!==Oe?Oe:Ke());)we>=55296&&we<=57343&&null!==(Oe=Ke())&&Oe>=56320&&Oe<=57343?(Fe(1024*(we-55296)+Oe-56320+65536),Oe=null):Fe(we);null!==Oe&&Fe(Oe)},UTF8toUTF16:function(Ke,Fe){var we=null;for("number"==typeof Ke&&(we=Ke,Ke=function(){return null});null!==we||null!==(we=Ke());)we<=65535?Fe(we):(Fe(55296+((we-=65536)>>10)),Fe(we%1024+56320)),we=null},encodeUTF16toUTF8:function(Ke,Fe){re.UTF16toUTF8(Ke,function(we){re.encodeUTF8(we,Fe)})},decodeUTF8toUTF16:function(Ke,Fe){re.decodeUTF8(Ke,function(we){re.UTF8toUTF16(we,Fe)})},calculateCodePoint:function(Ke){return Ke<128?1:Ke<2048?2:Ke<65536?3:4},calculateUTF8:function(Ke){for(var Fe,we=0;null!==(Fe=Ke());)we+=re.calculateCodePoint(Fe);return we},calculateUTF16asUTF8:function(Ke){var Fe=0,we=0;return re.UTF16toUTF8(Ke,function(Oe){++Fe,we+=re.calculateCodePoint(Oe)}),[Fe,we]}};Date.now=Date.now||function(){return+new Date};var M=16,R=10,V=16,ce=100,z=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],te=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],K=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function le(re,Ke,Fe,we){var Oe,Ye=re[Ke],Ve=re[Ke+1];return Oe=we[(Ye^=Fe[0])>>>24],Oe+=we[256|Ye>>16&255],Oe^=we[512|Ye>>8&255],Oe=we[(Ve^=(Oe+=we[768|255&Ye])^Fe[1])>>>24],Oe+=we[256|Ve>>16&255],Oe^=we[512|Ve>>8&255],Oe=we[(Ye^=(Oe+=we[768|255&Ve])^Fe[2])>>>24],Oe+=we[256|Ye>>16&255],Oe^=we[512|Ye>>8&255],Oe=we[(Ve^=(Oe+=we[768|255&Ye])^Fe[3])>>>24],Oe+=we[256|Ve>>16&255],Oe^=we[512|Ve>>8&255],Oe=we[(Ye^=(Oe+=we[768|255&Ve])^Fe[4])>>>24],Oe+=we[256|Ye>>16&255],Oe^=we[512|Ye>>8&255],Oe=we[(Ve^=(Oe+=we[768|255&Ye])^Fe[5])>>>24],Oe+=we[256|Ve>>16&255],Oe^=we[512|Ve>>8&255],Oe=we[(Ye^=(Oe+=we[768|255&Ve])^Fe[6])>>>24],Oe+=we[256|Ye>>16&255],Oe^=we[512|Ye>>8&255],Oe=we[(Ve^=(Oe+=we[768|255&Ye])^Fe[7])>>>24],Oe+=we[256|Ve>>16&255],Oe^=we[512|Ve>>8&255],Oe=we[(Ye^=(Oe+=we[768|255&Ve])^Fe[8])>>>24],Oe+=we[256|Ye>>16&255],Oe^=we[512|Ye>>8&255],Oe=we[(Ve^=(Oe+=we[768|255&Ye])^Fe[9])>>>24],Oe+=we[256|Ve>>16&255],Oe^=we[512|Ve>>8&255],Oe=we[(Ye^=(Oe+=we[768|255&Ve])^Fe[10])>>>24],Oe+=we[256|Ye>>16&255],Oe^=we[512|Ye>>8&255],Oe=we[(Ve^=(Oe+=we[768|255&Ye])^Fe[11])>>>24],Oe+=we[256|Ve>>16&255],Oe^=we[512|Ve>>8&255],Oe=we[(Ye^=(Oe+=we[768|255&Ve])^Fe[12])>>>24],Oe+=we[256|Ye>>16&255],Oe^=we[512|Ye>>8&255],Oe=we[(Ve^=(Oe+=we[768|255&Ye])^Fe[13])>>>24],Oe+=we[256|Ve>>16&255],Oe^=we[512|Ve>>8&255],Oe=we[(Ye^=(Oe+=we[768|255&Ve])^Fe[14])>>>24],Oe+=we[256|Ye>>16&255],Oe^=we[512|Ye>>8&255],Oe=we[(Ve^=(Oe+=we[768|255&Ye])^Fe[15])>>>24],Oe+=we[256|Ve>>16&255],Oe^=we[512|Ve>>8&255],Ye^=(Oe+=we[768|255&Ve])^Fe[16],re[Ke]=Ve^Fe[V+1],re[Ke+1]=Ye,re}function ae(re,Ke){for(var Fe=0,we=0;Fe<4;++Fe)we=we<<8|255&re[Ke],Ke=(Ke+1)%re.length;return{key:we,offp:Ke}}function ve(re,Ke,Fe){for(var be,we=0,Oe=[0,0],Ye=Ke.length,Ve=Fe.length,q=0;q<Ye;q++)we=(be=ae(re,we)).offp,Ke[q]=Ke[q]^be.key;for(q=0;q<Ye;q+=2)Oe=le(Oe,0,Ke,Fe),Ke[q]=Oe[0],Ke[q+1]=Oe[1];for(q=0;q<Ve;q+=2)Oe=le(Oe,0,Ke,Fe),Fe[q]=Oe[0],Fe[q+1]=Oe[1]}function he(re,Ke,Fe,we,Oe){var be,Ye=K.slice(),Ve=Ye.length;if(Fe<4||Fe>31){if(be=Error("Illegal number of rounds (4-31): "+Fe),we)return void pe(we.bind(this,be));throw be}if(Ke.length!==M){if(be=Error("Illegal salt length: "+Ke.length+" != "+M),we)return void pe(we.bind(this,be));throw be}Fe=1<<Fe>>>0;var q,ge,He,Ie=0;function tt(){if(Oe&&Oe(Ie/Fe),!(Ie<Fe)){for(Ie=0;Ie<64;Ie++)for(He=0;He<Ve>>1;He++)le(Ye,He<<1,q,ge);var vt=[];for(Ie=0;Ie<Ve;Ie++)vt.push((Ye[Ie]>>24&255)>>>0),vt.push((Ye[Ie]>>16&255)>>>0),vt.push((Ye[Ie]>>8&255)>>>0),vt.push((255&Ye[Ie])>>>0);return we?void we(null,vt):vt}for(var St=Date.now();Ie<Fe&&(Ie+=1,ve(re,q,ge),ve(Ke,q,ge),!(Date.now()-St>ce)););we&&pe(tt)}if(Int32Array?(q=new Int32Array(z),ge=new Int32Array(te)):(q=z.slice(),ge=te.slice()),function Ne(re,Ke,Fe,we){for(var q,Oe=0,Ye=[0,0],Ve=Fe.length,be=we.length,ge=0;ge<Ve;ge++)Oe=(q=ae(Ke,Oe)).offp,Fe[ge]=Fe[ge]^q.key;for(Oe=0,ge=0;ge<Ve;ge+=2)Oe=(q=ae(re,Oe)).offp,Ye[0]^=q.key,Oe=(q=ae(re,Oe)).offp,Ye[1]^=q.key,Ye=le(Ye,0,Fe,we),Fe[ge]=Ye[0],Fe[ge+1]=Ye[1];for(ge=0;ge<be;ge+=2)Oe=(q=ae(re,Oe)).offp,Ye[0]^=q.key,Oe=(q=ae(re,Oe)).offp,Ye[1]^=q.key,Ye=le(Ye,0,Fe,we),we[ge]=Ye[0],we[ge+1]=Ye[1]}(Ke,re,q,ge),typeof we<"u")tt();else for(var dt;;)if(typeof(dt=tt())<"u")return dt||[]}function Le(re,Ke,Fe,we){var Oe,Ye,Ve;if("string"!=typeof re||"string"!=typeof Ke){if(Oe=Error("Invalid string / salt: Not a string"),Fe)return void pe(Fe.bind(this,Oe));throw Oe}if("$"!==Ke.charAt(0)||"2"!==Ke.charAt(1)){if(Oe=Error("Invalid salt version: "+Ke.substring(0,2)),Fe)return void pe(Fe.bind(this,Oe));throw Oe}if("$"===Ke.charAt(2))Ye="\0",Ve=3;else{if("a"!==(Ye=Ke.charAt(2))&&"b"!==Ye&&"y"!==Ye||"$"!==Ke.charAt(3)){if(Oe=Error("Invalid salt revision: "+Ke.substring(2,4)),Fe)return void pe(Fe.bind(this,Oe));throw Oe}Ve=4}if(Ke.charAt(Ve+2)>"$"){if(Oe=Error("Missing salt rounds"),Fe)return void pe(Fe.bind(this,Oe));throw Oe}var ge=10*parseInt(Ke.substring(Ve,Ve+1),10)+parseInt(Ke.substring(Ve+1,Ve+2),10),Ie=Ke.substring(Ve+3,Ve+25),He=function ie(re){var Ke=[],Fe=0;return v.encodeUTF16toUTF8(function(){return Fe>=re.length?null:re.charCodeAt(Fe++)},function(we){Ke.push(we)}),Ke}(re+=Ye>="a"?"\0":""),tt=y(Ie,M);function dt(St){var vt=[];return vt.push("$2"),Ye>="a"&&vt.push(Ye),vt.push("$"),ge<10&&vt.push("0"),vt.push(ge.toString()),vt.push("$"),vt.push(m(tt,tt.length)),vt.push(m(St,4*K.length-1)),vt.join("")}if(typeof Fe>"u")return dt(he(He,tt,ge));he(He,tt,ge,function(St,vt){St?Fe(St,null):Fe(null,dt(vt))},we)}return Ce.encodeBase64=m,Ce.decodeBase64=y,Ce})?i.apply(ot,[]):i)&&($t.exports=D)},4341($t,ot,b){"use strict";b.d(ot,{Zm:()=>z,me:()=>ae,v8:()=>go,ok:()=>gn,l_:()=>Nn,JD:()=>Ao,j4:()=>zr,$R:()=>oo,YN:()=>vo,zX:()=>Cr,VZ:()=>Kr,cz:()=>he,kq:()=>V,vO:()=>ln,BC:()=>Nt,cb:()=>en,cV:()=>Br,vS:()=>Rn,Q0:()=>jn,R_:()=>st,X1:()=>Fr,YS:()=>Qr,k0:()=>Ke,qT:()=>Pn});var i=b(3664),o=b(2615),D=b(9295),Ce=b(7705),De=b(7303),B=b(6648),Pe=b(1985),Ge=b(3073),pe=b(8750),ie=b(9326),Ae=b(4360),l=b(6450),p=b(8496),y=b(1413),v=b(6354);let M=(()=>{class j{_renderer;_elementRef;onChange=L=>{};onTouched=()=>{};constructor(L,de){this._renderer=L,this._elementRef=de}setProperty(L,de){this._renderer.setProperty(this._elementRef.nativeElement,L,de)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}static \u0275fac=function(de){return new(de||j)(i.rXU(i.sFG),i.rXU(i.aKT))};static \u0275dir=i.FsC({type:j})}return j})(),R=(()=>{class j extends M{static \u0275fac=(()=>{let L;return function(Xe){return(L||(L=i.xGo(j)))(Xe||j)}})();static \u0275dir=i.FsC({type:j,features:[i.Vt3]})}return j})();const V=new o.nKC(""),ce={provide:V,useExisting:(0,o.Rfq)(()=>z),multi:!0};let z=(()=>{class j extends R{writeValue(L){this.setProperty("checked",L)}static \u0275fac=(()=>{let L;return function(Xe){return(L||(L=i.xGo(j)))(Xe||j)}})();static \u0275dir=i.FsC({type:j,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(de,Xe){1&de&&i.bIt("change",function(mn){return Xe.onChange(mn.target.checked)})("blur",function(){return Xe.onTouched()})},standalone:!1,features:[i.Jv_([ce]),i.Vt3]})}return j})();const te={provide:V,useExisting:(0,o.Rfq)(()=>ae),multi:!0},le=new o.nKC("");let ae=(()=>{class j extends M{_compositionMode;_composing=!1;constructor(L,de,Xe){super(L,de),this._compositionMode=Xe,null==this._compositionMode&&(this._compositionMode=!function K(){const j=(0,De.rb)()?(0,De.rb)().getUserAgent():"";return/android (\d+)/.test(j.toLowerCase())}())}writeValue(L){this.setProperty("value",L??"")}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}static \u0275fac=function(de){return new(de||j)(i.rXU(i.sFG),i.rXU(i.aKT),i.rXU(le,8))};static \u0275dir=i.FsC({type:j,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(de,Xe){1&de&&i.bIt("input",function(mn){return Xe._handleInput(mn.target.value)})("blur",function(){return Xe.onTouched()})("compositionstart",function(){return Xe._compositionStart()})("compositionend",function(mn){return Xe._compositionEnd(mn.target.value)})},standalone:!1,features:[i.Jv_([te]),i.Vt3]})}return j})();function ve(j){return null==j||0===Ne(j)}function Ne(j){return null==j?null:Array.isArray(j)||"string"==typeof j?j.length:j instanceof Set?j.size:null}const he=new o.nKC(""),Le=new o.nKC(""),re=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ke{static min(Q){return Fe(Q)}static max(Q){return we(Q)}static required(Q){return Oe(Q)}static requiredTrue(Q){return function Ye(j){return!0===j.value?null:{required:!0}}(Q)}static email(Q){return function Ve(j){return ve(j.value)||re.test(j.value)?null:{email:!0}}(Q)}static minLength(Q){return function be(j){return Q=>{const L=Q.value?.length??Ne(Q.value);return null===L||0===L?null:L<j?{minlength:{requiredLength:j,actualLength:L}}:null}}(Q)}static maxLength(Q){return function q(j){return Q=>{const L=Q.value?.length??Ne(Q.value);return null!==L&&L>j?{maxlength:{requiredLength:j,actualLength:L}}:null}}(Q)}static pattern(Q){return ge(Q)}static nullValidator(Q){return null}static compose(Q){return lt(Q)}static composeAsync(Q){return ut(Q)}}function Fe(j){return Q=>{if(null==Q.value||null==j)return null;const L=parseFloat(Q.value);return!isNaN(L)&&L<j?{min:{min:j,actual:Q.value}}:null}}function we(j){return Q=>{if(null==Q.value||null==j)return null;const L=parseFloat(Q.value);return!isNaN(L)&&L>j?{max:{max:j,actual:Q.value}}:null}}function Oe(j){return ve(j.value)?{required:!0}:null}function ge(j){if(!j)return Ie;let Q,L;return"string"==typeof j?(L="","^"!==j.charAt(0)&&(L+="^"),L+=j,"$"!==j.charAt(j.length-1)&&(L+="$"),Q=new RegExp(L)):(L=j.toString(),Q=j),de=>{if(ve(de.value))return null;const Xe=de.value;return Q.test(Xe)?null:{pattern:{requiredPattern:L,actualValue:Xe}}}}function Ie(j){return null}function He(j){return null!=j}function tt(j){return(0,i.yLl)(j)?(0,B.H)(j):j}function dt(j){let Q={};return j.forEach(L=>{Q=null!=L?{...Q,...L}:Q}),0===Object.keys(Q).length?null:Q}function St(j,Q){return Q.map(L=>L(j))}function Ft(j){return j.map(Q=>function vt(j){return!j.validate}(Q)?Q:L=>Q.validate(L))}function lt(j){if(!j)return null;const Q=j.filter(He);return 0==Q.length?null:function(L){return dt(St(L,Q))}}function Ut(j){return null!=j?lt(Ft(j)):null}function ut(j){if(!j)return null;const Q=j.filter(He);return 0==Q.length?null:function(L){return function m(...j){const Q=(0,ie.ms)(j),{args:L,keys:de}=(0,Ge.D)(j),Xe=new Pe.c(on=>{const{length:mn}=L;if(!mn)return void on.complete();const Hr=new Array(mn);let _o=mn,co=mn;for(let Io=0;Io<mn;Io++){let qo=!1;(0,pe.Tg)(L[Io]).subscribe((0,Ae._)(on,Lo=>{qo||(qo=!0,co--),Hr[Io]=Lo},()=>_o--,void 0,()=>{(!_o||!qo)&&(co||on.next(de?(0,p.e)(de,Hr):Hr),on.complete())}))}});return Q?Xe.pipe((0,l.I)(Q)):Xe}(St(L,Q).map(tt)).pipe((0,v.T)(dt))}}function xt(j){return null!=j?ut(Ft(j)):null}function Tt(j,Q){return null===j?[Q]:Array.isArray(j)?[...j,Q]:[j,Q]}function Jt(j){return j._rawValidators}function ct(j){return j._rawAsyncValidators}function _t(j){return j?Array.isArray(j)?j:[j]:[]}function Et(j,Q){return Array.isArray(j)?j.includes(Q):j===Q}function Xt(j,Q){const L=_t(Q);return _t(j).forEach(Xe=>{Et(L,Xe)||L.push(Xe)}),L}function bn(j,Q){return _t(Q).filter(L=>!Et(j,L))}class Un{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(Q){this._rawValidators=Q||[],this._composedValidatorFn=Ut(this._rawValidators)}_setAsyncValidators(Q){this._rawAsyncValidators=Q||[],this._composedAsyncValidatorFn=xt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(Q){this._onDestroyCallbacks.push(Q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Q=>Q()),this._onDestroyCallbacks=[]}reset(Q=void 0){this.control&&this.control.reset(Q)}hasError(Q,L){return!!this.control&&this.control.hasError(Q,L)}getError(Q,L){return this.control?this.control.getError(Q,L):null}}class Cn extends Un{name;get formDirective(){return null}get path(){return null}}class ln extends Un{_parent=null;name=null;valueAccessor=null}class Mt{_cd;constructor(Q){this._cd=Q}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Nt=(()=>{class j extends Mt{constructor(L){super(L)}static \u0275fac=function(de){return new(de||j)(i.rXU(ln,2))};static \u0275dir=i.FsC({type:j,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(de,Xe){2&de&&i.AVh("ng-untouched",Xe.isUntouched)("ng-touched",Xe.isTouched)("ng-pristine",Xe.isPristine)("ng-dirty",Xe.isDirty)("ng-valid",Xe.isValid)("ng-invalid",Xe.isInvalid)("ng-pending",Xe.isPending)},standalone:!1,features:[i.Vt3]})}return j})(),en=(()=>{class j extends Mt{constructor(L){super(L)}static \u0275fac=function(de){return new(de||j)(i.rXU(Cn,10))};static \u0275dir=i.FsC({type:j,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(de,Xe){2&de&&i.AVh("ng-untouched",Xe.isUntouched)("ng-touched",Xe.isTouched)("ng-pristine",Xe.isPristine)("ng-dirty",Xe.isDirty)("ng-valid",Xe.isValid)("ng-invalid",Xe.isInvalid)("ng-pending",Xe.isPending)("ng-submitted",Xe.isSubmitted)},standalone:!1,features:[i.Vt3]})}return j})();const Jn="VALID",vn="INVALID",qe="PENDING",Je="DISABLED";class Ct{}class mt extends Ct{value;source;constructor(Q,L){super(),this.value=Q,this.source=L}}class kt extends Ct{pristine;source;constructor(Q,L){super(),this.pristine=Q,this.source=L}}class jt extends Ct{touched;source;constructor(Q,L){super(),this.touched=Q,this.source=L}}class Kt extends Ct{status;source;constructor(Q,L){super(),this.status=Q,this.source=L}}class tn extends Ct{source;constructor(Q){super(),this.source=Q}}class rn extends Ct{source;constructor(Q){super(),this.source=Q}}function nn(j){return(Bn(j)?j.validators:j)||null}function An(j,Q){return(Bn(Q)?Q.asyncValidators:j)||null}function Bn(j){return null!=j&&!Array.isArray(j)&&"object"==typeof j}function br(j,Q,L){const de=j.controls;if(!(Q?Object.keys(de):de).length)throw new o.buA(1e3,"");if(!de[L])throw new o.buA(1001,"")}function hr(j,Q,L){j._forEachChild((de,Xe)=>{if(void 0===L[Xe])throw new o.buA(1002,"")})}class In{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(Q,L){this._assignValidators(Q),this._assignAsyncValidators(L)}get validator(){return this._composedValidatorFn}set validator(Q){this._rawValidators=this._composedValidatorFn=Q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Q){this._rawAsyncValidators=this._composedAsyncValidatorFn=Q}get parent(){return this._parent}get status(){return(0,D.O8)(this.statusReactive)}set status(Q){(0,D.O8)(()=>this.statusReactive.set(Q))}_status=(0,D.EW)(()=>this.statusReactive());statusReactive=(0,o.vPA)(void 0);get valid(){return this.status===Jn}get invalid(){return this.status===vn}get pending(){return this.status==qe}get disabled(){return this.status===Je}get enabled(){return this.status!==Je}errors;get pristine(){return(0,D.O8)(this.pristineReactive)}set pristine(Q){(0,D.O8)(()=>this.pristineReactive.set(Q))}_pristine=(0,D.EW)(()=>this.pristineReactive());pristineReactive=(0,o.vPA)(!0);get dirty(){return!this.pristine}get touched(){return(0,D.O8)(this.touchedReactive)}set touched(Q){(0,D.O8)(()=>this.touchedReactive.set(Q))}_touched=(0,D.EW)(()=>this.touchedReactive());touchedReactive=(0,o.vPA)(!1);get untouched(){return!this.touched}_events=new y.B;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Q){this._assignValidators(Q)}setAsyncValidators(Q){this._assignAsyncValidators(Q)}addValidators(Q){this.setValidators(Xt(Q,this._rawValidators))}addAsyncValidators(Q){this.setAsyncValidators(Xt(Q,this._rawAsyncValidators))}removeValidators(Q){this.setValidators(bn(Q,this._rawValidators))}removeAsyncValidators(Q){this.setAsyncValidators(bn(Q,this._rawAsyncValidators))}hasValidator(Q){return Et(this._rawValidators,Q)}hasAsyncValidator(Q){return Et(this._rawAsyncValidators,Q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Q={}){const L=!1===this.touched;this.touched=!0;const de=Q.sourceControl??this;this._parent&&!Q.onlySelf&&this._parent.markAsTouched({...Q,sourceControl:de}),L&&!1!==Q.emitEvent&&this._events.next(new jt(!0,de))}markAllAsDirty(Q={}){this.markAsDirty({onlySelf:!0,emitEvent:Q.emitEvent,sourceControl:this}),this._forEachChild(L=>L.markAllAsDirty(Q))}markAllAsTouched(Q={}){this.markAsTouched({onlySelf:!0,emitEvent:Q.emitEvent,sourceControl:this}),this._forEachChild(L=>L.markAllAsTouched(Q))}markAsUntouched(Q={}){const L=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const de=Q.sourceControl??this;this._forEachChild(Xe=>{Xe.markAsUntouched({onlySelf:!0,emitEvent:Q.emitEvent,sourceControl:de})}),this._parent&&!Q.onlySelf&&this._parent._updateTouched(Q,de),L&&!1!==Q.emitEvent&&this._events.next(new jt(!1,de))}markAsDirty(Q={}){const L=!0===this.pristine;this.pristine=!1;const de=Q.sourceControl??this;this._parent&&!Q.onlySelf&&this._parent.markAsDirty({...Q,sourceControl:de}),L&&!1!==Q.emitEvent&&this._events.next(new kt(!1,de))}markAsPristine(Q={}){const L=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const de=Q.sourceControl??this;this._forEachChild(Xe=>{Xe.markAsPristine({onlySelf:!0,emitEvent:Q.emitEvent})}),this._parent&&!Q.onlySelf&&this._parent._updatePristine(Q,de),L&&!1!==Q.emitEvent&&this._events.next(new kt(!0,de))}markAsPending(Q={}){this.status=qe;const L=Q.sourceControl??this;!1!==Q.emitEvent&&(this._events.next(new Kt(this.status,L)),this.statusChanges.emit(this.status)),this._parent&&!Q.onlySelf&&this._parent.markAsPending({...Q,sourceControl:L})}disable(Q={}){const L=this._parentMarkedDirty(Q.onlySelf);this.status=Je,this.errors=null,this._forEachChild(Xe=>{Xe.disable({...Q,onlySelf:!0})}),this._updateValue();const de=Q.sourceControl??this;!1!==Q.emitEvent&&(this._events.next(new mt(this.value,de)),this._events.next(new Kt(this.status,de)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Q,skipPristineCheck:L},this),this._onDisabledChange.forEach(Xe=>Xe(!0))}enable(Q={}){const L=this._parentMarkedDirty(Q.onlySelf);this.status=Jn,this._forEachChild(de=>{de.enable({...Q,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Q.emitEvent}),this._updateAncestors({...Q,skipPristineCheck:L},this),this._onDisabledChange.forEach(de=>de(!1))}_updateAncestors(Q,L){this._parent&&!Q.onlySelf&&(this._parent.updateValueAndValidity(Q),Q.skipPristineCheck||this._parent._updatePristine({},L),this._parent._updateTouched({},L))}setParent(Q){this._parent=Q}getRawValue(){return this.value}updateValueAndValidity(Q={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const de=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jn||this.status===qe)&&this._runAsyncValidator(de,Q.emitEvent)}const L=Q.sourceControl??this;!1!==Q.emitEvent&&(this._events.next(new mt(this.value,L)),this._events.next(new Kt(this.status,L)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Q.onlySelf&&this._parent.updateValueAndValidity({...Q,sourceControl:L})}_updateTreeValidity(Q={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(Q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Je:Jn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Q,L){if(this.asyncValidator){this.status=qe,this._hasOwnPendingAsyncValidator={emitEvent:!1!==L,shouldHaveEmitted:!1!==Q};const de=tt(this.asyncValidator(this));this._asyncValidationSubscription=de.subscribe(Xe=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(Xe,{emitEvent:L,shouldHaveEmitted:Q})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const Q=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,Q}return!1}setErrors(Q,L={}){this.errors=Q,this._updateControlsErrors(!1!==L.emitEvent,this,L.shouldHaveEmitted)}get(Q){let L=Q;return null==L||(Array.isArray(L)||(L=L.split(".")),0===L.length)?null:L.reduce((de,Xe)=>de&&de._find(Xe),this)}getError(Q,L){const de=L?this.get(L):this;return de&&de.errors?de.errors[Q]:null}hasError(Q,L){return!!this.getError(Q,L)}get root(){let Q=this;for(;Q._parent;)Q=Q._parent;return Q}_updateControlsErrors(Q,L,de){this.status=this._calculateStatus(),Q&&this.statusChanges.emit(this.status),(Q||de)&&this._events.next(new Kt(this.status,L)),this._parent&&this._parent._updateControlsErrors(Q,L,de)}_initObservables(){this.valueChanges=new i.bkB,this.statusChanges=new i.bkB}_calculateStatus(){return this._allControlsDisabled()?Je:this.errors?vn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qe)?qe:this._anyControlsHaveStatus(vn)?vn:Jn}_anyControlsHaveStatus(Q){return this._anyControls(L=>L.status===Q)}_anyControlsDirty(){return this._anyControls(Q=>Q.dirty)}_anyControlsTouched(){return this._anyControls(Q=>Q.touched)}_updatePristine(Q,L){const de=!this._anyControlsDirty(),Xe=this.pristine!==de;this.pristine=de,this._parent&&!Q.onlySelf&&this._parent._updatePristine(Q,L),Xe&&this._events.next(new kt(this.pristine,L))}_updateTouched(Q={},L){this.touched=this._anyControlsTouched(),this._events.next(new jt(this.touched,L)),this._parent&&!Q.onlySelf&&this._parent._updateTouched(Q,L)}_onDisabledChange=[];_registerOnCollectionChange(Q){this._onCollectionChange=Q}_setUpdateStrategy(Q){Bn(Q)&&null!=Q.updateOn&&(this._updateOn=Q.updateOn)}_parentMarkedDirty(Q){return!Q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Q){return null}_assignValidators(Q){this._rawValidators=Array.isArray(Q)?Q.slice():Q,this._composedValidatorFn=function Wn(j){return Array.isArray(j)?Ut(j):j||null}(this._rawValidators)}_assignAsyncValidators(Q){this._rawAsyncValidators=Array.isArray(Q)?Q.slice():Q,this._composedAsyncValidatorFn=function er(j){return Array.isArray(j)?xt(j):j||null}(this._rawAsyncValidators)}}class dn extends In{constructor(Q,L,de){super(nn(L),An(de,L)),this.controls=Q,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(Q,L){return this.controls[Q]?this.controls[Q]:(this.controls[Q]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(Q,L,de={}){this.registerControl(Q,L),this.updateValueAndValidity({emitEvent:de.emitEvent}),this._onCollectionChange()}removeControl(Q,L={}){this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),delete this.controls[Q],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(Q,L,de={}){this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),delete this.controls[Q],L&&this.registerControl(Q,L),this.updateValueAndValidity({emitEvent:de.emitEvent}),this._onCollectionChange()}contains(Q){return this.controls.hasOwnProperty(Q)&&this.controls[Q].enabled}setValue(Q,L={}){hr(this,0,Q),Object.keys(Q).forEach(de=>{br(this,!0,de),this.controls[de].setValue(Q[de],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(Q,L={}){null!=Q&&(Object.keys(Q).forEach(de=>{const Xe=this.controls[de];Xe&&Xe.patchValue(Q[de],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(Q={},L={}){this._forEachChild((de,Xe)=>{de.reset(Q?Q[Xe]:null,{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L,this),this._updateTouched(L,this),this.updateValueAndValidity(L),!1!==L?.emitEvent&&this._events.next(new rn(this))}getRawValue(){return this._reduceChildren({},(Q,L,de)=>(Q[de]=L.getRawValue(),Q))}_syncPendingControls(){let Q=this._reduceChildren(!1,(L,de)=>!!de._syncPendingControls()||L);return Q&&this.updateValueAndValidity({onlySelf:!0}),Q}_forEachChild(Q){Object.keys(this.controls).forEach(L=>{const de=this.controls[L];de&&Q(de,L)})}_setUpControls(){this._forEachChild(Q=>{Q.setParent(this),Q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Q){for(const[L,de]of Object.entries(this.controls))if(this.contains(L)&&Q(de))return!0;return!1}_reduceValue(){return this._reduceChildren({},(L,de,Xe)=>((de.enabled||this.disabled)&&(L[Xe]=de.value),L))}_reduceChildren(Q,L){let de=Q;return this._forEachChild((Xe,on)=>{de=L(de,Xe,on)}),de}_allControlsDisabled(){for(const Q of Object.keys(this.controls))if(this.controls[Q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Q){return this.controls.hasOwnProperty(Q)?this.controls[Q]:null}}class nt extends dn{}const ye=new o.nKC("",{providedIn:"root",factory:()=>We}),We="always";function Ee(j,Q){return[...Q.path,j]}function et(j,Q,L=We){Tn(j,Q),Q.valueAccessor.writeValue(j.value),(j.disabled||"always"===L)&&Q.valueAccessor.setDisabledState?.(j.disabled),function tr(j,Q){Q.valueAccessor.registerOnChange(L=>{j._pendingValue=L,j._pendingChange=!0,j._pendingDirty=!0,"change"===j.updateOn&&Pr(j,Q)})}(j,Q),function zn(j,Q){const L=(de,Xe)=>{Q.valueAccessor.writeValue(de),Xe&&Q.viewToModelUpdate(de)};j.registerOnChange(L),Q._registerOnDestroy(()=>{j._unregisterOnChange(L)})}(j,Q),function Wr(j,Q){Q.valueAccessor.registerOnTouched(()=>{j._pendingTouched=!0,"blur"===j.updateOn&&j._pendingChange&&Pr(j,Q),"submit"!==j.updateOn&&j.markAsTouched()})}(j,Q),function pn(j,Q){if(Q.valueAccessor.setDisabledState){const L=de=>{Q.valueAccessor.setDisabledState(de)};j.registerOnDisabledChange(L),Q._registerOnDestroy(()=>{j._unregisterOnDisabledChange(L)})}}(j,Q)}function bt(j,Q,L=!0){const de=()=>{};Q.valueAccessor&&(Q.valueAccessor.registerOnChange(de),Q.valueAccessor.registerOnTouched(de)),Mn(j,Q),j&&(Q._invokeOnDestroyCallbacks(),j._registerOnCollectionChange(()=>{}))}function zt(j,Q){j.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(Q)})}function Tn(j,Q){const L=Jt(j);null!==Q.validator?j.setValidators(Tt(L,Q.validator)):"function"==typeof L&&j.setValidators([L]);const de=ct(j);null!==Q.asyncValidator?j.setAsyncValidators(Tt(de,Q.asyncValidator)):"function"==typeof de&&j.setAsyncValidators([de]);const Xe=()=>j.updateValueAndValidity();zt(Q._rawValidators,Xe),zt(Q._rawAsyncValidators,Xe)}function Mn(j,Q){let L=!1;if(null!==j){if(null!==Q.validator){const Xe=Jt(j);if(Array.isArray(Xe)&&Xe.length>0){const on=Xe.filter(mn=>mn!==Q.validator);on.length!==Xe.length&&(L=!0,j.setValidators(on))}}if(null!==Q.asyncValidator){const Xe=ct(j);if(Array.isArray(Xe)&&Xe.length>0){const on=Xe.filter(mn=>mn!==Q.asyncValidator);on.length!==Xe.length&&(L=!0,j.setAsyncValidators(on))}}}const de=()=>{};return zt(Q._rawValidators,de),zt(Q._rawAsyncValidators,de),L}function Pr(j,Q){j._pendingDirty&&j.markAsDirty(),j.setValue(j._pendingValue,{emitModelToViewChange:!1}),Q.viewToModelUpdate(j._pendingValue),j._pendingChange=!1}function wn(j,Q){Tn(j,Q)}function Rr(j,Q){if(!j.hasOwnProperty("model"))return!1;const L=j.model;return!!L.isFirstChange()||!Object.is(Q,L.currentValue)}function rr(j,Q){j._syncPendingControls(),Q.forEach(L=>{const de=L.control;"submit"===de.updateOn&&de._pendingChange&&(L.viewToModelUpdate(de._pendingValue),de._pendingChange=!1)})}function xr(j,Q){if(!Q)return null;let L,de,Xe;return Array.isArray(Q),Q.forEach(on=>{on.constructor===ae?L=on:function Mr(j){return Object.getPrototypeOf(j.constructor)===R}(on)?de=on:Xe=on}),Xe||de||L||null}const ao={provide:Cn,useExisting:(0,o.Rfq)(()=>Br)},$r=Promise.resolve();let Br=(()=>{class j extends Cn{callSetDisabledState;get submitted(){return(0,D.O8)(this.submittedReactive)}_submitted=(0,D.EW)(()=>this.submittedReactive());submittedReactive=(0,o.vPA)(!1);_directives=new Set;form;ngSubmit=new i.bkB;options;constructor(L,de,Xe){super(),this.callSetDisabledState=Xe,this.form=new dn({},Ut(L),xt(de))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(L){$r.then(()=>{const de=this._findContainer(L.path);L.control=de.registerControl(L.name,L.control),et(L.control,L,this.callSetDisabledState),L.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(L)})}getControl(L){return this.form.get(L.path)}removeControl(L){$r.then(()=>{const de=this._findContainer(L.path);de&&de.removeControl(L.name),this._directives.delete(L)})}addFormGroup(L){$r.then(()=>{const de=this._findContainer(L.path),Xe=new dn({});wn(Xe,L),de.registerControl(L.name,Xe),Xe.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(L){$r.then(()=>{const de=this._findContainer(L.path);de&&de.removeControl(L.name)})}getFormGroup(L){return this.form.get(L.path)}updateModel(L,de){$r.then(()=>{this.form.get(L.path).setValue(de)})}setValue(L){this.control.setValue(L)}onSubmit(L){return this.submittedReactive.set(!0),rr(this.form,this._directives),this.ngSubmit.emit(L),this.form._events.next(new tn(this.control)),"dialog"===L?.target?.method}onReset(){this.resetForm()}resetForm(L=void 0){this.form.reset(L),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(L){return L.pop(),L.length?this.form.get(L):this.form}static \u0275fac=function(de){return new(de||j)(i.rXU(he,10),i.rXU(Le,10),i.rXU(ye,8))};static \u0275dir=i.FsC({type:j,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(de,Xe){1&de&&i.bIt("submit",function(mn){return Xe.onSubmit(mn)})("reset",function(){return Xe.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[i.Jv_([ao]),i.Vt3]})}return j})();function jr(j,Q){const L=j.indexOf(Q);L>-1&&j.splice(L,1)}function Re(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}const ze=class extends In{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(Q=null,L,de){super(nn(L),An(de,L)),this._applyFormState(Q),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bn(L)&&(L.nonNullable||L.initialValueIsDefault)&&(this.defaultValue=Re(Q)?Q.value:Q)}setValue(Q,L={}){this.value=this._pendingValue=Q,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(de=>de(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(Q,L={}){this.setValue(Q,L)}reset(Q=this.defaultValue,L={}){this._applyFormState(Q),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1,!1!==L?.emitEvent&&this._events.next(new rn(this))}_updateValue(){}_anyControls(Q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Q){this._onChange.push(Q)}_unregisterOnChange(Q){jr(this._onChange,Q)}registerOnDisabledChange(Q){this._onDisabledChange.push(Q)}_unregisterOnDisabledChange(Q){jr(this._onDisabledChange,Q)}_forEachChild(Q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Q){Re(Q)?(this.value=this._pendingValue=Q.value,Q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Q}};let k=(()=>{class j extends Cn{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Ee(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let L;return function(Xe){return(L||(L=i.xGo(j)))(Xe||j)}})();static \u0275dir=i.FsC({type:j,standalone:!1,features:[i.Vt3]})}return j})();const an={provide:ln,useExisting:(0,o.Rfq)(()=>Rn)},un=Promise.resolve();let Rn=(()=>{class j extends ln{_changeDetectorRef;callSetDisabledState;control=new ze;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new i.bkB;constructor(L,de,Xe,on,mn,Hr){super(),this._changeDetectorRef=mn,this.callSetDisabledState=Hr,this._parent=L,this._setValidators(de),this._setAsyncValidators(Xe),this.valueAccessor=xr(0,on)}ngOnChanges(L){if(this._checkForErrors(),!this._registered||"name"in L){if(this._registered&&(this._checkName(),this.formDirective)){const de=L.name.previousValue;this.formDirective.removeControl({name:de,path:this._getPath(de)})}this._setUpControl()}"isDisabled"in L&&this._updateDisabled(L),Rr(L,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){et(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(L){un.then(()=>{this.control.setValue(L,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(L){const de=L.isDisabled.currentValue,Xe=0!==de&&(0,Ce.L39)(de);un.then(()=>{Xe&&!this.control.disabled?this.control.disable():!Xe&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(L){return this._parent?Ee(L,this._parent):[L]}static \u0275fac=function(de){return new(de||j)(i.rXU(Cn,9),i.rXU(he,10),i.rXU(Le,10),i.rXU(V,10),i.rXU(Ce.gRc,8),i.rXU(ye,8))};static \u0275dir=i.FsC({type:j,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[i.Jv_([an]),i.Vt3,i.OA$]})}return j})(),Pn=(()=>{class j{static \u0275fac=function(de){return new(de||j)};static \u0275dir=i.FsC({type:j,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return j})();const Yt={provide:V,useExisting:(0,o.Rfq)(()=>jn),multi:!0};let jn=(()=>{class j extends R{writeValue(L){this.setProperty("value",L??"")}registerOnChange(L){this.onChange=de=>{L(""==de?null:parseFloat(de))}}static \u0275fac=(()=>{let L;return function(Xe){return(L||(L=i.xGo(j)))(Xe||j)}})();static \u0275dir=i.FsC({type:j,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(de,Xe){1&de&&i.bIt("input",function(mn){return Xe.onChange(mn.target.value)})("blur",function(){return Xe.onTouched()})},standalone:!1,features:[i.Jv_([Yt]),i.Vt3]})}return j})();const N=new o.nKC(""),Me={provide:ln,useExisting:(0,o.Rfq)(()=>Nn)};let Nn=(()=>{class j extends ln{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(L){}model;update=new i.bkB;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(L,de,Xe,on,mn){super(),this._ngModelWarningConfig=on,this.callSetDisabledState=mn,this._setValidators(L),this._setAsyncValidators(de),this.valueAccessor=xr(0,Xe)}ngOnChanges(L){if(this._isControlChanged(L)){const de=L.form.previousValue;de&&bt(de,this,!1),et(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Rr(L,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&bt(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_isControlChanged(L){return L.hasOwnProperty("form")}static \u0275fac=function(de){return new(de||j)(i.rXU(he,10),i.rXU(Le,10),i.rXU(V,10),i.rXU(N,8),i.rXU(ye,8))};static \u0275dir=i.FsC({type:j,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[i.Jv_([Me]),i.Vt3,i.OA$]})}return j})();const vr={provide:Cn,useExisting:(0,o.Rfq)(()=>zr)};let zr=(()=>{class j extends Cn{callSetDisabledState;get submitted(){return(0,D.O8)(this._submittedReactive)}set submitted(L){this._submittedReactive.set(L)}_submitted=(0,D.EW)(()=>this._submittedReactive());_submittedReactive=(0,o.vPA)(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new i.bkB;constructor(L,de,Xe){super(),this.callSetDisabledState=Xe,this._setValidators(L),this._setAsyncValidators(de)}ngOnChanges(L){L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Mn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const de=this.form.get(L.path);return et(de,L,this.callSetDisabledState),de.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),de}getControl(L){return this.form.get(L.path)}removeControl(L){bt(L.control||null,L,!1),function Dr(j,Q){const L=j.indexOf(Q);L>-1&&j.splice(L,1)}(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,de){this.form.get(L.path).setValue(de)}onSubmit(L){return this._submittedReactive.set(!0),rr(this.form,this.directives),this.ngSubmit.emit(L),this.form._events.next(new tn(this.control)),"dialog"===L?.target?.method}onReset(){this.resetForm()}resetForm(L=void 0,de={}){this.form.reset(L,de),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(L=>{const de=L.control,Xe=this.form.get(L.path);de!==Xe&&(bt(de||null,L),(j=>j instanceof ze)(Xe)&&(et(Xe,L,this.callSetDisabledState),L.control=Xe))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const de=this.form.get(L.path);wn(de,L),de.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const de=this.form.get(L.path);de&&function $n(j,Q){return Mn(j,Q)}(de,L)&&de.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Tn(this.form,this),this._oldForm&&Mn(this._oldForm,this)}static \u0275fac=function(de){return new(de||j)(i.rXU(he,10),i.rXU(Le,10),i.rXU(ye,8))};static \u0275dir=i.FsC({type:j,selectors:[["","formGroup",""]],hostBindings:function(de,Xe){1&de&&i.bIt("submit",function(mn){return Xe.onSubmit(mn)})("reset",function(){return Xe.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[i.Jv_([vr]),i.Vt3,i.OA$]})}return j})();const Xr={provide:Cn,useExisting:(0,o.Rfq)(()=>oo)};let oo=(()=>{class j extends k{name=null;constructor(L,de,Xe){super(),this._parent=L,this._setValidators(de),this._setAsyncValidators(Xe)}_checkParentType(){Co(this._parent)}static \u0275fac=function(de){return new(de||j)(i.rXU(Cn,13),i.rXU(he,10),i.rXU(Le,10))};static \u0275dir=i.FsC({type:j,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[i.Jv_([Xr]),i.Vt3]})}return j})();const So={provide:Cn,useExisting:(0,o.Rfq)(()=>go)};let go=(()=>{class j extends Cn{_parent;name=null;constructor(L,de,Xe){super(),this._parent=L,this._setValidators(de),this._setAsyncValidators(Xe)}ngOnInit(){Co(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Ee(null==this.name?this.name:this.name.toString(),this._parent)}static \u0275fac=function(de){return new(de||j)(i.rXU(Cn,13),i.rXU(he,10),i.rXU(Le,10))};static \u0275dir=i.FsC({type:j,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[i.Jv_([So]),i.Vt3]})}return j})();function Co(j){return!(j instanceof oo||j instanceof zr||j instanceof go)}const ti={provide:ln,useExisting:(0,o.Rfq)(()=>Ao)};let Ao=(()=>{class j extends ln{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(L){}model;update=new i.bkB;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(L,de,Xe,on,mn){super(),this._ngModelWarningConfig=mn,this._parent=L,this._setValidators(de),this._setAsyncValidators(Xe),this.valueAccessor=xr(0,on)}ngOnChanges(L){this._added||this._setUpControl(),Rr(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return Ee(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(de){return new(de||j)(i.rXU(Cn,13),i.rXU(he,10),i.rXU(Le,10),i.rXU(V,10),i.rXU(N,8))};static \u0275dir=i.FsC({type:j,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[i.Jv_([ti]),i.Vt3,i.OA$]})}return j})();function Xn(j){return"number"==typeof j?j:parseFloat(j)}let xn=(()=>{class j{_validator=Ie;_onChange;_enabled;ngOnChanges(L){if(this.inputName in L){const de=this.normalizeInput(L[this.inputName].currentValue);this._enabled=this.enabled(de),this._validator=this._enabled?this.createValidator(de):Ie,this._onChange&&this._onChange()}}validate(L){return this._validator(L)}registerOnValidatorChange(L){this._onChange=L}enabled(L){return null!=L}static \u0275fac=function(de){return new(de||j)};static \u0275dir=i.FsC({type:j,features:[i.OA$]})}return j})();const Sr={provide:he,useExisting:(0,o.Rfq)(()=>Cr),multi:!0};let Cr=(()=>{class j extends xn{max;inputName="max";normalizeInput=L=>Xn(L);createValidator=L=>we(L);static \u0275fac=(()=>{let L;return function(Xe){return(L||(L=i.xGo(j)))(Xe||j)}})();static \u0275dir=i.FsC({type:j,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(de,Xe){2&de&&i.BMQ("max",Xe._enabled?Xe.max:null)},inputs:{max:"max"},standalone:!1,features:[i.Jv_([Sr]),i.Vt3]})}return j})();const pr={provide:he,useExisting:(0,o.Rfq)(()=>Kr),multi:!0};let Kr=(()=>{class j extends xn{min;inputName="min";normalizeInput=L=>Xn(L);createValidator=L=>Fe(L);static \u0275fac=(()=>{let L;return function(Xe){return(L||(L=i.xGo(j)))(Xe||j)}})();static \u0275dir=i.FsC({type:j,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(de,Xe){2&de&&i.BMQ("min",Xe._enabled?Xe.min:null)},inputs:{min:"min"},standalone:!1,features:[i.Jv_([pr]),i.Vt3]})}return j})();const Ir={provide:he,useExisting:(0,o.Rfq)(()=>Qr),multi:!0};let Qr=(()=>{class j extends xn{required;inputName="required";normalizeInput=Ce.L39;createValidator=L=>Oe;enabled(L){return L}static \u0275fac=(()=>{let L;return function(Xe){return(L||(L=i.xGo(j)))(Xe||j)}})();static \u0275dir=i.FsC({type:j,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(de,Xe){2&de&&i.BMQ("required",Xe._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[i.Jv_([Ir]),i.Vt3]})}return j})();const it={provide:he,useExisting:(0,o.Rfq)(()=>st),multi:!0};let st=(()=>{class j extends xn{pattern;inputName="pattern";normalizeInput=L=>L;createValidator=L=>ge(L);static \u0275fac=(()=>{let L;return function(Xe){return(L||(L=i.xGo(j)))(Xe||j)}})();static \u0275dir=i.FsC({type:j,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(de,Xe){2&de&&i.BMQ("pattern",Xe._enabled?Xe.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[i.Jv_([it]),i.Vt3]})}return j})(),Dt=(()=>{class j{static \u0275fac=function(de){return new(de||j)};static \u0275mod=i.$C({type:j});static \u0275inj=o.G2t({})}return j})();class Rt extends In{constructor(Q,L,de){super(nn(L),An(de,L)),this.controls=Q,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(Q){return this.controls[this._adjustIndex(Q)]}push(Q,L={}){Array.isArray(Q)?Q.forEach(de=>{this.controls.push(de),this._registerControl(de)}):(this.controls.push(Q),this._registerControl(Q)),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(Q,L,de={}){this.controls.splice(Q,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:de.emitEvent})}removeAt(Q,L={}){let de=this._adjustIndex(Q);de<0&&(de=0),this.controls[de]&&this.controls[de]._registerOnCollectionChange(()=>{}),this.controls.splice(de,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(Q,L,de={}){let Xe=this._adjustIndex(Q);Xe<0&&(Xe=0),this.controls[Xe]&&this.controls[Xe]._registerOnCollectionChange(()=>{}),this.controls.splice(Xe,1),L&&(this.controls.splice(Xe,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:de.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Q,L={}){hr(this,0,Q),Q.forEach((de,Xe)=>{br(this,!1,Xe),this.at(Xe).setValue(de,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(Q,L={}){null!=Q&&(Q.forEach((de,Xe)=>{this.at(Xe)&&this.at(Xe).patchValue(de,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(Q=[],L={}){this._forEachChild((de,Xe)=>{de.reset(Q[Xe],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L,this),this._updateTouched(L,this),this.updateValueAndValidity(L),!1!==L?.emitEvent&&this._events.next(new rn(this))}getRawValue(){return this.controls.map(Q=>Q.getRawValue())}clear(Q={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Q.emitEvent}))}_adjustIndex(Q){return Q<0?Q+this.length:Q}_syncPendingControls(){let Q=this.controls.reduce((L,de)=>!!de._syncPendingControls()||L,!1);return Q&&this.updateValueAndValidity({onlySelf:!0}),Q}_forEachChild(Q){this.controls.forEach((L,de)=>{Q(L,de)})}_updateValue(){this.value=this.controls.filter(Q=>Q.enabled||this.disabled).map(Q=>Q.value)}_anyControls(Q){return this.controls.some(L=>L.enabled&&Q(L))}_setUpControls(){this._forEachChild(Q=>this._registerControl(Q))}_allControlsDisabled(){for(const Q of this.controls)if(Q.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Q){Q.setParent(this),Q._registerOnCollectionChange(this._onCollectionChange)}_find(Q){return this.at(Q)??null}}function Sn(j){return!!j&&(void 0!==j.asyncValidators||void 0!==j.validators||void 0!==j.updateOn)}let gn=(()=>{class j{useNonNullable=!1;get nonNullable(){const L=new j;return L.useNonNullable=!0,L}group(L,de=null){const Xe=this._reduceControls(L);let on={};return Sn(de)?on=de:null!==de&&(on.validators=de.validator,on.asyncValidators=de.asyncValidator),new dn(Xe,on)}record(L,de=null){const Xe=this._reduceControls(L);return new nt(Xe,de)}control(L,de,Xe){let on={};return this.useNonNullable?(Sn(de)?on=de:(on.validators=de,on.asyncValidators=Xe),new ze(L,{...on,nonNullable:!0})):new ze(L,de,Xe)}array(L,de,Xe){const on=L.map(mn=>this._createControl(mn));return new Rt(on,de,Xe)}_reduceControls(L){const de={};return Object.keys(L).forEach(Xe=>{de[Xe]=this._createControl(L[Xe])}),de}_createControl(L){return L instanceof ze||L instanceof In?L:Array.isArray(L)?this.control(L[0],L.length>1?L[1]:null,L.length>2?L[2]:null):this.control(L)}static \u0275fac=function(de){return new(de||j)};static \u0275prov=o.jDH({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})(),vo=(()=>{class j{static withConfig(L){return{ngModule:j,providers:[{provide:ye,useValue:L.callSetDisabledState??We}]}}static \u0275fac=function(de){return new(de||j)};static \u0275mod=i.$C({type:j});static \u0275inj=o.G2t({imports:[Dt]})}return j})(),Fr=(()=>{class j{static withConfig(L){return{ngModule:j,providers:[{provide:N,useValue:L.warnOnNgModelWithFormControl??"always"},{provide:ye,useValue:L.callSetDisabledState??We}]}}static \u0275fac=function(de){return new(de||j)};static \u0275mod=i.$C({type:j});static \u0275inj=o.G2t({imports:[Dt]})}return j})()},4356($t,ot,b){"use strict";b.d(ot,{h:()=>ie});var i=b(467),o=b(2084),D=b(4412),Ce=b(5312),De=b(2615),B=b(5029),Pe=b(918),Ge=b(3205),pe=b(8863);let ie=(()=>{var Ae;class l{constructor(m,y,v,M){this.supabaseService=m,this.sharedDataService=y,this.auth=v,this.monitoringLog=M,this.SPECIES_TABLE="custom_species",this.LOCAL_SPECIES_FILE="local_custom_species.json",this.SYNC_TIMESTAMP_FILE="species_last_sync.json",this.PENDING_REQUESTS_FILE="pending_species_requests.json",this.MAX_RETRY_ATTEMPTS=10,this.RETRY_DELAYS=[5e3,15e3,3e4,6e4,3e5,6e5,18e5,36e5,72e5,144e5],this.speciesSubject=new D.t([]),this.species$=this.speciesSubject.asObservable(),this.pendingRequests=[],console.log("\u{1f33f} SpeciesSyncService: Initializing..."),this.initializeSpecies(),this.loadPendingRequests(),window.addEventListener("online",()=>{console.log("\u{1f33f} SpeciesSyncService: ONLINE event detected - triggering sync"),this.syncWithServer().catch(R=>console.error("\u{1f33f} SpeciesSyncService: sync failed:",R)),this.processPendingRequests().catch(R=>console.error("\u{1f33f} SpeciesSyncService: Failed to process pending requests:",R))}),setInterval(()=>{this.syncWithServer().catch(R=>console.error("\u{1f33f} SpeciesSyncService: Periodic sync failed:",R))},3e5),setInterval(()=>{this.processPendingRequests().catch(R=>console.error("\u{1f33f} SpeciesSyncService: Failed to process pending requests:",R))},6e4)}getClient(){return this.supabaseService.getClient()}initializeSpecies(){var m=this;return(0,i.A)(function*(){try{const y=yield m.loadLocalSpecies();0===y.length?yield m.syncWithServer():m.speciesSubject.next(y)}catch(y){console.error("\u{1f33f} SpeciesSyncService: Error initializing species:",y)}})()}loadLocalSpecies(){var m=this;return(0,i.A)(function*(){try{return(yield m.sharedDataService.readJsonFile(m.LOCAL_SPECIES_FILE))||[]}catch(y){return console.error("\u{1f33f} SpeciesSyncService: Error loading local species:",y),[]}})()}saveLocalSpecies(m){var y=this;return(0,i.A)(function*(){try{yield y.sharedDataService.writeJsonFile(y.LOCAL_SPECIES_FILE,m)}catch(v){console.error("\u{1f33f} SpeciesSyncService: Error saving local species:",v)}})()}formatTimestamp(){const m=new Date;return`${String(m.getDate()).padStart(2,"0")}${String(m.getMonth()+1).padStart(2,"0")}${m.getFullYear()}_${String(m.getHours()).padStart(2,"0")}${String(m.getMinutes()).padStart(2,"0")}${String(m.getSeconds()).padStart(2,"0")}`}uploadSpeciesPhoto(m,y,v){var M=this;return(0,i.A)(function*(){try{const R=m.name.split(".").pop(),V=(y||"new_species").trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""),ce=new Date,z=`${String(ce.getDate()).padStart(2,"0")}${String(ce.getMonth()+1).padStart(2,"0")}${ce.getFullYear()}`,K=`species-photos/${V}_photo${v}_${z}.${R}`,{error:le}=yield M.getClient().storage.from("new-species-images").upload(K,m);if(le)throw le;const{data:{publicUrl:ae}}=M.getClient().storage.from("new-species-images").getPublicUrl(K);return console.log("\u{1f33f} SpeciesSyncService: Photo uploaded:",ae),ae}catch(R){throw console.error("\u{1f33f} SpeciesSyncService: Error uploading photo:",R),R}})()}addNewSpecies(m){var y=this;return(0,i.A)(function*(){const v=y.auth.getCurrentUser(),M=v?.level||1,R=M<4,V={...m,id:y.generateSpeciesId(),added_at:(0,o.E)(),synced:!1,requires_approval:R,approval_requested:R,approved:!R};try{const z=[...yield y.loadLocalSpecies(),V];return yield y.saveLocalSpecies(z),y.speciesSubject.next(z),M>=4?(navigator.onLine?y.hasBase64Photos(V)?y.uploadPendingPhotos(V).then(function(){var K=(0,i.A)(function*(le){yield y.updateLocalSpeciesPhotos(V.id,le.image_paths),yield y.syncSingleSpeciesToServer(le)});return function(le){return K.apply(this,arguments)}}()).catch(K=>{console.error("\u{1f33f} SpeciesSyncService: Error uploading L4 photos:",K),y.addToPendingQueue(V)}):y.syncSingleSpeciesToServer(V).catch(K=>{console.error("\u{1f33f} SpeciesSyncService: Error syncing new species to server:",K),y.addToPendingQueue(V)}):(console.log("\u{1f33f} SpeciesSyncService: Device offline, adding species to pending queue"),y.addToPendingQueue(V)),console.log("\u{1f33f} SpeciesSyncService: L4 species added:",V.vernacular_name||V.id)):(console.log(`\u{1f33f} SpeciesSyncService: L${M} species added locally (approval required):`,V.vernacular_name||V.id),navigator.onLine&&y.hasBase64Photos(V)?y.uploadPendingPhotos(V).then(K=>{y.updateLocalSpeciesPhotos(V.id,K.image_paths),y.requestSpeciesApproval(K,M).catch(le=>{console.error("\u{1f33f} SpeciesSyncService: Error requesting species approval:",le)})}).catch(K=>{console.error("\u{1f33f} SpeciesSyncService: Error uploading photos before approval:",K),y.requestSpeciesApproval(V,M).catch(le=>{console.error("\u{1f33f} SpeciesSyncService: Error requesting species approval:",le)})}):y.requestSpeciesApproval(V,M).catch(K=>{console.error("\u{1f33f} SpeciesSyncService: Error requesting species approval:",K)})),y.monitoringLog.recordSpeciesAdded(v?.username||v?.email||"unknown",V.vernacular_name||V.common_name||V.scientific_name||"Unnamed",V.type,R),V}catch(ce){throw console.error("\u{1f33f} SpeciesSyncService: Error adding new species:",ce),ce}})()}syncSingleSpeciesToServer(m){var y=this;return(0,i.A)(function*(){try{const v=y.getClient(),M={id:m.id,scientific_name:m.scientific_name,vernacular_name:m.vernacular_name,common_name:m.common_name,creole_name:m.creole_name,description:m.description,image_paths:m.image_paths,added_by:m.added_by,added_at:m.added_at,requires_approval:m.requires_approval||!1,approval_requested:m.approval_requested||!1,approved:void 0===m.approved||m.approved,type:m.type},{data:R,error:V}=yield v.from(y.SPECIES_TABLE).upsert(M,{onConflict:"id"}).select().single();if(V)throw console.error("\u{1f33f} SpeciesSyncService: Supabase error:",V),V;const z=(yield y.loadLocalSpecies()).map(te=>te.id===m.id?{...te,id:R.id,synced:!0}:te);yield y.saveLocalSpecies(z),y.speciesSubject.next(z),console.log("\u{1f33f} SpeciesSyncService: Species synced to server:",m.vernacular_name||m.id)}catch(v){throw console.error("\u{1f33f} SpeciesSyncService: Error syncing species to server:",v),v}})()}forceSync(){var m=this;return(0,i.A)(function*(){yield m.syncWithServer()})()}syncWithServer(){var m=this;return(0,i.A)(function*(){try{if(!navigator.onLine)return;const y=m.getClient(),v=yield m.getLastSyncTimestamp();let M=y.from(m.SPECIES_TABLE).select("*");v&&(M=M.gt("added_at",v));const{data:R,error:V}=yield M;if(V)return void console.error("\u{1f33f} SpeciesSyncService: Error fetching from server:",V);if(R&&R.length>0){const ce=yield m.loadLocalSpecies(),z=R.map(K=>({id:K.id,scientific_name:K.scientific_name,vernacular_name:K.vernacular_name,common_name:K.common_name,creole_name:K.creole_name,description:K.description,image_paths:K.image_paths||[],added_by:K.added_by,added_at:K.added_at,synced:!0,requires_approval:K.requires_approval||!1,approval_requested:K.approval_requested||!1,approved:void 0===K.approved||K.approved,type:K.type})),te=m.mergeSpecies(ce,z);yield m.saveLocalSpecies(te),m.speciesSubject.next(te),console.log("\u{1f33f} SpeciesSyncService: Synced",R.length,"species from server")}yield m.syncUnsyncedSpecies(),yield m.cleanupOrphanedSpecies(),yield m.updateLastSyncTimestamp()}catch(y){console.error("\u{1f33f} SpeciesSyncService: Error syncing with server:",y)}})()}cleanupOrphanedSpecies(){var m=this;return(0,i.A)(function*(){try{const y=m.getClient(),v=yield m.loadLocalSpecies();if(0===v.length)return;const{data:M,error:R}=yield y.from(m.SPECIES_TABLE).select("id");if(R)return void console.error("\u{1f33f} SpeciesSyncService: Error fetching server species:",R);const V=new Set;M?.forEach(z=>V.add(z.id));const ce=v.filter(z=>!(z.id&&!V.has(z.id)&&z.synced));ce.length!==v.length&&(yield m.saveLocalSpecies(ce),m.speciesSubject.next(ce),console.log("\u{1f33f} SpeciesSyncService: Cleaned up",v.length-ce.length,"orphaned species"))}catch(y){console.error("\u{1f33f} SpeciesSyncService: Error cleaning up orphaned species:",y)}})()}syncUnsyncedSpecies(){var m=this;return(0,i.A)(function*(){const y=yield m.loadLocalSpecies(),M=m.auth.getCurrentUser()?.level||1,R=y.filter(V=>!V.synced&&(!0===V.approved||M>=4));for(const V of R)yield m.syncSingleSpeciesToServer(V)})()}mergeSpecies(m,y){const v=new Map;return m.forEach(M=>v.set(M.id,M)),y.forEach(M=>v.set(M.id,M)),Array.from(v.values())}getLastSyncTimestamp(){var m=this;return(0,i.A)(function*(){try{return(yield m.sharedDataService.readJsonFile(m.SYNC_TIMESTAMP_FILE))?.timestamp||null}catch{return null}})()}updateLastSyncTimestamp(){var m=this;return(0,i.A)(function*(){try{yield m.sharedDataService.writeJsonFile(m.SYNC_TIMESTAMP_FILE,{timestamp:(0,o.E)()})}catch(y){console.error("\u{1f33f} SpeciesSyncService: Error updating sync timestamp:",y)}})()}generateSpeciesId(){return`species_${this.formatTimestamp()}_${Math.random().toString(36).substr(2,4)}`}requestSpeciesApproval(m,y){var v=this;return(0,i.A)(function*(){try{const M=v.auth.getCurrentUser();if(!M)throw new Error("User not authenticated");const R=`${Ce.c.supabase.url}/functions/v1/send-species-approval-request`,V=yield fetch(R,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ce.c.supabase.anonKey}`},body:JSON.stringify({requesterEmail:M.email,requesterUsername:M.username||M.email,speciesName:m.vernacular_name||"Unnamed species",speciesDescription:m.description,imagePaths:m.image_paths,speciesType:m.type,commonName:m.common_name||"",creoleName:m.creole_name||"",scientificName:m.scientific_name||"",reason:`L${y} user submitting new ${m.type} species for approval`,timestamp:(0,o.E)()})});if(!V.ok){const z=yield V.json();throw new Error(z.error||"Failed to submit approval request")}const ce=yield V.json();console.log("\u{1f33f} SpeciesSyncService: Species approval request submitted successfully:",ce.request_id)}catch(M){console.error("\u{1f33f} SpeciesSyncService: Error requesting species approval:",M)}})()}updateSpecies(m,y){var v=this;return(0,i.A)(function*(){if((v.auth.getCurrentUser()?.level||1)<4)throw new Error("Only L4+ users can edit species");try{const V=yield v.loadLocalSpecies(),ce=V.findIndex(K=>K.id===m);if(-1===ce)throw new Error("Species not found");const te={...V[ce],...y,synced:!1};if(V[ce]=te,yield v.saveLocalSpecies(V),v.speciesSubject.next(V),navigator.onLine)if(v.hasBase64Photos(te)){const K=yield v.uploadPendingPhotos(te);yield v.updateLocalSpeciesPhotos(m,K.image_paths),yield v.syncSingleSpeciesToServer(K)}else yield v.syncSingleSpeciesToServer(te);else console.log("\u{1f33f} SpeciesSyncService: Offline - species update queued for sync"),v.addToPendingQueue(te);return console.log("\u{1f33f} SpeciesSyncService: Species updated:",te.vernacular_name||te.id),te}catch(V){throw console.error("\u{1f33f} SpeciesSyncService: Error updating species:",V),V}})()}deleteSpecies(m){var y=this;return(0,i.A)(function*(){if((y.auth.getCurrentUser()?.level||1)<4)throw new Error("Only L4+ users can delete species");try{const R=yield y.loadLocalSpecies(),V=R.find(z=>z.id===m),ce=R.filter(z=>z.id!==m);if(yield y.saveLocalSpecies(ce),y.speciesSubject.next(ce),navigator.onLine){const{error:z}=yield y.getClient().from(y.SPECIES_TABLE).delete().eq("id",m);if(z&&console.error("\u{1f33f} SpeciesSyncService: Error deleting from server:",z),V?.image_paths?.length){const te=V.image_paths.filter(K=>K.includes("new-species-images/")).map(K=>K.split("new-species-images/")[1]);if(te.length>0){const{error:K}=yield y.getClient().storage.from("new-species-images").remove(te);K?console.error("\u{1f33f} SpeciesSyncService: Error deleting images from storage:",K):console.log("\u{1f33f} SpeciesSyncService: Deleted",te.length,"images from storage")}}}console.log("\u{1f33f} SpeciesSyncService: Species deleted:",m)}catch(R){throw console.error("\u{1f33f} SpeciesSyncService: Error deleting species:",R),R}})()}getAllSpecies(m){var y=this;return(0,i.A)(function*(){const v=yield y.loadLocalSpecies(),M=y.auth.getCurrentUser(),R=M?.level||1,V=M?.email||"",ce=v.filter(z=>z.type===m);return R>=4?ce:ce.filter(z=>!0===z.approved||void 0===z.approved&&!z.requires_approval||z.added_by===V)})()}speciesExists(m,y){var v=this;return(0,i.A)(function*(){return(yield v.loadLocalSpecies()).some(R=>R.type===y&&(R.vernacular_name?.toLowerCase()===m.toLowerCase()||R.scientific_name?.toLowerCase()===m.toLowerCase()))})()}loadPendingRequests(){var m=this;return(0,i.A)(function*(){try{const y=yield m.sharedDataService.readJsonFile(m.PENDING_REQUESTS_FILE);y&&(m.pendingRequests=y,console.log(`\u{1f33f} SpeciesSyncService: Loaded ${m.pendingRequests.length} pending requests`),m.processPendingRequests().catch(v=>console.error("\u{1f33f} SpeciesSyncService: Error processing pending requests:",v)))}catch{console.log("\u{1f33f} SpeciesSyncService: No pending requests file found"),m.pendingRequests=[]}})()}savePendingRequests(){var m=this;return(0,i.A)(function*(){try{yield m.sharedDataService.writeJsonFile(m.PENDING_REQUESTS_FILE,m.pendingRequests)}catch(y){console.error("\u{1f33f} SpeciesSyncService: Error saving pending requests:",y)}})()}addToPendingQueue(m){const y={id:this.generateSpeciesId(),timestamp:Date.now(),species:m,retryCount:0,maxRetries:this.MAX_RETRY_ATTEMPTS,nextRetryTime:Date.now()+this.RETRY_DELAYS[0]};this.pendingRequests.push(y),this.savePendingRequests(),console.log(`\u{1f33f} SpeciesSyncService: Added species to pending queue: ${m.vernacular_name||m.id}`)}processPendingRequests(){var m=this;return(0,i.A)(function*(){if(!navigator.onLine||0===m.pendingRequests.length)return;const y=Date.now(),v=m.pendingRequests.filter(M=>M.nextRetryTime<=y);if(0!==v.length){console.log(`\u{1f33f} SpeciesSyncService: Processing ${v.length} pending requests`);for(const M of v)try{const R=yield m.uploadPendingPhotos(M.species);yield m.syncSingleSpeciesToServer(R),yield m.updateLocalSpeciesPhotos(M.species.id,R.image_paths),m.pendingRequests=m.pendingRequests.filter(V=>V.id!==M.id),console.log(`\u{1f33f} SpeciesSyncService: Successfully synced pending species: ${M.species.vernacular_name||M.species.id}`)}catch(R){if(console.error(`\u{1f33f} SpeciesSyncService: Failed to sync pending species ${M.species.vernacular_name||M.species.id}:`,R),M.retryCount++,M.retryCount>=M.maxRetries)m.pendingRequests=m.pendingRequests.filter(V=>V.id!==M.id),console.error(`\u{1f33f} SpeciesSyncService: Max retries reached for species ${M.species.vernacular_name||M.species.id}, removing from queue`);else{const V=Math.min(M.retryCount,m.RETRY_DELAYS.length-1);M.nextRetryTime=Date.now()+m.RETRY_DELAYS[V]}}yield m.savePendingRequests()}})()}isBase64Image(m){return!!m&&m.startsWith("data:image")}uploadPendingPhotos(m){var y=this;return(0,i.A)(function*(){const v={...m},M=[];for(let R=0;R<v.image_paths.length;R++){const V=v.image_paths[R];if(y.isBase64Image(V))try{console.log(`\u{1f33f} SpeciesSyncService: Uploading pending photo ${R+1} for ${m.vernacular_name||m.id}`);const ce=m.scientific_name||m.vernacular_name||m.common_name||m.creole_name||"new_species",z=yield y.uploadBase64Image(V,ce,R);M.push(z)}catch(ce){throw console.error(`\u{1f33f} SpeciesSyncService: Failed to upload photo ${R+1}:`,ce),ce}else M.push(V)}return v.image_paths=M,v})()}uploadBase64Image(m,y,v){var M=this;return(0,i.A)(function*(){try{const V=yield(yield fetch(m)).blob(),ce=y.trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"")||"new_species",z=new Date,te=`${String(z.getDate()).padStart(2,"0")}${String(z.getMonth()+1).padStart(2,"0")}${z.getFullYear()}`,K=V.type.split("/")[1]||"jpg",ae=`species-photos/${ce}_photo${v}_${te}.${K}`,{error:ve}=yield M.getClient().storage.from("new-species-images").upload(ae,V);if(ve)throw ve;const{data:{publicUrl:Ne}}=M.getClient().storage.from("new-species-images").getPublicUrl(ae);return console.log("\u{1f33f} SpeciesSyncService: Uploaded photo to:",Ne),Ne}catch(R){throw console.error("\u{1f33f} SpeciesSyncService: Error uploading base64 image:",R),R}})()}updateLocalSpeciesPhotos(m,y){var v=this;return(0,i.A)(function*(){try{const R=(yield v.loadLocalSpecies()).map(V=>V.id===m?{...V,image_paths:y}:V);yield v.saveLocalSpecies(R),v.speciesSubject.next(R)}catch(M){console.error("\u{1f33f} SpeciesSyncService: Error updating local species photos:",M)}})()}uploadOrQueuePhoto(m,y){var v=this;return(0,i.A)(function*(){if(!navigator.onLine)return console.log("\u{1f33f} SpeciesSyncService: Offline - storing photo as base64 for later upload"),yield v.fileToBase64(m);try{return yield v.uploadSpeciesPhoto(m,y,0)}catch(M){return console.warn("\u{1f33f} SpeciesSyncService: Online upload failed, storing as base64:",M),yield v.fileToBase64(m)}})()}fileToBase64(m){return new Promise((y,v)=>{const M=new FileReader;M.onload=()=>y(M.result),M.onerror=()=>v(new Error("Failed to read file")),M.readAsDataURL(m)})}hasBase64Photos(m){return m.image_paths.some(y=>this.isBase64Image(y))}static#e=Ae=()=>(this.\u0275fac=function(y){return new(y||l)(De.KVO(B.L),De.KVO(Pe.H),De.KVO(Ge.N),De.KVO(pe.u))},this.\u0275prov=De.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}))}return Ae(),l})()},4360($t,ot,b){"use strict";b.d(ot,{_:()=>o});var i=b(7707);function o(Ce,De,B,Pe,Ge){return new D(Ce,De,B,Pe,Ge)}class D extends i.vU{constructor(De,B,Pe,Ge,pe,ie){super(De),this.onFinalize=pe,this.shouldUnsubscribe=ie,this._next=B?function(Ae){try{B(Ae)}catch(l){De.error(l)}}:super._next,this._error=Ge?function(Ae){try{Ge(Ae)}catch(l){De.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(Ae){De.error(Ae)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var De;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:B}=this;super.unsubscribe(),!B&&(null===(De=this.onFinalize)||void 0===De||De.call(this))}}}},4412($t,ot,b){"use strict";b.d(ot,{t:()=>o});var i=b(1413);class o extends i.B{constructor(Ce){super(),this._value=Ce}get value(){return this.getValue()}_subscribe(Ce){const De=super._subscribe(Ce);return!De.closed&&Ce.next(this._value),De}getValue(){const{hasError:Ce,thrownError:De,_value:B}=this;if(Ce)throw De;return this._throwIfClosed(),B}next(Ce){super.next(this._value=Ce)}}},4540($t,ot,b){"use strict";var i=b(7303),o=b(2512),D=b(2615),Ce=b(177),De=b(2200),B=b(3664),Pe=b(7705);class Ge{_doc;constructor(_){this._doc=_}manager}let pe=(()=>{class F extends Ge{constructor(k){super(k)}supports(k){return!0}addEventListener(k,C,O,H){return k.addEventListener(C,O,H),()=>this.removeEventListener(k,C,O,H)}removeEventListener(k,C,O,H){return k.removeEventListener(C,O,H)}static \u0275fac=function(C){return new(C||F)(D.KVO(D.qQL))};static \u0275prov=D.jDH({token:F,factory:F.\u0275fac})}return F})();const ie=new D.nKC("");let Ae=(()=>{class F{_zone;_plugins;_eventNameToPlugin=new Map;constructor(k,C){this._zone=C,k.forEach(Ue=>{Ue.manager=this});const O=k.filter(Ue=>!(Ue instanceof pe));this._plugins=O.slice().reverse();const H=k.find(Ue=>Ue instanceof pe);H&&this._plugins.push(H)}addEventListener(k,C,O,H){return this._findPluginFor(C).addEventListener(k,C,O,H)}getZone(){return this._zone}_findPluginFor(k){let C=this._eventNameToPlugin.get(k);if(C)return C;if(C=this._plugins.find(H=>H.supports(k)),!C)throw new D.buA(5101,!1);return this._eventNameToPlugin.set(k,C),C}static \u0275fac=function(C){return new(C||F)(D.KVO(ie),D.KVO(B.SKi))};static \u0275prov=D.jDH({token:F,factory:F.\u0275fac})}return F})();const l="ng-app-id";function p(F){for(const _ of F)_.remove()}function m(F,_){const k=_.createElement("style");return k.textContent=F,k}function v(F,_){const k=_.createElement("link");return k.setAttribute("rel","stylesheet"),k.setAttribute("href",F),k}let M=(()=>{class F{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(k,C,O,H={}){this.doc=k,this.appId=C,this.nonce=O,function y(F,_,k,C){const O=F.head?.querySelectorAll(`style[${l}="${_}"],link[${l}="${_}"]`);if(O)for(const H of O)H.removeAttribute(l),H instanceof HTMLLinkElement?C.set(H.href.slice(H.href.lastIndexOf("/")+1),{usage:0,elements:[H]}):H.textContent&&k.set(H.textContent,{usage:0,elements:[H]})}(k,C,this.inline,this.external),this.hosts.add(k.head)}addStyles(k,C){for(const O of k)this.addUsage(O,this.inline,m);C?.forEach(O=>this.addUsage(O,this.external,v))}removeStyles(k,C){for(const O of k)this.removeUsage(O,this.inline);C?.forEach(O=>this.removeUsage(O,this.external))}addUsage(k,C,O){const H=C.get(k);H?H.usage++:C.set(k,{usage:1,elements:[...this.hosts].map(Ue=>this.addElement(Ue,O(k,this.doc)))})}removeUsage(k,C){const O=C.get(k);O&&(O.usage--,O.usage<=0&&(p(O.elements),C.delete(k)))}ngOnDestroy(){for(const[,{elements:k}]of[...this.inline,...this.external])p(k);this.hosts.clear()}addHost(k){this.hosts.add(k);for(const[C,{elements:O}]of this.inline)O.push(this.addElement(k,m(C,this.doc)));for(const[C,{elements:O}]of this.external)O.push(this.addElement(k,v(C,this.doc)))}removeHost(k){this.hosts.delete(k)}addElement(k,C){return this.nonce&&C.setAttribute("nonce",this.nonce),k.appendChild(C)}static \u0275fac=function(C){return new(C||F)(D.KVO(D.qQL),D.KVO(B.sZ2),D.KVO(B.BIS,8),D.KVO(B.Agw))};static \u0275prov=D.jDH({token:F,factory:F.\u0275fac})}return F})();const R={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},V=/%COMP%/g,ve=new D.nKC("",{providedIn:"root",factory:()=>!0});function Le(F,_){return _.map(k=>k.replace(V,F))}let Ke=(()=>{class F{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(k,C,O,H,Ue,ft,pt=null,an=null){this.eventManager=k,this.sharedStylesHost=C,this.appId=O,this.removeStylesOnCompDestroy=H,this.doc=Ue,this.ngZone=ft,this.nonce=pt,this.tracingService=an,this.platformIsServer=!1,this.defaultRenderer=new Fe(k,Ue,ft,this.platformIsServer,this.tracingService)}createRenderer(k,C){if(!k||!C)return this.defaultRenderer;const O=this.getOrCreateRenderer(k,C);return O instanceof q?O.applyToHost(k):O instanceof be&&O.applyStyles(),O}getOrCreateRenderer(k,C){const O=this.rendererByCompId;let H=O.get(C.id);if(!H){const Ue=this.doc,ft=this.ngZone,pt=this.eventManager,an=this.sharedStylesHost,un=this.removeStylesOnCompDestroy,Rn=this.platformIsServer,En=this.tracingService;switch(C.encapsulation){case B.gXe.Emulated:H=new q(pt,an,C,this.appId,un,Ue,ft,Rn,En);break;case B.gXe.ShadowDom:return new Ve(pt,an,k,C,Ue,ft,this.nonce,Rn,En);default:H=new be(pt,an,C,un,Ue,ft,Rn,En)}O.set(C.id,H)}return H}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(k){this.rendererByCompId.delete(k)}static \u0275fac=function(C){return new(C||F)(D.KVO(Ae),D.KVO(M),D.KVO(B.sZ2),D.KVO(ve),D.KVO(D.qQL),D.KVO(B.SKi),D.KVO(B.BIS),D.KVO(B.a8H,8))};static \u0275prov=D.jDH({token:F,factory:F.\u0275fac})}return F})();class Fe{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(_,k,C,O,H){this.eventManager=_,this.doc=k,this.ngZone=C,this.platformIsServer=O,this.tracingService=H}destroy(){}destroyNode=null;createElement(_,k){return k?this.doc.createElementNS(R[k]||k,_):this.doc.createElement(_)}createComment(_){return this.doc.createComment(_)}createText(_){return this.doc.createTextNode(_)}appendChild(_,k){(Ye(_)?_.content:_).appendChild(k)}insertBefore(_,k,C){_&&(Ye(_)?_.content:_).insertBefore(k,C)}removeChild(_,k){k.remove()}selectRootElement(_,k){let C="string"==typeof _?this.doc.querySelector(_):_;if(!C)throw new D.buA(-5104,!1);return k||(C.textContent=""),C}parentNode(_){return _.parentNode}nextSibling(_){return _.nextSibling}setAttribute(_,k,C,O){if(O){k=O+":"+k;const H=R[O];H?_.setAttributeNS(H,k,C):_.setAttribute(k,C)}else _.setAttribute(k,C)}removeAttribute(_,k,C){if(C){const O=R[C];O?_.removeAttributeNS(O,k):_.removeAttribute(`${C}:${k}`)}else _.removeAttribute(k)}addClass(_,k){_.classList.add(k)}removeClass(_,k){_.classList.remove(k)}setStyle(_,k,C,O){O&(B.czy.DashCase|B.czy.Important)?_.style.setProperty(k,C,O&B.czy.Important?"important":""):_.style[k]=C}removeStyle(_,k,C){C&B.czy.DashCase?_.style.removeProperty(k):_.style[k]=""}setProperty(_,k,C){null!=_&&(_[k]=C)}setValue(_,k){_.nodeValue=k}listen(_,k,C,O){if("string"==typeof _&&!(_=(0,i.rb)().getGlobalEventTarget(this.doc,_)))throw new D.buA(5102,!1);let H=this.decoratePreventDefault(C);return this.tracingService?.wrapEventListener&&(H=this.tracingService.wrapEventListener(_,k,H)),this.eventManager.addEventListener(_,k,H,O)}decoratePreventDefault(_){return k=>{if("__ngUnwrap__"===k)return _;!1===_(k)&&k.preventDefault()}}}function Ye(F){return"TEMPLATE"===F.tagName&&void 0!==F.content}class Ve extends Fe{sharedStylesHost;hostEl;shadowRoot;constructor(_,k,C,O,H,Ue,ft,pt,an){super(_,H,Ue,pt,an),this.sharedStylesHost=k,this.hostEl=C,this.shadowRoot=C.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let un=O.styles;un=Le(O.id,un);for(const En of un){const Pn=document.createElement("style");ft&&Pn.setAttribute("nonce",ft),Pn.textContent=En,this.shadowRoot.appendChild(Pn)}const Rn=O.getExternalStyles?.();if(Rn)for(const En of Rn){const Pn=v(En,H);ft&&Pn.setAttribute("nonce",ft),this.shadowRoot.appendChild(Pn)}}nodeOrShadowRoot(_){return _===this.hostEl?this.shadowRoot:_}appendChild(_,k){return super.appendChild(this.nodeOrShadowRoot(_),k)}insertBefore(_,k,C){return super.insertBefore(this.nodeOrShadowRoot(_),k,C)}removeChild(_,k){return super.removeChild(null,k)}parentNode(_){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(_)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class be extends Fe{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(_,k,C,O,H,Ue,ft,pt,an){super(_,H,Ue,ft,pt),this.sharedStylesHost=k,this.removeStylesOnCompDestroy=O;let un=C.styles;this.styles=an?Le(an,un):un,this.styleUrls=C.getExternalStyles?.(an)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===B.DUP.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class q extends be{contentAttr;hostAttr;constructor(_,k,C,O,H,Ue,ft,pt,an){const un=O+"-"+C.id;super(_,k,C,H,Ue,ft,pt,an,un),this.contentAttr=function Ne(F){return"_ngcontent-%COMP%".replace(V,F)}(un),this.hostAttr=function he(F){return"_nghost-%COMP%".replace(V,F)}(un)}applyToHost(_){this.applyStyles(),this.setAttribute(_,this.hostAttr,"")}createElement(_,k){const C=super.createElement(_,k);return super.setAttribute(C,this.contentAttr,""),C}}class ge extends i.qj{supportsDOMEvents=!0;static makeCurrent(){(0,i.ig)(new ge)}onAndCancel(_,k,C,O){return _.addEventListener(k,C,O),()=>{_.removeEventListener(k,C,O)}}dispatchEvent(_,k){_.dispatchEvent(k)}remove(_){_.remove()}createElement(_,k){return(k=k||this.getDefaultDocument()).createElement(_)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(_){return _.nodeType===Node.ELEMENT_NODE}isShadowRoot(_){return _ instanceof DocumentFragment}getGlobalEventTarget(_,k){return"window"===k?window:"document"===k?_:"body"===k?_.body:null}getBaseHref(_){const k=function He(){return Ie=Ie||document.head.querySelector("base"),Ie?Ie.getAttribute("href"):null}();return null==k?null:function tt(F){return new URL(F,document.baseURI).pathname}(k)}resetBaseElement(){Ie=null}getUserAgent(){return window.navigator.userAgent}getCookie(_){return(0,o.b)(document.cookie,_)}}let Ie=null,St=(()=>{class F{build(){return new XMLHttpRequest}static \u0275fac=function(C){return new(C||F)};static \u0275prov=D.jDH({token:F,factory:F.\u0275fac})}return F})();const vt=["alt","control","meta","shift"],Ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lt={alt:F=>F.altKey,control:F=>F.ctrlKey,meta:F=>F.metaKey,shift:F=>F.shiftKey};let Ut=(()=>{class F extends Ge{constructor(k){super(k)}supports(k){return null!=F.parseEventName(k)}addEventListener(k,C,O,H){const Ue=F.parseEventName(C),ft=F.eventCallback(Ue.fullKey,O,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,i.rb)().onAndCancel(k,Ue.domEventName,ft,H))}static parseEventName(k){const C=k.toLowerCase().split("."),O=C.shift();if(0===C.length||"keydown"!==O&&"keyup"!==O)return null;const H=F._normalizeKey(C.pop());let Ue="",ft=C.indexOf("code");if(ft>-1&&(C.splice(ft,1),Ue="code."),vt.forEach(an=>{const un=C.indexOf(an);un>-1&&(C.splice(un,1),Ue+=an+".")}),Ue+=H,0!=C.length||0===H.length)return null;const pt={};return pt.domEventName=O,pt.fullKey=Ue,pt}static matchEventFullKeyCode(k,C){let O=Ft[k.key]||k.key,H="";return C.indexOf("code.")>-1&&(O=k.code,H="code."),!(null==O||!O)&&(O=O.toLowerCase()," "===O?O="space":"."===O&&(O="dot"),vt.forEach(Ue=>{Ue!==O&&(0,lt[Ue])(k)&&(H+=Ue+".")}),H+=O,H===C)}static eventCallback(k,C,O){return H=>{F.matchEventFullKeyCode(H,k)&&O.runGuarded(()=>C(H))}}static _normalizeKey(k){return"esc"===k?"escape":k}static \u0275fac=function(C){return new(C||F)(D.KVO(D.qQL))};static \u0275prov=D.jDH({token:F,factory:F.\u0275fac})}return F})();const bn=(0,Pe.oH4)(Pe.fpN,"browser",[{provide:B.Agw,useValue:Ce.AJ},{provide:B.PLl,useValue:function ct(){ge.makeCurrent()},multi:!0},{provide:D.qQL,useFactory:function Et(){return(0,B._9u)(document),document}}]),Cn=[{provide:B.$Ln,useClass:class dt{addToWindow(_){D.laP.getAngularTestability=(C,O=!0)=>{const H=_.findTestabilityInTree(C,O);if(null==H)throw new D.buA(5103,!1);return H},D.laP.getAllAngularTestabilities=()=>_.getAllTestabilities(),D.laP.getAllAngularRootElements=()=>_.getAllRootElements(),D.laP.frameworkStabilizers||(D.laP.frameworkStabilizers=[]),D.laP.frameworkStabilizers.push(C=>{const O=D.laP.getAllAngularTestabilities();let H=O.length;const Ue=function(){H--,0==H&&C()};O.forEach(ft=>{ft.whenStable(Ue)})})}findTestabilityInTree(_,k,C){return null==k?null:_.getTestability(k)??(C?(0,i.rb)().isShadowRoot(k)?this.findTestabilityInTree(_,k.host,!0):this.findTestabilityInTree(_,k.parentElement,!0):null)}}},{provide:B.dOL,useClass:B.NYb,deps:[B.SKi,B.giA,B.$Ln]},{provide:B.NYb,useClass:B.NYb,deps:[B.SKi,B.giA,B.$Ln]}],ln=[{provide:D.GBX,useValue:"root"},{provide:D.zcH,useFactory:function _t(){return new D.zcH}},{provide:ie,useClass:pe,multi:!0,deps:[D.qQL]},{provide:ie,useClass:Ut,multi:!0,deps:[D.qQL]},Ke,M,Ae,{provide:B._9s,useExisting:Ke},{provide:o.N,useClass:St},[]];let Mt=(()=>{class F{constructor(){}static \u0275fac=function(C){return new(C||F)};static \u0275mod=B.$C({type:F});static \u0275inj=D.G2t({providers:[...ln,...Cn],imports:[De.MD,Pe.Hbi]})}return F})();var hn=b(5921),wt=b(9330),Nt=b(1985),en=b(1413),cn=b(5343);const Dn=new Nt.c(cn.l);var Qn=b(5558),Vn=b(6697),or=b(5964),lr=b(6354);const fr="Service workers are disabled or not supported by this browser";class _r{serviceWorker;worker;registration;events;constructor(_,k){if(this.serviceWorker=_,_){let C=null;const O=new en.B;this.worker=new Nt.c(an=>(null!==C&&an.next(C),O.subscribe(un=>an.next(un))));const H=()=>{const{controller:an}=_;null!==an&&(C=an,O.next(C))};_.addEventListener("controllerchange",H),H(),this.registration=this.worker.pipe((0,Qn.n)(()=>_.getRegistration().then(an=>{if(!an)throw new D.buA(5601,!1);return an})));const Ue=new en.B;this.events=Ue.asObservable();const ft=an=>{const{data:un}=an;un?.type&&Ue.next(un)};_.addEventListener("message",ft),k?.get(B.o8S,null,{optional:!0})?.onDestroy(()=>{_.removeEventListener("controllerchange",H),_.removeEventListener("message",ft)})}else this.worker=this.events=this.registration=new Nt.c(C=>C.error(new D.buA(5601,!1)))}postMessage(_,k){return new Promise(C=>{this.worker.pipe((0,Vn.s)(1)).subscribe(O=>{O.postMessage({action:_,...k}),C()})})}postMessageWithOperation(_,k,C){const O=this.waitForOperationCompleted(C),H=this.postMessage(_,k);return Promise.all([H,O]).then(([,Ue])=>Ue)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(_){let k;return k="string"==typeof _?C=>C.type===_:C=>_.includes(C.type),this.events.pipe((0,or.p)(k))}nextEventOfType(_){return this.eventsOfType(_).pipe((0,Vn.s)(1))}waitForOperationCompleted(_){return new Promise((k,C)=>{this.eventsOfType("OPERATION_COMPLETED").pipe((0,or.p)(O=>O.nonce===_),(0,Vn.s)(1),(0,lr.T)(O=>{if(void 0!==O.result)return O.result;throw new Error(O.error)})).subscribe({next:k,error:C})})}get isEnabled(){return!!this.serviceWorker}}let Gn=(()=>{class F{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new en.B;constructor(k){if(this.sw=k,!k.isEnabled)return this.messages=Dn,this.notificationClicks=Dn,this.notificationCloses=Dn,this.pushSubscriptionChanges=Dn,void(this.subscription=Dn);this.messages=this.sw.eventsOfType("PUSH").pipe((0,lr.T)(O=>O.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,lr.T)(O=>O.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe((0,lr.T)(O=>O.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe((0,lr.T)(O=>O.data)),this.pushManager=this.sw.registration.pipe((0,lr.T)(O=>O.pushManager));const C=this.pushManager.pipe((0,Qn.n)(O=>O.getSubscription()));this.subscription=new Nt.c(O=>{const H=C.subscribe(O),Ue=this.subscriptionChanges.subscribe(O);return()=>{H.unsubscribe(),Ue.unsubscribe()}})}requestSubscription(k){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(fr));const C={userVisibleOnly:!0};let O=this.decodeBase64(k.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),H=new Uint8Array(new ArrayBuffer(O.length));for(let Ue=0;Ue<O.length;Ue++)H[Ue]=O.charCodeAt(Ue);return C.applicationServerKey=H,new Promise((Ue,ft)=>{this.pushManager.pipe((0,Qn.n)(pt=>pt.subscribe(C)),(0,Vn.s)(1)).subscribe({next:pt=>{this.subscriptionChanges.next(pt),Ue(pt)},error:ft})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(fr));const k=C=>{if(null===C)throw new D.buA(5602,!1);return C.unsubscribe().then(O=>{if(!O)throw new D.buA(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((C,O)=>{this.subscription.pipe((0,Vn.s)(1),(0,Qn.n)(k)).subscribe({next:C,error:O})})}decodeBase64(k){return atob(k)}static \u0275fac=function(C){return new(C||F)(D.KVO(_r))};static \u0275prov=D.jDH({token:F,factory:F.\u0275fac})}return F})(),qn=(()=>{class F{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(k){if(this.sw=k,!k.isEnabled)return this.versionUpdates=Dn,void(this.unrecoverable=Dn);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(fr));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;const k=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:k},k).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new D.buA(5601,!1));const k=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:k},k)}static \u0275fac=function(C){return new(C||F)(D.KVO(_r))};static \u0275prov=D.jDH({token:F,factory:F.\u0275fac})}return F})();const gr=new D.nKC("");function mr(){const F=(0,D.WQX)(yn);if(!("serviceWorker"in navigator)||!1===F.enabled)return;const _=(0,D.WQX)(gr),k=(0,D.WQX)(B.SKi),C=(0,D.WQX)(B.o8S);k.runOutsideAngular(()=>{const O=navigator.serviceWorker,H=()=>O.controller?.postMessage({action:"INITIALIZE"});O.addEventListener("controllerchange",H),C.onDestroy(()=>{O.removeEventListener("controllerchange",H)})}),k.runOutsideAngular(()=>{let O;const{registrationStrategy:H}=F;if("function"==typeof H)O=new Promise(Ue=>H().subscribe(()=>Ue()));else{const[Ue,...ft]=(H||"registerWhenStable:30000").split(":");switch(Ue){case"registerImmediately":O=Promise.resolve();break;case"registerWithDelay":O=kr(+ft[0]||0);break;case"registerWhenStable":O=Promise.race([C.whenStable(),kr(+ft[0])]);break;default:throw new D.buA(5600,!1)}}O.then(()=>{C.destroyed||navigator.serviceWorker.register(_,{scope:F.scope,updateViaCache:F.updateViaCache,type:F.type}).catch(Ue=>console.error((0,D.OsK)(5604,!1)))})})}function kr(F){return new Promise(_=>setTimeout(_,F))}function yr(F,_){return new _r(!1!==F.enabled?navigator.serviceWorker:void 0,_)}class yn{enabled;updateViaCache;type;scope;registrationStrategy}function Er(F,_={}){return(0,D.EmA)([Gn,qn,{provide:gr,useValue:F},{provide:yn,useValue:_},{provide:_r,useFactory:yr,deps:[yn,D.zZn]},(0,B.phd)(mr)])}let Or=(()=>{class F{static register(k,C={}){return{ngModule:F,providers:[Er(k,C)]}}static \u0275fac=function(C){return new(C||F)};static \u0275mod=B.$C({type:F});static \u0275inj=D.G2t({providers:[Gn,qn]})}return F})();var Jn=b(5032),vn=b(7343),qe=b(4688),Je=b(467),Ct=b(8941),mt=b(5083),kt=function(F){return F.Dark="DARK",F.Light="LIGHT",F.Default="DEFAULT",F}(kt||{});const rn=(0,mt.registerPlugin)("StatusBar");var nn=b(2327),Wn=b(918),An=b(4632),er=b(6201),Bn=b(1084),br=b(752),hr=b(8060),In=b(6358),dn=b(7522),Lr=b(5735),Ur=b(7223),xe=b(3205),nt=b(2084);function Ze(F,_){if(1&F&&(B.j41(0,"li"),B.EFF(1),B.k0s()),2&F){const k=_.$implicit;B.R7$(),B.JRh(k)}}function ye(F,_){if(1&F&&(B.j41(0,"div",10)(1,"h4"),B.EFF(2,"What's new:"),B.k0s(),B.j41(3,"ul"),B.DNE(4,Ze,2,1,"li",11),B.k0s()()),2&F){const k=B.XpG();B.R7$(4),B.Y8G("ngForOf",k.versionInfo.changelog.split("\n"))}}function We(F,_){1&F&&B.nrm(0,"ion-progress-bar",12)}function Ee(F,_){1&F&&(B.j41(0,"p",13),B.EFF(1," Downloading update... "),B.k0s())}function et(F,_){if(1&F&&(B.j41(0,"ion-card",14)(1,"ion-card-content"),B.nrm(2,"ion-icon",15),B.j41(3,"p"),B.EFF(4),B.k0s()()()),2&F){const k=B.XpG();B.R7$(4),B.SpI("You can dismiss this ",k.remainingDismisses," more time(s) before the update becomes required.")}}function bt(F,_){if(1&F){const k=B.RV6();B.j41(0,"ion-buttons",16)(1,"ion-button",17),B.bIt("click",function(){D.eBV(k);const O=B.XpG();return D.Njj(O.dismiss())}),B.nrm(2,"ion-icon",18),B.EFF(3),B.k0s()()}if(2&F){const k=B.XpG();B.R7$(),B.Y8G("disabled",k.downloading),B.R7$(2),B.SpI(" Later (",k.remainingDismisses," left) ")}}let zt=(()=>{var F;class _{constructor(C,O){this.modalController=C,this.updateService=O,this.remainingDismisses=3,this.downloading=!1}ngOnInit(){console.log("UpdatePromptComponent initialized with:",{versionInfo:this.versionInfo,currentVersion:this.currentVersion,remainingDismisses:this.remainingDismisses})}updateNow(){var C=this;return(0,Je.A)(function*(){if(C.versionInfo){C.downloading=!0;try{yield C.updateService.downloadAndInstall(C.versionInfo),C.modalController.dismiss({updated:!0})}catch(O){console.error("Update failed:",O),C.downloading=!1}}else console.error("No version info available")})()}dismiss(){var C=this;return(0,Je.A)(function*(){C.modalController.dismiss({dismissed:!0})})()}static#e=F=()=>(this.\u0275fac=function(O){return new(O||_)(B.rXU(vn.W3),B.rXU(zn))},this.\u0275cmp=B.VBU({type:_,selectors:[["app-update-prompt"]],inputs:{versionInfo:"versionInfo",currentVersion:"currentVersion",remainingDismisses:"remainingDismisses"},standalone:!1,decls:25,vars:10,consts:[["color","primary"],[1,"ion-padding"],["class","changelog",4,"ngIf"],["type","indeterminate","color","primary",4,"ngIf"],["class","download-text",4,"ngIf"],["class","warning-card",4,"ngIf"],["slot","primary"],["expand","block","color","primary",3,"click","disabled"],["name","download","slot","start"],["slot","secondary",4,"ngIf"],[1,"changelog"],[4,"ngFor","ngForOf"],["type","indeterminate","color","primary"],[1,"download-text"],[1,"warning-card"],["name","warning","color","warning"],["slot","secondary"],["expand","block","fill","clear",3,"click","disabled"],["name","time","slot","start"]],template:function(O,H){1&O&&(B.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),B.EFF(3,"Update Available"),B.k0s()()(),B.j41(4,"ion-content",1)(5,"ion-card")(6,"ion-card-header")(7,"ion-card-title"),B.EFF(8),B.k0s(),B.j41(9,"ion-card-subtitle"),B.EFF(10),B.k0s()(),B.j41(11,"ion-card-content")(12,"p"),B.EFF(13),B.k0s(),B.DNE(14,ye,5,1,"div",2)(15,We,1,0,"ion-progress-bar",3)(16,Ee,2,0,"p",4),B.k0s()(),B.DNE(17,et,5,1,"ion-card",5),B.k0s(),B.j41(18,"ion-footer")(19,"ion-toolbar")(20,"ion-buttons",6)(21,"ion-button",7),B.bIt("click",function(){return H.updateNow()}),B.nrm(22,"ion-icon",8),B.EFF(23),B.k0s()(),B.DNE(24,bt,4,2,"ion-buttons",9),B.k0s()()),2&O&&(B.R7$(8),B.SpI("Version ",null==H.versionInfo?null:H.versionInfo.latestVersion),B.R7$(2),B.SpI("Current: ",H.currentVersion),B.R7$(3),B.JRh(null==H.versionInfo?null:H.versionInfo.updateMessage),B.R7$(),B.Y8G("ngIf",null==H.versionInfo?null:H.versionInfo.changelog),B.R7$(),B.Y8G("ngIf",H.downloading),B.R7$(),B.Y8G("ngIf",H.downloading),B.R7$(),B.Y8G("ngIf",H.remainingDismisses<3),B.R7$(4),B.Y8G("disabled",H.downloading),B.R7$(2),B.SpI(" ",H.downloading?"Downloading...":"Update Now"," "),B.R7$(),B.Y8G("ngIf",!(null!=H.versionInfo&&H.versionInfo.forceUpdate)))},dependencies:[De.Sq,De.bT,vn.Jm,vn.QW,vn.b_,vn.I9,vn.ME,vn.HW,vn.tN,vn.W9,vn.M0,vn.eU,vn.iq,vn.FH,vn.BC,vn.ai],styles:[".changelog[_ngcontent-%COMP%]{margin-top:16px}.changelog[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:8px;color:var(--ion-color-primary)}.changelog[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.download-text[_ngcontent-%COMP%]{text-align:center;margin-top:16px;color:var(--ion-color-medium)}.warning-card[_ngcontent-%COMP%]{--background: var(--ion-color-warning-tint);margin-top:16px}.warning-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;vertical-align:middle}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--padding-top: 8px;--padding-bottom: 8px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:4px}"]}))}return F(),_})();function pn(F,_){if(1&F&&(B.j41(0,"li"),B.EFF(1),B.k0s()),2&F){const k=_.$implicit;B.R7$(),B.JRh(k)}}function Tn(F,_){if(1&F&&(B.j41(0,"div",12)(1,"h4"),B.EFF(2,"What's new:"),B.k0s(),B.j41(3,"ul"),B.DNE(4,pn,2,1,"li",13),B.k0s()()),2&F){const k=B.XpG();B.R7$(4),B.Y8G("ngForOf",k.versionInfo.changelog.split("\n"))}}function Mn(F,_){1&F&&B.nrm(0,"ion-progress-bar",14)}function tr(F,_){1&F&&(B.j41(0,"p",15),B.EFF(1," Downloading update... "),B.k0s())}let Wr=(()=>{var F;class _{constructor(C,O,H){this.modalController=C,this.alertController=O,this.updateService=H,this.downloading=!1}ngOnInit(){console.log("ForceUpdateComponent initialized with:",{versionInfo:this.versionInfo,currentVersion:this.currentVersion}),history.pushState(null,"",location.href),window.onpopstate=()=>{history.pushState(null,"",location.href)}}updateNow(){var C=this;return(0,Je.A)(function*(){if(C.versionInfo){C.downloading=!0;try{yield C.updateService.downloadAndInstall(C.versionInfo)}catch(O){console.error("Update failed:",O),C.downloading=!1,yield(yield C.alertController.create({header:"Update Failed",message:"Failed to download update. Please check your connection and try again.",backdropDismiss:!1,buttons:[{text:"Retry",handler:()=>{C.updateNow()}}]})).present()}}else console.error("No version info available")})()}static#e=F=()=>(this.\u0275fac=function(O){return new(O||_)(B.rXU(vn.W3),B.rXU(vn.hG),B.rXU(zn))},this.\u0275cmp=B.VBU({type:_,selectors:[["app-force-update"]],inputs:{versionInfo:"versionInfo",currentVersion:"currentVersion"},standalone:!1,decls:35,vars:8,consts:[["color","danger"],[1,"ion-padding","force-update-content"],[1,"force-update-container"],["name","alert-circle","color","danger",1,"alert-icon"],[1,"force-message"],["class","changelog",4,"ngIf"],["type","indeterminate","color","danger",4,"ngIf"],["class","download-text",4,"ngIf"],[1,"update-notice"],["name","information-circle","color","primary"],["expand","block","color","light",3,"click","disabled"],["name","download","slot","start"],[1,"changelog"],[4,"ngFor","ngForOf"],["type","indeterminate","color","danger"],[1,"download-text"]],template:function(O,H){1&O&&(B.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),B.EFF(3,"Update Required"),B.k0s()()(),B.j41(4,"ion-content",1)(5,"div",2),B.nrm(6,"ion-icon",3),B.j41(7,"h2"),B.EFF(8,"Update Required"),B.k0s(),B.j41(9,"p",4),B.EFF(10," You've dismissed the update reminder multiple times. You must update to continue using the app. "),B.k0s(),B.j41(11,"ion-card")(12,"ion-card-header")(13,"ion-card-title"),B.EFF(14),B.k0s(),B.j41(15,"ion-card-subtitle"),B.EFF(16),B.k0s()(),B.j41(17,"ion-card-content")(18,"p"),B.EFF(19),B.k0s(),B.DNE(20,Tn,5,1,"div",5)(21,Mn,1,0,"ion-progress-bar",6)(22,tr,2,0,"p",7),B.k0s()(),B.j41(23,"div",8),B.nrm(24,"ion-icon",9),B.j41(25,"p")(26,"strong"),B.EFF(27,"Please update now to continue."),B.k0s(),B.nrm(28,"br"),B.EFF(29," This ensures you have the latest features and security updates. "),B.k0s()()()(),B.j41(30,"ion-footer")(31,"ion-toolbar",0)(32,"ion-button",10),B.bIt("click",function(){return H.updateNow()}),B.nrm(33,"ion-icon",11),B.EFF(34),B.k0s()()()),2&O&&(B.R7$(14),B.SpI("Version ",null==H.versionInfo?null:H.versionInfo.latestVersion),B.R7$(2),B.SpI("Current: ",H.currentVersion),B.R7$(3),B.JRh(null==H.versionInfo?null:H.versionInfo.updateMessage),B.R7$(),B.Y8G("ngIf",null==H.versionInfo?null:H.versionInfo.changelog),B.R7$(),B.Y8G("ngIf",H.downloading),B.R7$(),B.Y8G("ngIf",H.downloading),B.R7$(10),B.Y8G("disabled",H.downloading),B.R7$(2),B.SpI(" ",H.downloading?"Downloading...":"Update Now"," "))},dependencies:[De.Sq,De.bT,vn.Jm,vn.b_,vn.I9,vn.ME,vn.HW,vn.tN,vn.W9,vn.M0,vn.eU,vn.iq,vn.FH,vn.BC,vn.ai],styles:[".force-update-content[_ngcontent-%COMP%]{--background: var(--ion-color-light);display:flex;align-items:center;justify-content:center}.force-update-container[_ngcontent-%COMP%]{max-width:400px;text-align:center}.alert-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}h2[_ngcontent-%COMP%]{color:var(--ion-color-danger);margin-bottom:16px}.force-message[_ngcontent-%COMP%]{font-size:16px;color:var(--ion-color-dark);margin-bottom:24px}.changelog[_ngcontent-%COMP%]{margin-top:16px;text-align:left}.changelog[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:8px;color:var(--ion-color-primary)}.changelog[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.download-text[_ngcontent-%COMP%]{text-align:center;margin-top:16px;color:var(--ion-color-medium)}.update-notice[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background-color:var(--ion-color-primary-tint);border-radius:8px;display:flex;align-items:flex-start;gap:8px}.update-notice[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{flex-shrink:0;margin-top:2px}.update-notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:left;font-size:14px}ion-footer[_ngcontent-%COMP%]{--background: var(--ion-color-danger)}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:8px 16px;height:48px;font-weight:600}"]}))}return F(),_})();var Pr=b(5029);let zn=(()=>{var F;class _{constructor(C,O,H,Ue){this.alertController=C,this.loadingController=O,this.modalController=H,this.supabase=Ue,this.UPDATE_DISMISS_KEY="update_dismiss_count",this.UPDATE_DISMISS_DATE_KEY="update_dismiss_date",this.DISMISSED_VERSION_KEY="update_dismissed_version",this.LAST_CHECK_KEY="last_update_check",this.MAX_DISMISSES=3,this.CHECK_INTERVAL=0,this.JUST_UPDATED_KEY="just_updated"}checkForUpdates(){var C=this;return(0,Je.A)(function*(O=!1){if(mt.Capacitor.isNativePlatform()){if(localStorage.getItem(C.JUST_UPDATED_KEY))return void console.log("Skipping update check - just applied OTA update");if(!O){const H=localStorage.getItem(C.LAST_CHECK_KEY);if(H&&Date.now()-parseInt(H)<C.CHECK_INTERVAL)return void console.log("Update check skipped - checked recently")}try{console.log("Checking for updates...");const H=yield C.getCurrentVersion();console.log("Current version:",H);const Ue=yield C.getVersionInfo();console.log("Latest version:",Ue.latestVersion),localStorage.setItem(C.LAST_CHECK_KEY,Date.now().toString());const ft=mt.Capacitor.getPlatform();if(Ue.platforms&&Ue.platforms.length>0&&!Ue.platforms.includes(ft))return void console.log(`Update is for ${Ue.platforms.join(", ")} only \u2014 skipping on ${ft}`);if(!C.needsUpdate(H,Ue))return void console.log("App is up to date");console.log("Update available!");const pt=Ue.nativeUpdate?.[ft];if(pt?.required)return console.log(`Native rebuild required for ${ft}`),void(yield C.showNativeUpdateAlert(pt,ft));yield C.showUpdatePrompt(Ue,H)}catch(H){console.error("Update check failed:",H)}}}).apply(this,arguments)}getCurrentVersion(){return(0,Je.A)(function*(){try{const O=(yield nn.CapacitorUpdater.current())?.bundle?.version;if(O&&"builtin"!==O&&""!==O)return console.log("Using OTA bundle version:",O),O;const{App:H}=yield Promise.resolve().then(b.bind(b,8941));return(yield H.getInfo()).version}catch{const{App:O}=yield Promise.resolve().then(b.bind(b,8941));return(yield O.getInfo()).version}})()}getVersionInfo(){var C=this;return(0,Je.A)(function*(){try{const{data:O,error:H}=yield C.supabase.getClient().storage.from("app-config").download("version.json");if(H)throw H;const Ue=yield O.text();return JSON.parse(Ue)}catch(O){return console.error("Failed to fetch version info:",O),{latestVersion:"0.0.0",minVersion:"0.0.0",updateMessage:"Unable to check for updates",forceUpdate:!1,downloadUrl:"",changelog:"",releaseDate:(0,nt.E)()}}})()}needsUpdate(C,O){const H=this.parseVersion(C),Ue=this.parseVersion(O.latestVersion),ft=this.parseVersion(O.minVersion);return this.compareVersions(H,ft)<0||this.compareVersions(H,Ue)<0}parseVersion(C){const O=C.split(".").map(H=>parseInt(H)||0);return{major:O[0]||0,minor:O[1]||0,patch:O[2]||0}}compareVersions(C,O){return C.major!==O.major?C.major-O.major:C.minor!==O.minor?C.minor-O.minor:C.patch-O.patch}showUpdatePrompt(C,O){var H=this;return(0,Je.A)(function*(){const Ue=localStorage.getItem(H.DISMISSED_VERSION_KEY);Ue&&Ue!==C.latestVersion&&(console.log(`New version detected (${C.latestVersion} vs dismissed ${Ue}) - resetting dismiss count`),H.resetDismissCount());const ft=parseInt(localStorage.getItem(H.UPDATE_DISMISS_KEY)||"0");if(ft>=H.MAX_DISMISSES||C.forceUpdate)return void(yield H.showForceUpdateScreen(C,O));const pt=yield H.modalController.create({component:zt,componentProps:{versionInfo:C,currentVersion:O,remainingDismisses:H.MAX_DISMISSES-ft},backdropDismiss:!1,cssClass:"update-prompt-modal"});yield pt.present();const{data:an}=yield pt.onWillDismiss();if(an?.dismissed){const un=ft+1;localStorage.setItem(H.UPDATE_DISMISS_KEY,un.toString()),localStorage.setItem(H.UPDATE_DISMISS_DATE_KEY,(0,nt.E)()),localStorage.setItem(H.DISMISSED_VERSION_KEY,C.latestVersion),console.log(`Update dismissed ${un}/${H.MAX_DISMISSES} times`)}else an?.updated&&(H.resetDismissCount(),console.log("Update downloaded successfully - dismiss count reset"))})()}showForceUpdateScreen(C,O){var H=this;return(0,Je.A)(function*(){yield(yield H.modalController.create({component:Wr,componentProps:{versionInfo:C,currentVersion:O},backdropDismiss:!1,cssClass:"force-update-modal"})).present()})()}downloadAndInstall(C){var O=this;return(0,Je.A)(function*(){const H=mt.Capacitor.getPlatform();try{const Ue=yield O.loadingController.create({message:"Downloading update...",backdropDismiss:!1});yield Ue.present(),console.log("Downloading update from:",C.downloadUrl);const ft=yield nn.CapacitorUpdater.download({url:C.downloadUrl,version:C.latestVersion});console.log("Download complete:",ft),yield Ue.dismiss(),"android"===H?yield(yield O.alertController.create({header:"Update Ready",message:"The app will restart now to apply the update.",buttons:[{text:"OK",handler:(an=(0,Je.A)(function*(){try{localStorage.setItem("just_updated","1"),yield nn.CapacitorUpdater.set({id:ft.id}),console.log("Update applied - app restarting")}catch(un){localStorage.removeItem("just_updated"),console.error("Failed to apply update:",un)}}),function(){return an.apply(this,arguments)})}],backdropDismiss:!1})).present():"ios"===H&&(yield(yield O.alertController.create({header:"Update Ready",message:"The app will restart now to apply the update.",buttons:[{text:"OK",handler:function(){var an=(0,Je.A)(function*(){try{localStorage.setItem("just_updated","1"),yield nn.CapacitorUpdater.set({id:ft.id}),console.log("iOS update applied - app restarting")}catch(un){localStorage.removeItem("just_updated"),console.error("Failed to apply iOS update:",un)}});return function(){return an.apply(this,arguments)}}()}],backdropDismiss:!1})).present())}catch(Ue){console.error("Update failed:",Ue),yield(yield O.alertController.create({header:"Update Failed",message:"Failed to download update. Please try again later.",buttons:["OK"]})).present()}var an})()}resetDismissCount(){localStorage.removeItem(this.UPDATE_DISMISS_KEY),localStorage.removeItem(this.UPDATE_DISMISS_DATE_KEY),localStorage.removeItem(this.DISMISSED_VERSION_KEY)}getDismissCount(){return parseInt(localStorage.getItem(this.UPDATE_DISMISS_KEY)||"0")}showNativeUpdateAlert(C,O){var H=this;return(0,Je.A)(function*(){const Ue=C.instructions||"A new version of the app is available. Please download and install the update to get the latest features and fixes.";yield(yield H.alertController.create({header:"Update Available",message:Ue,buttons:[{text:"Later",role:"cancel"},{text:"Download Update",handler:()=>(H.downloadAndInstallNativeUpdate(C,O),!1)}],backdropDismiss:!1})).present()})()}downloadAndInstallNativeUpdate(C,O){var H=this;return(0,Je.A)(function*(){const Ue=yield H.loadingController.create({message:"Downloading update...",spinner:"crescent"});yield Ue.present();try{if("android"===O){const{Filesystem:ft,Directory:pt}=yield Promise.resolve().then(b.bind(b,2739)),an=`wetsapp-update-${C.buildVersion}.apk`,un=yield fetch(C.downloadUrl);if(!un.ok)throw new Error("Download failed");const Rn=yield un.blob(),En=yield H.blobToBase64(Rn);yield ft.writeFile({path:an,data:En,directory:pt.Cache});const Pn=yield ft.getUri({path:an,directory:pt.Cache});yield Ue.dismiss(),yield H.alertController.dismiss();const{registerPlugin:Yt}=yield Promise.resolve().then(b.bind(b,5083)),jn=Yt("InstallPermission"),{granted:Nr}=yield jn.canInstall();if(!Nr){const{granted:ur}=yield jn.requestPermission();if(!ur)return void(yield(yield H.alertController.create({header:"Permission Required",message:'To install the update, please allow WETSAPP to install apps. Tap "Allow" on the next screen.',buttons:[{text:"Cancel",role:"cancel"},{text:"Try Again",handler:()=>{H.downloadAndInstallNativeUpdate(C,O)}}]})).present())}const{FileOpener:wr}=yield b.e(4726).then(b.bind(b,4726));yield wr.open({filePath:Pn.uri,contentType:"application/vnd.android.package-archive",openWithDefault:!0})}else"ios"===O&&(yield Ue.dismiss(),yield H.alertController.dismiss(),C.downloadUrl&&window.open(C.downloadUrl,"_system"))}catch(ft){console.error("Failed to download native update:",ft),yield Ue.dismiss(),yield H.alertController.dismiss(),yield(yield H.alertController.create({header:"Download Failed",message:"The automatic download failed. Would you like to open the download page in your browser instead?",buttons:[{text:"Cancel",role:"cancel"},{text:"Open Download Page",handler:()=>{window.open("https://jessicanasica.github.io/nature-seychelles-wet-app/download.html","_system")}}]})).present()}})()}blobToBase64(C){return new Promise((O,H)=>{const Ue=new FileReader;Ue.onloadend=()=>{const ft=Ue.result.split(",")[1];O(ft)},Ue.onerror=H,Ue.readAsDataURL(C)})}static#e=F=()=>(this.\u0275fac=function(O){return new(O||_)(D.KVO(vn.hG),D.KVO(vn.Xi),D.KVO(vn.W3),D.KVO(Pr.L))},this.\u0275prov=D.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}))}return F(),_})();var wn=b(7762),$n=b(7691),sr=b(2739);(0,mt.registerPlugin)("AppSettings");let nr=(()=>{var F;class _{constructor(){this.platform=mt.Capacitor.getPlatform()}requestAllPermissions(){var C=this;return(0,Je.A)(function*(){const O=[],H=[];console.log("\u{1f510} Requesting all necessary permissions...");try{if("granted"!==(yield wn.L.checkPermissions()).location){console.log("\u{1f4cd} Requesting location permissions...");const ft=yield wn.L.requestPermissions();"granted"===ft.location?(O.push("Location (Fine)"),console.log("\u2705 Fine location permission granted")):(H.push("Location (Fine)"),console.log("\u274c Fine location permission denied")),"granted"===ft.coarseLocation?(O.push("Location (Coarse)"),console.log("\u2705 Coarse location permission granted")):(H.push("Location (Coarse)"),console.log("\u274c Coarse location permission denied"))}else O.push("Location (Fine)"),O.push("Location (Coarse)"),console.log("\u2705 Location permissions already granted")}catch(Ue){console.error("Error requesting location permissions:",Ue),H.push("Location")}try{"granted"===(yield $n.i7.requestPermissions()).camera?(O.push("Camera"),console.log("\u2705 Camera permission granted")):(H.push("Camera"),console.log("\u274c Camera permission denied"))}catch(Ue){console.error("Error requesting camera permissions:",Ue),H.push("Camera")}if("android"===C.platform)try{(yield C.requestPermissionWithExplanation("storage"))?(O.push("Storage"),console.log("\u2705 Storage permission granted")):(H.push("Storage"),console.log("\u274c Storage permission denied"))}catch(Ue){console.error("Error requesting storage permissions:",Ue),H.push("Storage")}return console.log(`\u2705 Permissions granted: ${O.join(", ")}`),console.log(`\u274c Permissions denied: ${H.join(", ")}`),{granted:O,denied:H}})()}checkAllPermissions(){var C=this;return(0,Je.A)(function*(){const O={location:!1,camera:!1,storage:!1};try{const H=yield wn.L.checkPermissions();O.location="granted"===H.location||"granted"===H.coarseLocation}catch(H){console.error("Error checking location permissions:",H)}try{const H=yield $n.i7.checkPermissions();O.camera="granted"===H.camera}catch(H){console.error("Error checking camera permissions:",H)}return"android"===C.platform&&(O.storage=!0),O})()}requestPermissionWithExplanation(C){return(0,Je.A)(function*(){switch(C){case"location":try{return"granted"===(yield wn.L.checkPermissions()).location||"granted"===(yield wn.L.requestPermissions()).location}catch(O){return console.error("Error requesting location permission:",O),!1}case"camera":try{return"granted"===(yield $n.i7.checkPermissions()).camera||"granted"===(yield $n.i7.requestPermissions()).camera}catch(O){return console.error("Error requesting camera permission:",O),!1}case"storage":if("android"===mt.Capacitor.getPlatform())try{return"granted"===(yield sr.Filesystem.checkPermissions()).publicStorage||"granted"===(yield sr.Filesystem.requestPermissions()).publicStorage}catch(O){return console.error("Error requesting storage permission:",O),!1}return!0;case"storage":try{const O=yield sr.Filesystem.checkPermissions();if(console.log("\u{1f4c1} PermissionsService: Storage permission check:",O),"granted"===O.publicStorage)return console.log("\u2705 PermissionsService: Storage permission already granted"),!0;console.log("\u{1f4c1} PermissionsService: Requesting storage permission...");const H=yield sr.Filesystem.requestPermissions();return console.log("\u{1f4c1} PermissionsService: Storage permission result:",H),"granted"===H.publicStorage}catch(O){return console.error("\u{1f4c1} PermissionsService: Error requesting storage permission:",O),!!O.message?.includes("MANAGE_EXTERNAL_STORAGE")&&(console.log("\u26a0\ufe0f PermissionsService: MANAGE_EXTERNAL_STORAGE not granted, using scoped storage"),!0)}default:return!1}})()}static#e=F=()=>(this.\u0275fac=function(O){return new(O||_)},this.\u0275prov=D.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}))}return F(),_})();var Tr=b(6845);let Ar=(()=>{var F;class _{constructor(C,O,H,Ue,ft,pt,an,un,Rn,En,Pn,Yt,jn,Nr,wr,ur,X){this.sharedDataService=C,this.pollutionSyncService=O,this.disturbancesSyncService=H,this.floraFaunaSyncService=Ue,this.biomassSyncService=ft,this.healthSyncService=pt,this.restorationSyncService=an,this.cleanupSyncService=un,this.outplantingSyncService=Rn,this.accountSyncService=En,this.auth=Pn,this.updateCheckService=Yt,this.permissionsService=jn,this.toastController=Nr,this.alertController=wr,this.translationService=ur,this.swUpdate=X,this.hasRunInitialSync=!1,this.lastResumeSync=0,this.RESUME_SYNC_THROTTLE=3e4,console.log("AppComponent: Constructor called - All sync services initialized"),this.sharedDataService.checkAndCreateDataStore().then(()=>{this.cleanupOrphanedBackupFiles()}).catch(Kn=>{console.error("Failed to initialize SharedDataService datastore:",Kn)}),console.log("AppComponent: All sync services injected - network listeners active for all services"),this.initializeAutoSync(),this.setupAppLifecycleListeners(),mt.Capacitor.isNativePlatform()&&(rn.setOverlaysWebView({overlay:!0}),rn.setStyle({style:kt.Dark}),rn.setBackgroundColor({color:"#00000000"}),nn.CapacitorUpdater.notifyAppReady().then(()=>{console.log("\u2705 CapacitorUpdater: App ready confirmed - OTA bundle will persist"),setTimeout(()=>{this.updateCheckService.checkForUpdates().catch(Kn=>{console.error("Update check failed:",Kn)})},2e3)}).catch(Kn=>{console.warn("\u26a0\ufe0f CapacitorUpdater: notifyAppReady failed:",Kn),setTimeout(()=>{this.updateCheckService.checkForUpdates().catch(ee=>{console.error("Update check failed:",ee)})},2e3)})),mt.Capacitor.isNativePlatform()||this.initPwaUpdateCheck()}ngOnInit(){}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe(),this.periodicSyncTimer&&clearInterval(this.periodicSyncTimer)}initializeAutoSync(){var C=this;console.log("\u{1f680} AppComponent: Initializing automatic account sync - waiting for auth"),console.log("\u{1f680} AppComponent: Current user:",this.auth.getCurrentUser()),this.authSubscription=this.auth.currentUser$.pipe((0,or.p)(O=>(console.log("\u{1f680} AppComponent: Auth filter - user:",O?.username),null!==O)),(0,Vn.s)(1)).subscribe(function(){var O=(0,Je.A)(function*(H){console.log("\u{1f680} AppComponent: Auth subscription triggered for user:",H.username),C.hasRunInitialSync?console.log("\u23f8\ufe0f AppComponent: Initial sync already ran, skipping"):(C.hasRunInitialSync=!0,yield new Promise(Ue=>setTimeout(Ue,1e3)),yield C.runAutoSync(H),C.startPeriodicSync())});return function(H){return O.apply(this,arguments)}}()),setTimeout(()=>{if(console.log("\u{1f504} AppComponent: 10s fallback check - hasRunInitialSync:",this.hasRunInitialSync),!this.hasRunInitialSync){const O=this.auth.getCurrentUser();console.log("\u{1f504} AppComponent: Fallback - current user:",O?.username),O?(console.log("\u{1f504} AppComponent: Fallback sync trigger"),this.hasRunInitialSync=!0,this.runAutoSync(O),this.startPeriodicSync()):console.log("\u23f8\ufe0f AppComponent: No user after 10s fallback, skipping auto sync")}},1e4)}runAutoSync(C){var O=this;return(0,Je.A)(function*(){try{const H=C.level||1;console.log(`\u{1f464} AppComponent: Auto-sync for user ${C.username} (Level ${H})`),yield O.showAutoSyncToast(H);const Ue=yield O.accountSyncService.downloadAllAccountData();Ue.success?(console.log(`\u2705 AppComponent: Auto-sync completed - ${Ue.totalDownloaded} items downloaded`),yield O.showSyncCompleteToast(Ue)):console.error("\u274c AppComponent: Auto-sync failed:",Ue.errors)}catch(H){console.error("\u274c AppComponent: Auto-sync error:",H)}})()}startPeriodicSync(){var C=this;console.log("\u23f0 AppComponent: Starting 30-minute periodic sync timer"),this.periodicSyncTimer&&clearInterval(this.periodicSyncTimer),this.periodicSyncTimer=setInterval((0,Je.A)(function*(){if(C.auth.getCurrentUser()&&navigator.onLine){console.log("\u23f0 AppComponent: Triggering periodic 30-minute sync");try{yield C.accountSyncService.downloadAllAccountData(),console.log("\u2705 AppComponent: Periodic sync completed")}catch(H){console.error("\u274c AppComponent: Periodic sync failed:",H)}}else console.log("\u23f0 AppComponent: Skipping periodic sync - no user or offline")}),18e5)}requestAllPermissions(){var C=this;return(0,Je.A)(function*(){try{if(typeof mt.Capacitor<"u"&&"web"!==mt.Capacitor.getPlatform()){console.log("\u{1f510} AppComponent: Requesting all necessary permissions at app launch");const O=[],H=[{type:"location",name:"Location"},{type:"camera",name:"Camera"},{type:"storage",name:"Storage"}];for(const Ue of H)(yield C.permissionsService.requestPermissionWithExplanation(Ue.type))||O.push(Ue.name);O.length>0?yield C.showPermissionsDeniedAlert(O):yield C.showPermissionsGrantedToast()}}catch(O){console.error("\u274c AppComponent: Error requesting permissions:",O)}})()}showPermissionsDeniedAlert(C){var O=this;return(0,Je.A)(function*(){yield(yield O.alertController.create({header:"\u26a0\ufe0f Permissions Required",message:`The following permissions are required for full functionality:\n\n${C.join("\n")}\n\nSome features may not work correctly without these permissions.`,buttons:[{text:"Retry",handler:()=>{O.requestAllPermissions()}},{text:"Continue",role:"cancel"}]})).present()})()}showPermissionsGrantedToast(){var C=this;return(0,Je.A)(function*(){yield(yield C.toastController.create({message:"\u2705 All permissions granted successfully!",duration:3e3,position:"top",cssClass:"custom-success-toast"})).present()})()}setupAppLifecycleListeners(){var C=this;try{Ct.App.addListener("appStateChange",function(){var O=(0,Je.A)(function*(H){if(H.isActive){console.log("\u{1f4f1} AppComponent: App resumed from background");const Ue=Date.now();if(Ue-C.lastResumeSync<C.RESUME_SYNC_THROTTLE)return void console.log("\u23f8\ufe0f AppComponent: Resume sync throttled");if(C.auth.getCurrentUser()&&navigator.onLine){console.log("\u{1f504} AppComponent: Triggering sync on app resume"),C.lastResumeSync=Ue;try{yield C.accountSyncService.downloadAllAccountData(),console.log("\u2705 AppComponent: Resume sync completed")}catch(an){console.error("\u274c AppComponent: Resume sync failed:",an)}const pt=localStorage.getItem("last_update_check");(!pt||Ue-parseInt(pt)>864e5)&&(console.log("\u{1f504} AppComponent: Checking for updates on resume"),C.updateCheckService.checkForUpdates().catch(an=>{console.error("Update check on resume failed:",an)}))}}});return function(H){return O.apply(this,arguments)}}())}catch{console.log("\u{1f4f1} AppComponent: Capacitor App plugin not available (browser mode)")}}showAutoSyncToast(C){var O=this;return(0,Je.A)(function*(){try{const H=O.isDesktopDevice(),Ue=an=>O.translationService.t(an),ft=C>=4?H?`\u{1f537} ${Ue("Auto-syncing ALL account data")}\n(${Ue("Level 4 Desktop")})...`:`\u{1f4e5} ${Ue("Auto-syncing your account data")}\n(${Ue("Level 4 Mobile")})...`:`\u{1f4e5} ${Ue("Auto-syncing your account data")}...`;yield(yield O.toastController.create({message:ft,duration:3e3,position:"top",cssClass:"custom-sync-loading-toast"})).present()}catch(H){console.warn("\u26a0\ufe0f AppComponent: Could not show auto-sync toast:",H)}})()}showSyncCompleteToast(C){var O=this;return(0,Je.A)(function*(){try{const H=pt=>O.translationService.t(pt),Ue=C.isPrivilegedAccess?`\u2705 ${H("Privileged sync complete")}: ${C.totalDownloaded} ${H("items from all accounts")}`:`\u2705 ${H("Sync complete")}: ${C.totalDownloaded} ${H("items downloaded")}`;yield(yield O.toastController.create({message:Ue,duration:4e3,position:"top",cssClass:"custom-sync-success-toast"})).present()}catch(H){console.warn("\u26a0\ufe0f AppComponent: Could not show sync complete toast:",H)}})()}showSyncErrorToast(C){var O=this;return(0,Je.A)(function*(){try{yield(yield O.toastController.create({message:`\u274c ${O.translationService.t("Sync failed")}: ${C[0]}`,duration:5e3,position:"top",cssClass:"custom-sync-error-toast",buttons:[{text:O.translationService.t("Retry"),handler:()=>{O.initializeAutoSync()}}]})).present()}catch(H){console.warn("\u26a0\ufe0f AppComponent: Could not show sync error toast:",H)}})()}isDesktopDevice(){const C=navigator.userAgent.toLowerCase();return/macintosh|windows|linux/i.test(C)&&!/android/i.test(C)}initPwaUpdateCheck(){var C=this;this.swUpdate.isEnabled?(console.log("\u{1f310} PWA: Service worker update check initialized"),this.swUpdate.versionUpdates.pipe((0,or.p)(O=>"VERSION_READY"===O.type)).subscribe(function(){var O=(0,Je.A)(function*(H){console.log("\u{1f310} PWA: New version ready!",H.latestVersion),yield(yield C.alertController.create({header:"Update Available",message:"A new version of the app is available. Reload now to get the latest features and fixes.",buttons:[{text:"Later",role:"cancel"},{text:"Reload",handler:()=>{document.location.reload()}}],backdropDismiss:!1})).present()});return function(H){return O.apply(this,arguments)}}()),setInterval(()=>{navigator.onLine&&(console.log("\u{1f310} PWA: Checking for service worker updates..."),this.swUpdate.checkForUpdate().then(O=>{console.log("\u{1f310} PWA: Update check result:",O?"update available":"up to date")}).catch(O=>{console.error("\u{1f310} PWA: Update check failed:",O)}))},18e5),setTimeout(()=>{navigator.onLine&&this.swUpdate.checkForUpdate().catch(O=>{console.error("\u{1f310} PWA: Initial update check failed:",O)})},5e3)):console.log("\u{1f310} PWA: Service worker not enabled (dev mode or native platform)")}cleanupOrphanedBackupFiles(){var C=this;return(0,Je.A)(function*(){try{const H=(yield C.sharedDataService.listFiles()).filter(Ue=>Ue.includes("_backup"));if(0===H.length)return;console.log(`\u{1f9f9} AppComponent: Cleaning up ${H.length} orphaned backup file(s)`);for(const Ue of H)try{yield C.sharedDataService.deleteJsonFile(Ue)}catch(ft){console.warn(`\u26a0\ufe0f AppComponent: Failed to delete backup file ${Ue}:`,ft)}console.log("\u2705 AppComponent: Backup file cleanup complete")}catch(O){console.warn("\u26a0\ufe0f AppComponent: Backup cleanup skipped:",O)}})()}static#e=F=()=>(this.\u0275fac=function(O){return new(O||_)(B.rXU(Wn.H),B.rXU(An.T),B.rXU(er.s),B.rXU(Bn.G),B.rXU(br.P),B.rXU(hr.r),B.rXU(In.T),B.rXU(dn.$),B.rXU(Lr.Q),B.rXU(Ur.U),B.rXU(xe.N),B.rXU(zn),B.rXU(nr),B.rXU(vn.K_),B.rXU(vn.hG),B.rXU(Tr.L),B.rXU(qn))},this.\u0275cmp=B.VBU({type:_,selectors:[["app-root"]],standalone:!1,decls:2,vars:0,template:function(O,H){1&O&&(B.j41(0,"ion-app"),B.nrm(1,"ion-router-outlet"),B.k0s())},dependencies:[vn.U1,vn.Rg],encapsulation:2}))}return F(),_})();var Rr=b(8132);const rr=(F,_)=>{const k=(0,D.WQX)(xe.N),C=(0,D.WQX)(hn.Ix);if(console.log("Level access guard:",{route:F.routeConfig?.path,requiredLevel:F.data?.requiredLevel,desktopOnly:F.data?.desktopOnly}),!k.isAuthenticated())return console.log("User not authenticated, redirecting to login"),C.navigate(["/login"]),!1;const O=F.data?.requiredLevel;if(O&&!k.hasMinimumLevel(O))return console.log(`User doesn't have required level ${O}, redirecting to home`),C.navigate(["/home"]),!1;const H=F.data?.desktopOnly;if(H){const Ue=function Mr(){const F=navigator.userAgent.toLowerCase();return/macintosh|windows|linux/i.test(F)&&!/android/i.test(F)}();if(console.log("Desktop check:",{desktopOnly:H,isDesktop:Ue}),!Ue)return console.log("User is not on desktop, redirecting to statistics"),C.navigate(["/statistics"]),!1}return console.log("Access granted"),!0},xr=[{path:"login",loadChildren:()=>b.e(3485).then(b.bind(b,3485)).then(F=>F.LoginPageModule)},{path:"register",loadChildren:()=>b.e(8618).then(b.bind(b,8618)).then(F=>F.RegisterPageModule)},{path:"home",loadChildren:()=>b.e(1299).then(b.bind(b,1299)).then(F=>F.HomePageModule),canActivate:[rr]},{path:"biodiversity",loadChildren:()=>b.e(5053).then(b.bind(b,5053)).then(F=>F.BiodiversityPageModule),canActivate:[rr]},{path:"health",loadChildren:()=>b.e(38).then(b.bind(b,38)).then(F=>F.HealthPageModule),canActivate:[rr]},{path:"threats",loadChildren:()=>b.e(3081).then(b.bind(b,3081)).then(F=>F.ThreatsPageModule),canActivate:[rr]},{path:"",redirectTo:"login",pathMatch:"full"},{path:"flora-fauna",loadChildren:()=>Promise.all([b.e(8910),b.e(6059),b.e(2076),b.e(6268)]).then(b.bind(b,6268)).then(F=>F.FloraFaunaPageModule),canActivate:[rr]},{path:"pollution",loadChildren:()=>Promise.all([b.e(8910),b.e(745)]).then(b.bind(b,745)).then(F=>F.PollutionPageModule),canActivate:[rr]},{path:"cleanup",loadChildren:()=>b.e(6524).then(b.bind(b,6524)).then(F=>F.CleanupPageModule),canActivate:[rr]},{path:"disturbances",loadChildren:()=>Promise.all([b.e(8910),b.e(3800)]).then(b.bind(b,3800)).then(F=>F.DisturbancesPageModule),canActivate:[rr]},{path:"health-form",loadChildren:()=>Promise.all([b.e(8910),b.e(2076),b.e(9081)]).then(b.bind(b,1462)).then(F=>F.HealthFormPageModule),canActivate:[rr],data:{requiredLevel:2}},{path:"restoration",loadChildren:()=>Promise.all([b.e(6059),b.e(8061)]).then(b.bind(b,8061)).then(F=>F.RestorationPageModule),canActivate:[rr],data:{requiredLevel:2}},{path:"outplanting",loadChildren:()=>Promise.all([b.e(6059),b.e(5369)]).then(b.bind(b,5369)).then(F=>F.OutplantingPageModule)},{path:"location-flora-fauna",loadChildren:()=>Promise.all([b.e(8910),b.e(5065),b.e(6354)]).then(b.bind(b,3973)).then(F=>F.LocationFloraFaunaPageModule)},{path:"location-health",loadChildren:()=>Promise.all([b.e(8910),b.e(5065),b.e(6637)]).then(b.bind(b,6637)).then(F=>F.LocationHealthPageModule)},{path:"statistics",loadChildren:()=>b.e(5579).then(b.bind(b,5579)).then(F=>F.StatisticsPageModule)},{path:"location-restoration",loadChildren:()=>Promise.all([b.e(8910),b.e(5065),b.e(1954)]).then(b.bind(b,1954)).then(F=>F.LocationRestorationPageModule)},{path:"location-outplanting",loadChildren:()=>Promise.all([b.e(8910),b.e(5065),b.e(1515)]).then(b.bind(b,1515)).then(F=>F.LocationOutplantingPageModule)},{path:"location-cleanup",loadChildren:()=>Promise.all([b.e(8910),b.e(5065),b.e(4562)]).then(b.bind(b,4562)).then(F=>F.LocationCleanupPageModule)},{path:"location-pollution",loadChildren:()=>Promise.all([b.e(8910),b.e(5065),b.e(4176)]).then(b.bind(b,4176)).then(F=>F.LocationPollutionPageModule)},{path:"location-disturbances",loadChildren:()=>Promise.all([b.e(8910),b.e(5065),b.e(6358)]).then(b.bind(b,3977)).then(F=>F.LocationDisturbancesPageModule)},{path:"location-biomass",loadChildren:()=>Promise.all([b.e(8910),b.e(5065),b.e(5676)]).then(b.bind(b,3295)).then(F=>F.LocationBiomassPageModule),canActivate:[rr],data:{requiredLevel:3}},{path:"biomass",loadChildren:()=>Promise.all([b.e(2076),b.e(9724)]).then(b.bind(b,9724)).then(F=>F.BiomassPageModule),canActivate:[rr],data:{requiredLevel:3}},{path:"data-analysis",loadChildren:()=>b.e(6368).then(b.bind(b,6368)).then(F=>F.DataAnalysisPageModule),canActivate:[rr],data:{requiredLevel:4,desktopOnly:!0}},{path:"version-manager",loadChildren:()=>b.e(1153).then(b.bind(b,1153)).then(F=>F.VersionManagerModule),canActivate:[rr],data:{requiredLevel:4,desktopOnly:!0}},{path:"monitoring-log",loadChildren:()=>b.e(609).then(b.bind(b,609)).then(F=>F.MonitoringLogPageModule)}];let Dr=(()=>{var F;class _{static#e=F=()=>(this.\u0275fac=function(O){return new(O||_)},this.\u0275mod=B.$C({type:_}),this.\u0275inj=D.G2t({imports:[Rr.iI.forRoot(xr,{preloadingStrategy:Rr.Kp}),Rr.iI]}))}return F(),_})();var Gr=b(4341);let ao=(()=>{var F;class _{static#e=F=()=>(this.\u0275fac=function(O){return new(O||_)},this.\u0275mod=B.$C({type:_}),this.\u0275inj=D.G2t({imports:[De.MD,vn.bv,Gr.YN]}))}return F(),_})(),$r=(()=>{var F;class _{static#e=F=()=>(this.\u0275fac=function(O){return new(O||_)},this.\u0275mod=B.$C({type:_}),this.\u0275inj=D.G2t({imports:[De.MD,vn.bv,Gr.YN]}))}return F(),_})(),Br=(()=>{var F;class _{static#e=F=()=>(this.\u0275fac=function(O){return new(O||_)},this.\u0275mod=B.$C({type:_,bootstrap:[Ar]}),this.\u0275inj=D.G2t({providers:[{provide:hn.b,useClass:Jn.jM},Pr.L,{provide:B.hnV,useFactory:()=>()=>nn.CapacitorUpdater.notifyAppReady(),multi:!0}],imports:[Mt,vn.bv.forRoot(),Dr,wt.q1,qe.sN.forRoot({echarts:()=>b.e(4209).then(b.bind(b,4209))}),ao,$r,Or.register("ngsw-worker.js",{enabled:!(0,Pe.naY)(),registrationStrategy:"registerWhenStable:30000"})]}))}return F(),_})();var jr=b(1288);window,typeof window>"u"?Promise.resolve():(0,jr.p)().then(()=>(0,jr.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],void 0)),bn().bootstrapModule(Br).catch(F=>console.log(F))},4572($t,ot,b){"use strict";b.d(ot,{z:()=>ie});var i=b(1985),o=b(3073),D=b(6648),Ce=b(3669),De=b(6450),B=b(9326),Pe=b(8496),Ge=b(4360),pe=b(5225);function ie(...p){const m=(0,B.lI)(p),y=(0,B.ms)(p),{args:v,keys:M}=(0,o.D)(p);if(0===v.length)return(0,D.H)([],m);const R=new i.c(function Ae(p,m,y=Ce.D){return v=>{l(m,()=>{const{length:M}=p,R=new Array(M);let V=M,ce=M;for(let z=0;z<M;z++)l(m,()=>{const te=(0,D.H)(p[z],m);let K=!1;te.subscribe((0,Ge._)(v,le=>{R[z]=le,K||(K=!0,ce--),ce||v.next(y(R.slice()))},()=>{--V||v.complete()}))},v)},v)}}(v,m,M?V=>(0,Pe.e)(M,V):Ce.D));return y?R.pipe((0,De.I)(y)):R}function l(p,m,y){p?(0,pe.N)(y,p,m):m()}},4632($t,ot,b){"use strict";b.d(ot,{T:()=>Ge});var i=b(467),o=b(2084),D=b(2615),Ce=b(918),De=b(5029),B=b(4938),Pe=b(8863);let Ge=(()=>{var pe;class ie{constructor(l,p,m,y){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=y,this.REPORTS_BUCKET="pollution",this.IMAGES_BUCKET="pollution-images",this.DRAFT_FILE="pollution_draft_current.json",this.PENDING_QUEUE_FILE="pollution_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} PollutionSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} PollutionSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(v=>console.error("\u274c PollutionSyncService: processPendingQueue failed:",v))}),setTimeout(()=>{console.log("\u{1f680} PollutionSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(v=>console.error("\u274c PollutionSyncService: Initial queue check failed:",v))},2e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 PollutionSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(v=>console.error("\u274c PollutionSyncService: Periodic queue check failed:",v))},3e5),console.log("\u2705 PollutionSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}getZoneName(l){return l?`Zone ${l}`:""}getQuadDisplay(l){if(!l)return"";const p=l.match(/\d+/);return p?`Quad ${p[0]}`:""}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Pollution${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];return l?.greyWaterDumping&&m.push("grey water"),l?.sewageDischarge&&m.push("sewage"),l?.dumpingTrash&&Array.isArray(l.dumpingTrash)&&l.dumpingTrash.length>0&&m.push(l.dumpingTrash.join(" & ")),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"pollution"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",y=l?.quadNumber||"";let v=`pollution_draft_${p}`;return m&&(v+=`_zone${m}`),y&&(v+=`_quad${y}`),`${v}.json`}dataUrlToBlob(l){return(0,i.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,i.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,i.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("PollutionSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=l.reportId||p.generateReportId(),v={reportId:y,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos,status:l.status||{incomplete:!0,sent:!1,pending:!1}},M=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(M,v);const R=yield p.sharedDataService.readJsonFile(M);if(!R||R.reportId!==v.reportId)throw new Error("PollutionSyncService: draft verification failed");const V=yield p.storage.getUser(),ce=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(V?.username||"unknown","pollution",y,ce)})()}loadDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,i.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(v=>v.startsWith("pollution_draft_")),y=[];for(const v of m)try{const M=yield l.sharedDataService.readJsonFile(v);if(M){const R=l.getLocationLabelFromFilename(v,M.form);y.push({draft:M,locationLabel:R})}}catch(M){console.warn("PollutionSyncService: Failed to read draft file",v,M)}return y})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,i.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,i.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:y}of m)p.push({report:y,status:"draft"});try{const v=(yield l.sharedDataService.listFiles()).filter(M=>{if(!M.startsWith("Pollution")||M.includes("_report_"))return!1;const R=M.replace(".json","");return/^Pollution\d{8}_\d{6}$/.test(R)&&!M.includes("_backup")&&!M.includes("_draft")&&!M.includes("_queue")});for(const M of v)try{const R=yield l.sharedDataService.readJsonFile(M);R&&p.push({report:R,status:R.status.sent?"submitted":"pending"})}catch(R){console.warn("PollutionSyncService: Failed to read report file",M,R)}}catch(y){console.error("PollutionSyncService: Failed to list files:",y)}return p.sort((y,v)=>{const M=new Date(y.report.updatedAt||y.report.createdAt).getTime();return new Date(v.report.updatedAt||v.report.createdAt).getTime()-M}),p})()}submitFinal(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=!0===l.isEditMode,v=l.existingReportId||p.generateReportId();let M=m;try{const ae=yield p.sharedDataService.readJsonFile(`${v}.json`);ae?.createdAt&&(M=ae.createdAt)}catch{}const R={reportId:v,createdAt:M,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:{general:[...l.photos.general||[]],greyWater:l.photos.greyWater||null,trash:l.photos.trash||null,sewage:l.photos.sewage||null},status:{incomplete:!1,sent:!1,pending:!1}};y&&(R.editedAt=m);const V=`${v}.json`;yield p.sharedDataService.writeJsonFile(V,R);const ce=yield p.sharedDataService.readJsonFile(V);if(!ce||ce.reportId!==v)throw new Error("PollutionSyncService: local report verification failed");const z=yield p.storage.getUser(),te=z?z.organization||z.username:null;let K;if(l.originalSubmittedBy&&te&&l.originalSubmittedBy!==te?K=`${l.originalSubmittedBy}, ${te}`:te&&(K=te),R.submittedBy=K,yield p.sharedDataService.writeJsonFile(V,R),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:v,localReportFile:V}),{reportId:v,queued:!0};try{yield p.uploadReportAndImages(R,l.originalSubmittedBy),R.status.sent=!0,R.status.pending=!1,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.clearDraft();const ve=(yield p.storage.getUser())?.username||"unknown",Ne=p.getFormSummary(l.formValue),he=R.submittedBy;return y?p.monitoringLog.recordFormEdited(ve,"pollution",v,!1,Ne,he):p.monitoringLog.recordFormSubmitted(ve,"pollution",v,!1,Ne,he),{reportId:v,queued:!1}}catch(ae){const ve=String(ae?.message?ae.message:ae);R.status.pending=!0,R.status.lastError=ve,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.enqueuePending({reportId:v,localReportFile:V});const he=(yield p.storage.getUser())?.username||"unknown",Le=p.getFormSummary(l.formValue),re=R.submittedBy;return y?p.monitoringLog.recordFormEdited(he,"pollution",v,!0,Le,re):p.monitoringLog.recordFormSubmitted(he,"pollution",v,!0,Le,re),{reportId:v,queued:!0}}})()}enqueuePending(l){var p=this;return(0,i.A)(function*(){console.log("\u{1f4dd} PollutionSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(v=>v.reportId===l.reportId)?console.log("\u26a0\ufe0f PollutionSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 PollutionSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} PollutionSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,i.A)(function*(){if(console.log("\u{1f504} PollutionSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f PollutionSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f PollutionSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} PollutionSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 PollutionSyncService: Queue is empty, nothing to process");const m=[];for(const y of p.items){console.log("\u{1f50d} PollutionSyncService: Processing item:",y.reportId,"(attempt",y.attempts+1,")");try{const v=yield l.sharedDataService.readJsonFile(y.localReportFile);if(!v){console.error("\u274c PollutionSyncService: Local report file missing for",y.reportId),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(v),console.log("\u2705 PollutionSyncService: Upload succeeded for",y.reportId),v.status.sent=!0,v.status.pending=!1,v.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(y.localReportFile,v),console.log("\u{1f4be} PollutionSyncService: Marked report as sent")}catch(v){console.error("\u274c PollutionSyncService: Upload failed for",y.reportId,":",v),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} PollutionSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} PollutionSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,i.A)(function*(){console.log("\u{1f4e4} PollutionSyncService: Starting upload for report",l.reportId);const y=m.getClient(),v={};l.photos.greyWater&&(v.greyWater=yield m.uploadImageDataUrl(`${l.reportId}/greyWater.jpg`,l.photos.greyWater)),l.photos.trash&&(v.trash=yield m.uploadImageDataUrl(`${l.reportId}/trash.jpg`,l.photos.trash)),l.photos.sewage&&(v.sewage=yield m.uploadImageDataUrl(`${l.reportId}/sewage.jpg`,l.photos.sewage));const M=[];for(let ae=0;ae<(l.photos.general||[]).length;ae++){const ve=l.photos.general[ae],Ne=yield m.uploadImageDataUrl(`${l.reportId}/general_${ae+1}.jpg`,ve);M.push(Ne)}const R=JSON.parse(JSON.stringify(l));R.photos={general:M,greyWater:v.greyWater||null,trash:v.trash||null,sewage:v.sewage||null},R.status={incomplete:!1,sent:!0,pending:!1};const V=`${l.reportId}.json`,ce=new Blob([JSON.stringify(R)],{type:"application/json"}),{error:z}=yield y.storage.from(m.REPORTS_BUCKET).upload(V,ce,{contentType:"application/json",upsert:!0});if(z)throw console.error("\u274c PollutionSyncService: JSON upload error:",z),z;console.log("\u2705 PollutionSyncService: Successfully uploaded JSON to",V);let te=l.submittedBy||null;if(!te){const ae=yield m.storage.getUser();te=ae?ae.organization||ae.username:null}const K={report_id:l.reportId,submitted_by:te,json_path:V,location:l.form.location||null,report_date:l.form.reportDate||null,zone_number:m.getZoneName(l.form.zoneNumber)||null,quad_number:m.getQuadDisplay(l.form.quadNumber)||null,requires_urgent_action:l.form.requiresUrgentAction||!1,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:le}=yield y.from("pollution_reports").upsert(K,{onConflict:"report_id"});if(le)throw console.error("\u274c PollutionSyncService: Database upsert error:",le),le;console.log("\u2705 PollutionSyncService: Successfully upserted into pollution_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,i.A)(function*(){const y=m.getClient(),v=yield m.dataUrlToBlob(p),{error:M}=yield y.storage.from(m.IMAGES_BUCKET).upload(l,v,{contentType:v.type||"image/jpeg",upsert:!0});if(M)throw console.error("\u274c PollutionSyncService: Image upload error for",l,":",M),M;return console.log("\u2705 PollutionSyncService: Successfully uploaded image to",l),l})()}static#e=pe=()=>(this.\u0275fac=function(p){return new(p||ie)(D.KVO(Ce.H),D.KVO(De.L),D.KVO(B.w),D.KVO(Pe.u))},this.\u0275prov=D.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return pe(),ie})()},4674($t,ot,b){"use strict";b.d(ot,{a:()=>y,b:()=>B,c:()=>Ce,d:()=>ce,e:()=>v,f:()=>pe,g:()=>Ae,h:()=>De,i:()=>Ge,j:()=>K,k:()=>p,l:()=>M,m:()=>ie,n:()=>m,o:()=>V,p:()=>z,q:()=>R,r:()=>l,s:()=>te,t:()=>o});var i=b(5705);const o=(le,ae=0)=>new Promise(ve=>{D(le,ae,ve)}),D=(le,ae=0,ve)=>{let Ne,he;const Le={passive:!0},Ke=()=>{Ne&&Ne()},Fe=we=>{(void 0===we||le===we.target)&&(Ke(),ve(we))};return le&&(le.addEventListener("webkitTransitionEnd",Fe,Le),le.addEventListener("transitionend",Fe,Le),he=setTimeout(Fe,ae+500),Ne=()=>{void 0!==he&&(clearTimeout(he),he=void 0),le.removeEventListener("webkitTransitionEnd",Fe,Le),le.removeEventListener("transitionend",Fe,Le)}),Ke},Ce=(le,ae)=>{le.componentOnReady?le.componentOnReady().then(ve=>ae(ve)):l(()=>ae(le))},De=le=>void 0!==le.componentOnReady,B=(le,ae=[])=>{const ve={};return ae.forEach(Ne=>{le.hasAttribute(Ne)&&(null!==le.getAttribute(Ne)&&(ve[Ne]=le.getAttribute(Ne)),le.removeAttribute(Ne))}),ve},Pe=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Ge=(le,ae)=>B(le,Pe),pe=(le,ae,ve,Ne)=>le.addEventListener(ae,ve,Ne),ie=(le,ae,ve,Ne)=>le.removeEventListener(ae,ve,Ne),Ae=(le,ae=le)=>le.shadowRoot||ae,l=le=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(le):"function"==typeof requestAnimationFrame?requestAnimationFrame(le):setTimeout(le),p=le=>!!le.shadowRoot&&!!le.attachShadow,m=le=>{if(le.focus(),le.classList.contains("ion-focusable")){const ae=le.closest("ion-app");ae&&ae.setFocus([le])}},y=(le,ae,ve,Ne,he)=>{{let Le=ae.querySelector("input.aux-input");Le||(Le=ae.ownerDocument.createElement("input"),Le.type="hidden",Le.classList.add("aux-input"),ae.appendChild(Le)),Le.disabled=he,Le.name=ve,Le.value=Ne||""}},v=(le,ae,ve)=>Math.max(le,Math.min(ae,ve)),M=(le,ae)=>{if(!le){const ve="ASSERT: "+ae;throw(0,i.j)(ve),new Error(ve)}},R=le=>{if(le){const ae=le.changedTouches;if(ae&&ae.length>0){const ve=ae[0];return{x:ve.clientX,y:ve.clientY}}if(void 0!==le.pageX)return{x:le.pageX,y:le.pageY}}return{x:0,y:0}},V=le=>{const ae="rtl"===document.dir;switch(le){case"start":return ae;case"end":return!ae;default:throw new Error(`"${le}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ce=(le,ae)=>{const ve=le._original||le;return{_original:le,emit:z(ve.emit.bind(ve),ae)}},z=(le,ae=0)=>{let ve;return(...Ne)=>{clearTimeout(ve),ve=setTimeout(le,ae,...Ne)}},te=(le,ae)=>{if(le??(le={}),ae??(ae={}),le===ae)return!0;const ve=Object.keys(le);if(ve.length!==Object.keys(ae).length)return!1;for(const Ne of ve)if(!(Ne in ae)||le[Ne]!==ae[Ne])return!1;return!0},K=le=>"number"==typeof le&&!isNaN(le)&&isFinite(le)},4688($t,ot,b){"use strict";b.d(ot,{$P:()=>z,sN:()=>le});var i=b(467),o=b(3664),D=b(2615),Ce=b(1413),De=b(6129);class B extends Ce.B{constructor(ve=1/0,Ne=1/0,he=De.U){super(),this._bufferSize=ve,this._windowTime=Ne,this._timestampProvider=he,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ne===1/0,this._bufferSize=Math.max(1,ve),this._windowTime=Math.max(1,Ne)}next(ve){const{isStopped:Ne,_buffer:he,_infiniteTimeWindow:Le,_timestampProvider:re,_windowTime:Ke}=this;Ne||(he.push(ve),!Le&&he.push(re.now()+Ke)),this._trimBuffer(),super.next(ve)}_subscribe(ve){this._throwIfClosed(),this._trimBuffer();const Ne=this._innerSubscribe(ve),{_infiniteTimeWindow:he,_buffer:Le}=this,re=Le.slice();for(let Ke=0;Ke<re.length&&!ve.closed;Ke+=he?1:2)ve.next(re[Ke]);return this._checkFinalizedStatuses(ve),Ne}_trimBuffer(){const{_bufferSize:ve,_timestampProvider:Ne,_buffer:he,_infiniteTimeWindow:Le}=this,re=(Le?1:2)*ve;if(ve<1/0&&re<he.length&&he.splice(0,he.length-re),!Le){const Ke=Ne.now();let Fe=0;for(let we=1;we<he.length&&he[we]<=Ke;we+=2)Fe=we;Fe&&he.splice(0,Fe+1)}}}var Pe=b(8359),Ge=b(8839),pe=b(1985),ie=b(9974),Ae=b(4360),l=b(8750),m=b(9470);function M(ae,ve=Ge.E,Ne){const he=function v(ae=0,ve,Ne=Ge.b){let he=-1;return null!=ve&&((0,m.m)(ve)?Ne=ve:he=ve),new pe.c(Le=>{let re=function y(ae){return ae instanceof Date&&!isNaN(ae)}(ae)?+ae-Ne.now():ae;re<0&&(re=0);let Ke=0;return Ne.schedule(function(){Le.closed||(Le.next(Ke++),0<=he?this.schedule(void 0,he):Le.complete())},re)})}(ae,ve);return function p(ae,ve){return(0,ie.N)((Ne,he)=>{const{leading:Le=!0,trailing:re=!1}=ve??{};let Ke=!1,Fe=null,we=null,Oe=!1;const Ye=()=>{we?.unsubscribe(),we=null,re&&(q(),Oe&&he.complete())},Ve=()=>{we=null,Oe&&he.complete()},be=ge=>we=(0,l.Tg)(ae(ge)).subscribe((0,Ae._)(he,Ye,Ve)),q=()=>{if(Ke){Ke=!1;const ge=Fe;Fe=null,he.next(ge),!Oe&&be(ge)}};Ne.subscribe((0,Ae._)(he,ge=>{Ke=!0,Fe=ge,(!we||we.closed)&&(Le?q():be(ge))},()=>{Oe=!0,(!(re&&Ke&&we)||we.closed)&&he.complete()}))})}(()=>he,Ne)}var R=b(5558);class V{constructor(){this.subject=new B(1),this.subscriptions=new Pe.yU}doFilter(ve){this.subject.next(ve)}dispose(){this.subscriptions.unsubscribe()}notEmpty(ve,Ne){this.subscriptions.add(this.subject.subscribe(he=>{if(he[ve]){const Le=he[ve].currentValue;null!=Le&&Ne(Le)}}))}has(ve,Ne){this.subscriptions.add(this.subject.subscribe(he=>{he[ve]&&Ne(he[ve].currentValue)}))}notFirst(ve,Ne){this.subscriptions.add(this.subject.subscribe(he=>{he[ve]&&!he[ve].isFirstChange()&&Ne(he[ve].currentValue)}))}notFirstAndEmpty(ve,Ne){this.subscriptions.add(this.subject.subscribe(he=>{if(he[ve]&&!he[ve].isFirstChange()){const Le=he[ve].currentValue;null!=Le&&Ne(Le)}}))}}const ce=new D.nKC("NGX_ECHARTS_CONFIG");let z=(()=>{var ae;class ve{constructor(he,Le,re){this.el=Le,this.ngZone=re,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new o.bkB,this.optionsError=new o.bkB,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new B(1),this.resize$=new Ce.B,this.changeFilter=new V,this.resizeObFired=!1,this.echarts=he.echarts,this.theme=he.theme||null}ngOnChanges(he){this.changeFilter.doFilter(he)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(M(100,Ge.E,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(he=>{for(const Le of he)Le.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",he=>this.onOptionsChange(he)),this.changeFilter.notFirstAndEmpty("merge",he=>this.setOption(he)),this.changeFilter.has("loading",he=>this.toggleLoading(!!he)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(he){this.chart?he?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(Le=>he?Le.showLoading(this.loadingType,this.loadingOpts):Le.hideLoading())}setOption(he,Le){if(this.chart)try{this.chart.setOption(he,Le)}catch(re){console.error(re),this.optionsError.emit(re)}}refreshChart(){var he=this;return(0,i.A)(function*(){he.dispose(),yield he.initChart()})()}createChart(){const he=this.el.nativeElement;if(window&&window.getComputedStyle){const Le=window.getComputedStyle(he,null).getPropertyValue("height");(!Le||"0px"===Le)&&(!he.style.height||"0px"===he.style.height)&&(he.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:re})=>re(he,this.theme,this.initOpts)))}initChart(){var he=this;return(0,i.A)(function*(){yield he.onOptionsChange(he.options),he.merge&&he.chart&&he.setOption(he.merge)})()}onOptionsChange(he){var Le=this;return(0,i.A)(function*(){he&&(Le.chart||(Le.chart=yield Le.createChart(),Le.chart$.next(Le.chart),Le.chartInit.emit(Le.chart)),Le.setOption(Le.options,!0))})()}createLazyEvent(he){return this.chartInit.pipe((0,R.n)(Le=>new pe.c(re=>(Le.on(he,Ke=>this.ngZone.run(()=>re.next(Ke))),()=>{this.chart&&(this.chart.isDisposed()||Le.off(he))}))))}static#e=ae=()=>(this.\u0275fac=function(Le){return new(Le||ve)(o.rXU(ce),o.rXU(o.aKT),o.rXU(o.SKi))},this.\u0275dir=o.FsC({type:ve,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[o.OA$]}))}return ae(),ve})();const K=ae=>({provide:ce,useValue:ae});let le=(()=>{var ae;class ve{static forRoot(he){return{ngModule:ve,providers:[K(he)]}}static forChild(){return{ngModule:ve}}static#e=ae=()=>(this.\u0275fac=function(Le){return new(Le||ve)},this.\u0275mod=o.$C({type:ve}),this.\u0275inj=D.G2t({}))}return ae(),ve})()},4761($t,ot,b){"use strict";b.d(ot,{l:()=>o});const o=function i(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4938($t,ot,b){"use strict";b.d(ot,{w:()=>B});var i=b(467);const D=(0,b(5083).registerPlugin)("Preferences",{web:()=>b.e(2924).then(b.bind(b,2924)).then(Pe=>new Pe.PreferencesWeb)});var Ce=b(2615),De=b(918);let B=(()=>{var Pe;class Ge{constructor(ie){this.sharedDataService=ie,this.USER_KEY="leap_current_user",this.USER_FILE="leap_current_user.json"}setUser(ie){var Ae=this;return(0,i.A)(function*(){yield Ae.sharedDataService.writeJsonFile(Ae.USER_FILE,ie)})()}getUser(){var ie=this;return(0,i.A)(function*(){try{const Ae=yield ie.sharedDataService.readJsonFile(ie.USER_FILE);if(Ae)return Ae;const{value:l}=yield D.get({key:ie.USER_KEY});if(l){const p=JSON.parse(l);return yield ie.sharedDataService.writeJsonFile(ie.USER_FILE,p),yield D.remove({key:ie.USER_KEY}),p}return null}catch(Ae){return console.error("Storage: Error getting user:",Ae),null}})()}clearUser(){var ie=this;return(0,i.A)(function*(){yield ie.sharedDataService.deleteJsonFile(ie.USER_FILE),yield D.remove({key:ie.USER_KEY})})()}clearAll(){var ie=this;return(0,i.A)(function*(){yield ie.clearUser()})()}static#e=Pe=()=>(this.\u0275fac=function(Ae){return new(Ae||Ge)(Ce.KVO(De.H))},this.\u0275prov=Ce.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}))}return Pe(),Ge})()},5029($t,ot,b){"use strict";b.d(ot,{L:()=>$o});var i=b(467),o=b(1635);class Ce extends Error{constructor(u,c="FunctionsError",d){super(u),this.name=c,this.context=d}}class De extends Ce{constructor(u){super("Failed to send a request to the Edge Function","FunctionsFetchError",u)}}class B extends Ce{constructor(u){super("Relay Error invoking the Edge Function","FunctionsRelayError",u)}}class Pe extends Ce{constructor(u){super("Edge Function returned a non-2xx status code","FunctionsHttpError",u)}}var Ge=function(f){return f.Any="any",f.ApNortheast1="ap-northeast-1",f.ApNortheast2="ap-northeast-2",f.ApSouth1="ap-south-1",f.ApSoutheast1="ap-southeast-1",f.ApSoutheast2="ap-southeast-2",f.CaCentral1="ca-central-1",f.EuCentral1="eu-central-1",f.EuWest1="eu-west-1",f.EuWest2="eu-west-2",f.EuWest3="eu-west-3",f.SaEast1="sa-east-1",f.UsEast1="us-east-1",f.UsWest1="us-west-1",f.UsWest2="us-west-2",f}(Ge||{});class pe{constructor(u,{headers:c={},customFetch:d,region:I=Ge.Any}={}){var f;this.url=u,this.headers=c,this.region=I,this.fetch=(f=d)?(...u)=>f(...u):(...u)=>fetch(...u)}setAuth(u){this.headers.Authorization=`Bearer ${u}`}invoke(u){return(0,o.sH)(this,arguments,void 0,function*(c,d={}){var I;let U,G;try{const{headers:ne,method:Se,body:Be,signal:h,timeout:S}=d;let E={},{region:w}=d;w||(w=this.region);const $=new URL(`${this.url}/${c}`);let Z;w&&"any"!==w&&(E["x-region"]=w,$.searchParams.set("forceFunctionRegion",w)),Be&&(ne&&!Object.prototype.hasOwnProperty.call(ne,"Content-Type")||!ne)?typeof Blob<"u"&&Be instanceof Blob||Be instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",Z=Be):"string"==typeof Be?(E["Content-Type"]="text/plain",Z=Be):typeof FormData<"u"&&Be instanceof FormData?Z=Be:(E["Content-Type"]="application/json",Z=JSON.stringify(Be)):Z=!Be||"string"==typeof Be||typeof Blob<"u"&&Be instanceof Blob||Be instanceof ArrayBuffer||typeof FormData<"u"&&Be instanceof FormData?Be:JSON.stringify(Be);let _e=h;S&&(G=new AbortController,U=setTimeout(()=>G.abort(),S),h?(_e=G.signal,h.addEventListener("abort",()=>G.abort())):_e=G.signal);const Qe=yield this.fetch($.toString(),{method:Se||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),ne),body:Z,signal:_e}).catch(fn=>{throw new De(fn)}),ht=Qe.headers.get("x-relay-error");if(ht&&"true"===ht)throw new B(Qe);if(!Qe.ok)throw new Pe(Qe);let sn,Vt=(null!==(I=Qe.headers.get("Content-Type"))&&void 0!==I?I:"text/plain").split(";")[0].trim();return sn="application/json"===Vt?yield Qe.json():"application/octet-stream"===Vt||"application/pdf"===Vt?yield Qe.blob():"text/event-stream"===Vt?Qe:"multipart/form-data"===Vt?yield Qe.formData():yield Qe.text(),{data:sn,error:null,response:Qe}}catch(ne){return{data:null,error:ne,response:ne instanceof Pe||ne instanceof B?ne.context:void 0}}finally{U&&clearTimeout(U)}})}}var ie=class extends Error{constructor(f){super(f.message),this.name="PostgrestError",this.details=f.details,this.hint=f.hint,this.code=f.code}},Ae=class{constructor(f){var u,c,d;this.shouldThrowOnError=!1,this.method=f.method,this.url=f.url,this.headers=new Headers(f.headers),this.schema=f.schema,this.body=f.body,this.shouldThrowOnError=null!==(u=f.shouldThrowOnError)&&void 0!==u&&u,this.signal=f.signal,this.isMaybeSingle=null!==(c=f.isMaybeSingle)&&void 0!==c&&c,this.urlLengthLimit=null!==(d=f.urlLengthLimit)&&void 0!==d?d:8e3,this.fetch=f.fetch?f.fetch:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(f,u){return this.headers=new Headers(this.headers),this.headers.set(f,u),this}then(f,u){var c=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let I=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var U=(0,i.A)(function*(G){let ne=null,Se=null,Be=null,h=G.status,S=G.statusText;if(G.ok){var E,w;if("HEAD"!==c.method){var $;const ht=yield G.text();""===ht||(Se="text/csv"===c.headers.get("Accept")||c.headers.get("Accept")&&null!==($=c.headers.get("Accept"))&&void 0!==$&&$.includes("application/vnd.pgrst.plan+text")?ht:JSON.parse(ht))}const _e=null===(E=c.headers.get("Prefer"))||void 0===E?void 0:E.match(/count=(exact|planned|estimated)/),Qe=null===(w=G.headers.get("content-range"))||void 0===w?void 0:w.split("/");_e&&Qe&&Qe.length>1&&(Be=parseInt(Qe[1])),c.isMaybeSingle&&"GET"===c.method&&Array.isArray(Se)&&(Se.length>1?(ne={code:"PGRST116",details:`Results contain ${Se.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Se=null,Be=null,h=406,S="Not Acceptable"):Se=1===Se.length?Se[0]:null)}else{var Z;const _e=yield G.text();try{ne=JSON.parse(_e),Array.isArray(ne)&&404===G.status&&(Se=[],ne=null,h=200,S="OK")}catch{404===G.status&&""===_e?(h=204,S="No Content"):ne={message:_e}}if(ne&&c.isMaybeSingle&&!(null==ne||null===(Z=ne.details)||void 0===Z)&&Z.includes("0 rows")&&(ne=null,h=200,S="OK"),ne&&c.shouldThrowOnError)throw new ie(ne)}return{error:ne,data:Se,count:Be,status:h,statusText:S}});return function(G){return U.apply(this,arguments)}}());return this.shouldThrowOnError||(I=I.catch(U=>{var G;let ne="",Se="",Be="";const h=U?.cause;if(h){var S,E,w,$;const Qe=null!==(S=h?.message)&&void 0!==S?S:"",ht=null!==(E=h?.code)&&void 0!==E?E:"";ne=`${null!==(w=U?.name)&&void 0!==w?w:"FetchError"}: ${U?.message}`,ne+=`\n\nCaused by: ${null!==($=h?.name)&&void 0!==$?$:"Error"}: ${Qe}`,ht&&(ne+=` (${ht})`),h?.stack&&(ne+=`\n${h.stack}`)}else{var Z;ne=null!==(Z=U?.stack)&&void 0!==Z?Z:""}const _e=this.url.toString().length;return"AbortError"===U?.name||"ABORT_ERR"===U?.code?(Be="",Se="Request was aborted (timeout or manual cancellation)",_e>this.urlLengthLimit&&(Se+=`. Note: Your request URL is ${_e} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):("HeadersOverflowError"===h?.name||"UND_ERR_HEADERS_OVERFLOW"===h?.code)&&(Be="",Se="HTTP headers exceeded server limits (typically 16KB)",_e>this.urlLengthLimit&&(Se+=`. Your request URL is ${_e} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${null!==(G=U?.name)&&void 0!==G?G:"FetchError"}: ${U?.message}`,details:ne,hint:Se,code:Be},data:null,count:null,status:0,statusText:""}})),I.then(f,u)}returns(){return this}overrideTypes(){return this}},l=class extends Ae{select(f){let u=!1;const c=(f??"*").split("").map(d=>/\s/.test(d)&&!u?"":('"'===d&&(u=!u),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(f,{ascending:u=!0,nullsFirst:c,foreignTable:d,referencedTable:I=d}={}){const U=I?`${I}.order`:"order",G=this.url.searchParams.get(U);return this.url.searchParams.set(U,`${G?`${G},`:""}${f}.${u?"asc":"desc"}${void 0===c?"":c?".nullsfirst":".nullslast"}`),this}limit(f,{foreignTable:u,referencedTable:c=u}={}){return this.url.searchParams.set(typeof c>"u"?"limit":`${c}.limit`,`${f}`),this}range(f,u,{foreignTable:c,referencedTable:d=c}={}){const U=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(typeof d>"u"?"offset":`${d}.offset`,`${f}`),this.url.searchParams.set(U,""+(u-f+1)),this}abortSignal(f){return this.signal=f,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:f=!1,verbose:u=!1,settings:c=!1,buffers:d=!1,wal:I=!1,format:U="text"}={}){var G;const ne=[f?"analyze":null,u?"verbose":null,c?"settings":null,d?"buffers":null,I?"wal":null].filter(Boolean).join("|"),Se=null!==(G=this.headers.get("Accept"))&&void 0!==G?G:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${U}; for="${Se}"; options=${ne};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(f){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${f}`),this}};const p=new RegExp("[,()]");var m=class extends l{eq(f,u){return this.url.searchParams.append(f,`eq.${u}`),this}neq(f,u){return this.url.searchParams.append(f,`neq.${u}`),this}gt(f,u){return this.url.searchParams.append(f,`gt.${u}`),this}gte(f,u){return this.url.searchParams.append(f,`gte.${u}`),this}lt(f,u){return this.url.searchParams.append(f,`lt.${u}`),this}lte(f,u){return this.url.searchParams.append(f,`lte.${u}`),this}like(f,u){return this.url.searchParams.append(f,`like.${u}`),this}likeAllOf(f,u){return this.url.searchParams.append(f,`like(all).{${u.join(",")}}`),this}likeAnyOf(f,u){return this.url.searchParams.append(f,`like(any).{${u.join(",")}}`),this}ilike(f,u){return this.url.searchParams.append(f,`ilike.${u}`),this}ilikeAllOf(f,u){return this.url.searchParams.append(f,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(f,u){return this.url.searchParams.append(f,`ilike(any).{${u.join(",")}}`),this}regexMatch(f,u){return this.url.searchParams.append(f,`match.${u}`),this}regexIMatch(f,u){return this.url.searchParams.append(f,`imatch.${u}`),this}is(f,u){return this.url.searchParams.append(f,`is.${u}`),this}isDistinct(f,u){return this.url.searchParams.append(f,`isdistinct.${u}`),this}in(f,u){const c=Array.from(new Set(u)).map(d=>"string"==typeof d&&p.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(f,`in.(${c})`),this}notIn(f,u){const c=Array.from(new Set(u)).map(d=>"string"==typeof d&&p.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(f,`not.in.(${c})`),this}contains(f,u){return"string"==typeof u?this.url.searchParams.append(f,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(f,`cs.{${u.join(",")}}`):this.url.searchParams.append(f,`cs.${JSON.stringify(u)}`),this}containedBy(f,u){return"string"==typeof u?this.url.searchParams.append(f,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(f,`cd.{${u.join(",")}}`):this.url.searchParams.append(f,`cd.${JSON.stringify(u)}`),this}rangeGt(f,u){return this.url.searchParams.append(f,`sr.${u}`),this}rangeGte(f,u){return this.url.searchParams.append(f,`nxl.${u}`),this}rangeLt(f,u){return this.url.searchParams.append(f,`sl.${u}`),this}rangeLte(f,u){return this.url.searchParams.append(f,`nxr.${u}`),this}rangeAdjacent(f,u){return this.url.searchParams.append(f,`adj.${u}`),this}overlaps(f,u){return this.url.searchParams.append(f,"string"==typeof u?`ov.${u}`:`ov.{${u.join(",")}}`),this}textSearch(f,u,{config:c,type:d}={}){let I="";return"plain"===d?I="pl":"phrase"===d?I="ph":"websearch"===d&&(I="w"),this.url.searchParams.append(f,`${I}fts${void 0===c?"":`(${c})`}.${u}`),this}match(f){return Object.entries(f).forEach(([u,c])=>{this.url.searchParams.append(u,`eq.${c}`)}),this}not(f,u,c){return this.url.searchParams.append(f,`not.${u}.${c}`),this}or(f,{foreignTable:u,referencedTable:c=u}={}){return this.url.searchParams.append(c?`${c}.or`:"or",`(${f})`),this}filter(f,u,c){return this.url.searchParams.append(f,`${u}.${c}`),this}},y=class{constructor(f,{headers:u={},schema:c,fetch:d,urlLengthLimit:I=8e3}){this.url=f,this.headers=new Headers(u),this.schema=c,this.fetch=d,this.urlLengthLimit=I}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(f,u){const{head:c=!1,count:d}=u??{},I=c?"HEAD":"GET";let U=!1;const G=(f??"*").split("").map(Be=>/\s/.test(Be)&&!U?"":('"'===Be&&(U=!U),Be)).join(""),{url:ne,headers:Se}=this.cloneRequestState();return ne.searchParams.set("select",G),d&&Se.append("Prefer",`count=${d}`),new m({method:I,url:ne,headers:Se,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(f,{count:u,defaultToNull:c=!0}={}){var d;const{url:U,headers:G}=this.cloneRequestState();if(u&&G.append("Prefer",`count=${u}`),c||G.append("Prefer","missing=default"),Array.isArray(f)){const ne=f.reduce((Se,Be)=>Se.concat(Object.keys(Be)),[]);if(ne.length>0){const Se=[...new Set(ne)].map(Be=>`"${Be}"`);U.searchParams.set("columns",Se.join(","))}}return new m({method:"POST",url:U,headers:G,schema:this.schema,body:f,fetch:null!==(d=this.fetch)&&void 0!==d?d:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(f,{onConflict:u,ignoreDuplicates:c=!1,count:d,defaultToNull:I=!0}={}){var U;const{url:ne,headers:Se}=this.cloneRequestState();if(Se.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),void 0!==u&&ne.searchParams.set("on_conflict",u),d&&Se.append("Prefer",`count=${d}`),I||Se.append("Prefer","missing=default"),Array.isArray(f)){const Be=f.reduce((h,S)=>h.concat(Object.keys(S)),[]);if(Be.length>0){const h=[...new Set(Be)].map(S=>`"${S}"`);ne.searchParams.set("columns",h.join(","))}}return new m({method:"POST",url:ne,headers:Se,schema:this.schema,body:f,fetch:null!==(U=this.fetch)&&void 0!==U?U:fetch,urlLengthLimit:this.urlLengthLimit})}update(f,{count:u}={}){var c;const{url:I,headers:U}=this.cloneRequestState();return u&&U.append("Prefer",`count=${u}`),new m({method:"PATCH",url:I,headers:U,schema:this.schema,body:f,fetch:null!==(c=this.fetch)&&void 0!==c?c:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:f}={}){var u;const{url:d,headers:I}=this.cloneRequestState();return f&&I.append("Prefer",`count=${f}`),new m({method:"DELETE",url:d,headers:I,schema:this.schema,fetch:null!==(u=this.fetch)&&void 0!==u?u:fetch,urlLengthLimit:this.urlLengthLimit})}};function v(f){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(f)}function V(f,u,c){return(u=function R(f){var u=function M(f,u){if("object"!=v(f)||!f)return f;var c=f[Symbol.toPrimitive];if(void 0!==c){var d=c.call(f,u||"default");if("object"!=v(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(f)}(f,"string");return"symbol"==v(u)?u:u+""}(u))in f?Object.defineProperty(f,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):f[u]=c,f}function ce(f,u){var c=Object.keys(f);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(f);u&&(d=d.filter(function(I){return Object.getOwnPropertyDescriptor(f,I).enumerable})),c.push.apply(c,d)}return c}function z(f){for(var u=1;u<arguments.length;u++){var c=null!=arguments[u]?arguments[u]:{};u%2?ce(Object(c),!0).forEach(function(d){V(f,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(c)):ce(Object(c)).forEach(function(d){Object.defineProperty(f,d,Object.getOwnPropertyDescriptor(c,d))})}return f}var te=class py{constructor(u,{headers:c={},schema:d,fetch:I,timeout:U,urlLengthLimit:G=8e3}={}){this.url=u,this.headers=new Headers(c),this.schemaName=d,this.urlLengthLimit=G;const ne=I??globalThis.fetch;this.fetch=void 0!==U&&U>0?(Se,Be)=>{const h=new AbortController,S=setTimeout(()=>h.abort(),U),E=Be?.signal;if(E){if(E.aborted)return clearTimeout(S),ne(Se,Be);const w=()=>{clearTimeout(S),h.abort()};return E.addEventListener("abort",w,{once:!0}),ne(Se,z(z({},Be),{},{signal:h.signal})).finally(()=>{clearTimeout(S),E.removeEventListener("abort",w)})}return ne(Se,z(z({},Be),{},{signal:h.signal})).finally(()=>clearTimeout(S))}:ne}from(u){if(!u||"string"!=typeof u||""===u.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");return new y(new URL(`${this.url}/${u}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(u){return new py(this.url,{headers:this.headers,schema:u,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(u,c={},{head:d=!1,get:I=!1,count:U}={}){var G;let ne;const Se=new URL(`${this.url}/rpc/${u}`);let Be;const h=w=>null!==w&&"object"==typeof w&&(!Array.isArray(w)||w.some(h)),S=d&&Object.values(c).some(h);S?(ne="POST",Be=c):d||I?(ne=d?"HEAD":"GET",Object.entries(c).filter(([w,$])=>void 0!==$).map(([w,$])=>[w,Array.isArray($)?`{${$.join(",")}}`:`${$}`]).forEach(([w,$])=>{Se.searchParams.append(w,$)})):(ne="POST",Be=c);const E=new Headers(this.headers);return S?E.set("Prefer",U?`count=${U},return=minimal`:"return=minimal"):U&&E.set("Prefer",`count=${U}`),new m({method:ne,url:Se,headers:E,schema:this.schemaName,body:Be,fetch:null!==(G=this.fetch)&&void 0!==G?G:fetch,urlLengthLimit:this.urlLengthLimit})}};const ae=class le{constructor(){}static detectEnvironment(){var u;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(u=navigator.userAgent)&&void 0!==u&&u.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const c=globalThis.process;if(c){const d=c.versions;if(d&&d.node){const U=parseInt(d.node.replace(/^v/,"").split(".")[0]);return U>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${U} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${U} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const u=this.detectEnvironment();if(u.constructor)return u.constructor;let c=u.error||"WebSocket not supported in this environment.";throw u.workaround&&(c+=`\n\nSuggested solution: ${u.workaround}`),new Error(c)}static createWebSocket(u,c){return new(this.getWebSocketConstructor())(u,c)}static isWebSocketSupported(){try{const u=this.detectEnvironment();return"native"===u.type||"ws"===u.type}catch{return!1}}};var Ye=function(f){return f[f.connecting=0]="connecting",f[f.open=1]="open",f[f.closing=2]="closing",f[f.closed=3]="closed",f}(Ye||{}),Ve=function(f){return f.closed="closed",f.errored="errored",f.joined="joined",f.joining="joining",f.leaving="leaving",f}(Ve||{}),be=function(f){return f.close="phx_close",f.error="phx_error",f.join="phx_join",f.reply="phx_reply",f.leave="phx_leave",f.access_token="access_token",f}(be||{}),q=function(f){return f.websocket="websocket",f}(q||{}),ge=function(f){return f.Connecting="connecting",f.Open="open",f.Closing="closing",f.Closed="closed",f}(ge||{});class Ie{constructor(u){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=u??[]}encode(u,c){return u.event!==this.BROADCAST_EVENT||u.payload instanceof ArrayBuffer||"string"!=typeof u.payload.event?c(JSON.stringify([u.join_ref,u.ref,u.topic,u.event,u.payload])):c(this._binaryEncodeUserBroadcastPush(u))}_binaryEncodeUserBroadcastPush(u){var c;return this._isArrayBuffer(null===(c=u.payload)||void 0===c?void 0:c.payload)?this._encodeBinaryUserBroadcastPush(u):this._encodeJsonUserBroadcastPush(u)}_encodeBinaryUserBroadcastPush(u){var c,d;const I=null!==(d=null===(c=u.payload)||void 0===c?void 0:c.payload)&&void 0!==d?d:new ArrayBuffer(0);return this._encodeUserBroadcastPush(u,this.BINARY_ENCODING,I)}_encodeJsonUserBroadcastPush(u){var c,d;const I=null!==(d=null===(c=u.payload)||void 0===c?void 0:c.payload)&&void 0!==d?d:{},G=(new TextEncoder).encode(JSON.stringify(I)).buffer;return this._encodeUserBroadcastPush(u,this.JSON_ENCODING,G)}_encodeUserBroadcastPush(u,c,d){var I,U;const G=u.topic,ne=null!==(I=u.ref)&&void 0!==I?I:"",Se=null!==(U=u.join_ref)&&void 0!==U?U:"",Be=u.payload.event,h=this.allowedMetadataKeys?this._pick(u.payload,this.allowedMetadataKeys):{},S=0===Object.keys(h).length?"":JSON.stringify(h);if(Se.length>255)throw new Error(`joinRef length ${Se.length} exceeds maximum of 255`);if(ne.length>255)throw new Error(`ref length ${ne.length} exceeds maximum of 255`);if(G.length>255)throw new Error(`topic length ${G.length} exceeds maximum of 255`);if(Be.length>255)throw new Error(`userEvent length ${Be.length} exceeds maximum of 255`);if(S.length>255)throw new Error(`metadata length ${S.length} exceeds maximum of 255`);const w=new ArrayBuffer(this.HEADER_LENGTH+(this.USER_BROADCAST_PUSH_META_LENGTH+Se.length+ne.length+G.length+Be.length+S.length));let $=new DataView(w),Z=0;$.setUint8(Z++,this.KINDS.userBroadcastPush),$.setUint8(Z++,Se.length),$.setUint8(Z++,ne.length),$.setUint8(Z++,G.length),$.setUint8(Z++,Be.length),$.setUint8(Z++,S.length),$.setUint8(Z++,c),Array.from(Se,Qe=>$.setUint8(Z++,Qe.charCodeAt(0))),Array.from(ne,Qe=>$.setUint8(Z++,Qe.charCodeAt(0))),Array.from(G,Qe=>$.setUint8(Z++,Qe.charCodeAt(0))),Array.from(Be,Qe=>$.setUint8(Z++,Qe.charCodeAt(0))),Array.from(S,Qe=>$.setUint8(Z++,Qe.charCodeAt(0)));var _e=new Uint8Array(w.byteLength+d.byteLength);return _e.set(new Uint8Array(w),0),_e.set(new Uint8Array(d),w.byteLength),_e.buffer}decode(u,c){if(this._isArrayBuffer(u))return c(this._binaryDecode(u));if("string"==typeof u){const d=JSON.parse(u),[I,U,G,ne,Se]=d;return c({join_ref:I,ref:U,topic:G,event:ne,payload:Se})}return c({})}_binaryDecode(u){const c=new DataView(u),d=c.getUint8(0),I=new TextDecoder;if(d===this.KINDS.userBroadcast)return this._decodeUserBroadcast(u,c,I)}_decodeUserBroadcast(u,c,d){const I=c.getUint8(1),U=c.getUint8(2),G=c.getUint8(3),ne=c.getUint8(4);let Se=this.HEADER_LENGTH+4;const Be=d.decode(u.slice(Se,Se+I));Se+=I;const h=d.decode(u.slice(Se,Se+U));Se+=U;const S=d.decode(u.slice(Se,Se+G));Se+=G;const E=u.slice(Se,u.byteLength),w=ne===this.JSON_ENCODING?JSON.parse(d.decode(E)):E,$={type:this.BROADCAST_EVENT,event:h,payload:w};return G>0&&($.meta=JSON.parse(S)),{join_ref:null,ref:null,topic:Be,event:this.BROADCAST_EVENT,payload:$}}_isArrayBuffer(u){var c;return u instanceof ArrayBuffer||"ArrayBuffer"===(null===(c=u?.constructor)||void 0===c?void 0:c.name)}_pick(u,c){return u&&"object"==typeof u?Object.fromEntries(Object.entries(u).filter(([d])=>c.includes(d))):{}}}class He{constructor(u,c){this.callback=u,this.timerCalc=c,this.timer=void 0,this.tries=0,this.callback=u,this.timerCalc=c}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt=function(f){return f.abstime="abstime",f.bool="bool",f.date="date",f.daterange="daterange",f.float4="float4",f.float8="float8",f.int2="int2",f.int4="int4",f.int4range="int4range",f.int8="int8",f.int8range="int8range",f.json="json",f.jsonb="jsonb",f.money="money",f.numeric="numeric",f.oid="oid",f.reltime="reltime",f.text="text",f.time="time",f.timestamp="timestamp",f.timestamptz="timestamptz",f.timetz="timetz",f.tsrange="tsrange",f.tstzrange="tstzrange",f}(tt||{});const dt=(f,u,c={})=>{var d;const I=null!==(d=c.skipTypes)&&void 0!==d?d:[];return u?Object.keys(u).reduce((U,G)=>(U[G]=St(G,f,u,I),U),{}):{}},St=(f,u,c,d)=>{const I=u.find(ne=>ne.name===f),U=I?.type,G=c[f];return U&&!d.includes(U)?vt(U,G):Ft(G)},vt=(f,u)=>{if("_"===f.charAt(0)){const c=f.slice(1,f.length);return xt(u,c)}switch(f){case tt.bool:return lt(u);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return Ut(u);case tt.json:case tt.jsonb:return ut(u);case tt.timestamp:return Tt(u);default:return Ft(u)}},Ft=f=>f,lt=f=>{switch(f){case"t":return!0;case"f":return!1;default:return f}},Ut=f=>{if("string"==typeof f){const u=parseFloat(f);if(!Number.isNaN(u))return u}return f},ut=f=>{if("string"==typeof f)try{return JSON.parse(f)}catch{return f}return f},xt=(f,u)=>{if("string"!=typeof f)return f;const c=f.length-1;if("{"===f[0]&&"}"===f[c]){let U;const G=f.slice(1,c);try{U=JSON.parse("["+G+"]")}catch{U=G?G.split(","):[]}return U.map(ne=>vt(u,ne))}return f},Tt=f=>"string"==typeof f?f.replace(" ","T"):f,Jt=f=>{const u=new URL(f);return u.protocol=u.protocol.replace(/^ws/i,"http"),u.pathname=u.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),u.pathname=""===u.pathname||"/"===u.pathname?"/api/broadcast":u.pathname+"/api/broadcast",u.href};class ct{constructor(u,c,d={},I=1e4){this.channel=u,this.event=c,this.payload=d,this.timeout=I,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(u){this.timeout=u,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(u){this.payload=Object.assign(Object.assign({},this.payload),u)}receive(u,c){var d;return this._hasReceived(u)&&c(null===(d=this.receivedResp)||void 0===d?void 0:d.response),this.recHooks.push({status:u,callback:c}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},c=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=c,this._matchReceive(c)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(u,c){this.refEvent&&this.channel._trigger(this.refEvent,{status:u,response:c})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:u,response:c}){this.recHooks.filter(d=>d.status===u).forEach(d=>d.callback(c))}_hasReceived(u){return this.receivedResp&&this.receivedResp.status===u}}class Et{constructor(u,c){this.channel=u,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const d=c?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(d.state,{},I=>{const{onJoin:U,onLeave:G,onSync:ne}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Et.syncState(this.state,I,U,G),this.pendingDiffs.forEach(Se=>{this.state=Et.syncDiff(this.state,Se,U,G)}),this.pendingDiffs=[],ne()}),this.channel._on(d.diff,{},I=>{const{onJoin:U,onLeave:G,onSync:ne}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(I):(this.state=Et.syncDiff(this.state,I,U,G),ne())}),this.onJoin((I,U,G)=>{this.channel._trigger("presence",{event:"join",key:I,currentPresences:U,newPresences:G})}),this.onLeave((I,U,G)=>{this.channel._trigger("presence",{event:"leave",key:I,currentPresences:U,leftPresences:G})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(u,c,d,I){const U=this.cloneDeep(u),G=this.transformState(c),ne={},Se={};return this.map(U,(Be,h)=>{G[Be]||(Se[Be]=h)}),this.map(G,(Be,h)=>{const S=U[Be];if(S){const E=h.map(_e=>_e.presence_ref),w=S.map(_e=>_e.presence_ref),$=h.filter(_e=>w.indexOf(_e.presence_ref)<0),Z=S.filter(_e=>E.indexOf(_e.presence_ref)<0);$.length>0&&(ne[Be]=$),Z.length>0&&(Se[Be]=Z)}else ne[Be]=h}),this.syncDiff(U,{joins:ne,leaves:Se},d,I)}static syncDiff(u,c,d,I){const{joins:U,leaves:G}={joins:this.transformState(c.joins),leaves:this.transformState(c.leaves)};return d||(d=()=>{}),I||(I=()=>{}),this.map(U,(ne,Se)=>{var Be;const h=null!==(Be=u[ne])&&void 0!==Be?Be:[];if(u[ne]=this.cloneDeep(Se),h.length>0){const S=u[ne].map(w=>w.presence_ref),E=h.filter(w=>S.indexOf(w.presence_ref)<0);u[ne].unshift(...E)}d(ne,h,Se)}),this.map(G,(ne,Se)=>{let Be=u[ne];if(!Be)return;const h=Se.map(S=>S.presence_ref);Be=Be.filter(S=>h.indexOf(S.presence_ref)<0),u[ne]=Be,I(ne,Be,Se),0===Be.length&&delete u[ne]}),u}static map(u,c){return Object.getOwnPropertyNames(u).map(d=>c(d,u[d]))}static transformState(u){return u=this.cloneDeep(u),Object.getOwnPropertyNames(u).reduce((c,d)=>{const I=u[d];return c[d]="metas"in I?I.metas.map(U=>(U.presence_ref=U.phx_ref,delete U.phx_ref,delete U.phx_ref_prev,U)):I,c},{})}static cloneDeep(u){return JSON.parse(JSON.stringify(u))}onJoin(u){this.caller.onJoin=u}onLeave(u){this.caller.onLeave=u}onSync(u){this.caller.onSync=u}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bn=function(f){return f.BROADCAST="broadcast",f.PRESENCE="presence",f.POSTGRES_CHANGES="postgres_changes",f.SYSTEM="system",f}(bn||{}),Un=function(f){return f.SUBSCRIBED="SUBSCRIBED",f.TIMED_OUT="TIMED_OUT",f.CLOSED="CLOSED",f.CHANNEL_ERROR="CHANNEL_ERROR",f}(Un||{});class ln{constructor(u,c={config:{}},d){var I,U;if(this.topic=u,this.params=c,this.socket=d,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=u.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},c.config),this.timeout=this.socket.timeout,this.joinPush=new ct(this,be.join,this.params,this.timeout),this.rejoinTimer=new He(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(G=>G.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(G=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,G),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",G=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,G),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(be.reply,{},(G,ne)=>{this._trigger(this._replyEventName(ne),G)}),this.presence=new Et(this),this.broadcastEndpointURL=Jt(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(U=null===(I=this.params.config)||void 0===I?void 0:I.broadcast)&&void 0!==U&&U.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(u,c=this.timeout){var I,U,G,d=this;if(this.socket.isConnected()||this.socket.connect(),this.state==Ve.closed){const{config:{broadcast:ne,presence:Se,private:Be}}=this.params,h=null!==(U=null===(I=this.bindings.postgres_changes)||void 0===I?void 0:I.map($=>$.filter))&&void 0!==U?U:[],S=!!this.bindings[bn.PRESENCE]&&this.bindings[bn.PRESENCE].length>0||!0===(null===(G=this.params.config.presence)||void 0===G?void 0:G.enabled),E={},w={broadcast:ne,presence:Object.assign(Object.assign({},Se),{enabled:S}),postgres_changes:h,private:Be};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError($=>u?.(Un.CHANNEL_ERROR,$)),this._onClose(()=>u?.(Un.CLOSED)),this.updateJoinPayload(Object.assign({config:w},E)),this.joinedOnce=!0,this._rejoin(c),this.joinPush.receive("ok",function(){var $=(0,i.A)(function*({postgres_changes:Z}){var _e;if(d.socket._isManualToken()||d.socket.setAuth(),void 0!==Z){const Qe=d.bindings.postgres_changes,ht=null!==(_e=Qe?.length)&&void 0!==_e?_e:0,Vt=[];for(let sn=0;sn<ht;sn++){const fn=Qe[sn],{filter:{event:dr,schema:so,table:ir,filter:Vr}}=fn,ho=Z&&Z[sn];if(!(ho&&ho.event===dr&&ln.isFilterValueEqual(ho.schema,so)&&ln.isFilterValueEqual(ho.table,ir)&&ln.isFilterValueEqual(ho.filter,Vr)))return d.unsubscribe(),d.state=Ve.errored,void u?.(Un.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));Vt.push(Object.assign(Object.assign({},fn),{id:ho.id}))}return d.bindings.postgres_changes=Vt,void(u&&u(Un.SUBSCRIBED))}u?.(Un.SUBSCRIBED)});return function(Z){return $.apply(this,arguments)}}()).receive("error",$=>{this.state=Ve.errored,u?.(Un.CHANNEL_ERROR,new Error(JSON.stringify(Object.values($).join(", ")||"error")))}).receive("timeout",()=>{u?.(Un.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(u){var c=this;return(0,i.A)(function*(d,I={}){return yield c.send({type:"presence",event:"track",payload:d},I.timeout||c.timeout)}).apply(this,arguments)}untrack(){var u=this;return(0,i.A)(function*(c={}){return yield u.send({type:"presence",event:"untrack"},c)}).apply(this,arguments)}on(u,c,d){var I=this;return this.state===Ve.joined&&u===bn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then((0,i.A)(function*(){return yield I.subscribe()}))),this._on(u,c,d)}httpSend(u,c){var d=this;return(0,i.A)(function*(I,U,G={}){var ne;if(null==U)return Promise.reject("Payload is required for httpSend()");const Se={apikey:d.socket.apiKey?d.socket.apiKey:"","Content-Type":"application/json"};d.socket.accessTokenValue&&(Se.Authorization=`Bearer ${d.socket.accessTokenValue}`);const Be={method:"POST",headers:Se,body:JSON.stringify({messages:[{topic:d.subTopic,event:I,payload:U,private:d.private}]})},h=yield d._fetchWithTimeout(d.broadcastEndpointURL,Be,null!==(ne=G.timeout)&&void 0!==ne?ne:d.timeout);if(202===h.status)return{success:!0};let S=h.statusText;try{const E=yield h.json();S=E.error||E.message||S}catch{}return Promise.reject(new Error(S))}).apply(this,arguments)}send(u){var c=this;return(0,i.A)(function*(d,I={}){var U,G;if(c._canPush()||"broadcast"!==d.type)return new Promise(ne=>{var Se,Be,h;const S=c._push(d.type,d,I.timeout||c.timeout);"broadcast"===d.type&&!(null!==(h=null===(Be=null===(Se=c.params)||void 0===Se?void 0:Se.config)||void 0===Be?void 0:Be.broadcast)&&void 0!==h&&h.ack)&&ne("ok"),S.receive("ok",()=>ne("ok")),S.receive("error",()=>ne("error")),S.receive("timeout",()=>ne("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:ne,payload:Se}=d,Be={apikey:c.socket.apiKey?c.socket.apiKey:"","Content-Type":"application/json"};c.socket.accessTokenValue&&(Be.Authorization=`Bearer ${c.socket.accessTokenValue}`);const h={method:"POST",headers:Be,body:JSON.stringify({messages:[{topic:c.subTopic,event:ne,payload:Se,private:c.private}]})};try{const S=yield c._fetchWithTimeout(c.broadcastEndpointURL,h,null!==(U=I.timeout)&&void 0!==U?U:c.timeout);return yield null===(G=S.body)||void 0===G?void 0:G.cancel(),S.ok?"ok":"error"}catch(S){return"AbortError"===S.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(u){this.joinPush.updatePayload(u)}unsubscribe(u=this.timeout){this.state=Ve.leaving;const c=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(be.close,"leave",this._joinRef())};this.joinPush.destroy();let d=null;return new Promise(I=>{d=new ct(this,be.leave,{},u),d.receive("ok",()=>{c(),I("ok")}).receive("timeout",()=>{c(),I("timed out")}).receive("error",()=>{I("error")}),d.send(),this._canPush()||d.trigger("ok",{})}).finally(()=>{d?.destroy()})}teardown(){this.pushBuffer.forEach(u=>u.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ve.closed,this.bindings={}}_fetchWithTimeout(u,c,d){var I=this;return(0,i.A)(function*(){const U=new AbortController,G=setTimeout(()=>U.abort(),d),ne=yield I.socket.fetch(u,Object.assign(Object.assign({},c),{signal:U.signal}));return clearTimeout(G),ne})()}_push(u,c,d=this.timeout){if(!this.joinedOnce)throw`tried to push '${u}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let I=new ct(this,u,c,d);return this._canPush()?I.send():this._addToPushBuffer(I),I}_addToPushBuffer(u){if(u.startTimeout(),this.pushBuffer.push(u),this.pushBuffer.length>100){const c=this.pushBuffer.shift();c&&(c.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${c.event}`,c.payload))}}_onMessage(u,c,d){return c}_isMember(u){return this.topic===u}_joinRef(){return this.joinPush.ref}_trigger(u,c,d){var I,U;const G=u.toLocaleLowerCase(),{close:ne,error:Se,leave:Be,join:h}=be;if(d&&[ne,Se,Be,h].indexOf(G)>=0&&d!==this._joinRef())return;let E=this._onMessage(G,c,d);if(c&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(G)?null===(I=this.bindings.postgres_changes)||void 0===I||I.filter(w=>{var $,Z,_e;return"*"===(null===($=w.filter)||void 0===$?void 0:$.event)||(null===(_e=null===(Z=w.filter)||void 0===Z?void 0:Z.event)||void 0===_e?void 0:_e.toLocaleLowerCase())===G}).map(w=>w.callback(E,d)):null===(U=this.bindings[G])||void 0===U||U.filter(w=>{var $,Z,_e,Qe,ht,Vt;if(["broadcast","presence","postgres_changes"].includes(G)){if("id"in w){const sn=w.id,fn=null===($=w.filter)||void 0===$?void 0:$.event;return sn&&(null===(Z=c.ids)||void 0===Z?void 0:Z.includes(sn))&&("*"===fn||fn?.toLocaleLowerCase()===(null===(_e=c.data)||void 0===_e?void 0:_e.type.toLocaleLowerCase()))}{const sn=null===(ht=null===(Qe=w?.filter)||void 0===Qe?void 0:Qe.event)||void 0===ht?void 0:ht.toLocaleLowerCase();return"*"===sn||sn===(null===(Vt=c?.event)||void 0===Vt?void 0:Vt.toLocaleLowerCase())}}return w.type.toLocaleLowerCase()===G}).map(w=>{if("object"==typeof E&&"ids"in E){const $=E.data,{schema:Z,table:_e,commit_timestamp:Qe,type:ht,errors:Vt}=$;E=Object.assign(Object.assign({},{schema:Z,table:_e,commit_timestamp:Qe,eventType:ht,new:{},old:{},errors:Vt}),this._getPayloadRecords($))}w.callback(E,d)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(u){return`chan_reply_${u}`}_on(u,c,d){const I=u.toLocaleLowerCase(),U={type:I,filter:c,callback:d};return this.bindings[I]?this.bindings[I].push(U):this.bindings[I]=[U],this}_off(u,c){const d=u.toLocaleLowerCase();return this.bindings[d]&&(this.bindings[d]=this.bindings[d].filter(I=>{var U;return!((null===(U=I.type)||void 0===U?void 0:U.toLocaleLowerCase())===d&&ln.isEqual(I.filter,c))})),this}static isEqual(u,c){if(Object.keys(u).length!==Object.keys(c).length)return!1;for(const d in u)if(u[d]!==c[d])return!1;return!0}static isFilterValueEqual(u,c){return(u??void 0)===(c??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(u){this._on(be.close,{},u)}_onError(u){this._on(be.error,{},c=>u(c))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(u=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(u))}_getPayloadRecords(u){const c={new:{},old:{}};return("INSERT"===u.type||"UPDATE"===u.type)&&(c.new=dt(u.columns,u.record)),("UPDATE"===u.type||"DELETE"===u.type)&&(c.old=dt(u.columns,u.old_record)),c}}const Mt=()=>{},wt=[1e3,2e3,5e3,1e4];class cn{constructor(u,c){var d;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Mt,this.ref=0,this.reconnectTimer=null,this.vsn="2.0.0",this.logger=Mt,this.conn=null,this.sendBuffer=[],this.serializer=new Ie,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=I=>I?(...U)=>I(...U):(...U)=>fetch(...U),null===(d=c?.params)||void 0===d||!d.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=c.params.apikey,this.endPoint=`${u}/${q.websocket}`,this.httpEndpoint=Jt(u),this._initializeOptions(c),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(c?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ae.createWebSocket(this.endpointURL())}catch(u){this._setConnectionState("disconnected");const c=u.message;throw c.includes("Node.js")?new Error(`${c}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${c}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(u,c){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const d=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(d),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(u?this.conn.close(u,c??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(u){var c=this;return(0,i.A)(function*(){const d=yield u.unsubscribe();return"ok"===d&&c._remove(u),0===c.channels.length&&c.disconnect(),d})()}removeAllChannels(){var u=this;return(0,i.A)(function*(){const c=yield Promise.all(u.channels.map(d=>d.unsubscribe()));return u.channels=[],u.disconnect(),c})()}log(u,c,d){this.logger(u,c,d)}connectionState(){switch(this.conn&&this.conn.readyState){case Ye.connecting:return ge.Connecting;case Ye.open:return ge.Open;case Ye.closing:return ge.Closing;default:return ge.Closed}}isConnected(){return this.connectionState()===ge.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(u,c={config:{}}){const d=`realtime:${u}`,I=this.getChannels().find(U=>U.topic===d);if(I)return I;{const U=new ln(`realtime:${u}`,c,this);return this.channels.push(U),U}}push(u){const{topic:c,event:d,payload:I,ref:U}=u,G=()=>{this.encode(u,ne=>{var Se;null===(Se=this.conn)||void 0===Se||Se.send(ne)})};this.log("push",`${c} ${d} (${U})`,I),this.isConnected()?G():this.sendBuffer.push(G)}setAuth(){var u=this;return(0,i.A)(function*(c=null){u._authPromise=u._performAuth(c);try{yield u._authPromise}finally{u._authPromise=null}}).apply(this,arguments)}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){var u=this;return(0,i.A)(function*(){var c;if(u.isConnected()){if(u.pendingHeartbeatRef){u.pendingHeartbeatRef=null,u._heartbeatSentAt=null,u.log("transport","heartbeat timeout. Attempting to re-establish connection");try{u.heartbeatCallback("timeout")}catch(d){u.log("error","error in heartbeat callback",d)}return u._wasManualDisconnect=!1,null===(c=u.conn)||void 0===c||c.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var d;u.isConnected()||null===(d=u.reconnectTimer)||void 0===d||d.scheduleTimeout()},100)}u._heartbeatSentAt=Date.now(),u.pendingHeartbeatRef=u._makeRef(),u.push({topic:"phoenix",event:"heartbeat",payload:{},ref:u.pendingHeartbeatRef});try{u.heartbeatCallback("sent")}catch(d){u.log("error","error in heartbeat callback",d)}u._setAuthSafely("heartbeat")}else try{u.heartbeatCallback("disconnected")}catch(d){u.log("error","error in heartbeat callback",d)}})()}onHeartbeat(u){this.heartbeatCallback=u}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(u=>u()),this.sendBuffer=[])}_makeRef(){let u=this.ref+1;return this.ref=u===this.ref?0:u,this.ref.toString()}_leaveOpenTopic(u){let c=this.channels.find(d=>d.topic===u&&(d._isJoined()||d._isJoining()));c&&(this.log("transport",`leaving duplicate topic "${u}"`),c.unsubscribe())}_remove(u){this.channels=this.channels.filter(c=>c.topic!==u.topic)}_onConnMessage(u){this.decode(u.data,c=>{if("phoenix"===c.topic&&"phx_reply"===c.event&&c.ref&&c.ref===this.pendingHeartbeatRef){const Be=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback("ok"===c.payload.status?"ok":"error",Be)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:d,event:I,payload:U,ref:G}=c;this.log("receive",`${U.status||""} ${d} ${I} ${G?`(${G})`:""}`.trim(),U),this.channels.filter(Be=>Be._isMember(d)).forEach(Be=>Be._trigger(I,U,G)),this._triggerStateCallbacks("message",c)})}_clearTimer(u){var c;"heartbeat"===u&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===u&&(null===(c=this.reconnectTimer)||void 0===c||c.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=u=>this._onConnError(u),this.conn.onmessage=u=>this._onConnMessage(u),this.conn.onclose=u=>this._onConnClose(u),this.conn.readyState===Ye.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ye.open||this.conn.readyState===Ye.connecting)try{this.conn.close()}catch(u){this.log("error","Error closing connection",u)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(u=>u.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(c=>{this.log("error","error waiting for auth on connect",c),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const u=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(u),this.workerRef.onerror=c=>{this.log("worker","worker error",c.message),this._terminateWorker()},this.workerRef.onmessage=c=>{"keepAlive"===c.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(u){var c;this._setConnectionState("disconnected"),this.log("transport","close",u),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(c=this.reconnectTimer)||void 0===c||c.scheduleTimeout(),this._triggerStateCallbacks("close",u)}_onConnError(u){this._setConnectionState("disconnected"),this.log("transport",`${u}`),this._triggerChanError(),this._triggerStateCallbacks("error",u);try{this.heartbeatCallback("error")}catch(c){this.log("error","error in heartbeat callback",c)}}_triggerChanError(){this.channels.forEach(u=>u._trigger(be.error))}_appendParams(u,c){if(0===Object.keys(c).length)return u;const d=u.match(/\?/)?"&":"?";return`${u}${d}${new URLSearchParams(c)}`}_workerObjectUrl(u){let c;if(u)c=u;else{const d=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});c=URL.createObjectURL(d)}return c}_setConnectionState(u,c=!1){this._connectionState=u,"connecting"===u?this._wasManualDisconnect=!1:"disconnecting"===u&&(this._wasManualDisconnect=c)}_performAuth(){var u=this;return(0,i.A)(function*(c=null){let d,I=!1;if(c)d=c,I=!0;else if(u.accessToken)try{d=yield u.accessToken()}catch(U){u.log("error","Error fetching access token from callback",U),d=u.accessTokenValue}else d=u.accessTokenValue;I?u._manuallySetToken=!0:u.accessToken&&(u._manuallySetToken=!1),u.accessTokenValue!=d&&(u.accessTokenValue=d,u.channels.forEach(U=>{d&&U.updateJoinPayload({access_token:d,version:"realtime-js/2.95.0"}),U.joinedOnce&&U._isJoined()&&U._push(be.access_token,{access_token:d})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var u=this;return(0,i.A)(function*(){u._authPromise&&(yield u._authPromise)})()}_setAuthSafely(u="general"){this._isManualToken()||this.setAuth().catch(c=>{this.log("error",`Error setting auth in ${u}`,c)})}_triggerStateCallbacks(u,c){try{this.stateChangeCallbacks[u].forEach(d=>{try{d(c)}catch(I){this.log("error",`error in ${u} callback`,I)}})}catch(d){this.log("error",`error triggering ${u} callbacks`,d)}}_setupReconnectionTimer(){var u=this;this.reconnectTimer=new He((0,i.A)(function*(){setTimeout((0,i.A)(function*(){yield u._waitForAuthIfNeeded(),u.isConnected()||u.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(u){var c,d,I,U,G,ne,Se,Be,h,S,E,w;switch(this.transport=null!==(c=u?.transport)&&void 0!==c?c:null,this.timeout=null!==(d=u?.timeout)&&void 0!==d?d:1e4,this.heartbeatIntervalMs=null!==(I=u?.heartbeatIntervalMs)&&void 0!==I?I:25e3,this.worker=null!==(U=u?.worker)&&void 0!==U&&U,this.accessToken=null!==(G=u?.accessToken)&&void 0!==G?G:null,this.heartbeatCallback=null!==(ne=u?.heartbeatCallback)&&void 0!==ne?ne:Mt,this.vsn=null!==(Se=u?.vsn)&&void 0!==Se?Se:"2.0.0",u?.params&&(this.params=u.params),u?.logger&&(this.logger=u.logger),(u?.logLevel||u?.log_level)&&(this.logLevel=u.logLevel||u.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(Be=u?.reconnectAfterMs)&&void 0!==Be?Be:$=>wt[$-1]||1e4,this.vsn){case"1.0.0":this.encode=null!==(h=u?.encode)&&void 0!==h?h:($,Z)=>Z(JSON.stringify($)),this.decode=null!==(S=u?.decode)&&void 0!==S?S:($,Z)=>Z(JSON.parse($));break;case"2.0.0":this.encode=null!==(E=u?.encode)&&void 0!==E?E:this.serializer.encode.bind(this.serializer),this.decode=null!==(w=u?.decode)&&void 0!==w?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=u?.workerUrl}}}var Dn=class extends Error{constructor(f,u){super(f),this.name="IcebergError",this.status=u.status,this.icebergType=u.icebergType,this.icebergCode=u.icebergCode,this.details=u.details,this.isCommitStateUnknown="CommitStateUnknownException"===u.icebergType||[500,502,504].includes(u.status)&&!0===u.icebergType?.includes("CommitState")}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function Vn(){return(Vn=(0,i.A)(function*(f){return f&&"none"!==f.type?"bearer"===f.type?{Authorization:`Bearer ${f.token}`}:"header"===f.type?{[f.name]:f.value}:"custom"===f.type?yield f.getHeaders():{}:{}})).apply(this,arguments)}function lr(f){return f.join("\x1f")}var fr=class{constructor(f,u=""){this.client=f,this.prefix=u}listNamespaces(f){var u=this;return(0,i.A)(function*(){const c=f?{parent:lr(f.namespace)}:void 0;return(yield u.client.request({method:"GET",path:`${u.prefix}/namespaces`,query:c})).data.namespaces.map(I=>({namespace:I}))})()}createNamespace(f,u){var c=this;return(0,i.A)(function*(){const d={namespace:f.namespace,properties:u?.properties};return(yield c.client.request({method:"POST",path:`${c.prefix}/namespaces`,body:d})).data})()}dropNamespace(f){var u=this;return(0,i.A)(function*(){yield u.client.request({method:"DELETE",path:`${u.prefix}/namespaces/${lr(f.namespace)}`})})()}loadNamespaceMetadata(f){var u=this;return(0,i.A)(function*(){return{properties:(yield u.client.request({method:"GET",path:`${u.prefix}/namespaces/${lr(f.namespace)}`})).data.properties}})()}namespaceExists(f){var u=this;return(0,i.A)(function*(){try{return yield u.client.request({method:"HEAD",path:`${u.prefix}/namespaces/${lr(f.namespace)}`}),!0}catch(c){if(c instanceof Dn&&404===c.status)return!1;throw c}})()}createNamespaceIfNotExists(f,u){var c=this;return(0,i.A)(function*(){try{return yield c.createNamespace(f,u)}catch(d){if(d instanceof Dn&&409===d.status)return;throw d}})()}};function _r(f){return f.join("\x1f")}var Gn=class{constructor(f,u="",c){this.client=f,this.prefix=u,this.accessDelegation=c}listTables(f){var u=this;return(0,i.A)(function*(){return(yield u.client.request({method:"GET",path:`${u.prefix}/namespaces/${_r(f.namespace)}/tables`})).data.identifiers})()}createTable(f,u){var c=this;return(0,i.A)(function*(){const d={};return c.accessDelegation&&(d["X-Iceberg-Access-Delegation"]=c.accessDelegation),(yield c.client.request({method:"POST",path:`${c.prefix}/namespaces/${_r(f.namespace)}/tables`,body:u,headers:d})).data.metadata})()}updateTable(f,u){var c=this;return(0,i.A)(function*(){const d=yield c.client.request({method:"POST",path:`${c.prefix}/namespaces/${_r(f.namespace)}/tables/${f.name}`,body:u});return{"metadata-location":d.data["metadata-location"],metadata:d.data.metadata}})()}dropTable(f,u){var c=this;return(0,i.A)(function*(){yield c.client.request({method:"DELETE",path:`${c.prefix}/namespaces/${_r(f.namespace)}/tables/${f.name}`,query:{purgeRequested:String(u?.purge??!1)}})})()}loadTable(f){var u=this;return(0,i.A)(function*(){const c={};return u.accessDelegation&&(c["X-Iceberg-Access-Delegation"]=u.accessDelegation),(yield u.client.request({method:"GET",path:`${u.prefix}/namespaces/${_r(f.namespace)}/tables/${f.name}`,headers:c})).data.metadata})()}tableExists(f){var u=this;return(0,i.A)(function*(){const c={};u.accessDelegation&&(c["X-Iceberg-Access-Delegation"]=u.accessDelegation);try{return yield u.client.request({method:"HEAD",path:`${u.prefix}/namespaces/${_r(f.namespace)}/tables/${f.name}`,headers:c}),!0}catch(d){if(d instanceof Dn&&404===d.status)return!1;throw d}})()}createTableIfNotExists(f,u){var c=this;return(0,i.A)(function*(){try{return yield c.createTable(f,u)}catch(d){if(d instanceof Dn&&409===d.status)return yield c.loadTable({namespace:f.namespace,name:u.name});throw d}})()}},qn=class{constructor(f){let u="v1";f.catalogName&&(u+=`/${f.catalogName}`);const c=f.baseUrl.endsWith("/")?f.baseUrl:`${f.baseUrl}/`;this.client=function or(f){const u=f.fetchImpl??globalThis.fetch;return{request(c){return(0,i.A)(function*({method:d,path:I,query:U,body:G,headers:ne}){const Se=function Zn(f,u,c){const d=new URL(u,f);if(c)for(const[I,U]of Object.entries(c))void 0!==U&&d.searchParams.set(I,U);return d.toString()}(f.baseUrl,I,U),Be=yield function Qn(f){return Vn.apply(this,arguments)}(f.auth),h=yield u(Se,{method:d,headers:{...G?{"Content-Type":"application/json"}:{},...Be,...ne},body:G?JSON.stringify(G):void 0}),S=yield h.text(),E=(h.headers.get("content-type")||"").includes("application/json"),w=E&&S?JSON.parse(S):S;if(!h.ok){const $=E?w:void 0,Z=$?.error;throw new Dn(Z?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:Z?.type,icebergCode:Z?.code,details:$})}return{status:h.status,headers:h.headers,data:w}}).apply(this,arguments)}}}({baseUrl:c,auth:f.auth,fetchImpl:f.fetch}),this.accessDelegation=f.accessDelegation?.join(","),this.namespaceOps=new fr(this.client,u),this.tableOps=new Gn(this.client,u,this.accessDelegation)}listNamespaces(f){var u=this;return(0,i.A)(function*(){return u.namespaceOps.listNamespaces(f)})()}createNamespace(f,u){var c=this;return(0,i.A)(function*(){return c.namespaceOps.createNamespace(f,u)})()}dropNamespace(f){var u=this;return(0,i.A)(function*(){yield u.namespaceOps.dropNamespace(f)})()}loadNamespaceMetadata(f){var u=this;return(0,i.A)(function*(){return u.namespaceOps.loadNamespaceMetadata(f)})()}listTables(f){var u=this;return(0,i.A)(function*(){return u.tableOps.listTables(f)})()}createTable(f,u){var c=this;return(0,i.A)(function*(){return c.tableOps.createTable(f,u)})()}updateTable(f,u){var c=this;return(0,i.A)(function*(){return c.tableOps.updateTable(f,u)})()}dropTable(f,u){var c=this;return(0,i.A)(function*(){yield c.tableOps.dropTable(f,u)})()}loadTable(f){var u=this;return(0,i.A)(function*(){return u.tableOps.loadTable(f)})()}namespaceExists(f){var u=this;return(0,i.A)(function*(){return u.namespaceOps.namespaceExists(f)})()}tableExists(f){var u=this;return(0,i.A)(function*(){return u.tableOps.tableExists(f)})()}createNamespaceIfNotExists(f,u){var c=this;return(0,i.A)(function*(){return c.namespaceOps.createNamespaceIfNotExists(f,u)})()}createTableIfNotExists(f,u){var c=this;return(0,i.A)(function*(){return c.tableOps.createTableIfNotExists(f,u)})()}},vn=class extends Error{constructor(f,u="storage",c,d){super(f),this.__isStorageError=!0,this.namespace=u,this.name="vectors"===u?"StorageVectorsError":"StorageError",this.status=c,this.statusCode=d}};function qe(f){return"object"==typeof f&&null!==f&&"__isStorageError"in f}var Je=class extends vn{constructor(f,u,c,d="storage"){super(f,d,u,c),this.name="vectors"===d?"StorageVectorsApiError":"StorageApiError",this.status=u,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ct=class extends vn{constructor(f,u,c="storage"){super(f,c),this.name="vectors"===c?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=u}};const Wn=f=>{if(Array.isArray(f))return f.map(c=>Wn(c));if("function"==typeof f||f!==Object(f))return f;const u={};return Object.entries(f).forEach(([c,d])=>{const I=c.replace(/([-_][a-z])/gi,U=>U.toUpperCase().replace(/[-_]/g,""));u[I]=Wn(d)}),u};function er(f){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(f)}function hr(f,u,c){return(u=function br(f){var u=function Bn(f,u){if("object"!=er(f)||!f)return f;var c=f[Symbol.toPrimitive];if(void 0!==c){var d=c.call(f,u||"default");if("object"!=er(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(f)}(f,"string");return"symbol"==er(u)?u:u+""}(u))in f?Object.defineProperty(f,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):f[u]=c,f}function In(f,u){var c=Object.keys(f);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(f);u&&(d=d.filter(function(I){return Object.getOwnPropertyDescriptor(f,I).enumerable})),c.push.apply(c,d)}return c}function dn(f){for(var u=1;u<arguments.length;u++){var c=null!=arguments[u]?arguments[u]:{};u%2?In(Object(c),!0).forEach(function(d){hr(f,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(c)):In(Object(c)).forEach(function(d){Object.defineProperty(f,d,Object.getOwnPropertyDescriptor(c,d))})}return f}const Lr=f=>{var u;return f.msg||f.message||f.error_description||("string"==typeof f.error?f.error:null===(u=f.error)||void 0===u?void 0:u.message)||JSON.stringify(f)},Ur=function(){var f=(0,i.A)(function*(u,c,d,I){if(u&&"object"==typeof u&&"status"in u&&"ok"in u&&"number"==typeof u.status&&!d?.noResolveJson){const U=u,G=U.status||500;"function"==typeof U.json?U.json().then(ne=>{const Se=ne?.statusCode||ne?.code||G+"";c(new Je(Lr(ne),G,Se,I))}).catch(()=>{c(new Je(U.statusText||`HTTP ${G} error`,G,G+"",I))}):c(new Je(U.statusText||`HTTP ${G} error`,G,G+"",I))}else c(new Ct(Lr(u),u,I))});return function(c,d,I,U){return f.apply(this,arguments)}}();function nt(f,u,c,d,I,U,G){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,i.A)(function*(f,u,c,d,I,U,G){return new Promise((ne,Se)=>{f(c,((f,u,c,d)=>{const I={method:f,headers:u?.headers||{}};return"GET"!==f&&"HEAD"!==f&&d?((f=>{if("object"!=typeof f||null===f)return!1;const u=Object.getPrototypeOf(f);return!(null!==u&&u!==Object.prototype&&null!==Object.getPrototypeOf(u)||Symbol.toStringTag in f||Symbol.iterator in f)})(d)?(I.headers=dn({"Content-Type":"application/json"},u?.headers),I.body=JSON.stringify(d)):I.body=d,u?.duplex&&(I.duplex=u.duplex),dn(dn({},I),c)):dn(dn({},I),c)})(u,d,I,U)).then(Be=>{if(!Be.ok)throw Be;if(d?.noResolveJson)return Be;if("vectors"===G){const h=Be.headers.get("content-type");if("0"===Be.headers.get("content-length")||204===Be.status)return{};if(!h||!h.includes("application/json"))return{}}return Be.json()}).then(Be=>ne(Be)).catch(Be=>Ur(Be,Se,d,G))})})).apply(this,arguments)}function ye(f="storage"){return{get:(u=(0,i.A)(function*(c,d,I,U){return nt(c,"GET",d,I,U,void 0,f)}),function(d,I,U,G){return u.apply(this,arguments)}),post:function(){var u=(0,i.A)(function*(c,d,I,U,G){return nt(c,"POST",d,U,G,I,f)});return function(d,I,U,G,ne){return u.apply(this,arguments)}}(),put:function(){var u=(0,i.A)(function*(c,d,I,U,G){return nt(c,"PUT",d,U,G,I,f)});return function(d,I,U,G,ne){return u.apply(this,arguments)}}(),head:function(){var u=(0,i.A)(function*(c,d,I,U){return nt(c,"HEAD",d,dn(dn({},I),{},{noResolveJson:!0}),U,void 0,f)});return function(d,I,U,G){return u.apply(this,arguments)}}(),remove:function(){var u=(0,i.A)(function*(c,d,I,U,G){return nt(c,"DELETE",d,U,G,I,f)});return function(d,I,U,G,ne){return u.apply(this,arguments)}}()};var u}const We=ye("storage"),{get:Ee,post:et,put:bt,head:zt,remove:pn}=We,Tn=ye("vectors");var Mn=class{constructor(f,u={},c,d="storage"){this.shouldThrowOnError=!1,this.url=f,this.headers=u,this.fetch=(f=>f?(...u)=>f(...u):(...u)=>fetch(...u))(c),this.namespace=d}throwOnError(){return this.shouldThrowOnError=!0,this}handleOperation(f){var u=this;return(0,i.A)(function*(){var c=u;try{return{data:yield f(),error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(qe(d))return{data:null,error:d};throw d}})()}},tr=class{constructor(f,u){this.downloadFn=f,this.shouldThrowOnError=u}then(f,u){return this.execute().then(f,u)}execute(){var f=this;return(0,i.A)(function*(){var u=f;try{return{data:(yield u.downloadFn()).body,error:null}}catch(c){if(u.shouldThrowOnError)throw c;if(qe(c))return{data:null,error:c};throw c}})()}};let Wr;Wr=Symbol.toStringTag;var Pr=class{constructor(f,u){this.downloadFn=f,this.shouldThrowOnError=u,this[Wr]="BlobDownloadBuilder",this.promise=null}asStream(){return new tr(this.downloadFn,this.shouldThrowOnError)}then(f,u){return this.getPromise().then(f,u)}catch(f){return this.getPromise().catch(f)}finally(f){return this.getPromise().finally(f)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){var f=this;return(0,i.A)(function*(){var u=f;try{return{data:yield(yield u.downloadFn()).blob(),error:null}}catch(c){if(u.shouldThrowOnError)throw c;if(qe(c))return{data:null,error:c};throw c}})()}};const zn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var $n=class extends Mn{constructor(f,u={},c,d){super(f,u,d,"storage"),this.bucketId=c}uploadOrUpdate(f,u,c,d){var I=this;return(0,i.A)(function*(){var U=I;return U.handleOperation((0,i.A)(function*(){let G;const ne=dn(dn({},wn),d);let Se=dn(dn({},U.headers),"POST"===f&&{"x-upsert":String(ne.upsert)});const Be=ne.metadata;typeof Blob<"u"&&c instanceof Blob?(G=new FormData,G.append("cacheControl",ne.cacheControl),Be&&G.append("metadata",U.encodeMetadata(Be)),G.append("",c)):typeof FormData<"u"&&c instanceof FormData?(G=c,G.has("cacheControl")||G.append("cacheControl",ne.cacheControl),Be&&!G.has("metadata")&&G.append("metadata",U.encodeMetadata(Be))):(G=c,Se["cache-control"]=`max-age=${ne.cacheControl}`,Se["content-type"]=ne.contentType,Be&&(Se["x-metadata"]=U.toBase64(U.encodeMetadata(Be))),(typeof ReadableStream<"u"&&G instanceof ReadableStream||G&&"object"==typeof G&&"pipe"in G&&"function"==typeof G.pipe)&&!ne.duplex&&(ne.duplex="half")),d?.headers&&(Se=dn(dn({},Se),d.headers));const h=U._removeEmptyFolders(u),S=U._getFinalPath(h),E=yield("PUT"==f?bt:et)(U.fetch,`${U.url}/object/${S}`,G,dn({headers:Se},ne?.duplex?{duplex:ne.duplex}:{}));return{path:h,id:E.Id,fullPath:E.Key}}))})()}upload(f,u,c){var d=this;return(0,i.A)(function*(){return d.uploadOrUpdate("POST",f,u,c)})()}uploadToSignedUrl(f,u,c,d){var I=this;return(0,i.A)(function*(){var U=I;const G=U._removeEmptyFolders(f),ne=U._getFinalPath(G),Se=new URL(U.url+`/object/upload/sign/${ne}`);return Se.searchParams.set("token",u),U.handleOperation((0,i.A)(function*(){let Be;const h=dn({upsert:wn.upsert},d),S=dn(dn({},U.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&c instanceof Blob?(Be=new FormData,Be.append("cacheControl",h.cacheControl),Be.append("",c)):typeof FormData<"u"&&c instanceof FormData?(Be=c,Be.append("cacheControl",h.cacheControl)):(Be=c,S["cache-control"]=`max-age=${h.cacheControl}`,S["content-type"]=h.contentType),{path:G,fullPath:(yield bt(U.fetch,Se.toString(),Be,{headers:S})).Key}}))})()}createSignedUploadUrl(f,u){var c=this;return(0,i.A)(function*(){var d=c;return d.handleOperation((0,i.A)(function*(){let I=d._getFinalPath(f);const U=dn({},d.headers);u?.upsert&&(U["x-upsert"]="true");const G=yield et(d.fetch,`${d.url}/object/upload/sign/${I}`,{},{headers:U}),ne=new URL(d.url+G.url),Se=ne.searchParams.get("token");if(!Se)throw new vn("No token returned by API");return{signedUrl:ne.toString(),path:f,token:Se}}))})()}update(f,u,c){var d=this;return(0,i.A)(function*(){return d.uploadOrUpdate("PUT",f,u,c)})()}move(f,u,c){var d=this;return(0,i.A)(function*(){var I=d;return I.handleOperation((0,i.A)(function*(){return yield et(I.fetch,`${I.url}/object/move`,{bucketId:I.bucketId,sourceKey:f,destinationKey:u,destinationBucket:c?.destinationBucket},{headers:I.headers})}))})()}copy(f,u,c){var d=this;return(0,i.A)(function*(){var I=d;return I.handleOperation((0,i.A)(function*(){return{path:(yield et(I.fetch,`${I.url}/object/copy`,{bucketId:I.bucketId,sourceKey:f,destinationKey:u,destinationBucket:c?.destinationBucket},{headers:I.headers})).Key}}))})()}createSignedUrl(f,u,c){var d=this;return(0,i.A)(function*(){var I=d;return I.handleOperation((0,i.A)(function*(){let U=I._getFinalPath(f),G=yield et(I.fetch,`${I.url}/object/sign/${U}`,dn({expiresIn:u},c?.transform?{transform:c.transform}:{}),{headers:I.headers});return{signedUrl:encodeURI(`${I.url}${G.signedURL}${c?.download?`&download=${!0===c.download?"":c.download}`:""}`)}}))})()}createSignedUrls(f,u,c){var d=this;return(0,i.A)(function*(){var I=d;return I.handleOperation((0,i.A)(function*(){const U=yield et(I.fetch,`${I.url}/object/sign/${I.bucketId}`,{expiresIn:u,paths:f},{headers:I.headers}),G=c?.download?`&download=${!0===c.download?"":c.download}`:"";return U.map(ne=>dn(dn({},ne),{},{signedUrl:ne.signedURL?encodeURI(`${I.url}${ne.signedURL}${G}`):null}))}))})()}download(f,u,c){const d=typeof u?.transform<"u"?"render/image/authenticated":"object",I=this.transformOptsToQueryString(u?.transform||{}),U=I?`?${I}`:"",G=this._getFinalPath(f);return new Pr(()=>Ee(this.fetch,`${this.url}/${d}/${G}${U}`,{headers:this.headers,noResolveJson:!0},c),this.shouldThrowOnError)}info(f){var u=this;return(0,i.A)(function*(){var c=u;const d=c._getFinalPath(f);return c.handleOperation((0,i.A)(function*(){return Wn(yield Ee(c.fetch,`${c.url}/object/info/${d}`,{headers:c.headers}))}))})()}exists(f){var u=this;return(0,i.A)(function*(){var c=u;const d=c._getFinalPath(f);try{return yield zt(c.fetch,`${c.url}/object/${d}`,{headers:c.headers}),{data:!0,error:null}}catch(I){if(c.shouldThrowOnError)throw I;if(qe(I)&&I instanceof Ct){const U=I.originalError;if([400,404].includes(U?.status))return{data:!1,error:I}}throw I}})()}getPublicUrl(f,u){const c=this._getFinalPath(f),d=[],I=u?.download?`download=${!0===u.download?"":u.download}`:"";""!==I&&d.push(I);const U=typeof u?.transform<"u"?"render/image":"object",G=this.transformOptsToQueryString(u?.transform||{});""!==G&&d.push(G);let ne=d.join("&");return""!==ne&&(ne=`?${ne}`),{data:{publicUrl:encodeURI(`${this.url}/${U}/public/${c}${ne}`)}}}remove(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return yield pn(c.fetch,`${c.url}/object/${c.bucketId}`,{prefixes:f},{headers:c.headers})}))})()}list(f,u,c){var d=this;return(0,i.A)(function*(){var I=d;return I.handleOperation((0,i.A)(function*(){const U=dn(dn(dn({},zn),u),{},{prefix:f||""});return yield et(I.fetch,`${I.url}/object/list/${I.bucketId}`,U,{headers:I.headers},c)}))})()}listV2(f,u){var c=this;return(0,i.A)(function*(){var d=c;return d.handleOperation((0,i.A)(function*(){const I=dn({},f);return yield et(d.fetch,`${d.url}/object/list-v2/${d.bucketId}`,I,{headers:d.headers},u)}))})()}encodeMetadata(f){return JSON.stringify(f)}toBase64(f){return typeof Buffer<"u"?Buffer.from(f).toString("base64"):btoa(f)}_getFinalPath(f){return`${this.bucketId}/${f.replace(/^\/+/,"")}`}_removeEmptyFolders(f){return f.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(f){const u=[];return f.width&&u.push(`width=${f.width}`),f.height&&u.push(`height=${f.height}`),f.resize&&u.push(`resize=${f.resize}`),f.format&&u.push(`format=${f.format}`),f.quality&&u.push(`quality=${f.quality}`),u.join("&")}};const cr={"X-Client-Info":"storage-js/2.95.0"};var nr=class extends Mn{constructor(f,u={},c,d){const I=new URL(f);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(I.hostname)&&!I.hostname.includes("storage.supabase.")&&(I.hostname=I.hostname.replace("supabase.","storage.supabase.")),super(I.href.replace(/\/$/,""),dn(dn({},cr),u),c,"storage")}listBuckets(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){const d=c.listBucketOptionsToQueryString(f);return yield Ee(c.fetch,`${c.url}/bucket${d}`,{headers:c.headers})}))})()}getBucket(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return yield Ee(c.fetch,`${c.url}/bucket/${f}`,{headers:c.headers})}))})()}createBucket(f){var u=this;return(0,i.A)(function*(c,d={public:!1}){var I=u;return I.handleOperation((0,i.A)(function*(){return yield et(I.fetch,`${I.url}/bucket`,{id:c,name:c,type:d.type,public:d.public,file_size_limit:d.fileSizeLimit,allowed_mime_types:d.allowedMimeTypes},{headers:I.headers})}))}).apply(this,arguments)}updateBucket(f,u){var c=this;return(0,i.A)(function*(){var d=c;return d.handleOperation((0,i.A)(function*(){return yield bt(d.fetch,`${d.url}/bucket/${f}`,{id:f,name:f,public:u.public,file_size_limit:u.fileSizeLimit,allowed_mime_types:u.allowedMimeTypes},{headers:d.headers})}))})()}emptyBucket(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return yield et(c.fetch,`${c.url}/bucket/${f}/empty`,{},{headers:c.headers})}))})()}deleteBucket(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return yield pn(c.fetch,`${c.url}/bucket/${f}`,{},{headers:c.headers})}))})()}listBucketOptionsToQueryString(f){const u={};return f&&("limit"in f&&(u.limit=String(f.limit)),"offset"in f&&(u.offset=String(f.offset)),f.search&&(u.search=f.search),f.sortColumn&&(u.sortColumn=f.sortColumn),f.sortOrder&&(u.sortOrder=f.sortOrder)),Object.keys(u).length>0?"?"+new URLSearchParams(u).toString():""}},Tr=class extends Mn{constructor(f,u={},c){super(f.replace(/\/$/,""),dn(dn({},cr),u),c,"storage")}createBucket(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return yield et(c.fetch,`${c.url}/bucket`,{name:f},{headers:c.headers})}))})()}listBuckets(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){const d=new URLSearchParams;void 0!==f?.limit&&d.set("limit",f.limit.toString()),void 0!==f?.offset&&d.set("offset",f.offset.toString()),f?.sortColumn&&d.set("sortColumn",f.sortColumn),f?.sortOrder&&d.set("sortOrder",f.sortOrder),f?.search&&d.set("search",f.search);const I=d.toString(),U=I?`${c.url}/bucket?${I}`:`${c.url}/bucket`;return yield Ee(c.fetch,U,{headers:c.headers})}))})()}deleteBucket(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return yield pn(c.fetch,`${c.url}/bucket/${f}`,{},{headers:c.headers})}))})()}from(f){var u=this;if(!(f=>!(!f||"string"!=typeof f||0===f.length||f.length>100||f.trim()!==f||f.includes("/")||f.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(f))(f))throw new vn("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const c=new qn({baseUrl:this.url,catalogName:f,auth:{type:"custom",getHeaders:(I=(0,i.A)(function*(){return u.headers}),function(){return I.apply(this,arguments)})},fetch:this.fetch}),d=this.shouldThrowOnError;var I;return new Proxy(c,{get(I,U){const G=I[U];return"function"!=typeof G?G:(0,i.A)(function*(...ne){try{return{data:yield G.apply(I,ne),error:null}}catch(Se){if(d)throw Se;return{data:null,error:Se}}})}})}},Ar=class extends Mn{constructor(f,u={},c){super(f.replace(/\/$/,""),dn(dn({},cr),{},{"Content-Type":"application/json"},u),c,"vectors")}createIndex(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return(yield Tn.post(c.fetch,`${c.url}/CreateIndex`,f,{headers:c.headers}))||{}}))})()}getIndex(f,u){var c=this;return(0,i.A)(function*(){var d=c;return d.handleOperation((0,i.A)(function*(){return yield Tn.post(d.fetch,`${d.url}/GetIndex`,{vectorBucketName:f,indexName:u},{headers:d.headers})}))})()}listIndexes(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return yield Tn.post(c.fetch,`${c.url}/ListIndexes`,f,{headers:c.headers})}))})()}deleteIndex(f,u){var c=this;return(0,i.A)(function*(){var d=c;return d.handleOperation((0,i.A)(function*(){return(yield Tn.post(d.fetch,`${d.url}/DeleteIndex`,{vectorBucketName:f,indexName:u},{headers:d.headers}))||{}}))})()}},Rr=class extends Mn{constructor(f,u={},c){super(f.replace(/\/$/,""),dn(dn({},cr),{},{"Content-Type":"application/json"},u),c,"vectors")}putVectors(f){var u=this;return(0,i.A)(function*(){var c=u;if(f.vectors.length<1||f.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return c.handleOperation((0,i.A)(function*(){return(yield Tn.post(c.fetch,`${c.url}/PutVectors`,f,{headers:c.headers}))||{}}))})()}getVectors(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return yield Tn.post(c.fetch,`${c.url}/GetVectors`,f,{headers:c.headers})}))})()}listVectors(f){var u=this;return(0,i.A)(function*(){var c=u;if(void 0!==f.segmentCount){if(f.segmentCount<1||f.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==f.segmentIndex&&(f.segmentIndex<0||f.segmentIndex>=f.segmentCount))throw new Error("segmentIndex must be between 0 and "+(f.segmentCount-1))}return c.handleOperation((0,i.A)(function*(){return yield Tn.post(c.fetch,`${c.url}/ListVectors`,f,{headers:c.headers})}))})()}queryVectors(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return yield Tn.post(c.fetch,`${c.url}/QueryVectors`,f,{headers:c.headers})}))})()}deleteVectors(f){var u=this;return(0,i.A)(function*(){var c=u;if(f.keys.length<1||f.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return c.handleOperation((0,i.A)(function*(){return(yield Tn.post(c.fetch,`${c.url}/DeleteVectors`,f,{headers:c.headers}))||{}}))})()}},Mr=class extends Mn{constructor(f,u={},c){super(f.replace(/\/$/,""),dn(dn({},cr),{},{"Content-Type":"application/json"},u),c,"vectors")}createBucket(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return(yield Tn.post(c.fetch,`${c.url}/CreateVectorBucket`,{vectorBucketName:f},{headers:c.headers}))||{}}))})()}getBucket(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return yield Tn.post(c.fetch,`${c.url}/GetVectorBucket`,{vectorBucketName:f},{headers:c.headers})}))})()}listBuckets(){var f=this;return(0,i.A)(function*(u={}){var c=f;return c.handleOperation((0,i.A)(function*(){return yield Tn.post(c.fetch,`${c.url}/ListVectorBuckets`,u,{headers:c.headers})}))}).apply(this,arguments)}deleteBucket(f){var u=this;return(0,i.A)(function*(){var c=u;return c.handleOperation((0,i.A)(function*(){return(yield Tn.post(c.fetch,`${c.url}/DeleteVectorBucket`,{vectorBucketName:f},{headers:c.headers}))||{}}))})()}},rr=class extends Mr{constructor(f,u={}){super(f,u.headers||{},u.fetch)}from(f){return new xr(this.url,this.headers,f,this.fetch)}createBucket(f){var u=()=>super.createBucket,c=this;return(0,i.A)(function*(){var I=c;return u().call(I,f)})()}getBucket(f){var u=()=>super.getBucket,c=this;return(0,i.A)(function*(){var I=c;return u().call(I,f)})()}listBuckets(){var f=()=>super.listBuckets,u=this;return(0,i.A)(function*(c={}){var I=u;return f().call(I,c)}).apply(this,arguments)}deleteBucket(f){var u=()=>super.deleteBucket,c=this;return(0,i.A)(function*(){var I=c;return u().call(I,f)})()}},xr=class extends Ar{constructor(f,u,c,d){super(f,u,d),this.vectorBucketName=c}createIndex(f){var u=()=>super.createIndex,c=this;return(0,i.A)(function*(){var I=c;return u().call(I,dn(dn({},f),{},{vectorBucketName:I.vectorBucketName}))})()}listIndexes(){var f=()=>super.listIndexes,u=this;return(0,i.A)(function*(c={}){var I=u;return f().call(I,dn(dn({},c),{},{vectorBucketName:I.vectorBucketName}))}).apply(this,arguments)}getIndex(f){var u=()=>super.getIndex,c=this;return(0,i.A)(function*(){var I=c;return u().call(I,I.vectorBucketName,f)})()}deleteIndex(f){var u=()=>super.deleteIndex,c=this;return(0,i.A)(function*(){var I=c;return u().call(I,I.vectorBucketName,f)})()}index(f){return new Dr(this.url,this.headers,this.vectorBucketName,f,this.fetch)}},Dr=class extends Rr{constructor(f,u,c,d,I){super(f,u,I),this.vectorBucketName=c,this.indexName=d}putVectors(f){var u=()=>super.putVectors,c=this;return(0,i.A)(function*(){var I=c;return u().call(I,dn(dn({},f),{},{vectorBucketName:I.vectorBucketName,indexName:I.indexName}))})()}getVectors(f){var u=()=>super.getVectors,c=this;return(0,i.A)(function*(){var I=c;return u().call(I,dn(dn({},f),{},{vectorBucketName:I.vectorBucketName,indexName:I.indexName}))})()}listVectors(){var f=()=>super.listVectors,u=this;return(0,i.A)(function*(c={}){var I=u;return f().call(I,dn(dn({},c),{},{vectorBucketName:I.vectorBucketName,indexName:I.indexName}))}).apply(this,arguments)}queryVectors(f){var u=()=>super.queryVectors,c=this;return(0,i.A)(function*(){var I=c;return u().call(I,dn(dn({},f),{},{vectorBucketName:I.vectorBucketName,indexName:I.indexName}))})()}deleteVectors(f){var u=()=>super.deleteVectors,c=this;return(0,i.A)(function*(){var I=c;return u().call(I,dn(dn({},f),{},{vectorBucketName:I.vectorBucketName,indexName:I.indexName}))})()}},Gr=class extends nr{constructor(f,u={},c,d){super(f,u,c,d)}from(f){return new $n(this.url,this.headers,f,this.fetch)}get vectors(){return new rr(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Tr(this.url+"/iceberg",this.headers,this.fetch)}};const $r=3e4,C="X-Supabase-Api-Version",O_2024_01_01_timestamp=Date.parse("2024-01-01T00:00:00.0Z"),O_2024_01_01_name="2024-01-01",H=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class ft extends Error{constructor(u,c,d){super(u),this.__isAuthError=!0,this.name="AuthError",this.status=c,this.code=d}}function pt(f){return"object"==typeof f&&null!==f&&"__isAuthError"in f}class an extends ft{constructor(u,c,d){super(u,c,d),this.name="AuthApiError",this.status=c,this.code=d}}class Rn extends ft{constructor(u,c){super(u),this.name="AuthUnknownError",this.originalError=c}}class En extends ft{constructor(u,c,d,I){super(u,d,I),this.name=c,this.status=d}}class Pn extends En{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yt(f){return pt(f)&&"AuthSessionMissingError"===f.name}class jn extends En{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nr extends En{constructor(u){super(u,"AuthInvalidCredentialsError",400,void 0)}}class wr extends En{constructor(u,c=null){super(u,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=c}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class X extends En{constructor(u,c=null){super(u,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=c}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kn extends En{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class N extends En{constructor(u,c){super(u,"AuthRetryableFetchError",c,void 0)}}function Me(f){return pt(f)&&"AuthRetryableFetchError"===f.name}class Nn extends En{constructor(u,c,d){super(u,"AuthWeakPasswordError",c,"weak_password"),this.reasons=d}}class zr extends En{constructor(u){super(u,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oo=" \t\n\r=".split(""),So=(()=>{const f=new Array(128);for(let u=0;u<f.length;u+=1)f[u]=-1;for(let u=0;u<oo.length;u+=1)f[oo[u].charCodeAt(0)]=-2;for(let u=0;u<Xr.length;u+=1)f[Xr[u].charCodeAt(0)]=u;return f})();function go(f,u,c){if(null!==f)for(u.queue=u.queue<<8|f,u.queuedBits+=8;u.queuedBits>=6;)c(Xr[u.queue>>u.queuedBits-6&63]),u.queuedBits-=6;else if(u.queuedBits>0)for(u.queue=u.queue<<6-u.queuedBits,u.queuedBits=6;u.queuedBits>=6;)c(Xr[u.queue>>u.queuedBits-6&63]),u.queuedBits-=6}function Co(f,u,c){const d=So[f];if(!(d>-1)){if(-2===d)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(f)}"`)}for(u.queue=u.queue<<6|d,u.queuedBits+=6;u.queuedBits>=8;)c(u.queue>>u.queuedBits-8&255),u.queuedBits-=8}function Ao(f){const u=[],c=G=>{u.push(String.fromCodePoint(G))},d={utf8seq:0,codepoint:0},I={queue:0,queuedBits:0},U=G=>{!function me(f,u,c){if(0===u.utf8seq){if(f<=127)return void c(f);for(let d=1;d<6;d+=1)if(!(f>>7-d&1)){u.utf8seq=d;break}if(2===u.utf8seq)u.codepoint=31&f;else if(3===u.utf8seq)u.codepoint=15&f;else{if(4!==u.utf8seq)throw new Error("Invalid UTF-8 sequence");u.codepoint=7&f}u.utf8seq-=1}else if(u.utf8seq>0){if(f<=127)throw new Error("Invalid UTF-8 sequence");u.codepoint=u.codepoint<<6|63&f,u.utf8seq-=1,0===u.utf8seq&&c(u.codepoint)}}(G,d,c)};for(let G=0;G<f.length;G+=1)Co(f.charCodeAt(G),I,U);return u.join("")}function ni(f,u){if(!(f<=127)){if(f<=2047)return u(192|f>>6),void u(128|63&f);if(f<=65535)return u(224|f>>12),u(128|f>>6&63),void u(128|63&f);if(f<=1114111)return u(240|f>>18),u(128|f>>12&63),u(128|f>>6&63),void u(128|63&f);throw new Error(`Unrecognized Unicode codepoint: ${f.toString(16)}`)}u(f)}function Y(f){const u=[],c={queue:0,queuedBits:0},d=I=>{u.push(I)};for(let I=0;I<f.length;I+=1)Co(f.charCodeAt(I),c,d);return new Uint8Array(u)}function je(f){const u=[],c={queue:0,queuedBits:0},d=I=>{u.push(I)};return f.forEach(I=>go(I,c,d)),go(null,c,d),u.join("")}const Lt=()=>typeof window<"u"&&typeof document<"u",Gt={tested:!1,writable:!1},_n=()=>{if(!Lt())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(Gt.tested)return Gt.writable;const f=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(f,f),globalThis.localStorage.removeItem(f),Gt.tested=!0,Gt.writable=!0}catch{Gt.tested=!0,Gt.writable=!1}return Gt.writable},Xn=f=>f?(...u)=>f(...u):(...u)=>fetch(...u),Sr=function(){var f=(0,i.A)(function*(u,c,d){yield u.setItem(c,JSON.stringify(d))});return function(c,d,I){return f.apply(this,arguments)}}(),Cr=function(){var f=(0,i.A)(function*(u,c){const d=yield u.getItem(c);if(!d)return null;try{return JSON.parse(d)}catch{return d}});return function(c,d){return f.apply(this,arguments)}}(),pr=function(){var f=(0,i.A)(function*(u,c){yield u.removeItem(c)});return function(c,d){return f.apply(this,arguments)}}();class Kr{constructor(){this.promise=new Kr.promiseConstructor((u,c)=>{this.resolve=u,this.reject=c})}}function Ir(f){const u=f.split(".");if(3!==u.length)throw new zr("Invalid JWT structure");for(let d=0;d<u.length;d++)if(!H.test(u[d]))throw new zr("JWT not in base64url format");return{header:JSON.parse(Ao(u[0])),payload:JSON.parse(Ao(u[1])),signature:Y(u[2]),raw:{header:u[0],payload:u[1]}}}function Qr(){return(Qr=(0,i.A)(function*(f){return yield new Promise(u=>{setTimeout(()=>u(null),f)})})).apply(this,arguments)}function Ro(f){return("0"+f.toString(16)).substr(-2)}function W(){return(W=(0,i.A)(function*(f){const c=(new TextEncoder).encode(f),d=yield crypto.subtle.digest("SHA-256",c),I=new Uint8Array(d);return Array.from(I).map(U=>String.fromCharCode(U)).join("")})).apply(this,arguments)}function Te(){return Te=(0,i.A)(function*(f){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),f;const c=yield function x(f){return W.apply(this,arguments)}(f);return btoa(c).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),Te.apply(this,arguments)}function it(f,u){return st.apply(this,arguments)}function st(){return st=(0,i.A)(function*(f,u,c=!1){const d=function mo(){const u=new Uint32Array(56);if(typeof crypto>"u"){const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",d=c.length;let I="";for(let U=0;U<56;U++)I+=c.charAt(Math.floor(Math.random()*d));return I}return crypto.getRandomValues(u),Array.from(u,Ro).join("")}();let I=d;c&&(I+="/PASSWORD_RECOVERY"),yield Sr(f,`${u}-code-verifier`,I);const U=yield function ue(f){return Te.apply(this,arguments)}(d);return[U,d===U?"plain":"s256"]}),st.apply(this,arguments)}Kr.promiseConstructor=Promise;const It=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Rt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ht(f){if(!Rt.test(f))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qt(){return new Proxy({},{get:(u,c)=>{if("__isUserNotAvailableProxy"===c)return!0;if("symbol"==typeof c){const d=c.toString();if("Symbol(Symbol.toPrimitive)"===d||"Symbol(Symbol.toStringTag)"===d||"Symbol(util.inspect.custom)"===d)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${c}" property of the session object is not supported. Please use getUser() instead.`)},set:(u,c)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${c}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(u,c)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${c}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function gn(f){return JSON.parse(JSON.stringify(f))}const ar=f=>f.msg||f.message||f.error_description||f.error||JSON.stringify(f),Yn=[502,503,504];function Zr(f){return vo.apply(this,arguments)}function vo(){return(vo=(0,i.A)(function*(f){var u;if(!(f=>"object"==typeof f&&null!==f&&"status"in f&&"ok"in f&&"json"in f&&"function"==typeof f.json)(f))throw new N(ar(f),0);if(Yn.includes(f.status))throw new N(ar(f),f.status);let c,d;try{c=yield f.json()}catch(U){throw new Rn(ar(U),U)}const I=function yt(f){const u=f.headers.get(C);if(!u||!u.match(It))return null;try{return new Date(`${u}T00:00:00.0Z`)}catch{return null}}(f);if(I&&I.getTime()>=O_2024_01_01_timestamp&&"object"==typeof c&&c&&"string"==typeof c.code?d=c.code:"object"==typeof c&&c&&"string"==typeof c.error_code&&(d=c.error_code),d){if("weak_password"===d)throw new Nn(ar(c),f.status,(null===(u=c.weak_password)||void 0===u?void 0:u.reasons)||[]);if("session_not_found"===d)throw new Pn}else if("object"==typeof c&&c&&"object"==typeof c.weak_password&&c.weak_password&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.reasons.reduce((U,G)=>U&&"string"==typeof G,!0))throw new Nn(ar(c),f.status,c.weak_password.reasons);throw new an(ar(c),f.status||500,d)})).apply(this,arguments)}function j(f,u,c,d){return Q.apply(this,arguments)}function Q(){return Q=(0,i.A)(function*(f,u,c,d){var I;const U=Object.assign({},d?.headers);U[C]||(U[C]=O_2024_01_01_name),d?.jwt&&(U.Authorization=`Bearer ${d.jwt}`);const G=null!==(I=d?.query)&&void 0!==I?I:{};d?.redirectTo&&(G.redirect_to=d.redirectTo);const ne=Object.keys(G).length?"?"+new URLSearchParams(G).toString():"",Se=yield function L(f,u,c,d,I,U){return de.apply(this,arguments)}(f,u,c+ne,{headers:U,noResolveJson:d?.noResolveJson},{},d?.body);return d?.xform?d?.xform(Se):{data:Object.assign({},Se),error:null}}),Q.apply(this,arguments)}function de(){return(de=(0,i.A)(function*(f,u,c,d,I,U){const G=((f,u,c,d)=>{const I={method:f,headers:u?.headers||{}};return"GET"===f?I:(I.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},u?.headers),I.body=JSON.stringify(d),Object.assign(Object.assign({},I),c))})(u,d,I,U);let ne;try{ne=yield f(c,Object.assign({},G))}catch(Se){throw console.error(Se),new N(ar(Se),0)}if(ne.ok||(yield Zr(ne)),d?.noResolveJson)return ne;try{return yield ne.json()}catch(Se){yield Zr(Se)}})).apply(this,arguments)}function Xe(f){var u;let c=null;return function Io(f){return f.access_token&&f.refresh_token&&f.expires_in}(f)&&(c=Object.assign({},f),f.expires_at||(c.expires_at=function gt(f){return Math.round(Date.now()/1e3)+f}(f.expires_in))),{data:{session:c,user:null!==(u=f.user)&&void 0!==u?u:f},error:null}}function on(f){const u=Xe(f);return!u.error&&f.weak_password&&"object"==typeof f.weak_password&&Array.isArray(f.weak_password.reasons)&&f.weak_password.reasons.length&&f.weak_password.message&&"string"==typeof f.weak_password.message&&f.weak_password.reasons.reduce((c,d)=>c&&"string"==typeof d,!0)&&(u.data.weak_password=f.weak_password),u}function mn(f){var u;return{data:{user:null!==(u=f.user)&&void 0!==u?u:f},error:null}}function Hr(f){return{data:f,error:null}}function _o(f){const{action_link:u,email_otp:c,hashed_token:d,redirect_to:I,verification_type:U}=f,G=(0,o.Tt)(f,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:u,email_otp:c,hashed_token:d,redirect_to:I,verification_type:U},user:Object.assign({},G)},error:null}}function co(f){return f}const Wo=["global","local","others"];class Ko{constructor({url:u="",headers:c={},fetch:d}){this.url=u,this.headers=c,this.fetch=Xn(d),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(u){var c=this;return(0,i.A)(function*(d,I=Wo[0]){if(Wo.indexOf(I)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wo.join(", ")}`);try{return yield j(c.fetch,"POST",`${c.url}/logout?scope=${I}`,{headers:c.headers,jwt:d,noResolveJson:!0}),{data:null,error:null}}catch(U){if(pt(U))return{data:null,error:U};throw U}}).apply(this,arguments)}inviteUserByEmail(u){var c=this;return(0,i.A)(function*(d,I={}){try{return yield j(c.fetch,"POST",`${c.url}/invite`,{body:{email:d,data:I.data},headers:c.headers,redirectTo:I.redirectTo,xform:mn})}catch(U){if(pt(U))return{data:{user:null},error:U};throw U}}).apply(this,arguments)}generateLink(u){var c=this;return(0,i.A)(function*(){try{const{options:d}=u,I=(0,o.Tt)(u,["options"]),U=Object.assign(Object.assign({},I),d);return"newEmail"in I&&(U.new_email=I?.newEmail,delete U.newEmail),yield j(c.fetch,"POST",`${c.url}/admin/generate_link`,{body:U,headers:c.headers,xform:_o,redirectTo:d?.redirectTo})}catch(d){if(pt(d))return{data:{properties:null,user:null},error:d};throw d}})()}createUser(u){var c=this;return(0,i.A)(function*(){try{return yield j(c.fetch,"POST",`${c.url}/admin/users`,{body:u,headers:c.headers,xform:mn})}catch(d){if(pt(d))return{data:{user:null},error:d};throw d}})()}listUsers(u){var c=this;return(0,i.A)(function*(){var d,I,U,G,ne,Se,Be;try{const h={nextPage:null,lastPage:0,total:0},S=yield j(c.fetch,"GET",`${c.url}/admin/users`,{headers:c.headers,noResolveJson:!0,query:{page:null!==(I=null===(d=u?.page)||void 0===d?void 0:d.toString())&&void 0!==I?I:"",per_page:null!==(G=null===(U=u?.perPage)||void 0===U?void 0:U.toString())&&void 0!==G?G:""},xform:co});if(S.error)throw S.error;const E=yield S.json(),w=null!==(ne=S.headers.get("x-total-count"))&&void 0!==ne?ne:0,$=null!==(Be=null===(Se=S.headers.get("link"))||void 0===Se?void 0:Se.split(","))&&void 0!==Be?Be:[];return $.length>0&&($.forEach(Z=>{const _e=parseInt(Z.split(";")[0].split("=")[1].substring(0,1)),Qe=JSON.parse(Z.split(";")[1].split("=")[1]);h[`${Qe}Page`]=_e}),h.total=parseInt(w)),{data:Object.assign(Object.assign({},E),h),error:null}}catch(h){if(pt(h))return{data:{users:[]},error:h};throw h}})()}getUserById(u){var c=this;return(0,i.A)(function*(){Ht(u);try{return yield j(c.fetch,"GET",`${c.url}/admin/users/${u}`,{headers:c.headers,xform:mn})}catch(d){if(pt(d))return{data:{user:null},error:d};throw d}})()}updateUserById(u,c){var d=this;return(0,i.A)(function*(){Ht(u);try{return yield j(d.fetch,"PUT",`${d.url}/admin/users/${u}`,{body:c,headers:d.headers,xform:mn})}catch(I){if(pt(I))return{data:{user:null},error:I};throw I}})()}deleteUser(u){var c=this;return(0,i.A)(function*(d,I=!1){Ht(d);try{return yield j(c.fetch,"DELETE",`${c.url}/admin/users/${d}`,{headers:c.headers,body:{should_soft_delete:I},xform:mn})}catch(U){if(pt(U))return{data:{user:null},error:U};throw U}}).apply(this,arguments)}_listFactors(u){var c=this;return(0,i.A)(function*(){Ht(u.userId);try{const{data:d,error:I}=yield j(c.fetch,"GET",`${c.url}/admin/users/${u.userId}/factors`,{headers:c.headers,xform:U=>({data:{factors:U},error:null})});return{data:d,error:I}}catch(d){if(pt(d))return{data:null,error:d};throw d}})()}_deleteFactor(u){var c=this;return(0,i.A)(function*(){Ht(u.userId),Ht(u.id);try{return{data:yield j(c.fetch,"DELETE",`${c.url}/admin/users/${u.userId}/factors/${u.id}`,{headers:c.headers}),error:null}}catch(d){if(pt(d))return{data:null,error:d};throw d}})()}_listOAuthClients(u){var c=this;return(0,i.A)(function*(){var d,I,U,G,ne,Se,Be;try{const h={nextPage:null,lastPage:0,total:0},S=yield j(c.fetch,"GET",`${c.url}/admin/oauth/clients`,{headers:c.headers,noResolveJson:!0,query:{page:null!==(I=null===(d=u?.page)||void 0===d?void 0:d.toString())&&void 0!==I?I:"",per_page:null!==(G=null===(U=u?.perPage)||void 0===U?void 0:U.toString())&&void 0!==G?G:""},xform:co});if(S.error)throw S.error;const E=yield S.json(),w=null!==(ne=S.headers.get("x-total-count"))&&void 0!==ne?ne:0,$=null!==(Be=null===(Se=S.headers.get("link"))||void 0===Se?void 0:Se.split(","))&&void 0!==Be?Be:[];return $.length>0&&($.forEach(Z=>{const _e=parseInt(Z.split(";")[0].split("=")[1].substring(0,1)),Qe=JSON.parse(Z.split(";")[1].split("=")[1]);h[`${Qe}Page`]=_e}),h.total=parseInt(w)),{data:Object.assign(Object.assign({},E),h),error:null}}catch(h){if(pt(h))return{data:{clients:[]},error:h};throw h}})()}_createOAuthClient(u){var c=this;return(0,i.A)(function*(){try{return yield j(c.fetch,"POST",`${c.url}/admin/oauth/clients`,{body:u,headers:c.headers,xform:d=>({data:d,error:null})})}catch(d){if(pt(d))return{data:null,error:d};throw d}})()}_getOAuthClient(u){var c=this;return(0,i.A)(function*(){try{return yield j(c.fetch,"GET",`${c.url}/admin/oauth/clients/${u}`,{headers:c.headers,xform:d=>({data:d,error:null})})}catch(d){if(pt(d))return{data:null,error:d};throw d}})()}_updateOAuthClient(u,c){var d=this;return(0,i.A)(function*(){try{return yield j(d.fetch,"PUT",`${d.url}/admin/oauth/clients/${u}`,{body:c,headers:d.headers,xform:I=>({data:I,error:null})})}catch(I){if(pt(I))return{data:null,error:I};throw I}})()}_deleteOAuthClient(u){var c=this;return(0,i.A)(function*(){try{return yield j(c.fetch,"DELETE",`${c.url}/admin/oauth/clients/${u}`,{headers:c.headers,noResolveJson:!0}),{data:null,error:null}}catch(d){if(pt(d))return{data:null,error:d};throw d}})()}_regenerateOAuthClientSecret(u){var c=this;return(0,i.A)(function*(){try{return yield j(c.fetch,"POST",`${c.url}/admin/oauth/clients/${u}/regenerate_secret`,{headers:c.headers,xform:d=>({data:d,error:null})})}catch(d){if(pt(d))return{data:null,error:d};throw d}})()}}function Mi(f={}){return{getItem:u=>f[u]||null,setItem:(u,c)=>{f[u]=c},removeItem:u=>{delete f[u]}}}const Qo_debug=!!(globalThis&&_n()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class $i extends Error{constructor(u){super(u),this.isAcquireTimeout=!0}}class $s extends $i{}function as(f,u,c){return fi.apply(this,arguments)}function fi(){return fi=(0,i.A)(function*(f,u,c){Qo_debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",f,u);const d=new globalThis.AbortController;return u>0&&setTimeout(()=>{d.abort(),Qo_debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",f)},u),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(f,0===u?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:d.signal},function(){var I=(0,i.A)(function*(U){if(!U){if(0===u)throw Qo_debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",f),new $s(`Acquiring an exclusive Navigator LockManager lock "${f}" immediately failed`);if(Qo_debug)try{const G=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(G,null,"  "))}catch(G){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",G)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield c()}Qo_debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",f,U.name);try{return yield c()}finally{Qo_debug&&console.log("@supabase/gotrue-js: navigatorLock: released",f,U.name)}});return function(U){return I.apply(this,arguments)}}()))}),fi.apply(this,arguments)}function ji(f){if(!/^0x[a-fA-F0-9]{40}$/.test(f))throw new Error(`@supabase/auth-js: Address "${f}" is invalid.`);return f.toLowerCase()}function No(f){const u=(new TextEncoder).encode(f);return"0x"+Array.from(u,d=>d.toString(16).padStart(2,"0")).join("")}class Jr extends Error{constructor({message:u,code:c,cause:d,name:I}){var U;super(u,{cause:d}),this.__isWebAuthnError=!0,this.name=null!==(U=I??(d instanceof Error?d.name:void 0))&&void 0!==U?U:"Unknown Error",this.code=c}}class gi extends Jr{constructor(u,c){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:c,message:u}),this.name="WebAuthnUnknownError",this.originalError=c}}function Wi({error:f,options:u}){var c,d,I;const{publicKey:U}=u;if(!U)throw Error("options was missing required publicKey property");if("AbortError"===f.name){if(u.signal instanceof AbortSignal)return new Jr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:f})}else if("ConstraintError"===f.name){if(!0===(null===(c=U.authenticatorSelection)||void 0===c?void 0:c.requireResidentKey))return new Jr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:f});if("conditional"===u.mediation&&"required"===(null===(d=U.authenticatorSelection)||void 0===d?void 0:d.userVerification))return new Jr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:f});if("required"===(null===(I=U.authenticatorSelection)||void 0===I?void 0:I.userVerification))return new Jr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:f})}else{if("InvalidStateError"===f.name)return new Jr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:f});if("NotAllowedError"===f.name)return new Jr({message:f.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:f});if("NotSupportedError"===f.name)return 0===U.pubKeyCredParams.filter(ne=>"public-key"===ne.type).length?new Jr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:f}):new Jr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:f});if("SecurityError"===f.name){const G=window.location.hostname;if(!vi(G))return new Jr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:f});if(U.rp.id!==G)return new Jr({message:`The RP ID "${U.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:f})}else if("TypeError"===f.name){if(U.user.id.byteLength<1||U.user.id.byteLength>64)return new Jr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:f})}else if("UnknownError"===f.name)return new Jr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:f})}return new Jr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:f})}function oi({error:f,options:u}){const{publicKey:c}=u;if(!c)throw Error("options was missing required publicKey property");if("AbortError"===f.name){if(u.signal instanceof AbortSignal)return new Jr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:f})}else{if("NotAllowedError"===f.name)return new Jr({message:f.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:f});if("SecurityError"===f.name){const d=window.location.hostname;if(!vi(d))return new Jr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:f});if(c.rpId!==d)return new Jr({message:`The RP ID "${c.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:f})}else if("UnknownError"===f.name)return new Jr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:f})}return new Jr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:f})}const ii=new class cs{createNewAbortSignal(){if(this.controller){const c=new Error("Cancelling existing WebAuthn API call for new one");c.name="AbortError",this.controller.abort(c)}const u=new AbortController;return this.controller=u,u.signal}cancelCeremony(){if(this.controller){const u=new Error("Manually cancelling existing WebAuthn API call");u.name="AbortError",this.controller.abort(u),this.controller=void 0}}};function mi(f){if(!f)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(f);const{challenge:u,user:c,excludeCredentials:d}=f,I=(0,o.Tt)(f,["challenge","user","excludeCredentials"]),U=Y(u).buffer,G=Object.assign(Object.assign({},c),{id:Y(c.id).buffer}),ne=Object.assign(Object.assign({},I),{challenge:U,user:G});if(d&&d.length>0){ne.excludeCredentials=new Array(d.length);for(let Se=0;Se<d.length;Se++){const Be=d[Se];ne.excludeCredentials[Se]=Object.assign(Object.assign({},Be),{id:Y(Be.id).buffer,type:Be.type||"public-key",transports:Be.transports})}}return ne}function Fo(f){if(!f)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(f);const{challenge:u,allowCredentials:c}=f,d=(0,o.Tt)(f,["challenge","allowCredentials"]),I=Y(u).buffer,U=Object.assign(Object.assign({},d),{challenge:I});if(c&&c.length>0){U.allowCredentials=new Array(c.length);for(let G=0;G<c.length;G++){const ne=c[G];U.allowCredentials[G]=Object.assign(Object.assign({},ne),{id:Y(ne.id).buffer,type:ne.type||"public-key",transports:ne.transports})}}return U}function us(f){var u;if("toJSON"in f&&"function"==typeof f.toJSON)return f.toJSON();const c=f;return{id:f.id,rawId:f.id,response:{attestationObject:je(new Uint8Array(f.response.attestationObject)),clientDataJSON:je(new Uint8Array(f.response.clientDataJSON))},type:"public-key",clientExtensionResults:f.getClientExtensionResults(),authenticatorAttachment:null!==(u=c.authenticatorAttachment)&&void 0!==u?u:void 0}}function Ki(f){var u;if("toJSON"in f&&"function"==typeof f.toJSON)return f.toJSON();const c=f,d=f.getClientExtensionResults(),I=f.response;return{id:f.id,rawId:f.id,response:{authenticatorData:je(new Uint8Array(I.authenticatorData)),clientDataJSON:je(new Uint8Array(I.clientDataJSON)),signature:je(new Uint8Array(I.signature)),userHandle:I.userHandle?je(new Uint8Array(I.userHandle)):void 0},type:"public-key",clientExtensionResults:d,authenticatorAttachment:null!==(u=c.authenticatorAttachment)&&void 0!==u?u:void 0}}function vi(f){return"localhost"===f||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(f)}function Oi(){var f,u;return!!(Lt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(f=navigator?.credentials)||void 0===f?void 0:f.create)&&"function"==typeof(null===(u=navigator?.credentials)||void 0===u?void 0:u.get))}function _i(){return(_i=(0,i.A)(function*(f){try{const u=yield navigator.credentials.create(f);return u?u instanceof PublicKeyCredential?{data:u,error:null}:{data:null,error:new gi("Browser returned unexpected credential type",u)}:{data:null,error:new gi("Empty credential response",u)}}catch(u){return{data:null,error:Wi({error:u,options:f})}}})).apply(this,arguments)}function yi(){return(yi=(0,i.A)(function*(f){try{const u=yield navigator.credentials.get(f);return u?u instanceof PublicKeyCredential?{data:u,error:null}:{data:null,error:new gi("Browser returned unexpected credential type",u)}:{data:null,error:new gi("Empty credential response",u)}}catch(u){return{data:null,error:oi({error:u,options:f})}}})).apply(this,arguments)}const Hn={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ei={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ai(...f){const u=I=>null!==I&&"object"==typeof I&&!Array.isArray(I),c=I=>I instanceof ArrayBuffer||ArrayBuffer.isView(I),d={};for(const I of f)if(I)for(const U in I){const G=I[U];if(void 0!==G)if(Array.isArray(G))d[U]=G;else if(c(G))d[U]=G;else if(u(G)){const ne=d[U];d[U]=u(ne)?ai(ne,G):ai(G)}else d[U]=G}return d}class Uo{constructor(u){this.client=u,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(u){var c=this;return(0,i.A)(function*(){return c.client.mfa.enroll(Object.assign(Object.assign({},u),{factorType:"webauthn"}))})()}_challenge(u,c){var d=this;return(0,i.A)(function*({factorId:I,webauthn:U,friendlyName:G,signal:ne},Se){var Be;try{const{data:h,error:S}=yield d.client.mfa.challenge({factorId:I,webauthn:U});if(!h)return{data:null,error:S};const E=ne??ii.createNewAbortSignal();if("create"===h.webauthn.type){const{user:w}=h.webauthn.credential_options.publicKey;if(!w.name)if(G)w.name=`${w.id}:${G}`;else{const _e=(yield d.client.getUser()).data.user,Qe=(null===(Be=_e?.user_metadata)||void 0===Be?void 0:Be.name)||_e?.email||_e?.id||"User";w.name=`${w.id}:${Qe}`}w.displayName||(w.displayName=w.name)}switch(h.webauthn.type){case"create":{const w=function zi(f,u){return ai(Hn,f,u||{})}(h.webauthn.credential_options.publicKey,Se?.create),{data:$,error:Z}=yield function si(f){return _i.apply(this,arguments)}({publicKey:w,signal:E});return $?{data:{factorId:I,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:$}},error:null}:{data:null,error:Z}}case"request":{const w=function js(f,u){return ai(Ei,f,u||{})}(h.webauthn.credential_options.publicKey,Se?.request),{data:$,error:Z}=yield function zo(f){return yi.apply(this,arguments)}(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:w,signal:E}));return $?{data:{factorId:I,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:$}},error:null}:{data:null,error:Z}}}}catch(h){return pt(h)?{data:null,error:h}:{data:null,error:new Rn("Unexpected error in challenge",h)}}}).apply(this,arguments)}_verify(u){var c=this;return(0,i.A)(function*({challengeId:d,factorId:I,webauthn:U}){return c.client.mfa.verify({factorId:I,challengeId:d,webauthn:U})}).apply(this,arguments)}_authenticate(u,c){var d=this;return(0,i.A)(function*({factorId:I,webauthn:{rpId:U=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:G=(typeof window<"u"?[window.location.origin]:void 0),signal:ne}={}},Se){if(!U)return{data:null,error:new ft("rpId is required for WebAuthn authentication")};try{if(!Oi())return{data:null,error:new Rn("Browser does not support WebAuthn",null)};const{data:Be,error:h}=yield d.challenge({factorId:I,webauthn:{rpId:U,rpOrigins:G},signal:ne},{request:Se});if(!Be)return{data:null,error:h};const{webauthn:S}=Be;return d._verify({factorId:I,challengeId:Be.challengeId,webauthn:{type:S.type,rpId:U,rpOrigins:G,credential_response:S.credential_response}})}catch(Be){return pt(Be)?{data:null,error:Be}:{data:null,error:new Rn("Unexpected error in authenticate",Be)}}}).apply(this,arguments)}_register(u,c){var d=this;return(0,i.A)(function*({friendlyName:I,webauthn:{rpId:U=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:G=(typeof window<"u"?[window.location.origin]:void 0),signal:ne}={}},Se){if(!U)return{data:null,error:new ft("rpId is required for WebAuthn registration")};try{if(!Oi())return{data:null,error:new Rn("Browser does not support WebAuthn",null)};const{data:Be,error:h}=yield d._enroll({friendlyName:I});if(!Be)return yield d.client.mfa.listFactors().then(w=>{var $;return null===($=w.data)||void 0===$?void 0:$.all.find(Z=>"webauthn"===Z.factor_type&&Z.friendly_name===I&&"unverified"!==Z.status)}).then(w=>w?d.client.mfa.unenroll({factorId:w?.id}):void 0),{data:null,error:h};const{data:S,error:E}=yield d._challenge({factorId:Be.id,friendlyName:Be.friendly_name,webauthn:{rpId:U,rpOrigins:G},signal:ne},{create:Se});return S?d._verify({factorId:Be.id,challengeId:S.challengeId,webauthn:{rpId:U,rpOrigins:G,type:S.webauthn.type,credential_response:S.webauthn.credential_response}}):{data:null,error:E}}catch(Be){return pt(Be)?{data:null,error:Be}:{data:null,error:new Rn("Unexpected error in register",Be)}}}).apply(this,arguments)}}!function Bi(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const ds={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.95.0"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};function li(f,u,c){return ci.apply(this,arguments)}function ci(){return(ci=(0,i.A)(function*(f,u,c){return yield c()})).apply(this,arguments)}const Ho={},_a=(()=>{class f{get jwks(){var c,d;return null!==(d=null===(c=Ho[this.storageKey])||void 0===c?void 0:c.jwks)&&void 0!==d?d:{keys:[]}}set jwks(c){Ho[this.storageKey]=Object.assign(Object.assign({},Ho[this.storageKey]),{jwks:c})}get jwks_cached_at(){var c,d;return null!==(d=null===(c=Ho[this.storageKey])||void 0===c?void 0:c.cachedAt)&&void 0!==d?d:Number.MIN_SAFE_INTEGER}set jwks_cached_at(c){Ho[this.storageKey]=Object.assign(Object.assign({},Ho[this.storageKey]),{cachedAt:c})}constructor(c){var I,U,G,d=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const ne=Object.assign(Object.assign({},ds),c);if(this.storageKey=ne.storageKey,this.instanceID=null!==(I=f.nextInstanceID[this.storageKey])&&void 0!==I?I:0,f.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!ne.debug,"function"==typeof ne.debug&&(this.logger=ne.debug),this.instanceID>0&&Lt()){const Se=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(Se),this.logDebugMessages&&console.trace(Se)}if(this.persistSession=ne.persistSession,this.autoRefreshToken=ne.autoRefreshToken,this.admin=new Ko({url:ne.url,headers:ne.headers,fetch:ne.fetch}),this.url=ne.url,this.headers=ne.headers,this.fetch=Xn(ne.fetch),this.lock=ne.lock||li,this.detectSessionInUrl=ne.detectSessionInUrl,this.flowType=ne.flowType,this.hasCustomAuthorizationHeader=ne.hasCustomAuthorizationHeader,this.throwOnError=ne.throwOnError,this.lockAcquireTimeout=ne.lockAcquireTimeout,this.lock=ne.lock?ne.lock:this.persistSession&&Lt()&&null!==(U=globalThis?.navigator)&&void 0!==U&&U.locks?as:li,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Uo(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(ne.storage?this.storage=ne.storage:_n()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mi(this.memoryStorage)),ne.userStorage&&(this.userStorage=ne.userStorage)):(this.memoryStorage={},this.storage=Mi(this.memoryStorage)),Lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Se){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Se)}null===(G=this.broadcastChannel)||void 0===G||G.addEventListener("message",function(){var Se=(0,i.A)(function*(Be){d._debug("received broadcast notification from other tab or client",Be);try{yield d._notifyAllSubscribers(Be.data.event,Be.data.session,!1)}catch(h){d._debug("#broadcastChannel","error",h)}});return function(Be){return Se.apply(this,arguments)}}())}this.initialize().catch(Se=>{this._debug("#initialize()","error",Se)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(c){if(this.throwOnError&&c&&c.error)throw c.error;return c}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (2.95.0) ${(new Date).toISOString()}`}_debug(...c){return this.logDebugMessages&&this.logger(this._logPrefix(),...c),this}initialize(){var c=this;return(0,i.A)(function*(){return c.initializePromise||(c.initializePromise=(0,i.A)(function*(){return yield c._acquireLock(c.lockAcquireTimeout,(0,i.A)(function*(){return yield c._initialize()}))})()),yield c.initializePromise})()}_initialize(){var c=this;return(0,i.A)(function*(){var d;try{let I={},U="none";if(Lt()&&(I=function Fn(f){const u={},c=new URL(f);if(c.hash&&"#"===c.hash[0])try{new URLSearchParams(c.hash.substring(1)).forEach((I,U)=>{u[U]=I})}catch{}return c.searchParams.forEach((d,I)=>{u[I]=d}),u}(window.location.href),c._isImplicitGrantCallback(I)?U="implicit":(yield c._isPKCECallback(I))&&(U="pkce")),Lt()&&c.detectSessionInUrl&&"none"!==U){const{data:G,error:ne}=yield c._getSessionFromURL(I,U);if(ne){if(c._debug("#_initialize()","error detecting session from URL",ne),function ur(f){return pt(f)&&"AuthImplicitGrantRedirectError"===f.name}(ne)){const h=null===(d=ne.details)||void 0===d?void 0:d.code;if("identity_already_exists"===h||"identity_not_found"===h||"single_identity_not_deletable"===h)return{error:ne}}return{error:ne}}const{session:Se,redirectType:Be}=G;return c._debug("#_initialize()","detected session in URL",Se,"redirect type",Be),yield c._saveSession(Se),setTimeout((0,i.A)(function*(){"recovery"===Be?yield c._notifyAllSubscribers("PASSWORD_RECOVERY",Se):yield c._notifyAllSubscribers("SIGNED_IN",Se)}),0),{error:null}}return yield c._recoverAndRefresh(),{error:null}}catch(I){return pt(I)?c._returnResult({error:I}):c._returnResult({error:new Rn("Unexpected error during initialization",I)})}finally{yield c._handleVisibilityChange(),c._debug("#_initialize()","end")}})()}signInAnonymously(c){var d=this;return(0,i.A)(function*(){var I,U,G;try{const ne=yield j(d.fetch,"POST",`${d.url}/signup`,{headers:d.headers,body:{data:null!==(U=null===(I=c?.options)||void 0===I?void 0:I.data)&&void 0!==U?U:{},gotrue_meta_security:{captcha_token:null===(G=c?.options)||void 0===G?void 0:G.captchaToken}},xform:Xe}),{data:Se,error:Be}=ne;if(Be||!Se)return d._returnResult({data:{user:null,session:null},error:Be});const h=Se.session,S=Se.user;return Se.session&&(yield d._saveSession(Se.session),yield d._notifyAllSubscribers("SIGNED_IN",h)),d._returnResult({data:{user:S,session:h},error:null})}catch(ne){if(pt(ne))return d._returnResult({data:{user:null,session:null},error:ne});throw ne}})()}signUp(c){var d=this;return(0,i.A)(function*(){var I,U,G;try{let ne;if("email"in c){const{email:E,password:w,options:$}=c;let Z=null,_e=null;"pkce"===d.flowType&&([Z,_e]=yield it(d.storage,d.storageKey)),ne=yield j(d.fetch,"POST",`${d.url}/signup`,{headers:d.headers,redirectTo:$?.emailRedirectTo,body:{email:E,password:w,data:null!==(I=$?.data)&&void 0!==I?I:{},gotrue_meta_security:{captcha_token:$?.captchaToken},code_challenge:Z,code_challenge_method:_e},xform:Xe})}else{if(!("phone"in c))throw new Nr("You must provide either an email or phone number and a password");{const{phone:E,password:w,options:$}=c;ne=yield j(d.fetch,"POST",`${d.url}/signup`,{headers:d.headers,body:{phone:E,password:w,data:null!==(U=$?.data)&&void 0!==U?U:{},channel:null!==(G=$?.channel)&&void 0!==G?G:"sms",gotrue_meta_security:{captcha_token:$?.captchaToken}},xform:Xe})}}const{data:Se,error:Be}=ne;if(Be||!Se)return yield pr(d.storage,`${d.storageKey}-code-verifier`),d._returnResult({data:{user:null,session:null},error:Be});const h=Se.session,S=Se.user;return Se.session&&(yield d._saveSession(Se.session),yield d._notifyAllSubscribers("SIGNED_IN",h)),d._returnResult({data:{user:S,session:h},error:null})}catch(ne){if(yield pr(d.storage,`${d.storageKey}-code-verifier`),pt(ne))return d._returnResult({data:{user:null,session:null},error:ne});throw ne}})()}signInWithPassword(c){var d=this;return(0,i.A)(function*(){try{let I;if("email"in c){const{email:ne,password:Se,options:Be}=c;I=yield j(d.fetch,"POST",`${d.url}/token?grant_type=password`,{headers:d.headers,body:{email:ne,password:Se,gotrue_meta_security:{captcha_token:Be?.captchaToken}},xform:on})}else{if(!("phone"in c))throw new Nr("You must provide either an email or phone number and a password");{const{phone:ne,password:Se,options:Be}=c;I=yield j(d.fetch,"POST",`${d.url}/token?grant_type=password`,{headers:d.headers,body:{phone:ne,password:Se,gotrue_meta_security:{captcha_token:Be?.captchaToken}},xform:on})}}const{data:U,error:G}=I;if(G)return d._returnResult({data:{user:null,session:null},error:G});if(!U||!U.session||!U.user){const ne=new jn;return d._returnResult({data:{user:null,session:null},error:ne})}return U.session&&(yield d._saveSession(U.session),yield d._notifyAllSubscribers("SIGNED_IN",U.session)),d._returnResult({data:Object.assign({user:U.user,session:U.session},U.weak_password?{weakPassword:U.weak_password}:null),error:G})}catch(I){if(pt(I))return d._returnResult({data:{user:null,session:null},error:I});throw I}})()}signInWithOAuth(c){var d=this;return(0,i.A)(function*(){var I,U,G,ne;return yield d._handleProviderSignIn(c.provider,{redirectTo:null===(I=c.options)||void 0===I?void 0:I.redirectTo,scopes:null===(U=c.options)||void 0===U?void 0:U.scopes,queryParams:null===(G=c.options)||void 0===G?void 0:G.queryParams,skipBrowserRedirect:null===(ne=c.options)||void 0===ne?void 0:ne.skipBrowserRedirect})})()}exchangeCodeForSession(c){var d=this;return(0,i.A)(function*(){return yield d.initializePromise,d._acquireLock(d.lockAcquireTimeout,(0,i.A)(function*(){return d._exchangeCodeForSession(c)}))})()}signInWithWeb3(c){var d=this;return(0,i.A)(function*(){const{chain:I}=c;switch(I){case"ethereum":return yield d.signInWithEthereum(c);case"solana":return yield d.signInWithSolana(c);default:throw new Error(`@supabase/auth-js: Unsupported chain "${I}"`)}})()}signInWithEthereum(c){var d=this;return(0,i.A)(function*(){var I,U,G,ne,Se,Be,h,S,E,w,$;let Z,_e;if("message"in c)Z=c.message,_e=c.signature;else{const{wallet:ht,statement:Vt,options:sn}=c;let fn;if(Lt())if("object"==typeof ht)fn=ht;else{const To=window;if(!("ethereum"in To)||"object"!=typeof To.ethereum||!("request"in To.ethereum)||"function"!=typeof To.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");fn=To.ethereum}else{if("object"!=typeof ht||!sn?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");fn=ht}const dr=new URL(null!==(I=sn?.url)&&void 0!==I?I:window.location.href),so=yield fn.request({method:"eth_requestAccounts"}).then(To=>To).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!so||0===so.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ir=ji(so[0]);let Vr=null===(U=sn?.signInWithEthereum)||void 0===U?void 0:U.chainId;Vr||(Vr=function ls(f){return parseInt(f,16)}(yield fn.request({method:"eth_chainId"}))),Z=function Bs(f){var u;const{chainId:c,domain:d,expirationTime:I,issuedAt:U=new Date,nonce:G,notBefore:ne,requestId:Se,resources:Be,scheme:h,uri:S,version:E}=f;if(!Number.isInteger(c))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${c}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(G&&G.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${G}`);if(!S)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==E)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(null!==(u=f.statement)&&void 0!==u&&u.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${f.statement}`);const _e=`${h?`${h}://${d}`:d} wants you to sign in with your Ethereum account:\n${ji(f.address)}\n\n${f.statement?`${f.statement}\n`:""}`;let Qe=`URI: ${S}\nVersion: ${E}\nChain ID: ${c}${G?`\nNonce: ${G}`:""}\nIssued At: ${U.toISOString()}`;if(I&&(Qe+=`\nExpiration Time: ${I.toISOString()}`),ne&&(Qe+=`\nNot Before: ${ne.toISOString()}`),Se&&(Qe+=`\nRequest ID: ${Se}`),Be){let ht="\nResources:";for(const Vt of Be){if(!Vt||"string"!=typeof Vt)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Vt}`);ht+=`\n- ${Vt}`}Qe+=ht}return`${_e}\n${Qe}`}({domain:dr.host,address:ir,statement:Vt,uri:dr.href,version:"1",chainId:Vr,nonce:null===(G=sn?.signInWithEthereum)||void 0===G?void 0:G.nonce,issuedAt:null!==(Se=null===(ne=sn?.signInWithEthereum)||void 0===ne?void 0:ne.issuedAt)&&void 0!==Se?Se:new Date,expirationTime:null===(Be=sn?.signInWithEthereum)||void 0===Be?void 0:Be.expirationTime,notBefore:null===(h=sn?.signInWithEthereum)||void 0===h?void 0:h.notBefore,requestId:null===(S=sn?.signInWithEthereum)||void 0===S?void 0:S.requestId,resources:null===(E=sn?.signInWithEthereum)||void 0===E?void 0:E.resources}),_e=yield fn.request({method:"personal_sign",params:[No(Z),ir]})}try{const{data:Qe,error:ht}=yield j(d.fetch,"POST",`${d.url}/token?grant_type=web3`,{headers:d.headers,body:Object.assign({chain:"ethereum",message:Z,signature:_e},null!==(w=c.options)&&void 0!==w&&w.captchaToken?{gotrue_meta_security:{captcha_token:null===($=c.options)||void 0===$?void 0:$.captchaToken}}:null),xform:Xe});if(ht)throw ht;if(!Qe||!Qe.session||!Qe.user){const Vt=new jn;return d._returnResult({data:{user:null,session:null},error:Vt})}return Qe.session&&(yield d._saveSession(Qe.session),yield d._notifyAllSubscribers("SIGNED_IN",Qe.session)),d._returnResult({data:Object.assign({},Qe),error:ht})}catch(Qe){if(pt(Qe))return d._returnResult({data:{user:null,session:null},error:Qe});throw Qe}})()}signInWithSolana(c){var d=this;return(0,i.A)(function*(){var I,U,G,ne,Se,Be,h,S,E,w,$,Z;let _e,Qe;if("message"in c)_e=c.message,Qe=c.signature;else{const{wallet:Vt,statement:sn,options:fn}=c;let dr;if(Lt())if("object"==typeof Vt)dr=Vt;else{const ir=window;if(!("solana"in ir)||"object"!=typeof ir.solana||!("signIn"in ir.solana&&"function"==typeof ir.solana.signIn||"signMessage"in ir.solana&&"function"==typeof ir.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");dr=ir.solana}else{if("object"!=typeof Vt||!fn?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");dr=Vt}const so=new URL(null!==(I=fn?.url)&&void 0!==I?I:window.location.href);if("signIn"in dr&&dr.signIn){const ir=yield dr.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},fn?.signInWithSolana),{version:"1",domain:so.host,uri:so.href}),sn?{statement:sn}:null));let Vr;if(Array.isArray(ir)&&ir[0]&&"object"==typeof ir[0])Vr=ir[0];else{if(!(ir&&"object"==typeof ir&&"signedMessage"in ir&&"signature"in ir))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");Vr=ir}if(!("signedMessage"in Vr&&"signature"in Vr&&("string"==typeof Vr.signedMessage||Vr.signedMessage instanceof Uint8Array)&&Vr.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");_e="string"==typeof Vr.signedMessage?Vr.signedMessage:(new TextDecoder).decode(Vr.signedMessage),Qe=Vr.signature}else{if(!("signMessage"in dr&&"function"==typeof dr.signMessage&&"publicKey"in dr&&"object"==typeof dr&&dr.publicKey&&"toBase58"in dr.publicKey&&"function"==typeof dr.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_e=[`${so.host} wants you to sign in with your Solana account:`,dr.publicKey.toBase58(),...sn?["",sn,""]:[""],"Version: 1",`URI: ${so.href}`,`Issued At: ${null!==(G=null===(U=fn?.signInWithSolana)||void 0===U?void 0:U.issuedAt)&&void 0!==G?G:(new Date).toISOString()}`,...null!==(ne=fn?.signInWithSolana)&&void 0!==ne&&ne.notBefore?[`Not Before: ${fn.signInWithSolana.notBefore}`]:[],...null!==(Se=fn?.signInWithSolana)&&void 0!==Se&&Se.expirationTime?[`Expiration Time: ${fn.signInWithSolana.expirationTime}`]:[],...null!==(Be=fn?.signInWithSolana)&&void 0!==Be&&Be.chainId?[`Chain ID: ${fn.signInWithSolana.chainId}`]:[],...null!==(h=fn?.signInWithSolana)&&void 0!==h&&h.nonce?[`Nonce: ${fn.signInWithSolana.nonce}`]:[],...null!==(S=fn?.signInWithSolana)&&void 0!==S&&S.requestId?[`Request ID: ${fn.signInWithSolana.requestId}`]:[],...null!==(w=null===(E=fn?.signInWithSolana)||void 0===E?void 0:E.resources)&&void 0!==w&&w.length?["Resources",...fn.signInWithSolana.resources.map(Vr=>`- ${Vr}`)]:[]].join("\n");const ir=yield dr.signMessage((new TextEncoder).encode(_e),"utf8");if(!(ir&&ir instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");Qe=ir}}try{const{data:ht,error:Vt}=yield j(d.fetch,"POST",`${d.url}/token?grant_type=web3`,{headers:d.headers,body:Object.assign({chain:"solana",message:_e,signature:je(Qe)},null!==($=c.options)&&void 0!==$&&$.captchaToken?{gotrue_meta_security:{captcha_token:null===(Z=c.options)||void 0===Z?void 0:Z.captchaToken}}:null),xform:Xe});if(Vt)throw Vt;if(!ht||!ht.session||!ht.user){const sn=new jn;return d._returnResult({data:{user:null,session:null},error:sn})}return ht.session&&(yield d._saveSession(ht.session),yield d._notifyAllSubscribers("SIGNED_IN",ht.session)),d._returnResult({data:Object.assign({},ht),error:Vt})}catch(ht){if(pt(ht))return d._returnResult({data:{user:null,session:null},error:ht});throw ht}})()}_exchangeCodeForSession(c){var d=this;return(0,i.A)(function*(){const I=yield Cr(d.storage,`${d.storageKey}-code-verifier`),[U,G]=(I??"").split("/");try{if(!U&&"pkce"===d.flowType)throw new Kn;const{data:ne,error:Se}=yield j(d.fetch,"POST",`${d.url}/token?grant_type=pkce`,{headers:d.headers,body:{auth_code:c,code_verifier:U},xform:Xe});if(yield pr(d.storage,`${d.storageKey}-code-verifier`),Se)throw Se;if(!ne||!ne.session||!ne.user){const Be=new jn;return d._returnResult({data:{user:null,session:null,redirectType:null},error:Be})}return ne.session&&(yield d._saveSession(ne.session),yield d._notifyAllSubscribers("SIGNED_IN",ne.session)),d._returnResult({data:Object.assign(Object.assign({},ne),{redirectType:G??null}),error:Se})}catch(ne){if(yield pr(d.storage,`${d.storageKey}-code-verifier`),pt(ne))return d._returnResult({data:{user:null,session:null,redirectType:null},error:ne});throw ne}})()}signInWithIdToken(c){var d=this;return(0,i.A)(function*(){try{const{options:I,provider:U,token:G,access_token:ne,nonce:Se}=c,Be=yield j(d.fetch,"POST",`${d.url}/token?grant_type=id_token`,{headers:d.headers,body:{provider:U,id_token:G,access_token:ne,nonce:Se,gotrue_meta_security:{captcha_token:I?.captchaToken}},xform:Xe}),{data:h,error:S}=Be;if(S)return d._returnResult({data:{user:null,session:null},error:S});if(!h||!h.session||!h.user){const E=new jn;return d._returnResult({data:{user:null,session:null},error:E})}return h.session&&(yield d._saveSession(h.session),yield d._notifyAllSubscribers("SIGNED_IN",h.session)),d._returnResult({data:h,error:S})}catch(I){if(pt(I))return d._returnResult({data:{user:null,session:null},error:I});throw I}})()}signInWithOtp(c){var d=this;return(0,i.A)(function*(){var I,U,G,ne,Se;try{if("email"in c){const{email:Be,options:h}=c;let S=null,E=null;"pkce"===d.flowType&&([S,E]=yield it(d.storage,d.storageKey));const{error:w}=yield j(d.fetch,"POST",`${d.url}/otp`,{headers:d.headers,body:{email:Be,data:null!==(I=h?.data)&&void 0!==I?I:{},create_user:null===(U=h?.shouldCreateUser)||void 0===U||U,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:S,code_challenge_method:E},redirectTo:h?.emailRedirectTo});return d._returnResult({data:{user:null,session:null},error:w})}if("phone"in c){const{phone:Be,options:h}=c,{data:S,error:E}=yield j(d.fetch,"POST",`${d.url}/otp`,{headers:d.headers,body:{phone:Be,data:null!==(G=h?.data)&&void 0!==G?G:{},create_user:null===(ne=h?.shouldCreateUser)||void 0===ne||ne,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:null!==(Se=h?.channel)&&void 0!==Se?Se:"sms"}});return d._returnResult({data:{user:null,session:null,messageId:S?.message_id},error:E})}throw new Nr("You must provide either an email or phone number.")}catch(Be){if(yield pr(d.storage,`${d.storageKey}-code-verifier`),pt(Be))return d._returnResult({data:{user:null,session:null},error:Be});throw Be}})()}verifyOtp(c){var d=this;return(0,i.A)(function*(){var I,U;try{let G,ne;"options"in c&&(G=null===(I=c.options)||void 0===I?void 0:I.redirectTo,ne=null===(U=c.options)||void 0===U?void 0:U.captchaToken);const{data:Se,error:Be}=yield j(d.fetch,"POST",`${d.url}/verify`,{headers:d.headers,body:Object.assign(Object.assign({},c),{gotrue_meta_security:{captcha_token:ne}}),redirectTo:G,xform:Xe});if(Be)throw Be;if(!Se)throw new Error("An error occurred on token verification.");const h=Se.session,S=Se.user;return h?.access_token&&(yield d._saveSession(h),yield d._notifyAllSubscribers("recovery"==c.type?"PASSWORD_RECOVERY":"SIGNED_IN",h)),d._returnResult({data:{user:S,session:h},error:null})}catch(G){if(pt(G))return d._returnResult({data:{user:null,session:null},error:G});throw G}})()}signInWithSSO(c){var d=this;return(0,i.A)(function*(){var I,U,G,ne,Se;try{let Be=null,h=null;"pkce"===d.flowType&&([Be,h]=yield it(d.storage,d.storageKey));const S=yield j(d.fetch,"POST",`${d.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in c?{provider_id:c.providerId}:null),"domain"in c?{domain:c.domain}:null),{redirect_to:null!==(U=null===(I=c.options)||void 0===I?void 0:I.redirectTo)&&void 0!==U?U:void 0}),null!==(G=c?.options)&&void 0!==G&&G.captchaToken?{gotrue_meta_security:{captcha_token:c.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:Be,code_challenge_method:h}),headers:d.headers,xform:Hr});return!(null===(ne=S.data)||void 0===ne)&&ne.url&&Lt()&&!(null!==(Se=c.options)&&void 0!==Se&&Se.skipBrowserRedirect)&&window.location.assign(S.data.url),d._returnResult(S)}catch(Be){if(yield pr(d.storage,`${d.storageKey}-code-verifier`),pt(Be))return d._returnResult({data:null,error:Be});throw Be}})()}reauthenticate(){var c=this;return(0,i.A)(function*(){return yield c.initializePromise,yield c._acquireLock(c.lockAcquireTimeout,(0,i.A)(function*(){return yield c._reauthenticate()}))})()}_reauthenticate(){var c=this;return(0,i.A)(function*(){try{return yield c._useSession(function(){var d=(0,i.A)(function*(I){const{data:{session:U},error:G}=I;if(G)throw G;if(!U)throw new Pn;const{error:ne}=yield j(c.fetch,"GET",`${c.url}/reauthenticate`,{headers:c.headers,jwt:U.access_token});return c._returnResult({data:{user:null,session:null},error:ne})});return function(I){return d.apply(this,arguments)}}())}catch(d){if(pt(d))return c._returnResult({data:{user:null,session:null},error:d});throw d}})()}resend(c){var d=this;return(0,i.A)(function*(){try{const I=`${d.url}/resend`;if("email"in c){const{email:U,type:G,options:ne}=c,{error:Se}=yield j(d.fetch,"POST",I,{headers:d.headers,body:{email:U,type:G,gotrue_meta_security:{captcha_token:ne?.captchaToken}},redirectTo:ne?.emailRedirectTo});return d._returnResult({data:{user:null,session:null},error:Se})}if("phone"in c){const{phone:U,type:G,options:ne}=c,{data:Se,error:Be}=yield j(d.fetch,"POST",I,{headers:d.headers,body:{phone:U,type:G,gotrue_meta_security:{captcha_token:ne?.captchaToken}}});return d._returnResult({data:{user:null,session:null,messageId:Se?.message_id},error:Be})}throw new Nr("You must provide either an email or phone number and a type")}catch(I){if(pt(I))return d._returnResult({data:{user:null,session:null},error:I});throw I}})()}getSession(){var c=this;return(0,i.A)(function*(){return yield c.initializePromise,yield c._acquireLock(c.lockAcquireTimeout,(0,i.A)(function*(){return c._useSession(function(){var I=(0,i.A)(function*(U){return U});return function(U){return I.apply(this,arguments)}}())}))})()}_acquireLock(c,d){var I=this;return(0,i.A)(function*(){I._debug("#_acquireLock","begin",c);try{if(I.lockAcquired){const U=I.pendingInLock.length?I.pendingInLock[I.pendingInLock.length-1]:Promise.resolve(),G=(0,i.A)(function*(){return yield U,yield d()})();return I.pendingInLock.push((0,i.A)(function*(){try{yield G}catch{}})()),G}return yield I.lock(`lock:${I.storageKey}`,c,(0,i.A)(function*(){I._debug("#_acquireLock","lock acquired for storage key",I.storageKey);try{I.lockAcquired=!0;const U=d();for(I.pendingInLock.push((0,i.A)(function*(){try{yield U}catch{}})()),yield U;I.pendingInLock.length;){const G=[...I.pendingInLock];yield Promise.all(G),I.pendingInLock.splice(0,G.length)}return yield U}finally{I._debug("#_acquireLock","lock released for storage key",I.storageKey),I.lockAcquired=!1}}))}finally{I._debug("#_acquireLock","end")}})()}_useSession(c){var d=this;return(0,i.A)(function*(){d._debug("#_useSession","begin");try{const I=yield d.__loadSession();return yield c(I)}finally{d._debug("#_useSession","end")}})()}__loadSession(){var c=this;return(0,i.A)(function*(){c._debug("#__loadSession()","begin"),c.lockAcquired||c._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let d=null;const I=yield Cr(c.storage,c.storageKey);if(c._debug("#getSession()","session from storage",I),null!==I&&(c._isValidSession(I)?d=I:(c._debug("#getSession()","session from storage is not valid"),yield c._removeSession())),!d)return{data:{session:null},error:null};const U=!!d.expires_at&&1e3*d.expires_at-Date.now()<9e4;if(c._debug("#__loadSession()",`session has${U?"":" not"} expired`,"expires_at",d.expires_at),!U){if(c.userStorage){const Se=yield Cr(c.userStorage,c.storageKey+"-user");d.user=Se?.user?Se.user:qt()}if(c.storage.isServer&&d.user&&!d.user.__isUserNotAvailableProxy){const Se={value:c.suppressGetSessionWarning};d.user=function Sn(f,u){return new Proxy(f,{get:(c,d,I)=>{if("__isInsecureUserWarningProxy"===d)return!0;if("symbol"==typeof d){const U=d.toString();if("Symbol(Symbol.toPrimitive)"===U||"Symbol(Symbol.toStringTag)"===U||"Symbol(util.inspect.custom)"===U||"Symbol(nodejs.util.inspect.custom)"===U)return Reflect.get(c,d,I)}return!u.value&&"string"==typeof d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u.value=!0),Reflect.get(c,d,I)}})}(d.user,Se),Se.value&&(c.suppressGetSessionWarning=!0)}return{data:{session:d},error:null}}const{data:G,error:ne}=yield c._callRefreshToken(d.refresh_token);return c._returnResult(ne?{data:{session:null},error:ne}:{data:{session:G},error:null})}finally{c._debug("#__loadSession()","end")}})()}getUser(c){var d=this;return(0,i.A)(function*(){if(c)return yield d._getUser(c);yield d.initializePromise;const I=yield d._acquireLock(d.lockAcquireTimeout,(0,i.A)(function*(){return yield d._getUser()}));return I.data.user&&(d.suppressGetSessionWarning=!0),I})()}_getUser(c){var d=this;return(0,i.A)(function*(){try{return c?yield j(d.fetch,"GET",`${d.url}/user`,{headers:d.headers,jwt:c,xform:mn}):yield d._useSession(function(){var I=(0,i.A)(function*(U){var G,ne,Se;const{data:Be,error:h}=U;if(h)throw h;return null!==(G=Be.session)&&void 0!==G&&G.access_token||d.hasCustomAuthorizationHeader?yield j(d.fetch,"GET",`${d.url}/user`,{headers:d.headers,jwt:null!==(Se=null===(ne=Be.session)||void 0===ne?void 0:ne.access_token)&&void 0!==Se?Se:void 0,xform:mn}):{data:{user:null},error:new Pn}});return function(U){return I.apply(this,arguments)}}())}catch(I){if(pt(I))return Yt(I)&&(yield d._removeSession(),yield pr(d.storage,`${d.storageKey}-code-verifier`)),d._returnResult({data:{user:null},error:I});throw I}})()}updateUser(c){var d=this;return(0,i.A)(function*(I,U={}){return yield d.initializePromise,yield d._acquireLock(d.lockAcquireTimeout,(0,i.A)(function*(){return yield d._updateUser(I,U)}))}).apply(this,arguments)}_updateUser(c){var d=this;return(0,i.A)(function*(I,U={}){try{return yield d._useSession(function(){var G=(0,i.A)(function*(ne){const{data:Se,error:Be}=ne;if(Be)throw Be;if(!Se.session)throw new Pn;const h=Se.session;let S=null,E=null;"pkce"===d.flowType&&null!=I.email&&([S,E]=yield it(d.storage,d.storageKey));const{data:w,error:$}=yield j(d.fetch,"PUT",`${d.url}/user`,{headers:d.headers,redirectTo:U?.emailRedirectTo,body:Object.assign(Object.assign({},I),{code_challenge:S,code_challenge_method:E}),jwt:h.access_token,xform:mn});if($)throw $;return h.user=w.user,yield d._saveSession(h),yield d._notifyAllSubscribers("USER_UPDATED",h),d._returnResult({data:{user:h.user},error:null})});return function(ne){return G.apply(this,arguments)}}())}catch(G){if(yield pr(d.storage,`${d.storageKey}-code-verifier`),pt(G))return d._returnResult({data:{user:null},error:G});throw G}}).apply(this,arguments)}setSession(c){var d=this;return(0,i.A)(function*(){return yield d.initializePromise,yield d._acquireLock(d.lockAcquireTimeout,(0,i.A)(function*(){return yield d._setSession(c)}))})()}_setSession(c){var d=this;return(0,i.A)(function*(){try{if(!c.access_token||!c.refresh_token)throw new Pn;const I=Date.now()/1e3;let U=I,G=!0,ne=null;const{payload:Se}=Ir(c.access_token);if(Se.exp&&(U=Se.exp,G=U<=I),G){const{data:Be,error:h}=yield d._callRefreshToken(c.refresh_token);if(h)return d._returnResult({data:{user:null,session:null},error:h});if(!Be)return{data:{user:null,session:null},error:null};ne=Be}else{const{data:Be,error:h}=yield d._getUser(c.access_token);if(h)return d._returnResult({data:{user:null,session:null},error:h});ne={access_token:c.access_token,refresh_token:c.refresh_token,user:Be.user,token_type:"bearer",expires_in:U-I,expires_at:U},yield d._saveSession(ne),yield d._notifyAllSubscribers("SIGNED_IN",ne)}return d._returnResult({data:{user:ne.user,session:ne},error:null})}catch(I){if(pt(I))return d._returnResult({data:{session:null,user:null},error:I});throw I}})()}refreshSession(c){var d=this;return(0,i.A)(function*(){return yield d.initializePromise,yield d._acquireLock(d.lockAcquireTimeout,(0,i.A)(function*(){return yield d._refreshSession(c)}))})()}_refreshSession(c){var d=this;return(0,i.A)(function*(){try{return yield d._useSession(function(){var I=(0,i.A)(function*(U){var G;if(!c){const{data:Be,error:h}=U;if(h)throw h;c=null!==(G=Be.session)&&void 0!==G?G:void 0}if(!c?.refresh_token)throw new Pn;const{data:ne,error:Se}=yield d._callRefreshToken(c.refresh_token);return d._returnResult(Se?{data:{user:null,session:null},error:Se}:ne?{data:{user:ne.user,session:ne},error:null}:{data:{user:null,session:null},error:null})});return function(U){return I.apply(this,arguments)}}())}catch(I){if(pt(I))return d._returnResult({data:{user:null,session:null},error:I});throw I}})()}_getSessionFromURL(c,d){var I=this;return(0,i.A)(function*(){try{if(!Lt())throw new wr("No browser detected.");if(c.error||c.error_description||c.error_code)throw new wr(c.error_description||"Error in URL with unspecified error_description",{error:c.error||"unspecified_error",code:c.error_code||"unspecified_code"});switch(d){case"implicit":if("pkce"===I.flowType)throw new X("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===I.flowType)throw new wr("Not a valid implicit grant flow url.")}if("pkce"===d){if(I._debug("#_initialize()","begin","is PKCE flow",!0),!c.code)throw new X("No code detected.");const{data:sn,error:fn}=yield I._exchangeCodeForSession(c.code);if(fn)throw fn;const dr=new URL(window.location.href);return dr.searchParams.delete("code"),window.history.replaceState(window.history.state,"",dr.toString()),{data:{session:sn.session,redirectType:null},error:null}}const{provider_token:U,provider_refresh_token:G,access_token:ne,refresh_token:Se,expires_in:Be,expires_at:h,token_type:S}=c;if(!(ne&&Be&&Se&&S))throw new wr("No session defined in URL");const E=Math.round(Date.now()/1e3),w=parseInt(Be);let $=E+w;h&&($=parseInt(h));const Z=$-E;1e3*Z<=$r&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${Z}s, should have been closer to ${w}s`);const _e=$-w;E-_e>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_e,$,E):E-_e<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_e,$,E);const{data:Qe,error:ht}=yield I._getUser(ne);if(ht)throw ht;const Vt={provider_token:U,provider_refresh_token:G,access_token:ne,expires_in:w,expires_at:$,refresh_token:Se,token_type:S,user:Qe.user};return window.location.hash="",I._debug("#_getSessionFromURL()","clearing window.location.hash"),I._returnResult({data:{session:Vt,redirectType:c.type},error:null})}catch(U){if(pt(U))return I._returnResult({data:{session:null,redirectType:null},error:U});throw U}})()}_isImplicitGrantCallback(c){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),c):!(!c.access_token&&!c.error_description)}_isPKCECallback(c){var d=this;return(0,i.A)(function*(){const I=yield Cr(d.storage,`${d.storageKey}-code-verifier`);return!(!c.code||!I)})()}signOut(){var c=this;return(0,i.A)(function*(d={scope:"global"}){return yield c.initializePromise,yield c._acquireLock(c.lockAcquireTimeout,(0,i.A)(function*(){return yield c._signOut(d)}))}).apply(this,arguments)}_signOut(){var c=this;return(0,i.A)(function*({scope:d}={scope:"global"}){return yield c._useSession(function(){var I=(0,i.A)(function*(U){var G;const{data:ne,error:Se}=U;if(Se&&!Yt(Se))return c._returnResult({error:Se});const Be=null===(G=ne.session)||void 0===G?void 0:G.access_token;if(Be){const{error:h}=yield c.admin.signOut(Be,d);if(h&&(!function un(f){return pt(f)&&"AuthApiError"===f.name}(h)||404!==h.status&&401!==h.status&&403!==h.status)&&!Yt(h))return c._returnResult({error:h})}return"others"!==d&&(yield c._removeSession(),yield pr(c.storage,`${c.storageKey}-code-verifier`)),c._returnResult({error:null})});return function(U){return I.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(c){var d=this;const I=function Pt(){return Symbol("auth-callback")}(),U={id:I,callback:c,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",I),this.stateChangeEmitters.delete(I)}};return this._debug("#onAuthStateChange()","registered callback with id",I),this.stateChangeEmitters.set(I,U),(0,i.A)(function*(){yield d.initializePromise,yield d._acquireLock(d.lockAcquireTimeout,(0,i.A)(function*(){d._emitInitialSession(I)}))})(),{data:{subscription:U}}}_emitInitialSession(c){var d=this;return(0,i.A)(function*(){return yield d._useSession(function(){var I=(0,i.A)(function*(U){var G,ne;try{const{data:{session:Se},error:Be}=U;if(Be)throw Be;yield null===(G=d.stateChangeEmitters.get(c))||void 0===G?void 0:G.callback("INITIAL_SESSION",Se),d._debug("INITIAL_SESSION","callback id",c,"session",Se)}catch(Se){yield null===(ne=d.stateChangeEmitters.get(c))||void 0===ne?void 0:ne.callback("INITIAL_SESSION",null),d._debug("INITIAL_SESSION","callback id",c,"error",Se),console.error(Se)}});return function(U){return I.apply(this,arguments)}}())})()}resetPasswordForEmail(c){var d=this;return(0,i.A)(function*(I,U={}){let G=null,ne=null;"pkce"===d.flowType&&([G,ne]=yield it(d.storage,d.storageKey,!0));try{return yield j(d.fetch,"POST",`${d.url}/recover`,{body:{email:I,code_challenge:G,code_challenge_method:ne,gotrue_meta_security:{captcha_token:U.captchaToken}},headers:d.headers,redirectTo:U.redirectTo})}catch(Se){if(yield pr(d.storage,`${d.storageKey}-code-verifier`),pt(Se))return d._returnResult({data:null,error:Se});throw Se}}).apply(this,arguments)}getUserIdentities(){var c=this;return(0,i.A)(function*(){var d;try{const{data:I,error:U}=yield c.getUser();if(U)throw U;return c._returnResult({data:{identities:null!==(d=I.user.identities)&&void 0!==d?d:[]},error:null})}catch(I){if(pt(I))return c._returnResult({data:null,error:I});throw I}})()}linkIdentity(c){var d=this;return(0,i.A)(function*(){return"token"in c?d.linkIdentityIdToken(c):d.linkIdentityOAuth(c)})()}linkIdentityOAuth(c){var d=this;return(0,i.A)(function*(){var I;try{const{data:U,error:G}=yield d._useSession(function(){var ne=(0,i.A)(function*(Se){var Be,h,S,E,w;const{data:$,error:Z}=Se;if(Z)throw Z;const _e=yield d._getUrlForProvider(`${d.url}/user/identities/authorize`,c.provider,{redirectTo:null===(Be=c.options)||void 0===Be?void 0:Be.redirectTo,scopes:null===(h=c.options)||void 0===h?void 0:h.scopes,queryParams:null===(S=c.options)||void 0===S?void 0:S.queryParams,skipBrowserRedirect:!0});return yield j(d.fetch,"GET",_e,{headers:d.headers,jwt:null!==(w=null===(E=$.session)||void 0===E?void 0:E.access_token)&&void 0!==w?w:void 0})});return function(Se){return ne.apply(this,arguments)}}());if(G)throw G;return Lt()&&!(null!==(I=c.options)&&void 0!==I&&I.skipBrowserRedirect)&&window.location.assign(U?.url),d._returnResult({data:{provider:c.provider,url:U?.url},error:null})}catch(U){if(pt(U))return d._returnResult({data:{provider:c.provider,url:null},error:U});throw U}})()}linkIdentityIdToken(c){var d=this;return(0,i.A)(function*(){return yield d._useSession(function(){var I=(0,i.A)(function*(U){var G;try{const{error:ne,data:{session:Se}}=U;if(ne)throw ne;const{options:Be,provider:h,token:S,access_token:E,nonce:w}=c,$=yield j(d.fetch,"POST",`${d.url}/token?grant_type=id_token`,{headers:d.headers,jwt:null!==(G=Se?.access_token)&&void 0!==G?G:void 0,body:{provider:h,id_token:S,access_token:E,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:Be?.captchaToken}},xform:Xe}),{data:Z,error:_e}=$;return _e?d._returnResult({data:{user:null,session:null},error:_e}):Z&&Z.session&&Z.user?(Z.session&&(yield d._saveSession(Z.session),yield d._notifyAllSubscribers("USER_UPDATED",Z.session)),d._returnResult({data:Z,error:_e})):d._returnResult({data:{user:null,session:null},error:new jn})}catch(ne){if(yield pr(d.storage,`${d.storageKey}-code-verifier`),pt(ne))return d._returnResult({data:{user:null,session:null},error:ne});throw ne}});return function(U){return I.apply(this,arguments)}}())})()}unlinkIdentity(c){var d=this;return(0,i.A)(function*(){try{return yield d._useSession(function(){var I=(0,i.A)(function*(U){var G,ne;const{data:Se,error:Be}=U;if(Be)throw Be;return yield j(d.fetch,"DELETE",`${d.url}/user/identities/${c.identity_id}`,{headers:d.headers,jwt:null!==(ne=null===(G=Se.session)||void 0===G?void 0:G.access_token)&&void 0!==ne?ne:void 0})});return function(U){return I.apply(this,arguments)}}())}catch(I){if(pt(I))return d._returnResult({data:null,error:I});throw I}})()}_refreshAccessToken(c){var d=this;return(0,i.A)(function*(){const I=`#_refreshAccessToken(${c.substring(0,5)}...)`;d._debug(I,"begin");try{const U=Date.now();return yield function Eo(f,u){return new Promise((d,I)=>{(0,i.A)(function*(){for(let U=0;U<1/0;U++)try{const G=yield f(U);if(!u(U,null,G))return void d(G)}catch(G){if(!u(U,G))return void I(G)}})()})}(function(){var G=(0,i.A)(function*(ne){return ne>0&&(yield function io(f){return Qr.apply(this,arguments)}(200*Math.pow(2,ne-1))),d._debug(I,"refreshing attempt",ne),yield j(d.fetch,"POST",`${d.url}/token?grant_type=refresh_token`,{body:{refresh_token:c},headers:d.headers,xform:Xe})});return function(ne){return G.apply(this,arguments)}}(),(G,ne)=>{const Se=200*Math.pow(2,G);return ne&&Me(ne)&&Date.now()+Se-U<$r})}catch(U){if(d._debug(I,"error",U),pt(U))return d._returnResult({data:{session:null,user:null},error:U});throw U}finally{d._debug(I,"end")}})()}_isValidSession(c){return"object"==typeof c&&null!==c&&"access_token"in c&&"refresh_token"in c&&"expires_at"in c}_handleProviderSignIn(c,d){var I=this;return(0,i.A)(function*(){const U=yield I._getUrlForProvider(`${I.url}/authorize`,c,{redirectTo:d.redirectTo,scopes:d.scopes,queryParams:d.queryParams});return I._debug("#_handleProviderSignIn()","provider",c,"options",d,"url",U),Lt()&&!d.skipBrowserRedirect&&window.location.assign(U),{data:{provider:c,url:U},error:null}})()}_recoverAndRefresh(){var c=this;return(0,i.A)(function*(){var d,I;const U="#_recoverAndRefresh()";c._debug(U,"begin");try{const G=yield Cr(c.storage,c.storageKey);if(G&&c.userStorage){let Se=yield Cr(c.userStorage,c.storageKey+"-user");!c.storage.isServer&&Object.is(c.storage,c.userStorage)&&!Se&&(Se={user:G.user},yield Sr(c.userStorage,c.storageKey+"-user",Se)),G.user=null!==(d=Se?.user)&&void 0!==d?d:qt()}else if(G&&!G.user&&!G.user){const Se=yield Cr(c.storage,c.storageKey+"-user");Se&&Se?.user?(G.user=Se.user,yield pr(c.storage,c.storageKey+"-user"),yield Sr(c.storage,c.storageKey,G)):G.user=qt()}if(c._debug(U,"session from storage",G),!c._isValidSession(G))return c._debug(U,"session is not valid"),void(null!==G&&(yield c._removeSession()));const ne=1e3*(null!==(I=G.expires_at)&&void 0!==I?I:1/0)-Date.now()<9e4;if(c._debug(U,`session has${ne?"":" not"} expired with margin of 90000s`),ne){if(c.autoRefreshToken&&G.refresh_token){const{error:Se}=yield c._callRefreshToken(G.refresh_token);Se&&(console.error(Se),Me(Se)||(c._debug(U,"refresh failed with a non-retryable error, removing the session",Se),yield c._removeSession()))}}else if(G.user&&!0===G.user.__isUserNotAvailableProxy)try{const{data:Se,error:Be}=yield c._getUser(G.access_token);!Be&&Se?.user?(G.user=Se.user,yield c._saveSession(G),yield c._notifyAllSubscribers("SIGNED_IN",G)):c._debug(U,"could not get user data, skipping SIGNED_IN notification")}catch(Se){console.error("Error getting user data:",Se),c._debug(U,"error getting user data, skipping SIGNED_IN notification",Se)}else yield c._notifyAllSubscribers("SIGNED_IN",G)}catch(G){return c._debug(U,"error",G),void console.error(G)}finally{c._debug(U,"end")}})()}_callRefreshToken(c){var d=this;return(0,i.A)(function*(){var I,U;if(!c)throw new Pn;if(d.refreshingDeferred)return d.refreshingDeferred.promise;const G=`#_callRefreshToken(${c.substring(0,5)}...)`;d._debug(G,"begin");try{d.refreshingDeferred=new Kr;const{data:ne,error:Se}=yield d._refreshAccessToken(c);if(Se)throw Se;if(!ne.session)throw new Pn;yield d._saveSession(ne.session),yield d._notifyAllSubscribers("TOKEN_REFRESHED",ne.session);const Be={data:ne.session,error:null};return d.refreshingDeferred.resolve(Be),Be}catch(ne){if(d._debug(G,"error",ne),pt(ne)){const Se={data:null,error:ne};return Me(ne)||(yield d._removeSession()),null===(I=d.refreshingDeferred)||void 0===I||I.resolve(Se),Se}throw null===(U=d.refreshingDeferred)||void 0===U||U.reject(ne),ne}finally{d.refreshingDeferred=null,d._debug(G,"end")}})()}_notifyAllSubscribers(c,d){var I=this;return(0,i.A)(function*(U,G,ne=!0){const Se=`#_notifyAllSubscribers(${U})`;I._debug(Se,"begin",G,`broadcast = ${ne}`);try{I.broadcastChannel&&ne&&I.broadcastChannel.postMessage({event:U,session:G});const Be=[],h=Array.from(I.stateChangeEmitters.values()).map(function(){var S=(0,i.A)(function*(E){try{yield E.callback(U,G)}catch(w){Be.push(w)}});return function(E){return S.apply(this,arguments)}}());if(yield Promise.all(h),Be.length>0){for(let S=0;S<Be.length;S+=1)console.error(Be[S]);throw Be[0]}}finally{I._debug(Se,"end")}}).apply(this,arguments)}_saveSession(c){var d=this;return(0,i.A)(function*(){d._debug("#_saveSession()",c),d.suppressGetSessionWarning=!0,yield pr(d.storage,`${d.storageKey}-code-verifier`);const I=Object.assign({},c);if(d.userStorage){(!I.user||!0!==I.user.__isUserNotAvailableProxy)&&I.user&&(yield Sr(d.userStorage,d.storageKey+"-user",{user:I.user}));const G=Object.assign({},I);delete G.user;const ne=gn(G);yield Sr(d.storage,d.storageKey,ne)}else{const G=gn(I);yield Sr(d.storage,d.storageKey,G)}})()}_removeSession(){var c=this;return(0,i.A)(function*(){c._debug("#_removeSession()"),c.suppressGetSessionWarning=!1,yield pr(c.storage,c.storageKey),yield pr(c.storage,c.storageKey+"-code-verifier"),yield pr(c.storage,c.storageKey+"-user"),c.userStorage&&(yield pr(c.userStorage,c.storageKey+"-user")),yield c._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const c=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{c&&Lt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",c)}catch(d){console.error("removing visibilitychange callback failed",d)}}_startAutoRefresh(){var c=this;return(0,i.A)(function*(){yield c._stopAutoRefresh(),c._debug("#_startAutoRefresh()");const d=setInterval(()=>c._autoRefreshTokenTick(),$r);c.autoRefreshTicker=d,d&&"object"==typeof d&&"function"==typeof d.unref?d.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(d);const I=setTimeout((0,i.A)(function*(){yield c.initializePromise,yield c._autoRefreshTokenTick()}),0);c.autoRefreshTickTimeout=I,I&&"object"==typeof I&&"function"==typeof I.unref?I.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(I)})()}_stopAutoRefresh(){var c=this;return(0,i.A)(function*(){c._debug("#_stopAutoRefresh()");const d=c.autoRefreshTicker;c.autoRefreshTicker=null,d&&clearInterval(d);const I=c.autoRefreshTickTimeout;c.autoRefreshTickTimeout=null,I&&clearTimeout(I)})()}startAutoRefresh(){var c=this;return(0,i.A)(function*(){c._removeVisibilityChangedCallback(),yield c._startAutoRefresh()})()}stopAutoRefresh(){var c=this;return(0,i.A)(function*(){c._removeVisibilityChangedCallback(),yield c._stopAutoRefresh()})()}_autoRefreshTokenTick(){var c=this;return(0,i.A)(function*(){c._debug("#_autoRefreshTokenTick()","begin");try{yield c._acquireLock(0,(0,i.A)(function*(){try{const d=Date.now();try{return yield c._useSession(function(){var I=(0,i.A)(function*(U){const{data:{session:G}}=U;if(!G||!G.refresh_token||!G.expires_at)return void c._debug("#_autoRefreshTokenTick()","no session");const ne=Math.floor((1e3*G.expires_at-d)/$r);c._debug("#_autoRefreshTokenTick()",`access token expires in ${ne} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),ne<=3&&(yield c._callRefreshToken(G.refresh_token))});return function(U){return I.apply(this,arguments)}}())}catch(I){console.error("Auto refresh tick failed with error. This is likely a transient error.",I)}}finally{c._debug("#_autoRefreshTokenTick()","end")}}))}catch(d){if(!(d.isAcquireTimeout||d instanceof $i))throw d;c._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var c=this;return(0,i.A)(function*(){if(c._debug("#_handleVisibilityChange()"),!Lt()||!window?.addEventListener)return c.autoRefreshToken&&c.startAutoRefresh(),!1;try{c.visibilityChangedCallback=(0,i.A)(function*(){try{yield c._onVisibilityChanged(!1)}catch(d){c._debug("#visibilityChangedCallback","error",d)}}),window?.addEventListener("visibilitychange",c.visibilityChangedCallback),yield c._onVisibilityChanged(!0)}catch(d){console.error("_handleVisibilityChange",d)}})()}_onVisibilityChanged(c){var d=this;return(0,i.A)(function*(){const I=`#_onVisibilityChanged(${c})`;d._debug(I,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(d.autoRefreshToken&&d._startAutoRefresh(),c||(yield d.initializePromise,yield d._acquireLock(d.lockAcquireTimeout,(0,i.A)(function*(){"visible"===document.visibilityState?yield d._recoverAndRefresh():d._debug(I,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&d.autoRefreshToken&&d._stopAutoRefresh()})()}_getUrlForProvider(c,d,I){var U=this;return(0,i.A)(function*(){const G=[`provider=${encodeURIComponent(d)}`];if(I?.redirectTo&&G.push(`redirect_to=${encodeURIComponent(I.redirectTo)}`),I?.scopes&&G.push(`scopes=${encodeURIComponent(I.scopes)}`),"pkce"===U.flowType){const[ne,Se]=yield it(U.storage,U.storageKey),Be=new URLSearchParams({code_challenge:`${encodeURIComponent(ne)}`,code_challenge_method:`${encodeURIComponent(Se)}`});G.push(Be.toString())}if(I?.queryParams){const ne=new URLSearchParams(I.queryParams);G.push(ne.toString())}return I?.skipBrowserRedirect&&G.push(`skip_http_redirect=${I.skipBrowserRedirect}`),`${c}?${G.join("&")}`})()}_unenroll(c){var d=this;return(0,i.A)(function*(){try{return yield d._useSession(function(){var I=(0,i.A)(function*(U){var G;const{data:ne,error:Se}=U;return Se?d._returnResult({data:null,error:Se}):yield j(d.fetch,"DELETE",`${d.url}/factors/${c.factorId}`,{headers:d.headers,jwt:null===(G=ne?.session)||void 0===G?void 0:G.access_token})});return function(U){return I.apply(this,arguments)}}())}catch(I){if(pt(I))return d._returnResult({data:null,error:I});throw I}})()}_enroll(c){var d=this;return(0,i.A)(function*(){try{return yield d._useSession(function(){var I=(0,i.A)(function*(U){var G,ne;const{data:Se,error:Be}=U;if(Be)return d._returnResult({data:null,error:Be});const h=Object.assign({friendly_name:c.friendlyName,factor_type:c.factorType},"phone"===c.factorType?{phone:c.phone}:"totp"===c.factorType?{issuer:c.issuer}:{}),{data:S,error:E}=yield j(d.fetch,"POST",`${d.url}/factors`,{body:h,headers:d.headers,jwt:null===(G=Se?.session)||void 0===G?void 0:G.access_token});return E?d._returnResult({data:null,error:E}):("totp"===c.factorType&&"totp"===S.type&&!(null===(ne=S?.totp)||void 0===ne)&&ne.qr_code&&(S.totp.qr_code=`data:image/svg+xml;utf-8,${S.totp.qr_code}`),d._returnResult({data:S,error:null}))});return function(U){return I.apply(this,arguments)}}())}catch(I){if(pt(I))return d._returnResult({data:null,error:I});throw I}})()}_verify(c){var d=this;return(0,i.A)(function*(){return d._acquireLock(d.lockAcquireTimeout,(0,i.A)(function*(){try{return yield d._useSession(function(){var I=(0,i.A)(function*(U){var G;const{data:ne,error:Se}=U;if(Se)return d._returnResult({data:null,error:Se});const Be=Object.assign({challenge_id:c.challengeId},"webauthn"in c?{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_response:"create"===c.webauthn.type?us(c.webauthn.credential_response):Ki(c.webauthn.credential_response)})}:{code:c.code}),{data:h,error:S}=yield j(d.fetch,"POST",`${d.url}/factors/${c.factorId}/verify`,{body:Be,headers:d.headers,jwt:null===(G=ne?.session)||void 0===G?void 0:G.access_token});return S?d._returnResult({data:null,error:S}):(yield d._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),yield d._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),d._returnResult({data:h,error:S}))});return function(U){return I.apply(this,arguments)}}())}catch(I){if(pt(I))return d._returnResult({data:null,error:I});throw I}}))})()}_challenge(c){var d=this;return(0,i.A)(function*(){return d._acquireLock(d.lockAcquireTimeout,(0,i.A)(function*(){try{return yield d._useSession(function(){var I=(0,i.A)(function*(U){var G;const{data:ne,error:Se}=U;if(Se)return d._returnResult({data:null,error:Se});const Be=yield j(d.fetch,"POST",`${d.url}/factors/${c.factorId}/challenge`,{body:c,headers:d.headers,jwt:null===(G=ne?.session)||void 0===G?void 0:G.access_token});if(Be.error)return Be;const{data:h}=Be;if("webauthn"!==h.type)return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:mi(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:Fo(h.webauthn.credential_options.publicKey)})})}),error:null}}});return function(U){return I.apply(this,arguments)}}())}catch(I){if(pt(I))return d._returnResult({data:null,error:I});throw I}}))})()}_challengeAndVerify(c){var d=this;return(0,i.A)(function*(){const{data:I,error:U}=yield d._challenge({factorId:c.factorId});return U?d._returnResult({data:null,error:U}):yield d._verify({factorId:c.factorId,challengeId:I.id,code:c.code})})()}_listFactors(){var c=this;return(0,i.A)(function*(){var d;const{data:{user:I},error:U}=yield c.getUser();if(U)return{data:null,error:U};const G={all:[],phone:[],totp:[],webauthn:[]};for(const ne of null!==(d=I?.factors)&&void 0!==d?d:[])G.all.push(ne),"verified"===ne.status&&G[ne.factor_type].push(ne);return{data:G,error:null}})()}_getAuthenticatorAssuranceLevel(c){var d=this;return(0,i.A)(function*(){var I,U,G,ne;if(c)try{const{payload:Z}=Ir(c);let _e=null;Z.aal&&(_e=Z.aal);let Qe=_e;const{data:{user:ht},error:Vt}=yield d.getUser(c);return Vt?d._returnResult({data:null,error:Vt}):((null!==(U=null===(I=ht?.factors)||void 0===I?void 0:I.filter(dr=>"verified"===dr.status))&&void 0!==U?U:[]).length>0&&(Qe="aal2"),{data:{currentLevel:_e,nextLevel:Qe,currentAuthenticationMethods:Z.amr||[]},error:null})}catch(Z){if(pt(Z))return d._returnResult({data:null,error:Z});throw Z}const{data:{session:Se},error:Be}=yield d.getSession();if(Be)return d._returnResult({data:null,error:Be});if(!Se)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Ir(Se.access_token);let S=null;h.aal&&(S=h.aal);let E=S;return(null!==(ne=null===(G=Se.user.factors)||void 0===G?void 0:G.filter(Z=>"verified"===Z.status))&&void 0!==ne?ne:[]).length>0&&(E="aal2"),{data:{currentLevel:S,nextLevel:E,currentAuthenticationMethods:h.amr||[]},error:null}})()}_getAuthorizationDetails(c){var d=this;return(0,i.A)(function*(){try{return yield d._useSession(function(){var I=(0,i.A)(function*(U){const{data:{session:G},error:ne}=U;return ne?d._returnResult({data:null,error:ne}):G?yield j(d.fetch,"GET",`${d.url}/oauth/authorizations/${c}`,{headers:d.headers,jwt:G.access_token,xform:Se=>({data:Se,error:null})}):d._returnResult({data:null,error:new Pn})});return function(U){return I.apply(this,arguments)}}())}catch(I){if(pt(I))return d._returnResult({data:null,error:I});throw I}})()}_approveAuthorization(c,d){var I=this;return(0,i.A)(function*(){try{return yield I._useSession(function(){var U=(0,i.A)(function*(G){const{data:{session:ne},error:Se}=G;if(Se)return I._returnResult({data:null,error:Se});if(!ne)return I._returnResult({data:null,error:new Pn});const Be=yield j(I.fetch,"POST",`${I.url}/oauth/authorizations/${c}/consent`,{headers:I.headers,jwt:ne.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return Be.data&&Be.data.redirect_url&&Lt()&&!d?.skipBrowserRedirect&&window.location.assign(Be.data.redirect_url),Be});return function(G){return U.apply(this,arguments)}}())}catch(U){if(pt(U))return I._returnResult({data:null,error:U});throw U}})()}_denyAuthorization(c,d){var I=this;return(0,i.A)(function*(){try{return yield I._useSession(function(){var U=(0,i.A)(function*(G){const{data:{session:ne},error:Se}=G;if(Se)return I._returnResult({data:null,error:Se});if(!ne)return I._returnResult({data:null,error:new Pn});const Be=yield j(I.fetch,"POST",`${I.url}/oauth/authorizations/${c}/consent`,{headers:I.headers,jwt:ne.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return Be.data&&Be.data.redirect_url&&Lt()&&!d?.skipBrowserRedirect&&window.location.assign(Be.data.redirect_url),Be});return function(G){return U.apply(this,arguments)}}())}catch(U){if(pt(U))return I._returnResult({data:null,error:U});throw U}})()}_listOAuthGrants(){var c=this;return(0,i.A)(function*(){try{return yield c._useSession(function(){var d=(0,i.A)(function*(I){const{data:{session:U},error:G}=I;return G?c._returnResult({data:null,error:G}):U?yield j(c.fetch,"GET",`${c.url}/user/oauth/grants`,{headers:c.headers,jwt:U.access_token,xform:ne=>({data:ne,error:null})}):c._returnResult({data:null,error:new Pn})});return function(I){return d.apply(this,arguments)}}())}catch(d){if(pt(d))return c._returnResult({data:null,error:d});throw d}})()}_revokeOAuthGrant(c){var d=this;return(0,i.A)(function*(){try{return yield d._useSession(function(){var I=(0,i.A)(function*(U){const{data:{session:G},error:ne}=U;return ne?d._returnResult({data:null,error:ne}):G?(yield j(d.fetch,"DELETE",`${d.url}/user/oauth/grants`,{headers:d.headers,jwt:G.access_token,query:{client_id:c.clientId},noResolveJson:!0}),{data:{},error:null}):d._returnResult({data:null,error:new Pn})});return function(U){return I.apply(this,arguments)}}())}catch(I){if(pt(I))return d._returnResult({data:null,error:I});throw I}})()}fetchJwk(c){var d=this;return(0,i.A)(function*(I,U={keys:[]}){let G=U.keys.find(h=>h.kid===I);if(G)return G;const ne=Date.now();if(G=d.jwks.keys.find(h=>h.kid===I),G&&d.jwks_cached_at+6e5>ne)return G;const{data:Se,error:Be}=yield j(d.fetch,"GET",`${d.url}/.well-known/jwks.json`,{headers:d.headers});if(Be)throw Be;return Se.keys&&0!==Se.keys.length&&(d.jwks=Se,d.jwks_cached_at=ne,G=Se.keys.find(h=>h.kid===I),G)?G:null}).apply(this,arguments)}getClaims(c){var d=this;return(0,i.A)(function*(I,U={}){try{let G=I;if(!G){const{data:_e,error:Qe}=yield d.getSession();if(Qe||!_e.session)return d._returnResult({data:null,error:Qe});G=_e.session.access_token}const{header:ne,payload:Se,signature:Be,raw:{header:h,payload:S}}=Ir(G);U?.allowExpired||function Bt(f){if(!f)throw new Error("Missing exp claim");if(f<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(Se.exp);const E=ne.alg&&!ne.alg.startsWith("HS")&&ne.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield d.fetchJwk(ne.kid,U?.keys?{keys:U.keys}:U?.jwks):null;if(!E){const{error:_e}=yield d.getUser(G);if(_e)throw _e;return{data:{claims:Se,header:ne,signature:Be},error:null}}const w=function Dt(f){switch(f){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(ne.alg),$=yield crypto.subtle.importKey("jwk",E,w,!0,["verify"]);if(!(yield crypto.subtle.verify(w,$,Be,function fe(f){const u=[];return function wo(f,u){for(let c=0;c<f.length;c+=1){let d=f.charCodeAt(c);if(d>55295&&d<=56319){const I=1024*(d-55296)&65535;d=65536+(f.charCodeAt(c+1)-56320&65535|I),c+=1}ni(d,u)}}(f,c=>u.push(c)),new Uint8Array(u)}(`${h}.${S}`))))throw new zr("Invalid JWT signature");return{data:{claims:Se,header:ne,signature:Be},error:null}}catch(G){if(pt(G))return d._returnResult({data:null,error:G});throw G}}).apply(this,arguments)}}return f.nextInstanceID={},f})(),Xi=_a;let Go="";Go=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const Jo={headers:{"X-Client-Info":`supabase-js-${Go}/2.95.0`}},bi={schema:"public"},fs={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ws={};function Xo(f){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(f)}function ui(f,u,c){return(u=function Ks(f){var u=function Qi(f,u){if("object"!=Xo(f)||!f)return f;var c=f[Symbol.toPrimitive];if(void 0!==c){var d=c.call(f,u||"default");if("object"!=Xo(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(f)}(f,"string");return"symbol"==Xo(u)?u:u+""}(u))in f?Object.defineProperty(f,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):f[u]=c,f}function Di(f,u){var c=Object.keys(f);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(f);u&&(d=d.filter(function(I){return Object.getOwnPropertyDescriptor(f,I).enumerable})),c.push.apply(c,d)}return c}function eo(f){for(var u=1;u<arguments.length;u++){var c=null!=arguments[u]?arguments[u]:{};u%2?Di(Object(c),!0).forEach(function(d){ui(f,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(c)):Di(Object(c)).forEach(function(d){Object.defineProperty(f,d,Object.getOwnPropertyDescriptor(c,d))})}return f}const Ji=(f,u,c)=>{const d=(f=>f?(...u)=>f(...u):(...u)=>fetch(...u))(c),I=Headers;return function(){var U=(0,i.A)(function*(G,ne){var Se;const Be=null!==(Se=yield u())&&void 0!==Se?Se:f;let h=new I(ne?.headers);return h.has("apikey")||h.set("apikey",f),h.has("Authorization")||h.set("Authorization",`Bearer ${Be}`),d(G,eo(eo({},ne),{},{headers:h}))});return function(G,ne){return U.apply(this,arguments)}}()};var Ci=class extends Xi{constructor(f){super(f)}},xi=class{constructor(f,u,c){var d,I;this.supabaseUrl=f,this.supabaseKey=u;const U=function zs(f){const u=f?.trim();if(!u)throw new Error("supabaseUrl is required.");if(!u.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function Si(f){return f.endsWith("/")?f:f+"/"}(u))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(f);if(!u)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",U),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",U),this.storageUrl=new URL("storage/v1",U),this.functionsUrl=new URL("functions/v1",U);const G=`sb-${U.hostname.split(".")[0]}-auth-token`,Se=function Ri(f,u){var c,d;const{db:I,auth:U,realtime:G,global:ne}=f,{db:Se,auth:Be,realtime:h,global:S}=u,E={db:eo(eo({},Se),I),auth:eo(eo({},Be),U),realtime:eo(eo({},h),G),storage:{},global:eo(eo(eo({},S),ne),{},{headers:eo(eo({},null!==(c=S?.headers)&&void 0!==c?c:{}),null!==(d=ne?.headers)&&void 0!==d?d:{})}),accessToken:(w=(0,i.A)(function*(){return""}),function(){return w.apply(this,arguments)})};var w;return f.accessToken?E.accessToken=f.accessToken:delete E.accessToken,E}(c??{},{db:bi,realtime:Ws,auth:eo(eo({},fs),{},{storageKey:G}),global:Jo});var Be;this.storageKey=null!==(d=Se.auth.storageKey)&&void 0!==d?d:"",this.headers=null!==(I=Se.global.headers)&&void 0!==I?I:{},Se.accessToken?(this.accessToken=Se.accessToken,this.auth=new Proxy({},{get:(h,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(Be=Se.auth)&&void 0!==Be?Be:{},this.headers,Se.global.fetch),this.fetch=Ji(u,this._getAccessToken.bind(this),Se.global.fetch),this.realtime=this._initRealtimeClient(eo({headers:this.headers,accessToken:this._getAccessToken.bind(this)},Se.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new te(new URL("rest/v1",U).href,{headers:this.headers,schema:Se.db.schema,fetch:this.fetch,timeout:Se.db.timeout,urlLengthLimit:Se.db.urlLengthLimit}),this.storage=new Gr(this.storageUrl.href,this.headers,this.fetch,c?.storage),Se.accessToken||this._listenForAuthEvents()}get functions(){return new pe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(f){return this.rest.from(f)}schema(f){return this.rest.schema(f)}rpc(f,u={},c={head:!1,get:!1,count:void 0}){return this.rest.rpc(f,u,c)}channel(f,u={config:{}}){return this.realtime.channel(f,u)}getChannels(){return this.realtime.getChannels()}removeChannel(f){return this.realtime.removeChannel(f)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var f=this;return(0,i.A)(function*(){var c,d,u=f;if(u.accessToken)return yield u.accessToken();const{data:I}=yield u.auth.getSession();return null!==(c=null===(d=I.session)||void 0===d?void 0:d.access_token)&&void 0!==c?c:u.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:f,persistSession:u,detectSessionInUrl:c,storage:d,userStorage:I,storageKey:U,flowType:G,lock:ne,debug:Se,throwOnError:Be},h,S){return new Ci({url:this.authUrl.href,headers:eo(eo({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),h),storageKey:U,autoRefreshToken:f,persistSession:u,detectSessionInUrl:c,storage:d,userStorage:I,flowType:G,lock:ne,debug:Se,throwOnError:Be,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>"authorization"===w.toLowerCase())})}_initRealtimeClient(f){return new cn(this.realtimeUrl.href,eo(eo({},f),{},{params:eo(eo({},{apikey:this.supabaseKey}),f?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((f,u)=>{this._handleTokenChanged(f,"CLIENT",u?.access_token)})}_handleTokenChanged(f,u,c){"TOKEN_REFRESHED"!==f&&"SIGNED_IN"!==f||this.changedAccessToken===c?"SIGNED_OUT"===f&&(this.realtime.setAuth(),"STORAGE"==u&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=c,this.realtime.setAuth(c))}};(function Yi(){if(typeof window<"u")return!1;const f=globalThis.process;if(!f)return!1;const u=f.version;if(null==u)return!1;const c=u.match(/^v(\d+)\./);return!!c&&parseInt(c[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Yo=b(5312),Ai=b(2615);let $o=(()=>{var f;class u{constructor(){this.supabase=((f,u)=>new xi(f,u,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}))(Yo.c.supabase.url,Yo.c.supabase.anonKey)}getClient(){return console.log("Getting Supabase client"),this.supabase}createCustomUser(d){var I=this;return(0,i.A)(function*(){console.log("Creating user with data:",d);const{data:U,error:G}=yield I.supabase.from("users").insert(d).select().single();return G&&console.error("Supabase error:",G),{data:U,error:G}})()}getCustomUser(d){var I=this;return(0,i.A)(function*(){console.log("Getting user:",d);const{data:U,error:G}=yield I.supabase.from("users").select("*").eq("username",d).single();return G&&console.error("Get user error:",G),{data:U,error:G}})()}getCustomUserByEmail(d){var I=this;return(0,i.A)(function*(){console.log("Getting user by email:",d);const{data:U,error:G}=yield I.supabase.from("users").select("*").eq("email",d).single();return G&&console.error("Get user by email error:",G),{data:U,error:G}})()}checkUsernameExists(d){var I=this;return(0,i.A)(function*(){console.log("Checking username:",d);const{data:U,error:G}=yield I.supabase.from("users").select("username").eq("username",d);return G&&console.error("Username check error:",G),{exists:U&&U.length>0,error:G}})()}checkEmailExists(d){var I=this;return(0,i.A)(function*(){console.log("Checking email:",d);const{data:U,error:G}=yield I.supabase.from("users").select("email").eq("email",d);return G&&console.error("Email check error:",G),{exists:U&&U.length>0,error:G}})()}createLevelRequest(d){var I=this;return(0,i.A)(function*(){console.log("Creating level request:",d);const{data:U,error:G}=yield I.supabase.from("level_access_requests").insert(d).select().single();return G&&console.error("Level request error:",G),{data:U,error:G}})()}checkPendingLevelRequest(d){var I=this;return(0,i.A)(function*(){console.log("Checking pending requests for:",d);const{data:U,error:G}=yield I.supabase.from("level_access_requests").select("*").eq("username",d).eq("status","pending").order("request_date",{ascending:!1}).limit(1);return G&&console.error("Pending request check error:",G),{data:U,error:G}})()}checkApprovedLevelRequest(d){var I=this;return(0,i.A)(function*(){console.log("Checking approved requests for:",d);const{data:U,error:G}=yield I.supabase.from("level_access_requests").select("*").eq("user_email",d).eq("status","approved").order("response_date",{ascending:!1}).limit(1);return G&&console.error("Approved request check error:",G),{data:U,error:G}})()}getHighestApprovedLevel(d){var I=this;return(0,i.A)(function*(){console.log("Getting highest approved level for:",d);const{data:U,error:G}=yield I.supabase.from("level_access_requests").select("requested_level").eq("user_email",d).eq("status","approved").order("requested_level",{ascending:!1}).limit(1);if(G||!U||0===U.length)return console.log("No approved levels found, defaulting to L1"),1;const ne=U[0].requested_level;return console.log("Highest approved level:",ne),ne})()}static#e=f=()=>(this.\u0275fac=function(I){return new(I||u)},this.\u0275prov=Ai.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}))}return f(),u})()},5032($t,ot,b){"use strict";b.d(ot,{Yq:()=>Je,TS:()=>Er,sR:()=>Or,bM:()=>lr,el:()=>Mr,Sb:()=>hr,QE:()=>Dr,CF:()=>Lr,Rg:()=>Mn,p4:()=>$r,jM:()=>jr,q9:()=>mr,Kb:()=>Br,OD:()=>Gn,CE:()=>Gr,pF:()=>ao,fL:()=>sr,YV:()=>zn,er:()=>$n,z3:()=>cr});var i=b(467),o=b(2615),D=b(3664),Ce=b(7705),De=b(5921),B=b(8132),Pe=b(7303),Ge=b(7837);const pe=Re=>Ae(Re),Ae=(Re=window)=>{if(typeof Re>"u")return[];Re.Ionic=Re.Ionic||{};let ze=Re.Ionic.platforms;return null==ze&&(ze=Re.Ionic.platforms=l(Re),ze.forEach(F=>Re.document.documentElement.classList.add(`plt-${F}`))),ze},l=Re=>{const ze=Ge.c.get("platform");return Object.keys(re).filter(F=>{const _=ze?.[F];return"function"==typeof _?_(Re):re[F](Re)})},m=Re=>!!(he(Re,/iPad/i)||he(Re,/Macintosh/i)&&z(Re)),M=Re=>he(Re,/android|sink/i),z=Re=>Le(Re,"(any-pointer:coarse)"),K=Re=>le(Re)||ae(Re),le=Re=>!!(Re.cordova||Re.phonegap||Re.PhoneGap),ae=Re=>{const ze=Re.Capacitor;return!!(ze?.isNative||ze?.isNativePlatform&&ze.isNativePlatform())},he=(Re,ze)=>ze.test(Re.navigator.userAgent),Le=(Re,ze)=>{var F;return null===(F=Re.matchMedia)||void 0===F?void 0:F.call(Re,ze).matches},re={ipad:m,iphone:Re=>he(Re,/iPhone/i),ios:Re=>he(Re,/iPhone|iPod/i)||m(Re),android:M,phablet:Re=>{const ze=Re.innerWidth,F=Re.innerHeight,_=Math.min(ze,F),k=Math.max(ze,F);return _>390&&_<520&&k>620&&k<800},tablet:Re=>{const ze=Re.innerWidth,F=Re.innerHeight,_=Math.min(ze,F),k=Math.max(ze,F);return m(Re)||(Re=>M(Re)&&!he(Re,/mobile/i))(Re)||_>460&&_<820&&k>780&&k<1400},cordova:le,capacitor:ae,electron:Re=>he(Re,/electron/i),pwa:Re=>{var ze;return!!(null!==(ze=Re.matchMedia)&&void 0!==ze&&ze.call(Re,"(display-mode: standalone)").matches||Re.navigator.standalone)},mobile:z,mobileweb:Re=>z(Re)&&!K(Re),desktop:Re=>!z(Re),hybrid:K};var Oe=b(6031);var bn=b(1413),Un=b(3726),Cn=b(4412),ln=b(4572),Mt=b(7673),hn=b(1635),wt=b(5964),Nt=b(5558),en=b(3669),cn=b(9974),Dn=b(4360);function Qn(Re,ze){return Re===ze}var Vn=b(4341);const or=["tabsInner"];let lr=(()=>{class Re{read(F){fr().read(F)}write(F){fr().write(F)}static \u0275fac=function(_){return new(_||Re)};static \u0275prov=o.jDH({token:Re,factory:Re.\u0275fac,providedIn:"root"})}return Re})();const fr=()=>{const Re=typeof window<"u"?window:null;if(null!=Re){const ze=Re.Ionic;return ze?.queue?ze.queue:{read:F=>Re.requestAnimationFrame(F),write:F=>Re.requestAnimationFrame(F)}}return{read:ze=>ze(),write:ze=>ze()}};let Gn=(()=>{class Re{doc;_readyPromise;win;backButton=new bn.B;keyboardDidShow=new bn.B;keyboardDidHide=new bn.B;pause=new bn.B;resume=new bn.B;resize=new bn.B;constructor(F,_){this.doc=F,_.run(()=>{let k;this.win=F.defaultView,this.backButton.subscribeWithPriority=function(C,O){return this.subscribe(H=>H.register(C,Ue=>_.run(()=>O(Ue))))},gr(this.pause,F,"pause",_),gr(this.resume,F,"resume",_),gr(this.backButton,F,"ionBackButton",_),gr(this.resize,this.win,"resize",_),gr(this.keyboardDidShow,this.win,"ionKeyboardDidShow",_),gr(this.keyboardDidHide,this.win,"ionKeyboardDidHide",_),this._readyPromise=new Promise(C=>{k=C}),this.win?.cordova?F.addEventListener("deviceready",()=>{k("cordova")},{once:!0}):k("dom")})}is(F){return((Re,ze)=>("string"==typeof Re&&(ze=Re,Re=void 0),pe(Re).includes(ze)))(this.win,F)}platforms(){return pe(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(F){return qn(this.win.location.href,F)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia?.("(orientation: portrait)").matches}testUserAgent(F){const _=this.win.navigator;return!!(_?.userAgent&&_.userAgent.indexOf(F)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}static \u0275fac=function(_){return new(_||Re)(o.KVO(o.qQL),o.KVO(D.SKi))};static \u0275prov=o.jDH({token:Re,factory:Re.\u0275fac,providedIn:"root"})}return Re})();const qn=(Re,ze)=>{ze=ze.replace(/[[\]\\]/g,"\\$&");const _=new RegExp("[\\?&]"+ze+"=([^&#]*)").exec(Re);return _?decodeURIComponent(_[1].replace(/\+/g," ")):null},gr=(Re,ze,F,_)=>{ze&&ze.addEventListener(F,k=>{_.run(()=>{const C=k?.detail;Re.next(C)})})};let mr=(()=>{class Re{location;serializer;router;topOutlet;direction=yr;animated=yn;animationBuilder;guessDirection="forward";guessAnimation;lastNavId=-1;constructor(F,_,k,C){this.location=_,this.serializer=k,this.router=C,C&&C.events.subscribe(O=>{if(O instanceof De.Z){const H=O.restoredState?O.restoredState.navigationId:O.id;this.guessDirection=this.guessAnimation=H<this.lastNavId?"back":"forward",this.lastNavId="forward"===this.guessDirection?O.id:H}}),F.backButton.subscribeWithPriority(0,O=>{this.pop(),O()})}navigateForward(F,_={}){return this.setDirection("forward",_.animated,_.animationDirection,_.animation),this.navigate(F,_)}navigateBack(F,_={}){return this.setDirection("back",_.animated,_.animationDirection,_.animation),this.navigate(F,_)}navigateRoot(F,_={}){return this.setDirection("root",_.animated,_.animationDirection,_.animation),this.navigate(F,_)}back(F={animated:!0,animationDirection:"back"}){return this.setDirection("back",F.animated,F.animationDirection,F.animation),this.location.back()}pop(){var F=this;return(0,i.A)(function*(){let _=F.topOutlet;for(;_;){if(yield _.pop())return!0;_=_.parentOutlet}return!1})()}setDirection(F,_,k,C){this.direction=F,this.animated=kr(F,_,k),this.animationBuilder=C}setTopOutlet(F){this.topOutlet=F}consumeTransition(){let _,F="root";const k=this.animationBuilder;return"auto"===this.direction?(F=this.guessDirection,_=this.guessAnimation):(_=this.animated,F=this.direction),this.direction=yr,this.animated=yn,this.animationBuilder=void 0,{direction:F,animation:_,animationBuilder:k}}navigate(F,_){if(Array.isArray(F))return this.router.navigate(F,_);{const k=this.serializer.parse(F.toString());return void 0!==_.queryParams&&(k.queryParams={..._.queryParams}),void 0!==_.fragment&&(k.fragment=_.fragment),this.router.navigateByUrl(k,_)}}static \u0275fac=function(_){return new(_||Re)(o.KVO(Gn),o.KVO(Pe.aZ),o.KVO(De.Sd),o.KVO(De.Ix,8))};static \u0275prov=o.jDH({token:Re,factory:Re.\u0275fac,providedIn:"root"})}return Re})();const kr=(Re,ze,F)=>{if(!1!==ze){if(void 0!==F)return F;if("forward"===Re||"back"===Re)return Re;if("root"===Re&&!0===ze)return"forward"}},yr="auto",yn=void 0;let Er=(()=>{class Re{get(F,_){const k=Jn();return k?k.get(F,_):null}getBoolean(F,_){const k=Jn();return!!k&&k.getBoolean(F,_)}getNumber(F,_){const k=Jn();return k?k.getNumber(F,_):0}static \u0275fac=function(_){return new(_||Re)};static \u0275prov=o.jDH({token:Re,factory:Re.\u0275fac,providedIn:"root"})}return Re})();const Or=new o.nKC("USERCONFIG"),Jn=()=>{if(typeof window<"u"){const Re=window.Ionic;if(Re?.config)return Re.config}return null};class vn{data;constructor(ze={}){this.data=ze,console.warn("[Ionic Warning]: NavParams has been deprecated in favor of using Angular's input API. Developers should migrate to either the @Input decorator or the Signals-based input API.")}get(ze){return this.data[ze]}}const qe=new o.nKC("IonModalToken");let Je=(()=>{class Re{zone=(0,o.WQX)(D.SKi);applicationRef=(0,o.WQX)(D.o8S);config=(0,o.WQX)(Or);create(F,_,k){return new Ct(F,_,this.applicationRef,this.zone,k,this.config.useSetInputAPI??!1)}static \u0275fac=function(_){return new(_||Re)};static \u0275prov=o.jDH({token:Re,factory:Re.\u0275fac})}return Re})();class Ct{environmentInjector;injector;applicationRef;zone;elementReferenceKey;enableSignalsSupport;elRefMap=new WeakMap;elEventsMap=new WeakMap;constructor(ze,F,_,k,C,O){this.environmentInjector=ze,this.injector=F,this.applicationRef=_,this.zone=k,this.elementReferenceKey=C,this.enableSignalsSupport=O}attachViewToDom(ze,F,_,k){return this.zone.run(()=>new Promise(C=>{const O={..._};void 0!==this.elementReferenceKey&&(O[this.elementReferenceKey]=ze),C(mt(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,ze,F,O,k,this.elementReferenceKey,this.enableSignalsSupport))}))}removeViewFromDom(ze,F){return this.zone.run(()=>new Promise(_=>{const k=this.elRefMap.get(F);if(k){k.destroy(),this.elRefMap.delete(F);const C=this.elEventsMap.get(F);C&&(C(),this.elEventsMap.delete(F))}_()}))}}const mt=(Re,ze,F,_,k,C,O,H,Ue,ft,pt,an)=>{const un=tn(Ue);"ion-modal"===O.tagName.toLowerCase()&&un.push({provide:qe,useValue:O});const Rn=o.zZn.create({providers:un,parent:F}),En=(0,Ce.a0P)(H,{environmentInjector:ze,elementInjector:Rn}),Pn=En.instance,Yt=En.location.nativeElement;if(Ue)if(pt&&void 0!==Pn[pt]&&console.error(`[Ionic Error]: ${pt} is a reserved property when using ${O.tagName.toLowerCase()}. Rename or remove the "${pt}" property from ${H.name}.`),!0===an&&void 0!==En.setInput){const{modal:Nr,popover:wr,...ur}=Ue;for(const X in ur)En.setInput(X,ur[X]);void 0!==Nr&&Object.assign(Pn,{modal:Nr}),void 0!==wr&&Object.assign(Pn,{popover:wr})}else Object.assign(Pn,Ue);if(ft)for(const Nr of ft)Yt.classList.add(Nr);const jn=jt(Re,Pn,Yt);return O.appendChild(Yt),_.attachView(En.hostView),k.set(Yt,En),C.set(Yt,jn),Yt},kt=[Oe.L,Oe.a,Oe.b,Oe.c,Oe.d],jt=(Re,ze,F)=>Re.run(()=>{const _=kt.filter(k=>"function"==typeof ze[k]).map(k=>{const C=O=>ze[k](O.detail);return F.addEventListener(k,C),()=>F.removeEventListener(k,C)});return()=>_.forEach(k=>k())}),Kt=new o.nKC("NavParamsToken"),tn=Re=>[{provide:Kt,useValue:Re},{provide:vn,useFactory:rn,deps:[Kt]}],rn=Re=>new vn(Re),nn=(Re,ze)=>{const F=Re.prototype;ze.forEach(_=>{Object.defineProperty(F,_,{get(){return this.el[_]},set(k){this.z.runOutsideAngular(()=>this.el[_]=k)}})})},Wn=(Re,ze)=>{const F=Re.prototype;ze.forEach(_=>{F[_]=function(){const k=arguments;return this.z.runOutsideAngular(()=>this.el[_].apply(this.el,k))}})},An=(Re,ze,F)=>{F.forEach(_=>Re[_]=(0,Un.R)(ze,_))};function er(Re){return function(F){const{defineCustomElementFn:_,inputs:k,methods:C}=Re;return void 0!==_&&_(),k&&nn(F,k),C&&Wn(F,C),F}}const Bn=["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","expandToScroll","event","focusTrap","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],br=["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"];let hr=(()=>{let Re=class Hd{z;template;isCmpOpen=!1;el;constructor(F,_,k){this.z=k,this.el=_.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,F.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,F.detectChanges()}),An(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}static \u0275fac=function(_){return new(_||Hd)(D.rXU(Ce.gRc),D.rXU(D.aKT),D.rXU(D.SKi))};static \u0275dir=D.FsC({type:Hd,selectors:[["ion-modal"]],contentQueries:function(_,k,C){if(1&_&&D.wni(C,D.C4Q,5),2&_){let O;D.mGM(O=D.lsd())&&(k.template=O.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",expandToScroll:"expandToScroll",event:"event",focusTrap:"focusTrap",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"},standalone:!1})};return Re=(0,hn.Cg)([er({inputs:Bn,methods:br})],Re),Re})();const In=["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","focusTrap","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],dn=["present","dismiss","onDidDismiss","onWillDismiss"];let Lr=(()=>{let Re=class Gd{z;template;isCmpOpen=!1;el;constructor(F,_,k){this.z=k,this.el=_.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,F.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,F.detectChanges()}),An(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}static \u0275fac=function(_){return new(_||Gd)(D.rXU(Ce.gRc),D.rXU(D.aKT),D.rXU(D.SKi))};static \u0275dir=D.FsC({type:Gd,selectors:[["ion-popover"]],contentQueries:function(_,k,C){if(1&_&&D.wni(C,D.C4Q,5),2&_){let O;D.mGM(O=D.lsd())&&(k.template=O.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"},standalone:!1})};return Re=(0,hn.Cg)([er({inputs:In,methods:dn})],Re),Re})();const xe=(Re,ze)=>((Re=Re.filter(F=>F.stackId!==ze.stackId)).push(ze),Re),ye=(Re,ze)=>{const F=Re.createUrlTree(["."],{relativeTo:ze});return Re.serializeUrl(F)},We=(Re,ze)=>!ze||Re.stackId!==ze.stackId,Ee=(Re,ze)=>{if(!Re)return;const F=et(ze);for(let _=0;_<F.length;_++){if(_>=Re.length)return F[_];if(F[_]!==Re[_])return}},et=Re=>Re.split("/").map(ze=>ze.trim()).filter(ze=>""!==ze),bt=Re=>{Re&&(Re.ref.destroy(),Re.unlistenEvents())};class zt{containerEl;router;navCtrl;zone;location;views=[];runningTask;skipTransition=!1;tabsPrefix;activeView;nextId=0;constructor(ze,F,_,k,C,O){this.containerEl=F,this.router=_,this.navCtrl=k,this.zone=C,this.location=O,this.tabsPrefix=void 0!==ze?et(ze):void 0}createView(ze,F){const _=ye(this.router,F),k=ze?.location?.nativeElement,C=jt(this.zone,ze.instance,k);return{id:this.nextId++,stackId:Ee(this.tabsPrefix,_),unlistenEvents:C,element:k,ref:ze,url:_}}getExistingView(ze){const F=ye(this.router,ze),_=this.views.find(k=>k.url===F);return _&&_.ref.changeDetectorRef.reattach(),_}setActive(ze){const F=this.navCtrl.consumeTransition();let{direction:_,animation:k,animationBuilder:C}=F;const O=this.activeView,H=We(ze,O);H&&(_="back",k=void 0);const Ue=this.views.slice();let ft;const pt=this.router;pt.getCurrentNavigation?ft=pt.getCurrentNavigation():pt.navigations?.value&&(ft=pt.navigations.value),ft?.extras?.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const an=this.views.includes(ze),un=this.insertView(ze,_);an||ze.ref.changeDetectorRef.detectChanges();const Rn=ze.animationBuilder;return void 0===C&&"back"===_&&!H&&void 0!==Rn&&(C=Rn),O&&(O.animationBuilder=C),this.zone.runOutsideAngular(()=>this.wait(()=>(O&&O.ref.changeDetectorRef.detach(),ze.ref.changeDetectorRef.reattach(),this.transition(ze,O,k,this.canGoBack(1),!1,C).then(()=>pn(ze,un,Ue,this.location,this.zone)).then(()=>({enteringView:ze,direction:_,animation:k,tabSwitch:H})))))}canGoBack(ze,F=this.getActiveStackId()){return this.getStack(F).length>ze}pop(ze,F=this.getActiveStackId()){return this.zone.run(()=>{const _=this.getStack(F);if(_.length<=ze)return Promise.resolve(!1);const k=_[_.length-ze-1];let C=k.url;const O=k.savedData;if(O){const Ue=O.get("primary");Ue?.route?._routerState?.snapshot.url&&(C=Ue.route._routerState.snapshot.url)}const{animationBuilder:H}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(C,{...k.savedExtras,animation:H}).then(()=>!0)})}startBackTransition(){const ze=this.activeView;if(ze){const F=this.getStack(ze.stackId),_=F[F.length-2],k=_.animationBuilder;return this.wait(()=>this.transition(_,ze,"back",this.canGoBack(2),!0,k))}return Promise.resolve()}endBackTransition(ze){ze?(this.skipTransition=!0,this.pop(1)):this.activeView&&Tn(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(ze){const F=this.getStack(ze);return F.length>0?F[F.length-1]:void 0}getRootUrl(ze){const F=this.getStack(ze);return F.length>0?F[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(bt),this.activeView=void 0,this.views=[]}getStack(ze){return this.views.filter(F=>F.stackId===ze)}insertView(ze,F){return this.activeView=ze,this.views=((Re,ze,F)=>"root"===F?xe(Re,ze):"forward"===F?((Re,ze)=>(Re.indexOf(ze)>=0?Re=Re.filter(_=>_.stackId!==ze.stackId||_.id<=ze.id):Re.push(ze),Re))(Re,ze):((Re,ze)=>Re.indexOf(ze)>=0?Re.filter(_=>_.stackId!==ze.stackId||_.id<=ze.id):xe(Re,ze))(Re,ze))(this.views,ze,F),this.views.slice()}transition(ze,F,_,k,C,O){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(F===ze)return Promise.resolve(!1);const H=ze?ze.element:void 0,Ue=F?F.element:void 0,ft=this.containerEl;return H&&H!==Ue&&(H.classList.add("ion-page"),H.classList.add("ion-page-invisible"),ft.commit)?ft.commit(H,Ue,{duration:void 0===_?0:void 0,direction:_,showGoBack:k,progressAnimation:C,animationBuilder:O}):Promise.resolve(!1)}wait(ze){var F=this;return(0,i.A)(function*(){void 0!==F.runningTask&&(yield F.runningTask,F.runningTask=void 0);const _=F.runningTask=ze();return _.finally(()=>F.runningTask=void 0),_})()}}const pn=(Re,ze,F,_,k)=>"function"==typeof requestAnimationFrame?new Promise(C=>{requestAnimationFrame(()=>{Tn(Re,ze,F,_,k),C()})}):Promise.resolve(),Tn=(Re,ze,F,_,k)=>{k.run(()=>F.filter(C=>!ze.includes(C)).forEach(bt)),ze.forEach(C=>{const H=_.path().split("?")[0].split("#")[0];if(C!==Re&&C.url!==H){const Ue=C.element;Ue.setAttribute("aria-hidden","true"),Ue.classList.add("ion-page-hidden"),C.ref.changeDetectorRef.detach()}})};let Mn=(()=>{class Re{parentOutlet;nativeEl;activatedView=null;tabsPrefix;_swipeGesture;stackCtrl;proxyMap=new WeakMap;currentActivatedRoute$=new Cn.t(null);activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=De.Xk;stackWillChange=new D.bkB;stackDidChange=new D.bkB;activateEvents=new D.bkB;deactivateEvents=new D.bkB;parentContexts=(0,o.WQX)(De.Zp);location=(0,o.WQX)(D.c1b);environmentInjector=(0,o.WQX)(o.uvJ);inputBinder=(0,o.WQX)(Wr,{optional:!0});supportsBindingToComponentInputs=!0;config=(0,o.WQX)(Er);navCtrl=(0,o.WQX)(mr);set animation(F){this.nativeEl.animation=F}set animated(F){this.nativeEl.animated=F}set swipeGesture(F){this._swipeGesture=F,this.nativeEl.swipeHandler=F?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:_=>this.stackCtrl.endBackTransition(_)}:void 0}constructor(F,_,k,C,O,H,Ue,ft){this.parentOutlet=ft,this.nativeEl=C.nativeElement,this.name=F||De.Xk,this.tabsPrefix="true"===_?ye(O,Ue):void 0,this.stackCtrl=new zt(this.tabsPrefix,this.nativeEl,O,this.navCtrl,H,k),this.parentContexts.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.stackCtrl.destroy(),this.inputBinder?.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const F=this.getContext();F?.route&&this.activateWith(F.route,F.injector)}new Promise(F=>((Re,ze)=>{Re.componentOnReady?Re.componentOnReady().then(F=>ze(F)):(Re=>{"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Re):"function"==typeof requestAnimationFrame?requestAnimationFrame(Re):setTimeout(Re)})(()=>ze(Re))})(this.nativeEl,F)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(F,_){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const _=this.getContext();this.activatedView.savedData=new Map(_.children.contexts);const k=this.activatedView.savedData.get("primary");if(k&&_.route&&(k.route={..._.route}),this.activatedView.savedExtras={},_.route){const C=_.route.snapshot;this.activatedView.savedExtras.queryParams=C.queryParams,this.activatedView.savedExtras.fragment=C.fragment}}const F=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(F)}}activateWith(F,_){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=F;let k,C=this.stackCtrl.getExistingView(F);if(C){k=this.activated=C.ref;const H=C.savedData;H&&(this.getContext().children.contexts=H),this.updateActivatedRouteProxy(k.instance,F)}else{const H=F._futureSnapshot,Ue=this.parentContexts.getOrCreateContext(this.name).children,ft=new Cn.t(null),pt=this.createActivatedRouteProxy(ft,F),an=new tr(pt,Ue,this.location.injector);k=this.activated=this.outletContent.createComponent(H.routeConfig.component??H.component,{index:this.outletContent.length,injector:an,environmentInjector:_??this.environmentInjector}),ft.next(k.instance),C=this.stackCtrl.createView(this.activated,F),this.proxyMap.set(k.instance,pt),this.currentActivatedRoute$.next({component:k.instance,activatedRoute:F})}this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activatedView=C,this.navCtrl.setTopOutlet(this);const O=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:C,tabSwitch:We(C,O)}),this.stackCtrl.setActive(C).then(H=>{this.activateEvents.emit(k.instance),this.stackDidChange.emit(H)})}canGoBack(F=1,_){return this.stackCtrl.canGoBack(F,_)}pop(F=1,_){return this.stackCtrl.pop(F,_)}getLastUrl(F){const _=this.stackCtrl.getLastUrl(F);return _?_.url:void 0}getLastRouteView(F){return this.stackCtrl.getLastUrl(F)}getRootView(F){return this.stackCtrl.getRootUrl(F)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(F,_){const k=new De.nX;return k._futureSnapshot=_._futureSnapshot,k._routerState=_._routerState,k.snapshot=_.snapshot,k.outlet=_.outlet,k.component=_.component,k._paramMap=this.proxyObservable(F,"paramMap"),k._queryParamMap=this.proxyObservable(F,"queryParamMap"),k.url=this.proxyObservable(F,"url"),k.params=this.proxyObservable(F,"params"),k.queryParams=this.proxyObservable(F,"queryParams"),k.fragment=this.proxyObservable(F,"fragment"),k.data=this.proxyObservable(F,"data"),k}proxyObservable(F,_){return F.pipe((0,wt.p)(k=>!!k),(0,Nt.n)(k=>this.currentActivatedRoute$.pipe((0,wt.p)(C=>null!==C&&C.component===k),(0,Nt.n)(C=>C&&C.activatedRoute[_]),function Zn(Re,ze=en.D){return Re=Re??Qn,(0,cn.N)((F,_)=>{let k,C=!0;F.subscribe((0,Dn._)(_,O=>{const H=ze(O);(C||!Re(k,H))&&(C=!1,k=H,_.next(O))}))})}())))}updateActivatedRouteProxy(F,_){const k=this.proxyMap.get(F);if(!k)throw new Error("Could not find activated route proxy for view");k._futureSnapshot=_._futureSnapshot,k._routerState=_._routerState,k.snapshot=_.snapshot,k.outlet=_.outlet,k.component=_.component,this.currentActivatedRoute$.next({component:F,activatedRoute:_})}static \u0275fac=function(_){return new(_||Re)(D.kS0("name"),D.kS0("tabs"),D.rXU(Pe.aZ),D.rXU(D.aKT),D.rXU(De.Ix),D.rXU(D.SKi),D.rXU(De.nX),D.rXU(Re,12))};static \u0275dir=D.FsC({type:Re,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"],standalone:!1})}return Re})();class tr{route;childContexts;parent;constructor(ze,F,_){this.route=ze,this.childContexts=F,this.parent=_}get(ze,F){return ze===De.nX?this.route:ze===De.Zp?this.childContexts:this.parent.get(ze,F)}}const Wr=new o.nKC("");let Pr=(()=>{class Re{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(F){this.unsubscribeFromRouteData(F),this.subscribeToRouteData(F)}unsubscribeFromRouteData(F){this.outletDataSubscriptions.get(F)?.unsubscribe(),this.outletDataSubscriptions.delete(F)}subscribeToRouteData(F){const{activatedRoute:_}=F,k=(0,ln.z)([_.queryParams,_.params,_.data]).pipe((0,Nt.n)(([C,O,H],Ue)=>(H={...C,...O,...H},0===Ue?(0,Mt.of)(H):Promise.resolve(H)))).subscribe(C=>{if(!F.isActivated||!F.activatedComponentRef||F.activatedRoute!==_||null===_.component)return void this.unsubscribeFromRouteData(F);const O=(0,Ce.HJs)(_.component);if(O)for(const{templateName:H}of O.inputs)F.activatedComponentRef.setInput(H,C[H]);else this.unsubscribeFromRouteData(F)});this.outletDataSubscriptions.set(F,k)}static \u0275fac=function(_){return new(_||Re)};static \u0275prov=o.jDH({token:Re,factory:Re.\u0275fac})}return Re})();const zn=()=>({provide:Wr,useFactory:wn,deps:[De.Ix]});function wn(Re){return Re?.componentInputBindingEnabled?new Pr:null}const $n=Re=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Re):"function"==typeof requestAnimationFrame?requestAnimationFrame(Re):setTimeout(Re);let sr=(()=>{class Re{injector;elementRef;onChange=()=>{};onTouched=()=>{};lastValue;statusChanges;constructor(F,_){this.injector=F,this.elementRef=_}writeValue(F){this.elementRef.nativeElement.value=this.lastValue=F,cr(this.elementRef)}handleValueChange(F,_){F===this.elementRef.nativeElement&&(_!==this.lastValue&&(this.lastValue=_,this.onChange(_)),cr(this.elementRef))}_handleBlurEvent(F){F===this.elementRef.nativeElement?(this.onTouched(),cr(this.elementRef)):F.closest("ion-radio-group")===this.elementRef.nativeElement&&this.onTouched()}registerOnChange(F){this.onChange=F}registerOnTouched(F){this.onTouched=F}setDisabledState(F){this.elementRef.nativeElement.disabled=F}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let F;try{F=this.injector.get(Vn.vO)}catch{}if(!F)return;F.statusChanges&&(this.statusChanges=F.statusChanges.subscribe(()=>cr(this.elementRef)));const _=F.control;_&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(C=>{if(typeof _[C]<"u"){const O=_[C].bind(_);_[C]=(...H)=>{O(...H),cr(this.elementRef)}}})}static \u0275fac=function(_){return new(_||Re)(D.rXU(o.zZn),D.rXU(D.aKT))};static \u0275dir=D.FsC({type:Re,hostBindings:function(_,k){1&_&&D.bIt("ionBlur",function(O){return k._handleBlurEvent(O.target)})},standalone:!1})}return Re})();const cr=Re=>{$n(()=>{const ze=Re.nativeElement,F=null!=ze.value&&ze.value.toString().length>0,_=nr(ze);Tr(ze,_);const k=ze.closest("ion-item");k&&Tr(k,F?[..._,"item-has-value"]:_)})},nr=Re=>{const ze=Re.classList,F=[];for(let _=0;_<ze.length;_++){const k=ze.item(_);null!==k&&Ar(k,"ng-")&&F.push(`ion-${k.substring(3)}`)}return F},Tr=(Re,ze)=>{const F=Re.classList;F.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),F.add(...ze)},Ar=(Re,ze)=>Re.substring(0,ze.length)===ze,Rr=["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"];let Mr=(()=>{let Re=class Xd{routerOutlet;navCtrl;config;r;z;el;constructor(F,_,k,C,O,H){this.routerOutlet=F,this.navCtrl=_,this.config=k,this.r=C,this.z=O,H.detach(),this.el=this.r.nativeElement}onClick(F){const _=this.defaultHref||this.config.get("backButtonDefaultHref");this.routerOutlet?.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),F.preventDefault()):null!=_&&(this.navCtrl.navigateBack(_,{animation:this.routerAnimation}),F.preventDefault())}static \u0275fac=function(_){return new(_||Xd)(D.rXU(Mn,8),D.rXU(mr),D.rXU(Er),D.rXU(D.aKT),D.rXU(D.SKi),D.rXU(Ce.gRc))};static \u0275dir=D.FsC({type:Xd,hostBindings:function(_,k){1&_&&D.bIt("click",function(O){return k.onClick(O)})},inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},standalone:!1})};return Re=(0,hn.Cg)([er({inputs:Rr})],Re),Re})();const rr=["animated","animation","root","rootParams","swipeGesture"],xr=["push","insert","insertPages","pop","popTo","popToRoot","removeIndex","setRoot","setPages","getActive","getByIndex","canGoBack","getPrevious"];let Dr=(()=>{let Re=class qd{z;el;constructor(F,_,k,C,O,H){this.z=O,H.detach(),this.el=F.nativeElement,F.nativeElement.delegate=C.create(_,k),An(this,this.el,["ionNavDidChange","ionNavWillChange"])}static \u0275fac=function(_){return new(_||qd)(D.rXU(D.aKT),D.rXU(o.uvJ),D.rXU(o.zZn),D.rXU(Je),D.rXU(D.SKi),D.rXU(Ce.gRc))};static \u0275dir=D.FsC({type:qd,inputs:{animated:"animated",animation:"animation",root:"root",rootParams:"rootParams",swipeGesture:"swipeGesture"},standalone:!1})};return Re=(0,hn.Cg)([er({inputs:rr,methods:xr})],Re),Re})(),Gr=(()=>{class Re{locationStrategy;navCtrl;elementRef;router;routerLink;routerDirection="forward";routerAnimation;constructor(F,_,k,C,O){this.locationStrategy=F,this.navCtrl=_,this.elementRef=k,this.router=C,this.routerLink=O}ngOnInit(){this.updateTargetUrlAndHref(),this.updateTabindex()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTabindex(){const _=this.elementRef.nativeElement;["ION-BACK-BUTTON","ION-BREADCRUMB","ION-BUTTON","ION-CARD","ION-FAB-BUTTON","ION-ITEM","ION-ITEM-OPTION","ION-MENU-BUTTON","ION-SEGMENT-BUTTON","ION-TAB-BUTTON"].includes(_.tagName)&&"0"===_.getAttribute("tabindex")&&_.removeAttribute("tabindex")}updateTargetUrlAndHref(){if(this.routerLink?.urlTree){const F=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=F}}onClick(F){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),F.preventDefault()}static \u0275fac=function(_){return new(_||Re)(D.rXU(Pe.hb),D.rXU(mr),D.rXU(D.aKT),D.rXU(De.Ix),D.rXU(B.Wk,8))};static \u0275dir=D.FsC({type:Re,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(_,k){1&_&&D.bIt("click",function(O){return k.onClick(O)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},standalone:!1,features:[D.OA$]})}return Re})(),ao=(()=>{class Re{locationStrategy;navCtrl;elementRef;router;routerLink;routerDirection="forward";routerAnimation;constructor(F,_,k,C,O){this.locationStrategy=F,this.navCtrl=_,this.elementRef=k,this.router=C,this.routerLink=O}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){if(this.routerLink?.urlTree){const F=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=F}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}static \u0275fac=function(_){return new(_||Re)(D.rXU(Pe.hb),D.rXU(mr),D.rXU(D.aKT),D.rXU(De.Ix),D.rXU(B.Wk,8))};static \u0275dir=D.FsC({type:Re,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(_,k){1&_&&D.bIt("click",function(){return k.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},standalone:!1,features:[D.OA$]})}return Re})(),$r=(()=>{class Re{navCtrl;tabsInner;ionTabsWillChange=new D.bkB;ionTabsDidChange=new D.bkB;tabBarSlot="bottom";hasTab=!1;selectedTab;leavingTab;constructor(F){this.navCtrl=F}ngAfterViewInit(){const F=this.tabs.length>0?this.tabs.first:void 0;F&&(this.hasTab=!0,this.setActiveTab(F.tab),this.tabSwitch())}ngAfterContentInit(){this.detectSlotChanges()}ngAfterContentChecked(){this.detectSlotChanges()}onStackWillChange({enteringView:F,tabSwitch:_}){const k=F.stackId;_&&void 0!==k&&this.ionTabsWillChange.emit({tab:k})}onStackDidChange({enteringView:F,tabSwitch:_}){const k=F.stackId;_&&void 0!==k&&(this.tabBar&&(this.tabBar.selectedTab=k),this.ionTabsDidChange.emit({tab:k}))}select(F){const _="string"==typeof F,k=_?F:F.detail.tab;if(this.hasTab)return this.setActiveTab(k),void this.tabSwitch();const C=this.outlet.getActiveStackId()===k,O=`${this.outlet.tabsPrefix}/${k}`;if(_||F.stopPropagation(),C){const H=this.outlet.getActiveStackId();if(this.outlet.getLastRouteView(H)?.url===O)return;const ft=this.outlet.getRootView(k);return this.navCtrl.navigateRoot(O,{...ft&&O===ft.url&&ft.savedExtras,animated:!0,animationDirection:"back"})}{const H=this.outlet.getLastRouteView(k),Ue=H?.url||O,ft=H?.savedExtras;return this.navCtrl.navigateRoot(Ue,{...ft,animated:!0,animationDirection:"back"})}}setActiveTab(F){const k=this.tabs.find(C=>C.tab===F);k?(this.leavingTab=this.selectedTab,this.selectedTab=k,this.ionTabsWillChange.emit({tab:F}),k.el.active=!0):console.error(`[Ionic Error]: Tab with id: "${F}" does not exist`)}tabSwitch(){const{selectedTab:F,leavingTab:_}=this;this.tabBar&&F&&(this.tabBar.selectedTab=F.tab),_?.tab!==F?.tab&&_?.el&&(_.el.active=!1),F&&this.ionTabsDidChange.emit({tab:F.tab})}getSelected(){return this.hasTab?this.selectedTab?.tab:this.outlet.getActiveStackId()}detectSlotChanges(){this.tabBars.forEach(F=>{const _=F.el.getAttribute("slot");_!==this.tabBarSlot&&(this.tabBarSlot=_,this.relocateTabBar())})}relocateTabBar(){const F=this.tabBar.el;"top"===this.tabBarSlot?this.tabsInner.nativeElement.before(F):this.tabsInner.nativeElement.after(F)}static \u0275fac=function(_){return new(_||Re)(D.rXU(mr))};static \u0275dir=D.FsC({type:Re,selectors:[["ion-tabs"]],viewQuery:function(_,k){if(1&_&&D.GBs(or,7,D.aKT),2&_){let C;D.mGM(C=D.lsd())&&(k.tabsInner=C.first)}},hostBindings:function(_,k){1&_&&D.bIt("ionTabButtonClick",function(O){return k.select(O)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"},standalone:!1})}return Re})();class Br{ctrl;constructor(ze){this.ctrl=ze}create(ze){return this.ctrl.create(ze||{})}dismiss(ze,F,_){return this.ctrl.dismiss(ze,F,_)}getTop(){return this.ctrl.getTop()}}class jr{shouldDetach(ze){return!1}shouldAttach(ze){return!1}store(ze,F){}retrieve(ze){return null}shouldReuseRoute(ze,F){if(ze.routeConfig!==F.routeConfig)return!1;const _=ze.params,k=F.params,C=Object.keys(_),O=Object.keys(k);if(C.length!==O.length)return!1;for(const H of C)if(k[H]!==_[H])return!1;return!0}}},5055($t,ot,b){"use strict";b.d(ot,{l:()=>D});var i=b(3494),o=b(8071);function D(Ce){return(0,o.T)(Ce[i.s])}},5083($t,ot,b){"use strict";b.r(ot),b.d(ot,{Capacitor:()=>Pe,CapacitorCookies:()=>m,CapacitorException:()=>D,CapacitorHttp:()=>ce,ExceptionCode:()=>o,WebPlugin:()=>pe,WebView:()=>ie,buildRequestInit:()=>R,registerPlugin:()=>Ge});var i=b(467),o=function(z){return z.Unimplemented="UNIMPLEMENTED",z.Unavailable="UNAVAILABLE",z}(o||{});class D extends Error{constructor(te,K,le){super(te),this.message=te,this.code=K,this.data=le}}const De=z=>{const te=z.CapacitorCustomPlatform||null,K=z.Capacitor||{},le=K.Plugins=K.Plugins||{},ae=()=>null!==te?te.name:(z=>{var te,K;return z?.androidBridge?"android":null!==(K=null===(te=z?.webkit)||void 0===te?void 0:te.messageHandlers)&&void 0!==K&&K.bridge?"ios":"web"})(z),he=Fe=>{var we;return null===(we=K.PluginHeaders)||void 0===we?void 0:we.find(Oe=>Oe.name===Fe)},re=new Map;return K.convertFileSrc||(K.convertFileSrc=Fe=>Fe),K.getPlatform=ae,K.handleError=Fe=>z.console.error(Fe),K.isNativePlatform=()=>"web"!==ae(),K.isPluginAvailable=Fe=>{const we=re.get(Fe);return!(!we?.platforms.has(ae())&&!he(Fe))},K.registerPlugin=(Fe,we={})=>{const Oe=re.get(Fe);if(Oe)return console.warn(`Capacitor plugin "${Fe}" already registered. Cannot register plugins twice.`),Oe.proxy;const Ye=ae(),Ve=he(Fe);let be;const q=function(){var vt=(0,i.A)(function*(){return!be&&Ye in we?be=be="function"==typeof we[Ye]?yield we[Ye]():we[Ye]:null!==te&&!be&&"web"in we&&(be=be="function"==typeof we.web?yield we.web():we.web),be});return function(){return vt.apply(this,arguments)}}(),Ie=vt=>{let Ft;const lt=(...Ut)=>{const ut=q().then(xt=>{const Tt=((vt,Ft)=>{var lt,Ut;if(!Ve){if(vt)return null===(Ut=vt[Ft])||void 0===Ut?void 0:Ut.bind(vt);throw new D(`"${Fe}" plugin is not implemented on ${Ye}`,o.Unimplemented)}{const ut=Ve?.methods.find(xt=>Ft===xt.name);if(ut)return"promise"===ut.rtype?xt=>K.nativePromise(Fe,Ft.toString(),xt):(xt,Tt)=>K.nativeCallback(Fe,Ft.toString(),xt,Tt);if(vt)return null===(lt=vt[Ft])||void 0===lt?void 0:lt.bind(vt)}})(xt,vt);if(Tt){const Jt=Tt(...Ut);return Ft=Jt?.remove,Jt}throw new D(`"${Fe}.${vt}()" is not implemented on ${Ye}`,o.Unimplemented)});return"addListener"===vt&&(ut.remove=(0,i.A)(function*(){return Ft()})),ut};return lt.toString=()=>`${vt.toString()}() { [capacitor code] }`,Object.defineProperty(lt,"name",{value:vt,writable:!1,configurable:!1}),lt},He=Ie("addListener"),tt=Ie("removeListener"),dt=(vt,Ft)=>{const lt=He({eventName:vt},Ft),Ut=function(){var xt=(0,i.A)(function*(){const Tt=yield lt;tt({eventName:vt,callbackId:Tt},Ft)});return function(){return xt.apply(this,arguments)}}(),ut=new Promise(xt=>lt.then(()=>xt({remove:Ut})));return ut.remove=(0,i.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Ut()}),ut},St=new Proxy({},{get(vt,Ft){switch(Ft){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Ve?dt:He;case"removeListener":return tt;default:return Ie(Ft)}}});return le[Fe]=St,re.set(Fe,{name:Fe,proxy:St,platforms:new Set([...Object.keys(we),...Ve?[Ye]:[]])}),St},K.Exception=D,K.DEBUG=!!K.DEBUG,K.isLoggingEnabled=!!K.isLoggingEnabled,K},Pe=(z=>z.Capacitor=De(z))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ge=Pe.registerPlugin;class pe{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(te,K){var le=this;let ae=!1;this.listeners[te]||(this.listeners[te]=[],ae=!0),this.listeners[te].push(K);const Ne=this.windowListeners[te];Ne&&!Ne.registered&&this.addWindowListener(Ne),ae&&this.sendRetainedArgumentsForEvent(te);const he=function(){var re=(0,i.A)(function*(){return le.removeListener(te,K)});return function(){return re.apply(this,arguments)}}();return Promise.resolve({remove:he})}removeAllListeners(){var te=this;return(0,i.A)(function*(){te.listeners={};for(const K in te.windowListeners)te.removeWindowListener(te.windowListeners[K]);te.windowListeners={}})()}notifyListeners(te,K,le){const ae=this.listeners[te];if(ae)ae.forEach(ve=>ve(K));else if(le){let ve=this.retainedEventArguments[te];ve||(ve=[]),ve.push(K),this.retainedEventArguments[te]=ve}}hasListeners(te){var K;return!(null===(K=this.listeners[te])||void 0===K||!K.length)}registerWindowListener(te,K){this.windowListeners[K]={registered:!1,windowEventName:te,pluginEventName:K,handler:le=>{this.notifyListeners(K,le)}}}unimplemented(te="not implemented"){return new Pe.Exception(te,o.Unimplemented)}unavailable(te="not available"){return new Pe.Exception(te,o.Unavailable)}removeListener(te,K){var le=this;return(0,i.A)(function*(){const ae=le.listeners[te];if(!ae)return;const ve=ae.indexOf(K);le.listeners[te].splice(ve,1),le.listeners[te].length||le.removeWindowListener(le.windowListeners[te])})()}addWindowListener(te){window.addEventListener(te.windowEventName,te.handler),te.registered=!0}removeWindowListener(te){te&&(window.removeEventListener(te.windowEventName,te.handler),te.registered=!1)}sendRetainedArgumentsForEvent(te){const K=this.retainedEventArguments[te];K&&(delete this.retainedEventArguments[te],K.forEach(le=>{this.notifyListeners(te,le)}))}}const ie=Ge("WebView"),Ae=z=>encodeURIComponent(z).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),l=z=>z.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class p extends pe{getCookies(){return(0,i.A)(function*(){const te=document.cookie,K={};return te.split(";").forEach(le=>{if(le.length<=0)return;let[ae,ve]=le.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");ae=l(ae).trim(),ve=l(ve).trim(),K[ae]=ve}),K})()}setCookie(te){return(0,i.A)(function*(){try{const K=Ae(te.key),le=Ae(te.value),ae=`; expires=${(te.expires||"").replace("expires=","")}`,ve=(te.path||"/").replace("path=",""),Ne=null!=te.url&&te.url.length>0?`domain=${te.url}`:"";document.cookie=`${K}=${le||""}${ae}; path=${ve}; ${Ne};`}catch(K){return Promise.reject(K)}})()}deleteCookie(te){return(0,i.A)(function*(){try{document.cookie=`${te.key}=; Max-Age=0`}catch(K){return Promise.reject(K)}})()}clearCookies(){return(0,i.A)(function*(){try{const te=document.cookie.split(";")||[];for(const K of te)document.cookie=K.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(te){return Promise.reject(te)}})()}clearAllCookies(){var te=this;return(0,i.A)(function*(){try{yield te.clearCookies()}catch(K){return Promise.reject(K)}})()}}const m=Ge("CapacitorCookies",{web:()=>new p}),y=function(){var z=(0,i.A)(function*(te){return new Promise((K,le)=>{const ae=new FileReader;ae.onload=()=>{const ve=ae.result;K(ve.indexOf(",")>=0?ve.split(",")[1]:ve)},ae.onerror=ve=>le(ve),ae.readAsDataURL(te)})});return function(K){return z.apply(this,arguments)}}(),R=(z,te={})=>{const K=Object.assign({method:z.method||"GET",headers:z.headers},te),ae=((z={})=>{const te=Object.keys(z);return Object.keys(z).map(ae=>ae.toLocaleLowerCase()).reduce((ae,ve,Ne)=>(ae[ve]=z[te[Ne]],ae),{})})(z.headers)["content-type"]||"";if("string"==typeof z.data)K.body=z.data;else if(ae.includes("application/x-www-form-urlencoded")){const ve=new URLSearchParams;for(const[Ne,he]of Object.entries(z.data||{}))ve.set(Ne,he);K.body=ve.toString()}else if(ae.includes("multipart/form-data")||z.data instanceof FormData){const ve=new FormData;if(z.data instanceof FormData)z.data.forEach((he,Le)=>{ve.append(Le,he)});else for(const he of Object.keys(z.data))ve.append(he,z.data[he]);K.body=ve;const Ne=new Headers(K.headers);Ne.delete("content-type"),K.headers=Ne}else(ae.includes("application/json")||"object"==typeof z.data)&&(K.body=JSON.stringify(z.data));return K};class V extends pe{request(te){return(0,i.A)(function*(){const K=R(te,te.webFetchExtra),le=((z,te=!0)=>z?Object.entries(z).reduce((le,ae)=>{const[ve,Ne]=ae;let he,Le;return Array.isArray(Ne)?(Le="",Ne.forEach(re=>{he=te?encodeURIComponent(re):re,Le+=`${ve}=${he}&`}),Le.slice(0,-1)):(he=te?encodeURIComponent(Ne):Ne,Le=`${ve}=${he}`),`${le}&${Le}`},"").substr(1):null)(te.params,te.shouldEncodeUrlParams),ae=le?`${te.url}?${le}`:te.url,ve=yield fetch(ae,K),Ne=ve.headers.get("content-type")||"";let Le,re,{responseType:he="text"}=ve.ok?te:{};switch(Ne.includes("application/json")&&(he="json"),he){case"arraybuffer":case"blob":re=yield ve.blob(),Le=yield y(re);break;case"json":Le=yield ve.json();break;default:Le=yield ve.text()}const Ke={};return ve.headers.forEach((Fe,we)=>{Ke[we]=Fe}),{data:Le,headers:Ke,status:ve.status,url:ve.url}})()}get(te){var K=this;return(0,i.A)(function*(){return K.request(Object.assign(Object.assign({},te),{method:"GET"}))})()}post(te){var K=this;return(0,i.A)(function*(){return K.request(Object.assign(Object.assign({},te),{method:"POST"}))})()}put(te){var K=this;return(0,i.A)(function*(){return K.request(Object.assign(Object.assign({},te),{method:"PUT"}))})()}patch(te){var K=this;return(0,i.A)(function*(){return K.request(Object.assign(Object.assign({},te),{method:"PATCH"}))})()}delete(te){var K=this;return(0,i.A)(function*(){return K.request(Object.assign(Object.assign({},te),{method:"DELETE"}))})()}}const ce=Ge("CapacitorHttp",{web:()=>new V})},5196($t,ot,b){"use strict";b.d(ot,{C:()=>D,U:()=>Ce});var i=b(1635),o=b(8071);function D(De){return(0,i.AQ)(this,arguments,function*(){const Pe=De.getReader();try{for(;;){const{value:Ge,done:pe}=yield(0,i.N3)(Pe.read());if(pe)return yield(0,i.N3)(void 0);yield yield(0,i.N3)(Ge)}}finally{Pe.releaseLock()}})}function Ce(De){return(0,o.T)(De?.getReader)}},5225($t,ot,b){"use strict";function i(o,D,Ce,De=0,B=!1){const Pe=D.schedule(function(){Ce(),B?o.add(this.schedule(null,De)):this.unsubscribe()},De);if(o.add(Pe),!B)return Pe}b.d(ot,{N:()=>i})},5312($t,ot,b){"use strict";b.d(ot,{c:()=>i});const i={production:!0,supabase:{url:"https://gftrszttkztlqwwoqrzy.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmdHJzenR0a3p0bHF3d29xcnp5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyOTY3NjksImV4cCI6MjA3ODg3Mjc2OX0.wGelKZJwPsTxzNDn3P8_WH5M-RdiVLezX2c_VuRITiE"}}},5334($t,ot,b){"use strict";b.d(ot,{m:()=>D});var i=b(1026),o=b(9270);function D(Ce){o.f.setTimeout(()=>{const{onUnhandledError:De}=i.$;if(!De)throw Ce;De(Ce)})}},5343($t,ot,b){"use strict";function i(){}b.d(ot,{l:()=>i})},5397($t,ot,b){"use strict";b.d(ot,{x:()=>D});var i=b(4761),o=b(8071);function D(Ce){return(0,o.T)(Ce?.[i.l])}},5558($t,ot,b){"use strict";b.d(ot,{n:()=>Ce});var i=b(8750),o=b(9974),D=b(4360);function Ce(De,B){return(0,o.N)((Pe,Ge)=>{let pe=null,ie=0,Ae=!1;const l=()=>Ae&&!pe&&Ge.complete();Pe.subscribe((0,D._)(Ge,p=>{pe?.unsubscribe();let m=0;const y=ie++;(0,i.Tg)(De(p,y)).subscribe(pe=(0,D._)(Ge,v=>Ge.next(B?B(p,v,y,m++):v),()=>{pe=null,l()}))},()=>{Ae=!0,l()}))})}},5705($t,ot,b){"use strict";b.d(ot,{B:()=>R,F:()=>Ir,a:()=>Mt,b:()=>Kr,c:()=>ze,d:()=>wn,e:()=>De,f:()=>p,g:()=>Re,h:()=>Pr,i:()=>fe,j:()=>m,k:()=>wt,l:()=>B,m:()=>Ge,n:()=>Pe,o:()=>Br,q:()=>$r,r:()=>Ne,t:()=>y,w:()=>hn});var i=b(467);class Ce{constructor(){this.m=new Map}reset(W){this.m=new Map(Object.entries(W))}get(W,ue){const Te=this.m.get(W);return void 0!==Te?Te:ue}getBoolean(W,ue=!1){const Te=this.m.get(W);return void 0===Te?ue:"string"==typeof Te?"true"===Te:!!Te}getNumber(W,ue){const Te=parseFloat(this.m.get(W));return isNaN(Te)?void 0!==ue?ue:NaN:Te}set(W,ue){this.m.set(W,ue)}}const De=new Ce,B=x=>{try{const W=x.sessionStorage.getItem(Ae);return null!==W?JSON.parse(W):{}}catch{return{}}},Pe=(x,W)=>{try{x.sessionStorage.setItem(Ae,JSON.stringify(W))}catch{return}},Ge=x=>{const W={};return x.location.search.slice(1).split("&").map(ue=>ue.split("=")).map(([ue,Te])=>{try{return[decodeURIComponent(ue),decodeURIComponent(Te)]}catch{return["",""]}}).filter(([ue])=>pe(ue,ie)).map(([ue,Te])=>[ue.slice(ie.length),Te]).forEach(([ue,Te])=>{W[ue]=Te}),W},pe=(x,W)=>x.substr(0,W.length)===W,ie="ionic:",Ae="ionic-persist-config";var l=function(x){return x.OFF="OFF",x.ERROR="ERROR",x.WARN="WARN",x}(l||{});const p=(x,...W)=>{const ue=De.get("logLevel",l.WARN);if([l.WARN].includes(ue))return console.warn(`[Ionic Warning]: ${x}`,...W)},m=(x,...W)=>{const ue=De.get("logLevel",l.ERROR);if([l.ERROR,l.WARN].includes(ue))return console.error(`[Ionic Error]: ${x}`,...W)},y=(x,...W)=>console.error(`<${x.tagName.toLowerCase()}> must be used inside ${W.join(" or ")}.`);var v=Object.defineProperty,R={isBrowser:!0},z=(x=>(x.Undefined="undefined",x.Null="null",x.String="string",x.Number="number",x.SpecialNumber="number",x.Boolean="boolean",x.BigInt="bigint",x))(z||{}),te=(x=>(x.Array="array",x.Date="date",x.Map="map",x.Object="object",x.RegularExpression="regexp",x.Set="set",x.Channel="channel",x.Symbol="symbol",x))(te||{}),K="type",le="value",ae="serialized:",ve=x=>{if(x.__stencil__getHostRef)return x.__stencil__getHostRef()},Ne=(x,W)=>{W&&(x.__stencil__getHostRef=()=>W,W.$lazyInstance$=x)},Le=(x,W)=>W in x,re=(x,W)=>(0,console.error)(x,W),Ke=new Map,we=new Map,Oe=[],Ie="s-id",He="sty-id",St="slot-fb{display:contents}slot-fb[hidden]{display:none}",vt="http://www.w3.org/1999/xlink",Ft=typeof window<"u"?window:{},Ut={$flags$:0,$resourcesUrl$:"",jmp:x=>x(),raf:x=>requestAnimationFrame(x),ael:(x,W,ue,Te)=>x.addEventListener(W,ue,Te),rel:(x,W,ue,Te)=>x.removeEventListener(W,ue,Te),ce:(x,W)=>new CustomEvent(x,W)},xt=(()=>{var x;let W=!1;try{null==(x=Ft.document)||x.addEventListener("e",null,Object.defineProperty({},"passive",{get(){W=!0}}))}catch{}return W})(),Jt=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),ct=!!Jt&&!!Ft.document&&Object.getOwnPropertyDescriptor(Ft.document.adoptedStyleSheets,"length").writable,_t=!1,Et=[],Xt=[],bn=(x,W)=>ue=>{x.push(ue),_t||(_t=!0,W&&4&Ut.$flags$?ln(Cn):Ut.raf(Cn))},Un=x=>{for(let W=0;W<x.length;W++)try{x[W](performance.now())}catch(ue){re(ue)}x.length=0},Cn=()=>{Un(Et),Un(Xt),(_t=Et.length>0)&&Ut.raf(Cn)},ln=x=>Promise.resolve(void 0).then(x),Mt=bn(Et,!1),hn=bn(Xt,!0),wt=x=>{const W=new URL(x,Ut.$resourcesUrl$);return W.origin!==Ft.location.origin?W.href:W.pathname},en=x=>"object"==(x=typeof x)||"function"===x;function cn(x){var W,ue,Te;return null!=(Te=null==(ue=null==(W=x.head)?void 0:W.querySelector('meta[name="csp-nonce"]'))?void 0:ue.getAttribute("content"))?Te:void 0}var Zn=class Fs{static fromLocalValue(W){const ue=W[K],Te=le in W?W[le]:void 0;switch(ue){case"string":case"boolean":return Te;case"bigint":return BigInt(Te);case"undefined":return;case"null":return null;case"number":return"NaN"===Te?NaN:"-0"===Te?-0:"Infinity"===Te?1/0:"-Infinity"===Te?-1/0:Te;case"array":return Te.map(Dt=>Fs.fromLocalValue(Dt));case"date":return new Date(Te);case"map":const it=new Map;for(const[Dt,Rt]of Te){const Ht="object"==typeof Dt&&null!==Dt?Fs.fromLocalValue(Dt):Dt,qt=Fs.fromLocalValue(Rt);it.set(Ht,qt)}return it;case"object":const st={};for(const[Dt,Rt]of Te)st[Dt]=Fs.fromLocalValue(Rt);return st;case"regexp":const{pattern:It,flags:yt}=Te;return new RegExp(It,yt);case"set":const Bt=new Set;for(const Dt of Te)Bt.add(Fs.fromLocalValue(Dt));return Bt;case"symbol":return Symbol(Te);default:throw new Error(`Unsupported type: ${ue}`)}}static fromLocalValueArray(W){return W.map(ue=>Fs.fromLocalValue(ue))}static isLocalValueObject(W){if("object"!=typeof W||null===W||!W.hasOwnProperty(K))return!1;const ue=W[K];return!!Object.values({...z,...te}).includes(ue)&&("null"===ue||"undefined"===ue||W.hasOwnProperty(le))}};((x,W)=>{for(var ue in W)v(x,ue,{get:W[ue],enumerable:!0})})({},{err:()=>or,map:()=>lr,ok:()=>Vn,unwrap:()=>fr,unwrapErr:()=>_r});var Vn=x=>({isOk:!0,isErr:!1,value:x}),or=x=>({isOk:!1,isErr:!0,value:x});function lr(x,W){if(x.isOk){const ue=W(x.value);return ue instanceof Promise?ue.then(Te=>Vn(Te)):Vn(ue)}if(x.isErr)return or(x.value);throw"should never get here"}var gr,fr=x=>{if(x.isOk)return x.value;throw x.value},_r=x=>{if(x.isErr)return x.value;throw x.value};function mr(x){const ue=this.attachShadow({mode:"open",delegatesFocus:!!(16&x.$flags$)});void 0===gr&&(gr=null),gr&&(ct?ue.adoptedStyleSheets.push(gr):ue.adoptedStyleSheets=[...ue.adoptedStyleSheets,gr])}var kr=x=>{const W=We(x,"childNodes");x.tagName&&x.tagName.includes("-")&&x["s-cr"]&&"SLOT-FB"!==x.tagName&&yn(W,x.tagName).forEach(Te=>{1===Te.nodeType&&"SLOT-FB"===Te.tagName&&(Te.hidden=!!Er(Te,vn(Te),!1).length)});let ue=0;for(ue=0;ue<W.length;ue++){const Te=W[ue];1===Te.nodeType&&We(Te,"childNodes").length&&kr(Te)}},yr=x=>{const W=[];for(let ue=0;ue<x.length;ue++){const Te=x[ue]["s-nr"]||void 0;Te&&Te.isConnected&&W.push(Te)}return W};function yn(x,W,ue){let st,Te=0,it=[];for(;Te<x.length;Te++){if(st=x[Te],st["s-sr"]&&(!W||st["s-hn"]===W)&&(void 0===ue||vn(st)===ue)&&(it.push(st),typeof ue<"u"))return it;it=[...it,...yn(st.childNodes,W,ue)]}return it}var Er=(x,W,ue=!0)=>{const Te=[];(ue&&x["s-sr"]||!x["s-sr"])&&Te.push(x);let it=x;for(;it=it.nextSibling;)vn(it)===W&&(ue||!it["s-sr"])&&Te.push(it);return Te},Or=(x,W)=>1===x.nodeType?null===x.getAttribute("slot")&&""===W||x.getAttribute("slot")===W:x["s-sn"]===W||""===W,Jn=(x,W,ue,Te)=>{if(x["s-ol"]&&x["s-ol"].isConnected)return;const it=document.createTextNode("");if(it["s-nr"]=x,!W["s-cr"]||!W["s-cr"].parentNode)return;const st=W["s-cr"].parentNode,It=We(st,ue?"prepend":"appendChild");if(typeof Te<"u"){it["s-oo"]=Te;const yt=We(st,"childNodes"),Bt=[it];yt.forEach(Dt=>{Dt["s-nr"]&&Bt.push(Dt)}),Bt.sort((Dt,Rt)=>!Dt["s-oo"]||Dt["s-oo"]<(Rt["s-oo"]||0)?-1:!Rt["s-oo"]||Rt["s-oo"]<Dt["s-oo"]?1:0),Bt.forEach(Dt=>It.call(st,Dt))}else It.call(st,it);x["s-ol"]=it,x["s-sh"]=W["s-hn"]},vn=x=>"string"==typeof x["s-sn"]?x["s-sn"]:1===x.nodeType&&x.getAttribute("slot")||void 0;function qe(x){if(x.assignedElements||x.assignedNodes||!x["s-sr"])return;const W=ue=>function(Te){const it=[],st=this["s-sn"];Te?.flatten&&console.error("\n          Flattening is not supported for Stencil non-shadow slots.\n          You can use `.childNodes` to nested slot fallback content.\n          If you have a particular use case, please open an issue on the Stencil repo.\n        ");const It=this["s-cr"].parentElement;return(It.__childNodes?It.childNodes:yr(It.childNodes)).forEach(Bt=>{st===vn(Bt)&&it.push(Bt)}),ue?it.filter(Bt=>1===Bt.nodeType):it}.bind(x);x.assignedElements=W(!0),x.assignedNodes=W(!1)}function Je(x){x.dispatchEvent(new CustomEvent("slotchange",{bubbles:!1,cancelable:!1,composed:!1}))}function Ct(x,W){var ue;if(!(W=W||(null==(ue=x["s-ol"])?void 0:ue.parentElement)))return{slotNode:null,slotName:""};const Te=x["s-sn"]=vn(x)||"";return{slotNode:yn(We(W,"childNodes"),W.tagName,Te)[0],slotName:Te}}var kt=x=>{const W=x.cloneNode;x.cloneNode=function(ue){const it=this.shadowRoot&&true,st=W.call(this,!!it&&ue);if(!it&&ue){let yt,Bt,It=0;const Dt=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-scs"],Rt=this.__childNodes||this.childNodes;for(;It<Rt.length;It++)yt=Rt[It]["s-nr"],Bt=Dt.every(Ht=>!Rt[It][Ht]),yt&&(st.__appendChild?st.__appendChild(yt.cloneNode(!0)):st.appendChild(yt.cloneNode(!0))),Bt&&st.appendChild(Rt[It].cloneNode(!0))}return st}},jt=x=>{x.__appendChild=x.appendChild,x.appendChild=function(W){const{slotName:ue,slotNode:Te}=Ct(W,this);if(Te){Jn(W,Te);const it=Er(Te,ue),st=it[it.length-1],It=We(st,"parentNode"),yt=We(It,"insertBefore")(W,st.nextSibling);return Je(Te),kr(this),yt}return this.__appendChild(W)}},Kt=x=>{x.__removeChild=x.removeChild,x.removeChild=function(W){return W&&typeof W["s-sn"]<"u"&&yn(this.__childNodes||this.childNodes,this.tagName,W["s-sn"])&&W.isConnected?(W.remove(),void kr(this)):this.__removeChild(W)}},tn=x=>{x.__prepend=x.prepend,x.prepend=function(...W){W.forEach(ue=>{"string"==typeof ue&&(ue=this.ownerDocument.createTextNode(ue));const Te=(ue["s-sn"]=vn(ue))||"",st=yn(We(this,"childNodes"),this.tagName,Te)[0];if(st){Jn(ue,st,!0);const yt=Er(st,Te)[0],Bt=We(yt,"parentNode"),Dt=We(Bt,"insertBefore")(ue,We(yt,"nextSibling"));return Je(st),Dt}return 1===ue.nodeType&&ue.getAttribute("slot")&&(ue.hidden=!0),x.__prepend(ue)})}},rn=x=>{x.__append=x.append,x.append=function(...W){W.forEach(ue=>{"string"==typeof ue&&(ue=this.ownerDocument.createTextNode(ue)),this.appendChild(ue)})}},nn=x=>{const W=x.insertAdjacentHTML;x.insertAdjacentHTML=function(ue,Te){if("afterbegin"!==ue&&"beforeend"!==ue)return W.call(this,ue,Te);const it=this.ownerDocument.createElement("_");let st;if(it.innerHTML=Te,"afterbegin"===ue)for(;st=it.firstChild;)this.prepend(st);else if("beforeend"===ue)for(;st=it.firstChild;)this.append(st)}},Wn=x=>{x.insertAdjacentText=function(W,ue){this.insertAdjacentHTML(W,ue)}},An=x=>{x.__insertBefore||(x.__insertBefore=x.insertBefore,x.insertBefore=function(ue,Te){const{slotName:it,slotNode:st}=Ct(ue,this),It=this.__childNodes?this.childNodes:yr(this.childNodes);if(st){let Bt=!1;if(It.forEach(Dt=>{if(Dt!==Te&&null!==Te);else{if(Bt=!0,null===Te||it!==Te["s-sn"])return void this.appendChild(ue);if(it===Te["s-sn"]){Jn(ue,st);const Rt=We(Te,"parentNode");We(Rt,"insertBefore")(ue,Te),Je(st)}}}),Bt)return ue}const yt=Te?.__parentNode;return yt&&!this.isSameNode(yt)?this.appendChild(ue):this.__insertBefore(ue,Te)})},er=x=>{const W=x.insertAdjacentElement;x.insertAdjacentElement=function(ue,Te){return"afterbegin"!==ue&&"beforeend"!==ue?W.call(this,ue,Te):"afterbegin"===ue?(this.prepend(Te),Te):("beforeend"===ue&&this.append(Te),Te)}},Bn=x=>{ye("textContent",x),Object.defineProperty(x,"textContent",{get:function(){let W="";return(this.__childNodes?this.childNodes:yr(this.childNodes)).forEach(Te=>W+=Te.textContent||""),W},set:function(W){(this.__childNodes?this.childNodes:yr(this.childNodes)).forEach(Te=>{Te["s-ol"]&&Te["s-ol"].remove(),Te.remove()}),this.insertAdjacentHTML("beforeend",W)}})},br=x=>{class W extends Array{item(Te){return this[Te]}}ye("children",x),Object.defineProperty(x,"children",{get(){return this.childNodes.filter(ue=>1===ue.nodeType)}}),Object.defineProperty(x,"childElementCount",{get(){return this.children.length}}),ye("firstChild",x),Object.defineProperty(x,"firstChild",{get(){return this.childNodes[0]}}),ye("lastChild",x),Object.defineProperty(x,"lastChild",{get(){return this.childNodes[this.childNodes.length-1]}}),ye("childNodes",x),Object.defineProperty(x,"childNodes",{get(){const ue=new W;return ue.push(...yr(this.__childNodes)),ue}})},hr=x=>{!x||void 0!==x.__nextSibling||!globalThis.Node||(In(x),Lr(x),xe(x),x.nodeType===Node.ELEMENT_NODE&&(dn(x),Ur(x)))},In=x=>{!x||x.__nextSibling||(ye("nextSibling",x),Object.defineProperty(x,"nextSibling",{get:function(){var W;const ue=null==(W=this["s-ol"])?void 0:W.parentNode.childNodes,Te=ue?.indexOf(this);return ue&&Te>-1?ue[Te+1]:this.__nextSibling}}))},dn=x=>{!x||x.__nextElementSibling||(ye("nextElementSibling",x),Object.defineProperty(x,"nextElementSibling",{get:function(){var W;const ue=null==(W=this["s-ol"])?void 0:W.parentNode.children,Te=ue?.indexOf(this);return ue&&Te>-1?ue[Te+1]:this.__nextElementSibling}}))},Lr=x=>{!x||x.__previousSibling||(ye("previousSibling",x),Object.defineProperty(x,"previousSibling",{get:function(){var W;const ue=null==(W=this["s-ol"])?void 0:W.parentNode.childNodes,Te=ue?.indexOf(this);return ue&&Te>-1?ue[Te-1]:this.__previousSibling}}))},Ur=x=>{!x||x.__previousElementSibling||(ye("previousElementSibling",x),Object.defineProperty(x,"previousElementSibling",{get:function(){var W;const ue=null==(W=this["s-ol"])?void 0:W.parentNode.children,Te=ue?.indexOf(this);return ue&&Te>-1?ue[Te-1]:this.__previousElementSibling}}))},xe=x=>{!x||x.__parentNode||(ye("parentNode",x),Object.defineProperty(x,"parentNode",{get:function(){var W;return(null==(W=this["s-ol"])?void 0:W.parentNode)||this.__parentNode},set:function(W){this.__parentNode=W}}))},nt=["children","nextElementSibling","previousElementSibling"],Ze=["childNodes","firstChild","lastChild","nextSibling","previousSibling","textContent","parentNode"];function ye(x,W){if(!globalThis.Node||!globalThis.Element)return;let ue;nt.includes(x)?ue=Object.getOwnPropertyDescriptor(Element.prototype,x):Ze.includes(x)&&(ue=Object.getOwnPropertyDescriptor(Node.prototype,x)),ue||(ue=Object.getOwnPropertyDescriptor(W,x)),ue&&Object.defineProperty(W,"__"+x,ue)}function We(x,W){if("__"+W in x){const ue=x["__"+W];return"function"!=typeof ue?ue:ue.bind(x)}return"function"!=typeof x[W]?x[W]:x[W].bind(x)}var bt=new WeakMap,zt=(x,W,ue)=>{let Te=we.get(x);Jt&&ue?(Te=Te||new CSSStyleSheet,"string"==typeof Te?Te=W:Te.replaceSync(W)):Te=W,we.set(x,Te)},pn=(x,W,ue)=>{var Te;const it=Mn(W,ue),st=we.get(it);if(!Ft.document)return it;if(x=11===x.nodeType?x:Ft.document,st)if("string"==typeof st){let yt,It=bt.get(x=x.head||x);if(It||bt.set(x,It=new Set),!It.has(it)){if(x.host&&(yt=x.querySelector(`[${He}="${it}"]`)))yt.innerHTML=st;else{yt=Ft.document.createElement("style"),yt.innerHTML=st;const Bt=null!=(Te=Ut.$nonce$)?Te:cn(Ft.document);if(null!=Bt&&yt.setAttribute("nonce",Bt),!(1&W.$flags$))if("HEAD"===x.nodeName){const Dt=x.querySelectorAll("link[rel=preconnect]"),Rt=Dt.length>0?Dt[Dt.length-1].nextSibling:x.querySelector("style");x.insertBefore(yt,Rt?.parentNode===x?Rt:null)}else if("host"in x)if(Jt){const Dt=new CSSStyleSheet;Dt.replaceSync(st),ct?x.adoptedStyleSheets.unshift(Dt):x.adoptedStyleSheets=[Dt,...x.adoptedStyleSheets]}else{const Dt=x.querySelector("style");Dt?Dt.innerHTML=st+Dt.innerHTML:x.prepend(yt)}else x.append(yt);1&W.$flags$&&x.insertBefore(yt,null)}4&W.$flags$&&(yt.innerHTML+=St),It&&It.add(it)}}else x.adoptedStyleSheets.includes(st)||(ct?x.adoptedStyleSheets.push(st):x.adoptedStyleSheets=[...x.adoptedStyleSheets,st]);return it},Mn=(x,W)=>"sc-"+(W&&32&x.$flags$?x.$tagName$+"-"+W:x.$tagName$),tr=x=>x.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Pr=(x,W,...ue)=>{let Te=null,it=null,st=null,It=!1,yt=!1;const Bt=[],Dt=Ht=>{for(let qt=0;qt<Ht.length;qt++)Te=Ht[qt],Array.isArray(Te)?Dt(Te):null!=Te&&"boolean"!=typeof Te&&((It="function"!=typeof x&&!en(Te))&&(Te=String(Te)),It&&yt?Bt[Bt.length-1].$text$+=Te:Bt.push(It?zn(null,Te):Te),yt=It)};if(Dt(ue),W){W.key&&(it=W.key),W.name&&(st=W.name);{const Ht=W.className||W.class;Ht&&(W.class="object"!=typeof Ht?Ht:Object.keys(Ht).filter(qt=>Ht[qt]).join(" "))}}if("function"==typeof x)return x(null===W?{}:W,Bt,sr);const Rt=zn(x,null);return Rt.$attrs$=W,Bt.length>0&&(Rt.$children$=Bt),Rt.$key$=it,Rt.$name$=st,Rt},zn=(x,W)=>({$flags$:0,$tag$:x,$text$:W,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),wn={},sr={forEach:(x,W)=>x.map(cr).forEach(W),map:(x,W)=>x.map(cr).map(W).map(nr)},cr=x=>({vattrs:x.$attrs$,vchildren:x.$children$,vkey:x.$key$,vname:x.$name$,vtag:x.$tag$,vtext:x.$text$}),nr=x=>{if("function"==typeof x.vtag){const ue={...x.vattrs};return x.vkey&&(ue.key=x.vkey),x.vname&&(ue.name=x.vname),Pr(x.vtag,ue,...x.vchildren||[])}const W=zn(x.vtag,x.vtext);return W.$attrs$=x.vattrs,W.$children$=x.vchildren,W.$key$=x.vkey,W.$name$=x.vname,W},Ar=(x,W,ue,Te,it,st,It,yt=[])=>{let Bt,Dt,Rt,Ht;const qt=it["s-sc"];if(1===st.nodeType){if(Bt=st.getAttribute("c-id"),Bt&&(Dt=Bt.split("."),Dt[0]===It||"0"===Dt[0])){Rt=Mr({$flags$:0,$hostId$:Dt[0],$nodeId$:Dt[1],$depth$:Dt[2],$index$:Dt[3],$tag$:st.tagName.toLowerCase(),$elm$:st,$attrs$:{class:st.className||""}}),W.push(Rt),st.removeAttribute("c-id"),x.$children$||(x.$children$=[]),qt&&Dt[0]===It&&(st["s-si"]=qt,Rt.$attrs$.class+=" "+qt);const gn=Rt.$elm$.getAttribute("s-sn");"string"==typeof gn&&("slot-fb"===Rt.$tag$&&(rr(gn,Dt[2],Rt,st,x,W,ue,Te,yt),qt&&st.classList.add(qt)),Rt.$elm$["s-sn"]=gn,Rt.$elm$.removeAttribute("s-sn")),void 0!==Rt.$index$&&(x.$children$[Rt.$index$]=Rt),x=Rt,Te&&"0"===Rt.$depth$&&(Te[Rt.$index$]=Rt.$elm$)}if(st.shadowRoot)for(Ht=st.shadowRoot.childNodes.length-1;Ht>=0;Ht--)Ar(x,W,ue,Te,it,st.shadowRoot.childNodes[Ht],It,yt);const Sn=st.__childNodes||st.childNodes;for(Ht=Sn.length-1;Ht>=0;Ht--)Ar(x,W,ue,Te,it,Sn[Ht],It,yt)}else if(8===st.nodeType)Dt=st.nodeValue.split("."),(Dt[1]===It||"0"===Dt[1])&&(Bt=Dt[0],Rt=Mr({$hostId$:Dt[1],$nodeId$:Dt[2],$depth$:Dt[3],$index$:Dt[4]||"0",$elm$:st,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null}),"t"===Bt?(Rt.$elm$=Dr(st,3),Rt.$elm$&&3===Rt.$elm$.nodeType&&(Rt.$text$=Rt.$elm$.textContent,W.push(Rt),st.remove(),It===Rt.$hostId$&&(x.$children$||(x.$children$=[]),x.$children$[Rt.$index$]=Rt),Te&&"0"===Rt.$depth$&&(Te[Rt.$index$]=Rt.$elm$))):"c"===Bt?(Rt.$elm$=Dr(st,8),Rt.$elm$&&8===Rt.$elm$.nodeType&&(W.push(Rt),st.remove())):Rt.$hostId$===It&&("s"===Bt?rr(st["s-sn"]=Dt[5]||"",Dt[2],Rt,st,x,W,ue,Te,yt):"r"===Bt&&(Te?st.remove():(it["s-cr"]=st,st["s-cn"]=!0))));else if(x&&"style"===x.$tag$){const Sn=zn(null,st.textContent);Sn.$elm$=st,Sn.$index$="0",x.$children$=[Sn]}else 3===st.nodeType&&!st.wholeText.trim()&&!st["s-nr"]&&st.remove();return x},Rr=(x,W)=>{if(1===x.nodeType){const ue=x[Ie]||x.getAttribute(Ie);ue&&W.set(ue,x);let Te=0;if(x.shadowRoot)for(;Te<x.shadowRoot.childNodes.length;Te++)Rr(x.shadowRoot.childNodes[Te],W);const it=x.__childNodes||x.childNodes;for(Te=0;Te<it.length;Te++)Rr(it[Te],W)}else if(8===x.nodeType){const ue=x.nodeValue.split(".");"o"===ue[0]&&(W.set(ue[1]+"."+ue[2],x),x.nodeValue="",x["s-en"]=ue[3])}},Mr=x=>({$flags$:0,$hostId$:null,$nodeId$:null,$depth$:null,$index$:"0",$elm$:null,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null,...x});function rr(x,W,ue,Te,it,st,It,yt,Bt){Te["s-sr"]=!0,ue.$name$=x||null,ue.$tag$="slot";const Dt=it?.$elm$?it.$elm$["s-id"]||it.$elm$.getAttribute("s-id"):"";if(yt&&Ft.document){const Rt=ue.$elm$=Ft.document.createElement(ue.$tag$);ue.$name$&&ue.$elm$.setAttribute("name",x),it.$elm$.shadowRoot&&Dt&&Dt!==ue.$hostId$?We(it.$elm$,"insertBefore")(Rt,We(it.$elm$,"children")[0]):We(We(Te,"parentNode"),"insertBefore")(Rt,Te),xr(Bt,W,x,Te,ue.$hostId$),Te.remove(),"0"===ue.$depth$&&(yt[ue.$index$]=ue.$elm$)}else{const Rt=ue.$elm$,Ht=Dt&&Dt!==ue.$hostId$&&it.$elm$.shadowRoot;xr(Bt,W,x,Te,Ht?Dt:ue.$hostId$),qe(Te),Ht&&it.$elm$.insertBefore(Rt,it.$elm$.children[0])}st.push(ue),It.push(ue),it.$children$||(it.$children$=[]),it.$children$[ue.$index$]=ue}var xr=(x,W,ue,Te,it)=>{var st,It;let yt=Te.nextSibling;if(x[W]=x[W]||[],yt&&(null==(st=yt.nodeValue)||!st.startsWith("s.")))do{yt&&((yt.getAttribute&&yt.getAttribute("slot")||yt["s-sn"])===ue||""===ue&&!yt["s-sn"]&&(!yt.getAttribute||!yt.getAttribute("slot"))&&(8===yt.nodeType||3===yt.nodeType))&&(yt["s-sn"]=ue,x[W].push({slot:Te,node:yt,hostId:it})),yt=yt?.nextSibling}while(yt&&(null==(It=yt.nodeValue)||!It.startsWith("s.")))},Dr=(x,W)=>{let ue=x;do{ue=ue.nextSibling}while(ue&&(ue.nodeType!==W||!ue.nodeValue));return ue},Gr=x=>{const W=(x=>x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(x);return new RegExp(`(^|[^@]|@(?!supports\\s+selector\\s*\\([^{]*?${W}))(${W}\\b)`,"g")};Gr("::slotted"),Gr(":host"),Gr(":host-context");var $r=x=>Oe.push(x),Br=x=>{var W;return null==(W=ve(x))?void 0:W.$modeName$},jr=(x,W,ue)=>"string"==typeof x&&x.startsWith(ae)?x=function Gn(x){return"string"==typeof x&&x.startsWith(ae)?Zn.fromLocalValue(JSON.parse(atob(x.slice(11)))):x}(x):null==x||en(x)?x:4&W?"false"!==x&&(""===x||!!x):2&W?"string"==typeof x?parseFloat(x):"number"==typeof x?x:NaN:1&W?String(x):x,Re=x=>{var W;return null==(W=ve(x))?void 0:W.$hostElement$},ze=(x,W,ue)=>{const Te=Re(x);return{emit:it=>F(Te,W,{bubbles:!!(4&ue),composed:!!(2&ue),cancelable:!!(1&ue),detail:it})}},F=(x,W,ue)=>{const Te=Ut.ce(W,ue);return x.dispatchEvent(Te),Te},_=(x,W,ue,Te,it,st,It)=>{if(ue===Te)return;let yt=Le(x,W),Bt=W.toLowerCase();if("class"===W){const Dt=x.classList,Rt=C(ue);let Ht=C(Te);if((x["s-si"]||x["s-sc"])&&It){const qt=x["s-sc"]||x["s-si"];Ht.push(qt),Rt.forEach(Sn=>{Sn.startsWith(qt)&&Ht.push(Sn)}),Ht=[...new Set(Ht)].filter(Sn=>Sn),Dt.add(...Ht)}else Dt.remove(...Rt.filter(qt=>qt&&!Ht.includes(qt))),Dt.add(...Ht.filter(qt=>qt&&!Rt.includes(qt)))}else if("style"===W){for(const Dt in ue)(!Te||null==Te[Dt])&&(Dt.includes("-")?x.style.removeProperty(Dt):x.style[Dt]="");for(const Dt in Te)(!ue||Te[Dt]!==ue[Dt])&&(Dt.includes("-")?x.style.setProperty(Dt,Te[Dt]):x.style[Dt]=Te[Dt])}else if("key"!==W)if("ref"===W)Te&&Te(x);else if(yt||"o"!==W[0]||"n"!==W[1]){const Dt=en(Te);if((yt||Dt&&null!==Te)&&!it)try{if(x.tagName.includes("-"))x[W]!==Te&&(x[W]=Te);else{const Ht=Te??"";"list"===W?yt=!1:(null==ue||x[W]!=Ht)&&("function"==typeof x.__lookupSetter__(W)?x[W]=Ht:x.setAttribute(W,Ht))}}catch{}let Rt=!1;Bt!==(Bt=Bt.replace(/^xlink\:?/,""))&&(W=Bt,Rt=!0),null==Te||!1===Te?(!1!==Te||""===x.getAttribute(W))&&(Rt?x.removeAttributeNS(vt,W):x.removeAttribute(W)):(!yt||4&st||it)&&!Dt&&1===x.nodeType&&(Te=!0===Te?"":Te,Rt?x.setAttributeNS(vt,W,Te):x.setAttribute(W,Te))}else if(W="-"===W[2]?W.slice(3):Le(Ft,Bt)?Bt.slice(2):Bt[2]+W.slice(3),ue||Te){const Dt=W.endsWith(O);W=W.replace(H,""),ue&&Ut.rel(x,W,ue,Dt),Te&&Ut.ael(x,W,Te,Dt)}},k=/\s/,C=x=>("object"==typeof x&&x&&"baseVal"in x&&(x=x.baseVal),x&&"string"==typeof x?x.split(k):[]),O="Capture",H=new RegExp(O+"$"),Ue=(x,W,ue,Te)=>{const it=11===W.$elm$.nodeType&&W.$elm$.host?W.$elm$.host:W.$elm$,st=x&&x.$attrs$||{},It=W.$attrs$||{};for(const yt of ft(Object.keys(st)))yt in It||_(it,yt,st[yt],void 0,ue,W.$flags$,Te);for(const yt of ft(Object.keys(It)))_(it,yt,st[yt],It[yt],ue,W.$flags$,Te)};function ft(x){return x.includes("ref")?[...x.filter(W=>"ref"!==W),"ref"]:x}var pt,an,un,Rn=!1,En=!1,Pn=!1,Yt=!1,jn=(x,W,ue)=>{var Te;const it=W.$children$[ue];let It,yt,Bt,st=0;if(Rn||(Pn=!0,"slot"===it.$tag$&&(it.$flags$|=it.$children$?2:1)),null!==it.$text$)It=it.$elm$=Ft.document.createTextNode(it.$text$);else if(1&it.$flags$)It=it.$elm$=Ft.document.createTextNode(""),Ue(null,it,Yt);else{if(Yt||(Yt="svg"===it.$tag$),!Ft.document)throw new Error("You are trying to render a Stencil component in an environment that doesn't support the DOM. Make sure to populate the [`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window/window) object before rendering a component.");if(It=it.$elm$=Ft.document.createElementNS(Yt?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!Rn&&2&it.$flags$?"slot-fb":it.$tag$),Yt&&"foreignObject"===it.$tag$&&(Yt=!1),Ue(null,it,Yt),(x=>null!=x&&void 0!==x)(pt)&&It["s-si"]!==pt&&It.classList.add(It["s-si"]=pt),it.$children$)for(st=0;st<it.$children$.length;++st)yt=jn(x,it,st),yt&&It.appendChild(yt);"svg"===it.$tag$?Yt=!1:"foreignObject"===It.tagName&&(Yt=!0)}return It["s-hn"]=un,3&it.$flags$&&(It["s-sr"]=!0,It["s-cr"]=an,It["s-sn"]=it.$name$||"",It["s-rf"]=null==(Te=it.$attrs$)?void 0:Te.ref,qe(It),Bt=x&&x.$children$&&x.$children$[ue],Bt&&Bt.$tag$===it.$tag$&&x.$elm$&&Nr(x.$elm$),oo(an,It,W.$elm$,x?.$elm$)),It},Nr=x=>{Ut.$flags$|=1;const W=x.closest(un.toLowerCase());if(null!=W){const ue=Array.from(W.__childNodes||W.childNodes).find(it=>it["s-cr"]),Te=Array.from(x.__childNodes||x.childNodes);for(const it of ue?Te.reverse():Te)null!=it["s-sh"]&&(Xr(W,it,ue??null),it["s-sh"]=void 0,Pn=!0)}Ut.$flags$&=-2},wr=(x,W)=>{Ut.$flags$|=1;const ue=Array.from(x.__childNodes||x.childNodes);if(x["s-sr"]){let Te=x;for(;Te=Te.nextSibling;)Te&&Te["s-sn"]===x["s-sn"]&&Te["s-sh"]===un&&ue.push(Te)}for(let Te=ue.length-1;Te>=0;Te--){const it=ue[Te];it["s-hn"]!==un&&it["s-ol"]&&(Xr(N(it).parentNode,it,N(it)),it["s-ol"].remove(),it["s-ol"]=void 0,it["s-sh"]=void 0,Pn=!0),W&&wr(it,W)}Ut.$flags$&=-2},ur=(x,W,ue,Te,it,st)=>{let yt,It=x["s-cr"]&&x["s-cr"].parentNode||x;for(It.shadowRoot&&It.tagName===un&&(It=It.shadowRoot);it<=st;++it)Te[it]&&(yt=jn(null,ue,it),yt&&(Te[it].$elm$=yt,Xr(It,yt,N(W))))},X=(x,W,ue)=>{for(let Te=W;Te<=ue;++Te){const it=x[Te];if(it){const st=it.$elm$;zr(it),st&&(En=!0,st["s-ol"]?st["s-ol"].remove():wr(st,!0),st.remove())}}},ee=(x,W,ue=!1)=>x.$tag$===W.$tag$&&("slot"===x.$tag$?x.$name$===W.$name$:ue?(ue&&!x.$key$&&W.$key$&&(x.$key$=W.$key$),!0):x.$key$===W.$key$),N=x=>x&&x["s-ol"]||x,Me=(x,W,ue=!1)=>{const Te=W.$elm$=x.$elm$,it=x.$children$,st=W.$children$,It=W.$tag$,yt=W.$text$;let Bt;null===yt?(Yt="svg"===It||"foreignObject"!==It&&Yt,"slot"===It&&!Rn&&x.$name$!==W.$name$&&(W.$elm$["s-sn"]=W.$name$||"",Nr(W.$elm$.parentElement)),Ue(x,W,Yt,ue),null!==it&&null!==st?((x,W,ue,Te,it=!1)=>{let ar,Yn,st=0,It=0,yt=0,Bt=0,Dt=W.length-1,Rt=W[0],Ht=W[Dt],qt=Te.length-1,Sn=Te[0],gn=Te[qt];for(;st<=Dt&&It<=qt;)if(null==Rt)Rt=W[++st];else if(null==Ht)Ht=W[--Dt];else if(null==Sn)Sn=Te[++It];else if(null==gn)gn=Te[--qt];else if(ee(Rt,Sn,it))Me(Rt,Sn,it),Rt=W[++st],Sn=Te[++It];else if(ee(Ht,gn,it))Me(Ht,gn,it),Ht=W[--Dt],gn=Te[--qt];else if(ee(Rt,gn,it))("slot"===Rt.$tag$||"slot"===gn.$tag$)&&wr(Rt.$elm$.parentNode,!1),Me(Rt,gn,it),Xr(x,Rt.$elm$,Ht.$elm$.nextSibling),Rt=W[++st],gn=Te[--qt];else if(ee(Ht,Sn,it))("slot"===Rt.$tag$||"slot"===gn.$tag$)&&wr(Ht.$elm$.parentNode,!1),Me(Ht,Sn,it),Xr(x,Ht.$elm$,Rt.$elm$),Ht=W[--Dt],Sn=Te[++It];else{for(yt=-1,Bt=st;Bt<=Dt;++Bt)if(W[Bt]&&null!==W[Bt].$key$&&W[Bt].$key$===Sn.$key$){yt=Bt;break}yt>=0?(Yn=W[yt],Yn.$tag$!==Sn.$tag$?ar=jn(W&&W[It],ue,yt):(Me(Yn,Sn,it),W[yt]=void 0,ar=Yn.$elm$),Sn=Te[++It]):(ar=jn(W&&W[It],ue,It),Sn=Te[++It]),ar&&Xr(N(Rt.$elm$).parentNode,ar,N(Rt.$elm$))}st>Dt?ur(x,null==Te[qt+1]?null:Te[qt+1].$elm$,ue,Te,It,qt):It>qt&&X(W,st,Dt)})(Te,it,W,st,ue):null!==st?(null!==x.$text$&&(Te.textContent=""),ur(Te,null,W,st,0,st.length-1)):ue||null===it?ue&&null!==it&&null===st&&(W.$children$=it):X(it,0,it.length-1),Yt&&"svg"===It&&(Yt=!1)):(Bt=Te["s-cr"])?Bt.parentNode.textContent=yt:x.$text$!==yt&&(Te.data=yt)},Nn=[],vr=x=>{let W,ue,Te;const it=x.__childNodes||x.childNodes;for(const st of it){if(st["s-sr"]&&(W=st["s-cr"])&&W.parentNode){ue=W.parentNode.__childNodes||W.parentNode.childNodes;const It=st["s-sn"];for(Te=ue.length-1;Te>=0;Te--)if(W=ue[Te],!(W["s-cn"]||W["s-nr"]||W["s-hn"]===st["s-hn"]||W["s-sh"]&&W["s-sh"]===st["s-hn"]))if(Or(W,It)){let yt=Nn.find(Bt=>Bt.$nodeToRelocate$===W);En=!0,W["s-sn"]=W["s-sn"]||It,yt?(yt.$nodeToRelocate$["s-sh"]=st["s-hn"],yt.$slotRefNode$=st):(W["s-sh"]=st["s-hn"],Nn.push({$slotRefNode$:st,$nodeToRelocate$:W})),W["s-sr"]&&Nn.map(Bt=>{Or(Bt.$nodeToRelocate$,W["s-sn"])&&(yt=Nn.find(Dt=>Dt.$nodeToRelocate$===W),yt&&!Bt.$slotRefNode$&&(Bt.$slotRefNode$=yt.$slotRefNode$))})}else Nn.some(yt=>yt.$nodeToRelocate$===W)||Nn.push({$nodeToRelocate$:W})}1===st.nodeType&&vr(st)}},zr=x=>{x.$attrs$&&x.$attrs$.ref&&x.$attrs$.ref(null),x.$children$&&x.$children$.map(zr)},Xr=(x,W,ue)=>{if("string"==typeof W["s-sn"]&&W["s-sr"]&&W["s-cr"])oo(W["s-cr"],W,x,W.parentElement);else if("string"==typeof W["s-sn"]){11!==x.getRootNode().nodeType&&xe(W),x.insertBefore(W,ue);const{slotNode:Te}=Ct(W);return Te&&Je(Te),W}return x.__insertBefore?x.__insertBefore(W,ue):x?.insertBefore(W,ue)};function oo(x,W,ue,Te){var it,st;let It;if(x&&"string"==typeof W["s-sn"]&&W["s-sr"]&&x.parentNode&&x.parentNode["s-sc"]&&(It=W["s-si"]||x.parentNode["s-sc"])){const yt=W["s-sn"],Bt=W["s-hn"];if(null==(it=ue.classList)||it.add(It+"-s"),Te&&null!=(st=Te.classList)&&st.contains(It+"-s")){let Dt=(Te.__childNodes||Te.childNodes)[0],Rt=!1;for(;Dt;){if(Dt["s-sn"]!==yt&&Dt["s-hn"]===Bt&&Dt["s-sr"]){Rt=!0;break}Dt=Dt.nextSibling}Rt||Te.classList.remove(It+"-s")}}}var go=(x,W)=>{if(W&&!x.$onRenderResolve$&&W["s-p"]){const ue=W["s-p"].push(new Promise(Te=>x.$onRenderResolve$=()=>{W["s-p"].splice(ue-1,1),Te()}))}},Co=(x,W)=>{if(x.$flags$|=16,4&x.$flags$)return void(x.$flags$|=512);go(x,x.$ancestorComponent$);const ue=()=>ti(x,W);if(!W)return hn(ue);queueMicrotask(()=>{ue()})},ti=(x,W)=>{const ue=x.$hostElement$,it=x.$lazyInstance$;if(!it)throw new Error(`Can't render component <${ue.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let st;return W?(x.$flags$|=256,x.$queuedListeners$&&(x.$queuedListeners$.map(([It,yt])=>gt(it,It,yt,ue)),x.$queuedListeners$=void 0),x.$fetchedCbList$.length&&x.$fetchedCbList$.forEach(It=>It(ue)),st=gt(it,"componentWillLoad",void 0,ue)):st=gt(it,"componentWillUpdate",void 0,ue),st=Ao(st,()=>gt(it,"componentWillRender",void 0,ue)),Ao(st,()=>wo(x,it,W))},Ao=(x,W)=>ni(x)?x.then(W).catch(ue=>{console.error(ue),W()}):W(),ni=x=>x instanceof Promise||x&&x.then&&"function"==typeof x.then,wo=function(){var x=(0,i.A)(function*(W,ue,Te){var it;const st=W.$hostElement$,yt=st["s-rc"];Te&&(x=>{const W=x.$cmpMeta$,ue=x.$hostElement$,Te=W.$flags$,st=pn(ue.shadowRoot?ue.shadowRoot:ue.getRootNode(),W,x.$modeName$);10&Te&&(ue["s-sc"]=st,ue.classList.add(st+"-h"))})(W);me(W,ue,st,Te),yt&&(yt.map(Dt=>Dt()),st["s-rc"]=void 0);{const Dt=null!=(it=st["s-p"])?it:[],Rt=()=>Y(W);0===Dt.length?Rt():(Promise.all(Dt).then(Rt),W.$flags$|=4,Dt.length=0)}});return function(ue,Te,it){return x.apply(this,arguments)}}(),me=(x,W,ue,Te)=>{try{W=W.render&&W.render(),x.$flags$&=-17,x.$flags$|=2,((x,W,ue=!1)=>{var Te,it,st,It,yt;const Bt=x.$hostElement$,Dt=x.$cmpMeta$,Rt=x.$vnode$||zn(null,null),qt=(x=>x&&x.$tag$===wn)(W)?W:Pr(null,null,W);if(un=Bt.tagName,Dt.$attrsToReflect$&&(qt.$attrs$=qt.$attrs$||{},Dt.$attrsToReflect$.forEach(([Sn,gn])=>{qt.$attrs$[gn]=Bt[Sn]})),ue&&qt.$attrs$)for(const Sn of Object.keys(qt.$attrs$))Bt.hasAttribute(Sn)&&!["key","ref","style","class"].includes(Sn)&&(qt.$attrs$[Sn]=Bt[Sn]);if(qt.$tag$=null,qt.$flags$|=4,x.$vnode$=qt,qt.$elm$=Rt.$elm$=Bt.shadowRoot||Bt,pt=Bt["s-sc"],Rn=!(!(1&Dt.$flags$)||128&Dt.$flags$),an=Bt["s-cr"],En=!1,Me(Rt,qt,ue),Ut.$flags$|=1,Pn){vr(qt.$elm$);for(const Sn of Nn){const gn=Sn.$nodeToRelocate$;if(!gn["s-ol"]&&Ft.document){const ar=Ft.document.createTextNode("");ar["s-nr"]=gn,Xr(gn.parentNode,gn["s-ol"]=ar,gn)}}for(const Sn of Nn){const gn=Sn.$nodeToRelocate$,ar=Sn.$slotRefNode$;if(ar){const Yn=ar.parentNode;let Zr=ar.nextSibling;if(Zr&&1===Zr.nodeType){let j=null==(Te=gn["s-ol"])?void 0:Te.previousSibling;for(;j;){let Q=null!=(it=j["s-nr"])?it:null;if(Q&&Q["s-sn"]===gn["s-sn"]&&Yn===(Q.__parentNode||Q.parentNode)){for(Q=Q.nextSibling;Q===gn||Q?.["s-sr"];)Q=Q?.nextSibling;if(!Q||!Q["s-nr"]){Zr=Q;break}}j=j.previousSibling}}(!Zr&&Yn!==(gn.__parentNode||gn.parentNode)||(gn.__nextSibling||gn.nextSibling)!==Zr)&&gn!==Zr&&(Xr(Yn,gn,Zr),1===gn.nodeType&&"SLOT-FB"!==gn.tagName&&(gn.hidden=null!=(st=gn["s-ih"])&&st)),gn&&"function"==typeof ar["s-rf"]&&ar["s-rf"](ar)}else 1===gn.nodeType&&(ue&&(gn["s-ih"]=null!=(It=gn.hidden)&&It),gn.hidden=!0)}}if(En&&kr(qt.$elm$),Ut.$flags$&=-2,Nn.length=0,2&Dt.$flags$){const Sn=qt.$elm$.__childNodes||qt.$elm$.childNodes;for(const gn of Sn)gn["s-hn"]!==un&&!gn["s-sh"]&&(ue&&null==gn["s-ih"]&&(gn["s-ih"]=null!=(yt=gn.hidden)&&yt),gn.hidden=!0)}an=void 0})(x,W,Te)}catch(it){re(it,x.$hostElement$)}return null},Y=x=>{const ue=x.$hostElement$,it=x.$lazyInstance$,st=x.$ancestorComponent$;gt(it,"componentDidRender",void 0,ue),64&x.$flags$?gt(it,"componentDidUpdate",void 0,ue):(x.$flags$|=64,Pt(ue),gt(it,"componentDidLoad",void 0,ue),x.$onReadyResolve$(ue),st||je()),x.$onInstanceResolve$(ue),x.$onRenderResolve$&&(x.$onRenderResolve$(),x.$onRenderResolve$=void 0),512&x.$flags$&&ln(()=>Co(x,!1)),x.$flags$&=-517},fe=x=>{var W;{const ue=ve(x),Te=null==(W=ue?.$hostElement$)?void 0:W.isConnected;return Te&&2==(18&ue.$flags$)&&Co(ue,!1),Te}},je=x=>{var W;ln(()=>F(Ft,"appload",{detail:{namespace:"ionic"}})),null!=(W=Ut.$orgLocNodes$)&&W.size&&Ut.$orgLocNodes$.clear()},gt=(x,W,ue,Te)=>{if(x&&x[W])try{return x[W](ue)}catch(it){re(it,Te)}},Pt=x=>x.classList.add("hydrated"),Gt=(x,W,ue,Te)=>{const it=ve(x);if(!it)return;if(!it)throw new Error(`Couldn't find host element for "${Te.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/stenciljs/core/issues/5457).`);const st=it.$hostElement$,It=it.$instanceValues$.get(W),yt=it.$flags$,Bt=it.$lazyInstance$;ue=jr(ue,Te.$members$[W][0]);const Dt=Number.isNaN(It)&&Number.isNaN(ue);if((!(8&yt)||void 0===It)&&ue!==It&&!Dt&&(it.$instanceValues$.set(W,ue),Bt)){if(Te.$watchers$&&128&yt){const Ht=Te.$watchers$[W];Ht&&Ht.map(qt=>{try{Bt[qt](ue,It,W)}catch(Sn){re(Sn,st)}})}if(2==(18&yt)){if(Bt.componentShouldUpdate&&!1===Bt.componentShouldUpdate(ue,It,W))return;Co(it,!1)}}},_n=(x,W,ue)=>{var Te,it;const st=x.prototype;{x.watchers&&!W.$watchers$&&(W.$watchers$=x.watchers),x.deserializers&&!W.$deserializers$&&(W.$deserializers$=x.deserializers),x.serializers&&!W.$serializers$&&(W.$serializers$=x.serializers);const It=Object.entries(null!=(Te=W.$members$)?Te:{});if(It.map(([yt,[Bt]])=>{if(31&Bt||2&ue&&32&Bt){const{get:Dt,set:Rt}=Object.getOwnPropertyDescriptor(st,yt)||{};Dt&&(W.$members$[yt][0]|=2048),Rt&&(W.$members$[yt][0]|=4096),(1&ue||!Dt)&&Object.defineProperty(st,yt,{get(){{if(!(2048&W.$members$[yt][0]))return((x,W)=>ve(this).$instanceValues$.get(W))(0,yt);const Ht=ve(this),qt=Ht?Ht.$lazyInstance$:st;return qt?qt[yt]:void 0}},configurable:!0,enumerable:!0}),Object.defineProperty(st,yt,{set(Ht){const qt=ve(this);if(qt){if(Rt)return typeof(32&Bt?this[yt]:qt.$hostElement$[yt])>"u"&&qt.$instanceValues$.get(yt)&&(Ht=qt.$instanceValues$.get(yt)),Rt.apply(this,[jr(Ht,Bt)]),void Gt(this,yt,Ht=32&Bt?this[yt]:qt.$hostElement$[yt],W);{if(!(1&ue&&4096&W.$members$[yt][0]))return Gt(this,yt,Ht,W),void(1&ue&&!qt.$lazyInstance$&&qt.$fetchedCbList$.push(()=>{4096&W.$members$[yt][0]&&qt.$lazyInstance$[yt]!==qt.$instanceValues$.get(yt)&&(qt.$lazyInstance$[yt]=Ht)}));const Sn=()=>{const gn=qt.$lazyInstance$[yt];!qt.$instanceValues$.get(yt)&&gn&&qt.$instanceValues$.set(yt,gn),qt.$lazyInstance$[yt]=jr(Ht,Bt),Gt(this,yt,qt.$lazyInstance$[yt],W)};qt.$lazyInstance$?Sn():qt.$fetchedCbList$.push(()=>{Sn()})}}}})}else 1&ue&&64&Bt&&Object.defineProperty(st,yt,{value(...Dt){var Rt;const Ht=ve(this);return null==(Rt=Ht?.$onInstancePromise$)?void 0:Rt.then(()=>{var qt;return null==(qt=Ht.$lazyInstance$)?void 0:qt[yt](...Dt)})}})}),1&ue){const yt=new Map;st.attributeChangedCallback=function(Bt,Dt,Rt){Ut.jmp(()=>{var Ht;const qt=yt.get(Bt),Sn=ve(this);if(this.hasOwnProperty(qt)&&(Rt=this[qt],delete this[qt]),st.hasOwnProperty(qt)&&"number"==typeof this[qt]&&this[qt]==Rt)return;if(null==qt){const ar=Sn?.$flags$;if(Sn&&ar&&!(8&ar)&&128&ar&&Rt!==Dt){const Yn=Sn.$lazyInstance$,Zr=null==(Ht=W.$watchers$)?void 0:Ht[Bt];Zr?.forEach(vo=>{null!=Yn[vo]&&Yn[vo].call(Yn,Rt,Dt,Bt)})}return}const gn=Object.getOwnPropertyDescriptor(st,qt);(Rt=(null!==Rt||"boolean"!=typeof this[qt])&&Rt)!=this[qt]&&(!gn.get||gn.set)&&(this[qt]=Rt)})},x.observedAttributes=Array.from(new Set([...Object.keys(null!=(it=W.$watchers$)?it:{}),...It.filter(([Bt,Dt])=>31&Dt[0]).map(([Bt,Dt])=>{var Rt;const Ht=Dt[1]||Bt;return yt.set(Ht,Bt),512&Dt[0]&&(null==(Rt=W.$attrsToReflect$)||Rt.push([Bt,Ht])),Ht})]))}}return x},Fn=function(){var x=(0,i.A)(function*(W,ue,Te,it){let st;if(!(32&ue.$flags$)){if(ue.$flags$|=32,Te.$lazyBundleId$){const Dt=((x,W)=>{const Te=x.$tagName$.replace(/-/g,"_"),it=x.$lazyBundleId$;if(!it)return;const st=Ke.get(it);return st?st[Te]:b(6120)(`./${it}.entry.js`).then(It=>(Ke.set(it,It),It[Te]),It=>{re(It,W.$hostElement$)})})(Te,ue);if(Dt&&"then"in Dt){const Ht=()=>{};st=yield Dt,Ht()}else st=Dt;if(!st)throw new Error(`Constructor for "${Te.$tagName$}#${ue.$modeName$}" was not found`);st.isProxied||(Te.$watchers$=st.watchers,Te.$serializers$=st.serializers,Te.$deserializers$=st.deserializers,_n(st,Te,2),st.isProxied=!0);const Rt=()=>{};ue.$flags$|=8;try{new st(ue)}catch(Ht){re(Ht,W)}ue.$flags$&=-9,ue.$flags$|=128,Rt(),Xn(ue.$lazyInstance$,W)}else st=W.constructor,customElements.whenDefined(W.localName).then(()=>ue.$flags$|=128);if(st&&st.style){let Dt;"string"==typeof st.style?Dt=st.style:"string"!=typeof st.style&&(ue.$modeName$=(x=>Oe.map(W=>W(x)).find(W=>!!W))(W),ue.$modeName$&&(Dt=st.style[ue.$modeName$]));const Rt=Mn(Te,ue.$modeName$);if(!we.has(Rt)){const Ht=()=>{};zt(Rt,Dt,!!(1&Te.$flags$)),Ht()}}}const It=ue.$ancestorComponent$,yt=()=>Co(ue,!0);It&&It["s-rc"]?It["s-rc"].push(yt):yt()});return function(ue,Te,it,st){return x.apply(this,arguments)}}(),Xn=(x,W)=>{gt(x,"connectedCallback",void 0,W)},Sr=x=>{if(!Ft.document)return;const W=x["s-cr"]=Ft.document.createComment("");W["s-cn"]=!0,Xr(x,W,x.firstChild)},Cr=(x,W)=>{gt(x,"disconnectedCallback",void 0,W||x)},pr=function(){var x=(0,i.A)(function*(W){if(!(1&Ut.$flags$)){const ue=ve(W);ue?.$rmListeners$&&(ue.$rmListeners$.map(Te=>Te()),ue.$rmListeners$=void 0),ue?.$lazyInstance$?Cr(ue.$lazyInstance$,W):ue?.$onReadyPromise$&&ue.$onReadyPromise$.then(()=>Cr(ue.$lazyInstance$,W))}bt.has(W)&&bt.delete(W),W.shadowRoot&&bt.has(W.shadowRoot)&&bt.delete(W.shadowRoot)});return function(ue){return x.apply(this,arguments)}}(),Kr=(x,W={})=>{var ue;if(!Ft.document)return void console.warn("Stencil: No document found. Skipping bootstrapping lazy components.");const it=[],st=W.exclude||[],It=Ft.customElements,yt=Ft.document.head,Bt=yt.querySelector("meta[charset]"),Dt=Ft.document.createElement("style"),Rt=[];let Ht,qt=!0;Object.assign(Ut,W),Ut.$resourcesUrl$=new URL(W.resourcesUrl||"./",Ft.document.baseURI).href,Ut.$flags$|=2,(()=>{if(!Ft.document)return;const x=Ft.document.querySelectorAll(`[${He}]`);let W=0;for(;W<x.length;W++)zt(x[W].getAttribute(He),tr(x[W].innerHTML),!0)})();let Sn=!1;if(x.map(gn=>{gn[1].map(ar=>{var Yn,Zr,vo;const Fr={$flags$:ar[0],$tagName$:ar[1],$members$:ar[2],$listeners$:ar[3]};4&Fr.$flags$&&(Sn=!0),Fr.$members$=ar[2],Fr.$listeners$=ar[3],Fr.$attrsToReflect$=[],Fr.$watchers$=null!=(Yn=ar[4])?Yn:{},Fr.$serializers$=null!=(Zr=ar[5])?Zr:{},Fr.$deserializers$=null!=(vo=ar[6])?vo:{};const j=Fr.$tagName$,Q=class extends HTMLElement{constructor(L){if(super(L),this.hasRegisteredEventListeners=!1,((x,W)=>{const ue={$flags$:0,$hostElement$:x,$cmpMeta$:W,$instanceValues$:new Map,$serializerValues$:new Map};ue.$onInstancePromise$=new Promise(it=>ue.$onInstanceResolve$=it),ue.$onReadyPromise$=new Promise(it=>ue.$onReadyResolve$=it),x["s-p"]=[],x["s-rc"]=[],ue.$fetchedCbList$=[];const Te=ue;x.__stencil__getHostRef=()=>Te})(L=this,Fr),1&Fr.$flags$)if(L.shadowRoot){if("open"!==L.shadowRoot.mode)throw new Error(`Unable to re-use existing shadow root for ${Fr.$tagName$}! Mode is set to ${L.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else mr.call(L,Fr)}connectedCallback(){const L=ve(this);L&&(this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0,io(this,L,Fr.$listeners$)),Ht&&(clearTimeout(Ht),Ht=null),qt?Rt.push(this):Ut.jmp(()=>(x=>{if(!(1&Ut.$flags$)){const W=ve(x);if(!W)return;const ue=W.$cmpMeta$,Te=()=>{};if(1&W.$flags$)io(x,W,ue.$listeners$),W?.$lazyInstance$?Xn(W.$lazyInstance$,x):W?.$onReadyPromise$&&W.$onReadyPromise$.then(()=>Xn(W.$lazyInstance$,x));else{let it;if(W.$flags$|=1,it=x.getAttribute(Ie),it){if(1&ue.$flags$){const st=pn(x.shadowRoot,ue,x.getAttribute("s-mode"));x.classList.remove(st+"-h",st+"-s")}else if(2&ue.$flags$){const st=Mn(ue,x.getAttribute("s-mode"));x["s-sc"]=st}((x,W,ue,Te)=>{var it,st;const yt=x.shadowRoot,Bt=[],Dt=[],Rt=[],Ht=yt?[]:null,qt=zn(W,null);let Sn;qt.$elm$=x;{const Xe=Te.$cmpMeta$;Xe&&10&Xe.$flags$&&x["s-sc"]?(Sn=x["s-sc"],x.classList.add(Sn+"-h")):x["s-sc"]&&delete x["s-sc"]}Ft.document&&(!Ut.$orgLocNodes$||!Ut.$orgLocNodes$.size)&&Rr(Ft.document.body,Ut.$orgLocNodes$=new Map),x[Ie]=ue,x.removeAttribute(Ie),Te.$vnode$=Ar(qt,Bt,Dt,Ht,x,x,ue,Rt);let gn=0;const ar=Bt.length;let Yn;for(;gn<ar;gn++){Yn=Bt[gn];const Xe=Yn.$hostId$+"."+Yn.$nodeId$,on=Ut.$orgLocNodes$.get(Xe),mn=Yn.$elm$;if(yt){if(null!=(it=Yn.$tag$)&&it.toString().includes("-")&&"slot-fb"!==Yn.$tag$&&!Yn.$elm$.shadowRoot){const Hr=ve(Yn.$elm$);if(Hr){const _o=Mn(Hr.$cmpMeta$,Yn.$elm$.getAttribute("s-mode")),co=Ft.document.querySelector(`style[sty-id="${_o}"]`);co&&x.shadowRoot.append(co.cloneNode(!0))}}}else mn["s-hn"]=W.toUpperCase(),"slot"===Yn.$tag$&&(mn["s-cr"]=x["s-cr"]);"slot"===Yn.$tag$&&(Yn.$name$=Yn.$elm$["s-sn"]||Yn.$elm$.name||null,Yn.$children$?(Yn.$flags$|=2,Yn.$elm$.childNodes.length||Yn.$children$.forEach(Hr=>{Yn.$elm$.appendChild(Hr.$elm$)})):Yn.$flags$|=1),on&&on.isConnected&&(on.parentElement.shadowRoot&&""===on["s-en"]&&on.parentNode.insertBefore(mn,on.nextSibling),on.parentNode.removeChild(on),yt||(mn["s-oo"]=parseInt(Yn.$nodeId$))),on&&!on["s-id"]&&Ut.$orgLocNodes$.delete(Xe)}const Zr=[],vo=Rt.length;let j,Q,L,de,Fr=0;for(;Fr<vo;Fr++)if(j=Rt[Fr],j&&j.length)for(L=j.length,Q=0;Q<L;Q++){if(de=j[Q],Zr[de.hostId]||(Zr[de.hostId]=Ut.$orgLocNodes$.get(de.hostId)),!Zr[de.hostId])continue;const Xe=Zr[de.hostId];Xe.shadowRoot&&de.node.parentElement!==Xe&&Xe.appendChild(de.node),(!Xe.shadowRoot||!yt)&&(de.slot["s-cr"]||(de.slot["s-cr"]=Xe["s-cr"],de.slot["s-cr"]=!de.slot["s-cr"]&&Xe.shadowRoot?Xe:(Xe.__childNodes||Xe.childNodes)[0]),Jn(de.node,de.slot,!1,de.node["s-oo"]),null!=(st=de.node.parentElement)&&st.shadowRoot&&de.node.getAttribute&&de.node.getAttribute("slot")&&de.node.removeAttribute("slot"),hr(de.node))}if(Sn&&Dt.length&&Dt.forEach(Xe=>{Xe.$elm$.parentElement.classList.add(Sn+"-s")}),yt){let Xe=0;const on=Ht.length;if(on){for(;Xe<on;Xe++){const mn=Ht[Xe];mn&&yt.appendChild(mn)}Array.from(x.childNodes).forEach(mn=>{"string"!=typeof mn["s-en"]&&"string"!=typeof mn["s-sn"]&&(1===mn.nodeType&&mn.slot&&mn.hidden?mn.removeAttribute("hidden"):(8===mn.nodeType&&!mn.nodeValue||3===mn.nodeType&&!mn.wholeText.trim())&&mn.parentNode.removeChild(mn))})}}Te.$hostElement$=x})(x,ue.$tagName$,it,W)}it||12&ue.$flags$&&Sr(x);{let st=x;for(;st=st.parentNode||st.host;)if(1===st.nodeType&&st.hasAttribute("s-id")&&st["s-p"]||st["s-p"]){go(W,W.$ancestorComponent$=st);break}}ue.$members$&&Object.entries(ue.$members$).map(([st,[It]])=>{if(31&It&&st in x&&x[st]!==Object.prototype[st]){const yt=x[st];delete x[st],x[st]=yt}}),Fn(x,W,ue)}Te()}})(this)))}disconnectedCallback(){Ut.jmp(()=>pr(this)),Ut.raf(()=>{var L;const de=ve(this);if(!de)return;const Xe=Rt.findIndex(on=>on===this);Xe>-1&&Rt.splice(Xe,1),(null==(L=de?.$vnode$)?void 0:L.$elm$)instanceof Node&&!de.$vnode$.$elm$.isConnected&&delete de.$vnode$.$elm$})}componentOnReady(){var L;return null==(L=ve(this))?void 0:L.$onReadyPromise$}};!(1&Fr.$flags$)&&256&Fr.$flags$&&(x=>{kt(x),jt(x),rn(x),tn(x),er(x),nn(x),Wn(x),An(x),Bn(x),br(x),Kt(x)})(Q.prototype),Fr.$lazyBundleId$=gn[0],!st.includes(j)&&!It.get(j)&&(it.push(j),It.define(j,_n(Q,Fr,1)))})}),it.length>0&&(Sn&&(Dt.textContent+=St),Dt.textContent+=it.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",Dt.innerHTML.length)){Dt.setAttribute("data-styles","");const gn=null!=(ue=Ut.$nonce$)?ue:cn(Ft.document);null!=gn&&Dt.setAttribute("nonce",gn),yt.insertBefore(Dt,Bt?Bt.nextSibling:yt.firstChild)}qt=!1,Rt.length?Rt.map(gn=>gn.connectedCallback()):Ut.jmp(()=>Ht=setTimeout(je,30))},Ir=(x,W)=>W,io=(x,W,ue,Te)=>{ue&&Ft.document&&ue.map(([it,st,It])=>{const yt=Eo(Ft.document,x,it),Bt=Qr(W,It),Dt=Ro(it);Ut.ael(yt,st,Bt,Dt),(W.$rmListeners$=W.$rmListeners$||[]).push(()=>Ut.rel(yt,st,Bt,Dt))})},Qr=(x,W)=>ue=>{var Te;try{256&x.$flags$?null==(Te=x.$lazyInstance$)||Te[W](ue):(x.$queuedListeners$=x.$queuedListeners$||[]).push([W,ue])}catch(it){re(it,x.$hostElement$)}},Eo=(x,W,ue)=>4&ue?x:8&ue?Ft:16&ue?x.body:W,Ro=x=>xt?{passive:!!(1&x),capture:!!(2&x)}:!!(2&x)},5735($t,ot,b){"use strict";b.d(ot,{Q:()=>Ge});var i=b(467),o=b(2084),D=b(2615),Ce=b(918),De=b(5029),B=b(4938),Pe=b(8863);let Ge=(()=>{var pe;class ie{constructor(l,p,m,y){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=y,this.REPORTS_BUCKET="outplanting",this.IMAGES_BUCKET="outplanting-images",this.DRAFT_FILE="outplanting_draft_current.json",this.PENDING_QUEUE_FILE="outplanting_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} OutplantingSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} OutplantingSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(v=>console.error("\u274c OutplantingSyncService: processPendingQueue failed:",v))}),setTimeout(()=>{console.log("\u{1f680} OutplantingSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(v=>console.error("\u274c OutplantingSyncService: Initial queue check failed:",v))},6e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 OutplantingSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(v=>console.error("\u274c OutplantingSyncService: Periodic queue check failed:",v))},3e5),console.log("\u2705 OutplantingSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Outplanting${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];(l?.siteLocation||l?.location)&&p.push(l.siteLocation||l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];l?.individualsOutplanted>0&&m.push(`${l.individualsOutplanted} outplanted`),l?.deadOrFailed>0&&m.push(`${l.deadOrFailed} failed`),l?.averageGrowth>0&&m.push(`Growth: ${l.averageGrowth}cm`);const y=[];return l?.flowers&&y.push("flowers"),l?.fruits&&y.push("fruits"),y.length>0&&m.push(y.join(" & ")),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"outplanting"}getDraftKey(l){const p=(l?.siteLocation||l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",y=l?.quadNumber||"";let v=`outplanting_draft_${p}`;return m&&(v+=`_zone${m}`),y&&(v+=`_quad${y}`),`${v}.json`}dataUrlToBlob(l){return(0,i.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,i.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,i.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("OutplantingSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=l.reportId||p.generateReportId(),v={reportId:y,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos||[],status:l.status||{incomplete:!0,sent:!1,pending:!1}},M=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(M,v);const R=yield p.sharedDataService.readJsonFile(M);if(!R||R.reportId!==v.reportId)throw new Error("OutplantingSyncService: draft verification failed");const V=yield p.storage.getUser(),ce=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(V?.username||"unknown","outplanting",y,ce)})()}loadDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,i.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(v=>v.startsWith("outplanting_draft_")),y=[];for(const v of m)try{const M=yield l.sharedDataService.readJsonFile(v);if(M){const R=l.getLocationLabelFromFilename(v,M.form);y.push({draft:M,locationLabel:R})}}catch(M){console.warn("OutplantingSyncService: Failed to read draft file",v,M)}return y})()}getLocationLabelFromFilename(l,p){return`${p?.siteLocation||p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,i.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,i.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:y}of m)p.push({report:y,status:"draft"});try{const v=(yield l.sharedDataService.listFiles()).filter(M=>{if(!M.startsWith("Outplanting")||M.includes("_report_"))return!1;const R=M.replace(".json","");return/^Outplanting\d{8}_\d{6}$/.test(R)&&!M.includes("_backup")&&!M.includes("_draft")&&!M.includes("_queue")});for(const M of v)try{const R=yield l.sharedDataService.readJsonFile(M);R&&p.push({report:R,status:R.status.sent?"submitted":"pending"})}catch(R){console.warn("OutplantingSyncService: Failed to read report file",M,R)}}catch(y){console.error("OutplantingSyncService: Failed to list files:",y)}return p.sort((y,v)=>{const M=new Date(y.report.updatedAt||y.report.createdAt).getTime();return new Date(v.report.updatedAt||v.report.createdAt).getTime()-M}),p})()}submitFinal(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=!0===l.isEditMode,v=l.existingReportId||p.generateReportId();let M=m;try{const ae=yield p.sharedDataService.readJsonFile(`${v}.json`);ae?.createdAt&&(M=ae.createdAt)}catch{}const R={reportId:v,createdAt:M,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:[...l.photos||[]],status:{incomplete:!1,sent:!1,pending:!1},project_key:l.project_key,sequence_number:l.sequence_number||1,parent_report_id:l.parent_report_id,is_ongoing:void 0===l.is_ongoing||l.is_ongoing};y&&(R.editedAt=m);const V=`${v}.json`;yield p.sharedDataService.writeJsonFile(V,R);const ce=yield p.sharedDataService.readJsonFile(V);if(!ce||ce.reportId!==v)throw new Error("OutplantingSyncService: local report verification failed");const z=yield p.storage.getUser(),te=z?z.organization||z.username:null;let K;if(l.originalSubmittedBy&&te&&l.originalSubmittedBy!==te?K=`${l.originalSubmittedBy}, ${te}`:te&&(K=te),R.submittedBy=K,yield p.sharedDataService.writeJsonFile(V,R),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:v,localReportFile:V}),{reportId:v,queued:!0};try{yield p.uploadReportAndImages(R,l.originalSubmittedBy),R.status.sent=!0,R.status.pending=!1,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.clearDraft();const ve=(yield p.storage.getUser())?.username||"unknown",Ne=p.getFormSummary(l.formValue),he=R.submittedBy;return y?p.monitoringLog.recordFormEdited(ve,"outplanting",v,!1,Ne,he):p.monitoringLog.recordFormSubmitted(ve,"outplanting",v,!1,Ne,he),{reportId:v,queued:!1}}catch(ae){const ve=String(ae?.message?ae.message:ae);R.status.pending=!0,R.status.lastError=ve,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.enqueuePending({reportId:v,localReportFile:V});const he=(yield p.storage.getUser())?.username||"unknown",Le=p.getFormSummary(l.formValue),re=R.submittedBy;return y?p.monitoringLog.recordFormEdited(he,"outplanting",v,!0,Le,re):p.monitoringLog.recordFormSubmitted(he,"outplanting",v,!0,Le,re),{reportId:v,queued:!0}}})()}enqueuePending(l){var p=this;return(0,i.A)(function*(){console.log("\u{1f4dd} OutplantingSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(v=>v.reportId===l.reportId)?console.log("\u26a0\ufe0f OutplantingSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 OutplantingSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} OutplantingSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,i.A)(function*(){if(console.log("\u{1f504} OutplantingSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f OutplantingSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f OutplantingSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} OutplantingSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 OutplantingSyncService: Queue is empty, nothing to process");const m=[];for(const y of p.items){console.log("\u{1f50d} OutplantingSyncService: Processing item:",y.reportId,"(attempt",y.attempts+1,")");try{const v=yield l.sharedDataService.readJsonFile(y.localReportFile);if(!v){console.error("\u274c OutplantingSyncService: Local report file missing for",y.reportId),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(v),console.log("\u2705 OutplantingSyncService: Upload succeeded for",y.reportId),v.status.sent=!0,v.status.pending=!1,v.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(y.localReportFile,v),console.log("\u{1f4be} OutplantingSyncService: Marked report as sent")}catch(v){console.error("\u274c OutplantingSyncService: Upload failed for",y.reportId,":",v),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} OutplantingSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} OutplantingSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,i.A)(function*(){console.log("\u{1f4e4} OutplantingSyncService: Starting upload for report",l.reportId);const y=m.getClient(),v=[];for(let le=0;le<(l.photos||[]).length;le++){const ae=l.photos[le],ve=yield m.uploadImageDataUrl(`${l.reportId}/photo_${le+1}.jpg`,ae);v.push(ve)}const M=JSON.parse(JSON.stringify(l));M.photos=v,M.status={incomplete:!1,sent:!0,pending:!1};const R=`${l.reportId}.json`,V=new Blob([JSON.stringify(M)],{type:"application/json"}),{error:ce}=yield y.storage.from(m.REPORTS_BUCKET).upload(R,V,{contentType:"application/json",upsert:!0});if(ce)throw console.error("\u274c OutplantingSyncService: JSON upload error:",ce),ce;console.log("\u2705 OutplantingSyncService: Successfully uploaded JSON to",R);let z=l.submittedBy||null;if(!z){const le=yield m.storage.getUser();z=le?le.organization||le.username:null}const te={report_id:l.reportId,submitted_by:z,json_path:R,location:l.form.siteLocation||null,outplanting_date:l.form.date||null,zone_number:l.form.zoneNumber?`Zone ${l.form.zoneNumber}`:null,total_area:l.form.totalArea||null,area_restored:l.form.areaRestored||null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:K}=yield y.from("outplanting_reports").upsert(te,{onConflict:"report_id"});if(K)throw console.error("\u274c OutplantingSyncService: Database upsert error:",K),K;console.log("\u2705 OutplantingSyncService: Successfully upserted into outplanting_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,i.A)(function*(){const y=m.getClient(),v=yield m.dataUrlToBlob(p),{error:M}=yield y.storage.from(m.IMAGES_BUCKET).upload(l,v,{contentType:v.type||"image/jpeg",upsert:!0});if(M)throw console.error("\u274c OutplantingSyncService: Image upload error for",l,":",M),M;return console.log("\u2705 OutplantingSyncService: Successfully uploaded image to",l),l})()}static#e=pe=()=>(this.\u0275fac=function(p){return new(p||ie)(D.KVO(Ce.H),D.KVO(De.L),D.KVO(B.w),D.KVO(Pe.u))},this.\u0275prov=D.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return pe(),ie})()},5921($t,ot,b){"use strict";b.d(ot,{nX:()=>mo,Pu:()=>Ci,Zp:()=>Sr,nU:()=>Ze,wU:()=>Pn,c1:()=>Ht,XR:()=>Yo,wF:()=>wr,lW:()=>ee,mo:()=>X,Z:()=>Nr,J2:()=>Ai,Xk:()=>yn,J_:()=>ui,bw:()=>Di,b:()=>f,tD:()=>qt,Ix:()=>Se,D$:()=>eo,n3:()=>Dt,OY:()=>ni,Sd:()=>nt,bK:()=>xi,gk:()=>U,Lg:()=>Hs,wO:()=>Dr,Us:()=>fe,we:()=>Sn});var i=b(2615),o=b(7303),D=b(3664),Ce=b(7705),De=b(9295),B=b(1985),Pe=b(8071),pe=b(6648),ie=b(7673),Ae=b(4412),l=b(4572);const m=(0,b(1853).L)(h=>function(){h(this),this.name="EmptyError",this.message="no elements in sequence"});var y=b(6365),M=b(9326);function R(...h){return function v(){return(0,y.U)(1)}()((0,pe.H)(h,(0,M.lI)(h)))}var V=b(8750);function ce(h){return new B.c(S=>{(0,V.Tg)(h()).subscribe(S)})}var z=b(1203);function te(h,S){const E=(0,Pe.T)(h)?h:()=>h,w=$=>$.error(E());return new B.c(S?$=>S.schedule(w,0,$):w)}var K=b(983),le=b(8359),ae=b(9974),ve=b(4360);function Ne(){return(0,ae.N)((h,S)=>{let E=null;h._refCount++;const w=(0,ve._)(S,void 0,void 0,void 0,()=>{if(!h||h._refCount<=0||0<--h._refCount)return void(E=null);const $=h._connection,Z=E;E=null,$&&(!Z||$===Z)&&$.unsubscribe(),S.unsubscribe()});h.subscribe(w),w.closed||(E=h.connect())})}class he extends B.c{constructor(S,E){super(),this.source=S,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,ae.S)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new le.yU;const E=this.getSubject();S.add(this.source.subscribe((0,ve._)(E,void 0,()=>{this._teardown(),E.complete()},w=>{this._teardown(),E.error(w)},()=>this._teardown()))),S.closed&&(this._connection=null,S=le.yU.EMPTY)}return S}refCount(){return Ne()(this)}}var Le=b(1413),re=b(6354),Ke=b(5558),Fe=b(6697),Oe=b(5964),Ye=b(1397);function Ve(h){return(0,ae.N)((S,E)=>{let w=!1;S.subscribe((0,ve._)(E,$=>{w=!0,E.next($)},()=>{w||E.next(h),E.complete()}))})}function be(h=q){return(0,ae.N)((S,E)=>{let w=!1;S.subscribe((0,ve._)(E,$=>{w=!0,E.next($)},()=>w?E.complete():E.error(h())))})}function q(){return new m}var ge=b(3669);function Ie(h,S){const E=arguments.length>=2;return w=>w.pipe(h?(0,Oe.p)(($,Z)=>h($,Z,w)):ge.D,(0,Fe.s)(1),E?Ve(S):be(()=>new m))}var He=b(274);function tt(h,S,E){const w=(0,Pe.T)(h)||S||E?{next:h,error:S,complete:E}:h;return w?(0,ae.N)(($,Z)=>{var _e;null===(_e=w.subscribe)||void 0===_e||_e.call(w);let Qe=!0;$.subscribe((0,ve._)(Z,ht=>{var Vt;null===(Vt=w.next)||void 0===Vt||Vt.call(w,ht),Z.next(ht)},()=>{var ht;Qe=!1,null===(ht=w.complete)||void 0===ht||ht.call(w),Z.complete()},ht=>{var Vt;Qe=!1,null===(Vt=w.error)||void 0===Vt||Vt.call(w,ht),Z.error(ht)},()=>{var ht,Vt;Qe&&(null===(ht=w.unsubscribe)||void 0===ht||ht.call(w)),null===(Vt=w.finalize)||void 0===Vt||Vt.call(w)}))}):ge.D}var dt=b(9437);function Ft(h){return h<=0?()=>K.w:(0,ae.N)((S,E)=>{let w=[];S.subscribe((0,ve._)(E,$=>{w.push($),h<w.length&&w.shift()},()=>{for(const $ of w)E.next($);E.complete()},void 0,()=>{w=null}))})}var Ut=b(980),ut=b(5343);function xt(h){return(0,ae.N)((S,E)=>{(0,V.Tg)(h).subscribe((0,ve._)(E,()=>E.complete(),ut.l)),!E.closed&&S.subscribe(E)})}let ct=(()=>{class h{_doc;constructor(E){this._doc=E}getTitle(){return this._doc.title}setTitle(E){this._doc.title=E||""}static \u0275fac=function(w){return new(w||h)(i.KVO(i.qQL))};static \u0275prov=i.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();const yn="primary",Er=Symbol("RouteTitle");class Or{params;constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const E=this.params[S];return Array.isArray(E)?E[0]:E}return null}getAll(S){if(this.has(S)){const E=this.params[S];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function Jn(h){return new Or(h)}function vn(h,S,E){const w=E.path.split("/");if(w.length>h.length||"full"===E.pathMatch&&(S.hasChildren()||w.length<h.length))return null;const $={};for(let Z=0;Z<w.length;Z++){const _e=w[Z],Qe=h[Z];if(":"===_e[0])$[_e.substring(1)]=Qe;else if(_e!==Qe.path)return null}return{consumed:h.slice(0,w.length),posParams:$}}function Je(h,S){const E=h?Ct(h):void 0,w=S?Ct(S):void 0;if(!E||!w||E.length!=w.length)return!1;let $;for(let Z=0;Z<E.length;Z++)if($=E[Z],!mt(h[$],S[$]))return!1;return!0}function Ct(h){return[...Object.keys(h),...Object.getOwnPropertySymbols(h)]}function mt(h,S){if(Array.isArray(h)&&Array.isArray(S)){if(h.length!==S.length)return!1;const E=[...h].sort(),w=[...S].sort();return E.every(($,Z)=>w[Z]===$)}return h===S}function kt(h){return h.length>0?h[h.length-1]:null}function jt(h){return function Ge(h){return!!h&&(h instanceof B.c||(0,Pe.T)(h.lift)&&(0,Pe.T)(h.subscribe))}(h)?h:(0,D.yLl)(h)?(0,pe.H)(Promise.resolve(h)):(0,ie.of)(h)}const Kt={exact:function Wn(h,S,E){if(!Ur(h.segments,S.segments)||!br(h.segments,S.segments,E)||h.numberOfChildren!==S.numberOfChildren)return!1;for(const w in S.children)if(!h.children[w]||!Wn(h.children[w],S.children[w],E))return!1;return!0},subset:er},tn={exact:function nn(h,S){return Je(h,S)},subset:function An(h,S){return Object.keys(S).length<=Object.keys(h).length&&Object.keys(S).every(E=>mt(h[E],S[E]))},ignored:()=>!0};function rn(h,S,E){return Kt[E.paths](h.root,S.root,E.matrixParams)&&tn[E.queryParams](h.queryParams,S.queryParams)&&!("exact"===E.fragment&&h.fragment!==S.fragment)}function er(h,S,E){return Bn(h,S,S.segments,E)}function Bn(h,S,E,w){if(h.segments.length>E.length){const $=h.segments.slice(0,E.length);return!(!Ur($,E)||S.hasChildren()||!br($,E,w))}if(h.segments.length===E.length){if(!Ur(h.segments,E)||!br(h.segments,E,w))return!1;for(const $ in S.children)if(!h.children[$]||!er(h.children[$],S.children[$],w))return!1;return!0}{const $=E.slice(0,h.segments.length),Z=E.slice(h.segments.length);return!!(Ur(h.segments,$)&&br(h.segments,$,w)&&h.children[yn])&&Bn(h.children[yn],S,Z,w)}}function br(h,S,E){return S.every((w,$)=>tn[E](h[$].parameters,w.parameters))}class hr{root;queryParams;fragment;_queryParamMap;constructor(S=new In([],{}),E={},w=null){this.root=S,this.queryParams=E,this.fragment=w}get queryParamMap(){return this._queryParamMap??=Jn(this.queryParams),this._queryParamMap}toString(){return ye.serialize(this)}}class In{segments;children;parent=null;constructor(S,E){this.segments=S,this.children=E,Object.values(E).forEach(w=>w.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return We(this)}}class dn{path;parameters;_parameterMap;constructor(S,E){this.path=S,this.parameters=E}get parameterMap(){return this._parameterMap??=Jn(this.parameters),this._parameterMap}toString(){return tr(this)}}function Ur(h,S){return h.length===S.length&&h.every((E,w)=>E.path===S[w].path)}let nt=(()=>{class h{static \u0275fac=function(w){return new(w||h)};static \u0275prov=i.jDH({token:h,factory:()=>new Ze,providedIn:"root"})}return h})();class Ze{parse(S){const E=new Rr(S);return new hr(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(S){const E=`/${Ee(S.root,!0)}`,w=function Pr(h){const S=Object.entries(h).map(([E,w])=>Array.isArray(w)?w.map($=>`${bt(E)}=${bt($)}`).join("&"):`${bt(E)}=${bt(w)}`).filter(E=>E);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${E}${w}${"string"==typeof S.fragment?`#${function zt(h){return encodeURI(h)}(S.fragment)}`:""}`}}const ye=new Ze;function We(h){return h.segments.map(S=>tr(S)).join("/")}function Ee(h,S){if(!h.hasChildren())return We(h);if(S){const E=h.children[yn]?Ee(h.children[yn],!1):"",w=[];return Object.entries(h.children).forEach(([$,Z])=>{$!==yn&&w.push(`${$}:${Ee(Z,!1)}`)}),w.length>0?`${E}(${w.join("//")})`:E}{const E=function xe(h,S){let E=[];return Object.entries(h.children).forEach(([w,$])=>{w===yn&&(E=E.concat(S($,w)))}),Object.entries(h.children).forEach(([w,$])=>{w!==yn&&(E=E.concat(S($,w)))}),E}(h,(w,$)=>$===yn?[Ee(h.children[yn],!1)]:[`${$}:${Ee(w,!1)}`]);return 1===Object.keys(h.children).length&&null!=h.children[yn]?`${We(h)}/${E[0]}`:`${We(h)}/(${E.join("//")})`}}function et(h){return encodeURIComponent(h).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bt(h){return et(h).replace(/%3B/gi,";")}function pn(h){return et(h).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tn(h){return decodeURIComponent(h)}function Mn(h){return Tn(h.replace(/\+/g,"%20"))}function tr(h){return`${pn(h.path)}${function Wr(h){return Object.entries(h).map(([S,E])=>`;${pn(S)}=${pn(E)}`).join("")}(h.parameters)}`}const zn=/^[^\/()?;#]+/;function wn(h){const S=h.match(zn);return S?S[0]:""}const $n=/^[^\/()?;=#]+/,cr=/^[^=?&#]+/,Tr=/^[^&#]+/;class Rr{url;remaining;constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new In([],{}):new In([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let w={};return this.peekStartsWith("(")&&(w=this.parseParens(!1)),(S.length>0||Object.keys(E).length>0)&&(w[yn]=new In(S,E)),w}parseSegment(){const S=wn(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new i.buA(4009,!1);return this.capture(S),new dn(Tn(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const E=function sr(h){const S=h.match($n);return S?S[0]:""}(this.remaining);if(!E)return;this.capture(E);let w="";if(this.consumeOptional("=")){const $=wn(this.remaining);$&&(w=$,this.capture(w))}S[Tn(E)]=Tn(w)}parseQueryParam(S){const E=function nr(h){const S=h.match(cr);return S?S[0]:""}(this.remaining);if(!E)return;this.capture(E);let w="";if(this.consumeOptional("=")){const _e=function Ar(h){const S=h.match(Tr);return S?S[0]:""}(this.remaining);_e&&(w=_e,this.capture(w))}const $=Mn(E),Z=Mn(w);if(S.hasOwnProperty($)){let _e=S[$];Array.isArray(_e)||(_e=[_e],S[$]=_e),_e.push(Z)}else S[$]=Z}parseParens(S){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const w=wn(this.remaining),$=this.remaining[w.length];if("/"!==$&&")"!==$&&";"!==$)throw new i.buA(4010,!1);let Z;w.indexOf(":")>-1?(Z=w.slice(0,w.indexOf(":")),this.capture(Z),this.capture(":")):S&&(Z=yn);const _e=this.parseChildren();E[Z??yn]=1===Object.keys(_e).length&&_e[yn]?_e[yn]:new In([],_e),this.consumeOptional("//")}return E}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new i.buA(4011,!1)}}function Mr(h){return h.segments.length>0?new In([],{[yn]:h}):h}function rr(h){const S={};for(const[w,$]of Object.entries(h.children)){const Z=rr($);if(w===yn&&0===Z.segments.length&&Z.hasChildren())for(const[_e,Qe]of Object.entries(Z.children))S[_e]=Qe;else(Z.segments.length>0||Z.hasChildren())&&(S[w]=Z)}return function xr(h){if(1===h.numberOfChildren&&h.children[yn]){const S=h.children[yn];return new In(h.segments.concat(S.segments),S.children)}return h}(new In(h.segments,S))}function Dr(h){return h instanceof hr}function ao(h){let S;const $=Mr(function E(Z){const _e={};for(const ht of Z.children){const Vt=E(ht);_e[ht.outlet]=Vt}const Qe=new In(Z.url,_e);return Z===h&&(S=Qe),Qe}(h.root));return S??$}function $r(h,S,E,w){let $=h;for(;$.parent;)$=$.parent;if(0===S.length)return Re($,$,$,E,w);const Z=function _(h){if("string"==typeof h[0]&&1===h.length&&"/"===h[0])return new F(!0,0,h);let S=0,E=!1;const w=h.reduce(($,Z,_e)=>{if("object"==typeof Z&&null!=Z){if(Z.outlets){const Qe={};return Object.entries(Z.outlets).forEach(([ht,Vt])=>{Qe[ht]="string"==typeof Vt?Vt.split("/"):Vt}),[...$,{outlets:Qe}]}if(Z.segmentPath)return[...$,Z.segmentPath]}return"string"!=typeof Z?[...$,Z]:0===_e?(Z.split("/").forEach((Qe,ht)=>{0==ht&&"."===Qe||(0==ht&&""===Qe?E=!0:".."===Qe?S++:""!=Qe&&$.push(Qe))}),$):[...$,Z]},[]);return new F(E,S,w)}(S);if(Z.toRoot())return Re($,$,new In([],{}),E,w);const _e=function C(h,S,E){if(h.isAbsolute)return new k(S,!0,0);if(!E)return new k(S,!1,NaN);if(null===E.parent)return new k(E,!0,0);const w=Br(h.commands[0])?0:1;return function O(h,S,E){let w=h,$=S,Z=E;for(;Z>$;){if(Z-=$,w=w.parent,!w)throw new i.buA(4005,!1);$=w.segments.length}return new k(w,!1,$-Z)}(E,E.segments.length-1+w,h.numberOfDoubleDots)}(Z,$,h),Qe=_e.processChildren?ft(_e.segmentGroup,_e.index,Z.commands):Ue(_e.segmentGroup,_e.index,Z.commands);return Re($,_e.segmentGroup,Qe,E,w)}function Br(h){return"object"==typeof h&&null!=h&&!h.outlets&&!h.segmentPath}function jr(h){return"object"==typeof h&&null!=h&&h.outlets}function Re(h,S,E,w,$){let _e,Z={};w&&Object.entries(w).forEach(([ht,Vt])=>{Z[ht]=Array.isArray(Vt)?Vt.map(sn=>`${sn}`):`${Vt}`}),_e=h===S?E:ze(h,S,E);const Qe=Mr(rr(_e));return new hr(Qe,Z,$)}function ze(h,S,E){const w={};return Object.entries(h.children).forEach(([$,Z])=>{w[$]=Z===S?E:ze(Z,S,E)}),new In(h.segments,w)}class F{isAbsolute;numberOfDoubleDots;commands;constructor(S,E,w){if(this.isAbsolute=S,this.numberOfDoubleDots=E,this.commands=w,S&&w.length>0&&Br(w[0]))throw new i.buA(4003,!1);const $=w.find(jr);if($&&$!==kt(w))throw new i.buA(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class k{segmentGroup;processChildren;index;constructor(S,E,w){this.segmentGroup=S,this.processChildren=E,this.index=w}}function Ue(h,S,E){if(h??=new In([],{}),0===h.segments.length&&h.hasChildren())return ft(h,S,E);const w=function pt(h,S,E){let w=0,$=S;const Z={match:!1,pathIndex:0,commandIndex:0};for(;$<h.segments.length;){if(w>=E.length)return Z;const _e=h.segments[$],Qe=E[w];if(jr(Qe))break;const ht=`${Qe}`,Vt=w<E.length-1?E[w+1]:null;if($>0&&void 0===ht)break;if(ht&&Vt&&"object"==typeof Vt&&void 0===Vt.outlets){if(!En(ht,Vt,_e))return Z;w+=2}else{if(!En(ht,{},_e))return Z;w++}$++}return{match:!0,pathIndex:$,commandIndex:w}}(h,S,E),$=E.slice(w.commandIndex);if(w.match&&w.pathIndex<h.segments.length){const Z=new In(h.segments.slice(0,w.pathIndex),{});return Z.children[yn]=new In(h.segments.slice(w.pathIndex),h.children),ft(Z,0,$)}return w.match&&0===$.length?new In(h.segments,{}):w.match&&!h.hasChildren()?an(h,S,E):w.match?ft(h,0,$):an(h,S,E)}function ft(h,S,E){if(0===E.length)return new In(h.segments,{});{const w=function H(h){return jr(h[0])?h[0].outlets:{[yn]:h}}(E),$={};if(Object.keys(w).some(Z=>Z!==yn)&&h.children[yn]&&1===h.numberOfChildren&&0===h.children[yn].segments.length){const Z=ft(h.children[yn],S,E);return new In(h.segments,Z.children)}return Object.entries(w).forEach(([Z,_e])=>{"string"==typeof _e&&(_e=[_e]),null!==_e&&($[Z]=Ue(h.children[Z],S,_e))}),Object.entries(h.children).forEach(([Z,_e])=>{void 0===w[Z]&&($[Z]=_e)}),new In(h.segments,$)}}function an(h,S,E){const w=h.segments.slice(0,S);let $=0;for(;$<E.length;){const Z=E[$];if(jr(Z)){const ht=un(Z.outlets);return new In(w,ht)}if(0===$&&Br(E[0])){w.push(new dn(h.segments[S].path,Rn(E[0]))),$++;continue}const _e=jr(Z)?Z.outlets[yn]:`${Z}`,Qe=$<E.length-1?E[$+1]:null;_e&&Qe&&Br(Qe)?(w.push(new dn(_e,Rn(Qe))),$+=2):(w.push(new dn(_e,{})),$++)}return new In(w,{})}function un(h){const S={};return Object.entries(h).forEach(([E,w])=>{"string"==typeof w&&(w=[w]),null!==w&&(S[E]=an(new In([],{}),0,w))}),S}function Rn(h){const S={};return Object.entries(h).forEach(([E,w])=>S[E]=`${w}`),S}function En(h,S,E){return h==E.path&&Je(S,E.parameters)}const Pn="imperative";var Yt=function(h){return h[h.NavigationStart=0]="NavigationStart",h[h.NavigationEnd=1]="NavigationEnd",h[h.NavigationCancel=2]="NavigationCancel",h[h.NavigationError=3]="NavigationError",h[h.RoutesRecognized=4]="RoutesRecognized",h[h.ResolveStart=5]="ResolveStart",h[h.ResolveEnd=6]="ResolveEnd",h[h.GuardsCheckStart=7]="GuardsCheckStart",h[h.GuardsCheckEnd=8]="GuardsCheckEnd",h[h.RouteConfigLoadStart=9]="RouteConfigLoadStart",h[h.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",h[h.ChildActivationStart=11]="ChildActivationStart",h[h.ChildActivationEnd=12]="ChildActivationEnd",h[h.ActivationStart=13]="ActivationStart",h[h.ActivationEnd=14]="ActivationEnd",h[h.Scroll=15]="Scroll",h[h.NavigationSkipped=16]="NavigationSkipped",h}(Yt||{});class jn{id;url;constructor(S,E){this.id=S,this.url=E}}class Nr extends jn{type=Yt.NavigationStart;navigationTrigger;restoredState;constructor(S,E,w="imperative",$=null){super(S,E),this.navigationTrigger=w,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wr extends jn{urlAfterRedirects;type=Yt.NavigationEnd;constructor(S,E,w){super(S,E),this.urlAfterRedirects=w}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ur=function(h){return h[h.Redirect=0]="Redirect",h[h.SupersededByNewNavigation=1]="SupersededByNewNavigation",h[h.NoDataFromResolver=2]="NoDataFromResolver",h[h.GuardRejected=3]="GuardRejected",h[h.Aborted=4]="Aborted",h}(ur||{}),X=function(h){return h[h.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",h[h.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",h}(X||{});class Kn extends jn{reason;code;type=Yt.NavigationCancel;constructor(S,E,w,$){super(S,E),this.reason=w,this.code=$}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ee extends jn{reason;code;type=Yt.NavigationSkipped;constructor(S,E,w,$){super(S,E),this.reason=w,this.code=$}}class N extends jn{error;target;type=Yt.NavigationError;constructor(S,E,w,$){super(S,E),this.error=w,this.target=$}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Me extends jn{urlAfterRedirects;state;type=Yt.RoutesRecognized;constructor(S,E,w,$){super(S,E),this.urlAfterRedirects=w,this.state=$}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nn extends jn{urlAfterRedirects;state;type=Yt.GuardsCheckStart;constructor(S,E,w,$){super(S,E),this.urlAfterRedirects=w,this.state=$}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vr extends jn{urlAfterRedirects;state;shouldActivate;type=Yt.GuardsCheckEnd;constructor(S,E,w,$,Z){super(S,E),this.urlAfterRedirects=w,this.state=$,this.shouldActivate=Z}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zr extends jn{urlAfterRedirects;state;type=Yt.ResolveStart;constructor(S,E,w,$){super(S,E),this.urlAfterRedirects=w,this.state=$}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xr extends jn{urlAfterRedirects;state;type=Yt.ResolveEnd;constructor(S,E,w,$){super(S,E),this.urlAfterRedirects=w,this.state=$}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oo{route;type=Yt.RouteConfigLoadStart;constructor(S){this.route=S}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class So{route;type=Yt.RouteConfigLoadEnd;constructor(S){this.route=S}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class go{snapshot;type=Yt.ChildActivationStart;constructor(S){this.snapshot=S}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Co{snapshot;type=Yt.ChildActivationEnd;constructor(S){this.snapshot=S}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ti{snapshot;type=Yt.ActivationStart;constructor(S){this.snapshot=S}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ao{snapshot;type=Yt.ActivationEnd;constructor(S){this.snapshot=S}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ni{routerEvent;position;anchor;type=Yt.Scroll;constructor(S,E,w){this.routerEvent=S,this.position=E,this.anchor=w}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class wo{}class me{url;navigationBehaviorOptions;constructor(S,E){this.url=S,this.navigationBehaviorOptions=E}}function fe(h){switch(h.type){case Yt.ActivationEnd:return`ActivationEnd(path: '${h.snapshot.routeConfig?.path||""}')`;case Yt.ActivationStart:return`ActivationStart(path: '${h.snapshot.routeConfig?.path||""}')`;case Yt.ChildActivationEnd:return`ChildActivationEnd(path: '${h.snapshot.routeConfig?.path||""}')`;case Yt.ChildActivationStart:return`ChildActivationStart(path: '${h.snapshot.routeConfig?.path||""}')`;case Yt.GuardsCheckEnd:return`GuardsCheckEnd(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}', state: ${h.state}, shouldActivate: ${h.shouldActivate})`;case Yt.GuardsCheckStart:return`GuardsCheckStart(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}', state: ${h.state})`;case Yt.NavigationCancel:return`NavigationCancel(id: ${h.id}, url: '${h.url}')`;case Yt.NavigationSkipped:return`NavigationSkipped(id: ${h.id}, url: '${h.url}')`;case Yt.NavigationEnd:return`NavigationEnd(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}')`;case Yt.NavigationError:return`NavigationError(id: ${h.id}, url: '${h.url}', error: ${h.error})`;case Yt.NavigationStart:return`NavigationStart(id: ${h.id}, url: '${h.url}')`;case Yt.ResolveEnd:return`ResolveEnd(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}', state: ${h.state})`;case Yt.ResolveStart:return`ResolveStart(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}', state: ${h.state})`;case Yt.RouteConfigLoadEnd:return`RouteConfigLoadEnd(path: ${h.route.path})`;case Yt.RouteConfigLoadStart:return`RouteConfigLoadStart(path: ${h.route.path})`;case Yt.RoutesRecognized:return`RoutesRecognized(id: ${h.id}, url: '${h.url}', urlAfterRedirects: '${h.urlAfterRedirects}', state: ${h.state})`;case Yt.Scroll:return`Scroll(anchor: '${h.anchor}', position: '${h.position?`${h.position[0]}, ${h.position[1]}`:null}')`}}function _n(h){return h.outlet||yn}function Xn(h){if(!h)return null;if(h.routeConfig?._injector)return h.routeConfig._injector;for(let S=h.parent;S;S=S.parent){const E=S.routeConfig;if(E?._loadedInjector)return E._loadedInjector;if(E?._injector)return E._injector}return null}class xn{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Xn(this.route?.snapshot)??this.rootInjector}constructor(S){this.rootInjector=S,this.children=new Sr(this.rootInjector)}}let Sr=(()=>{class h{rootInjector;contexts=new Map;constructor(E){this.rootInjector=E}onChildOutletCreated(E,w){const $=this.getOrCreateContext(E);$.outlet=w,this.contexts.set(E,$)}onChildOutletDestroyed(E){const w=this.getContext(E);w&&(w.outlet=null,w.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let w=this.getContext(E);return w||(w=new xn(this.rootInjector),this.contexts.set(E,w)),w}getContext(E){return this.contexts.get(E)||null}static \u0275fac=function(w){return new(w||h)(i.KVO(i.uvJ))};static \u0275prov=i.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();class Cr{_root;constructor(S){this._root=S}get root(){return this._root.value}parent(S){const E=this.pathFromRoot(S);return E.length>1?E[E.length-2]:null}children(S){const E=pr(S,this._root);return E?E.children.map(w=>w.value):[]}firstChild(S){const E=pr(S,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(S){const E=Kr(S,this._root);return E.length<2?[]:E[E.length-2].children.map($=>$.value).filter($=>$!==S)}pathFromRoot(S){return Kr(S,this._root).map(E=>E.value)}}function pr(h,S){if(h===S.value)return S;for(const E of S.children){const w=pr(h,E);if(w)return w}return null}function Kr(h,S){if(h===S.value)return[S];for(const E of S.children){const w=Kr(h,E);if(w.length)return w.unshift(S),w}return[]}class Ir{value;children;constructor(S,E){this.value=S,this.children=E}toString(){return`TreeNode(${this.value})`}}function io(h){const S={};return h&&h.children.forEach(E=>S[E.value.outlet]=E),S}class Qr extends Cr{snapshot;constructor(S,E){super(S),this.snapshot=E,Te(this,S)}toString(){return this.snapshot.toString()}}function Eo(h){const S=function Ro(h){const Z=new W([],{},{},"",{},yn,h,null,{});return new ue("",new Ir(Z,[]))}(h),E=new Ae.t([new dn("",{})]),w=new Ae.t({}),$=new Ae.t({}),Z=new Ae.t({}),_e=new Ae.t(""),Qe=new mo(E,w,Z,_e,$,yn,h,S.root);return Qe.snapshot=S.root,new Qr(new Ir(Qe,[]),S)}class mo{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(S,E,w,$,Z,_e,Qe,ht){this.urlSubject=S,this.paramsSubject=E,this.queryParamsSubject=w,this.fragmentSubject=$,this.dataSubject=Z,this.outlet=_e,this.component=Qe,this._futureSnapshot=ht,this.title=this.dataSubject?.pipe((0,re.T)(Vt=>Vt[Er]))??(0,ie.of)(void 0),this.url=S,this.params=E,this.queryParams=w,this.fragment=$,this.data=Z}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,re.T)(S=>Jn(S))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,re.T)(S=>Jn(S))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function x(h,S,E="emptyOnly"){let w;const{routeConfig:$}=h;return w=null===S||"always"!==E&&""!==$?.path&&(S.component||S.routeConfig?.loadComponent)?{params:{...h.params},data:{...h.data},resolve:{...h.data,...h._resolvedData??{}}}:{params:{...S.params,...h.params},data:{...S.data,...h.data},resolve:{...h.data,...S.data,...$?.data,...h._resolvedData}},$&&yt($)&&(w.resolve[Er]=$.title),w}class W{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Er]}constructor(S,E,w,$,Z,_e,Qe,ht,Vt){this.url=S,this.params=E,this.queryParams=w,this.fragment=$,this.data=Z,this.outlet=_e,this.component=Qe,this.routeConfig=ht,this._resolve=Vt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jn(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(w=>w.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ue extends Cr{url;constructor(S,E){super(E),this.url=S,Te(this,E)}toString(){return it(this._root)}}function Te(h,S){S.value._routerState=h,S.children.forEach(E=>Te(h,E))}function it(h){const S=h.children.length>0?` { ${h.children.map(it).join(", ")} } `:"";return`${h.value}${S}`}function st(h){if(h.snapshot){const S=h.snapshot,E=h._futureSnapshot;h.snapshot=E,Je(S.queryParams,E.queryParams)||h.queryParamsSubject.next(E.queryParams),S.fragment!==E.fragment&&h.fragmentSubject.next(E.fragment),Je(S.params,E.params)||h.paramsSubject.next(E.params),function qe(h,S){if(h.length!==S.length)return!1;for(let E=0;E<h.length;++E)if(!Je(h[E],S[E]))return!1;return!0}(S.url,E.url)||h.urlSubject.next(E.url),Je(S.data,E.data)||h.dataSubject.next(E.data)}else h.snapshot=h._futureSnapshot,h.dataSubject.next(h._futureSnapshot.data)}function It(h,S){const E=Je(h.params,S.params)&&function Lr(h,S){return Ur(h,S)&&h.every((E,w)=>Je(E.parameters,S[w].parameters))}(h.url,S.url);return E&&!(!h.parent!=!S.parent)&&(!h.parent||It(h.parent,S.parent))}function yt(h){return"string"==typeof h.title||null===h.title}const Bt=new i.nKC("");let Dt=(()=>{class h{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=yn;activateEvents=new D.bkB;deactivateEvents=new D.bkB;attachEvents=new D.bkB;detachEvents=new D.bkB;routerOutletData=(0,Ce.hFB)();parentContexts=(0,i.WQX)(Sr);location=(0,i.WQX)(D.c1b);changeDetector=(0,i.WQX)(Ce.gRc);inputBinder=(0,i.WQX)(Ht,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(E){if(E.name){const{firstChange:w,previousValue:$}=E.name;if(w)return;this.isTrackedInParentContexts($)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed($)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(E){return this.parentContexts.getContext(E)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const E=this.parentContexts.getContext(this.name);E?.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new i.buA(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new i.buA(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new i.buA(4012,!1);this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,w){this.activated=E,this._activatedRoute=w,this.location.insert(E.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,w){if(this.isActivated)throw new i.buA(4013,!1);this._activatedRoute=E;const $=this.location,_e=E.snapshot.component,Qe=this.parentContexts.getOrCreateContext(this.name).children,ht=new Rt(E,Qe,$.injector,this.routerOutletData);this.activated=$.createComponent(_e,{index:$.length,injector:ht,environmentInjector:w}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(w){return new(w||h)};static \u0275dir=D.FsC({type:h,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[D.OA$]})}return h})();class Rt{route;childContexts;parent;outletData;constructor(S,E,w,$){this.route=S,this.childContexts=E,this.parent=w,this.outletData=$}get(S,E){return S===mo?this.route:S===Sr?this.childContexts:S===Bt?this.outletData:this.parent.get(S,E)}}const Ht=new i.nKC("");let qt=(()=>{class h{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(E){this.unsubscribeFromRouteData(E),this.subscribeToRouteData(E)}unsubscribeFromRouteData(E){this.outletDataSubscriptions.get(E)?.unsubscribe(),this.outletDataSubscriptions.delete(E)}subscribeToRouteData(E){const{activatedRoute:w}=E,$=(0,l.z)([w.queryParams,w.params,w.data]).pipe((0,Ke.n)(([Z,_e,Qe],ht)=>(Qe={...Z,..._e,...Qe},0===ht?(0,ie.of)(Qe):Promise.resolve(Qe)))).subscribe(Z=>{if(!E.isActivated||!E.activatedComponentRef||E.activatedRoute!==w||null===w.component)return void this.unsubscribeFromRouteData(E);const _e=(0,Ce.HJs)(w.component);if(_e)for(const{templateName:Qe}of _e.inputs)E.activatedComponentRef.setInput(Qe,Z[Qe]);else this.unsubscribeFromRouteData(E)});this.outletDataSubscriptions.set(E,$)}static \u0275fac=function(w){return new(w||h)};static \u0275prov=i.jDH({token:h,factory:h.\u0275fac})}return h})(),Sn=(()=>{class h{static \u0275fac=function(w){return new(w||h)};static \u0275cmp=D.VBU({type:h,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(w,$){1&w&&D.nrm(0,"router-outlet")},dependencies:[Dt],encapsulation:2})}return h})();function gn(h){const S=h.children&&h.children.map(gn),E=S?{...h,children:S}:{...h};return!E.component&&!E.loadComponent&&(S||E.loadChildren)&&E.outlet&&E.outlet!==yn&&(E.component=Sn),E}function Yn(h,S,E){if(E&&h.shouldReuseRoute(S.value,E.value.snapshot)){const w=E.value;w._futureSnapshot=S.value;const $=function Zr(h,S,E){return S.children.map(w=>{for(const $ of E.children)if(h.shouldReuseRoute(w.value,$.value.snapshot))return Yn(h,w,$);return Yn(h,w)})}(h,S,E);return new Ir(w,$)}{if(h.shouldAttach(S.value)){const Z=h.retrieve(S.value);if(null!==Z){const _e=Z.route;return _e.value._futureSnapshot=S.value,_e.children=S.children.map(Qe=>Yn(h,Qe)),_e}}const w=function vo(h){return new mo(new Ae.t(h.url),new Ae.t(h.params),new Ae.t(h.queryParams),new Ae.t(h.fragment),new Ae.t(h.data),h.outlet,h.component,h)}(S.value),$=S.children.map(Z=>Yn(h,Z));return new Ir(w,$)}}class Fr{redirectTo;navigationBehaviorOptions;constructor(S,E){this.redirectTo=S,this.navigationBehaviorOptions=E}}const j="ngNavigationCancelingError";function Q(h,S){const{redirectTo:E,navigationBehaviorOptions:w}=Dr(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,$=L(!1,ur.Redirect);return $.url=E,$.navigationBehaviorOptions=w,$}function L(h,S){const E=new Error(`NavigationCancelingError: ${h||""}`);return E[j]=!0,E.cancellationCode=S,E}function Xe(h){return!!h&&h[j]}class Hr{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(S,E,w,$,Z){this.routeReuseStrategy=S,this.futureState=E,this.currState=w,this.forwardEvent=$,this.inputBindingEnabled=Z}activate(S){const E=this.futureState._root,w=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,w,S),st(this.futureState.root),this.activateChildRoutes(E,w,S)}deactivateChildRoutes(S,E,w){const $=io(E);S.children.forEach(Z=>{const _e=Z.value.outlet;this.deactivateRoutes(Z,$[_e],w),delete $[_e]}),Object.values($).forEach(Z=>{this.deactivateRouteAndItsChildren(Z,w)})}deactivateRoutes(S,E,w){const $=S.value,Z=E?E.value:null;if($===Z)if($.component){const _e=w.getContext($.outlet);_e&&this.deactivateChildRoutes(S,E,_e.children)}else this.deactivateChildRoutes(S,E,w);else Z&&this.deactivateRouteAndItsChildren(E,w)}deactivateRouteAndItsChildren(S,E){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,E):this.deactivateRouteAndOutlet(S,E)}detachAndStoreRouteSubtree(S,E){const w=E.getContext(S.value.outlet),$=w&&S.value.component?w.children:E,Z=io(S);for(const _e of Object.values(Z))this.deactivateRouteAndItsChildren(_e,$);if(w&&w.outlet){const _e=w.outlet.detach(),Qe=w.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:_e,route:S,contexts:Qe})}}deactivateRouteAndOutlet(S,E){const w=E.getContext(S.value.outlet),$=w&&S.value.component?w.children:E,Z=io(S);for(const _e of Object.values(Z))this.deactivateRouteAndItsChildren(_e,$);w&&(w.outlet&&(w.outlet.deactivate(),w.children.onOutletDeactivated()),w.attachRef=null,w.route=null)}activateChildRoutes(S,E,w){const $=io(E);S.children.forEach(Z=>{this.activateRoutes(Z,$[Z.value.outlet],w),this.forwardEvent(new Ao(Z.value.snapshot))}),S.children.length&&this.forwardEvent(new Co(S.value.snapshot))}activateRoutes(S,E,w){const $=S.value,Z=E?E.value:null;if(st($),$===Z)if($.component){const _e=w.getOrCreateContext($.outlet);this.activateChildRoutes(S,E,_e.children)}else this.activateChildRoutes(S,E,w);else if($.component){const _e=w.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const Qe=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),_e.children.onOutletReAttached(Qe.contexts),_e.attachRef=Qe.componentRef,_e.route=Qe.route.value,_e.outlet&&_e.outlet.attach(Qe.componentRef,Qe.route.value),st(Qe.route.value),this.activateChildRoutes(S,null,_e.children)}else _e.attachRef=null,_e.route=$,_e.outlet&&_e.outlet.activateWith($,_e.injector),this.activateChildRoutes(S,null,_e.children)}else this.activateChildRoutes(S,null,w)}}class _o{path;route;constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class co{component;route;constructor(S,E){this.component=S,this.route=E}}function Io(h,S,E){const w=h._root;return ri(w,S?S._root:null,E,[w.value])}function Lo(h,S){const E=Symbol(),w=S.get(h,E);return w===E?"function"!=typeof h||(0,i.muV)(h)?S.get(h):h:w}function ri(h,S,E,w,$={canDeactivateChecks:[],canActivateChecks:[]}){const Z=io(S);return h.children.forEach(_e=>{(function is(h,S,E,w,$={canDeactivateChecks:[],canActivateChecks:[]}){const Z=h.value,_e=S?S.value:null,Qe=E?E.getContext(h.value.outlet):null;if(_e&&Z.routeConfig===_e.routeConfig){const ht=function Us(h,S,E){if("function"==typeof E)return E(h,S);switch(E){case"pathParamsChange":return!Ur(h.url,S.url);case"pathParamsOrQueryParamsChange":return!Ur(h.url,S.url)||!Je(h.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!It(h,S)||!Je(h.queryParams,S.queryParams);default:return!It(h,S)}}(_e,Z,Z.routeConfig.runGuardsAndResolvers);ht?$.canActivateChecks.push(new _o(w)):(Z.data=_e.data,Z._resolvedData=_e._resolvedData),ri(h,S,Z.component?Qe?Qe.children:null:E,w,$),ht&&Qe&&Qe.outlet&&Qe.outlet.isActivated&&$.canDeactivateChecks.push(new co(Qe.outlet.component,_e))}else _e&&Wo(S,Qe,$),$.canActivateChecks.push(new _o(w)),ri(h,null,Z.component?Qe?Qe.children:null:E,w,$)})(_e,Z[_e.value.outlet],E,w.concat([_e.value]),$),delete Z[_e.value.outlet]}),Object.entries(Z).forEach(([_e,Qe])=>Wo(Qe,E.getContext(_e),$)),$}function Wo(h,S,E){const w=io(h),$=h.value;Object.entries(w).forEach(([Z,_e])=>{Wo(_e,$.component?S?S.children.getContext(Z):null:S,E)}),E.canDeactivateChecks.push(new co($.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,$))}function Ko(h){return"function"==typeof h}function fi(h){return h instanceof m||"EmptyError"===h?.name}const xo=Symbol("INITIAL_VALUE");function hi(){return(0,Ke.n)(h=>(0,l.z)(h.map(S=>S.pipe((0,Fe.s)(1),function we(...h){const S=(0,M.lI)(h);return(0,ae.N)((E,w)=>{(S?R(h,E,S):R(h,E)).subscribe(w)})}(xo)))).pipe((0,re.T)(S=>{for(const E of S)if(!0!==E){if(E===xo)return xo;if(!1===E||pi(E))return E}return!0}),(0,Oe.p)(S=>S!==xo),(0,Fe.s)(1)))}function pi(h){return Dr(h)||h instanceof Fr}function oi(h){return(0,z.F)(tt(S=>{if("boolean"!=typeof S)throw Q(0,S)}),(0,re.T)(S=>!0===S))}class ii{segmentGroup;constructor(S){this.segmentGroup=S||null}}class mi extends Error{urlTree;constructor(S){super(),this.urlTree=S}}function Fo(h){return te(new ii(h))}function us(h){return te(new i.buA(4e3,!1))}class vi{urlSerializer;urlTree;constructor(S,E){this.urlSerializer=S,this.urlTree=E}lineralizeSegments(S,E){let w=[],$=E.root;for(;;){if(w=w.concat($.segments),0===$.numberOfChildren)return(0,ie.of)(w);if($.numberOfChildren>1||!$.children[yn])return us();$=$.children[yn]}}applyRedirectCommands(S,E,w,$,Z){return function Oi(h,S,E){if("string"==typeof h)return(0,ie.of)(h);const w=h,{queryParams:$,fragment:Z,routeConfig:_e,url:Qe,outlet:ht,params:Vt,data:sn,title:fn}=S;return jt((0,i.N4e)(E,()=>w({params:Vt,data:sn,queryParams:$,fragment:Z,routeConfig:_e,url:Qe,outlet:ht,title:fn})))}(E,$,Z).pipe((0,re.T)(_e=>{if(_e instanceof hr)throw new mi(_e);const Qe=this.applyRedirectCreateUrlTree(_e,this.urlSerializer.parse(_e),S,w);if("/"===_e[0])throw new mi(Qe);return Qe}))}applyRedirectCreateUrlTree(S,E,w,$){const Z=this.createSegmentGroup(S,E.root,w,$);return new hr(Z,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(S,E){const w={};return Object.entries(S).forEach(([$,Z])=>{if("string"==typeof Z&&":"===Z[0]){const Qe=Z.substring(1);w[$]=E[Qe]}else w[$]=Z}),w}createSegmentGroup(S,E,w,$){const Z=this.createSegments(S,E.segments,w,$);let _e={};return Object.entries(E.children).forEach(([Qe,ht])=>{_e[Qe]=this.createSegmentGroup(S,ht,w,$)}),new In(Z,_e)}createSegments(S,E,w,$){return E.map(Z=>":"===Z.path[0]?this.findPosParam(S,Z,$):this.findOrReturn(Z,w))}findPosParam(S,E,w){const $=w[E.path.substring(1)];if(!$)throw new i.buA(4001,!1);return $}findOrReturn(S,E){let w=0;for(const $ of E){if($.path===S.path)return E.splice(w),$;w++}return S}}const si={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _i(h,S,E,w,$){const Z=zo(h,S,E);return Z.matched?(w=function je(h,S){return h.providers&&!h._injector&&(h._injector=(0,D.Ol2)(h.providers,S,`Route: ${h.path}`)),h._injector??S}(S,w),function cs(h,S,E,w){const $=S.canMatch;if(!$||0===$.length)return(0,ie.of)(!0);const Z=$.map(_e=>{const Qe=Lo(_e,h);return jt(function as(h){return h&&Ko(h.canMatch)}(Qe)?Qe.canMatch(S,E):(0,i.N4e)(h,()=>Qe(S,E)))});return(0,ie.of)(Z).pipe(hi(),oi())}(w,S,E).pipe((0,re.T)(_e=>!0===_e?Z:{...si}))):(0,ie.of)(Z)}function zo(h,S,E){if("**"===S.path)return function yi(h){return{matched:!0,parameters:h.length>0?kt(h).parameters:{},consumedSegments:h,remainingSegments:[],positionalParamSegments:{}}}(E);if(""===S.path)return"full"===S.pathMatch&&(h.hasChildren()||E.length>0)?{...si}:{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const $=(S.matcher||vn)(E,h,S);if(!$)return{...si};const Z={};Object.entries($.posParams??{}).forEach(([Qe,ht])=>{Z[Qe]=ht.path});const _e=$.consumed.length>0?{...Z,...$.consumed[$.consumed.length-1].parameters}:Z;return{matched:!0,consumedSegments:$.consumed,remainingSegments:E.slice($.consumed.length),parameters:_e,positionalParamSegments:$.posParams??{}}}function Hn(h,S,E,w){return E.length>0&&function zi(h,S,E){return E.some(w=>Uo(h,S,w)&&_n(w)!==yn)}(h,E,w)?{segmentGroup:new In(S,ai(w,new In(E,h.children))),slicedSegments:[]}:0===E.length&&function js(h,S,E){return E.some(w=>Uo(h,S,w))}(h,E,w)?{segmentGroup:new In(h.segments,Ei(h,E,w,h.children)),slicedSegments:E}:{segmentGroup:new In(h.segments,h.children),slicedSegments:E}}function Ei(h,S,E,w){const $={};for(const Z of E)if(Uo(h,S,Z)&&!w[_n(Z)]){const _e=new In([],{});$[_n(Z)]=_e}return{...w,...$}}function ai(h,S){const E={};E[yn]=S;for(const w of h)if(""===w.path&&_n(w)!==yn){const $=new In([],{});E[_n(w)]=$}return E}function Uo(h,S,E){return(!(h.hasChildren()||S.length>0)||"full"!==E.pathMatch)&&""===E.path}class li{}class Hi{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(S,E,w,$,Z,_e,Qe){this.injector=S,this.configLoader=E,this.rootComponentType=w,this.config=$,this.urlTree=Z,this.paramsInheritanceStrategy=_e,this.urlSerializer=Qe,this.applyRedirects=new vi(this.urlSerializer,this.urlTree)}noMatchError(S){return new i.buA(4002,`'${S.segmentGroup}'`)}recognize(){const S=Hn(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(S).pipe((0,re.T)(({children:E,rootSnapshot:w})=>{const $=new Ir(w,E),Z=new ue("",$),_e=function Gr(h,S,E=null,w=null){return $r(ao(h),S,E,w)}(w,[],this.urlTree.queryParams,this.urlTree.fragment);return _e.queryParams=this.urlTree.queryParams,Z.url=this.urlSerializer.serialize(_e),{state:Z,tree:_e}}))}match(S){const E=new W([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),yn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,S,yn,E).pipe((0,re.T)(w=>({children:w,rootSnapshot:E})),(0,dt.W)(w=>{if(w instanceof mi)return this.urlTree=w.urlTree,this.match(w.urlTree.root);throw w instanceof ii?this.noMatchError(w):w}))}processSegmentGroup(S,E,w,$,Z){return 0===w.segments.length&&w.hasChildren()?this.processChildren(S,E,w,Z):this.processSegment(S,E,w,w.segments,$,!0,Z).pipe((0,re.T)(_e=>_e instanceof Ir?[_e]:[]))}processChildren(S,E,w,$){const Z=[];for(const _e of Object.keys(w.children))"primary"===_e?Z.unshift(_e):Z.push(_e);return(0,pe.H)(Z).pipe((0,He.H)(_e=>{const Qe=w.children[_e],ht=function Fn(h,S){const E=h.filter(w=>_n(w)===S);return E.push(...h.filter(w=>_n(w)!==S)),E}(E,_e);return this.processSegmentGroup(S,ht,Qe,_e,$)}),function vt(h,S){return(0,ae.N)(function St(h,S,E,w,$){return(Z,_e)=>{let Qe=E,ht=S,Vt=0;Z.subscribe((0,ve._)(_e,sn=>{const fn=Vt++;ht=Qe?h(ht,sn,fn):(Qe=!0,sn),w&&_e.next(ht)},$&&(()=>{Qe&&_e.next(ht),_e.complete()})))}}(h,S,arguments.length>=2,!0))}((_e,Qe)=>(_e.push(...Qe),_e)),Ve(null),function lt(h,S){const E=arguments.length>=2;return w=>w.pipe(h?(0,Oe.p)(($,Z)=>h($,Z,w)):ge.D,Ft(1),E?Ve(S):be(()=>new m))}(),(0,Ye.Z)(_e=>{if(null===_e)return Fo(w);const Qe=Vs(_e);return function _a(h){h.sort((S,E)=>S.value.outlet===yn?-1:E.value.outlet===yn?1:S.value.outlet.localeCompare(E.value.outlet))}(Qe),(0,ie.of)(Qe)}))}processSegment(S,E,w,$,Z,_e,Qe){return(0,pe.H)(E).pipe((0,He.H)(ht=>this.processSegmentAgainstRoute(ht._injector??S,E,ht,w,$,Z,_e,Qe).pipe((0,dt.W)(Vt=>{if(Vt instanceof ii)return(0,ie.of)(null);throw Vt}))),Ie(ht=>!!ht),(0,dt.W)(ht=>{if(fi(ht))return function ds(h,S,E){return 0===S.length&&!h.children[E]}(w,$,Z)?(0,ie.of)(new li):Fo(w);throw ht}))}processSegmentAgainstRoute(S,E,w,$,Z,_e,Qe,ht){return _n(w)===_e||_e!==yn&&Uo($,Z,w)?void 0===w.redirectTo?this.matchSegmentAgainstRoute(S,$,w,Z,_e,ht):this.allowRedirects&&Qe?this.expandSegmentAgainstRouteUsingRedirect(S,$,E,w,Z,_e,ht):Fo($):Fo($)}expandSegmentAgainstRouteUsingRedirect(S,E,w,$,Z,_e,Qe){const{matched:ht,parameters:Vt,consumedSegments:sn,positionalParamSegments:fn,remainingSegments:dr}=zo(E,$,Z);if(!ht)return Fo(E);"string"==typeof $.redirectTo&&"/"===$.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const so=new W(Z,Vt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Xi($),_n($),$.component??$._loadedComponent??null,$,Pi($)),ir=x(so,Qe,this.paramsInheritanceStrategy);return so.params=Object.freeze(ir.params),so.data=Object.freeze(ir.data),this.applyRedirects.applyRedirectCommands(sn,$.redirectTo,fn,so,S).pipe((0,Ke.n)(ho=>this.applyRedirects.lineralizeSegments($,ho)),(0,Ye.Z)(ho=>this.processSegment(S,w,E,ho.concat(dr),_e,!1,Qe)))}matchSegmentAgainstRoute(S,E,w,$,Z,_e){const Qe=_i(E,w,$,S);return"**"===w.path&&(E.children={}),Qe.pipe((0,Ke.n)(ht=>ht.matched?this.getChildConfig(S=w._injector??S,w,$).pipe((0,Ke.n)(({routes:Vt})=>{const sn=w._loadedInjector??S,{parameters:fn,consumedSegments:dr,remainingSegments:so}=ht,ir=new W(dr,fn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Xi(w),_n(w),w.component??w._loadedComponent??null,w,Pi(w)),Vr=x(ir,_e,this.paramsInheritanceStrategy);ir.params=Object.freeze(Vr.params),ir.data=Object.freeze(Vr.data);const{segmentGroup:ho,slicedSegments:To}=Hn(E,dr,so,Vt);if(0===To.length&&ho.hasChildren())return this.processChildren(sn,Vt,ho,ir).pipe((0,re.T)(wi=>new Ir(ir,wi)));if(0===Vt.length&&0===To.length)return(0,ie.of)(new Ir(ir,[]));const gs=_n(w)===Z;return this.processSegment(sn,Vt,ho,To,gs?yn:Z,!0,ir).pipe((0,re.T)(wi=>new Ir(ir,wi instanceof Ir?[wi]:[])))})):Fo(E)))}getChildConfig(S,E,w){return E.children?(0,ie.of)({routes:E.children,injector:S}):E.loadChildren?void 0!==E._loadedRoutes?(0,ie.of)({routes:E._loadedRoutes,injector:E._loadedInjector}):function Wi(h,S,E,w){const $=S.canLoad;if(void 0===$||0===$.length)return(0,ie.of)(!0);const Z=$.map(_e=>{const Qe=Lo(_e,h);return jt(function Qo(h){return h&&Ko(h.canLoad)}(Qe)?Qe.canLoad(S,E):(0,i.N4e)(h,()=>Qe(S,E)))});return(0,ie.of)(Z).pipe(hi(),oi())}(S,E,w).pipe((0,Ye.Z)($=>$?this.configLoader.loadChildren(S,E).pipe(tt(Z=>{E._loadedRoutes=Z.routes,E._loadedInjector=Z.injector})):function Ki(){return te(L(!1,ur.GuardRejected))}())):(0,ie.of)({routes:[],injector:S})}}function ya(h){const S=h.value.routeConfig;return S&&""===S.path}function Vs(h){const S=[],E=new Set;for(const w of h){if(!ya(w)){S.push(w);continue}const $=S.find(Z=>w.value.routeConfig===Z.value.routeConfig);void 0!==$?($.children.push(...w.children),E.add($)):S.push(w)}for(const w of E){const $=Vs(w.children);S.push(new Ir(w.value,$))}return S.filter(w=>!E.has(w))}function Xi(h){return h.data||{}}function Pi(h){return h.resolve||{}}function Jo(h){const S=h.children.map(E=>Jo(E)).flat();return[h,...S]}function Xo(h){return(0,Ke.n)(S=>{const E=h(S);return E?(0,pe.H)(E).pipe((0,re.T)(()=>S)):(0,ie.of)(S)})}let Qi=(()=>{class h{buildTitle(E){let w,$=E.root;for(;void 0!==$;)w=this.getResolvedTitleForRoute($)??w,$=$.children.find(Z=>Z.outlet===yn);return w}getResolvedTitleForRoute(E){return E.data[Er]}static \u0275fac=function(w){return new(w||h)};static \u0275prov=i.jDH({token:h,factory:()=>(0,i.WQX)(Ks),providedIn:"root"})}return h})(),Ks=(()=>{class h extends Qi{title;constructor(E){super(),this.title=E}updateTitle(E){const w=this.buildTitle(E);void 0!==w&&this.title.setTitle(w)}static \u0275fac=function(w){return new(w||h)(i.KVO(ct))};static \u0275prov=i.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();const ui=new i.nKC("",{providedIn:"root",factory:()=>({})}),Di=new i.nKC("");let eo=(()=>{class h{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=(0,i.WQX)(D.Ql9);loadComponent(E,w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,ie.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const $=jt((0,i.N4e)(E,()=>w.loadComponent())).pipe((0,re.T)(Ji),(0,Ke.n)(Si),tt(_e=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=_e}),(0,Ut.j)(()=>{this.componentLoaders.delete(w)})),Z=new he($,()=>new Le.B).pipe(Ne());return this.componentLoaders.set(w,Z),Z}loadChildren(E,w){if(this.childrenLoaders.get(w))return this.childrenLoaders.get(w);if(w._loadedRoutes)return(0,ie.of)({routes:w._loadedRoutes,injector:w._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(w);const Z=function hs(h,S,E,w){return jt((0,i.N4e)(E,()=>h.loadChildren())).pipe((0,re.T)(Ji),(0,Ke.n)(Si),(0,Ye.Z)($=>$ instanceof D.PYt||Array.isArray($)?(0,ie.of)($):(0,pe.H)(S.compileModuleAsync($))),(0,re.T)($=>{w&&w(h);let Z,_e,Qe=!1;return Array.isArray($)?(_e=$,!0):(Z=$.create(E).injector,_e=Z.get(Di,[],{optional:!0,self:!0}).flat()),{routes:_e.map(gn),injector:Z}}))}(w,this.compiler,E,this.onLoadEndListener).pipe((0,Ut.j)(()=>{this.childrenLoaders.delete(w)})),_e=new he(Z,()=>new Le.B).pipe(Ne());return this.childrenLoaders.set(w,_e),_e}static \u0275fac=function(w){return new(w||h)};static \u0275prov=i.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();function Ji(h){return function ps(h){return h&&"object"==typeof h&&"default"in h}(h)?h.default:h}function Si(h){return(0,ie.of)(h)}let Ri=(()=>{class h{static \u0275fac=function(w){return new(w||h)};static \u0275prov=i.jDH({token:h,factory:()=>(0,i.WQX)(zs),providedIn:"root"})}return h})(),zs=(()=>{class h{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,w){return E}static \u0275fac=function(w){return new(w||h)};static \u0275prov=i.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();const Ci=new i.nKC(""),xi=new i.nKC("");function Hs(h,S,E){const w=h.get(xi),$=h.get(i.qQL);if(!$.startViewTransition||w.skipNextTransition)return w.skipNextTransition=!1,new Promise(Vt=>setTimeout(Vt));let Z;const _e=new Promise(Vt=>{Z=Vt}),Qe=$.startViewTransition(()=>(Z(),function Yi(h){return new Promise(S=>{(0,D.mal)({read:()=>setTimeout(S)},{injector:h})})}(h)));Qe.ready.catch(Vt=>{});const{onViewTransitionCreated:ht}=w;return ht&&(0,i.N4e)(h,()=>ht({transition:Qe,from:S,to:E})),_e}const Yo=new i.nKC("");let Ai=(()=>{class h{currentNavigation=(0,i.vPA)(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Le.B;transitionAbortWithErrorSubject=new Le.B;configLoader=(0,i.WQX)(eo);environmentInjector=(0,i.WQX)(i.uvJ);destroyRef=(0,i.WQX)(i.abz);urlSerializer=(0,i.WQX)(nt);rootContexts=(0,i.WQX)(Sr);location=(0,i.WQX)(o.aZ);inputBindingEnabled=null!==(0,i.WQX)(Ht,{optional:!0});titleStrategy=(0,i.WQX)(Qi);options=(0,i.WQX)(ui,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=(0,i.WQX)(Ri);createViewTransition=(0,i.WQX)(Ci,{optional:!0});navigationErrorHandler=(0,i.WQX)(Yo,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>(0,ie.of)(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=$=>this.events.next(new So($)),this.configLoader.onLoadStartListener=$=>this.events.next(new oo($)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(E){const w=++this.navigationId;(0,De.O8)(()=>{this.transitions?.next({...E,extractedUrl:this.urlHandlingStrategy.extract(E.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:w})})}setupNavigations(E){return this.transitions=new Ae.t(null),this.transitions.pipe((0,Oe.p)(w=>null!==w),(0,Ke.n)(w=>{let $=!1;return(0,ie.of)(w).pipe((0,Ke.n)(Z=>{if(this.navigationId>w.id)return this.cancelNavigationTransition(w,"",ur.SupersededByNewNavigation),K.w;this.currentTransition=w,this.currentNavigation.set({id:Z.id,initialUrl:Z.rawUrl,extractedUrl:Z.extractedUrl,targetBrowserUrl:"string"==typeof Z.extras.browserUrl?this.urlSerializer.parse(Z.extras.browserUrl):Z.extras.browserUrl,trigger:Z.source,extras:Z.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null,abort:()=>Z.abortController.abort()});const _e=!E.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!_e&&"reload"!==(Z.extras.onSameUrlNavigation??E.onSameUrlNavigation))return this.events.next(new ee(Z.id,this.urlSerializer.serialize(Z.rawUrl),"",X.IgnoredSameUrlNavigation)),Z.resolve(!1),K.w;if(this.urlHandlingStrategy.shouldProcessUrl(Z.rawUrl))return(0,ie.of)(Z).pipe((0,Ke.n)(ht=>(this.events.next(new Nr(ht.id,this.urlSerializer.serialize(ht.extractedUrl),ht.source,ht.restoredState)),ht.id!==this.navigationId?K.w:Promise.resolve(ht))),function Go(h,S,E,w,$,Z){return(0,Ye.Z)(_e=>function ci(h,S,E,w,$,Z,_e="emptyOnly"){return new Hi(h,S,E,w,$,_e,Z).recognize()}(h,S,E,w,_e.extractedUrl,$,Z).pipe((0,re.T)(({state:Qe,tree:ht})=>({..._e,targetSnapshot:Qe,urlAfterRedirects:ht}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,E.config,this.urlSerializer,this.paramsInheritanceStrategy),tt(ht=>{w.targetSnapshot=ht.targetSnapshot,w.urlAfterRedirects=ht.urlAfterRedirects,this.currentNavigation.update(sn=>(sn.finalUrl=ht.urlAfterRedirects,sn));const Vt=new Me(ht.id,this.urlSerializer.serialize(ht.extractedUrl),this.urlSerializer.serialize(ht.urlAfterRedirects),ht.targetSnapshot);this.events.next(Vt)}));if(_e&&this.urlHandlingStrategy.shouldProcessUrl(Z.currentRawUrl)){const{id:ht,extractedUrl:Vt,source:sn,restoredState:fn,extras:dr}=Z,so=new Nr(ht,this.urlSerializer.serialize(Vt),sn,fn);this.events.next(so);const ir=Eo(this.rootComponentType).snapshot;return this.currentTransition=w={...Z,targetSnapshot:ir,urlAfterRedirects:Vt,extras:{...dr,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.update(Vr=>(Vr.finalUrl=Vt,Vr)),(0,ie.of)(w)}return this.events.next(new ee(Z.id,this.urlSerializer.serialize(Z.extractedUrl),"",X.IgnoredByUrlHandlingStrategy)),Z.resolve(!1),K.w}),tt(Z=>{const _e=new Nn(Z.id,this.urlSerializer.serialize(Z.extractedUrl),this.urlSerializer.serialize(Z.urlAfterRedirects),Z.targetSnapshot);this.events.next(_e)}),(0,re.T)(Z=>(this.currentTransition=w={...Z,guards:Io(Z.targetSnapshot,Z.currentSnapshot,this.rootContexts)},w)),function Bi(h,S){return(0,Ye.Z)(E=>{const{targetSnapshot:w,currentSnapshot:$,guards:{canActivateChecks:Z,canDeactivateChecks:_e}}=E;return 0===_e.length&&0===Z.length?(0,ie.of)({...E,guardsResult:!0}):function ji(h,S,E,w){return(0,pe.H)(h).pipe((0,Ye.Z)($=>function Vi(h,S,E,w,$){const Z=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!Z||0===Z.length)return(0,ie.of)(!0);const _e=Z.map(Qe=>{const ht=Xn(S)??$,Vt=Lo(Qe,ht);return jt(function ss(h){return h&&Ko(h.canDeactivate)}(Vt)?Vt.canDeactivate(h,S,E,w):(0,i.N4e)(ht,()=>Vt(h,S,E,w))).pipe(Ie())});return(0,ie.of)(_e).pipe(hi())}($.component,$.route,E,S,w)),Ie($=>!0!==$,!0))}(_e,w,$,h).pipe((0,Ye.Z)(Qe=>Qe&&function Mi(h){return"boolean"==typeof h}(Qe)?function ls(h,S,E,w){return(0,pe.H)(S).pipe((0,He.H)($=>R(function Bs(h,S){return null!==h&&S&&S(new go(h)),(0,ie.of)(!0)}($.route.parent,w),function No(h,S){return null!==h&&S&&S(new ti(h)),(0,ie.of)(!0)}($.route,w),function gi(h,S,E){const w=S[S.length-1],Z=S.slice(0,S.length-1).reverse().map(_e=>function qo(h){const S=h.routeConfig?h.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:h,guards:S}:null}(_e)).filter(_e=>null!==_e).map(_e=>ce(()=>{const Qe=_e.guards.map(ht=>{const Vt=Xn(_e.node)??E,sn=Lo(ht,Vt);return jt(function $s(h){return h&&Ko(h.canActivateChild)}(sn)?sn.canActivateChild(w,h):(0,i.N4e)(Vt,()=>sn(w,h))).pipe(Ie())});return(0,ie.of)(Qe).pipe(hi())}));return(0,ie.of)(Z).pipe(hi())}(h,$.path,E),function Jr(h,S,E){const w=S.routeConfig?S.routeConfig.canActivate:null;if(!w||0===w.length)return(0,ie.of)(!0);const $=w.map(Z=>ce(()=>{const _e=Xn(S)??E,Qe=Lo(Z,_e);return jt(function $i(h){return h&&Ko(h.canActivate)}(Qe)?Qe.canActivate(S,h):(0,i.N4e)(_e,()=>Qe(S,h))).pipe(Ie())}));return(0,ie.of)($).pipe(hi())}(h,$.route,E))),Ie($=>!0!==$,!0))}(w,Z,h,S):(0,ie.of)(Qe)),(0,re.T)(Qe=>({...E,guardsResult:Qe})))})}(this.environmentInjector,Z=>this.events.next(Z)),tt(Z=>{if(w.guardsResult=Z.guardsResult,Z.guardsResult&&"boolean"!=typeof Z.guardsResult)throw Q(0,Z.guardsResult);const _e=new vr(Z.id,this.urlSerializer.serialize(Z.extractedUrl),this.urlSerializer.serialize(Z.urlAfterRedirects),Z.targetSnapshot,!!Z.guardsResult);this.events.next(_e)}),(0,Oe.p)(Z=>!!Z.guardsResult||(this.cancelNavigationTransition(Z,"",ur.GuardRejected),!1)),Xo(Z=>{if(0!==Z.guards.canActivateChecks.length)return(0,ie.of)(Z).pipe(tt(_e=>{const Qe=new zr(_e.id,this.urlSerializer.serialize(_e.extractedUrl),this.urlSerializer.serialize(_e.urlAfterRedirects),_e.targetSnapshot);this.events.next(Qe)}),(0,Ke.n)(_e=>{let Qe=!1;return(0,ie.of)(_e).pipe(function qi(h,S){return(0,Ye.Z)(E=>{const{targetSnapshot:w,guards:{canActivateChecks:$}}=E;if(!$.length)return(0,ie.of)(E);const Z=new Set($.map(ht=>ht.route)),_e=new Set;for(const ht of Z)if(!_e.has(ht))for(const Vt of Jo(ht))_e.add(Vt);let Qe=0;return(0,pe.H)(_e).pipe((0,He.H)(ht=>Z.has(ht)?function bi(h,S,E,w){const $=h.routeConfig,Z=h._resolve;return void 0!==$?.title&&!yt($)&&(Z[Er]=$.title),ce(()=>(h.data=x(h,h.parent,E).resolve,function fs(h,S,E,w){const $=Ct(h);if(0===$.length)return(0,ie.of)({});const Z={};return(0,pe.H)($).pipe((0,Ye.Z)(_e=>function Ws(h,S,E,w){const $=Xn(S)??w,Z=Lo(h,$);return jt(Z.resolve?Z.resolve(S,E):(0,i.N4e)($,()=>Z(S,E)))}(h[_e],S,E,w).pipe(Ie(),tt(Qe=>{if(Qe instanceof Fr)throw Q(new Ze,Qe);Z[_e]=Qe}))),Ft(1),(0,re.T)(()=>Z),(0,dt.W)(_e=>fi(_e)?K.w:te(_e)))}(Z,h,S,w).pipe((0,re.T)(_e=>(h._resolvedData=_e,h.data={...h.data,..._e},null)))))}(ht,w,h,S):(ht.data=x(ht,ht.parent,h).resolve,(0,ie.of)(void 0))),tt(()=>Qe++),Ft(1),(0,Ye.Z)(ht=>Qe===_e.size?(0,ie.of)(E):K.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),tt({next:()=>Qe=!0,complete:()=>{Qe||this.cancelNavigationTransition(_e,"",ur.NoDataFromResolver)}}))}),tt(_e=>{const Qe=new Xr(_e.id,this.urlSerializer.serialize(_e.extractedUrl),this.urlSerializer.serialize(_e.urlAfterRedirects),_e.targetSnapshot);this.events.next(Qe)}))}),Xo(Z=>{const _e=Qe=>{const ht=[];if(Qe.routeConfig?.loadComponent){const Vt=Xn(Qe)??this.environmentInjector;ht.push(this.configLoader.loadComponent(Vt,Qe.routeConfig).pipe(tt(sn=>{Qe.component=sn}),(0,re.T)(()=>{})))}for(const Vt of Qe.children)ht.push(..._e(Vt));return ht};return(0,l.z)(_e(Z.targetSnapshot.root)).pipe(Ve(null),(0,Fe.s)(1))}),Xo(()=>this.afterPreactivation()),(0,Ke.n)(()=>{const{currentSnapshot:Z,targetSnapshot:_e}=w,Qe=this.createViewTransition?.(this.environmentInjector,Z.root,_e.root);return Qe?(0,pe.H)(Qe).pipe((0,re.T)(()=>w)):(0,ie.of)(w)}),(0,re.T)(Z=>{const _e=function ar(h,S,E){const w=Yn(h,S._root,E?E._root:void 0);return new Qr(w,S)}(E.routeReuseStrategy,Z.targetSnapshot,Z.currentRouterState);return this.currentTransition=w={...Z,targetRouterState:_e},this.currentNavigation.update(Qe=>(Qe.targetRouterState=_e,Qe)),w}),tt(()=>{this.events.next(new wo)}),((h,S,E,w)=>(0,re.T)($=>(new Hr(S,$.targetRouterState,$.currentRouterState,E,w).activate(h),$)))(this.rootContexts,E.routeReuseStrategy,Z=>this.events.next(Z),this.inputBindingEnabled),(0,Fe.s)(1),xt(new B.c(Z=>{const _e=w.abortController.signal,Qe=()=>Z.next();return _e.addEventListener("abort",Qe),()=>_e.removeEventListener("abort",Qe)}).pipe((0,Oe.p)(()=>!$&&!w.targetRouterState),tt(()=>{this.cancelNavigationTransition(w,w.abortController.signal.reason+"",ur.Aborted)}))),tt({next:Z=>{$=!0,this.lastSuccessfulNavigation=(0,De.O8)(this.currentNavigation),this.events.next(new wr(Z.id,this.urlSerializer.serialize(Z.extractedUrl),this.urlSerializer.serialize(Z.urlAfterRedirects))),this.titleStrategy?.updateTitle(Z.targetRouterState.snapshot),Z.resolve(!0)},complete:()=>{$=!0}}),xt(this.transitionAbortWithErrorSubject.pipe(tt(Z=>{throw Z}))),(0,Ut.j)(()=>{$||this.cancelNavigationTransition(w,"",ur.SupersededByNewNavigation),this.currentTransition?.id===w.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),(0,dt.W)(Z=>{if(this.destroyed)return w.resolve(!1),K.w;if($=!0,Xe(Z))this.events.next(new Kn(w.id,this.urlSerializer.serialize(w.extractedUrl),Z.message,Z.cancellationCode)),function de(h){return Xe(h)&&Dr(h.url)}(Z)?this.events.next(new me(Z.url,Z.navigationBehaviorOptions)):w.resolve(!1);else{const _e=new N(w.id,this.urlSerializer.serialize(w.extractedUrl),Z,w.targetSnapshot??void 0);try{const Qe=(0,i.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(_e));if(!(Qe instanceof Fr))throw this.events.next(_e),Z;{const{message:ht,cancellationCode:Vt}=Q(0,Qe);this.events.next(new Kn(w.id,this.urlSerializer.serialize(w.extractedUrl),ht,Vt)),this.events.next(new me(Qe.redirectTo,Qe.navigationBehaviorOptions))}}catch(Qe){this.options.resolveNavigationPromiseOnError?w.resolve(!1):w.reject(Qe)}}return K.w}))}))}cancelNavigationTransition(E,w,$){const Z=new Kn(E.id,this.urlSerializer.serialize(E.extractedUrl),w,$);this.events.next(Z),E.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const E=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),w=(0,De.O8)(this.currentNavigation),$=w?.targetBrowserUrl??w?.extractedUrl;return E.toString()!==$?.toString()&&!w?.extras.skipLocationChange}static \u0275fac=function(w){return new(w||h)};static \u0275prov=i.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();function $o(h){return h!==Pn}let f=(()=>{class h{static \u0275fac=function(w){return new(w||h)};static \u0275prov=i.jDH({token:h,factory:()=>(0,i.WQX)(c),providedIn:"root"})}return h})();class u{shouldDetach(S){return!1}store(S,E){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,E){return S.routeConfig===E.routeConfig}}let c=(()=>{class h extends u{static \u0275fac=(()=>{let E;return function($){return(E||(E=D.xGo(h)))($||h)}})();static \u0275prov=i.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})(),d=(()=>{class h{urlSerializer=(0,i.WQX)(nt);options=(0,i.WQX)(ui,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=(0,i.WQX)(o.aZ);urlHandlingStrategy=(0,i.WQX)(Ri);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new hr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:E,initialUrl:w,targetBrowserUrl:$}){const Z=void 0!==E?this.urlHandlingStrategy.merge(E,w):w,_e=$??Z;return _e instanceof hr?this.urlSerializer.serialize(_e):_e}commitTransition({targetRouterState:E,finalUrl:w,initialUrl:$}){w&&E?(this.currentUrlTree=w,this.rawUrlTree=this.urlHandlingStrategy.merge(w,$),this.routerState=E):this.rawUrlTree=$}routerState=Eo(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:E}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E??this.rawUrlTree)}static \u0275fac=function(w){return new(w||h)};static \u0275prov=i.jDH({token:h,factory:()=>(0,i.WQX)(I),providedIn:"root"})}return h})(),I=(()=>{class h extends d{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(E){return this.location.subscribe(w=>{"popstate"===w.type&&setTimeout(()=>{E(w.url,w.state,"popstate")})})}handleRouterEvent(E,w){E instanceof Nr?this.updateStateMemento():E instanceof ee?this.commitTransition(w):E instanceof Me?"eager"===this.urlUpdateStrategy&&(w.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(w),w)):E instanceof wo?(this.commitTransition(w),"deferred"===this.urlUpdateStrategy&&!w.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(w),w)):E instanceof Kn&&E.code!==ur.SupersededByNewNavigation&&E.code!==ur.Redirect?this.restoreHistory(w):E instanceof N?this.restoreHistory(w,!0):E instanceof wr&&(this.lastSuccessfulId=E.id,this.currentPageId=this.browserPageId)}setBrowserUrl(E,{extras:w,id:$}){const{replaceUrl:Z,state:_e}=w;if(this.location.isCurrentPathEqualTo(E)||Z){const Qe=this.browserPageId,ht={..._e,...this.generateNgRouterState($,Qe)};this.location.replaceState(E,"",ht)}else{const Qe={..._e,...this.generateNgRouterState($,this.browserPageId+1)};this.location.go(E,"",Qe)}}restoreHistory(E,w=!1){if("computed"===this.canceledNavigationResolution){const Z=this.currentPageId-this.browserPageId;0!==Z?this.location.historyGo(Z):this.getCurrentUrlTree()===E.finalUrl&&0===Z&&(this.resetInternalState(E),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(w&&this.resetInternalState(E),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(E,w){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:w}:{navigationId:E}}static \u0275fac=(()=>{let E;return function($){return(E||(E=D.xGo(h)))($||h)}})();static \u0275prov=i.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();function U(h,S){h.events.pipe((0,Oe.p)(E=>E instanceof wr||E instanceof Kn||E instanceof N||E instanceof ee),(0,re.T)(E=>E instanceof wr||E instanceof ee?0:E instanceof Kn&&(E.code===ur.Redirect||E.code===ur.SupersededByNewNavigation)?2:1),(0,Oe.p)(E=>2!==E),(0,Fe.s)(1)).subscribe(()=>{S()})}const G={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ne={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Se=(()=>{class h{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=(0,i.WQX)(D.C7A);stateManager=(0,i.WQX)(d);options=(0,i.WQX)(ui,{optional:!0})||{};pendingTasks=(0,i.WQX)(i.rev);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=(0,i.WQX)(Ai);urlSerializer=(0,i.WQX)(nt);location=(0,i.WQX)(o.aZ);urlHandlingStrategy=(0,i.WQX)(Ri);injector=(0,i.WQX)(i.uvJ);_events=new Le.B;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=(0,i.WQX)(f);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=(0,i.WQX)(Di,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!(0,i.WQX)(Ht,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:E=>{this.console.warn(E)}}),this.subscribeToNavigationEvents()}eventsSubscription=new le.yU;subscribeToNavigationEvents(){const E=this.navigationTransitions.events.subscribe(w=>{try{const $=this.navigationTransitions.currentTransition,Z=(0,De.O8)(this.navigationTransitions.currentNavigation);if(null!==$&&null!==Z)if(this.stateManager.handleRouterEvent(w,Z),w instanceof Kn&&w.code!==ur.Redirect&&w.code!==ur.SupersededByNewNavigation)this.navigated=!0;else if(w instanceof wr)this.navigated=!0;else if(w instanceof me){const _e=w.navigationBehaviorOptions,Qe=this.urlHandlingStrategy.merge(w.url,$.currentRawUrl),ht={browserUrl:$.extras.browserUrl,info:$.extras.info,skipLocationChange:$.extras.skipLocationChange,replaceUrl:$.extras.replaceUrl||"eager"===this.urlUpdateStrategy||$o($.source),..._e};this.scheduleNavigation(Qe,Pn,null,ht,{resolve:$.resolve,reject:$.reject,promise:$.promise})}(function Y(h){return!(h instanceof wo||h instanceof me)})(w)&&this._events.next(w)}catch($){this.navigationTransitions.transitionAbortWithErrorSubject.next($)}});this.eventsSubscription.add(E)}resetRootComponentType(E){this.routerState.root.component=E,this.navigationTransitions.rootComponentType=E}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pn,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((E,w,$)=>{this.navigateToSyncWithBrowser(E,$,w)})}navigateToSyncWithBrowser(E,w,$){const Z={replaceUrl:!0},_e=$?.navigationId?$:null;if($){const ht={...$};delete ht.navigationId,delete ht.\u0275routerPageId,0!==Object.keys(ht).length&&(Z.state=ht)}const Qe=this.parseUrl(E);this.scheduleNavigation(Qe,w,_e,Z).catch(ht=>{this.disposed||this.injector.get(i.ZTf)(ht)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return(0,De.O8)(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(E){this.config=E.map(gn),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(E,w={}){const{relativeTo:$,queryParams:Z,fragment:_e,queryParamsHandling:Qe,preserveFragment:ht}=w,Vt=ht?this.currentUrlTree.fragment:_e;let fn,sn=null;switch(Qe??this.options.defaultQueryParamsHandling){case"merge":sn={...this.currentUrlTree.queryParams,...Z};break;case"preserve":sn=this.currentUrlTree.queryParams;break;default:sn=Z||null}null!==sn&&(sn=this.removeEmptyProps(sn));try{fn=ao($?$.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof E[0]||"/"!==E[0][0])&&(E=[]),fn=this.currentUrlTree.root}return $r(fn,E,sn,Vt??null)}navigateByUrl(E,w={skipLocationChange:!1}){const $=Dr(E)?E:this.parseUrl(E),Z=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(Z,Pn,null,w)}navigate(E,w={skipLocationChange:!1}){return function Be(h){for(let S=0;S<h.length;S++)if(null==h[S])throw new i.buA(4008,!1)}(E),this.navigateByUrl(this.createUrlTree(E,w),w)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){try{return this.urlSerializer.parse(E)}catch{return this.console.warn((0,i.OsK)(4018,!1)),this.urlSerializer.parse("/")}}isActive(E,w){let $;if($=!0===w?{...G}:!1===w?{...ne}:w,Dr(E))return rn(this.currentUrlTree,E,$);const Z=this.parseUrl(E);return rn(this.currentUrlTree,Z,$)}removeEmptyProps(E){return Object.entries(E).reduce((w,[$,Z])=>(null!=Z&&(w[$]=Z),w),{})}scheduleNavigation(E,w,$,Z,_e){if(this.disposed)return Promise.resolve(!1);let Qe,ht,Vt;_e?(Qe=_e.resolve,ht=_e.reject,Vt=_e.promise):Vt=new Promise((fn,dr)=>{Qe=fn,ht=dr});const sn=this.pendingTasks.add();return U(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(sn))}),this.navigationTransitions.handleNavigationRequest({source:w,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:E,extras:Z,resolve:Qe,reject:ht,promise:Vt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Vt.catch(fn=>Promise.reject(fn))}static \u0275fac=function(w){return new(w||h)};static \u0275prov=i.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},5964($t,ot,b){"use strict";b.d(ot,{p:()=>D});var i=b(9974),o=b(4360);function D(Ce,De){return(0,i.N)((B,Pe)=>{let Ge=0;B.subscribe((0,o._)(Pe,pe=>Ce.call(De,pe,Ge++)&&Pe.next(pe)))})}},6011($t,ot,b){"use strict";b.r(ot),b.d(ot,{GESTURE_CONTROLLER:()=>i.G,createGesture:()=>pe});var i=b(8607);const o=(p,m,y,v)=>{const M=!!D(p)&&{capture:!1,passive:!!v.passive};let R,V;return p.__zone_symbol__addEventListener?(R="__zone_symbol__addEventListener",V="__zone_symbol__removeEventListener"):(R="addEventListener",V="removeEventListener"),p[R](m,y,M),()=>{p[V](m,y,M)}},D=p=>{if(void 0===Ce)try{const m=Object.defineProperty({},"passive",{get:()=>{Ce=!0}});p.addEventListener("optsTest",()=>{},m)}catch{Ce=!1}return!!Ce};let Ce;const Pe=p=>p instanceof Document?p:p.ownerDocument,pe=p=>{let m=!1,y=!1,v=!0,M=!1;const R=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},p),V=R.canStart,ce=R.onWillStart,z=R.onStart,te=R.onEnd,K=R.notCaptured,le=R.onMove,ae=R.threshold,ve=R.passive,Ne=R.blurOnStart,he={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Le=((p,m,y)=>{const v=y*(Math.PI/180),M="x"===p,R=Math.cos(v),V=m*m;let ce=0,z=0,te=!1,K=0;return{start(le,ae){ce=le,z=ae,K=0,te=!0},detect(le,ae){if(!te)return!1;const ve=le-ce,Ne=ae-z,he=ve*ve+Ne*Ne;if(he<V)return!1;const Le=Math.sqrt(he),re=(M?ve:Ne)/Le;return K=re>R?1:re<-R?-1:0,te=!1,!0},isGesture:()=>0!==K,getDirection:()=>K}})(R.direction,R.threshold,R.maxAngle),re=i.G.createGesture({name:p.gestureName,priority:p.gesturePriority,disableScroll:p.disableScroll}),we=()=>{m&&(M=!1,le&&le(he))},Oe=()=>!!re.capture()&&(m=!0,v=!1,he.startX=he.currentX,he.startY=he.currentY,he.startTime=he.currentTime,ce?ce(he).then(Ve):Ve(),!0),Ve=()=>{Ne&&(()=>{if(typeof document<"u"){const He=document.activeElement;He?.blur&&He.blur()}})(),z&&z(he),v=!0},be=()=>{m=!1,y=!1,M=!1,v=!0,re.release()},q=He=>{const tt=m,dt=v;if(be(),dt){if(ie(he,He),tt)return void(te&&te(he));K&&K(he)}},ge=((p,m,y,v,M)=>{let R,V,ce,z,te,K,le,ae=0;const ve=Ye=>{ae=Date.now()+2e3,m(Ye)&&(!V&&y&&(V=o(p,"touchmove",y,M)),ce||(ce=o(Ye.target,"touchend",he,M)),z||(z=o(Ye.target,"touchcancel",he,M)))},Ne=Ye=>{ae>Date.now()||m(Ye)&&(!K&&y&&(K=o(Pe(p),"mousemove",y,M)),le||(le=o(Pe(p),"mouseup",Le,M)))},he=Ye=>{re(),v&&v(Ye)},Le=Ye=>{Ke(),v&&v(Ye)},re=()=>{V&&V(),ce&&ce(),z&&z(),V=ce=z=void 0},Ke=()=>{K&&K(),le&&le(),K=le=void 0},Fe=()=>{re(),Ke()},we=(Ye=!0)=>{Ye?(R||(R=o(p,"touchstart",ve,M)),te||(te=o(p,"mousedown",Ne,M))):(R&&R(),te&&te(),R=te=void 0,Fe())};return{enable:we,stop:Fe,destroy:()=>{we(!1),v=y=m=void 0}}})(R.el,He=>{const tt=l(He);return!(y||!v||(Ae(He,he),he.startX=he.currentX,he.startY=he.currentY,he.startTime=he.currentTime=tt,he.velocityX=he.velocityY=he.deltaX=he.deltaY=0,he.event=He,V&&!1===V(he))||(re.release(),!re.start()))&&(y=!0,0===ae?Oe():(Le.start(he.startX,he.startY),!0))},He=>{m?!M&&v&&(M=!0,ie(he,He),requestAnimationFrame(we)):(ie(he,He),Le.detect(he.currentX,he.currentY)&&(!Le.isGesture()||!Oe())&&Ie())},q,{passive:ve}),Ie=()=>{be(),ge.stop(),K&&K(he)};return{enable(He=!0){He||(m&&q(void 0),be()),ge.enable(He)},destroy(){re.destroy(),ge.destroy()}}},ie=(p,m)=>{if(!m)return;const y=p.currentX,v=p.currentY,M=p.currentTime;Ae(m,p);const R=p.currentX,V=p.currentY,z=(p.currentTime=l(m))-M;if(z>0&&z<100){const K=(V-v)/z;p.velocityX=(R-y)/z*.7+.3*p.velocityX,p.velocityY=.7*K+.3*p.velocityY}p.deltaX=R-p.startX,p.deltaY=V-p.startY,p.event=m},Ae=(p,m)=>{let y=0,v=0;if(p){const M=p.changedTouches;if(M&&M.length>0){const R=M[0];y=R.clientX,v=R.clientY}else void 0!==p.pageX&&(y=p.pageX,v=p.pageY)}m.currentX=y,m.currentY=v},l=p=>p.timeStamp||Date.now()},6031($t,ot,b){"use strict";b.d(ot,{L:()=>o,a:()=>D,b:()=>Ce,c:()=>De,d:()=>B,g:()=>Fe}),b(7837);const o="ionViewWillEnter",D="ionViewDidEnter",Ce="ionViewWillLeave",De="ionViewDidLeave",B="ionViewWillUnload",Fe=Oe=>Oe.classList.contains("ion-page")?Oe:Oe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Oe},6118($t,ot,b){"use strict";b.d(ot,{C:()=>De,a:()=>D,d:()=>Ce});var i=b(467),o=b(4674);const D=function(){var B=(0,i.A)(function*(Pe,Ge,pe,ie,Ae,l){var p;if(Pe)return Pe.attachViewToDom(Ge,pe,Ae,ie);if(!(l||"string"==typeof pe||pe instanceof HTMLElement))throw new Error("framework delegate is missing");const m="string"==typeof pe?null===(p=Ge.ownerDocument)||void 0===p?void 0:p.createElement(pe):pe;return ie&&ie.forEach(y=>m.classList.add(y)),Ae&&Object.assign(m,Ae),Ge.appendChild(m),yield new Promise(y=>(0,o.c)(m,y)),m});return function(Ge,pe,ie,Ae,l,p){return B.apply(this,arguments)}}(),Ce=(B,Pe)=>{if(Pe){if(B)return B.removeViewFromDom(Pe.parentElement,Pe);Pe.remove()}return Promise.resolve()},De=()=>{let B,Pe;return{attachViewToDom:function(){var ie=(0,i.A)(function*(Ae,l,p={},m=[]){var y,v;let M;if(B=Ae,l){const V="string"==typeof l?null===(y=B.ownerDocument)||void 0===y?void 0:y.createElement(l):l;m.forEach(ce=>V.classList.add(ce)),Object.assign(V,p),B.appendChild(V),M=V,yield new Promise(ce=>(0,o.c)(V,ce))}else if(B.children.length>0&&("ION-MODAL"===B.tagName||"ION-POPOVER"===B.tagName)&&!(M=B.children[0]).classList.contains("ion-delegate-host")){const ce=null===(v=B.ownerDocument)||void 0===v?void 0:v.createElement("div");ce.classList.add("ion-delegate-host"),m.forEach(z=>ce.classList.add(z)),ce.append(...B.children),B.appendChild(ce),M=ce}const R=document.querySelector("ion-app")||document.body;return Pe=document.createComment("ionic teleport"),B.parentNode.insertBefore(Pe,B),R.appendChild(B),M??B});return function(l,p){return ie.apply(this,arguments)}}(),removeViewFromDom:()=>(B&&Pe&&(Pe.parentNode.insertBefore(B,Pe),Pe.remove()),Promise.resolve())}}},6120($t,ot,b){var i={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,2076,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,944,7428],"./ion-datetime_3.entry.js":[2885,944,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input-otp.entry.js":[7676,2076,7676],"./ion-input-password-toggle.entry.js":[6521,2076,6521],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,2076,5712],"./ion-picker-column-option.entry.js":[9013,9013],"./ion-picker-column.entry.js":[1459,2076,1459],"./ion-picker.entry.js":[6840,6840],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment-content.entry.js":[9073,9073],"./ion-segment-view.entry.js":[323,2076,323],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select-modal.entry.js":[770,770],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function o(D){if(!b.o(i,D))return Promise.resolve().then(()=>{var B=new Error("Cannot find module '"+D+"'");throw B.code="MODULE_NOT_FOUND",B});var Ce=i[D],De=Ce[0];return Promise.all(Ce.slice(1).map(b.e)).then(()=>b(De))}o.keys=()=>Object.keys(i),o.id=6120,$t.exports=o},6129($t,ot,b){"use strict";b.d(ot,{U:()=>i});const i={now:()=>(i.delegate||Date).now(),delegate:void 0}},6201($t,ot,b){"use strict";b.d(ot,{s:()=>Ge});var i=b(467),o=b(2084),D=b(2615),Ce=b(918),De=b(5029),B=b(4938),Pe=b(8863);let Ge=(()=>{var pe;class ie{constructor(l,p,m,y){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=y,this.REPORTS_BUCKET="disturbances",this.IMAGES_BUCKET="disturbances-images",this.DRAFT_FILE="disturbances_draft_current.json",this.PENDING_QUEUE_FILE="disturbances_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} DisturbancesSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} DisturbancesSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(v=>console.error("\u274c DisturbancesSyncService: processPendingQueue failed:",v))}),setTimeout(()=>{console.log("\u{1f680} DisturbancesSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(v=>console.error("\u274c DisturbancesSyncService: Initial queue check failed:",v))},3e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 DisturbancesSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(v=>console.error("\u274c DisturbancesSyncService: Periodic queue check failed:",v))},3e5),console.log("\u2705 DisturbancesSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}getZoneName(l){return l?`Zone ${l}`:""}getQuadDisplay(l){if(!l)return"";const p=l.match(/\d+/);return p?`Quad ${p[0]}`:""}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Disturbances${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];return l?.harvestBiodiversity&&m.push("harvesting"),l?.clearingMangroves&&m.push(`clearing ${l.clearingMangroves}`),l?.ongoingConstruction&&m.push("construction"),l?.fallenTree&&m.push("fallen tree"),l?.bankErosion&&m.push("erosion"),l?.accretion&&m.push("accretion"),l?.diseases&&m.push("diseases"),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"disturbances"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",y=l?.quadNumber||"";let v=`disturbances_draft_${p}`;return m&&(v+=`_zone${m}`),y&&(v+=`_quad${y}`),`${v}.json`}dataUrlToBlob(l){return(0,i.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,i.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,i.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("DisturbancesSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=l.reportId||p.generateReportId(),v={reportId:y,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos,status:l.status||{incomplete:!0,sent:!1,pending:!1}},M=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(M,v);const R=yield p.sharedDataService.readJsonFile(M);if(!R||R.reportId!==v.reportId)throw new Error("DisturbancesSyncService: draft verification failed");const V=yield p.storage.getUser(),ce=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(V?.username||"unknown","disturbances",y,ce)})()}loadDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,i.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(v=>v.startsWith("disturbances_draft_")),y=[];for(const v of m)try{const M=yield l.sharedDataService.readJsonFile(v);if(M){const R=l.getLocationLabelFromFilename(v,M.form);y.push({draft:M,locationLabel:R})}}catch(M){console.warn("DisturbancesSyncService: Failed to read draft file",v,M)}return y})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,i.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,i.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:y}of m)p.push({report:y,status:"draft"});try{const v=(yield l.sharedDataService.listFiles()).filter(M=>{if(!M.startsWith("Disturbances")||M.includes("_report_"))return!1;const R=M.replace(".json","");return/^Disturbances\d{8}_\d{6}$/.test(R)&&!M.includes("_backup")&&!M.includes("_draft")&&!M.includes("_queue")});for(const M of v)try{const R=yield l.sharedDataService.readJsonFile(M);R&&p.push({report:R,status:R.status.sent?"submitted":"pending"})}catch(R){console.warn("DisturbancesSyncService: Failed to read report file",M,R)}}catch(y){console.error("DisturbancesSyncService: Failed to list files:",y)}return p.sort((y,v)=>{const M=new Date(y.report.updatedAt||y.report.createdAt).getTime();return new Date(v.report.updatedAt||v.report.createdAt).getTime()-M}),p})()}submitFinal(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=!0===l.isEditMode,v=l.existingReportId||p.generateReportId();let M=m;try{const ae=yield p.sharedDataService.readJsonFile(`${v}.json`);ae?.createdAt&&(M=ae.createdAt)}catch{}const R={reportId:v,createdAt:M,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:{harvest:l.photos.harvest||null,clearing:l.photos.clearing||null,construction:l.photos.construction||null,fallenTree:l.photos.fallenTree||null,erosion:l.photos.erosion||null,accretion:l.photos.accretion||null,diseases:l.photos.diseases||null},status:{incomplete:!1,sent:!1,pending:!1}};y&&(R.editedAt=m);const V=`${v}.json`;yield p.sharedDataService.writeJsonFile(V,R);const ce=yield p.sharedDataService.readJsonFile(V);if(!ce||ce.reportId!==v)throw new Error("DisturbancesSyncService: local report verification failed");const z=yield p.storage.getUser(),te=z?z.organization||z.username:null;let K;if(l.originalSubmittedBy&&te&&l.originalSubmittedBy!==te?K=`${l.originalSubmittedBy}, ${te}`:te&&(K=te),R.submittedBy=K,yield p.sharedDataService.writeJsonFile(V,R),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:v,localReportFile:V}),{reportId:v,queued:!0};try{yield p.uploadReportAndImages(R,l.originalSubmittedBy),R.status.sent=!0,R.status.pending=!1,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.clearDraft();const ve=(yield p.storage.getUser())?.username||"unknown",Ne=p.getFormSummary(l.formValue),he=R.submittedBy;return y?p.monitoringLog.recordFormEdited(ve,"disturbances",v,!1,Ne,he):p.monitoringLog.recordFormSubmitted(ve,"disturbances",v,!1,Ne,he),{reportId:v,queued:!1}}catch(ae){const ve=String(ae?.message?ae.message:ae);R.status.pending=!0,R.status.lastError=ve,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.enqueuePending({reportId:v,localReportFile:V});const he=(yield p.storage.getUser())?.username||"unknown",Le=p.getFormSummary(l.formValue),re=R.submittedBy;return y?p.monitoringLog.recordFormEdited(he,"disturbances",v,!0,Le,re):p.monitoringLog.recordFormSubmitted(he,"disturbances",v,!0,Le,re),{reportId:v,queued:!0}}})()}enqueuePending(l){var p=this;return(0,i.A)(function*(){console.log("\u{1f4dd} DisturbancesSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(v=>v.reportId===l.reportId)?console.log("\u26a0\ufe0f DisturbancesSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 DisturbancesSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} DisturbancesSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,i.A)(function*(){if(console.log("\u{1f504} DisturbancesSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f DisturbancesSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f DisturbancesSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} DisturbancesSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 DisturbancesSyncService: Queue is empty, nothing to process");const m=[];for(const y of p.items){console.log("\u{1f50d} DisturbancesSyncService: Processing item:",y.reportId,"(attempt",y.attempts+1,")");try{const v=yield l.sharedDataService.readJsonFile(y.localReportFile);if(!v){console.error("\u274c DisturbancesSyncService: Local report file missing for",y.reportId),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(v),console.log("\u2705 DisturbancesSyncService: Upload succeeded for",y.reportId),v.status.sent=!0,v.status.pending=!1,v.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(y.localReportFile,v),console.log("\u{1f4be} DisturbancesSyncService: Marked report as sent")}catch(v){console.error("\u274c DisturbancesSyncService: Upload failed for",y.reportId,":",v),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} DisturbancesSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} DisturbancesSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,i.A)(function*(){console.log("\u{1f4e4} DisturbancesSyncService: Starting upload for report",l.reportId);const y=m.getClient(),v={};l.photos.harvest&&(v.harvest=yield m.uploadImageDataUrl(`${l.reportId}/harvest.jpg`,l.photos.harvest)),l.photos.clearing&&(v.clearing=yield m.uploadImageDataUrl(`${l.reportId}/clearing.jpg`,l.photos.clearing)),l.photos.construction&&(v.construction=yield m.uploadImageDataUrl(`${l.reportId}/construction.jpg`,l.photos.construction)),l.photos.fallenTree&&(v.fallenTree=yield m.uploadImageDataUrl(`${l.reportId}/fallenTree.jpg`,l.photos.fallenTree)),l.photos.erosion&&(v.erosion=yield m.uploadImageDataUrl(`${l.reportId}/erosion.jpg`,l.photos.erosion)),l.photos.accretion&&(v.accretion=yield m.uploadImageDataUrl(`${l.reportId}/accretion.jpg`,l.photos.accretion)),l.photos.diseases&&(v.diseases=yield m.uploadImageDataUrl(`${l.reportId}/diseases.jpg`,l.photos.diseases));const M=JSON.parse(JSON.stringify(l));M.photos=v,M.status={incomplete:!1,sent:!0,pending:!1};const R=`${l.reportId}.json`,V=new Blob([JSON.stringify(M)],{type:"application/json"}),{error:ce}=yield y.storage.from(m.REPORTS_BUCKET).upload(R,V,{contentType:"application/json",upsert:!0});if(ce)throw console.error("\u274c DisturbancesSyncService: JSON upload error:",ce),ce;console.log("\u2705 DisturbancesSyncService: Successfully uploaded JSON to",R);let z=l.submittedBy||null;if(!z){const le=yield m.storage.getUser();z=le?le.organization||le.username:null}const te={report_id:l.reportId,submitted_by:z,json_path:R,location:l.form.location||null,report_date:l.form.reportDate||null,zone_number:m.getZoneName(l.form.zoneNumber)||null,quad_number:m.getQuadDisplay(l.form.quadNumber)||null,requires_urgent_action:l.form.requiresUrgentAction||!1,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:K}=yield y.from("disturbances_reports").upsert(te,{onConflict:"report_id"});if(K)throw console.error("\u274c DisturbancesSyncService: Database upsert error:",K),K;console.log("\u2705 DisturbancesSyncService: Successfully upserted into disturbances_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,i.A)(function*(){const y=m.getClient(),v=yield m.dataUrlToBlob(p),{error:M}=yield y.storage.from(m.IMAGES_BUCKET).upload(l,v,{contentType:v.type||"image/jpeg",upsert:!0});if(M)throw console.error("\u274c DisturbancesSyncService: Image upload error for",l,":",M),M;return console.log("\u2705 DisturbancesSyncService: Successfully uploaded image to",l),l})()}static#e=pe=()=>(this.\u0275fac=function(p){return new(p||ie)(D.KVO(Ce.H),D.KVO(De.L),D.KVO(B.w),D.KVO(Pe.u))},this.\u0275prov=D.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return pe(),ie})()},6354($t,ot,b){"use strict";b.d(ot,{T:()=>D});var i=b(9974),o=b(4360);function D(Ce,De){return(0,i.N)((B,Pe)=>{let Ge=0;B.subscribe((0,o._)(Pe,pe=>{Pe.next(Ce.call(De,pe,Ge++))}))})}},6358($t,ot,b){"use strict";b.d(ot,{T:()=>Ge});var i=b(467),o=b(2084),D=b(2615),Ce=b(918),De=b(5029),B=b(4938),Pe=b(8863);let Ge=(()=>{var pe;class ie{constructor(l,p,m,y){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=y,this.REPORTS_BUCKET="restoration",this.IMAGES_BUCKET="restoration-images",this.DRAFT_FILE="restoration_draft_current.json",this.PENDING_QUEUE_FILE="restoration_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} RestorationSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} RestorationSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(v=>console.error("\u274c RestorationSyncService: processPendingQueue failed:",v))}),setTimeout(()=>{console.log("\u{1f680} RestorationSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(v=>console.error("\u274c RestorationSyncService: Initial queue check failed:",v))},7e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 RestorationSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(v=>console.error("\u274c RestorationSyncService: Periodic queue check failed:",v))},3e5),console.log("\u2705 RestorationSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Restoration${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];(l?.site||l?.location)&&p.push(l.site||l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];if(l?.seedCollection&&Array.isArray(l.seedCollection)){const y=l.seedCollection.reduce((v,M)=>v+(M||0),0);y>0&&m.push(`${y} collected`)}if(l?.seedsSowed&&Array.isArray(l.seedsSowed)){const y=l.seedsSowed.reduce((v,M)=>v+(M||0),0);y>0&&m.push(`${y} sowed`)}if(l?.outplanting&&Array.isArray(l.outplanting)){const y=l.outplanting.reduce((v,M)=>v+(M||0),0);y>0&&m.push(`${y} outplanted`)}return l?.averageGrowth>0&&m.push(`Growth: ${l.averageGrowth}cm`),l?.deadTrees>0&&m.push(`${l.deadTrees} dead`),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"restoration"}getDraftKey(l){const p=(l?.site||l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",y=l?.quadNumber||"";let v=`restoration_draft_${p}`;return m&&(v+=`_zone${m}`),y&&(v+=`_quad${y}`),`${v}.json`}dataUrlToBlob(l){return(0,i.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,i.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,i.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("RestorationSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=l.reportId||p.generateReportId(),v={reportId:y,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos||[],status:l.status||{incomplete:!0,sent:!1,pending:!1}},M=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(M,v);const R=yield p.sharedDataService.readJsonFile(M);if(!R||R.reportId!==v.reportId)throw new Error("RestorationSyncService: draft verification failed");const V=yield p.storage.getUser(),ce=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(V?.username||"unknown","restoration",y,ce)})()}loadDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,i.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(v=>v.startsWith("restoration_draft_")),y=[];for(const v of m)try{const M=yield l.sharedDataService.readJsonFile(v);if(M){const R=l.getLocationLabelFromFilename(v,M.form);y.push({draft:M,locationLabel:R})}}catch(M){console.warn("RestorationSyncService: Failed to read draft file",v,M)}return y})()}getLocationLabelFromFilename(l,p){return`${p?.site||p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,i.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,i.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:y}of m)p.push({report:y,status:"draft"});try{const v=(yield l.sharedDataService.listFiles()).filter(M=>{if(!M.startsWith("Restoration")||M.includes("_report_"))return!1;const R=M.replace(".json","");return/^Restoration\d{8}_\d{6}$/.test(R)&&!M.includes("_backup")&&!M.includes("_draft")&&!M.includes("_queue")});for(const M of v)try{const R=yield l.sharedDataService.readJsonFile(M);R&&p.push({report:R,status:R.status.sent?"submitted":"pending"})}catch(R){console.warn("RestorationSyncService: Failed to read report file",M,R)}}catch(y){console.error("RestorationSyncService: Failed to list files:",y)}return p.sort((y,v)=>{const M=new Date(y.report.updatedAt||y.report.createdAt).getTime();return new Date(v.report.updatedAt||v.report.createdAt).getTime()-M}),p})()}submitFinal(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=!0===l.isEditMode,v=l.existingReportId||p.generateReportId();let M=m;try{const ae=yield p.sharedDataService.readJsonFile(`${v}.json`);ae?.createdAt&&(M=ae.createdAt)}catch{}const R={reportId:v,createdAt:M,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:[...l.photos||[]],status:{incomplete:!1,sent:!1,pending:!1},project_key:l.project_key,sequence_number:l.sequence_number||1,parent_report_id:l.parent_report_id,is_ongoing:void 0===l.is_ongoing||l.is_ongoing};y&&(R.editedAt=m);const V=`${v}.json`;yield p.sharedDataService.writeJsonFile(V,R);const ce=yield p.sharedDataService.readJsonFile(V);if(!ce||ce.reportId!==v)throw new Error("RestorationSyncService: local report verification failed");const z=yield p.storage.getUser(),te=z?z.organization||z.username:null;let K;if(l.originalSubmittedBy&&te&&l.originalSubmittedBy!==te?K=`${l.originalSubmittedBy}, ${te}`:te&&(K=te),R.submittedBy=K,yield p.sharedDataService.writeJsonFile(V,R),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:v,localReportFile:V}),{reportId:v,queued:!0};try{yield p.uploadReportAndImages(R,l.originalSubmittedBy),R.status.sent=!0,R.status.pending=!1,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.clearDraft();const ve=(yield p.storage.getUser())?.username||"unknown",Ne=p.getFormSummary(l.formValue),he=R.submittedBy;return y?p.monitoringLog.recordFormEdited(ve,"restoration",v,!1,Ne,he):p.monitoringLog.recordFormSubmitted(ve,"restoration",v,!1,Ne,he),{reportId:v,queued:!1}}catch(ae){const ve=String(ae?.message?ae.message:ae);R.status.pending=!0,R.status.lastError=ve,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.enqueuePending({reportId:v,localReportFile:V});const he=(yield p.storage.getUser())?.username||"unknown",Le=p.getFormSummary(l.formValue),re=R.submittedBy;return y?p.monitoringLog.recordFormEdited(he,"restoration",v,!0,Le,re):p.monitoringLog.recordFormSubmitted(he,"restoration",v,!0,Le,re),{reportId:v,queued:!0}}})()}enqueuePending(l){var p=this;return(0,i.A)(function*(){console.log("\u{1f4dd} RestorationSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(v=>v.reportId===l.reportId)?console.log("\u26a0\ufe0f RestorationSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 RestorationSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} RestorationSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,i.A)(function*(){if(console.log("\u{1f504} RestorationSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f RestorationSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f RestorationSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} RestorationSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 RestorationSyncService: Queue is empty, nothing to process");const m=[];for(const y of p.items){console.log("\u{1f50d} RestorationSyncService: Processing item:",y.reportId,"(attempt",y.attempts+1,")");try{const v=yield l.sharedDataService.readJsonFile(y.localReportFile);if(!v){console.error("\u274c RestorationSyncService: Local report file missing for",y.reportId),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(v),console.log("\u2705 RestorationSyncService: Upload succeeded for",y.reportId),v.status.sent=!0,v.status.pending=!1,v.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(y.localReportFile,v),console.log("\u{1f4be} RestorationSyncService: Marked report as sent")}catch(v){console.error("\u274c RestorationSyncService: Upload failed for",y.reportId,":",v),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} RestorationSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} RestorationSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,i.A)(function*(){console.log("\u{1f4e4} RestorationSyncService: Starting upload for report",l.reportId);const y=m.getClient(),v=[];for(let le=0;le<(l.photos||[]).length;le++){const ae=l.photos[le],ve=yield m.uploadImageDataUrl(`${l.reportId}/photo_${le+1}.jpg`,ae);v.push(ve)}const M=JSON.parse(JSON.stringify(l));M.photos=v,M.status={incomplete:!1,sent:!0,pending:!1};const R=`${l.reportId}.json`,V=new Blob([JSON.stringify(M)],{type:"application/json"}),{error:ce}=yield y.storage.from(m.REPORTS_BUCKET).upload(R,V,{contentType:"application/json",upsert:!0});if(ce)throw console.error("\u274c RestorationSyncService: JSON upload error:",ce),ce;console.log("\u2705 RestorationSyncService: Successfully uploaded JSON to",R);let z=l.submittedBy||null;if(!z){const le=yield m.storage.getUser();z=le?le.organization||le.username:null}const te={report_id:l.reportId,submitted_by:z,json_path:R,location:l.form.site||null,restoration_date:l.form.date||null,zone_number:l.form.zoneNumber?`Zone ${l.form.zoneNumber}`:null,quad_number:l.form.quadNumber?`Quad ${l.form.quadNumber.replace(/\D/g,"")}`:null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null,project_key:l.project_key||null,sequence_number:l.sequence_number||1,parent_report_id:l.parent_report_id||null,is_ongoing:void 0===l.is_ongoing||l.is_ongoing},{error:K}=yield y.from("restoration_reports").upsert(te,{onConflict:"report_id"});if(K)throw console.error("\u274c RestorationSyncService: Database upsert error:",K),K;console.log("\u2705 RestorationSyncService: Successfully upserted into restoration_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,i.A)(function*(){const y=m.getClient(),v=yield m.dataUrlToBlob(p),{error:M}=yield y.storage.from(m.IMAGES_BUCKET).upload(l,v,{contentType:v.type||"image/jpeg",upsert:!0});if(M)throw console.error("\u274c RestorationSyncService: Image upload error for",l,":",M),M;return console.log("\u2705 RestorationSyncService: Successfully uploaded image to",l),l})()}static#e=pe=()=>(this.\u0275fac=function(p){return new(p||ie)(D.KVO(Ce.H),D.KVO(De.L),D.KVO(B.w),D.KVO(Pe.u))},this.\u0275prov=D.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return pe(),ie})()},6365($t,ot,b){"use strict";b.d(ot,{U:()=>D});var i=b(1397),o=b(3669);function D(Ce=1/0){return(0,i.Z)(o.D,Ce)}},6450($t,ot,b){"use strict";b.d(ot,{I:()=>Ce});var i=b(6354);const{isArray:o}=Array;function Ce(De){return(0,i.T)(B=>function D(De,B){return o(B)?De(...B):De(B)}(De,B))}},6528(){},6648($t,ot,b){"use strict";b.d(ot,{H:()=>le});var i=b(8750),o=b(5225),D=b(9974),Ce=b(4360);function De(ae,ve=0){return(0,D.N)((Ne,he)=>{Ne.subscribe((0,Ce._)(he,Le=>(0,o.N)(he,ae,()=>he.next(Le),ve),()=>(0,o.N)(he,ae,()=>he.complete(),ve),Le=>(0,o.N)(he,ae,()=>he.error(Le),ve)))})}function B(ae,ve=0){return(0,D.N)((Ne,he)=>{he.add(ae.schedule(()=>Ne.subscribe(he),ve))})}var pe=b(1985),Ae=b(4761),l=b(8071);function m(ae,ve){if(!ae)throw new Error("Iterable cannot be null");return new pe.c(Ne=>{(0,o.N)(Ne,ve,()=>{const he=ae[Symbol.asyncIterator]();(0,o.N)(Ne,ve,()=>{he.next().then(Le=>{Le.done?Ne.complete():Ne.next(Le.value)})},0,!0)})})}var y=b(5055),v=b(9858),M=b(7441),R=b(5397),V=b(7953),ce=b(591),z=b(5196);function le(ae,ve){return ve?function K(ae,ve){if(null!=ae){if((0,y.l)(ae))return function Pe(ae,ve){return(0,i.Tg)(ae).pipe(B(ve),De(ve))}(ae,ve);if((0,M.X)(ae))return function ie(ae,ve){return new pe.c(Ne=>{let he=0;return ve.schedule(function(){he===ae.length?Ne.complete():(Ne.next(ae[he++]),Ne.closed||this.schedule())})})}(ae,ve);if((0,v.y)(ae))return function Ge(ae,ve){return(0,i.Tg)(ae).pipe(B(ve),De(ve))}(ae,ve);if((0,V.T)(ae))return m(ae,ve);if((0,R.x)(ae))return function p(ae,ve){return new pe.c(Ne=>{let he;return(0,o.N)(Ne,ve,()=>{he=ae[Ae.l](),(0,o.N)(Ne,ve,()=>{let Le,re;try{({value:Le,done:re}=he.next())}catch(Ke){return void Ne.error(Ke)}re?Ne.complete():Ne.next(Le)},0,!0)}),()=>(0,l.T)(he?.return)&&he.return()})}(ae,ve);if((0,z.U)(ae))return function te(ae,ve){return m((0,z.C)(ae),ve)}(ae,ve)}throw(0,ce.L)(ae)}(ae,ve):(0,i.Tg)(ae)}},6697($t,ot,b){"use strict";b.d(ot,{s:()=>Ce});var i=b(983),o=b(9974),D=b(4360);function Ce(De){return De<=0?()=>i.w:(0,o.N)((B,Pe)=>{let Ge=0;B.subscribe((0,D._)(Pe,pe=>{++Ge<=De&&(Pe.next(pe),De<=Ge&&Pe.complete())}))})}},6845($t,ot,b){"use strict";b.d(ot,{L:()=>o});var i=b(2615);let o=(()=>{var D;class Ce{constructor(){this.STORAGE_KEY="app_language",this.translations={"Sign In":"Konekte",Username:"Non itilizater","Enter username":"Antre non itilizater",Password:"Mo d pas","Enter password":"Antre mo d pas","Don't have an account?":"Ou pa ankor annan en kont?","Register New Account":"Enskrir en nouvo kont","Access Levels":"Nivo lakses","School Clubs":"Klib lekol","Conservation Partners":"Partner konservasyon",Superusers:"Siperitilizater",Admins:"Administrater","Create Account":"Kree en kont","Join WETSAPP Wetland Monitoring":"Zwenn WETSAPP Sirveyans lanmar","Choose a username":"Swazir en non itilizater",Email:"Imel","Enter your email":"Antre ou imel","Create a password (min 6 chars)":"Kree en mo d pas (minimom 6 karakter)","Confirm Password":"Konfirmen mo d pas","Confirm password":"Konfirmen mo d pas","Access Level":"Nivo lakses","Select your access level":"Swazir ou nivo lakses","L1 - School Club":"L1 - Klib lekol","L2 - Conservation Partner":"L2 - Partner konservasyon","L3 - Superuser":"L3 - Siperitilizater","L4 - Admin":"L4 - Administrater","Organization (Optional)":"Lorganizasyon (Opsyonnel)","School or organization name":"Non lekol oubyen lorganizasyon","Back to Login":"Retourn koneksyon","Wetland Monitoring":"Sirveyans Lanmar","Request L2/L3/L4 access":"Demann lakses L2/L3/L4",Observations:"Lobservasyon",Species:"Lespes",Activities:"Bann aktivite",Reports:"Bann rapor","Select Your Mission":"Swazir Ou Misyon","Wetland Biodiversity":"Byodiversite Lanmar","Identify and record flora and fauna species":"Idantifye e anrezistre bann lespes laflor ek lafon","Wetland Health":"Lasante Lanmar","Log cleanup efforts and activities":"Anrezistre bann zefor netwayaz ek aktivite","Monitor mangrove health and restoration":"Sirvey lasante ek restorasyon mangliye","Wetland Threats":"Mennas pour Lanmar","Report pollution and cleanup activities":"Raporte polisyon ek aktivite netwayaz","Request Level Access":"Demann nivo lakses",Reason:"Rezon","Why do you need this access level?":"Akoz ou bezwen sa nivo lakses la?",Cancel:"Anile","Send Request":"Anvoy demann","Identify and record species":"Idantifye e anrezistre bann lespes","Flora & Fauna Assessment":"Evalyasyon laflor ek lafon","Identify and record wetland species":"Idantifye e anrezistre bann lespes lanmar","Biomass Assessment":"Evalyasyon byomas","Measure vegetation biomass and density":"Mezir byomas ek dansite vezetasyon","Recent Observations":"Bann dernyen lobservasyon","No observations yet":"Pa ankor annan lobservasyon","Location not specified":"Landrwa pa spesifye","Mangrove Health Assessment":"Evalyasyon lasante mangliye","Tree condition, canopy cover, and vitality":"Kondisyon pyebwa, kouvertir kanope, ek vitalite","Restoration Monitoring":"Sirveyans restorasyon","Planted seedlings and rehabilitation areas":"Bann ti plan plante ek z\xf2n reyabilitasyon","Outplanting Monitoring":"Sirveyans transplantasyon","Track outplanted mangroves and reproduction":"Swiv bann mangliye transplante ek repwodisyon","Cleanup Activity":"Aktivite netwayaz","Log cleanup efforts and waste sorted":"Anrezistre bann zefor netwayaz ek dese triye","Recent Activities":"Bann dernyen aktivite","No activities yet":"Pa ankor annan aktivite","Report pollution and threats":"Raporte polisyon ek mennas","Pollution Report":"Rapor polisyon","Plastic, debris, and contamination":"Plastik, debri, ek kontaminasyon","Disturbances Report":"Rapor pertirbasyon","Recent Reports":"Bann dernyen rapor","No reports yet":"Pa ankor annan rapor","Select Location":"Swazir landrwa","Choose a site to begin assessment":"Swazir en sit pour koumans evalyasyon","Assessment Location":"Landrwa evalyasyon","Select a known site or create a new one":"Swazir en sit ki egziste oubyen kree en nouvo","Choose Location":"Swazir landrwa","New Site":"Nouvo sit","New Site Information":"Lenformasyon nouvo sit","Enter details for the new site":"Antre bann detay pour nouvo sit","Site Name":"Non sit","Enter site name (required)":"Antre non sit (obligatwar)","Location Description":"Deskripsyon landrwa","Enter location description (optional)":"Antre deskripsyon landrwa (opsyonnel)","Take GPS Coordinates":"Pran koordonnen GPS","GPS Captured:":"GPS anrezistre:","Take Site Photo":"Pran foto sit","Photo Captured":"Foto anrezistre","Upload Site Map":"Televers map sit","Map Uploaded":"Map telesarze","Add New Site":"Azoute nouvo sit","Edit Site Information":"Modifye lenformasyon sit","Admin Only":"Administrater selman","Modify site details (L4+ users only)":"Modifye detay sit (itilizater L4+ selman)",Description:"Deskripsyon","Enter description (optional)":"Antre deskripsyon (opsyonnel)","Update GPS Coordinates":"Aktyalize koordonnen GPS","New Photo":"Nouvo foto","Photo Set":"Foto anrezistre","New Map":"Nouvo map","Map Set":"Map anrezistre","Save Changes":"Sovgard bann sanzman","Delete Site":"Efase sit","Click zones or quads to select":"Klik bann z\xf2n oubyen kadran pour swazir","Click quads to select":"Klik bann kadran pour swazir","Click zones to select":"Klik bann z\xf2n pour swazir","Edit Site (Admin)":"Modifye sit (Administrater)","Assessment Details":"Detay evalyasyon",Zone:"Z\xf2n","Enter zone number (required)":"Antre nimero z\xf2n (obligatwar)","Not applicable":"Pa aplikab","Quad Number":"Nimero kadran","Enter quad number (optional)":"Antre nimero kadran (opsyonnel)","Site Description":"Deskripsyon sit","Please select both a zone and quad on the map":"Silvouple swazir en z\xf2n ek en kadran lo map","Please select a quad on the map":"Silvouple swazir en kadran lo map","Please select a zone on the map":"Silvouple swazir en z\xf2n lo map","Start Assessment":"Koumans evalyasyon","How to Begin":"Ki mannyer koumanse","Rotate device for full-screen view":"Tourn laparey pour vizyon plenn lekran",Map:"Map","Continue Existing Outplanting Monitoring Activity":"Kontinnyen aktivite sirveyans transplantasyon ki egziste","Select a monitoring activity to add a new check-in, or start a new monitoring activity below":"Swazir en aktivite sirveyans pour azoute en nouvo vizit, oubyen koumans en nouvo aktivite sirveyans anba","Started:":"Koumanse:","Last:":"Dernyen:","check-ins":"bann vizit",species:"lespes","OR START NEW":"OUBYEN KOUMANS NOUVO","Start New Outplanting Monitoring Activity":"Koumans nouvo aktivite sirveyans transplantasyon","Location locked to:":"Landrwa bloke lo:","Continue Existing Restoration Monitoring Activity":"Kontinnyen aktivite sirveyans restorasyon ki egziste","Start New Restoration Monitoring Activity":"Koumans nouvo aktivite sirveyans restorasyon","Add location":"Azoute landrwa","Edit location":"Modifye landrwa","Location is required":"Landrwa i obligatwar",Complete:"Konplete","Edit This Entry":"Modifye sa lantre la","Editing Entry - Changes will replace the original submission":"Pe modifye lantre - Bann sanzman pou ranplas soumisyon orizinal","Submit Survey":"Soumet sirve","Save Draft":"Sovgard brouyon",Discard:"Zete","Delete Entry":"Efase lantre","Take Photo":"Pran foto","Tap to view full size":"Tap pour vwar gran",Yes:"Wi",No:"Non","Biodiversity Monitoring":"Sirveyans byodiversite","Survey Information":"Lenformasyon sirve",Observer:"Lobservater","Enter observer name":"Antre non lobservater","Observer name is required":"Non lobservater i obligatwar",Weather:"Letan","Select weather":"Swazir letan",Sunny:"Soley","Partly Cloudy":"En pe nwaz",Cloudy:"Nwaze",Overcast:"Syel kouver",Rainy:"Lapli",Stormy:"Tanpet",Foggy:"Labrim",Windy:"Divan","Weather selection is required":"Seleksyon letan i obligatwar",Tide:"Lamare","Select tide":"Swazir lamare",High:"O",Low:"Ba",Incoming:"Pe monte",Outgoing:"Pe desann","Tide selection is required":"Seleksyon lamare i obligatwar",Mangroves:"Mangliye","No. Adults":"Nonb. adilt",trees:"pyebwa","Recruits Present":"Bann rekri prezan","Dominant Recruit":"Rekri dominan","Other Flora":"Lot laflor","Note down species present":"Not bann lespes ki prezan",Dominant:"Dominan","Add Other Flora Species":"Azoute lot lespes laflor","Enter species name":"Antre non lespes",Fauna:"Lafon","Note down all animal species seen":"Not tou bann lespes zanimo ki'n vwar","Enter animal species":"Antre lespes zanimo","Add Other Fauna Species":"Azoute lot lespes lafon","Description of Quad/Area":"Deskripsyon kadran/z\xf2n",Roads:"Semen",Main:"Prinsipal",Secondary:"Segonder",Buildings:"Batiman","Select building types":"Swazir kalite batiman","Hotel/Restaurant":"Lotel/Restoran","Residential buildings":"Batiman rezidansyel","Commercial buildings":"Batiman komersyal",Agriculture:"Lagrikiltir","Agricultural facilities":"Bann fasilite lagrikiltir",Farms:"Bann laferm","Other development observations?":"Lot lobservasyon devlopman?","Other development observations":"Lot lobservasyon devlopman","Enter other observations about development":"Antre lot lobservasyon lo devlopman","Water flow disrupted?":"Lekoulman dlo deranze?","Select disruption types":"Swazir kalite deransyman","Fallen trees":"Pyebwa ki'n tonbe","Built up sediment/debris":"Sediman/debri ki'n anpile",Pollution:"Polisyon","Describe water flow conditions":"Dekrir kondisyon lekoulman dlo","Enter water flow description":"Antre deskripsyon lekoulman dlo","Other Observations":"Lot lobservasyon","Additional Notes":"Not adisyonnel","Enter any additional observations, weather conditions, habitat notes, etc.":"Antre tou lot lobservasyon, kondisyon letan, not lo labita, etc.","GPS Coordinates":"Koordonnen GPS","Capture GPS Location":"Kaptir pozisyon GPS","GPS Location Captured":"Pozisyon GPS anrezistre","GPS Location from New Site":"Pozisyon GPS depi nouvo sit","Tap to get current GPS location":"Tap pour ganny pozisyon GPS aktyel","GPS captured when creating new site":"GPS anrezistre letan kree nouvo sit","Human Activity":"Aktivite imen","Harvesting of biodiversity":"Rek\xf2lt byodiversite","Select option":"Swazir opsyon","Other (specify below)":"Lot (spesifye anba)","Please specify":"Silvouple spesifye","Specify what was harvested":"Spesifye ki keksoz ki'n rekolte","Clearing of mangrove trees":"Dekouraz pyebwa mangliye","Select number of trees":"Swazir nonb pyebwa","On-going construction":"Konstriksyon pe ale","Requires urgent action/intervention":"Bezwen aksyon/entervansyon irzan","Evidence of Natural Disturbances":"Levidans pertirbasyon natirel","Fallen tree":"Pyebwa ki'n tonbe","Bank erosion":"Erozyon labank",Diseases:"Maladi",Accretion:"Akresyon","Select type":"Swazir kalite","Sand deposition":"Depo disab","Soil deposition":"Depo later","Provide any additional details about the disturbances observed...":"Fourni tou lot detay lo bann pertirbasyon ki'n observe...","Submit Disturbances Report":"Soumet rapor pertirbasyon","Pollution Types":"Kalite polisyon","Grey water dumping":"Zete dlo gri","Sewage discharge":"Desarz dilo ize","Dumping of Trash":"Zete salte","Select type(s)":"Swazir kalite",Plastics:"Plastik",Metal:"Metal",Glass:"Ver",Fabric:"Twal","Paper/Cardboard":"Papye/Karton","Home appliance/electronics":"Laparey lakaz/elektronik","Construction debris":"Debri konstriksyon",Furniture:"Meb","Photo Evidence":"Levidans foto","Take photos of the pollution (up to 5 photos)":"Pran foto polisyon (ziska 5 foto)","Add Photo":"Azoute foto","Detailed Description":"Deskripsyon detaye","Provide a detailed description of the pollution observed, including any potential sources, visible impacts on wildlife or vegetation, and any other relevant information.":"Fourni en deskripsyon detaye lo polisyon ki'n observe, enkli bann sours posib, lenpak vizib lo bann zanimo sovaz oubyen vezetasyon, ek tou lot lenformasyon pertinan.","Description is required":"Deskripsyon i obligatwar","Possible Source (if known)":"Sours posib (si ou konnen)","Enter possible pollution source":"Antre sours posib polisyon","This requires urgent action":"Sa i bezwen aksyon irzan","Submit Pollution Report":"Soumet rapor polisyon","Wetland Health Assessment":"Evalyasyon Lasante Lanmar","Assessment Information":"Lenformasyon evalyasyon","Canopy Cover %":"Kouvertir kanope %","Select %":"Swazir %","Canopy cover is required":"Kouvertir kanope i obligatwar","Recruitment Cover %":"Kouvri rekritman %","Recruitment cover is required":"Kouvri rekritman i obligatwar","Dead Mangrove Trees/Stumps":"Pyebwa Mangliye Mor/Souch","Evidence of mushrooms observed":"Levidans sanpinnyon observe","Signs of pollution":"Sign polisyon","Add Pollution Photo (Optional)":"Azoute foto polisyon (opsyonnel)","Pollution Photo:":"Foto polisyon:","Additional Pollution Observations":"Lot lobservasyon polisyon","Describe the distribution and volume of waste, specific location within the site, potential sources, any observed impacts on wildlife or vegetation, etc.":"Dekrir distribisyon ek volim dese, landrwa spesifik dan sit, bann sours posib, tou lenpak observe lo bann zanimo sovaz oubyen vezetasyon, etc.","Soil & Environmental Factors":"Later Ek Fakter Anvironnmantal","Soil Composition":"Konpozisyon Later","Select soil type(s)":"Swazir kalite later",Sand:"Disab",Mud:"Labou",Gravel:"Gravye",Silt:"Lenvaz","Soil composition is required":"Konpozisyon later i obligatwar","Add Soil Photo (Optional)":"Azoute Foto Later (Opsyonnel)","Soil Photo:":"Foto Later:",Predation:"Predasyon","Holes in leaf (Insect predation)":"Trou dan fey (predasyon ensekt)","White bugs on tree? Mealy bugs (Lipou)":"Ti bibit blan lo pyebwa? Lipou","Other (specify)":"Lot (spesifye)","Specify Other Predation":"Spesifye Lot Predasyon","Describe the predation observed":"Dekrir predasyon ki'n observe","Add Predation Evidence Photo (Optional)":"Azoute foto levidans predasyon (opsyonnel)","Predation Photo:":"Foto predasyon:","Enter any additional observations about wetland health, tree vitality, water quality, wildlife presence, etc.":"Antre tou lot lobservasyon lo lasante lanmar, vitalite pyebwa, kalite dlo, prezans zanimo sovaz, etc.","Submit Health Assessment":"Soumet evalyasyon lasante","Project Status":"Stati Proze","Keep monitoring activity ongoing":"Gard aktivite sirveyans pe ale","Allow future check-ins for the outplanting at this specific location.":"Permet bann vizit fitir pour transplantasyon dan sa landrwa spesifik la.","Toggle off to close monitoring activity for this specific location.":"Dezaktive pour ferm aktivite sirveyans pour sa landrwa spesifik la.",Ongoing:"Pe ale",Closed:"Ferme","Outplanting activity will be marked as closed and removed from the active outplanting monitoring list.":"Aktivite transplantasyon pou mark konm ferme e retire depi lalis sirveyans transplantasyon aktif.","Site Information":"Lenformasyon Sit","Total Area of Restoration Site (m\xb2)":"Total siperfisi sit restorasyon (m\xb2)",Optional:"Opsyonnel","Area Restored (m\xb2)":"Siperfisi restore (m\xb2)",Outplanting:"Transplantasyon","Number of Individuals Outplanted per Species":"Nonb endividi transplante par lespes",Total:"Total","Growth Monitoring":"Sirveyans Kwasans","Average Height per Species (cm)":"Oter mwayenn par lespes (cm)","Average Overall":"Mwayenn Zeneral","Mortality per Batch":"Mortalite Par Grou","Number of Dead/Failed Individuals":"Nonb endividi mor/pa reyisi","Signs of Reproduction":"Sign Repwodisyon","Check if flowers or fruits are present":"Gete si fleur oubyen fri i prezan",Flowers:"Fleur",Fruits:"Fri","Species with Reproduction":"Lespes Avek Repwodisyon","Enter any observations about growth patterns, environmental conditions, or issues encountered":"Antre tou lobservasyon lo patron kwasans, kondisyon anvironnmantal, oubyen problem ki'n zwenn","Submit Outplanting Monitoring":"Soumet sirveyans transplantasyon","Minimum monitoring frequency: every two weeks":"Frekans sirveyans minimom: sak de semenn","Allow future check-ins for the restoration of this specific location.":"Permet bann vizit fitir pour restorasyon sa landrwa spesifik la.","Restoration activity will be marked as closed and removed from the active restoration monitoring list.":"Aktivite restorasyon pou mark konm ferme e retire depi lalis sirveyans restorasyon aktif.","Site is required":"Sit i obligatwar","Add site":"Azoute sit","Seed Collection":"Koleksyon lagrenn","Number of Species Collected":"Nonb lespes ki'n ramase",Sowing:"Semen","Number of Seeds Sowed per Species":"Nonb lagrenn semen par lespes","Mortality per Species":"Mortalite par lespes","Submit Restoration Monitoring":"Soumet sirveyans restorasyon","Wetland Cleanup Activity":"Aktivite Netwayaz Lanmar","General Information":"Lenformasyon zeneral",Team:"Lekip","Team name or initials":"Non lekip oubyen inisyal","Team name is required":"Non lekip i obligatwar",Comments:"Komanter","Additional notes":"Not adisyonnel",PLASTICS:"PLASTIK","Consumer Items":"Lartik konsonmater","Flip flops":"Savat","Toys / figurines":"Zouzou / figirinn",Pens:"Plim",Toothbrushes:"Bros adan","Lollipop sticks":"Baton sik\xe8t","Juice packets":"Pake dzi","Cigarette butts":"Bou sigaret","Food wrappers (candy, chips etc.)":"Lanbalaz manze (bonbon, chips etc.)","Take away containers":"Bwat manze anporte",Lids:"Kouverk","Bottle caps":"Bouchon boutey","Beverage bottles":"Boutey bwason",Straws:"Pay","Forks, knives, spoons":"Fours\xe8t, kouto, kiy\xe8r",Bags:"Sak","Cups and plates":"Tas ek lasyet","Consumer Weight (kg):":"Pwa konsonmater (kg):",Packaging:"Lanbalaz","Plastic bottle (oil, sunscreen, bleach)":"Boutey plastik (lwil, krenm soley, zavel)","Toothpaste tubes":"Tib dantifris","Elastic bands":"Lastik","Box packaging":"Lanbalaz bwat","Wipes packet":"Pake serviyet imid","Packaging Weight (kg):":"Pwa lanbalaz (kg):",Foam:"Mouss","Large foam":"Gro mouss","Foam pieces":"Morso mouss","Foam Weight (kg):":"Pwa mouss (kg):","Other Trash":"Lot salte","Balloons (party decorations)":"Balonn (dekorasyon lafet)",Lighters:"Brike","Household items":"Lartik lakaz","Diapers / Sanitary":"Kouch / Saniter",Wipes:"Serviyet imid",Rubber:"Kaoutchou","Biological waste":"Dese byolozik","Woven plastics (polypropylene)":"Plastik trese (polipropilenn)","Other Trash Weight (kg):":"Pwa lot salte (kg):","Fishing Gear":"Lekipman lapes","FISHING GEAR":"LEKIPMAN LAPES",Lures:"Zegren","Fishing Line / Ropes":"Laliny lapes / Lakord",Nets:"File","Buoys / floats":"Bouwe / flote","Other (mix)":"Lot (melanze)","Fishing Gear Weight (kg):":"Pwa lekipman lapes (kg):",Remnants:"Restan",REMNANTS:"RESTAN","Hard fragments":"Morso dir","Soft fragments":"Morso mou","Remnants Weight (kg):":"Pwa restan (kg):","TOTAL PLASTICS WEIGHT (kg):":"TOTAL PWA PLASTIK (kg):",GLASS:"VER",Item:"Lartik",Amount:"Kantite",Bottles:"Boutey","Bulbs and light tubes":"Lanpoul ek tib lalimyer","Food container":"Bwat manze","Glass fragments":"Morso ver","Glass Weight (kg):":"Pwa ver (kg):",METAL:"METAL","Drinking cans":"Kannet bwason","Aluminum foil":"Papye aliminy\xf2m",Sheeting:"T\xf2l",Appliances:"Laparey","Metal Weight (kg):":"Pwa metal (kg):","PAPER AND CARDBOARD":"PAPYE EK KARTON","Napkins / Toilet paper":"Serviyet / Papye twalet",Cardboard:"Karton","Used wood":"Dibwa itilize",Cloth:"Twal",Fiberglass:"Fibdever","Paper & Cardboard Weight (kg):":"Pwa papye ek karton (kg):","BULKY WASTE":"GRO DESE","Appliances/electronics":"Laparey/elektronik","Large plastics":"Gro plastik","Treated wood":"Dibwa trete","Green waste":"Dese ver","Bulky Waste Weight (kg):":"Pwa gro dese (kg):","ALL TRASH":"TOU SALTE","TOTAL WEIGHT (kg):":"TOTAL PWA (kg):","Submit Cleanup Activity":"Soumet aktivite netwayaz","Plot Information":"Lenformasyon Pars\xe8l","Plot Size (m\xb2)":"Grander pars\xe8l (m\xb2)","Plot size is required":"Grander pars\xe8l i obligatwar","Vegetation Type":"Kalite Vezetasyon","Select vegetation type":"Swazir kalite vezetasyon",Mangrove:"Mangliye",Seagrass:"Zerb lanmer","Salt Marsh":"Marse sale",Algae:"Lalg","Mixed Vegetation":"Vezetasyon Melanze","Vegetation type is required":"Kalite vezetasyon i obligatwar","Mangrove Tree Measurements":"Mezirman Pyebwa Mangliye","Measure trees for biomass calculations":"Mezir bann pyebwa pour kalkil byomas","Add Tree Measurement":"Azoute Mezirman Pyebwa","Measure diameter at breast height (1.3m above ground) in centimeters":"Mezir dyamet o oter lestoma (1.3m anler later) an santimetr","and tree height in meters":"ek oter pyebwa an met","DBH (cm)":"DHP (cm)","Diameter in cm":"Dyamet an cm","Height (m)":"Oter (m)","Add Tree":"Azoute pyebwa","Estimated Biomass Preview:":"Apersi byomas estime:","Measured Trees":"Pyebwa Mezire","Total Aboveground":"Total anl\xe8r later","Total Belowground":"Total anba later","Total Biomass":"Total byomas","No trees measured yet. Add tree measurements above to calculate biomass.":"Pa ankor annan pyebwa mezire. Azoute mezirman pyebwa anl\xe8r pour kalkil byomas.","Biomass Estimate":"Estimasyon Byomas","Biomass Estimate (kg/m\xb2)":"Estimasyon Byomas (kg/m\xb2)","Biomass estimate is required":"Estimasyon byomas i obligatwar",Notes:"Not","Enter any additional observations, methodology notes, environmental conditions, etc.":"Antre tou lot lobservasyon, not lo met\xf2d, kondisyon anvironnmantal, etc.","Submit Biomass Assessment":"Soumet evalyasyon byomas","Statistics & Insights":"Statistik ek apersi","Your environmental impact at a glance":"Ou lenpak anvironnmantal dan en koudey","Overall Impact":"Lenpak Zeneral","Threats & Actions":"Mennas Ek Aksyon","Environmental Champion":"Sanpyon Anvironnman","Keep up the great work monitoring and protecting our wetlands!":"Kontinnyen sa bon travay sirveyans ek proteksyon nou bann lanmar!","Flora & Fauna Assessments":"Evalyasyon Laflor Ek Lafon","Completed surveys":"Sirve konplete","Flora Species Identified":"Lespes Laflor Idantifye","Unique species":"Lespes inik","Fauna Species Identified":"Lespes Lafon Idantifye","Sites Surveyed":"Sit Ki'n Sirveye","Unique locations":"Landrwa inik","Health Assessments":"Evalyasyon Lasante","Mangrove health checks":"Tchek Lasante Mangliye","Trees Monitored":"Pyebwa Sirvey","Individual trees":"Pyebwa endividyel","Restoration Sites":"Sit Restorasyon","Active restoration":"Restorasyon aktif","Average Health Score":"N\xf2t Lasante Mwayenn","Out of 10":"Lo 10","Threat Reports":"Rapor Mennas","Issues documented":"Problem dokimante","Pollution Incidents":"Ensidan Polisyon","Contamination events":"Evennman kontaminasyon","Cleanup Activities":"Aktivite Netwayaz","Community efforts":"Zefor kominote","Impact Area":"Z\xf2n Lenpak","Hectares affected":"Ektar afekte","Total Observations":"Total Lobservasyon","All activities":"Tou bann aktivite","Active Days":"Zour Aktif","Days with data":"Zour avek done","Photos Captured":"Foto Anrezistre",Documentation:"Dokimantasyon","Contribution Score":"N\xf2t Kontribisyon","Impact rating":"Klasman Lenpak","Check-in":"Vizit","for ongoing project":"pour proze pe ale","Search species...":"Rod lespes...","species selected":"lespes swazi","Hold an image for 2 seconds to view in full screen":"Gard en limaz pour 2 segond pour vwar an plen ekran","Add New":"Azoute nouvo","1-3 photos required":"1-3 foto obligatwar","Species photo":"Foto lespes","Scientific Name":"Non syantifik","Common Name (English)":"Non komen (Angle)","Creole Name":"Non Kreol","Describe the species (required)":"Dekrir lespes (obligatwar)","Select species":"Swazir lespes","Add Species":"Azoute lespes",Pending:"An atant",Custom:"Personalize","No species found":"Pa annan lespes trouve",Add:"Azoute","Edit Species":"Modifye lespes","Delete Species":"Efase lespes","Distribution in Seychelles":"Distribisyon Dan Sesel",Habitat:"Labita",Identification:"Idantifikasyon","Pinch to zoom \u2022 Double tap to toggle":"Pinse pour zoum \u2022 Doub tap pour sanze","Accretion photo":"Foto akresyon","Select a":"Swazir en","to view its map or enter a":"pour vwar so map oubyen antre en","to create a custom location":"pour kree en landrwa personalize","Tap the map or fill out new site information to start your assessment":"Tap lo map oubyen ranpli lenformasyon nouvo sit pour konmans ou evalyasyon","Auto-syncing ALL account data":"Senkroniz TOUSALA done kont","Auto-syncing your account data":"Senkroniz ou done kont","Level 4 Desktop":"Nivo 4 Desktop","Level 4 Mobile":"Nivo 4 Mobil","Privileged sync complete":"Senkronizasyon privilezye konplete","Sync complete":"Senkronizasyon konplete","items from all accounts":"lartik depi tou bann kont","items downloaded":"lartik telesarze","Sync failed":"Senkronizasyon pa'n marse",Retry:"Reesye",Report:"Rapor",pending:"an atant","Development, Harvesting of Biodiversity, Other":"Devlopman, Rek\xf2lt byodiversite, Lot","Grey Water":"Dilo gri","Grey water is wastewater from household activities such as laundry, dishwashing, and bathing. It may contain traces of soap, detergent, food particles, and other contaminants.":"Dilo gri i dilo sal ki sorti dan bann aktivite lakaz parey lesiv, lav lasyet, ek benyen. I kapab annan tras savon, deterzan, ti morso manze, ek lot kontaminan.","Native, common in most mangrove areas.":"Natif, komen dan laplipar bann z\xf2n mangliye.","Medium low tidal zone.":"Z\xf2n mare mwayen ba.","Small to medium sized tree, with stilt-like roots and large green leaves with needle tips.":"Pti a mwayen pyebwa, avek rasinn parey beki ek gro fey ver avek pwent zegwi.","Native, most common and widespread species on the granitic islands.":"Natif, lespes pli komen ek pli repandi lo bann zil granitik.","Low tidal zone.":"Z\xf2n mare ba.","Generally small trees, with thin pencil-like aerial roots and narrow, bright green leaves with silvery-white underside.":"Zeneral pti pyebwa, avek rasinn aeryen mens parey kreyon ek fey etwar, ver briyan avek anba blan arzan.","Native, generally less abundant than other species. Found in the inner and outer islands of Seychelles, including Mah\xe9, Aldabra, and Cosmoledo.":"Natif, zeneral mwens abondan ki lezot lespes. Trouve dan bann zil andan ek deor Sesel, enkli Mah\xe9, Aldabra, ek Cosmoledo.","Mid-tidal zone.":"Z\xf2n mare milye.","Short to medium-sized tree of about 5-8 meters tall, prop roots, small knee-like pneumatophores and sometimes fine aerial roots.":"Pti a mwayen pyebwa anviron 5-8 met oter, rasinn prop, pti pneimatafor parey zenou ek parfwa rasinn aeryen fen.","Native, restricted distribution in low numbers.":"Natif, distribisyon restren an pti nonb.","Middle & upper intertidal zone.":"Z\xf2n entermarer milye ek anler.","Medium to tall tree, with knee roots and short buttresses, and large green leaves with downward tips.":"Mwayen a gran pyebwa, avek rasinn zenou ek pti kontrefor, ek gro fey ver avek pwent anba.","Native. Generally less abundant than other species. Fairly common in the Port Launay Coastal Wetlands.":"Natif. Zeneral mwens abondan ki lezot lespes. Ase komen dan Lanmar Kotye Port Launay.","High tidal zone (landward edge).":"Z\xf2n mare ot (bor later).","Medium sized, tree growing up to 20m tall, with long snake-like buttress roots spreading out and smooth, flaky light brown bark.":"Mwayen pyebwa ki grandi ziska 20m oter, avek long rasinn kontrefor parey serpan ki repann ek lekors lis, ki dekale, maron kler.","Native. Generally well distributed on Mahe and Aldabra.":"Natif. Zeneral byen distribye lo Mah\xe9 ek Aldabra.","Medium-high tidal zone.":"Z\xf2n mare mwayen ot.","Small to medium sized, bushy-topped tree growing up to 15m tall, with grey-brown bark and pyramid-like buttress roots (sometimes small knee-like roots present).":"Pti a mwayen pyebwa avek bout toufi ki grandi ziska 15m oter, avek lekors gri-maron ek rasinn kontrefor parey piramid (parfwa pti rasinn zenou prezan).","Native, common and widespread in the granitics (Mahe, Praslin, Silhouette), rare on Aldabra and Cosmoledo.":"Natif, komen ek repandi dan bann granitik (Mah\xe9, Praslin, Silhouette), rar lo Aldabra ek Cosmoledo.","Relatively tall tree with a broad, spreading canopy, usually 15-20m tall. Has thick cone-shaped aerial roots shooting out of the ground.":"Pyebwa ase ot avek en larz kanope ki repann, normalman 15-20m oter. Annan gro rasinn aeryen an form konn ki sorti dan later.",Vegetation:"Vezetasyon",Biomass:"Byomas",Method:"Metod","Biomass assessment":"Evalyasyon byomas","mangrove species":"lespes mangliye","No mangrove species":"Pa annan lespes mangliye","flora species":"lespes laflor","No flora species":"Pa annan lespes laflor","fauna species":"lespes lafon","No fauna species":"Pa annan lespes lafon",Canopy:"Kanope",Recruitment:"Rekritman",dead:"mor","mushroom evidence":"prezans sanpinyon","soil types":"kalite later",predation:"predasyon","Health assessment":"Evalyasyon lasante",collected:"rekolte",sowed:"senmen",outplanted:"transplante","Restoration monitoring":"Sirveyans restorasyon",failed:"eswe","Outplanting monitoring":"Sirveyans transplantasyon",Growth:"Kwasans",flowers:"fler",fruits:"fri",plastics:"plastik","fishing gear":"lekipman lapes",remnants:"restan",glass:"ver",paper:"papye",bulky:"voliminen","Cleanup activity":"Aktivite netwayaz","grey water":"dilo gri",sewage:"egou",metal:"metal","organic waste":"dese organik",other:"lot","Pollution reported":"Polisyon raporte","mangrove whelk":"fizo mangliye","giant mud crab":"gro krab labou","juvenile sharks":"zenn reken",harvesting:"rek\xf2lt",clearing:"dekouraz",mangroves:"mangliye",construction:"konstriksyon","fallen tree":"pyebwa tonbe","bank erosion":"erozyon labank",sand:"disab",soil:"later",sediment:"sediman",accretion:"akresyon",diseases:"maladi","Disturbance reported":"Pertirbasyon raporte","Sync Data":"Senkroniz done",Statistics:"Statistik","Version Manager":"Zestyon Versyon","Log Out":"Dekonekte",draft:"brouyon",submitted:"soumit",Photos:"Foto","known site":"sit ki egziste","new site":"nouvo sit",Save:"Sovgard",Next:"Prosenn",Delete:"Efase",Remove:"Retire",OK:"OK","Location/Site":"Landrwa/Sit","Enter location":"Antre landrwa",Location:"Landrwa","Zone Number":"Nimero Z\xf2n","Enter zone number":"Antre nimero z\xf2n","Enter quad number":"Antre nimero kadran","Select Zone":"Swazir Z\xf2n","Select Quad":"Swazir Kadran","Site Location":"Landrwa Sit","Enter site location":"Antre landrwa sit","Incomplete Form":"Formi Pa Konplete",Success:"Sikse",Error:"Erer","Discard Form":"Zete Formi","Are you sure you want to discard this form? All entered data will be lost.":"Eski ou sir ou anvi zete sa formi la? Tou done ki'n antre pou perdi.","Are you sure you want to save this form as a draft? You can return to complete it later.":"Eski ou sir ou anvi sovgard sa formi la konm brouyon? Ou kapab retourn pli tar pour fini li.","Draft Saved":"Brouyon Sovgarde","Save Failed":"Sovgard pa'n marse","Failed to save the draft. Please try again.":"Pa'n kapab sovgard brouyon. Silvouple reesye.","Report Not Found":"Rapor Pa Trouve","The requested report could not be found.":"Rapor ki'n demande pa'n kapab trouve.","Permission Denied":"Permisyon Refize","Only Level 4 users can delete entries.":"Selman bann itilizater nivo 4 ki kapab efas bann lantre.","Are you sure you want to permanently delete this entry? This will remove it from the database and back it up to deleted files storage. This action cannot be undone.":"Eski ou sir ou anvi efas sa lantre la permanaman? Sa pou retir li depi labaz done e fer en kopi sovgard dan stokaz fichye efase. Sa aksyon la pa kapab defet.","Deleting entry...":"Pe efas lantre...","Entry has been deleted and backed up successfully.":"Lantre in efase e kopi sovgard avek sikse.","Failed to delete entry. Please try again.":"Pa'n kapab efas lantre. Silvouple reesye.","Failed to load the report.":"Pa'n kapab sarze rapor.","Please fill in all required fields (Location, Date, and Plot Size).":"Silvouple ranpli tou bann saen obligatwar (Landrwa, Dat, ek Grander pars\xe8l).","Submitting biomass assessment...":"Pe soumet evalyasyon byomas...","Biomass assessment updated successfully!":"Evalyasyon byomas aktyalize avek sikse!","Biomass assessment submitted successfully!":"Evalyasyon byomas soumit avek sikse!","Updated report saved locally and queued for upload when online.":"Rapor aktyalize sovgarde lokalman e an latant pour telesarz ler ou anliny.","Biomass assessment saved locally and queued for upload when online.":"Evalyasyon byomas sovgarde lokalman e an latant pour telesarz ler ou anliny.","Failed to submit biomass assessment. Please try again.":"Pa'n kapab soumet evalyasyon byomas. Silvouple reesye.","Please fill in all required fields (Observer, Location, Weather, and Tide).":"Silvouple ranpli tou bann saen obligatwar (Lobservater, Landrwa, Letan, ek Lamare).","Submitting flora-fauna assessment...":"Pe soumet evalyasyon laflor-lafon...","Flora-fauna assessment updated successfully!":"Evalyasyon laflor-lafon aktyalize avek sikse!","Flora-fauna assessment submitted successfully!":"Evalyasyon laflor-lafon soumit avek sikse!","Updated assessment saved locally and queued for upload when online.":"Evalyasyon aktyalize sovgarde lokalman e an latant pour telesarz ler ou anliny.","Flora-fauna assessment saved locally and queued for upload when online.":"Evalyasyon laflor-lafon sovgarde lokalman e an latant pour telesarz ler ou anliny.","Failed to submit flora-fauna assessment. Please try again.":"Pa'n kapab soumet evalyasyon laflor-lafon. Silvouple reesye.","Your form has been saved as a draft. You can access it from the biodiversity page.":"Ou formi in sovgarde konm brouyon. Ou kapab akses li depi paz byodiversite.","Remove Species":"Retire lespes","Are you sure you want to remove":"Eski ou sir ou anvi retire","Secondary Roads":"Semen segonder","Not paved, for e.g. dirt track":"Pa goudronne, par egzanp semen later","Please fill in all required fields (Site and Date).":"Silvouple ranpli tou bann saen obligatwar (Sit ek Dat).","Submitting outplanting monitoring data...":"Pe soumet done sirveyans transplantasyon...","Outplanting monitoring data updated successfully!":"Done sirveyans transplantasyon aktyalize avek sikse!","Outplanting monitoring data submitted successfully!":"Done sirveyans transplantasyon soumit avek sikse!","Outplanting monitoring data saved locally and queued for upload when online.":"Done sirveyans transplantasyon sovgarde lokalman e an latant pour telesarz ler ou anliny.","Failed to submit outplanting monitoring data. Please try again.":"Pa'n kapab soumet done sirveyans transplantasyon. Silvouple reesye.","Submitting restoration monitoring data...":"Pe soumet done sirveyans restorasyon...","Restoration monitoring data updated successfully!":"Done sirveyans restorasyon aktyalize avek sikse!","Restoration monitoring data submitted successfully!":"Done sirveyans restorasyon soumit avek sikse!","Restoration monitoring data saved locally and queued for upload when online.":"Done sirveyans restorasyon sovgarde lokalman e an latant pour telesarz ler ou anliny.","Failed to submit restoration monitoring data. Please try again.":"Pa'n kapab soumet done sirveyans restorasyon. Silvouple reesye.","Please fill in all required fields (Location, Team, and Date).":"Silvouple ranpli tou bann saen obligatwar (Landrwa, Lekip, ek Dat).","Submitting cleanup data...":"Pe soumet done netwayaz...","Failed to submit cleanup activity. Please try again.":"Pa'n kapab soumet aktivite netwayaz. Silvouple reesye.","Please fill in Location.":"Silvouple ranpli Landrwa.","Submitting disturbances report...":"Pe soumet rapor pertirbasyon...","Disturbances report updated successfully!":"Rapor pertirbasyon aktyalize avek sikse!","Disturbances report submitted successfully!":"Rapor pertirbasyon soumit avek sikse!","Disturbances report saved locally and queued for upload when online.":"Rapor pertirbasyon sovgarde lokalman e an latant pour telesarz ler ou anliny.","Failed to submit disturbances report. Please try again.":"Pa'n kapab soumet rapor pertirbasyon. Silvouple reesye.","Your form has been saved as a draft. You can access it from the threats page.":"Ou formi in sovgarde konm brouyon. Ou kapab akses li depi paz mennas.","Please fill in all required fields (Location, Date, Time, Weather, Tide, Canopy Cover, Recruitment Cover, Dead Mangrove Trees, and Soil Composition).":"Silvouple ranpli tou bann saen obligatwar (Landrwa, Dat, Ler, Letan, Lamare, Kouvertir kanope, Kouvri rekritman, Pyebwa mangliye mor, ek Konpozisyon later).","Submitting health assessment...":"Pe soumet evalyasyon lasante...","Health assessment updated successfully!":"Evalyasyon lasante aktyalize avek sikse!","Health assessment submitted successfully!":"Evalyasyon lasante soumit avek sikse!","Health assessment saved locally and queued for upload when online.":"Evalyasyon lasante sovgarde lokalman e an latant pour telesarz ler ou anliny.","Failed to submit health assessment. Please try again.":"Pa'n kapab soumet evalyasyon lasante. Silvouple reesye.","Your form has been saved as a draft. You can access it from the health page.":"Ou formi in sovgarde konm brouyon. Ou kapab akses li depi paz lasante.","Getting GPS coordinates...":"Pe ganny koordonnen GPS...","GPS Captured":"GPS Anrezistre","GPS Error":"Erer GPS","Failed to get GPS coordinates. Please ensure location services are enabled and try again.":"Pa'n kapab ganny koordonnen GPS. Silvouple asire servis lokalizasyon i aktive e reesye.","Location services are disabled. Please enable GPS/location services on your device.":"Servis lokalizasyon i dezaktive. Silvouple aktiv servis GPS/lokalizasyon lo ou laparey.","Location permission was denied. Please enable location access for this app in your device settings.":"Permisyon lokalizasyon in refize. Silvouple aktiv lakses lokalizasyon pour sa app la dan seteng ou laparey.","GPS signal timeout. Please try again with a clear view of the sky.":"Signal GPS in ekspire. Silvouple reesye avek en vizyon kler lo syel.","Photo Error":"Erer Foto","Failed to capture photo":"Pa'n kapab pran foto","Maximum Photos":"Maksim\xf2m Foto","You can only add up to 3 photos per species.":"Ou kapab azoute ziska 3 foto par lespes.","Photo Failed":"Foto pa'n marse","Failed to capture photo. Please try again.":"Pa'n kapab pran foto. Silvouple reesye.","Missing Information":"Lenformasyon Manke","Please add at least one photo and provide a description.":"Silvouple azoute omwen en foto e fourni en deskripsyon.","Possible Duplicate":"Posib Doubliz","A species with a similar name already exists. Do you want to add it anyway?":"En lespes avek en non parey egziste deza. Eski ou anvi azoute li kanmenm?","Add Anyway":"Azoute kanmenm","Adding new species...":"Pe azoute nouvo lespes...","Species Added":"Lespes Azoute","The species has been added and is now available to all users.":"Lespes in azoute e i disponib pour tou bann itilizater.","The species has been added locally and is available for your use. An approval request has been submitted to administrators.":"Lespes in azoute lokalman e i disponib pour ou itilize. En demann laprobisyon in soumit avek bann administrater.","Failed to add the new species. Please try again.":"Pa'n kapab azoute nouvo lespes. Silvouple reesye.","Please ensure at least one photo and a description are provided.":"Silvouple asire omwen en foto ek en deskripsyon in fourni.","Saving changes...":"Pe sovgard bann sanzman...","Species Updated":"Lespes Aktyalize","The species has been updated successfully.":"Lespes in aktyalize avek sikse.","Failed to update the species. Please try again.":"Pa'n kapab aktyalize lespes. Silvouple reesye.","Are you sure you want to delete this species? This action cannot be undone.":"Eski ou sir ou anvi efas sa lespes la? Sa aksyon la pa kapab defet.","Deleting species...":"Pe efas lespes...","Species Deleted":"Lespes Efase","The species has been deleted successfully.":"Lespes in efase avek sikse.","Failed to delete the species. Please try again.":"Pa'n kapab efas lespes. Silvouple reesye.","Please fill in all required fields (Location, Date, and Description).":"Silvouple ranpli tou bann saen obligatwar (Landrwa, Dat, ek Deskripsyon).","Submitting pollution report...":"Pe soumet rapor polisyon...","Pollution report updated successfully!":"Rapor polisyon aktyalize avek sikse!","Pollution report submitted successfully!":"Rapor polisyon soumit avek sikse!","Pollution report saved locally and queued for upload when online.":"Rapor polisyon sovgarde lokalman e an latant pour telesarz ler ou anliny.","Failed to submit pollution report. Please try again.":"Pa'n kapab soumet rapor polisyon. Silvouple reesye.","You can only add up to 5 photos.":"Ou kapab azoute ziska 5 foto.","Sending request...":"Pe anvoy demann...","Request Sent":"Demann Anvwaye","Your level access request has been submitted for review. You will be notified via email when a decision is made.":"Ou demann nivo lakses in soumit pour revizyon. Ou pou ganny notifye par imel ler en desizyon in pran.","An unexpected error occurred. Please try again.":"En erer inatandi in arive. Silvouple reesye.","Failed to send request. Please try again.":"Pa'n kapab anvoy demann. Silvouple reesye.","Discarding...":"Pe efase...","Saving draft...":"Pe sovgarde brouyon...","edited:":"modifye:",", edited ":", modifye ","Draft Found for This Location":"Brouyon Trouve Pour Sa Landrwa La","You have an unfinished draft for":"Ou ena en brouyon ki pa fini pour","What would you like to do?":"Ki ou anvi fer?","Keep editing previous draft":"Kontinnye edite brouyon avan","Start New (deletes existing draft)":"Koumans nouvo (efas brouyon ki egziste)","GPS Required":"GPS obligatwar","GPS coordinates are required for new sites. Please capture GPS coordinates first.":"Koordonnen GPS obligatwar pour nouvo sit. Silvouple kaptir koordonnen GPS avan.","Site Already Exists":"Sit Deza Egziste","A site with this name already exists. Please choose a different name.":"En sit avek sa non la deza egziste. Silvouple swazir en diferan non.","Site Added Successfully":"Sit Azoute Avek Sikse","Failed to add the new site. Please try again.":"Pa'n kapab azoute nouvo sit. Silvouple reesye.","Name Required":"Non Obligatwar","Site name is required.":"Non sit obligatwar.","Site Updated":"Sit Aktyalize","The site information has been updated successfully.":"Lenformasyon sit in aktyalize avek sikse.","Update Failed":"Aktyalizasyon pa'n marse","Failed to update site. Please try again.":"Pa'n kapab aktyalize sit. Silvouple reesye.","Are you sure you want to delete":"Eski ou sir ou anvi efas","This action cannot be undone.":"Sa aksyon la pa kapab defet.","Site Deleted":"Sit Efase","The site has been deleted successfully.":"Sit in efase avek sikse.","Delete Failed":"Efasman pa'n marse","Failed to delete site. Please try again.":"Pa'n kapab efas sit. Silvouple reesye.","Upload Failed":"Telesarzman pa'n marse","Failed to upload site map. Please try again.":"Pa'n kapab telesarz map sit. Silvouple reesye.","Project History":"Listwar Proze","View full history for project at":"Vwar listwar konplet pour proze dan","This feature will show all":"Sa fonksyon pou montre tou","check-ins chronologically.":"bann vizit dan lord kronolozik.","Adult Mangrove Tree":"Pyebwa Mangrove Adil","An adult mangrove tree is typically defined as a tree that has reached reproductive maturity, usually over 1.5 meters in height with a well-developed trunk and canopy. These trees are capable of producing propagules (seeds) and contribute to the forest's reproductive cycle.":"Yon pyebwa mangrove adil se jeneralman defini kou yon pyebwa ki rive matnite repwodiktif, anjeneral plis ke 1.5 m\xe8t nan wot\xe8 ak yon twon ak kanope byen devlope. Bann pyebwa sa kapab pwodwi propagil (grenn) e kontribi nan sik repwodiktif for\xe8 a.","Mangrove Recruit":"Rekrit Mangrove","A mangrove recruit is a young mangrove tree that has successfully established itself after the seedling stage. Recruits are typically between 0.5 and 1.5 meters in height, have developed true leaves, and show signs of independent growth but have not yet reached reproductive maturity.":"Yon rekrit mangrove se yon jenn pyebwa mangrove ki byen etabli li apr\xe8 etap jenn pyebwa. Rekrit yo se jeneralman ant 0.5 e 1.5 m\xe8t nan wot\xe8, gen fey vray devlope, e montre sign kwasans endepandan men pa ank\xf2 rive matnite repwodiktif."},this.currentLang=localStorage.getItem(this.STORAGE_KEY)||"en"}t(B){return"en"===this.currentLang?B:this.translations[B]||B}getLanguage(){return this.currentLang}setLanguage(B){this.currentLang=B,localStorage.setItem(this.STORAGE_KEY,B)}isCreole(){return"kr"===this.currentLang}static#e=D=()=>(this.\u0275fac=function(Pe){return new(Pe||Ce)},this.\u0275prov=i.jDH({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}))}return D(),Ce})()},6855($t,ot,b){"use strict";b.d(ot,{a:()=>D,b:()=>ae,i:()=>ve});var i=b(5705);const D=(Ne,he)=>("string"==typeof Ne&&(he=Ne,Ne=void 0),(Ne=>Ce(Ne))(Ne).includes(he)),Ce=(Ne=window)=>{if(typeof Ne>"u")return[];Ne.Ionic=Ne.Ionic||{};let he=Ne.Ionic.platforms;return null==he&&(he=Ne.Ionic.platforms=De(Ne),he.forEach(Le=>Ne.document.documentElement.classList.add(`plt-${Le}`))),he},De=Ne=>{const he=i.e.get("platform");return Object.keys(K).filter(Le=>{const re=he?.[Le];return"function"==typeof re?re(Ne):K[Le](Ne)})},Pe=Ne=>!!(z(Ne,/iPad/i)||z(Ne,/Macintosh/i)&&m(Ne)),ie=Ne=>z(Ne,/android|sink/i),m=Ne=>te(Ne,"(any-pointer:coarse)"),v=Ne=>M(Ne)||R(Ne),M=Ne=>!!(Ne.cordova||Ne.phonegap||Ne.PhoneGap),R=Ne=>{const he=Ne.Capacitor;return!!(he?.isNative||he?.isNativePlatform&&he.isNativePlatform())},z=(Ne,he)=>he.test(Ne.navigator.userAgent),te=(Ne,he)=>{var Le;return null===(Le=Ne.matchMedia)||void 0===Le?void 0:Le.call(Ne,he).matches},K={ipad:Pe,iphone:Ne=>z(Ne,/iPhone/i),ios:Ne=>z(Ne,/iPhone|iPod/i)||Pe(Ne),android:ie,phablet:Ne=>{const he=Ne.innerWidth,Le=Ne.innerHeight,re=Math.min(he,Le),Ke=Math.max(he,Le);return re>390&&re<520&&Ke>620&&Ke<800},tablet:Ne=>{const he=Ne.innerWidth,Le=Ne.innerHeight,re=Math.min(he,Le),Ke=Math.max(he,Le);return Pe(Ne)||(Ne=>ie(Ne)&&!z(Ne,/mobile/i))(Ne)||re>460&&re<820&&Ke>780&&Ke<1400},cordova:M,capacitor:R,electron:Ne=>z(Ne,/electron/i),pwa:Ne=>{var he;return!!(null!==(he=Ne.matchMedia)&&void 0!==he&&he.call(Ne,"(display-mode: standalone)").matches||Ne.navigator.standalone)},mobile:m,mobileweb:Ne=>m(Ne)&&!v(Ne),desktop:Ne=>!m(Ne),hybrid:v};let le;const ae=Ne=>Ne&&(0,i.o)(Ne)||le,ve=(Ne={})=>{if(typeof window>"u")return;const he=window.document,Le=window,re=Le.Ionic=Le.Ionic||{},Ke=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,i.l)(Le)),{persistConfig:!1}),re.config),(0,i.m)(Le)),Ne);i.e.reset(Ke),i.e.getBoolean("persistConfig")&&(0,i.n)(Le,Ke),Ce(Le),re.config=i.e,re.mode=le=i.e.get("mode",he.documentElement.getAttribute("mode")||(D(Le,"ios")?"ios":"md")),i.e.set("mode",le),he.documentElement.setAttribute("mode",le),he.documentElement.classList.add(le),i.e.getBoolean("_testing")&&i.e.set("animated",!1);const Fe=Oe=>{var Ye;return null===(Ye=Oe.tagName)||void 0===Ye?void 0:Ye.startsWith("ION-")},we=Oe=>["ios","md"].includes(Oe);(0,i.q)(Oe=>{for(;Oe;){const Ye=Oe.mode||Oe.getAttribute("mode");if(Ye){if(we(Ye))return Ye;Fe(Oe)&&(0,i.f)('Invalid ionic mode: "'+Ye+'", expected: "ios" or "md"')}Oe=Oe.parentElement}return le})}},7223($t,ot,b){"use strict";b.d(ot,{U:()=>l});var i=b(467),o=b(2084),D=b(4412),Ce=b(2615),De=b(5029),B=b(4938),Pe=b(918),Ge=b(3205),pe=b(7643),ie=b(4356),Ae=b(8863);let l=(()=>{var p;class m{constructor(v,M,R,V,ce,z,te){this.supabaseService=v,this.storage=M,this.sharedDataService=R,this.auth=V,this.siteSyncService=ce,this.speciesSyncService=z,this.monitoringLogService=te,this.syncProgress$=new D.t([]),this.CLIENT=this.supabaseService.getClient()}getSyncProgress(){return this.syncProgress$.asObservable()}downloadAllAccountData(){var v=this;return(0,i.A)(function*(){const M=v.auth.getCurrentUser();if(!M)throw new Error("User not authenticated");console.log("\u{1f680} AccountSyncService: Starting full account data download");const R=Date.now(),V=M.level||1,ce=v.isDesktopDevice(),z=V>=4&&ce;console.log(`\u{1f4cb} AccountSyncService: User level ${V}, Desktop: ${ce}, Privileged Access: ${z}`),console.log(`\u{1f5a5}\ufe0f AccountSyncService: Device details - UserAgent: ${navigator.userAgent}, Screen: ${window.screen.width}x${window.screen.height}, Platform: ${navigator.platform}`);const te=v.getAccessibleServices(V);console.log("\u{1f50d} AccountSyncService: Accessible services:",te);const K=[],le=[];let ae=0;for(const he of te){const Le={service:he,total:0,downloaded:0,status:"pending"};K.push(Le);try{Le.status="downloading",v.updateProgress(K);const re=yield v.downloadServiceData(he,M.organization||M.username,z);Le.downloaded=re,Le.total=re,Le.status="completed",ae+=re,console.log(`\u2705 AccountSyncService: ${he} - Downloaded ${re} items`)}catch(re){Le.status="error",Le.error=re instanceof Error?re.message:String(re),le.push(`${he}: ${Le.error}`),console.error(`\u274c AccountSyncService: ${he} - Error:`,re)}v.updateProgress(K)}if(z||(yield v.cleanupNonAccessibleServiceFiles(te,M.organization||M.username)),V>=4)try{console.log("\u{1f504} AccountSyncService: Syncing sites for L4 users"),yield v.siteSyncService.forceSync(),K.push({service:"sites",total:1,downloaded:1,status:"completed"}),ae+=1,console.log("\u2705 AccountSyncService: Sites synced successfully")}catch(he){console.error("\u274c AccountSyncService: Site sync failed:",he),le.push("Site sync failed: "+(he instanceof Error?he.message:"Unknown error"));const Le={service:"sites",total:0,downloaded:0,status:"error",error:he instanceof Error?he.message:"Unknown error"};K.push(Le)}try{console.log("\u{1f33f} AccountSyncService: Syncing species"),yield v.speciesSyncService.forceSync(),K.push({service:"species",total:1,downloaded:1,status:"completed"}),ae+=1,console.log("\u2705 AccountSyncService: Species synced successfully")}catch(he){console.error("\u274c AccountSyncService: Species sync failed:",he),le.push("Species sync failed: "+(he instanceof Error?he.message:"Unknown error"));const Le={service:"species",total:0,downloaded:0,status:"error",error:he instanceof Error?he.message:"Unknown error"};K.push(Le)}try{console.log("\u{1f4cb} AccountSyncService: Uploading monitoring logs to server"),yield v.monitoringLogService.uploadToServer(),console.log("\u2705 AccountSyncService: Monitoring logs uploaded")}catch(he){console.warn("\u26a0\ufe0f AccountSyncService: Monitoring log upload failed:",he)}if(z)try{console.log("\u{1f4e5} AccountSyncService: Downloading all device monitoring logs (L4 desktop)"),yield v.monitoringLogService.downloadAllDeviceLogs(),console.log("\u2705 AccountSyncService: All device monitoring logs downloaded")}catch(he){console.warn("\u26a0\ufe0f AccountSyncService: Monitoring log download failed:",he)}const ve=Date.now()-R,Ne={success:0===le.length,totalDownloaded:ae,services:K,errors:le,isPrivilegedAccess:z,isDesktopAccess:ce};return console.log(`\u{1f3c1} AccountSyncService: Sync completed in ${ve}ms - ${ae} total items downloaded`),Ne})()}getAccessibleServices(v){let V=["pollution","disturbances","flora-fauna","cleanup"];return v>=2&&V.push("health","restoration","outplanting"),V}downloadServiceData(v,M){var R=this;return(0,i.A)(function*(V,ce,z=!1){console.log(`\u{1f4e5} AccountSyncService: Downloading ${V} data for ${z?"ALL ACCOUNTS (Privileged)":`user: ${ce}`}`);const K=yield R.getLocalServiceFiles(V),le=new Set(K.map(re=>R.extractReportId(re)));console.log(`\u{1f4cb} AccountSyncService: Found ${K.length} local ${V} files`);const ae=yield R.fetchFromServer(V,z?null:ce);console.log(`\u{1f310} AccountSyncService: Found ${ae.length} server ${V} records`);const ve=new Set(ae.map(re=>re.report_id));yield R.cleanupLocalFiles(V,ve);const Ne=ae.filter(re=>!le.has(re.report_id));console.log(`\u{1f195} AccountSyncService: ${Ne.length} new ${V} items to download`);let he=0,Le=0;for(const re of Ne)try{yield R.downloadAndSaveItem(V,re,z),he++}catch(Ke){Le++,console.error(`\u274c AccountSyncService: Failed to download ${V} item ${re.report_id}:`,Ke)}return Le>0&&console.warn(`\u26a0\ufe0f AccountSyncService: ${V} - ${Le} items failed to download, ${he} succeeded`),he}).apply(this,arguments)}getAllServiceNames(){return["pollution","disturbances","flora-fauna","cleanup","health","restoration","outplanting"]}cleanupNonAccessibleServiceFiles(v,M){var R=this;return(0,i.A)(function*(){const ce=R.getAllServiceNames().filter(z=>!v.includes(z));if(0!==ce.length){console.log(`\u{1f9f9} AccountSyncService: Cleaning up non-accessible service files for: ${ce.join(", ")}`);for(const z of ce)try{const te=yield R.getLocalServiceFiles(z);if(0===te.length)continue;console.log(`\u{1f50d} AccountSyncService: Checking ${te.length} local ${z} files for ownership`);for(const K of te)try{const le=yield R.sharedDataService.readJsonFile(K);if(!le)continue;const ae=le.submittedBy||"",ve=le._syncMetadata?.originalSubmittedBy||"";!ae&&!ve||ae&&ae.includes(M)||ve&&ve.includes(M)||(yield R.sharedDataService.deleteJsonFile(K),console.log(`\u{1f5d1}\ufe0f AccountSyncService: Deleted non-owned ${z} file: ${K}`))}catch(le){console.warn(`\u26a0\ufe0f AccountSyncService: Error checking file ${K}:`,le)}}catch(te){console.warn(`\u26a0\ufe0f AccountSyncService: Error cleaning up ${z} files:`,te)}}})()}cleanupLocalFiles(v,M){var R=this;return(0,i.A)(function*(){console.log(`\u{1f9f9} AccountSyncService: Cleaning up local ${v} files not on server`);const V=yield R.getLocalServiceFiles(v),z=(new Set(V.map(te=>R.extractReportId(te))),V.filter(te=>{const K=R.extractReportId(te);return!M.has(K)}));console.log(`\u{1f5d1}\ufe0f AccountSyncService: Found ${z.length} local ${v} files to delete`);for(const te of z)try{yield R.sharedDataService.deleteJsonFile(te),console.log(`\u2705 AccountSyncService: Deleted local file ${te}`)}catch(K){console.error(`\u274c AccountSyncService: Failed to delete local file ${te}:`,K)}})()}getLocalServiceFiles(v){var M=this;return(0,i.A)(function*(){try{return(yield M.sharedDataService.listFiles()).filter(V=>{if(V.includes("_report_"))return!1;const z={"flora-fauna":"FloraFauna",biomass:"Biomass",pollution:"Pollution",disturbances:"Disturbances",cleanup:"Cleanup",health:"Health",restoration:"Restoration",outplanting:"Outplanting"}[v];if(!z||!V.startsWith(z))return!1;const te=V.replace(".json","");return new RegExp(`^${z}\\d{8}_\\d{6}$`).test(te)&&!V.includes("_backup")&&!V.includes("_draft")&&!V.includes("_queue")})}catch(R){return console.warn(`\u26a0\ufe0f AccountSyncService: Could not list local files for ${v}:`,R),[]}})()}extractReportId(v){return v.replace(".json","")}fetchFromServer(v,M){var R=this;return(0,i.A)(function*(){try{const V=R.getTableName(v);let ce=R.CLIENT.from(V).select("*");M&&(ce=ce.eq("submitted_by",M));const{data:z,error:te}=yield ce.order("created_at",{ascending:!1});if(te)throw new Error(`Server query failed for ${v}: ${te.message}`);return z||[]}catch(V){throw console.error(`\u274c AccountSyncService: Server fetch failed for ${v}:`,V),V}})()}getTableName(v){return{"flora-fauna":"flora_fauna_reports",pollution:"pollution_reports",disturbances:"disturbances_reports",cleanup:"cleanup_reports",health:"health_reports",restoration:"restoration_reports",outplanting:"outplanting_reports",biomass:"biomass_reports"}[v]||`${v}_reports`}downloadAndSaveItem(v,M){var R=this;return(0,i.A)(function*(V,ce,z=!1){try{const te=R.getStorageBucketName(V);console.log(`\u{1f4c1} AccountSyncService: Downloading from bucket: ${te}, file: ${ce.json_path}`);const{data:K,error:le}=yield R.CLIENT.storage.from(te).download(ce.json_path);if(le)throw console.error(`\u274c AccountSyncService: Storage error for ${V}:`,le),new Error(`Failed to download file ${ce.json_path}: ${JSON.stringify(le)}`);const ae=JSON.parse(yield K.text());ae.photos&&R.serviceHasPhotos(V)&&(yield R.downloadPhotosForReport(ae,V)),ae.status&&(ae.status.sent=!0,ae.status.pending=!1),z&&(ae._syncMetadata={downloadedBy:R.auth.getCurrentUser()?.username||"unknown",downloadTime:(0,o.E)(),privilegedAccess:!0,originalSubmittedBy:ce.submitted_by});const ve=`${ce.report_id}.json`;yield R.sharedDataService.writeJsonFile(ve,ae),console.log(`\u{1f4be} AccountSyncService: ${z?"[PRIVILEGED]":""} Saved ${V} report ${ce.report_id} locally`)}catch(te){throw console.error(`\u274c AccountSyncService: Failed to save ${V} item ${ce.report_id}:`,te),te}}).apply(this,arguments)}getStorageBucketName(v){return{"flora-fauna":"flora-fauna",pollution:"pollution",disturbances:"disturbances",cleanup:"cleanup",health:"health",restoration:"restoration",outplanting:"outplanting",biomass:"biomass"}[v]||`${v}-reports`}getImageBucketName(v){return{"flora-fauna":"flora-fauna-images",pollution:"pollution-images",disturbances:"disturbances-images",cleanup:"cleanup-images",health:"health-images",restoration:"restoration-images",outplanting:"outplanting-images",biomass:"biomass-images"}[v]||`${v}-images`}updateProgress(v){this.syncProgress$.next([...v])}getSyncSummary(){var v=this;return(0,i.A)(function*(){const M=v.auth.getCurrentUser();if(!M)return{};const V=v.getAccessibleServices(M.level||1),ce={};for(const z of V)try{const te=yield v.getLocalServiceFiles(z);ce[z]=te.length}catch{ce[z]=0}return ce})()}forceResyncService(v){var M=this;return(0,i.A)(function*(){const R=M.auth.getCurrentUser();if(!R)throw new Error("User not authenticated");console.log(`\u{1f504} AccountSyncService: Force re-syncing ${v}`);const V=yield M.getLocalServiceFiles(v);for(const z of V)yield M.sharedDataService.deleteJsonFile(z);const ce=(R.level||1)>=4&&M.isDesktopDevice();return M.downloadServiceData(v,R.organization||R.username,ce)})()}isDesktopDevice(){const v=navigator.userAgent.toLowerCase();return/macintosh|windows|linux/i.test(v)&&!/android/i.test(v)}serviceHasPhotos(v){return["flora-fauna","biomass","health","pollution","disturbances","cleanup","restoration","outplanting"].includes(v)}downloadPhotosForReport(v,M){var R=this;return(0,i.A)(function*(){try{const V=R.getImageBucketName(M),ce=v.photos;if(!ce||"object"!=typeof ce)return;if(Array.isArray(ce))for(let z=0;z<ce.length;z++)ce[z]&&"string"==typeof ce[z]&&(ce[z]=yield R.downloadPhotoAsBase64(ce[z],V));else for(const[z,te]of Object.entries(ce))te&&"string"==typeof te&&(ce[z]=yield R.downloadPhotoAsBase64(te,V))}catch(V){console.warn(`\u26a0\ufe0f AccountSyncService: Failed to download photos for ${M}:`,V)}})()}downloadPhotoAsBase64(v,M){var R=this;return(0,i.A)(function*(){try{const{data:V,error:ce}=yield R.CLIENT.storage.from(M).download(v);return ce?(console.warn(`\u26a0\ufe0f AccountSyncService: Failed to download photo ${v}:`,ce),""):`data:image/jpeg;base64,${yield R.blobToBase64(V)}`}catch(V){return console.warn(`\u26a0\ufe0f AccountSyncService: Error converting photo ${v}:`,V),""}})()}blobToBase64(v){return new Promise((M,R)=>{const V=new FileReader;V.onload=()=>{const z=V.result.split(",")[1];M(z)},V.onerror=R,V.readAsDataURL(v)})}static#e=p=()=>(this.\u0275fac=function(M){return new(M||m)(Ce.KVO(De.L),Ce.KVO(B.w),Ce.KVO(Pe.H),Ce.KVO(Ge.N),Ce.KVO(pe.k),Ce.KVO(ie.h),Ce.KVO(Ae.u))},this.\u0275prov=Ce.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}))}return p(),m})()},7303($t,ot,b){"use strict";b.d(ot,{Q:()=>l,Sm:()=>y,Vw:()=>Pe,aZ:()=>v,hb:()=>p,hj:()=>Ge,ig:()=>De,kB:()=>m,om:()=>ie,qj:()=>B,rb:()=>Ce});var i=b(2615),o=b(1413);let D=null;function Ce(){return D}function De(z){D??=z}class B{}let Pe=(()=>{class z{historyGo(K){throw new Error("")}static \u0275fac=function(le){return new(le||z)};static \u0275prov=i.jDH({token:z,factory:()=>(0,i.WQX)(pe),providedIn:"platform"})}return z})();const Ge=new i.nKC("");let pe=(()=>{class z extends Pe{_location;_history;_doc=(0,i.WQX)(i.qQL);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ce().getBaseHref(this._doc)}onPopState(K){const le=Ce().getGlobalEventTarget(this._doc,"window");return le.addEventListener("popstate",K,!1),()=>le.removeEventListener("popstate",K)}onHashChange(K){const le=Ce().getGlobalEventTarget(this._doc,"window");return le.addEventListener("hashchange",K,!1),()=>le.removeEventListener("hashchange",K)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(K){this._location.pathname=K}pushState(K,le,ae){this._history.pushState(K,le,ae)}replaceState(K,le,ae){this._history.replaceState(K,le,ae)}forward(){this._history.forward()}back(){this._history.back()}historyGo(K=0){this._history.go(K)}getState(){return this._history.state}static \u0275fac=function(le){return new(le||z)};static \u0275prov=i.jDH({token:z,factory:()=>new z,providedIn:"platform"})}return z})();function ie(z,te){return z?te?z.endsWith("/")?te.startsWith("/")?z+te.slice(1):z+te:te.startsWith("/")?z+te:`${z}/${te}`:z:te}function Ae(z){const te=z.search(/#|\?|$/);return"/"===z[te-1]?z.slice(0,te-1)+z.slice(te):z}function l(z){return z&&"?"!==z[0]?`?${z}`:z}let p=(()=>{class z{historyGo(K){throw new Error("")}static \u0275fac=function(le){return new(le||z)};static \u0275prov=i.jDH({token:z,factory:()=>(0,i.WQX)(y),providedIn:"root"})}return z})();const m=new i.nKC("");let y=(()=>{class z extends p{_platformLocation;_baseHref;_removeListenerFns=[];constructor(K,le){super(),this._platformLocation=K,this._baseHref=le??this._platformLocation.getBaseHrefFromDOM()??(0,i.WQX)(i.qQL).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}prepareExternalUrl(K){return ie(this._baseHref,K)}path(K=!1){const le=this._platformLocation.pathname+l(this._platformLocation.search),ae=this._platformLocation.hash;return ae&&K?`${le}${ae}`:le}pushState(K,le,ae,ve){const Ne=this.prepareExternalUrl(ae+l(ve));this._platformLocation.pushState(K,le,Ne)}replaceState(K,le,ae,ve){const Ne=this.prepareExternalUrl(ae+l(ve));this._platformLocation.replaceState(K,le,Ne)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(K=0){this._platformLocation.historyGo?.(K)}static \u0275fac=function(le){return new(le||z)(i.KVO(Pe),i.KVO(m,8))};static \u0275prov=i.jDH({token:z,factory:z.\u0275fac,providedIn:"root"})}return z})(),v=(()=>{class z{_subject=new o.B;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(K){this._locationStrategy=K;const le=this._locationStrategy.getBaseHref();this._basePath=function ce(z){if(new RegExp("^(https?:)?//").test(z)){const[,K]=z.split(/\/\/[^\/]+/);return K}return z}(Ae(V(le))),this._locationStrategy.onPopState(ae=>{this._subject.next({url:this.path(!0),pop:!0,state:ae.state,type:ae.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(K=!1){return this.normalize(this._locationStrategy.path(K))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(K,le=""){return this.path()==this.normalize(K+l(le))}normalize(K){return z.stripTrailingSlash(function R(z,te){if(!z||!te.startsWith(z))return te;const K=te.substring(z.length);return""===K||["/",";","?","#"].includes(K[0])?K:te}(this._basePath,V(K)))}prepareExternalUrl(K){return K&&"/"!==K[0]&&(K="/"+K),this._locationStrategy.prepareExternalUrl(K)}go(K,le="",ae=null){this._locationStrategy.pushState(ae,"",K,le),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+l(le)),ae)}replaceState(K,le="",ae=null){this._locationStrategy.replaceState(ae,"",K,le),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+l(le)),ae)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(K=0){this._locationStrategy.historyGo?.(K)}onUrlChange(K){return this._urlChangeListeners.push(K),this._urlChangeSubscription??=this.subscribe(le=>{this._notifyUrlChangeListeners(le.url,le.state)}),()=>{const le=this._urlChangeListeners.indexOf(K);this._urlChangeListeners.splice(le,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(K="",le){this._urlChangeListeners.forEach(ae=>ae(K,le))}subscribe(K,le,ae){return this._subject.subscribe({next:K,error:le??void 0,complete:ae??void 0})}static normalizeQueryParams=l;static joinWithSlash=ie;static stripTrailingSlash=Ae;static \u0275fac=function(le){return new(le||z)(i.KVO(p))};static \u0275prov=i.jDH({token:z,factory:()=>function M(){return new v((0,i.KVO)(p))}(),providedIn:"root"})}return z})();function V(z){return z.replace(/\/index.html$/,"")}},7343($t,ot,b){"use strict";b.d(ot,{hG:()=>H,hB:()=>ge,U1:()=>Jt,el:()=>$r,In:()=>Et,Jm:()=>Un,QW:()=>Cn,b_:()=>ln,I9:()=>Mt,ME:()=>hn,HW:()=>wt,tN:()=>Nt,eY:()=>en,hU:()=>Dn,W9:()=>Zn,M0:()=>_r,lO:()=>Gn,eU:()=>qn,iq:()=>gr,$w:()=>yn,uz:()=>Jn,Dg:()=>vn,he:()=>kt,nf:()=>jt,T6:()=>O,Sb:()=>ze,JI:()=>er,FH:()=>dn,KO:()=>Lr,f0:()=>Ur,Rg:()=>Gr,ln:()=>et,S1:()=>bt,Gp:()=>zt,eP:()=>pn,Nm:()=>tr,Ip:()=>Pr,w2:()=>wn,IO:()=>Tr,nc:()=>Ar,BC:()=>Mr,BY:()=>xr,ai:()=>Dr,bv:()=>ur,Xi:()=>an,W3:()=>Rn,su:()=>Ie,IE:()=>Pn,Je:()=>He,Gw:()=>tt,K_:()=>Yt});var i=b(3664),o=b(2615),D=b(7705),Ce=b(4341),De=b(5032),B=b(1635),Pe=b(3726),Ge=b(7303),pe=b(2200),ie=b(5921),v=(b(2541),b(1841),b(499),b(8313),b(6011),b(6855)),R=(b(4674),b(5705)),V=b(9147),z=(b(9081),b(3827));b(9596),b(8607),b(9431),b(6118);var Ne=b(467);const he=v.i,Le=function(){var X=(0,Ne.A)(function*(Kn,ee){if(!(typeof window>"u"))return yield he(),(0,R.b)(JSON.parse('[["ion-menu_3",[[289,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[289,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[257,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-input-password-toggle",[[289,"ion-input-password-toggle",{"color":[513],"showIcon":[1,"show-icon"],"hideIcon":[1,"hide-icon"],"type":[1025]},null,{"type":["onTypeChange"]}]]],["ion-fab_3",[[289,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[257,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[257,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[256,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[288,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[289,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[289,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[289,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[288,"ion-card-content"],[289,"ion-card-header",{"color":[513],"translucent":[4]}],[289,"ion-card-subtitle",{"color":[513]}],[289,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[289,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[288,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[256,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[305,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32],"hasInteracted":[32]},null,{"value":["valueChanged"]}],[289,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[288,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[256,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[289,"ion-reorder",null,[[2,"click","onClick"]]],[256,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[289,"ion-segment-button",{"contentId":[513,"content-id"],"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[289,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[16,"ionSegmentViewScroll","handleSegmentViewScroll"],[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-chip",[[289,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-input",[[294,"ion-input",{"color":[513],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearInputIcon":[1,"clear-input-icon"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[516],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[516],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"type":[1],"value":[1032],"hasFocus":[32],"isInvalid":[32],"setFocus":[64],"getInputElement":[64]},[[2,"click","onClickCapture"]],{"debounce":["debounceChanged"],"type":["onTypeChange"],"value":["valueChanged"],"dir":["onDirChanged"]}]]],["ion-searchbar",[[290,"ion-searchbar",{"color":[513],"animated":[4],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"lang":["onLangChanged"],"dir":["onDirChanged"],"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[289,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"required":[4],"activated":[32],"isInvalid":[32],"hintTextId":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[257,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64],"getLength":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[256,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-tab_2",[[257,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[257,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-textarea",[[294,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"shape":[1],"hasFocus":[32],"isInvalid":[32],"setFocus":[64],"getInputElement":[64]},[[2,"click","onClickCapture"]],{"debounce":["debounceChanged"],"value":["valueChanged"],"dir":["onDirChanged"]}]]],["ion-backdrop",[[289,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[290,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[289,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[289,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-tab-bar_2",[[289,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[289,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-datetime-button",[[289,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[257,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[289,"ion-avatar"],[289,"ion-badge",{"color":[513]}],[257,"ion-thumbnail"]]],["ion-col_3",[[257,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[257,"ion-grid",{"fixed":[4]}],[257,"ion-row"]]],["ion-img",[[257,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-input-otp",[[294,"ion-input-otp",{"autocapitalize":[1],"color":[513],"disabled":[516],"fill":[1],"inputmode":[1],"length":[2],"pattern":[1],"readonly":[516],"separators":[1],"shape":[1],"size":[1],"type":[1],"value":[1032],"inputValues":[32],"hasFocus":[32],"previousInputValues":[32],"setFocus":[64]},null,{"value":["valueChanged"],"separators":["processSeparators"],"length":["processSeparators"]}]]],["ion-progress-bar",[[289,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[289,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"step":["stepChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-segment-content",[[257,"ion-segment-content"]]],["ion-segment-view",[[289,"ion-segment-view",{"disabled":[4],"isManualScroll":[32],"setContent":[64]},[[1,"scroll","handleScroll"],[1,"touchstart","handleScrollStart"],[1,"touchend","handleTouchEnd"]]]]],["ion-split-pane",[[289,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32],"isVisible":[64]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[257,"ion-text",{"color":[513]}]]],["ion-select-modal",[[290,"ion-select-modal",{"header":[1],"multiple":[4],"options":[16]}]]],["ion-datetime_3",[[289,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"formatOptions":[16],"readonly":[4],"isDateEnabled":[16],"showAdjacentDays":[4,"show-adjacent-days"],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"formatOptions":["formatOptionsChanged"],"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"presentation":["presentationChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[290,"ion-picker-legacy",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[288,"ion-picker-legacy-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-action-sheet",[[290,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"activeRadioId":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[0,"keydown","onKeydown"]],{"buttons":["buttonsChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[290,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-modal",[[289,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"expandToScroll":[4,"expand-to-scroll"],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"focusTrap":[4,"focus-trap"],"canDismiss":[4,"can-dismiss"],"isSheetModal":[32],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},[[9,"resize","onWindowResize"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-picker",[[289,"ion-picker",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-picker-column",[[257,"ion-picker-column",{"disabled":[4],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"ariaLabel":[32],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64],"setFocus":[64]},null,{"aria-label":["ariaLabelChanged"],"value":["valueChange"]}]]],["ion-picker-column-option",[[289,"ion-picker-column-option",{"disabled":[4],"value":[8],"color":[513],"ariaLabel":[32]},null,{"aria-label":["onAriaLabelChange"]}]]],["ion-popover",[[289,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"focusTrap":[4,"focus-trap"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[289,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"required":[4],"isInvalid":[32],"hintTextId":[32],"setFocus":[64]}]]],["ion-item_8",[[289,"ion-item-divider",{"color":[513],"sticky":[4]}],[288,"ion-item-group"],[289,"ion-note",{"color":[513]}],[257,"ion-skeleton-text",{"animated":[4]}],[294,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[289,"ion-list-header",{"color":[513],"lines":[1]}],[289,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[516],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32],"isInteractive":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"]}],[288,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}]]],["ion-app_8",[[256,"ion-app",{"setFocus":[64]}],[292,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[257,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[257,"ion-content",{"color":[513],"fullscreen":[4],"fixedSlotPlacement":[1,"fixed-slot-placement"],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"recalculateDimensions":[64],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[292,"ion-header",{"collapse":[1],"translucent":[4]}],[289,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[289,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[294,"ion-buttons",{"collapse":[4]}]]],["ion-select_3",[[289,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"required":[4],"isExpanded":[32],"hasFocus":[32],"isInvalid":[32],"hintTextId":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[257,"ion-select-option",{"disabled":[4],"value":[8]}],[290,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-spinner",[[257,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-radio_2",[[289,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"]}],[292,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032],"helperText":[1,"helper-text"],"errorText":[1,"error-text"],"isInvalid":[32],"hintTextId":[32],"setFocus":[64]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[257,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[289,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1],"isCircle":[32]},null,{"disabled":["disabledChanged"],"aria-checked":["onAriaChanged"],"aria-label":["onAriaChanged"],"aria-pressed":["onAriaChanged"]}],[257,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]]]'),ee)});return function(ee,N){return X.apply(this,arguments)}}();!function(){if(typeof window<"u"&&void 0!==window.Reflect&&void 0!==window.customElements){var X=HTMLElement;window.HTMLElement=function(){return Reflect.construct(X,[],this.constructor)},HTMLElement.prototype=X.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,X)}}();const re=["*"],Ke=["outletContent"];function be(X,Kn){if(1&X&&(i.j41(0,"div",1),i.eu8(1,2),i.k0s()),2&X){const ee=i.XpG();i.R7$(),i.Y8G("ngTemplateOutlet",ee.template)}}let ge=(()=>{class X extends De.fL{constructor(ee,N){super(ee,N)}writeValue(ee){this.elementRef.nativeElement.checked=this.lastValue=ee,(0,De.z3)(this.elementRef)}_handleIonChange(ee){this.handleValueChange(ee,ee.checked)}static \u0275fac=function(N){return new(N||X)(i.rXU(o.zZn),i.rXU(i.aKT))};static \u0275dir=i.FsC({type:X,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(N,Me){1&N&&i.bIt("ionChange",function(vr){return Me._handleIonChange(vr.target)})},standalone:!1,features:[i.Jv_([{provide:Ce.kq,useExisting:X,multi:!0}]),i.Vt3]})}return X})(),Ie=(()=>{class X extends De.fL{el;constructor(ee,N){super(ee,N),this.el=N}handleInputEvent(ee){this.handleValueChange(ee,ee.value)}registerOnChange(ee){super.registerOnChange("ION-INPUT"===this.el.nativeElement.tagName||"ION-INPUT-OTP"===this.el.nativeElement.tagName?N=>{ee(""===N?null:parseFloat(N))}:ee)}static \u0275fac=function(N){return new(N||X)(i.rXU(o.zZn),i.rXU(i.aKT))};static \u0275dir=i.FsC({type:X,selectors:[["ion-input","type","number"],["ion-input-otp",3,"type","text"],["ion-range"]],hostBindings:function(N,Me){1&N&&i.bIt("ionInput",function(vr){return Me.handleInputEvent(vr.target)})},standalone:!1,features:[i.Jv_([{provide:Ce.kq,useExisting:X,multi:!0}]),i.Vt3]})}return X})(),He=(()=>{class X extends De.fL{constructor(ee,N){super(ee,N)}_handleChangeEvent(ee){this.handleValueChange(ee,ee.value)}static \u0275fac=function(N){return new(N||X)(i.rXU(o.zZn),i.rXU(i.aKT))};static \u0275dir=i.FsC({type:X,selectors:[["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(N,Me){1&N&&i.bIt("ionChange",function(vr){return Me._handleChangeEvent(vr.target)})},standalone:!1,features:[i.Jv_([{provide:Ce.kq,useExisting:X,multi:!0}]),i.Vt3]})}return X})(),tt=(()=>{class X extends De.fL{constructor(ee,N){super(ee,N)}_handleInputEvent(ee){this.handleValueChange(ee,ee.value)}static \u0275fac=function(N){return new(N||X)(i.rXU(o.zZn),i.rXU(i.aKT))};static \u0275dir=i.FsC({type:X,selectors:[["ion-input",3,"type","number"],["ion-input-otp","type","text"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(N,Me){1&N&&i.bIt("ionInput",function(vr){return Me._handleInputEvent(vr.target)})},standalone:!1,features:[i.Jv_([{provide:Ce.kq,useExisting:X,multi:!0}]),i.Vt3]})}return X})();const dt=(X,Kn)=>{const ee=X.prototype;Kn.forEach(N=>{Object.defineProperty(ee,N,{get(){return this.el[N]},set(Me){this.z.runOutsideAngular(()=>this.el[N]=Me)},configurable:!0})})},St=(X,Kn)=>{const ee=X.prototype;Kn.forEach(N=>{ee[N]=function(){const Me=arguments;return this.z.runOutsideAngular(()=>this.el[N].apply(this.el,Me))}})},vt=(X,Kn,ee)=>{ee.forEach(N=>X[N]=(0,Pe.R)(Kn,N))};function lt(X){return function(ee){const{defineCustomElementFn:N,inputs:Me,methods:Nn}=X;return void 0!==N&&N(),Me&&dt(ee,Me),Nn&&St(ee,Nn),ee}}let Jt=(()=>{let X=class ef{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||ef)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:ef,selectors:[["ion-app"]],standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({methods:["setFocus"]})],X),X})(),Et=(()=>{let X=class rf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||rf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:rf,selectors:[["ion-badge"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","mode"]})],X),X})(),Un=(()=>{let X=class lf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement,vt(this,this.el,["ionFocus","ionBlur"])}static \u0275fac=function(N){return new(N||lf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:lf,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],X),X})(),Cn=(()=>{let X=class cf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||cf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:cf,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["collapse"]})],X),X})(),ln=(()=>{let X=class uf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||uf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:uf,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],X),X})(),Mt=(()=>{let X=class df{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||df)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:df,selectors:[["ion-card-content"]],inputs:{mode:"mode"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["mode"]})],X),X})(),hn=(()=>{let X=class ff{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||ff)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:ff,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","mode","translucent"]})],X),X})(),wt=(()=>{let X=class hf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||hf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:hf,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","mode"]})],X),X})(),Nt=(()=>{let X=class pf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||pf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:pf,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","mode"]})],X),X})(),en=(()=>{let X=class gf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement,vt(this,this.el,["ionChange","ionFocus","ionBlur"])}static \u0275fac=function(N){return new(N||gf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:gf,selectors:[["ion-checkbox"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",errorText:"errorText",helperText:"helperText",indeterminate:"indeterminate",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",required:"required",value:"value"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["alignment","checked","color","disabled","errorText","helperText","indeterminate","justify","labelPlacement","mode","name","required","value"]})],X),X})(),Dn=(()=>{let X=class vf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||vf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:vf,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],X),X})(),Zn=(()=>{let X=class _f{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement,vt(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}static \u0275fac=function(N){return new(N||_f)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:_f,selectors:[["ion-content"]],inputs:{color:"color",fixedSlotPlacement:"fixedSlotPlacement",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","fixedSlotPlacement","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],X),X})(),_r=(()=>{let X=class Cf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||Cf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:Cf,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["collapse","mode","translucent"]})],X),X})(),Gn=(()=>{let X=class Af{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||Af)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:Af,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["fixed"]})],X),X})(),qn=(()=>{let X=class wf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||wf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:wf,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["collapse","mode","translucent"]})],X),X})(),gr=(()=>{let X=class If{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||If)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:If,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],X),X})(),yn=(()=>{let X=class Pf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement,vt(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}static \u0275fac=function(N){return new(N||Pf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:Pf,selectors:[["ion-input"]],inputs:{autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearInputIcon:"clearInputIcon",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearInputIcon","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],X),X})(),Jn=(()=>{let X=class kf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||kf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:kf,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],X),X})(),vn=(()=>{let X=class Lf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||Lf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:Lf,selectors:[["ion-item-divider"]],inputs:{color:"color",mode:"mode",sticky:"sticky"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","mode","sticky"]})],X),X})(),kt=(()=>{let X=class Bf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||Bf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:Bf,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","mode","position"]})],X),X})(),jt=(()=>{let X=class jf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||jf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:jf,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],X),X})(),er=(()=>{let X=class Xf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||Xf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:Xf,selectors:[["ion-note"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","mode"]})],X),X})(),dn=(()=>{let X=class Zf{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||Zf)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:Zf,selectors:[["ion-progress-bar"]],inputs:{buffer:"buffer",color:"color",mode:"mode",reversed:"reversed",type:"type",value:"value"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["buffer","color","mode","reversed","type","value"]})],X),X})(),Lr=(()=>{let X=class eh{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement,vt(this,this.el,["ionFocus","ionBlur"])}static \u0275fac=function(N){return new(N||eh)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:eh,selectors:[["ion-radio"]],inputs:{alignment:"alignment",color:"color",disabled:"disabled",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["alignment","color","disabled","justify","labelPlacement","mode","name","value"]})],X),X})(),Ur=(()=>{let X=class th{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement,vt(this,this.el,["ionChange"])}static \u0275fac=function(N){return new(N||th)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:th,selectors:[["ion-radio-group"]],inputs:{allowEmptySelection:"allowEmptySelection",compareWith:"compareWith",errorText:"errorText",helperText:"helperText",name:"name",value:"value"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["allowEmptySelection","compareWith","errorText","helperText","name","value"]})],X),X})(),et=(()=>{let X=class lh{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||lh)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:lh,selectors:[["ion-row"]],standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({})],X),X})(),bt=(()=>{let X=class ch{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement,vt(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}static \u0275fac=function(N){return new(N||ch)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:ch,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["animated","autocapitalize","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],X),X})(),zt=(()=>{let X=class uh{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement,vt(this,this.el,["ionChange"])}static \u0275fac=function(N){return new(N||uh)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:uh,selectors:[["ion-segment"]],inputs:{color:"color",disabled:"disabled",mode:"mode",scrollable:"scrollable",selectOnFocus:"selectOnFocus",swipeGesture:"swipeGesture",value:"value"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","disabled","mode","scrollable","selectOnFocus","swipeGesture","value"]})],X),X})(),pn=(()=>{let X=class dh{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||dh)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:dh,selectors:[["ion-segment-button"]],inputs:{contentId:"contentId",disabled:"disabled",layout:"layout",mode:"mode",type:"type",value:"value"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["contentId","disabled","layout","mode","type","value"]})],X),X})(),tr=(()=>{let X=class ph{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement,vt(this,this.el,["ionChange","ionCancel","ionDismiss","ionFocus","ionBlur"])}static \u0275fac=function(N){return new(N||ph)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:ph,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",color:"color",compareWith:"compareWith",disabled:"disabled",errorText:"errorText",expandedIcon:"expandedIcon",fill:"fill",helperText:"helperText",interface:"interface",interfaceOptions:"interfaceOptions",justify:"justify",label:"label",labelPlacement:"labelPlacement",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",required:"required",selectedText:"selectedText",shape:"shape",toggleIcon:"toggleIcon",value:"value"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["cancelText","color","compareWith","disabled","errorText","expandedIcon","fill","helperText","interface","interfaceOptions","justify","label","labelPlacement","mode","multiple","name","okText","placeholder","required","selectedText","shape","toggleIcon","value"],methods:["open"]})],X),X})(),Pr=(()=>{let X=class mh{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||mh)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:mh,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["disabled","value"]})],X),X})(),wn=(()=>{let X=class _h{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||_h)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:_h,selectors:[["ion-spinner"]],inputs:{color:"color",duration:"duration",name:"name",paused:"paused"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","duration","name","paused"]})],X),X})(),Tr=(()=>{let X=class Sh{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||Sh)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:Sh,selectors:[["ion-text"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","mode"]})],X),X})(),Ar=(()=>{let X=class Ch{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement,vt(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}static \u0275fac=function(N){return new(N||Ch)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:Ch,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",shape:"shape",spellcheck:"spellcheck",value:"value",wrap:"wrap"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","maxlength","minlength","mode","name","placeholder","readonly","required","rows","shape","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],X),X})(),Mr=(()=>{let X=class wh{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||wh)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:wh,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","size"]})],X),X})(),xr=(()=>{let X=class Th{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement,vt(this,this.el,["ionChange","ionFocus","ionBlur"])}static \u0275fac=function(N){return new(N||Th)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:Th,selectors:[["ion-toggle"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",enableOnOffLabels:"enableOnOffLabels",errorText:"errorText",helperText:"helperText",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",required:"required",value:"value"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["alignment","checked","color","disabled","enableOnOffLabels","errorText","helperText","justify","labelPlacement","mode","name","required","value"]})],X),X})(),Dr=(()=>{let X=class Mh{z;el;constructor(ee,N,Me){this.z=Me,ee.detach(),this.el=N.nativeElement}static \u0275fac=function(N){return new(N||Mh)(i.rXU(D.gRc),i.rXU(i.aKT),i.rXU(i.SKi))};static \u0275cmp=i.VBU({type:Mh,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},standalone:!1,ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})};return X=(0,B.Cg)([lt({inputs:["color","mode"]})],X),X})(),Gr=(()=>{class X extends De.Rg{parentOutlet;outletContent;constructor(ee,N,Me,Nn,vr,zr,Xr,oo){super(ee,N,Me,Nn,vr,zr,Xr,oo),this.parentOutlet=oo}static \u0275fac=function(N){return new(N||X)(i.kS0("name"),i.kS0("tabs"),i.rXU(Ge.aZ),i.rXU(i.aKT),i.rXU(ie.Ix),i.rXU(i.SKi),i.rXU(ie.nX),i.rXU(X,12))};static \u0275cmp=i.VBU({type:X,selectors:[["ion-router-outlet"]],viewQuery:function(N,Me){if(1&N&&i.GBs(Ke,7,i.c1b),2&N){let Nn;i.mGM(Nn=i.lsd())&&(Me.outletContent=Nn.first)}},standalone:!1,features:[i.Vt3],ngContentSelectors:re,decls:3,vars:0,consts:[["outletContent",""]],template:function(N,Me){1&N&&(i.NAR(),i.qex(0,null,0),i.SdG(2),i.bVm())},encapsulation:2})}return X})(),$r=(()=>{class X extends De.el{constructor(ee,N,Me,Nn,vr,zr){super(ee,N,Me,Nn,vr,zr)}static \u0275fac=function(N){return new(N||X)(i.rXU(Gr,8),i.rXU(De.q9),i.rXU(De.TS),i.rXU(i.aKT),i.rXU(i.SKi),i.rXU(D.gRc))};static \u0275cmp=i.VBU({type:X,selectors:[["ion-back-button"]],standalone:!1,features:[i.Vt3],ngContentSelectors:re,decls:1,vars:0,template:function(N,Me){1&N&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})}return X})(),ze=(()=>{class X extends De.Sb{static \u0275fac=(()=>{let ee;return function(Me){return(ee||(ee=i.xGo(X)))(Me||X)}})();static \u0275cmp=i.VBU({type:X,selectors:[["ion-modal"]],standalone:!1,features:[i.Vt3],decls:1,vars:1,consts:[["class","ion-delegate-host ion-page",4,"ngIf"],[1,"ion-delegate-host","ion-page"],[3,"ngTemplateOutlet"]],template:function(N,Me){1&N&&i.DNE(0,be,2,1,"div",0),2&N&&i.Y8G("ngIf",Me.isCmpOpen||Me.keepContentsMounted)},dependencies:[pe.bT,pe.T3],encapsulation:2,changeDetection:0})}return X})();const _={provide:Ce.cz,useExisting:(0,o.Rfq)(()=>k),multi:!0};let k=(()=>{class X extends Ce.zX{static \u0275fac=(()=>{let ee;return function(Me){return(ee||(ee=i.xGo(X)))(Me||X)}})();static \u0275dir=i.FsC({type:X,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(N,Me){2&N&&i.BMQ("max",Me._enabled?Me.max:null)},standalone:!1,features:[i.Jv_([_]),i.Vt3]})}return X})();const C={provide:Ce.cz,useExisting:(0,o.Rfq)(()=>O),multi:!0};let O=(()=>{class X extends Ce.VZ{static \u0275fac=(()=>{let ee;return function(Me){return(ee||(ee=i.xGo(X)))(Me||X)}})();static \u0275dir=i.FsC({type:X,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(N,Me){2&N&&i.BMQ("min",Me._enabled?Me.min:null)},standalone:!1,features:[i.Jv_([C]),i.Vt3]})}return X})(),H=(()=>{class X extends De.Kb{constructor(){super(z.a)}static \u0275fac=function(N){return new(N||X)};static \u0275prov=o.jDH({token:X,factory:X.\u0275fac,providedIn:"root"})}return X})(),an=(()=>{class X extends De.Kb{constructor(){super(z.l)}static \u0275fac=function(N){return new(N||X)};static \u0275prov=o.jDH({token:X,factory:X.\u0275fac,providedIn:"root"})}return X})(),Rn=(()=>{class X extends De.Kb{angularDelegate=(0,o.WQX)(De.Yq);injector=(0,o.WQX)(o.zZn);environmentInjector=(0,o.WQX)(o.uvJ);constructor(){super(z.m)}create(ee){return super.create({...ee,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}static \u0275fac=function(N){return new(N||X)};static \u0275prov=o.jDH({token:X,factory:X.\u0275fac})}return X})();class Pn extends De.Kb{angularDelegate=(0,o.WQX)(De.Yq);injector=(0,o.WQX)(o.zZn);environmentInjector=(0,o.WQX)(o.uvJ);constructor(){super(z.c)}create(Kn){return super.create({...Kn,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}let Yt=(()=>{class X extends De.Kb{constructor(){super(z.t)}static \u0275fac=function(N){return new(N||X)};static \u0275prov=o.jDH({token:X,factory:X.\u0275fac,providedIn:"root"})}return X})();const jn=(X,Kn,ee)=>()=>{const N=Kn.defaultView;if(N&&typeof window<"u"){(0,V.s)({...X,_zoneGate:Nn=>ee.run(Nn)});const Me="__zone_symbol__addEventListener"in Kn.body?"__zone_symbol__addEventListener":"addEventListener";return Le(N,{exclude:["ion-tabs"],syncQueue:!0,raf:De.er,jmp:Nn=>ee.runOutsideAngular(Nn),ael(Nn,vr,zr,Xr){Nn[Me](vr,zr,Xr)},rel(Nn,vr,zr,Xr){Nn.removeEventListener(vr,zr,Xr)}})}};let ur=(()=>{class X{static forRoot(ee={}){return{ngModule:X,providers:[{provide:De.sR,useValue:ee},{provide:i.hnV,useFactory:jn,multi:!0,deps:[De.sR,o.qQL,i.SKi]},De.Yq,(0,De.YV)()]}}static \u0275fac=function(N){return new(N||X)};static \u0275mod=i.$C({type:X});static \u0275inj=o.G2t({providers:[Rn,Pn],imports:[pe.MD]})}return X})()},7441($t,ot,b){"use strict";b.d(ot,{X:()=>i});const i=o=>o&&"number"==typeof o.length&&"function"!=typeof o},7522($t,ot,b){"use strict";b.d(ot,{$:()=>Ge});var i=b(467),o=b(2084),D=b(2615),Ce=b(918),De=b(5029),B=b(4938),Pe=b(8863);let Ge=(()=>{var pe;class ie{constructor(l,p,m,y){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=y,this.REPORTS_BUCKET="cleanup",this.IMAGES_BUCKET="cleanup-images",this.DRAFT_FILE="cleanup_draft_current.json",this.PENDING_QUEUE_FILE="cleanup_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} CleanupSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} CleanupSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(v=>console.error("\u274c CleanupSyncService: processPendingQueue failed:",v))}),setTimeout(()=>{console.log("\u{1f680} CleanupSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(v=>console.error("\u274c CleanupSyncService: Initial queue check failed:",v))},8e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 CleanupSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(v=>console.error("\u274c CleanupSyncService: Periodic queue check failed:",v))},3e5),console.log("\u2705 CleanupSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Cleanup${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[],v=["flipFlops","toys","bagsBottles","pens","toothbrushes","lollipopSticks","juicePackets","cigaretteButts","foodWrappers","takeAwayContainers","lids","bottleCaps","beverageBottles","straws","forksKnivesSpoons","bags","cupsPlates","plasticBottle","toothpasteTubes","elasticBands","boxPackaging","wipesPacket","foam","largeFoam","foamPieces","balloons","lighters","householdItems","diapersSanitary","wipes","rubber","biologicalWaste","wovenPlastic"].reduce((V,ce)=>V+(l?.[ce]||0),0);v>0&&m.push(`${v} plastics`);const R=["lures","fishingLineRopes","nets","buoysFloats","otherFishingGear"].reduce((V,ce)=>V+(l?.[ce]||0),0);return R>0&&m.push(`${R} fishing gear`),l?.totalWeight>0&&m.push(`${l.totalWeight}kg`),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"cleanup"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",y=l?.quadNumber||"";let v=`cleanup_draft_${p}`;return m&&(v+=`_zone${m}`),y&&(v+=`_quad${y}`),`${v}.json`}dataUrlToBlob(l){return(0,i.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,i.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,i.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("CleanupSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=l.reportId||p.generateReportId(),v={reportId:y,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos||[],status:l.status||{incomplete:!0,sent:!1,pending:!1}},M=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(M,v);const R=yield p.sharedDataService.readJsonFile(M);if(!R||R.reportId!==v.reportId)throw new Error("CleanupSyncService: draft verification failed");const V=yield p.storage.getUser(),ce=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(V?.username||"unknown","cleanup",y,ce)})()}loadDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,i.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(v=>v.startsWith("cleanup_draft_")),y=[];for(const v of m)try{const M=yield l.sharedDataService.readJsonFile(v);if(M){const R=l.getLocationLabelFromFilename(v,M.form);y.push({draft:M,locationLabel:R})}}catch(M){console.warn("CleanupSyncService: Failed to read draft file",v,M)}return y})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,i.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,i.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:y}of m)p.push({report:y,status:"draft"});try{const v=(yield l.sharedDataService.listFiles()).filter(M=>{if(!M.startsWith("Cleanup")||M.includes("_report_"))return!1;const R=M.replace(".json","");return/^Cleanup\d{8}_\d{6}$/.test(R)&&!M.includes("_backup")&&!M.includes("_draft")&&!M.includes("_queue")});for(const M of v)try{const R=yield l.sharedDataService.readJsonFile(M);R&&p.push({report:R,status:R.status.sent?"submitted":"pending"})}catch(R){console.warn("CleanupSyncService: Failed to read report file",M,R)}}catch(y){console.error("CleanupSyncService: Failed to list files:",y)}return p.sort((y,v)=>{const M=new Date(y.report.updatedAt||y.report.createdAt).getTime();return new Date(v.report.updatedAt||v.report.createdAt).getTime()-M}),p})()}submitFinal(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=!0===l.isEditMode,v=l.existingReportId||p.generateReportId();let M=m;try{const ae=yield p.sharedDataService.readJsonFile(`${v}.json`);ae?.createdAt&&(M=ae.createdAt)}catch{}const R={reportId:v,createdAt:M,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:[...l.photos||[]],status:{incomplete:!1,sent:!1,pending:!1}};y&&(R.editedAt=m);const V=`${v}.json`;yield p.sharedDataService.writeJsonFile(V,R);const ce=yield p.sharedDataService.readJsonFile(V);if(!ce||ce.reportId!==v)throw new Error("CleanupSyncService: local report verification failed");const z=yield p.storage.getUser(),te=z?z.organization||z.username:null;let K;if(l.originalSubmittedBy&&te&&l.originalSubmittedBy!==te?K=`${l.originalSubmittedBy}, ${te}`:te&&(K=te),R.submittedBy=K,yield p.sharedDataService.writeJsonFile(V,R),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:v,localReportFile:V}),{reportId:v,queued:!0};try{yield p.uploadReportAndImages(R,l.originalSubmittedBy),R.status.sent=!0,R.status.pending=!1,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.clearDraft();const ve=(yield p.storage.getUser())?.username||"unknown",Ne=p.getFormSummary(l.formValue),he=R.submittedBy;return y?p.monitoringLog.recordFormEdited(ve,"cleanup",v,!1,Ne,he):p.monitoringLog.recordFormSubmitted(ve,"cleanup",v,!1,Ne,he),{reportId:v,queued:!1}}catch(ae){const ve=String(ae?.message?ae.message:ae);R.status.pending=!0,R.status.lastError=ve,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.enqueuePending({reportId:v,localReportFile:V});const he=(yield p.storage.getUser())?.username||"unknown",Le=p.getFormSummary(l.formValue),re=R.submittedBy;return y?p.monitoringLog.recordFormEdited(he,"cleanup",v,!0,Le,re):p.monitoringLog.recordFormSubmitted(he,"cleanup",v,!0,Le,re),{reportId:v,queued:!0}}})()}enqueuePending(l){var p=this;return(0,i.A)(function*(){console.log("\u{1f4dd} CleanupSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(v=>v.reportId===l.reportId)?console.log("\u26a0\ufe0f CleanupSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 CleanupSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} CleanupSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,i.A)(function*(){if(console.log("\u{1f504} CleanupSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f CleanupSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f CleanupSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} CleanupSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 CleanupSyncService: Queue is empty, nothing to process");const m=[];for(const y of p.items){console.log("\u{1f50d} CleanupSyncService: Processing item:",y.reportId,"(attempt",y.attempts+1,")");try{const v=yield l.sharedDataService.readJsonFile(y.localReportFile);if(!v){console.error("\u274c CleanupSyncService: Local report file missing for",y.reportId),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(v),console.log("\u2705 CleanupSyncService: Upload succeeded for",y.reportId),v.status.sent=!0,v.status.pending=!1,v.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(y.localReportFile,v),console.log("\u{1f4be} CleanupSyncService: Marked report as sent")}catch(v){console.error("\u274c CleanupSyncService: Upload failed for",y.reportId,":",v),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} CleanupSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} CleanupSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,i.A)(function*(){console.log("\u{1f4e4} CleanupSyncService: Starting upload for report",l.reportId);const y=m.getClient(),v=[];for(let le=0;le<(l.photos||[]).length;le++){const ae=l.photos[le],ve=yield m.uploadImageDataUrl(`${l.reportId}/photo_${le+1}.jpg`,ae);v.push(ve)}const M=JSON.parse(JSON.stringify(l));M.photos=v,M.status={incomplete:!1,sent:!0,pending:!1};const R=`${l.reportId}.json`,V=new Blob([JSON.stringify(M)],{type:"application/json"}),{error:ce}=yield y.storage.from(m.REPORTS_BUCKET).upload(R,V,{contentType:"application/json",upsert:!0});if(ce)throw console.error("\u274c CleanupSyncService: JSON upload error:",ce),ce;console.log("\u2705 CleanupSyncService: Successfully uploaded JSON to",R);let z=l.submittedBy||null;if(!z){const le=yield m.storage.getUser();z=le?le.organization||le.username:null}const te={report_id:l.reportId,submitted_by:z,json_path:R,cleanup_date:l.form.date||null,team:l.form.team||null,location:l.form.location||null,zone_number:l.form.zoneNumber?`Zone ${l.form.zoneNumber}`:null,quad_number:l.form.quadNumber?`Quad ${l.form.quadNumber.replace(/\D/g,"")}`:null,total_weight:l.form.totalWeight||null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:K}=yield y.from("cleanup_reports").upsert(te,{onConflict:"report_id"});if(K)throw console.error("\u274c CleanupSyncService: Database upsert error:",K),K;console.log("\u2705 CleanupSyncService: Successfully upserted into cleanup_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,i.A)(function*(){const y=m.getClient(),v=yield m.dataUrlToBlob(p),{error:M}=yield y.storage.from(m.IMAGES_BUCKET).upload(l,v,{contentType:v.type||"image/jpeg",upsert:!0});if(M)throw console.error("\u274c CleanupSyncService: Image upload error for",l,":",M),M;return console.log("\u2705 CleanupSyncService: Successfully uploaded image to",l),l})()}static#e=pe=()=>(this.\u0275fac=function(p){return new(p||ie)(D.KVO(Ce.H),D.KVO(De.L),D.KVO(B.w),D.KVO(Pe.u))},this.\u0275prov=D.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return pe(),ie})()},7643($t,ot,b){"use strict";b.d(ot,{k:()=>ie});var i=b(467),o=b(2084),D=b(4412),Ce=b(5312),De=b(2615),B=b(5029),Pe=b(918),Ge=b(3205),pe=b(8863);let ie=(()=>{var Ae;class l{constructor(m,y,v,M){this.supabaseService=m,this.sharedDataService=y,this.auth=v,this.monitoringLog=M,this.SITES_TABLE="sites",this.LOCAL_SITES_FILE="local_sites.json",this.SYNC_TIMESTAMP_FILE="sites_last_sync.json",this.PENDING_REQUESTS_FILE="pending_site_requests.json",this.MAX_RETRY_ATTEMPTS=10,this.RETRY_DELAYS=[5e3,15e3,3e4,6e4,3e5,6e5,18e5,36e5,72e5,144e5],this.sitesSubject=new D.t([]),this.sites$=this.sitesSubject.asObservable(),this.pendingRequests=[],this.retryTimer=null,console.log(" SiteSyncService: Initializing..."),this.initializeSites(),this.loadPendingRequests(),window.addEventListener("online",()=>{console.log(" SiteSyncService: ONLINE event detected - triggering sync"),this.syncWithServer().catch(R=>console.error(" SiteSyncService: sync failed:",R)),this.processPendingRequests().catch(R=>console.error(" SiteSyncService: Failed to process pending requests:",R))}),setInterval(()=>{console.log(" SiteSyncService: 5-minute periodic sync"),this.syncWithServer().catch(R=>console.error(" SiteSyncService: Periodic sync failed:",R))},3e5),setInterval(()=>{this.processPendingRequests().catch(R=>console.error(" SiteSyncService: Failed to process pending requests:",R))},6e4)}getClient(){return this.supabaseService.getClient()}initializeSites(){var m=this;return(0,i.A)(function*(){try{const y=yield m.loadLocalSites();if(0===y.length)yield m.syncWithServer();else if(y.some(M=>void 0===M.approved)){console.log(" SiteSyncService: Migrating old sites to include approved property");const M=y.map(R=>({...R,approved:void 0!==R.approved?R.approved:!R.requires_permission}));yield m.saveLocalSites(M),m.sitesSubject.next(M)}else m.sitesSubject.next(y)}catch(y){console.error(" SiteSyncService: Error initializing sites:",y)}})()}loadLocalSites(){var m=this;return(0,i.A)(function*(){try{return(yield m.sharedDataService.readJsonFile(m.LOCAL_SITES_FILE))||[]}catch(y){return console.error(" SiteSyncService: Error loading local sites:",y),[]}})()}saveLocalSites(m){var y=this;return(0,i.A)(function*(){try{yield y.sharedDataService.writeJsonFile(y.LOCAL_SITES_FILE,m)}catch(v){console.error(" SiteSyncService: Error saving local sites:",v)}})()}addNewSite(m){var y=this;return(0,i.A)(function*(){if(navigator.onLine)try{yield y.syncWithServer()}catch{}const v=y.auth.getCurrentUser(),M=v?.level||1,R=M<4,V={...m,id:y.generateSiteId(),added_at:(0,o.E)(),synced:!1,requires_permission:R,permission_requested:R,approved:!R};try{const z=[...yield y.loadLocalSites(),V];return yield y.saveLocalSites(z),y.sitesSubject.next(z),M>=4?(navigator.onLine?y.uploadAndSyncSite(V).catch(K=>{console.error(" SiteSyncService: Error syncing new site to server:",K),y.addToPendingQueue(V)}):(console.log(" SiteSyncService: Device offline, adding site to pending queue"),y.addToPendingQueue(V)),console.log(" SiteSyncService: L4 site added:",V.name)):(console.log(` SiteSyncService: L${M} site added locally (permission required):`,V.name),y.requestSitePermission(V,M).catch(K=>{console.error(" SiteSyncService: Error requesting site permission:",K)})),y.monitoringLog.recordSiteAdded(v?.username||v?.email||"unknown",V.name,R),V}catch(ce){throw console.error(" SiteSyncService: Error adding new site:",ce),ce}})()}syncSingleSiteToServer(m){var y=this;return(0,i.A)(function*(){try{const v=y.getClient(),M={id:m.id||crypto.randomUUID(),name:m.name,description:m.description,gps_latitude:m.gps_latitude,gps_longitude:m.gps_longitude,added_by:m.added_by,added_at:m.added_at,map_path:m.map_path||m.site_photo||"assets/maps/generic_map.jpg",site_photo:m.site_photo,site_map:m.site_map,zones:m.zones?JSON.stringify(m.zones):null,sample_points:m.sample_points?JSON.stringify(m.sample_points):null,requires_permission:m.requires_permission||!1,permission_requested:m.permission_requested||!1,approved:void 0===m.approved||m.approved},{data:R,error:V}=yield v.from(y.SITES_TABLE).upsert(M,{onConflict:"name"}).select().single();if(V)throw console.error(" SiteSyncService: Supabase error:",V),V;const z=(yield y.loadLocalSites()).map(te=>te.name===m.name?{...te,id:R.id,synced:!0}:te);yield y.saveLocalSites(z),y.sitesSubject.next(z),console.log(" SiteSyncService: Site synced to server:",m.name)}catch(v){throw console.error(" SiteSyncService: Error syncing site to server:",v),v}})()}uploadAndSyncSite(m){var y=this;return(0,i.A)(function*(){const v=yield y.uploadPendingPhotos(m);yield y.updateLocalSitePhotos(m.name,v),yield y.syncSingleSiteToServer(v)})()}syncWithServer(){var m=this;return(0,i.A)(function*(){try{const y=m.getClient(),v=yield m.getLastSyncTimestamp();let M=y.from(m.SITES_TABLE).select("*");v&&(M=M.gt("added_at",v));const{data:R,error:V}=yield M;if(V)return void console.error(" SiteSyncService: Error fetching from server:",V);if(R&&R.length>0){const ce=yield m.loadLocalSites(),z=R.map(K=>({id:K.id,name:K.name,description:K.description,gps_latitude:K.gps_latitude,gps_longitude:K.gps_longitude,added_by:K.added_by,added_at:K.added_at,map_path:K.map_path,zones:K.zones?"string"==typeof K.zones?JSON.parse(K.zones):K.zones:[],sample_points:K.sample_points?"string"==typeof K.sample_points?JSON.parse(K.sample_points):K.sample_points:[],synced:!0,requires_permission:K.requires_permission||!1,permission_requested:K.permission_requested||!1,approved:void 0!==K.approved?K.approved:!K.requires_permission})),te=m.mergeSites(ce,z);yield m.saveLocalSites(te),m.sitesSubject.next(te),console.log(" SiteSyncService: Synced",R.length,"sites from server")}yield m.syncUnsyncedSites(),yield m.cleanupOrphanedSites(),yield m.updateLastSyncTimestamp()}catch(y){console.error(" SiteSyncService: Error syncing with server:",y)}})()}cleanupOrphanedSites(){var m=this;return(0,i.A)(function*(){try{const y=m.getClient(),v=yield m.loadLocalSites();if(0===v.length)return;const{data:M,error:R}=yield y.from(m.SITES_TABLE).select("id");if(R)return void console.error("\u{1f3dd}\ufe0f SiteSyncService: Error fetching server sites:",R);const V=new Set;M?.forEach(z=>V.add(z.id));const ce=v.filter(z=>!(z.id&&!V.has(z.id)&&z.synced&&(console.log("\u{1f3dd}\ufe0f SiteSyncService: Removing orphaned site:",z.name||z.id),1)));ce.length!==v.length&&(yield m.saveLocalSites(ce),m.sitesSubject.next(ce),console.log("\u{1f3dd}\ufe0f SiteSyncService: Cleaned up",v.length-ce.length,"orphaned sites"))}catch(y){console.error("\u{1f3dd}\ufe0f SiteSyncService: Error cleaning up orphaned sites:",y)}})()}syncUnsyncedSites(){var m=this;return(0,i.A)(function*(){const y=yield m.loadLocalSites(),M=m.auth.getCurrentUser()?.level||1,R=y.filter(V=>!V.synced&&(!0===V.approved||M>=4));for(const V of R)try{yield m.uploadAndSyncSite(V)}catch(ce){console.error(` SiteSyncService: Failed to sync unsynced site ${V.name}:`,ce)}})()}mergeSites(m,y){const v=new Map;return m.forEach(M=>v.set(M.name.toLowerCase(),M)),y.forEach(M=>v.set(M.name.toLowerCase(),M)),Array.from(v.values())}getLastSyncTimestamp(){var m=this;return(0,i.A)(function*(){try{return(yield m.sharedDataService.readJsonFile(m.SYNC_TIMESTAMP_FILE))?.timestamp||null}catch{return null}})()}updateLastSyncTimestamp(){var m=this;return(0,i.A)(function*(){try{yield m.sharedDataService.writeJsonFile(m.SYNC_TIMESTAMP_FILE,{timestamp:(0,o.E)()})}catch(y){console.error(" SiteSyncService: Error updating sync timestamp:",y)}})()}generateSiteId(){return`site_${this.formatTimestamp()}_${Math.random().toString(36).substr(2,4)}`}forceSync(){var m=this;return(0,i.A)(function*(){console.log(" SiteSyncService: Force sync triggered"),yield m.syncWithServer()})()}requestSitePermission(m,y){var v=this;return(0,i.A)(function*(){try{const M=v.auth.getCurrentUser();if(!M)throw new Error("User not authenticated");const R=`${Ce.c.supabase.url}/functions/v1/send-site-request-request`,V=yield fetch(R,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ce.c.supabase.anonKey}`},body:JSON.stringify({requesterEmail:M.email,requesterUsername:M.username||M.email,siteName:m.name,siteDescription:m.description,gpsLatitude:m.gps_latitude,gpsLongitude:m.gps_longitude,sitePhoto:m.site_photo,siteMap:m.site_map,reason:`L${y} user requesting site access for monitoring activities`,timestamp:(0,o.E)()})});if(!V.ok){const z=yield V.json();throw new Error(z.error||"Failed to submit permission request")}const ce=yield V.json();console.log(" SiteSyncService: Site permission request submitted successfully:",ce.request_id)}catch(M){throw console.error(" SiteSyncService: Error requesting site permission:",M),M}})()}getAllSites(){var m=this;return(0,i.A)(function*(){const y=yield m.loadLocalSites(),v=m.auth.getCurrentUser(),M=v?.level||1,R=v?.email||"";return M>=4?y:y.filter(ce=>!0===ce.approved||void 0===ce.approved&&!ce.requires_permission||ce.added_by===R)})()}siteExists(m){var y=this;return(0,i.A)(function*(){return(yield y.loadLocalSites()).some(M=>M.name.toLowerCase()===m.toLowerCase())})()}loadPendingRequests(){var m=this;return(0,i.A)(function*(){try{const y=yield m.sharedDataService.readJsonFile(m.PENDING_REQUESTS_FILE);y&&(m.pendingRequests=y,console.log(` SiteSyncService: Loaded ${m.pendingRequests.length} pending requests`),m.processPendingRequests().catch(v=>console.error(" SiteSyncService: Error processing pending requests:",v)))}catch{console.log(" SiteSyncService: No pending requests file found"),m.pendingRequests=[]}})()}savePendingRequests(){var m=this;return(0,i.A)(function*(){try{yield m.sharedDataService.writeJsonFile(m.PENDING_REQUESTS_FILE,m.pendingRequests)}catch(y){console.error(" SiteSyncService: Error saving pending requests:",y)}})()}addToPendingQueue(m){const y={id:this.generateSiteId(),timestamp:Date.now(),site:m,retryCount:0,maxRetries:this.MAX_RETRY_ATTEMPTS,nextRetryTime:Date.now()+this.RETRY_DELAYS[0]};this.pendingRequests.push(y),this.savePendingRequests(),console.log(` SiteSyncService: Added site to pending queue: ${m.name}`)}processPendingRequests(){var m=this;return(0,i.A)(function*(){if(!navigator.onLine||0===m.pendingRequests.length)return;const y=Date.now(),v=m.pendingRequests.filter(M=>M.nextRetryTime<=y);if(0!==v.length){console.log(` SiteSyncService: Processing ${v.length} pending requests`);for(const M of v)try{const R=yield m.uploadPendingPhotos(M.site);yield m.syncSingleSiteToServer(R),yield m.updateLocalSitePhotos(M.site.name,R),m.pendingRequests=m.pendingRequests.filter(V=>V.id!==M.id),console.log(` SiteSyncService: Successfully synced pending site: ${M.site.name}`)}catch(R){if(console.error(` SiteSyncService: Failed to sync pending site ${M.site.name}:`,R),M.retryCount++,M.retryCount>=M.maxRetries)m.pendingRequests=m.pendingRequests.filter(V=>V.id!==M.id),console.error(` SiteSyncService: Max retries reached for site ${M.site.name}, removing from queue`);else{const V=Math.min(M.retryCount,m.RETRY_DELAYS.length-1);M.nextRetryTime=Date.now()+m.RETRY_DELAYS[V],console.log(` SiteSyncService: Scheduling retry ${M.retryCount}/${M.maxRetries} for site ${M.site.name} in ${m.RETRY_DELAYS[V]/1e3}s`)}}yield m.savePendingRequests()}})()}isBase64Image(m){return!!m&&m.startsWith("data:image")}uploadPendingPhotos(m){var y=this;return(0,i.A)(function*(){const v={...m};try{if(v.site_photo&&y.isBase64Image(v.site_photo)){console.log(` SiteSyncService: Uploading pending site photo for ${m.name}`);const M=yield y.uploadBase64Image(v.site_photo,m.name,"photo");v.site_photo=M}if(v.site_map&&y.isBase64Image(v.site_map)){console.log(` SiteSyncService: Uploading pending site map for ${m.name}`);const M=yield y.uploadBase64Image(v.site_map,m.name,"map");v.site_map=M}v.site_map?v.map_path=v.site_map:v.site_photo&&(v.map_path=v.site_photo)}catch(M){throw console.error(" SiteSyncService: Error uploading pending photos:",M),M}return v})()}formatTimestamp(){const m=new Date;return`${String(m.getDate()).padStart(2,"0")}${String(m.getMonth()+1).padStart(2,"0")}${m.getFullYear()}_${String(m.getHours()).padStart(2,"0")}${String(m.getMinutes()).padStart(2,"0")}${String(m.getSeconds()).padStart(2,"0")}`}uploadBase64Image(m,y,v){var M=this;return(0,i.A)(function*(){try{const V=yield(yield fetch(m)).blob(),ce=y.trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""),z=M.formatTimestamp(),te=V.type.split("/")[1]||"jpg",le=`site-${v}s/${ce}_${v}_${z}.${te}`,{error:ae}=yield M.getClient().storage.from("site-images").upload(le,V);if(ae)throw ae;const{data:{publicUrl:ve}}=M.getClient().storage.from("site-images").getPublicUrl(le);return console.log(` SiteSyncService: Uploaded ${v} to:`,ve),ve}catch(R){throw console.error(" SiteSyncService: Error uploading base64 image:",R),R}})()}updateLocalSitePhotos(m,y){var v=this;return(0,i.A)(function*(){try{const R=(yield v.loadLocalSites()).map(V=>V.name===m?{...V,site_photo:y.site_photo,site_map:y.site_map,map_path:y.map_path}:V);yield v.saveLocalSites(R),v.sitesSubject.next(R)}catch(M){console.error(" SiteSyncService: Error updating local site photos:",M)}})()}updateSite(m,y){var v=this;return(0,i.A)(function*(){if((v.auth.getCurrentUser()?.level||1)<4)throw new Error("Only L4+ users can edit sites");try{const V=yield v.loadLocalSites(),ce=V.findIndex(K=>K.name===m);if(-1===ce)throw new Error("Site not found");const te={...V[ce],...y,synced:!1};if(V[ce]=te,yield v.saveLocalSites(V),v.sitesSubject.next(V),navigator.onLine){const K=yield v.uploadPendingPhotos(te),le={name:K.name,description:K.description,gps_latitude:K.gps_latitude,gps_longitude:K.gps_longitude,site_photo:K.site_photo,site_map:K.site_map,map_path:K.map_path||K.site_map||K.site_photo},{error:ae}=yield v.getClient().from(v.SITES_TABLE).update(le).eq("name",m);ae?(console.error("\u{1f3dd}\ufe0f SiteSyncService: Error updating site on server:",ae),v.addToPendingQueue(K)):(V[ce]={...K,synced:!0},yield v.saveLocalSites(V),v.sitesSubject.next(V),console.log("\u{1f3dd}\ufe0f SiteSyncService: Site updated on server:",te.name))}else console.log("\u{1f3dd}\ufe0f SiteSyncService: Offline - site update queued for sync"),v.addToPendingQueue(te);return console.log("\u{1f3dd}\ufe0f SiteSyncService: Site updated:",te.name),te}catch(V){throw console.error("\u{1f3dd}\ufe0f SiteSyncService: Error updating site:",V),V}})()}deleteSite(m){var y=this;return(0,i.A)(function*(){if((y.auth.getCurrentUser()?.level||1)<4)throw new Error("Only L4+ users can delete sites");try{const R=yield y.loadLocalSites(),V=R.find(z=>z.name===m),ce=R.filter(z=>z.name!==m);if(yield y.saveLocalSites(ce),y.sitesSubject.next(ce),navigator.onLine){const{error:z}=yield y.getClient().from(y.SITES_TABLE).delete().eq("name",m);if(z&&console.error("\u{1f3dd}\ufe0f SiteSyncService: Error deleting from server:",z),V){const K=[V.site_photo,V.site_map,V.map_path].filter(le=>!!le&&le.includes("site-images/")).map(le=>le.split("site-images/")[1]);if(K.length>0){const{error:le}=yield y.getClient().storage.from("site-images").remove(K);le?console.error("\u{1f3dd}\ufe0f SiteSyncService: Error deleting images from storage:",le):console.log("\u{1f3dd}\ufe0f SiteSyncService: Deleted",K.length,"images from storage")}}}console.log("\u{1f3dd}\ufe0f SiteSyncService: Site deleted:",m)}catch(R){throw console.error("\u{1f3dd}\ufe0f SiteSyncService: Error deleting site:",R),R}})()}getSiteByName(m){var y=this;return(0,i.A)(function*(){return(yield y.loadLocalSites()).find(M=>M.name===m)||null})()}static#e=Ae=()=>(this.\u0275fac=function(y){return new(y||l)(De.KVO(B.L),De.KVO(Pe.H),De.KVO(Ge.N),De.KVO(pe.u))},this.\u0275prov=De.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}))}return Ae(),l})()},7673($t,ot,b){"use strict";b.d(ot,{of:()=>D});var i=b(9326),o=b(6648);function D(...Ce){const De=(0,i.lI)(Ce);return(0,o.H)(Ce,De)}},7691($t,ot,b){"use strict";b.d(ot,{i7:()=>Ge,LK:()=>De,ru:()=>D});var i=b(5083),o=b(467),D=function(pe){return pe.Prompt="PROMPT",pe.Camera="CAMERA",pe.Photos="PHOTOS",pe}(D||{}),Ce=function(pe){return pe.Rear="REAR",pe.Front="FRONT",pe}(Ce||{}),De=function(pe){return pe.Uri="uri",pe.Base64="base64",pe.DataUrl="dataUrl",pe}(De||{});class B extends i.WebPlugin{getPhoto(ie){var Ae=this;return(0,o.A)(function*(){return new Promise(function(){var l=(0,o.A)(function*(p,m){if(ie.webUseInput||ie.source===D.Photos)Ae.fileInputExperience(ie,p,m);else if(ie.source===D.Prompt){let y=document.querySelector("pwa-action-sheet");y||(y=document.createElement("pwa-action-sheet"),document.body.appendChild(y)),y.header=ie.promptLabelHeader||"Photo",y.cancelable=!1,y.options=[{title:ie.promptLabelPhoto||"From Photos"},{title:ie.promptLabelPicture||"Take Picture"}],y.addEventListener("onSelection",function(){var v=(0,o.A)(function*(M){0===M.detail?Ae.fileInputExperience(ie,p,m):Ae.cameraExperience(ie,p,m)});return function(M){return v.apply(this,arguments)}}())}else Ae.cameraExperience(ie,p,m)});return function(p,m){return l.apply(this,arguments)}}())})()}pickImages(ie){var Ae=this;return(0,o.A)(function*(){return new Promise(function(){var l=(0,o.A)(function*(p,m){Ae.multipleFileInputExperience(p,m)});return function(p,m){return l.apply(this,arguments)}}())})()}cameraExperience(ie,Ae,l){var p=this;return(0,o.A)(function*(){if(customElements.get("pwa-camera-modal")){const m=document.createElement("pwa-camera-modal");m.facingMode=ie.direction===Ce.Front?"user":"environment",document.body.appendChild(m);try{yield m.componentOnReady(),m.addEventListener("onPhoto",function(){var y=(0,o.A)(function*(v){const M=v.detail;null===M?l(new i.CapacitorException("User cancelled photos app")):M instanceof Error?l(M):Ae(yield p._getCameraPhoto(M,ie)),m.dismiss(),document.body.removeChild(m)});return function(v){return y.apply(this,arguments)}}()),m.present()}catch{p.fileInputExperience(ie,Ae,l)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),p.fileInputExperience(ie,Ae,l)})()}fileInputExperience(ie,Ae,l){let p=document.querySelector("#_capacitor-camera-input");const m=()=>{var y;null===(y=p.parentNode)||void 0===y||y.removeChild(p)};p||(p=document.createElement("input"),p.id="_capacitor-camera-input",p.type="file",p.hidden=!0,document.body.appendChild(p),p.addEventListener("change",y=>{const v=p.files[0];let M="jpeg";if("image/png"===v.type?M="png":"image/gif"===v.type&&(M="gif"),"dataUrl"===ie.resultType||"base64"===ie.resultType){const R=new FileReader;R.addEventListener("load",()=>{if("dataUrl"===ie.resultType)Ae({dataUrl:R.result,format:M});else if("base64"===ie.resultType){const V=R.result.split(",")[1];Ae({base64String:V,format:M})}m()}),R.readAsDataURL(v)}else Ae({webPath:URL.createObjectURL(v),format:M}),m()}),p.addEventListener("cancel",y=>{l(new i.CapacitorException("User cancelled photos app")),m()})),p.accept="image/*",p.capture=!0,ie.source===D.Photos||ie.source===D.Prompt?p.removeAttribute("capture"):ie.direction===Ce.Front?p.capture="user":ie.direction===Ce.Rear&&(p.capture="environment"),p.click()}multipleFileInputExperience(ie,Ae){let l=document.querySelector("#_capacitor-camera-input-multiple");const p=()=>{var m;null===(m=l.parentNode)||void 0===m||m.removeChild(l)};l||(l=document.createElement("input"),l.id="_capacitor-camera-input-multiple",l.type="file",l.hidden=!0,l.multiple=!0,document.body.appendChild(l),l.addEventListener("change",m=>{const y=[];for(let v=0;v<l.files.length;v++){const M=l.files[v];let R="jpeg";"image/png"===M.type?R="png":"image/gif"===M.type&&(R="gif"),y.push({webPath:URL.createObjectURL(M),format:R})}ie({photos:y}),p()}),l.addEventListener("cancel",m=>{Ae(new i.CapacitorException("User cancelled photos app")),p()})),l.accept="image/*",l.click()}_getCameraPhoto(ie,Ae){return new Promise((l,p)=>{const m=new FileReader,y=ie.type.split("/")[1];"uri"===Ae.resultType?l({webPath:URL.createObjectURL(ie),format:y,saved:!1}):(m.readAsDataURL(ie),m.onloadend=()=>{const v=m.result;l("dataUrl"===Ae.resultType?{dataUrl:v,format:y,saved:!1}:{base64String:v.split(",")[1],format:y,saved:!1})},m.onerror=v=>{p(v)})})}checkPermissions(){var ie=this;return(0,o.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw ie.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw ie.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var ie=this;return(0,o.A)(function*(){throw ie.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var ie=this;return(0,o.A)(function*(){throw ie.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var ie=this;return(0,o.A)(function*(){throw ie.unavailable("Not implemented on web.")})()}}new B;const Ge=(0,i.registerPlugin)("Camera",{web:()=>new B})},7705($t,ot,b){"use strict";b.d(ot,{ES_:()=>Ae,HJs:()=>Co,Hbi:()=>nn,L39:()=>_,MKu:()=>mt,_q3:()=>qe,a0P:()=>go,fpN:()=>rn,gRc:()=>Vn,hFB:()=>M,naY:()=>en,oH4:()=>Et});var i=b(2615),o=b(8440),D=b(3664);const Ce=Symbol("InputSignalNode#UNSET"),De={...o.s0,transformFn:void 0,applyValueToInputSignal(me,Y){(0,o.j2)(me,Y)}};function Pe(me,Y){const fe=Object.create(De);function je(){if((0,o.mK)(fe),fe.value===Ce)throw new i.buA(-950,null);return fe.value}return fe.value=me,fe.transformFn=Y?.transform,je[o.bh]=fe,je}class Ae{attributeName;constructor(Y){this.attributeName=Y}__NG_ELEMENT_ID__=()=>(0,D.kS0)(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}function y(me,Y){return Pe(me,Y)}new i.nKC("").__NG_ELEMENT_ID__=me=>{const Y=(0,i.Mx4)();if(null===Y)throw new i.buA(204,!1);if(2&Y.type)return Y.value;if(8&me)return null;throw new i.buA(204,!1)};const M=(y.required=function v(me){return Pe(Ce,me)},y),St=new i.nKC(""),vt=new i.nKC("");function Ft(me){return!me.moduleRef}let Ut;function ut(){Ut=xt}function xt(me,Y){const fe=me.injector.get(D.o8S);if(me._bootstrapComponents.length>0)me._bootstrapComponents.forEach(je=>fe.bootstrap(je));else{if(!me.instance.ngDoBootstrap)throw new i.buA(-403,!1);me.instance.ngDoBootstrap(fe)}Y.push(me)}let Jt=(()=>{class me{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(fe){this._injector=fe}bootstrapModuleFactory(fe,je){const gt=je?.scheduleInRootZone,Lt=je?.ignoreChangesOutsideZone,Gt=[(0,D.SdI)({ngZoneFactory:()=>(0,D.G5x)(je?.ngZone,{...(0,D.cZr)({eventCoalescing:je?.ngZoneEventCoalescing,runCoalescing:je?.ngZoneRunCoalescing}),scheduleInRootZone:gt}),ignoreChangesOutsideZone:Lt}),{provide:i.hk6,useExisting:D.Ts$},i.gv8],_n=(0,D.VzW)(fe.moduleType,this.injector,Gt);return ut(),function lt(me){const Y=Ft(me)?me.r3Injector:me.moduleRef.injector,fe=Y.get(D.SKi);return fe.run(()=>{Ft(me)?me.r3Injector.resolveInjectorInitializers():me.moduleRef.resolveInjectorInitializers();const je=Y.get(i.ZTf);let gt;if(fe.runOutsideAngular(()=>{gt=fe.onError.subscribe({next:je})}),Ft(me)){const Pt=()=>Y.destroy(),Lt=me.platformInjector.get(St);Lt.add(Pt),Y.onDestroy(()=>{gt.unsubscribe(),Lt.delete(Pt)})}else{const Pt=()=>me.moduleRef.destroy(),Lt=me.platformInjector.get(St);Lt.add(Pt),me.moduleRef.onDestroy(()=>{(0,D.TFI)(me.allPlatformModules,me.moduleRef),gt.unsubscribe(),Lt.delete(Pt)})}return function Tt(me,Y,fe){try{const je=fe();return(0,D.yLl)(je)?je.catch(gt=>{throw Y.runOutsideAngular(()=>me(gt)),gt}):je}catch(je){throw Y.runOutsideAngular(()=>me(je)),je}}(je,fe,()=>{const Pt=Y.get(i.rev),Lt=Pt.add(),Gt=Y.get(D.H1s);return Gt.runInitializers(),Gt.donePromise.then(()=>{const _n=Y.get(D.xe9,D.DkB);if((0,D.e6s)(_n||D.DkB),!Y.get(vt,!0))return Ft(me)?Y.get(D.o8S):(me.allPlatformModules.push(me.moduleRef),me.moduleRef);if(Ft(me)){const Xn=Y.get(D.o8S);return void 0!==me.rootComponent&&Xn.bootstrap(me.rootComponent),Xn}return Ut?.(me.moduleRef,me.allPlatformModules),me.moduleRef}).finally(()=>{Pt.remove(Lt)})})})}({moduleRef:_n,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(fe,je=[]){const gt=(0,D.lJT)({},je);return ut(),function be(me,Y,fe){const je=new D.Co$(fe);return Promise.resolve(je)}(0,0,fe).then(Pt=>this.bootstrapModuleFactory(Pt,gt))}onDestroy(fe){this._destroyListeners.push(fe)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new i.buA(404,!1);this._modules.slice().forEach(je=>je.destroy()),this._destroyListeners.forEach(je=>je());const fe=this._injector.get(St,null);fe&&(fe.forEach(je=>je()),fe.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(je){return new(je||me)((0,i.KVO)(i.zZn))};static \u0275prov=(0,i.jDH)({token:me,factory:me.\u0275fac,providedIn:"platform"})}return me})(),ct=null;function Et(me,Y,fe=[]){const je=`Platform: ${Y}`,gt=new i.nKC(je);return(Pt=[])=>{let Lt=Un();if(!Lt){const Gt=[...fe,...Pt,{provide:gt,useValue:!0}];Lt=me?.(Gt)??function _t(me){if(Un())throw new i.buA(400,!1);(0,D.pl0)(),(0,D.ypd)(),ct=me;const Y=me.get(Jt);return function hn(me){const Y=me.get(D.PLl,null);(0,i.N4e)(me,()=>{Y?.forEach(fe=>fe())})}(me),Y}(function Xt(me=[],Y){return i.zZn.create({name:Y,providers:[{provide:i.GBX,useValue:"platform"},{provide:St,useValue:new Set([()=>ct=null])},...me]})}(Gt,je))}return function bn(){const Y=Un();if(!Y)throw new i.buA(-401,!1);return Y}()}}function Un(){return ct?.get(Jt)??null}function en(){return!1}let Vn=(()=>class me{static __NG_ELEMENT_ID__=or})();function or(me){return function lr(me,Y,fe){if((0,i.Qs1)(me)&&!fe){const je=(0,i.KdJ)(me.index,Y);return new D.NCX(je,je)}return 175&me.type?new D.NCX(Y[i.b5C],Y):null}((0,i.Mx4)(),(0,i.OAn)(),!(16&~me))}class Gn{constructor(){}supports(Y){return(0,D.ozJ)(Y)}create(Y){return new gr(Y)}}const qn=(me,Y)=>Y;class gr{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(Y){this._trackByFn=Y||qn}forEachItem(Y){let fe;for(fe=this._itHead;null!==fe;fe=fe._next)Y(fe)}forEachOperation(Y){let fe=this._itHead,je=this._removalsHead,gt=0,Pt=null;for(;fe||je;){const Lt=!je||fe&&fe.currentIndex<yn(je,gt,Pt)?fe:je,Gt=yn(Lt,gt,Pt),_n=Lt.currentIndex;if(Lt===je)gt--,je=je._nextRemoved;else if(fe=fe._next,null==Lt.previousIndex)gt++;else{Pt||(Pt=[]);const Fn=Gt-gt,Xn=_n-gt;if(Fn!=Xn){for(let Sr=0;Sr<Fn;Sr++){const Cr=Sr<Pt.length?Pt[Sr]:Pt[Sr]=0,pr=Cr+Sr;Xn<=pr&&pr<Fn&&(Pt[Sr]=Cr+1)}Pt[Lt.previousIndex]=Xn-Fn}}Gt!==_n&&Y(Lt,Gt,_n)}}forEachPreviousItem(Y){let fe;for(fe=this._previousItHead;null!==fe;fe=fe._nextPrevious)Y(fe)}forEachAddedItem(Y){let fe;for(fe=this._additionsHead;null!==fe;fe=fe._nextAdded)Y(fe)}forEachMovedItem(Y){let fe;for(fe=this._movesHead;null!==fe;fe=fe._nextMoved)Y(fe)}forEachRemovedItem(Y){let fe;for(fe=this._removalsHead;null!==fe;fe=fe._nextRemoved)Y(fe)}forEachIdentityChange(Y){let fe;for(fe=this._identityChangesHead;null!==fe;fe=fe._nextIdentityChange)Y(fe)}diff(Y){if(null==Y&&(Y=[]),!(0,D.ozJ)(Y))throw new i.buA(900,!1);return this.check(Y)?this:null}onDestroy(){}check(Y){this._reset();let gt,Pt,Lt,fe=this._itHead,je=!1;if(Array.isArray(Y)){this.length=Y.length;for(let Gt=0;Gt<this.length;Gt++)Pt=Y[Gt],Lt=this._trackByFn(Gt,Pt),null!==fe&&Object.is(fe.trackById,Lt)?(je&&(fe=this._verifyReinsertion(fe,Pt,Lt,Gt)),Object.is(fe.item,Pt)||this._addIdentityChange(fe,Pt)):(fe=this._mismatch(fe,Pt,Lt,Gt),je=!0),fe=fe._next}else gt=0,(0,D.utN)(Y,Gt=>{Lt=this._trackByFn(gt,Gt),null!==fe&&Object.is(fe.trackById,Lt)?(je&&(fe=this._verifyReinsertion(fe,Gt,Lt,gt)),Object.is(fe.item,Gt)||this._addIdentityChange(fe,Gt)):(fe=this._mismatch(fe,Gt,Lt,gt),je=!0),fe=fe._next,gt++}),this.length=gt;return this._truncate(fe),this.collection=Y,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let Y;for(Y=this._previousItHead=this._itHead;null!==Y;Y=Y._next)Y._nextPrevious=Y._next;for(Y=this._additionsHead;null!==Y;Y=Y._nextAdded)Y.previousIndex=Y.currentIndex;for(this._additionsHead=this._additionsTail=null,Y=this._movesHead;null!==Y;Y=Y._nextMoved)Y.previousIndex=Y.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(Y,fe,je,gt){let Pt;return null===Y?Pt=this._itTail:(Pt=Y._prev,this._remove(Y)),null!==(Y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(je,null))?(Object.is(Y.item,fe)||this._addIdentityChange(Y,fe),this._reinsertAfter(Y,Pt,gt)):null!==(Y=null===this._linkedRecords?null:this._linkedRecords.get(je,gt))?(Object.is(Y.item,fe)||this._addIdentityChange(Y,fe),this._moveAfter(Y,Pt,gt)):Y=this._addAfter(new mr(fe,je),Pt,gt),Y}_verifyReinsertion(Y,fe,je,gt){let Pt=null===this._unlinkedRecords?null:this._unlinkedRecords.get(je,null);return null!==Pt?Y=this._reinsertAfter(Pt,Y._prev,gt):Y.currentIndex!=gt&&(Y.currentIndex=gt,this._addToMoves(Y,gt)),Y}_truncate(Y){for(;null!==Y;){const fe=Y._next;this._addToRemovals(this._unlink(Y)),Y=fe}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(Y,fe,je){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(Y);const gt=Y._prevRemoved,Pt=Y._nextRemoved;return null===gt?this._removalsHead=Pt:gt._nextRemoved=Pt,null===Pt?this._removalsTail=gt:Pt._prevRemoved=gt,this._insertAfter(Y,fe,je),this._addToMoves(Y,je),Y}_moveAfter(Y,fe,je){return this._unlink(Y),this._insertAfter(Y,fe,je),this._addToMoves(Y,je),Y}_addAfter(Y,fe,je){return this._insertAfter(Y,fe,je),this._additionsTail=null===this._additionsTail?this._additionsHead=Y:this._additionsTail._nextAdded=Y,Y}_insertAfter(Y,fe,je){const gt=null===fe?this._itHead:fe._next;return Y._next=gt,Y._prev=fe,null===gt?this._itTail=Y:gt._prev=Y,null===fe?this._itHead=Y:fe._next=Y,null===this._linkedRecords&&(this._linkedRecords=new yr),this._linkedRecords.put(Y),Y.currentIndex=je,Y}_remove(Y){return this._addToRemovals(this._unlink(Y))}_unlink(Y){null!==this._linkedRecords&&this._linkedRecords.remove(Y);const fe=Y._prev,je=Y._next;return null===fe?this._itHead=je:fe._next=je,null===je?this._itTail=fe:je._prev=fe,Y}_addToMoves(Y,fe){return Y.previousIndex===fe||(this._movesTail=null===this._movesTail?this._movesHead=Y:this._movesTail._nextMoved=Y),Y}_addToRemovals(Y){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yr),this._unlinkedRecords.put(Y),Y.currentIndex=null,Y._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=Y,Y._prevRemoved=null):(Y._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=Y),Y}_addIdentityChange(Y,fe){return Y.item=fe,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=Y:this._identityChangesTail._nextIdentityChange=Y,Y}}class mr{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(Y,fe){this.item=Y,this.trackById=fe}}class kr{_head=null;_tail=null;add(Y){null===this._head?(this._head=this._tail=Y,Y._nextDup=null,Y._prevDup=null):(this._tail._nextDup=Y,Y._prevDup=this._tail,Y._nextDup=null,this._tail=Y)}get(Y,fe){let je;for(je=this._head;null!==je;je=je._nextDup)if((null===fe||fe<=je.currentIndex)&&Object.is(je.trackById,Y))return je;return null}remove(Y){const fe=Y._prevDup,je=Y._nextDup;return null===fe?this._head=je:fe._nextDup=je,null===je?this._tail=fe:je._prevDup=fe,null===this._head}}class yr{map=new Map;put(Y){const fe=Y.trackById;let je=this.map.get(fe);je||(je=new kr,this.map.set(fe,je)),je.add(Y)}get(Y,fe){const gt=this.map.get(Y);return gt?gt.get(Y,fe):null}remove(Y){const fe=Y.trackById;return this.map.get(fe).remove(Y)&&this.map.delete(fe),Y}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yn(me,Y,fe){const je=me.previousIndex;if(null===je)return je;let gt=0;return fe&&je<fe.length&&(gt=fe[je]),je+Y+gt}class Er{constructor(){}supports(Y){return Y instanceof Map||(0,D.vDg)(Y)}create(){return new Or}}class Or{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(Y){let fe;for(fe=this._mapHead;null!==fe;fe=fe._next)Y(fe)}forEachPreviousItem(Y){let fe;for(fe=this._previousMapHead;null!==fe;fe=fe._nextPrevious)Y(fe)}forEachChangedItem(Y){let fe;for(fe=this._changesHead;null!==fe;fe=fe._nextChanged)Y(fe)}forEachAddedItem(Y){let fe;for(fe=this._additionsHead;null!==fe;fe=fe._nextAdded)Y(fe)}forEachRemovedItem(Y){let fe;for(fe=this._removalsHead;null!==fe;fe=fe._nextRemoved)Y(fe)}diff(Y){if(Y){if(!(Y instanceof Map||(0,D.vDg)(Y)))throw new i.buA(900,!1)}else Y=new Map;return this.check(Y)?this:null}onDestroy(){}check(Y){this._reset();let fe=this._mapHead;if(this._appendAfter=null,this._forEach(Y,(je,gt)=>{if(fe&&fe.key===gt)this._maybeAddToChanges(fe,je),this._appendAfter=fe,fe=fe._next;else{const Pt=this._getOrCreateRecordForKey(gt,je);fe=this._insertBeforeOrAppend(fe,Pt)}}),fe){fe._prev&&(fe._prev._next=null),this._removalsHead=fe;for(let je=fe;null!==je;je=je._nextRemoved)je===this._mapHead&&(this._mapHead=null),this._records.delete(je.key),je._nextRemoved=je._next,je.previousValue=je.currentValue,je.currentValue=null,je._prev=null,je._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(Y,fe){if(Y){const je=Y._prev;return fe._next=Y,fe._prev=je,Y._prev=fe,je&&(je._next=fe),Y===this._mapHead&&(this._mapHead=fe),this._appendAfter=Y,Y}return this._appendAfter?(this._appendAfter._next=fe,fe._prev=this._appendAfter):this._mapHead=fe,this._appendAfter=fe,null}_getOrCreateRecordForKey(Y,fe){if(this._records.has(Y)){const gt=this._records.get(Y);this._maybeAddToChanges(gt,fe);const Pt=gt._prev,Lt=gt._next;return Pt&&(Pt._next=Lt),Lt&&(Lt._prev=Pt),gt._next=null,gt._prev=null,gt}const je=new Jn(Y);return this._records.set(Y,je),je.currentValue=fe,this._addToAdditions(je),je}_reset(){if(this.isDirty){let Y;for(this._previousMapHead=this._mapHead,Y=this._previousMapHead;null!==Y;Y=Y._next)Y._nextPrevious=Y._next;for(Y=this._changesHead;null!==Y;Y=Y._nextChanged)Y.previousValue=Y.currentValue;for(Y=this._additionsHead;null!=Y;Y=Y._nextAdded)Y.previousValue=Y.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(Y,fe){Object.is(fe,Y.currentValue)||(Y.previousValue=Y.currentValue,Y.currentValue=fe,this._addToChanges(Y))}_addToAdditions(Y){null===this._additionsHead?this._additionsHead=this._additionsTail=Y:(this._additionsTail._nextAdded=Y,this._additionsTail=Y)}_addToChanges(Y){null===this._changesHead?this._changesHead=this._changesTail=Y:(this._changesTail._nextChanged=Y,this._changesTail=Y)}_forEach(Y,fe){Y instanceof Map?Y.forEach(fe):Object.keys(Y).forEach(je=>fe(Y[je],je))}}class Jn{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(Y){this.key=Y}}function vn(){return new qe([new Gn])}let qe=(()=>{class me{factories;static \u0275prov=(0,i.jDH)({token:me,providedIn:"root",factory:vn});constructor(fe){this.factories=fe}static create(fe,je){if(null!=je){const gt=je.factories.slice();fe=fe.concat(gt)}return new me(fe)}static extend(fe){return{provide:me,useFactory:()=>{const je=(0,i.WQX)(me,{optional:!0,skipSelf:!0});return me.create(fe,je||vn())}}}find(fe){const je=this.factories.find(gt=>gt.supports(fe));if(null!=je)return je;throw new i.buA(901,!1)}}return me})();function Ct(){return new mt([new Er])}let mt=(()=>{class me{static \u0275prov=(0,i.jDH)({token:me,providedIn:"root",factory:Ct});factories;constructor(fe){this.factories=fe}static create(fe,je){if(je){const gt=je.factories.slice();fe=fe.concat(gt)}return new me(fe)}static extend(fe){return{provide:me,useFactory:()=>{const je=(0,i.WQX)(me,{optional:!0,skipSelf:!0});return me.create(fe,je||Ct())}}}find(fe){const je=this.factories.find(gt=>gt.supports(fe));if(je)return je;throw new i.buA(901,!1)}}return me})();const rn=Et(null,"core",[]);let nn=(()=>{class me{constructor(fe){}static \u0275fac=function(je){return new(je||me)((0,i.KVO)(D.o8S))};static \u0275mod=(0,D.$C)({type:me});static \u0275inj=(0,i.G2t)({})}return me})();function _(me){return"boolean"==typeof me?me:null!=me&&"false"!==me}function go(me,Y){const fe=(0,i.xUg)(me),je=Y.elementInjector||(0,i.WB9)();return new D.eHC(fe).create(je,Y.projectableNodes,Y.hostElement,Y.environmentInjector,Y.directives,Y.bindings)}function Co(me){const Y=(0,i.xUg)(me);if(!Y)return null;const fe=new D.eHC(Y);return{get selector(){return fe.selector},get type(){return fe.componentType},get inputs(){return fe.inputs},get outputs(){return fe.outputs},get ngContentSelectors(){return fe.ngContentSelectors},get isStandalone(){return Y.standalone},get isSignal(){return Y.signals}}}},7707($t,ot,b){"use strict";b.d(ot,{Ms:()=>v,vU:()=>l});var i=b(8071),o=b(8359),D=b(1026),Ce=b(5334),De=b(5343);const B=pe("C",void 0,void 0);function pe(z,te,K){return{kind:z,value:te,error:K}}var ie=b(9270),Ae=b(9786);class l extends o.yU{constructor(te){super(),this.isStopped=!1,te?(this.destination=te,(0,o.Uv)(te)&&te.add(this)):this.destination=ce}static create(te,K,le){return new v(te,K,le)}next(te){this.isStopped?V(function Ge(z){return pe("N",z,void 0)}(te),this):this._next(te)}error(te){this.isStopped?V(function Pe(z){return pe("E",void 0,z)}(te),this):(this.isStopped=!0,this._error(te))}complete(){this.isStopped?V(B,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(te){this.destination.next(te)}_error(te){try{this.destination.error(te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const p=Function.prototype.bind;function m(z,te){return p.call(z,te)}class y{constructor(te){this.partialObserver=te}next(te){const{partialObserver:K}=this;if(K.next)try{K.next(te)}catch(le){M(le)}}error(te){const{partialObserver:K}=this;if(K.error)try{K.error(te)}catch(le){M(le)}else M(te)}complete(){const{partialObserver:te}=this;if(te.complete)try{te.complete()}catch(K){M(K)}}}class v extends l{constructor(te,K,le){let ae;if(super(),(0,i.T)(te)||!te)ae={next:te??void 0,error:K??void 0,complete:le??void 0};else{let ve;this&&D.$.useDeprecatedNextContext?(ve=Object.create(te),ve.unsubscribe=()=>this.unsubscribe(),ae={next:te.next&&m(te.next,ve),error:te.error&&m(te.error,ve),complete:te.complete&&m(te.complete,ve)}):ae=te}this.destination=new y(ae)}}function M(z){D.$.useDeprecatedSynchronousErrorHandling?(0,Ae.l)(z):(0,Ce.m)(z)}function V(z,te){const{onStoppedNotification:K}=D.$;K&&ie.f.setTimeout(()=>K(z,te))}const ce={closed:!0,next:De.l,error:function R(z){throw z},complete:De.l}},7762($t,ot,b){"use strict";b.d(ot,{L:()=>D});var i=b(5083),o=b(8254);const D=(0,i.registerPlugin)("Geolocation",{web:()=>b.e(2920).then(b.bind(b,2920)).then(Ce=>new Ce.GeolocationWeb)});(0,o.Y)()},7837($t,ot,b){"use strict";b.d(ot,{a:()=>Ae,c:()=>o,p:()=>ie});class i{constructor(){this.m=new Map}reset(m){this.m=new Map(Object.entries(m))}get(m,y){const v=this.m.get(m);return void 0!==v?v:y}getBoolean(m,y=!1){const v=this.m.get(m);return void 0===v?y:"string"==typeof v?"true"===v:!!v}getNumber(m,y){const v=parseFloat(this.m.get(m));return isNaN(v)?void 0!==y?y:NaN:v}set(m,y){this.m.set(m,y)}}const o=new i;var pe=function(p){return p.OFF="OFF",p.ERROR="ERROR",p.WARN="WARN",p}(pe||{});const ie=(p,...m)=>{const y=o.get("logLevel",pe.WARN);if([pe.WARN].includes(y))return console.warn(`[Ionic Warning]: ${p}`,...m)},Ae=(p,...m)=>{const y=o.get("logLevel",pe.ERROR);if([pe.ERROR,pe.WARN].includes(y))return console.error(`[Ionic Error]: ${p}`,...m)}},7908($t,ot,b){"use strict";function i(o,D){if(o){const Ce=o.indexOf(D);0<=Ce&&o.splice(Ce,1)}}b.d(ot,{o:()=>i})},7953($t,ot,b){"use strict";b.d(ot,{T:()=>o});var i=b(8071);function o(D){return Symbol.asyncIterator&&(0,i.T)(D?.[Symbol.asyncIterator])}},8060($t,ot,b){"use strict";b.d(ot,{r:()=>Ge});var i=b(467),o=b(2084),D=b(2615),Ce=b(918),De=b(5029),B=b(4938),Pe=b(8863);let Ge=(()=>{var pe;class ie{constructor(l,p,m,y){this.sharedDataService=l,this.supabaseService=p,this.storage=m,this.monitoringLog=y,this.REPORTS_BUCKET="health",this.IMAGES_BUCKET="health-images",this.DRAFT_FILE="health_draft_current.json",this.PENDING_QUEUE_FILE="health_pending_queue.json",this.processingQueue=!1,this.retryIntervalId=null,console.log("\u{1f535} HealthSyncService: constructor called - registering network listener"),window.addEventListener("online",()=>{console.log("\u{1f310} HealthSyncService: ONLINE event detected - triggering processPendingQueue"),this.processPendingQueue().catch(v=>console.error("\u274c HealthSyncService: processPendingQueue failed:",v))}),setTimeout(()=>{console.log("\u{1f680} HealthSyncService: Initial queue check on app launch"),this.processPendingQueue().catch(v=>console.error("\u274c HealthSyncService: Initial queue check failed:",v))},5e3),this.retryIntervalId=setInterval(()=>{console.log("\u23f0 HealthSyncService: 5-minute periodic queue check"),this.processPendingQueue().catch(v=>console.error("\u274c HealthSyncService: Periodic queue check failed:",v))},3e5),console.log("\u2705 HealthSyncService: Retry mechanisms initialized (network event + 5-min interval)")}getClient(){return this.supabaseService.getClient()}generateReportId(){const l=new Date,p=m=>String(m).padStart(2,"0");return`Health${p(l.getDate())}${p(l.getMonth()+1)}${l.getFullYear()}_${p(l.getHours())}${p(l.getMinutes())}${p(l.getSeconds())}`}getFormSummary(l){const p=[];l?.location&&p.push(l.location),l?.zoneNumber&&p.push(`Z${l.zoneNumber}`),l?.quadNumber&&p.push(`Q${l.quadNumber}`),l?.observationDate&&p.push(l.observationDate);const m=[];return l?.canopyCover&&"<1%"!==l.canopyCover&&m.push(`Canopy ${l.canopyCover}`),l?.recruitmentCover&&"<1%"!==l.recruitmentCover&&m.push(`Recruitment ${l.recruitmentCover}`),l?.deadTrees>0&&m.push(`${l.deadTrees} dead`),l?.predation&&m.push(`predation: ${l.predation.replace(/_/g," ")}`),m.length>0&&p.push(m.join(" \xb7 ")),p.join(", ")||"health"}getDraftKey(l){const p=(l?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),m=l?.zoneNumber||"",y=l?.quadNumber||"";let v=`health_draft_${p}`;return m&&(v+=`_zone${m}`),y&&(v+=`_quad${y}`),`${v}.json`}dataUrlToBlob(l){return(0,i.A)(function*(){return yield(yield fetch(l)).blob()})()}loadPendingQueue(){var l=this;return(0,i.A)(function*(){const p=yield l.sharedDataService.readJsonFile(l.PENDING_QUEUE_FILE);return p?.items&&Array.isArray(p.items)?{items:p.items}:{items:[]}})()}savePendingQueue(l){var p=this;return(0,i.A)(function*(){yield p.sharedDataService.writeJsonFile(p.PENDING_QUEUE_FILE,l);const m=yield p.sharedDataService.readJsonFile(p.PENDING_QUEUE_FILE);if(!m||!Array.isArray(m.items))throw new Error("HealthSyncService: pending queue verification failed")})()}saveDraft(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=l.reportId||p.generateReportId(),v={reportId:y,createdAt:l.createdAt||m,updatedAt:m,form:l.form,coordinates:l.coordinates??null,photos:l.photos,status:l.status||{incomplete:!0,sent:!1,pending:!1}},M=p.getDraftKey(l.form);yield p.sharedDataService.writeJsonFile(M,v);const R=yield p.sharedDataService.readJsonFile(M);if(!R||R.reportId!==v.reportId)throw new Error("HealthSyncService: draft verification failed");const V=yield p.storage.getUser(),ce=p.getFormSummary(l.form);p.monitoringLog.recordDraftSaved(V?.username||"unknown","health",y,ce)})()}loadDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);return yield p.sharedDataService.readJsonFile(m)}return yield p.sharedDataService.readJsonFile(p.DRAFT_FILE)})()}clearDraft(l){var p=this;return(0,i.A)(function*(){if(l){const m=p.getDraftKey(l);yield p.sharedDataService.deleteJsonFile(m)}else yield p.sharedDataService.deleteJsonFile(p.DRAFT_FILE)})()}getAllDrafts(){var l=this;return(0,i.A)(function*(){const m=(yield l.sharedDataService.listFiles()).filter(v=>v.startsWith("health_draft_")),y=[];for(const v of m)try{const M=yield l.sharedDataService.readJsonFile(v);if(M){const R=l.getLocationLabelFromFilename(v,M.form);y.push({draft:M,locationLabel:R})}}catch(M){console.warn("HealthSyncService: Failed to read draft file",v,M)}return y})()}getLocationLabelFromFilename(l,p){return`${p?.location||"Unknown"}${p?.zoneNumber?` - Zone ${p.zoneNumber}`:""}${p?.quadNumber?` - Quad ${p.quadNumber}`:""}`}getPendingQueueInfo(){var l=this;return(0,i.A)(function*(){const p=yield l.loadPendingQueue();return{count:p.items.length,items:p.items}})()}getAllReports(){var l=this;return(0,i.A)(function*(){const p=[],m=yield l.getAllDrafts();for(const{draft:y}of m)p.push({report:y,status:"draft"});try{const v=(yield l.sharedDataService.listFiles()).filter(M=>{if(!M.startsWith("Health")||M.includes("_report_"))return!1;const R=M.replace(".json","");return/^Health\d{8}_\d{6}$/.test(R)&&!M.includes("_backup")&&!M.includes("_draft")&&!M.includes("_queue")});for(const M of v)try{const R=yield l.sharedDataService.readJsonFile(M);R&&p.push({report:R,status:R.status.sent?"submitted":"pending"})}catch(R){console.warn("HealthSyncService: Failed to read report file",M,R)}}catch(y){console.error("HealthSyncService: Failed to list files:",y)}return p.sort((y,v)=>{const M=new Date(y.report.updatedAt||y.report.createdAt).getTime();return new Date(v.report.updatedAt||v.report.createdAt).getTime()-M}),p})()}submitFinal(l){var p=this;return(0,i.A)(function*(){const m=(0,o.E)(),y=!0===l.isEditMode,v=l.existingReportId||p.generateReportId();let M=m;try{const ae=yield p.sharedDataService.readJsonFile(`${v}.json`);ae?.createdAt&&(M=ae.createdAt)}catch{}const R={reportId:v,createdAt:M,updatedAt:m,form:JSON.parse(JSON.stringify(l.formValue)),coordinates:l.coordinates?JSON.parse(JSON.stringify(l.coordinates)):null,photos:{soil:l.photos.soil||null,predation:l.photos.predation||null,pollution:l.photos.pollution||null},status:{incomplete:!1,sent:!1,pending:!1}};y&&(R.editedAt=m);const V=`${v}.json`;yield p.sharedDataService.writeJsonFile(V,R);const ce=yield p.sharedDataService.readJsonFile(V);if(!ce||ce.reportId!==v)throw new Error("HealthSyncService: local report verification failed");const z=yield p.storage.getUser(),te=z?z.organization||z.username:null;let K;if(l.originalSubmittedBy&&te&&l.originalSubmittedBy!==te?K=`${l.originalSubmittedBy}, ${te}`:te&&(K=te),R.submittedBy=K,yield p.sharedDataService.writeJsonFile(V,R),!0===l.forceOffline||!navigator.onLine)return yield p.enqueuePending({reportId:v,localReportFile:V}),{reportId:v,queued:!0};try{yield p.uploadReportAndImages(R,l.originalSubmittedBy),R.status.sent=!0,R.status.pending=!1,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.clearDraft();const ve=(yield p.storage.getUser())?.username||"unknown",Ne=p.getFormSummary(l.formValue),he=R.submittedBy;return y?p.monitoringLog.recordFormEdited(ve,"health",v,!1,Ne,he):p.monitoringLog.recordFormSubmitted(ve,"health",v,!1,Ne,he),{reportId:v,queued:!1}}catch(ae){const ve=String(ae?.message?ae.message:ae);R.status.pending=!0,R.status.lastError=ve,R.updatedAt=(0,o.E)(),yield p.sharedDataService.writeJsonFile(V,R),yield p.enqueuePending({reportId:v,localReportFile:V});const he=(yield p.storage.getUser())?.username||"unknown",Le=p.getFormSummary(l.formValue),re=R.submittedBy;return y?p.monitoringLog.recordFormEdited(he,"health",v,!0,Le,re):p.monitoringLog.recordFormSubmitted(he,"health",v,!0,Le,re),{reportId:v,queued:!0}}})()}enqueuePending(l){var p=this;return(0,i.A)(function*(){console.log("\u{1f4dd} HealthSyncService: enqueuePending called for reportId:",l.reportId);const m=yield p.loadPendingQueue();m.items.some(v=>v.reportId===l.reportId)?console.log("\u26a0\ufe0f HealthSyncService: Item already in queue, skipping"):(m.items.push({reportId:l.reportId,localReportFile:l.localReportFile,createdAt:(0,o.E)(),attempts:0}),console.log("\u2705 HealthSyncService: Added to queue. Queue length:",m.items.length)),yield p.savePendingQueue(m),console.log("\u{1f4be} HealthSyncService: Queue saved successfully")})()}processPendingQueue(){var l=this;return(0,i.A)(function*(){if(console.log("\u{1f504} HealthSyncService: processPendingQueue called"),l.processingQueue)console.log("\u23f8\ufe0f HealthSyncService: Already processing queue, skipping");else if(navigator.onLine){console.log("\u25b6\ufe0f HealthSyncService: Starting queue processing"),l.processingQueue=!0;try{const p=yield l.loadPendingQueue();if(console.log("\u{1f4cb} HealthSyncService: Loaded queue with",p.items.length,"items"),0===p.items.length)return void console.log("\u2705 HealthSyncService: Queue is empty, nothing to process");const m=[];for(const y of p.items){console.log("\u{1f50d} HealthSyncService: Processing item:",y.reportId,"(attempt",y.attempts+1,")");try{const v=yield l.sharedDataService.readJsonFile(y.localReportFile);if(!v){console.error("\u274c HealthSyncService: Local report file missing for",y.reportId),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()});continue}yield l.uploadReportAndImages(v),console.log("\u2705 HealthSyncService: Upload succeeded for",y.reportId),v.status.sent=!0,v.status.pending=!1,v.updatedAt=(0,o.E)(),yield l.sharedDataService.writeJsonFile(y.localReportFile,v),console.log("\u{1f4be} HealthSyncService: Marked report as sent")}catch(v){console.error("\u274c HealthSyncService: Upload failed for",y.reportId,":",v),m.push({...y,attempts:y.attempts+1,lastAttemptAt:(0,o.E)()})}}yield l.savePendingQueue({items:m}),console.log("\u{1f4ca} HealthSyncService: Queue processing complete. Remaining items:",m.length)}finally{l.processingQueue=!1}}else console.log("\u{1f4f4} HealthSyncService: Device is offline, skipping queue processing")})()}uploadReportAndImages(l,p){var m=this;return(0,i.A)(function*(){console.log("\u{1f4e4} HealthSyncService: Starting upload for report",l.reportId);const y=m.getClient(),v={};l.photos.soil&&(v.soil=yield m.uploadImageDataUrl(`${l.reportId}/soil.jpg`,l.photos.soil)),l.photos.predation&&(v.predation=yield m.uploadImageDataUrl(`${l.reportId}/predation.jpg`,l.photos.predation)),l.photos.pollution&&(v.pollution=yield m.uploadImageDataUrl(`${l.reportId}/pollution.jpg`,l.photos.pollution));const M=JSON.parse(JSON.stringify(l));M.photos=v,M.status={incomplete:!1,sent:!0,pending:!1};const R=`${l.reportId}.json`,V=new Blob([JSON.stringify(M)],{type:"application/json"}),{error:ce}=yield y.storage.from(m.REPORTS_BUCKET).upload(R,V,{contentType:"application/json",upsert:!0});if(ce)throw console.error("\u274c HealthSyncService: JSON upload error:",ce),ce;console.log("\u2705 HealthSyncService: Successfully uploaded JSON to",R);let z=l.submittedBy||null;if(!z){const le=yield m.storage.getUser();z=le?le.organization||le.username:null}const te={report_id:l.reportId,submitted_by:z,json_path:R,location:l.form.location||null,assessment_date:l.form.date||null,zone_number:l.form.zoneNumber?`Zone ${l.form.zoneNumber}`:null,quad_number:l.form.quadNumber?`Quad ${l.form.quadNumber.replace(/\D/g,"")}`:null,coordinates:l.coordinates?`POINT(${l.coordinates.longitude} ${l.coordinates.latitude})`:null},{error:K}=yield y.from("health_reports").upsert(te,{onConflict:"report_id"});if(K)throw console.error("\u274c HealthSyncService: Database upsert error:",K),K;console.log("\u2705 HealthSyncService: Successfully upserted into health_reports table")})()}uploadImageDataUrl(l,p){var m=this;return(0,i.A)(function*(){const y=m.getClient(),v=yield m.dataUrlToBlob(p),{error:M}=yield y.storage.from(m.IMAGES_BUCKET).upload(l,v,{contentType:v.type||"image/jpeg",upsert:!0});if(M)throw console.error("\u274c HealthSyncService: Image upload error for",l,":",M),M;return console.log("\u2705 HealthSyncService: Successfully uploaded image to",l),l})()}static#e=pe=()=>(this.\u0275fac=function(p){return new(p||ie)(D.KVO(Ce.H),D.KVO(De.L),D.KVO(B.w),D.KVO(Pe.u))},this.\u0275prov=D.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"}))}return pe(),ie})()},8071($t,ot,b){"use strict";function i(o){return"function"==typeof o}b.d(ot,{T:()=>i})},8132($t,ot,b){"use strict";b.d(ot,{Kp:()=>te,Wk:()=>R,iI:()=>ct});var i=b(467),o=b(7303),D=b(177),Ce=b(2200),De=b(7705),B=b(2615),Pe=b(3664),Ge=b(9295),pe=b(5921),ie=b(1413),Ae=b(6648),l=b(7673),p=b(9437),m=b(274),y=b(5964),v=b(6365),M=b(1397);let R=(()=>{class Mt{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=(0,B.vPA)(null);get href(){return(0,Ge.O8)(this.reactiveHref)}set href(wt){this.reactiveHref.set(wt)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ie.B;applicationErrorHandler=(0,B.WQX)(B.ZTf);options=(0,B.WQX)(pe.J_,{optional:!0});constructor(wt,Nt,en,cn,Dn,Zn){this.router=wt,this.route=Nt,this.tabIndexAttribute=en,this.renderer=cn,this.el=Dn,this.locationStrategy=Zn,this.reactiveHref.set((0,B.WQX)(new De.ES_("href"),{optional:!0}));const Qn=Dn.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Qn||"area"===Qn||!("object"!=typeof customElements||!customElements.get(Qn)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(void 0!==this.subscription||!this.isAnchorElement)return;let wt=this.preserveFragment;const Nt=en=>"merge"===en||"preserve"===en;wt||=Nt(this.queryParamsHandling),wt||=!this.queryParamsHandling&&!Nt(this.options?.defaultQueryParamsHandling),wt&&(this.subscription=this.router.events.subscribe(en=>{en instanceof pe.wF&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(wt){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",wt)}ngOnChanges(wt){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(wt){null==wt?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=(0,pe.wO)(wt)||Array.isArray(wt)?wt:[wt],this.setTabIndexIfNotOnNativeEl("0"))}onClick(wt,Nt,en,cn,Dn){const Zn=this.urlTree;if(null===Zn||this.isAnchorElement&&(0!==wt||Nt||en||cn||Dn||"string"==typeof this.target&&"_self"!=this.target))return!0;const Qn={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(Zn,Qn)?.catch(Vn=>{this.applicationErrorHandler(Vn)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const wt=this.urlTree;this.reactiveHref.set(null!==wt&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(wt))??"":null)}applyAttributeValue(wt,Nt){const en=this.renderer,cn=this.el.nativeElement;null!==Nt?en.setAttribute(cn,wt,Nt):en.removeAttribute(cn,wt)}get urlTree(){return null===this.routerLinkInput?null:(0,pe.wO)(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(Nt){return new(Nt||Mt)(Pe.rXU(pe.Ix),Pe.rXU(pe.nX),Pe.kS0("tabindex"),Pe.rXU(Pe.sFG),Pe.rXU(Pe.aKT),Pe.rXU(o.hb))};static \u0275dir=Pe.FsC({type:Mt,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(Nt,en){1&Nt&&Pe.bIt("click",function(Dn){return en.onClick(Dn.button,Dn.ctrlKey,Dn.shiftKey,Dn.altKey,Dn.metaKey)}),2&Nt&&Pe.BMQ("href",en.reactiveHref(),Pe.n$t)("target",en.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",De.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",De.L39],replaceUrl:[2,"replaceUrl","replaceUrl",De.L39],routerLink:"routerLink"},features:[Pe.OA$]})}return Mt})();class z{}let te=(()=>{class Mt{preload(wt,Nt){return Nt().pipe((0,p.W)(()=>(0,l.of)(null)))}static \u0275fac=function(Nt){return new(Nt||Mt)};static \u0275prov=B.jDH({token:Mt,factory:Mt.\u0275fac,providedIn:"root"})}return Mt})(),le=(()=>{class Mt{router;injector;preloadingStrategy;loader;subscription;constructor(wt,Nt,en,cn){this.router=wt,this.injector=Nt,this.preloadingStrategy=en,this.loader=cn}setUpPreloading(){this.subscription=this.router.events.pipe((0,y.p)(wt=>wt instanceof pe.wF),(0,m.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(wt,Nt){const en=[];for(const cn of Nt){cn.providers&&!cn._injector&&(cn._injector=(0,Pe.Ol2)(cn.providers,wt,`Route: ${cn.path}`));const Dn=cn._injector??wt,Zn=cn._loadedInjector??Dn;(cn.loadChildren&&!cn._loadedRoutes&&void 0===cn.canLoad||cn.loadComponent&&!cn._loadedComponent)&&en.push(this.preloadConfig(Dn,cn)),(cn.children||cn._loadedRoutes)&&en.push(this.processRoutes(Zn,cn.children??cn._loadedRoutes))}return(0,Ae.H)(en).pipe((0,v.U)())}preloadConfig(wt,Nt){return this.preloadingStrategy.preload(Nt,()=>{let en;en=Nt.loadChildren&&void 0===Nt.canLoad?this.loader.loadChildren(wt,Nt):(0,l.of)(null);const cn=en.pipe((0,M.Z)(Dn=>null===Dn?(0,l.of)(void 0):(Nt._loadedRoutes=Dn.routes,Nt._loadedInjector=Dn.injector,this.processRoutes(Dn.injector??wt,Dn.routes))));if(Nt.loadComponent&&!Nt._loadedComponent){const Dn=this.loader.loadComponent(wt,Nt);return(0,Ae.H)([cn,Dn]).pipe((0,v.U)())}return cn})}static \u0275fac=function(Nt){return new(Nt||Mt)(B.KVO(pe.Ix),B.KVO(B.uvJ),B.KVO(z),B.KVO(pe.D$))};static \u0275prov=B.jDH({token:Mt,factory:Mt.\u0275fac,providedIn:"root"})}return Mt})();const ae=new B.nKC("");let ve=(()=>{class Mt{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=pe.wU;restoredId=0;store={};constructor(wt,Nt,en,cn,Dn={}){this.urlSerializer=wt,this.transitions=Nt,this.viewportScroller=en,this.zone=cn,this.options=Dn,Dn.scrollPositionRestoration||="disabled",Dn.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(wt=>{wt instanceof pe.Z?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=wt.navigationTrigger,this.restoredId=wt.restoredState?wt.restoredState.navigationId:0):wt instanceof pe.wF?(this.lastId=wt.id,this.scheduleScrollEvent(wt,this.urlSerializer.parse(wt.urlAfterRedirects).fragment)):wt instanceof pe.lW&&wt.code===pe.mo.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(wt,this.urlSerializer.parse(wt.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(wt=>{if(!(wt instanceof pe.OY))return;const Nt={behavior:"instant"};wt.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0],Nt):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(wt.position,Nt):wt.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(wt.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(wt,Nt){var en=this;this.zone.runOutsideAngular((0,i.A)(function*(){yield new Promise(cn=>{setTimeout(cn),typeof requestAnimationFrame<"u"&&requestAnimationFrame(cn)}),en.zone.run(()=>{en.transitions.events.next(new pe.OY(wt,"popstate"===en.lastSource?en.store[en.restoredId]:null,Nt))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(Nt){Pe.QTQ()};static \u0275prov=B.jDH({token:Mt,factory:Mt.\u0275fac})}return Mt})();function Fe(Mt,hn){return{\u0275kind:Mt,\u0275providers:hn}}function be(){const Mt=(0,B.WQX)(B.zZn);return hn=>{const wt=Mt.get(Pe.o8S);if(hn!==wt.components[0])return;const Nt=Mt.get(pe.Ix),en=Mt.get(q);1===Mt.get(ge)&&Nt.initialNavigation(),Mt.get(dt,null,{optional:!0})?.setUpPreloading(),Mt.get(ae,null,{optional:!0})?.init(),Nt.resetRootComponentType(wt.componentTypes[0]),en.closed||(en.next(),en.complete(),en.unsubscribe())}}const q=new B.nKC("",{factory:()=>new ie.B}),ge=new B.nKC("",{providedIn:"root",factory:()=>1}),dt=new B.nKC("");function St(Mt){return Fe(0,[{provide:dt,useExisting:le},{provide:z,useExisting:Mt}])}function ut(Mt){return(0,Pe._jY)("NgRouterViewTransitions"),Fe(9,[{provide:pe.Pu,useValue:pe.Lg},{provide:pe.bK,useValue:{skipNextTransition:!!Mt?.skipInitialTransition,...Mt}}])}const Jt=[o.aZ,{provide:pe.Sd,useClass:pe.nU},pe.Ix,pe.Zp,{provide:pe.nX,useFactory:function Ke(Mt){return Mt.routerState.root},deps:[pe.Ix]},pe.D$,[]];let ct=(()=>{class Mt{constructor(){}static forRoot(wt,Nt){return{ngModule:Mt,providers:[Jt,[],{provide:pe.bw,multi:!0,useValue:wt},[],Nt?.errorHandler?{provide:pe.XR,useValue:Nt.errorHandler}:[],{provide:pe.J_,useValue:Nt||{}},Nt?.useHash?{provide:o.hb,useClass:Ce.fw}:{provide:o.hb,useClass:o.Sm},{provide:ae,useFactory:()=>{const Mt=(0,B.WQX)(D.Xr),hn=(0,B.WQX)(Pe.SKi),wt=(0,B.WQX)(pe.J_),Nt=(0,B.WQX)(pe.J2),en=(0,B.WQX)(pe.Sd);return wt.scrollOffset&&Mt.setOffset(wt.scrollOffset),new ve(en,Nt,Mt,hn,wt)}},Nt?.preloadingStrategy?St(Nt.preloadingStrategy).\u0275providers:[],Nt?.initialNavigation?Un(Nt):[],Nt?.bindToComponentInputs?Fe(8,[pe.tD,{provide:pe.c1,useExisting:pe.tD}]).\u0275providers:[],Nt?.enableViewTransitions?ut().\u0275providers:[],[{provide:Cn,useFactory:be},{provide:Pe.iLQ,multi:!0,useExisting:Cn}]]}}static forChild(wt){return{ngModule:Mt,providers:[{provide:pe.bw,multi:!0,useValue:wt}]}}static \u0275fac=function(Nt){return new(Nt||Mt)};static \u0275mod=Pe.$C({type:Mt});static \u0275inj=B.G2t({})}return Mt})();function Un(Mt){return["disabled"===Mt.initialNavigation?Fe(3,[(0,Pe.phd)(()=>{(0,B.WQX)(pe.Ix).setUpLocationChangeListener()}),{provide:ge,useValue:2}]).\u0275providers:[],"enabledBlocking"===Mt.initialNavigation?Fe(2,[{provide:Pe.tvf,useValue:!0},{provide:ge,useValue:0},(0,Pe.phd)(()=>{const hn=(0,B.WQX)(B.zZn);return hn.get(o.hj,Promise.resolve()).then(()=>new Promise(Nt=>{const en=hn.get(pe.Ix),cn=hn.get(q);(0,pe.gk)(en,()=>{Nt(!0)}),hn.get(pe.J2).afterPreactivation=()=>(Nt(!0),cn.closed?(0,l.of)(void 0):cn),en.initialNavigation()}))})]).\u0275providers:[]]}const Cn=new B.nKC("")},8254($t,ot,b){"use strict";b.d(ot,{Y:()=>Ce});var i=b(467);function Ce(De=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},void 0===window.Capacitor||De?void 0!==window.cordova&&function D(De){De.CapacitorUtils.Synapse=new Proxy({},{get:(B,Pe)=>De.cordova.plugins[Pe]})}(window):function o(De){De.CapacitorUtils.Synapse=new Proxy({},{get:(B,Pe)=>new Proxy({},{get:(Ge,pe)=>(ie,Ae,l)=>{const p=De.Capacitor.Plugins[Pe];void 0!==p?"function"==typeof p[pe]?(0,i.A)(function*(){try{const m=yield p[pe](ie);Ae(m)}catch(m){l(m)}})():l(new Error(`Method ${pe} not found in Capacitor plugin ${Pe}`)):l(new Error(`Capacitor plugin ${Pe} not found`))}})})}(window))}},8313($t,ot,b){"use strict";b.r(ot),b.d(ot,{mdTransitionAnimation:()=>B});var i=b(2541),o=b(1841);b(5705),b(9596),b(4674);const B=(Pe,Ge)=>{var pe,ie,Ae;const l="40px",m="back"===Ge.direction,v=Ge.leavingEl,M=(0,o.g)(Ge.enteringEl),R=M.querySelector("ion-toolbar"),V=(0,i.c)();if(V.addElement(M).fill("both").beforeRemoveClass("ion-page-invisible"),m?V.duration((null!==(pe=Ge.duration)&&void 0!==pe?pe:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):V.duration((null!==(ie=Ge.duration)&&void 0!==ie?ie:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${l})`,"translateY(0px)").fromTo("opacity",.01,1),R){const ce=(0,i.c)();ce.addElement(R),V.addAnimation(ce)}if(v&&m){V.duration((null!==(Ae=Ge.duration)&&void 0!==Ae?Ae:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ce=(0,i.c)();ce.addElement((0,o.g)(v)).onFinish(z=>{1===z&&ce.elements.length>0&&ce.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${l})`).fromTo("opacity",1,0),V.addAnimation(ce)}return V}},8359($t,ot,b){"use strict";b.d(ot,{Kn:()=>B,yU:()=>De,Uv:()=>Pe});var i=b(8071);const D=(0,b(1853).L)(pe=>function(Ae){pe(this),this.message=Ae?`${Ae.length} errors occurred during unsubscription:\n${Ae.map((l,p)=>`${p+1}) ${l.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ae});var Ce=b(7908);class De{constructor(ie){this.initialTeardown=ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ie;if(!this.closed){this.closed=!0;const{_parentage:Ae}=this;if(Ae)if(this._parentage=null,Array.isArray(Ae))for(const m of Ae)m.remove(this);else Ae.remove(this);const{initialTeardown:l}=this;if((0,i.T)(l))try{l()}catch(m){ie=m instanceof D?m.errors:[m]}const{_finalizers:p}=this;if(p){this._finalizers=null;for(const m of p)try{Ge(m)}catch(y){ie=ie??[],y instanceof D?ie=[...ie,...y.errors]:ie.push(y)}}if(ie)throw new D(ie)}}add(ie){var Ae;if(ie&&ie!==this)if(this.closed)Ge(ie);else{if(ie instanceof De){if(ie.closed||ie._hasParent(this))return;ie._addParent(this)}(this._finalizers=null!==(Ae=this._finalizers)&&void 0!==Ae?Ae:[]).push(ie)}}_hasParent(ie){const{_parentage:Ae}=this;return Ae===ie||Array.isArray(Ae)&&Ae.includes(ie)}_addParent(ie){const{_parentage:Ae}=this;this._parentage=Array.isArray(Ae)?(Ae.push(ie),Ae):Ae?[Ae,ie]:ie}_removeParent(ie){const{_parentage:Ae}=this;Ae===ie?this._parentage=null:Array.isArray(Ae)&&(0,Ce.o)(Ae,ie)}remove(ie){const{_finalizers:Ae}=this;Ae&&(0,Ce.o)(Ae,ie),ie instanceof De&&ie._removeParent(this)}}De.EMPTY=(()=>{const pe=new De;return pe.closed=!0,pe})();const B=De.EMPTY;function Pe(pe){return pe instanceof De||pe&&"closed"in pe&&(0,i.T)(pe.remove)&&(0,i.T)(pe.add)&&(0,i.T)(pe.unsubscribe)}function Ge(pe){(0,i.T)(pe)?pe():pe.unsubscribe()}},8440($t,ot,b){"use strict";b.d(ot,{Ag:()=>Fe,Bg:()=>R,EF:()=>Oe,H8:()=>re,Ht:()=>B,JC:()=>p,KE:()=>Ge,KO:()=>ge,KZ:()=>Ke,Ny:()=>we,TO:()=>M,Wu:()=>ce,XR:()=>K,a7:()=>Ne,bh:()=>De,j2:()=>St,mC:()=>vt,mK:()=>Ae,n5:()=>He,nR:()=>Pe,pL:()=>ie,s0:()=>lt,si:()=>te});let i=null,o=!1,D=1;const De=Symbol("SIGNAL");function B(ut){const xt=i;return i=ut,xt}function Pe(){return i}function Ge(){return o}const ie={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ae(ut){if(o)throw new Error("");if(null===i)return;i.consumerOnSignalRead(ut);const xt=i.producersTail;if(void 0!==xt&&xt.producer===ut)return;let Tt;const Jt=i.recomputing;if(Jt&&(Tt=void 0!==xt?xt.nextProducer:i.producers,void 0!==Tt&&Tt.producer===ut))return i.producersTail=Tt,void(Tt.lastReadVersion=ut.version);const ct=ut.consumersTail;if(void 0!==ct&&ct.consumer===i&&(!Jt||function Le(ut,xt){const Tt=xt.producersTail;if(void 0!==Tt){let Jt=xt.producers;do{if(Jt===ut)return!0;if(Jt===Tt)break;Jt=Jt.nextProducer}while(void 0!==Jt)}return!1}(ct,i)))return;const _t=ve(i),Et={producer:ut,consumer:i,nextProducer:Tt,prevConsumer:ct,lastReadVersion:ut.version,nextConsumer:void 0};i.producersTail=Et,void 0!==xt?xt.nextProducer=Et:i.producers=Et,_t&&le(ut,Et)}function p(ut){if((!ve(ut)||ut.dirty)&&(ut.dirty||ut.lastCleanEpoch!==D)){if(!ut.producerMustRecompute(ut)&&!te(ut))return void M(ut);ut.producerRecomputeValue(ut),M(ut)}}function m(ut){if(void 0===ut.consumers)return;const xt=o;o=!0;try{for(let Tt=ut.consumers;void 0!==Tt;Tt=Tt.nextConsumer){const Jt=Tt.consumer;Jt.dirty||v(Jt)}}finally{o=xt}}function y(){return!1!==i?.consumerAllowSignalWrites}function v(ut){ut.dirty=!0,m(ut),ut.consumerMarkedDirty?.(ut)}function M(ut){ut.dirty=!1,ut.lastCleanEpoch=D}function R(ut){return ut&&function V(ut){ut.producersTail=void 0,ut.recomputing=!0}(ut),B(ut)}function ce(ut,xt){B(xt),ut&&function z(ut){ut.recomputing=!1;const xt=ut.producersTail;let Tt=void 0!==xt?xt.nextProducer:ut.producers;if(void 0!==Tt){if(ve(ut))do{Tt=ae(Tt)}while(void 0!==Tt);void 0!==xt?xt.nextProducer=void 0:ut.producers=void 0}}(ut)}function te(ut){for(let xt=ut.producers;void 0!==xt;xt=xt.nextProducer){const Tt=xt.producer,Jt=xt.lastReadVersion;if(Jt!==Tt.version||(p(Tt),Jt!==Tt.version))return!0}return!1}function K(ut){if(ve(ut)){let xt=ut.producers;for(;void 0!==xt;)xt=ae(xt)}ut.producers=void 0,ut.producersTail=void 0,ut.consumers=void 0,ut.consumersTail=void 0}function le(ut,xt){const Tt=ut.consumersTail,Jt=ve(ut);if(void 0!==Tt?(xt.nextConsumer=Tt.nextConsumer,Tt.nextConsumer=xt):(xt.nextConsumer=void 0,ut.consumers=xt),xt.prevConsumer=Tt,ut.consumersTail=xt,!Jt)for(let ct=ut.producers;void 0!==ct;ct=ct.nextProducer)le(ct.producer,ct)}function ae(ut){const xt=ut.producer,Tt=ut.nextProducer,Jt=ut.nextConsumer,ct=ut.prevConsumer;if(ut.nextConsumer=void 0,ut.prevConsumer=void 0,void 0!==Jt?Jt.prevConsumer=ct:xt.consumersTail=ct,void 0!==ct)ct.nextConsumer=Jt;else if(xt.consumers=Jt,!ve(xt)){let _t=xt.producers;for(;void 0!==_t;)_t=ae(_t)}return Tt}function ve(ut){return ut.consumerIsAlwaysLive||void 0!==ut.consumers}function Ne(ut){}function re(ut,xt){return Object.is(ut,xt)}function Ke(ut,xt){const Tt=Object.create(Ye);Tt.computation=ut,void 0!==xt&&(Tt.equal=xt);const Jt=()=>{if(p(Tt),Ae(Tt),Tt.value===Oe)throw Tt.error;return Tt.value};return Jt[De]=Tt,Jt}const Fe=Symbol("UNSET"),we=Symbol("COMPUTING"),Oe=Symbol("ERRORED"),Ye={...ie,value:Fe,dirty:!0,error:null,equal:re,kind:"computed",producerMustRecompute:ut=>ut.value===Fe||ut.value===we,producerRecomputeValue(ut){if(ut.value===we)throw new Error("");const xt=ut.value;ut.value=we;const Tt=R(ut);let Jt,ct=!1;try{Jt=ut.computation(),B(null),ct=xt!==Fe&&xt!==Oe&&Jt!==Oe&&ut.equal(xt,Jt)}catch(_t){Jt=Oe,ut.error=_t}finally{ce(ut,Tt)}ct?ut.value=xt:(ut.value=Jt,ut.version++)}};let be=function Ve(){throw new Error};function q(ut){be(ut)}function ge(ut){be=ut}function He(ut,xt){const Tt=Object.create(lt);Tt.value=ut,void 0!==xt&&(Tt.equal=xt);const Jt=()=>function dt(ut){return Ae(ut),ut.value}(Tt);return Jt[De]=Tt,[Jt,Et=>St(Tt,Et),Et=>vt(Tt,Et)]}function St(ut,xt){y()||q(ut),ut.equal(ut.value,xt)||(ut.value=xt,function Ut(ut){ut.version++,function l(){D++}(),m(ut)}(ut))}function vt(ut,xt){y()||q(ut),St(ut,xt(ut.value))}const lt={...ie,equal:re,value:void 0,kind:"signal"}},8496($t,ot,b){"use strict";function i(o,D){return o.reduce((Ce,De,B)=>(Ce[De]=D[B],Ce),{})}b.d(ot,{e:()=>i})},8607($t,ot,b){"use strict";b.d(ot,{B:()=>Ce,G:()=>De});class o{constructor(Pe,Ge,pe,ie,Ae){this.id=Ge,this.name=pe,this.disableScroll=Ae,this.priority=1e6*ie+Ge,this.ctrl=Pe}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Pe=this.ctrl.capture(this.name,this.id,this.priority);return Pe&&this.disableScroll&&this.ctrl.disableScroll(this.id),Pe}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class D{constructor(Pe,Ge,pe,ie){this.id=Ge,this.disable=pe,this.disableScroll=ie,this.ctrl=Pe}block(){if(this.ctrl){if(this.disable)for(const Pe of this.disable)this.ctrl.disableGesture(Pe,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Pe of this.disable)this.ctrl.enableGesture(Pe,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Ce="backdrop-no-scroll",De=new class i{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Pe){var Ge;return new o(this,this.newID(),Pe.name,null!==(Ge=Pe.priority)&&void 0!==Ge?Ge:0,!!Pe.disableScroll)}createBlocker(Pe={}){return new D(this,this.newID(),Pe.disable,!!Pe.disableScroll)}start(Pe,Ge,pe){return this.canStart(Pe)?(this.requestedStart.set(Ge,pe),!0):(this.requestedStart.delete(Ge),!1)}capture(Pe,Ge,pe){if(!this.start(Pe,Ge,pe))return!1;const ie=this.requestedStart;let Ae=-1e4;if(ie.forEach(l=>{Ae=Math.max(Ae,l)}),Ae===pe){this.capturedId=Ge,ie.clear();const l=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Pe}});return document.dispatchEvent(l),!0}return ie.delete(Ge),!1}release(Pe){this.requestedStart.delete(Pe),this.capturedId===Pe&&(this.capturedId=void 0)}disableGesture(Pe,Ge){let pe=this.disabledGestures.get(Pe);void 0===pe&&(pe=new Set,this.disabledGestures.set(Pe,pe)),pe.add(Ge)}enableGesture(Pe,Ge){const pe=this.disabledGestures.get(Pe);void 0!==pe&&pe.delete(Ge)}disableScroll(Pe){this.disabledScroll.add(Pe),1===this.disabledScroll.size&&document.body.classList.add(Ce)}enableScroll(Pe){this.disabledScroll.delete(Pe),0===this.disabledScroll.size&&document.body.classList.remove(Ce)}canStart(Pe){return!(void 0!==this.capturedId||this.isDisabled(Pe))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Pe){const Ge=this.disabledGestures.get(Pe);return!!(Ge&&Ge.size>0)}newID(){return this.gestureId++,this.gestureId}}},8750($t,ot,b){"use strict";b.d(ot,{Tg:()=>p});var i=b(1635),o=b(7441),D=b(9858),Ce=b(1985),De=b(5055),B=b(7953),Pe=b(591),Ge=b(5397),pe=b(5196),ie=b(8071),Ae=b(5334),l=b(3494);function p(z){if(z instanceof Ce.c)return z;if(null!=z){if((0,De.l)(z))return function m(z){return new Ce.c(te=>{const K=z[l.s]();if((0,ie.T)(K.subscribe))return K.subscribe(te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(z);if((0,o.X)(z))return function y(z){return new Ce.c(te=>{for(let K=0;K<z.length&&!te.closed;K++)te.next(z[K]);te.complete()})}(z);if((0,D.y)(z))return function v(z){return new Ce.c(te=>{z.then(K=>{te.closed||(te.next(K),te.complete())},K=>te.error(K)).then(null,Ae.m)})}(z);if((0,B.T)(z))return R(z);if((0,Ge.x)(z))return function M(z){return new Ce.c(te=>{for(const K of z)if(te.next(K),te.closed)return;te.complete()})}(z);if((0,pe.U)(z))return function V(z){return R((0,pe.C)(z))}(z)}throw(0,Pe.L)(z)}function R(z){return new Ce.c(te=>{(function ce(z,te){var K,le,ae,ve;return(0,i.sH)(this,void 0,void 0,function*(){try{for(K=(0,i.xN)(z);!(le=yield K.next()).done;)if(te.next(le.value),te.closed)return}catch(Ne){ae={error:Ne}}finally{try{le&&!le.done&&(ve=K.return)&&(yield ve.call(K))}finally{if(ae)throw ae.error}}te.complete()})})(z,te).catch(K=>te.error(K))})}},8839($t,ot,b){"use strict";b.d(ot,{b:()=>ie,E:()=>pe});var i=b(8359);class o extends i.yU{constructor(l,p){super()}schedule(l,p=0){return this}}const D={setInterval(Ae,l,...p){const{delegate:m}=D;return m?.setInterval?m.setInterval(Ae,l,...p):setInterval(Ae,l,...p)},clearInterval(Ae){const{delegate:l}=D;return(l?.clearInterval||clearInterval)(Ae)},delegate:void 0};var Ce=b(7908),B=b(6129);class Pe{constructor(l,p=Pe.now){this.schedulerActionCtor=l,this.now=p}schedule(l,p=0,m){return new this.schedulerActionCtor(this,l).schedule(m,p)}}Pe.now=B.U.now;const pe=new class Ge extends Pe{constructor(l,p=Pe.now){super(l,p),this.actions=[],this._active=!1}flush(l){const{actions:p}=this;if(this._active)return void p.push(l);let m;this._active=!0;do{if(m=l.execute(l.state,l.delay))break}while(l=p.shift());if(this._active=!1,m){for(;l=p.shift();)l.unsubscribe();throw m}}}(class De extends o{constructor(l,p){super(l,p),this.scheduler=l,this.work=p,this.pending=!1}schedule(l,p=0){var m;if(this.closed)return this;this.state=l;const y=this.id,v=this.scheduler;return null!=y&&(this.id=this.recycleAsyncId(v,y,p)),this.pending=!0,this.delay=p,this.id=null!==(m=this.id)&&void 0!==m?m:this.requestAsyncId(v,this.id,p),this}requestAsyncId(l,p,m=0){return D.setInterval(l.flush.bind(l,this),m)}recycleAsyncId(l,p,m=0){if(null!=m&&this.delay===m&&!1===this.pending)return p;null!=p&&D.clearInterval(p)}execute(l,p){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const m=this._execute(l,p);if(m)return m;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(l,p){let y,m=!1;try{this.work(l)}catch(v){m=!0,y=v||new Error("Scheduled action threw falsy error")}if(m)return this.unsubscribe(),y}unsubscribe(){if(!this.closed){const{id:l,scheduler:p}=this,{actions:m}=p;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ce.o)(m,this),null!=l&&(this.id=this.recycleAsyncId(p,l,null)),this.delay=null,super.unsubscribe()}}}),ie=pe},8863($t,ot,b){"use strict";b.d(ot,{u:()=>Ae});var i=b(467),o=b(2084),D=b(2615),Ce=b(918),De=b(5029),B=b(4938);const Pe="monitoring-log.json",Ge="monitoring-log_master.json",pe="monitoring-logs";let Ae=(()=>{var l;class p{constructor(y,v,M){this.sharedDataService=y,this.supabaseService=v,this.storage=M,this.draftLogTimestamps=new Map,this.DRAFT_THROTTLE_MS=3e5}recordEvent(y){var v=this;return(0,i.A)(function*(){try{const M=new Date,R=240,V=M.getTimezoneOffset(),ce=new Date(M.getTime()+60*(R+V)*1e3),z=ce.toLocaleDateString("en-CA"),te=ce.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),K=`${z.replace(/-/g,"")}_${te.replace(/:/g,"")}_${Math.random().toString(36).substr(2,5)}`,le=v.getDeviceInfo(),ae={id:K,timestamp:(0,o.E)(),date:z,time:te,device:le,...y};let ve=[];try{ve=(yield v.sharedDataService.readJsonFile(Pe))||[]}catch{ve=[]}ve.push(ae),ve.length>1e3&&(ve=ve.slice(-1e3)),yield v.sharedDataService.writeJsonFile(Pe,ve)}catch(M){console.error("MonitoringLogService: Error recording event:",M)}})()}getEntries(){var y=this;return(0,i.A)(function*(){try{return(yield y.sharedDataService.readJsonFile(Pe))||[]}catch{return[]}})()}recordLogin(y){var v=this;return(0,i.A)(function*(){yield v.recordEvent({eventType:"login",username:y})})()}recordLogout(y){var v=this;return(0,i.A)(function*(){yield v.recordEvent({eventType:"logout",username:y})})()}recordDraftSaved(y,v,M,R){var V=this;return(0,i.A)(function*(){const ce=`draft_${v}`,z=Date.now(),te=V.draftLogTimestamps.get(ce);te&&z-te<V.DRAFT_THROTTLE_MS||(V.draftLogTimestamps.set(ce,z),yield V.recordEvent({eventType:"draft_saved",username:y,formType:v,reportId:M,details:R?`Draft: ${R}`:`Draft saved for ${v}`}))})()}recordFormSubmitted(y,v,M,R,V,ce){var z=this;return(0,i.A)(function*(){const te=R?"Submitted (queued offline)":"Submitted";yield z.recordEvent({eventType:"form_submitted",username:y,formType:v,reportId:M,details:V?`${te}: ${V}`:`${te} ${v}`,submittedBy:ce})})()}recordFormEdited(y,v,M,R,V,ce){var z=this;return(0,i.A)(function*(){const te=R?"Edited (queued offline)":"Edited";yield z.recordEvent({eventType:"form_edited",username:y,formType:v,reportId:M,details:V?`${te}: ${V}`:`${te} ${v}`,submittedBy:ce})})()}recordFormDeleted(y,v,M,R){var V=this;return(0,i.A)(function*(){yield V.recordEvent({eventType:"form_deleted",username:y,formType:v,reportId:M,details:R?`Deleted: ${R}`:`Deleted ${v} report`})})()}recordSpeciesAdded(y,v,M,R){var V=this;return(0,i.A)(function*(){yield V.recordEvent({eventType:"species_added",username:y,details:R?`New ${M} species added (pending approval): ${v}`:`New ${M} species added: ${v}`})})()}recordSiteAdded(y,v,M){var R=this;return(0,i.A)(function*(){yield R.recordEvent({eventType:"site_added",username:y,details:M?`New site added (pending permission): ${v}`:`New site added: ${v}`})})()}recordLevelRequest(y,v){var M=this;return(0,i.A)(function*(){yield M.recordEvent({eventType:"level_request",username:y,details:`Requested L${v} access`})})()}recordUserRegistered(y,v){var M=this;return(0,i.A)(function*(){yield M.recordEvent({eventType:"user_registered",username:y,details:`New user registered (L${v})`})})()}uploadToServer(){var y=this;return(0,i.A)(function*(){try{const v=yield y.sharedDataService.readJsonFile(Pe);if(!v||0===v.length)return console.log("\u{1f4cb} MonitoringLogService: No local log entries to upload"),!0;const R=`device-logs/monitoring-log_${yield y.getUploadDeviceId()}.json`,V=JSON.stringify(v,null,2),ce=new Blob([V],{type:"application/json"}),z=y.supabaseService.getClient(),{error:te}=yield z.storage.from(pe).upload(R,ce,{upsert:!0});return te?(console.error("\u274c MonitoringLogService: Upload error:",te),!1):(console.log(`\u2705 MonitoringLogService: Uploaded ${v.length} log entries to ${R}`),!0)}catch(v){return console.error("\u274c MonitoringLogService: Error uploading logs:",v),!1}})()}downloadAllDeviceLogs(){var y=this;return(0,i.A)(function*(){try{const v=y.supabaseService.getClient(),{data:M,error:R}=yield v.storage.from(pe).list("device-logs",{limit:500,sortBy:{column:"created_at",order:"desc"}});if(R)return console.error("\u274c MonitoringLogService: Error listing device logs:",R),!1;if(!M||0===M.length)return console.log("\u{1f4cb} MonitoringLogService: No device logs found on server"),!0;console.log(`\u{1f4e5} MonitoringLogService: Found ${M.length} device log files on server`);const V=[],ce=new Set;for(const te of M)if(te.name.endsWith(".json"))try{const{data:K,error:le}=yield v.storage.from(pe).download(`device-logs/${te.name}`);if(le||!K){console.warn(`\u26a0\ufe0f MonitoringLogService: Failed to download ${te.name}:`,le);continue}const ae=yield K.text(),ve=JSON.parse(ae);if(Array.isArray(ve))for(const Ne of ve)ce.has(Ne.id)||(ce.add(Ne.id),V.push(Ne))}catch(K){console.warn(`\u26a0\ufe0f MonitoringLogService: Error parsing ${te.name}:`,K)}V.sort((te,K)=>(K.timestamp||"").localeCompare(te.timestamp||""));const z=V.slice(0,1e3);return yield y.sharedDataService.writeJsonFile(Ge,z),console.log(`\u2705 MonitoringLogService: Saved master log with ${z.length} entries (from ${M.length} device files)`),!0}catch(v){return console.error("\u274c MonitoringLogService: Error downloading device logs:",v),!1}})()}getAllEntries(){var y=this;return(0,i.A)(function*(){const v=new Set,M=[],R=yield y.getEntries();for(const V of R)v.has(V.id)||(v.add(V.id),M.push(V));try{const V=yield y.sharedDataService.readJsonFile(Ge);if(V&&Array.isArray(V))for(const ce of V)v.has(ce.id)||(v.add(ce.id),M.push(ce))}catch{}return M.sort((V,ce)=>(ce.timestamp||"").localeCompare(V.timestamp||"")),M})()}getDeviceInfo(){const y=navigator.userAgent||"";let v="Unknown OS";/iPad|iPhone|iPod/.test(y)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1?v="iOS":/Android/.test(y)?v="Android":/Mac OS X|Macintosh/.test(y)?v="macOS":/Windows/.test(y)?v="Windows":/Linux/.test(y)?v="Linux":/CrOS/.test(y)&&(v="ChromeOS");let M="Laptop";return/iPad/.test(y)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||/Android/.test(y)&&!/Mobile/.test(y)?M="Tablet":(/iPhone|iPod/.test(y)||/Android/.test(y)&&/Mobile/.test(y))&&(M="Mobile"),`${M} \xb7 ${v}`}getUploadDeviceId(){var y=this;return(0,i.A)(function*(){try{return`${(yield y.storage.getUser())?.username||"unknown"}_${navigator.platform||"unknown"}`.replace(/\s+/g,"_").substring(0,50)}catch{return"unknown_device"}})()}static#e=l=()=>(this.\u0275fac=function(v){return new(v||p)(D.KVO(Ce.H),D.KVO(De.L),D.KVO(B.w))},this.\u0275prov=D.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}))}return l(),p})()},8941($t,ot,b){"use strict";b.r(ot),b.d(ot,{App:()=>o});const o=(0,b(5083).registerPlugin)("App",{web:()=>b.e(9303).then(b.bind(b,9303)).then(D=>new D.AppWeb)})},9081($t,ot,b){"use strict";b.d(ot,{m:()=>p});var i=b(467),o=b(9596),D=b(9431),Ce=b(5705),De=b(4674),B=b(6855),Pe=b(2541);const Ge=m=>(0,Pe.c)().duration(m?400:300),pe=m=>{let y,v;const M=m.width+8,R=(0,Pe.c)(),V=(0,Pe.c)();m.isEndSide?(y=M+"px",v="0px"):(y=-M+"px",v="0px"),R.addElement(m.menuInnerEl).fromTo("transform",`translateX(${y})`,`translateX(${v})`);const z="ios"===(0,B.b)(m),te=z?.2:.25;return V.addElement(m.backdropEl).fromTo("opacity",.01,te),Ge(z).addAnimation([R,V])},ie=m=>{let y,v;const M=(0,B.b)(m),R=m.width;m.isEndSide?(y=-R+"px",v=R+"px"):(y=R+"px",v=-R+"px");const V=(0,Pe.c)().addElement(m.menuInnerEl).fromTo("transform",`translateX(${v})`,"translateX(0px)"),ce=(0,Pe.c)().addElement(m.contentEl).fromTo("transform","translateX(0px)",`translateX(${y})`),z=(0,Pe.c)().addElement(m.backdropEl).fromTo("opacity",.01,.32);return Ge("ios"===M).addAnimation([V,ce,z])},Ae=m=>{const y=(0,B.b)(m),v=m.width*(m.isEndSide?-1:1)+"px",M=(0,Pe.c)().addElement(m.contentEl).fromTo("transform","translateX(0px)",`translateX(${v})`);return Ge("ios"===y).addAnimation(M)},p=(()=>{const m=new Map,y=[],v=function(){var be=(0,i.A)(function*(q){const ge=yield K(q,!0);return!!ge&&ge.open()});return function(ge){return be.apply(this,arguments)}}(),M=function(){var be=(0,i.A)(function*(q){const ge=yield void 0!==q?K(q,!0):le();return void 0!==ge&&ge.close()});return function(ge){return be.apply(this,arguments)}}(),R=function(){var be=(0,i.A)(function*(q){const ge=yield K(q,!0);return!!ge&&ge.toggle()});return function(ge){return be.apply(this,arguments)}}(),V=function(){var be=(0,i.A)(function*(q,ge){const Ie=yield K(ge);return Ie&&(Ie.disabled=!q),Ie});return function(ge,Ie){return be.apply(this,arguments)}}(),ce=function(){var be=(0,i.A)(function*(q,ge){const Ie=yield K(ge);return Ie&&(Ie.swipeGesture=q),Ie});return function(ge,Ie){return be.apply(this,arguments)}}(),z=function(){var be=(0,i.A)(function*(q){if(null!=q){const ge=yield K(q);return void 0!==ge&&ge.isOpen()}return void 0!==(yield le())});return function(ge){return be.apply(this,arguments)}}(),te=function(){var be=(0,i.A)(function*(q){const ge=yield K(q);return!!ge&&!ge.disabled});return function(ge){return be.apply(this,arguments)}}(),K=function(){var be=(0,i.A)(function*(q,ge=!1){if(yield Ve(),"start"===q||"end"===q){const He=y.filter(dt=>dt.side===q&&!dt.disabled);if(He.length>=1)return He.length>1&&ge&&(0,Ce.f)(`menuController queried for a menu on the "${q}" side, but ${He.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,He.map(dt=>dt.el)),He[0].el;const tt=y.filter(dt=>dt.side===q);if(tt.length>=1)return tt.length>1&&ge&&(0,Ce.f)(`menuController queried for a menu on the "${q}" side, but ${tt.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,tt.map(dt=>dt.el)),tt[0].el}else if(null!=q)return Ye(He=>He.menuId===q);return Ye(He=>!He.disabled)||(y.length>0?y[0].el:void 0)});return function(ge){return be.apply(this,arguments)}}(),le=function(){var be=(0,i.A)(function*(){return yield Ve(),Fe()});return function(){return be.apply(this,arguments)}}(),ae=function(){var be=(0,i.A)(function*(){return yield Ve(),we()});return function(){return be.apply(this,arguments)}}(),ve=function(){var be=(0,i.A)(function*(){return yield Ve(),Oe()});return function(){return be.apply(this,arguments)}}(),Ne=(be,q)=>{m.set(be,q)},re=function(){var be=(0,i.A)(function*(q,ge,Ie,He){if(Oe())return!1;if(ge){const tt=yield le();tt&&q.el!==tt&&(yield tt.setOpen(!1,!1))}return q._setOpen(ge,Ie,He)});return function(ge,Ie,He,tt){return be.apply(this,arguments)}}(),Fe=()=>Ye(be=>be._isOpen),we=()=>y.map(be=>be.el),Oe=()=>y.some(be=>be.isAnimating),Ye=be=>{const q=y.find(be);if(void 0!==q)return q.el},Ve=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(be=>new Promise(q=>(0,De.c)(be,q))));return Ne("reveal",Ae),Ne("push",ie),Ne("overlay",pe),null==o.d||o.d.addEventListener("ionBackButton",be=>{const q=Fe();q&&be.detail.register(D.MENU_BACK_BUTTON_PRIORITY,()=>q.close())}),{registerAnimation:Ne,get:K,getMenus:ae,getOpen:le,isEnabled:te,swipeGesture:ce,isAnimating:ve,isOpen:z,enable:V,toggle:R,close:M,open:v,_getOpenSync:Fe,_createAnimation:(be,q)=>{const ge=m.get(be);if(!ge)throw new Error("animation not registered");return ge(q)},_register:be=>{y.indexOf(be)<0&&y.push(be)},_unregister:be=>{const q=y.indexOf(be);q>-1&&y.splice(q,1)},_setOpen:re}})()},9147($t,ot,b){"use strict";b.d(ot,{E:()=>Ae,a:()=>o,s:()=>pe});var i=b(5705);const o=l=>{try{if(l instanceof Ge)return l.value;if(!De()||"string"!=typeof l||""===l)return l;if(l.includes("onload="))return"";const p=document.createDocumentFragment(),m=document.createElement("div");p.appendChild(m),m.innerHTML=l,Pe.forEach(R=>{const V=p.querySelectorAll(R);for(let ce=V.length-1;ce>=0;ce--){const z=V[ce];z.parentNode?z.parentNode.removeChild(z):p.removeChild(z);const te=Ce(z);for(let K=0;K<te.length;K++)D(te[K])}});const y=Ce(p);for(let R=0;R<y.length;R++)D(y[R]);const v=document.createElement("div");v.appendChild(p);const M=v.querySelector("div");return null!==M?M.innerHTML:v.innerHTML}catch(p){return(0,i.j)("sanitizeDOMString",p),""}},D=l=>{if(l.nodeType&&1!==l.nodeType)return;if(typeof NamedNodeMap<"u"&&!(l.attributes instanceof NamedNodeMap))return void l.remove();for(let m=l.attributes.length-1;m>=0;m--){const y=l.attributes.item(m),v=y.name;if(!B.includes(v.toLowerCase())){l.removeAttribute(v);continue}const M=y.value,R=l[v];(null!=M&&M.toLowerCase().includes("javascript:")||null!=R&&R.toLowerCase().includes("javascript:"))&&l.removeAttribute(v)}const p=Ce(l);for(let m=0;m<p.length;m++)D(p[m])},Ce=l=>null!=l.children?l.children:l.childNodes,De=()=>{var l;const p=window,m=null===(l=p?.Ionic)||void 0===l?void 0:l.config;return!m||(m.get?m.get("sanitizerEnabled",!0):!0===m.sanitizerEnabled||void 0===m.sanitizerEnabled)},B=["class","id","href","src","name","slot"],Pe=["script","style","iframe","meta","link","object","embed"];class Ge{constructor(p){this.value=p}}const pe=l=>{const p=window,m=p.Ionic;if(!m||!m.config||"Object"===m.config.constructor.name)return p.Ionic=p.Ionic||{},p.Ionic.config=Object.assign(Object.assign({},p.Ionic.config),l),p.Ionic.config},Ae=!1},9270($t,ot,b){"use strict";b.d(ot,{f:()=>i});const i={setTimeout(o,D,...Ce){const{delegate:De}=i;return De?.setTimeout?De.setTimeout(o,D,...Ce):setTimeout(o,D,...Ce)},clearTimeout(o){const{delegate:D}=i;return(D?.clearTimeout||clearTimeout)(o)},delegate:void 0}},9295($t,ot,b){"use strict";b.d(ot,{EW:()=>m,O8:()=>p}),b(467);var o=b(2615),D=b(8440);function p(be){return function Ge(be){const q=(0,D.Ht)(null);try{return be()}finally{(0,D.Ht)(q)}}(be)}function m(be,q){return(0,D.KZ)(be,q?.equal)}Error,Error},9326($t,ot,b){"use strict";b.d(ot,{lI:()=>De,ms:()=>Ce});var i=b(8071),o=b(9470);function D(Pe){return Pe[Pe.length-1]}function Ce(Pe){return(0,i.T)(D(Pe))?Pe.pop():void 0}function De(Pe){return(0,o.m)(D(Pe))?Pe.pop():void 0}},9330($t,ot,b){"use strict";b.d(ot,{Qq:()=>lt,q1:()=>Lr}),b(467);var o=b(2615),D=b(3664),Ce=b(274),De=b(5964),B=b(980),Pe=b(6354),Ge=b(5558),pe=b(1985),Ae=(b(6648),b(7673)),l=b(2512);class p{}class m{}class y{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(nt){nt?"string"==typeof nt?this.lazyInit=()=>{this.headers=new Map,nt.split("\n").forEach(Ze=>{const ye=Ze.indexOf(":");if(ye>0){const We=Ze.slice(0,ye),Ee=Ze.slice(ye+1).trim();this.addHeaderEntry(We,Ee)}})}:typeof Headers<"u"&&nt instanceof Headers?(this.headers=new Map,nt.forEach((Ze,ye)=>{this.addHeaderEntry(ye,Ze)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(nt).forEach(([Ze,ye])=>{this.setHeaderEntries(Ze,ye)})}:this.headers=new Map}has(nt){return this.init(),this.headers.has(nt.toLowerCase())}get(nt){this.init();const Ze=this.headers.get(nt.toLowerCase());return Ze&&Ze.length>0?Ze[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(nt){return this.init(),this.headers.get(nt.toLowerCase())||null}append(nt,Ze){return this.clone({name:nt,value:Ze,op:"a"})}set(nt,Ze){return this.clone({name:nt,value:Ze,op:"s"})}delete(nt,Ze){return this.clone({name:nt,value:Ze,op:"d"})}maybeSetNormalizedName(nt,Ze){this.normalizedNames.has(Ze)||this.normalizedNames.set(Ze,nt)}init(){this.lazyInit&&(this.lazyInit instanceof y?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(nt=>this.applyUpdate(nt)),this.lazyUpdate=null))}copyFrom(nt){nt.init(),Array.from(nt.headers.keys()).forEach(Ze=>{this.headers.set(Ze,nt.headers.get(Ze)),this.normalizedNames.set(Ze,nt.normalizedNames.get(Ze))})}clone(nt){const Ze=new y;return Ze.lazyInit=this.lazyInit&&this.lazyInit instanceof y?this.lazyInit:this,Ze.lazyUpdate=(this.lazyUpdate||[]).concat([nt]),Ze}applyUpdate(nt){const Ze=nt.name.toLowerCase();switch(nt.op){case"a":case"s":let ye=nt.value;if("string"==typeof ye&&(ye=[ye]),0===ye.length)return;this.maybeSetNormalizedName(nt.name,Ze);const We=("a"===nt.op?this.headers.get(Ze):void 0)||[];We.push(...ye),this.headers.set(Ze,We);break;case"d":const Ee=nt.value;if(Ee){let et=this.headers.get(Ze);if(!et)return;et=et.filter(bt=>-1===Ee.indexOf(bt)),0===et.length?(this.headers.delete(Ze),this.normalizedNames.delete(Ze)):this.headers.set(Ze,et)}else this.headers.delete(Ze),this.normalizedNames.delete(Ze)}}addHeaderEntry(nt,Ze){const ye=nt.toLowerCase();this.maybeSetNormalizedName(nt,ye),this.headers.has(ye)?this.headers.get(ye).push(Ze):this.headers.set(ye,[Ze])}setHeaderEntries(nt,Ze){const ye=(Array.isArray(Ze)?Ze:[Ze]).map(Ee=>Ee.toString()),We=nt.toLowerCase();this.headers.set(We,ye),this.maybeSetNormalizedName(nt,We)}forEach(nt){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ze=>nt(this.normalizedNames.get(Ze),this.headers.get(Ze)))}}class M{encodeKey(nt){return z(nt)}encodeValue(nt){return z(nt)}decodeKey(nt){return decodeURIComponent(nt)}decodeValue(nt){return decodeURIComponent(nt)}}const V=/%(\d[a-f0-9])/gi,ce={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function z(xe){return encodeURIComponent(xe).replace(V,(nt,Ze)=>ce[Ze]??nt)}function te(xe){return`${xe}`}class K{map;encoder;updates=null;cloneFrom=null;constructor(nt={}){if(this.encoder=nt.encoder||new M,nt.fromString){if(nt.fromObject)throw new o.buA(2805,!1);this.map=function R(xe,nt){const Ze=new Map;return xe.length>0&&xe.replace(/^\?/,"").split("&").forEach(We=>{const Ee=We.indexOf("="),[et,bt]=-1==Ee?[nt.decodeKey(We),""]:[nt.decodeKey(We.slice(0,Ee)),nt.decodeValue(We.slice(Ee+1))],zt=Ze.get(et)||[];zt.push(bt),Ze.set(et,zt)}),Ze}(nt.fromString,this.encoder)}else nt.fromObject?(this.map=new Map,Object.keys(nt.fromObject).forEach(Ze=>{const ye=nt.fromObject[Ze],We=Array.isArray(ye)?ye.map(te):[te(ye)];this.map.set(Ze,We)})):this.map=null}has(nt){return this.init(),this.map.has(nt)}get(nt){this.init();const Ze=this.map.get(nt);return Ze?Ze[0]:null}getAll(nt){return this.init(),this.map.get(nt)||null}keys(){return this.init(),Array.from(this.map.keys())}append(nt,Ze){return this.clone({param:nt,value:Ze,op:"a"})}appendAll(nt){const Ze=[];return Object.keys(nt).forEach(ye=>{const We=nt[ye];Array.isArray(We)?We.forEach(Ee=>{Ze.push({param:ye,value:Ee,op:"a"})}):Ze.push({param:ye,value:We,op:"a"})}),this.clone(Ze)}set(nt,Ze){return this.clone({param:nt,value:Ze,op:"s"})}delete(nt,Ze){return this.clone({param:nt,value:Ze,op:"d"})}toString(){return this.init(),this.keys().map(nt=>{const Ze=this.encoder.encodeKey(nt);return this.map.get(nt).map(ye=>Ze+"="+this.encoder.encodeValue(ye)).join("&")}).filter(nt=>""!==nt).join("&")}clone(nt){const Ze=new K({encoder:this.encoder});return Ze.cloneFrom=this.cloneFrom||this,Ze.updates=(this.updates||[]).concat(nt),Ze}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(nt=>this.map.set(nt,this.cloneFrom.map.get(nt))),this.updates.forEach(nt=>{switch(nt.op){case"a":case"s":const Ze=("a"===nt.op?this.map.get(nt.param):void 0)||[];Ze.push(te(nt.value)),this.map.set(nt.param,Ze);break;case"d":if(void 0===nt.value){this.map.delete(nt.param);break}{let ye=this.map.get(nt.param)||[];const We=ye.indexOf(te(nt.value));-1!==We&&ye.splice(We,1),ye.length>0?this.map.set(nt.param,ye):this.map.delete(nt.param)}}}),this.cloneFrom=this.updates=null)}}class ae{map=new Map;set(nt,Ze){return this.map.set(nt,Ze),this}get(nt){return this.map.has(nt)||this.map.set(nt,nt.defaultValue()),this.map.get(nt)}delete(nt){return this.map.delete(nt),this}has(nt){return this.map.has(nt)}keys(){return this.map.keys()}}function Ne(xe){return typeof ArrayBuffer<"u"&&xe instanceof ArrayBuffer}function he(xe){return typeof Blob<"u"&&xe instanceof Blob}function Le(xe){return typeof FormData<"u"&&xe instanceof FormData}const Ke="Content-Type",we="X-Request-URL",Oe="text/plain",Ye="application/json",Ve=`${Ye}, ${Oe}, */*`;class be{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(nt,Ze,ye,We){let Ee;if(this.url=Ze,this.method=nt.toUpperCase(),function ve(xe){switch(xe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||We?(this.body=void 0!==ye?ye:null,Ee=We):Ee=ye,Ee){if(this.reportProgress=!!Ee.reportProgress,this.withCredentials=!!Ee.withCredentials,this.keepalive=!!Ee.keepalive,Ee.responseType&&(this.responseType=Ee.responseType),Ee.headers&&(this.headers=Ee.headers),Ee.context&&(this.context=Ee.context),Ee.params&&(this.params=Ee.params),Ee.priority&&(this.priority=Ee.priority),Ee.cache&&(this.cache=Ee.cache),Ee.credentials&&(this.credentials=Ee.credentials),"number"==typeof Ee.timeout){if(Ee.timeout<1||!Number.isInteger(Ee.timeout))throw new o.buA(2822,"");this.timeout=Ee.timeout}Ee.mode&&(this.mode=Ee.mode),Ee.redirect&&(this.redirect=Ee.redirect),Ee.integrity&&(this.integrity=Ee.integrity),Ee.referrer&&(this.referrer=Ee.referrer),this.transferCache=Ee.transferCache}if(this.headers??=new y,this.context??=new ae,this.params){const et=this.params.toString();if(0===et.length)this.urlWithParams=Ze;else{const bt=Ze.indexOf("?");this.urlWithParams=Ze+(-1===bt?"?":bt<Ze.length-1?"&":"")+et}}else this.params=new K,this.urlWithParams=Ze}serializeBody(){return null===this.body?null:"string"==typeof this.body||Ne(this.body)||he(this.body)||Le(this.body)||function re(xe){return typeof URLSearchParams<"u"&&xe instanceof URLSearchParams}(this.body)?this.body:this.body instanceof K?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Le(this.body)?null:he(this.body)?this.body.type||null:Ne(this.body)?null:"string"==typeof this.body?Oe:this.body instanceof K?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?Ye:null}clone(nt={}){const Ze=nt.method||this.method,ye=nt.url||this.url,We=nt.responseType||this.responseType,Ee=nt.keepalive??this.keepalive,et=nt.priority||this.priority,bt=nt.cache||this.cache,zt=nt.mode||this.mode,pn=nt.redirect||this.redirect,Tn=nt.credentials||this.credentials,Mn=nt.referrer||this.referrer,tr=nt.integrity||this.integrity,Wr=nt.transferCache??this.transferCache,Pr=nt.timeout??this.timeout,zn=void 0!==nt.body?nt.body:this.body,wn=nt.withCredentials??this.withCredentials,$n=nt.reportProgress??this.reportProgress;let sr=nt.headers||this.headers,cr=nt.params||this.params;const nr=nt.context??this.context;return void 0!==nt.setHeaders&&(sr=Object.keys(nt.setHeaders).reduce((Tr,Ar)=>Tr.set(Ar,nt.setHeaders[Ar]),sr)),nt.setParams&&(cr=Object.keys(nt.setParams).reduce((Tr,Ar)=>Tr.set(Ar,nt.setParams[Ar]),cr)),new be(Ze,ye,zn,{params:cr,headers:sr,context:nr,reportProgress:$n,responseType:We,withCredentials:wn,transferCache:Wr,keepalive:Ee,cache:bt,priority:et,timeout:Pr,mode:zt,redirect:pn,credentials:Tn,referrer:Mn,integrity:tr})}}var q=function(xe){return xe[xe.Sent=0]="Sent",xe[xe.UploadProgress=1]="UploadProgress",xe[xe.ResponseHeader=2]="ResponseHeader",xe[xe.DownloadProgress=3]="DownloadProgress",xe[xe.Response=4]="Response",xe[xe.User=5]="User",xe}(q||{});class ge{headers;status;statusText;url;ok;type;redirected;constructor(nt,Ze=200,ye="OK"){this.headers=nt.headers||new y,this.status=void 0!==nt.status?nt.status:Ze,this.statusText=nt.statusText||ye,this.url=nt.url||null,this.redirected=nt.redirected,this.ok=this.status>=200&&this.status<300}}class Ie extends ge{constructor(nt={}){super(nt)}type=q.ResponseHeader;clone(nt={}){return new Ie({headers:nt.headers||this.headers,status:void 0!==nt.status?nt.status:this.status,statusText:nt.statusText||this.statusText,url:nt.url||this.url||void 0})}}class He extends ge{body;constructor(nt={}){super(nt),this.body=void 0!==nt.body?nt.body:null}type=q.Response;clone(nt={}){return new He({body:void 0!==nt.body?nt.body:this.body,headers:nt.headers||this.headers,status:void 0!==nt.status?nt.status:this.status,statusText:nt.statusText||this.statusText,url:nt.url||this.url||void 0,redirected:nt.redirected??this.redirected})}}class tt extends ge{name="HttpErrorResponse";message;error;ok=!1;constructor(nt){super(nt,0,"Unknown Error"),this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${nt.url||"(unknown url)"}`:`Http failure response for ${nt.url||"(unknown url)"}: ${nt.status} ${nt.statusText}`,this.error=nt.error||null}}function Ft(xe,nt){return{body:nt,headers:xe.headers,context:xe.context,observe:xe.observe,params:xe.params,reportProgress:xe.reportProgress,responseType:xe.responseType,withCredentials:xe.withCredentials,credentials:xe.credentials,transferCache:xe.transferCache,timeout:xe.timeout,keepalive:xe.keepalive,priority:xe.priority,cache:xe.cache,mode:xe.mode,redirect:xe.redirect,integrity:xe.integrity,referrer:xe.referrer}}let lt=(()=>{class xe{handler;constructor(Ze){this.handler=Ze}request(Ze,ye,We={}){let Ee;if(Ze instanceof be)Ee=Ze;else{let zt,pn;zt=We.headers instanceof y?We.headers:new y(We.headers),We.params&&(pn=We.params instanceof K?We.params:new K({fromObject:We.params})),Ee=new be(Ze,ye,void 0!==We.body?We.body:null,{headers:zt,context:We.context,params:pn,reportProgress:We.reportProgress,responseType:We.responseType||"json",withCredentials:We.withCredentials,transferCache:We.transferCache,keepalive:We.keepalive,priority:We.priority,cache:We.cache,mode:We.mode,redirect:We.redirect,credentials:We.credentials,referrer:We.referrer,integrity:We.integrity,timeout:We.timeout})}const et=(0,Ae.of)(Ee).pipe((0,Ce.H)(zt=>this.handler.handle(zt)));if(Ze instanceof be||"events"===We.observe)return et;const bt=et.pipe((0,De.p)(zt=>zt instanceof He));switch(We.observe||"body"){case"body":switch(Ee.responseType){case"arraybuffer":return bt.pipe((0,Pe.T)(zt=>{if(null!==zt.body&&!(zt.body instanceof ArrayBuffer))throw new o.buA(2806,!1);return zt.body}));case"blob":return bt.pipe((0,Pe.T)(zt=>{if(null!==zt.body&&!(zt.body instanceof Blob))throw new o.buA(2807,!1);return zt.body}));case"text":return bt.pipe((0,Pe.T)(zt=>{if(null!==zt.body&&"string"!=typeof zt.body)throw new o.buA(2808,!1);return zt.body}));default:return bt.pipe((0,Pe.T)(zt=>zt.body))}case"response":return bt;default:throw new o.buA(2809,!1)}}delete(Ze,ye={}){return this.request("DELETE",Ze,ye)}get(Ze,ye={}){return this.request("GET",Ze,ye)}head(Ze,ye={}){return this.request("HEAD",Ze,ye)}jsonp(Ze,ye){return this.request("JSONP",Ze,{params:(new K).append(ye,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ze,ye={}){return this.request("OPTIONS",Ze,ye)}patch(Ze,ye,We={}){return this.request("PATCH",Ze,Ft(We,ye))}post(Ze,ye,We={}){return this.request("POST",Ze,Ft(We,ye))}put(Ze,ye,We={}){return this.request("PUT",Ze,Ft(We,ye))}static \u0275fac=function(ye){return new(ye||xe)(o.KVO(p))};static \u0275prov=o.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const xt=new o.nKC("");function Xt(xe,nt){return nt(xe)}function bn(xe,nt){return(Ze,ye)=>nt.intercept(Ze,{handle:We=>xe(We,ye)})}const Cn=new o.nKC(""),ln=new o.nKC(""),Mt=new o.nKC(""),hn=new o.nKC("",{providedIn:"root",factory:()=>!0});function wt(){let xe=null;return(nt,Ze)=>{null===xe&&(xe=((0,o.WQX)(Cn,{optional:!0})??[]).reduceRight(bn,Xt));const ye=(0,o.WQX)(o.u5s);if((0,o.WQX)(hn)){const Ee=ye.add();return xe(nt,Ze).pipe((0,B.j)(Ee))}return xe(nt,Ze)}}let en=(()=>{class xe extends p{backend;injector;chain=null;pendingTasks=(0,o.WQX)(o.u5s);contributeToStability=(0,o.WQX)(hn);constructor(Ze,ye){super(),this.backend=Ze,this.injector=ye}handle(Ze){if(null===this.chain){const ye=Array.from(new Set([...this.injector.get(ln),...this.injector.get(Mt,[])]));this.chain=ye.reduceRight((We,Ee)=>function Un(xe,nt,Ze){return(ye,We)=>(0,o.N4e)(Ze,()=>nt(ye,Ee=>xe(Ee,We)))}(We,Ee,this.injector),Xt)}if(this.contributeToStability){const ye=this.pendingTasks.add();return this.chain(Ze,We=>this.backend.handle(We)).pipe((0,B.j)(ye))}return this.chain(Ze,ye=>this.backend.handle(ye))}static \u0275fac=function(ye){return new(ye||xe)(o.KVO(m),o.KVO(o.uvJ))};static \u0275prov=o.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const gr=/^\)\]\}',?\n/,mr=RegExp(`^${we}:`,"m");let yn=(()=>{class xe{xhrFactory;constructor(Ze){this.xhrFactory=Ze}handle(Ze){if("JSONP"===Ze.method)throw new o.buA(-2800,!1);const ye=this.xhrFactory;return(0,Ae.of)(null).pipe((0,Ge.n)(()=>new pe.c(Ee=>{const et=ye.build();if(et.open(Ze.method,Ze.urlWithParams),Ze.withCredentials&&(et.withCredentials=!0),Ze.headers.forEach((wn,$n)=>et.setRequestHeader(wn,$n.join(","))),Ze.headers.has("Accept")||et.setRequestHeader("Accept",Ve),!Ze.headers.has(Ke)){const wn=Ze.detectContentTypeHeader();null!==wn&&et.setRequestHeader(Ke,wn)}if(Ze.timeout&&(et.timeout=Ze.timeout),Ze.responseType){const wn=Ze.responseType.toLowerCase();et.responseType="json"!==wn?wn:"text"}const bt=Ze.serializeBody();let zt=null;const pn=()=>{if(null!==zt)return zt;const wn=et.statusText||"OK",$n=new y(et.getAllResponseHeaders()),sr=function kr(xe){return"responseURL"in xe&&xe.responseURL?xe.responseURL:mr.test(xe.getAllResponseHeaders())?xe.getResponseHeader(we):null}(et)||Ze.url;return zt=new Ie({headers:$n,status:et.status,statusText:wn,url:sr}),zt},Tn=()=>{let{headers:wn,status:$n,statusText:sr,url:cr}=pn(),nr=null;204!==$n&&(nr=typeof et.response>"u"?et.responseText:et.response),0===$n&&($n=nr?200:0);let Tr=$n>=200&&$n<300;if("json"===Ze.responseType&&"string"==typeof nr){const Ar=nr;nr=nr.replace(gr,"");try{nr=""!==nr?JSON.parse(nr):null}catch(Rr){nr=Ar,Tr&&(Tr=!1,nr={error:Rr,text:nr})}}Tr?(Ee.next(new He({body:nr,headers:wn,status:$n,statusText:sr,url:cr||void 0})),Ee.complete()):Ee.error(new tt({error:nr,headers:wn,status:$n,statusText:sr,url:cr||void 0}))},Mn=wn=>{const{url:$n}=pn(),sr=new tt({error:wn,status:et.status||0,statusText:et.statusText||"Unknown Error",url:$n||void 0});Ee.error(sr)};let tr=Mn;Ze.timeout&&(tr=wn=>{const{url:$n}=pn(),sr=new tt({error:new DOMException("Request timed out","TimeoutError"),status:et.status||0,statusText:et.statusText||"Request timeout",url:$n||void 0});Ee.error(sr)});let Wr=!1;const Pr=wn=>{Wr||(Ee.next(pn()),Wr=!0);let $n={type:q.DownloadProgress,loaded:wn.loaded};wn.lengthComputable&&($n.total=wn.total),"text"===Ze.responseType&&et.responseText&&($n.partialText=et.responseText),Ee.next($n)},zn=wn=>{let $n={type:q.UploadProgress,loaded:wn.loaded};wn.lengthComputable&&($n.total=wn.total),Ee.next($n)};return et.addEventListener("load",Tn),et.addEventListener("error",Mn),et.addEventListener("timeout",tr),et.addEventListener("abort",Mn),Ze.reportProgress&&(et.addEventListener("progress",Pr),null!==bt&&et.upload&&et.upload.addEventListener("progress",zn)),et.send(bt),Ee.next({type:q.Sent}),()=>{et.removeEventListener("error",Mn),et.removeEventListener("abort",Mn),et.removeEventListener("load",Tn),et.removeEventListener("timeout",tr),Ze.reportProgress&&(et.removeEventListener("progress",Pr),null!==bt&&et.upload&&et.upload.removeEventListener("progress",zn)),et.readyState!==et.DONE&&et.abort()}})))}static \u0275fac=function(ye){return new(ye||xe)(o.KVO(l.N))};static \u0275prov=o.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const Er=new o.nKC(""),Jn=new o.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),qe=new o.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Je{}let Ct=(()=>{class xe{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(Ze,ye){this.doc=Ze,this.cookieName=ye}getToken(){const Ze=this.doc.cookie||"";return Ze!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,l.b)(Ze,this.cookieName),this.lastCookieString=Ze),this.lastToken}static \u0275fac=function(ye){return new(ye||xe)(o.KVO(o.qQL),o.KVO(Jn))};static \u0275prov=o.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const mt=/^(?:https?:)?\/\//i;function kt(xe,nt){if(!(0,o.WQX)(Er)||"GET"===xe.method||"HEAD"===xe.method||mt.test(xe.url))return nt(xe);const Ze=(0,o.WQX)(Je).getToken(),ye=(0,o.WQX)(qe);return null!=Ze&&!xe.headers.has(ye)&&(xe=xe.clone({headers:xe.headers.set(ye,Ze)})),nt(xe)}var Kt=function(xe){return xe[xe.Interceptors=0]="Interceptors",xe[xe.LegacyInterceptors=1]="LegacyInterceptors",xe[xe.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",xe[xe.NoXsrfProtection=3]="NoXsrfProtection",xe[xe.JsonpSupport=4]="JsonpSupport",xe[xe.RequestsMadeViaParent=5]="RequestsMadeViaParent",xe[xe.Fetch=6]="Fetch",xe}(Kt||{});function rn(...xe){const nt=[lt,yn,en,{provide:p,useExisting:en},{provide:m,useFactory:()=>(0,o.WQX)(xt,{optional:!0})??(0,o.WQX)(yn)},{provide:ln,useValue:kt,multi:!0},{provide:Er,useValue:!0},{provide:Je,useClass:Ct}];for(const Ze of xe)nt.push(...Ze.\u0275providers);return(0,o.EmA)(nt)}const Wn=new o.nKC("");function An(){return function tn(xe,nt){return{\u0275kind:xe,\u0275providers:nt}}(Kt.LegacyInterceptors,[{provide:Wn,useFactory:wt},{provide:ln,useExisting:Wn,multi:!0}])}let Lr=(()=>{class xe{static \u0275fac=function(ye){return new(ye||xe)};static \u0275mod=D.$C({type:xe});static \u0275inj=o.G2t({providers:[rn(An())]})}return xe})()},9431($t,ot,b){"use strict";b.r(ot),b.d(ot,{MENU_BACK_BUTTON_PRIORITY:()=>Ge,OVERLAY_BACK_BUTTON_PRIORITY:()=>Pe,blockHardwareBackButton:()=>De,shouldUseCloseWatcher:()=>Ce,startHardwareBackButton:()=>B});var i=b(467),o=b(9596),D=b(5705);const Ce=()=>D.e.get("experimentalCloseWatcher",!1)&&void 0!==o.w&&"CloseWatcher"in o.w,De=()=>{document.addEventListener("backbutton",()=>{})},B=()=>{const pe=document;let ie=!1;const Ae=()=>{if(ie)return;let l=0,p=[];const m=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(M,R){p.push({priority:M,handler:R,id:l++})}}});pe.dispatchEvent(m);const y=function(){var M=(0,i.A)(function*(R){try{if(R?.handler){const V=R.handler(v);null!=V&&(yield V)}}catch(V){(0,D.j)("[ion-app] - Exception in startHardwareBackButton:",V)}});return function(V){return M.apply(this,arguments)}}(),v=()=>{if(p.length>0){let M={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};p.forEach(R=>{R.priority>=M.priority&&(M=R)}),ie=!0,p=p.filter(R=>R.id!==M.id),y(M).then(()=>ie=!1)}};v()};if(Ce()){let l;const p=()=>{l?.destroy(),l=new o.w.CloseWatcher,l.onclose=()=>{Ae(),p()}};p()}else pe.addEventListener("backbutton",Ae)},Pe=100,Ge=99},9437($t,ot,b){"use strict";b.d(ot,{W:()=>Ce});var i=b(8750),o=b(4360),D=b(9974);function Ce(De){return(0,D.N)((B,Pe)=>{let ie,Ge=null,pe=!1;Ge=B.subscribe((0,o._)(Pe,void 0,void 0,Ae=>{ie=(0,i.Tg)(De(Ae,Ce(De)(B))),Ge?(Ge.unsubscribe(),Ge=null,ie.subscribe(Pe)):pe=!0})),pe&&(Ge.unsubscribe(),Ge=null,ie.subscribe(Pe))})}},9470($t,ot,b){"use strict";b.d(ot,{m:()=>o});var i=b(8071);function o(D){return D&&(0,i.T)(D.schedule)}},9564($t,ot,b){"use strict";b.d(ot,{EB:()=>o,I8:()=>i,hg:()=>D});var i=function(Ce){return Ce[Ce.UNKNOWN=0]="UNKNOWN",Ce[Ce.UPDATE_NOT_AVAILABLE=1]="UPDATE_NOT_AVAILABLE",Ce[Ce.UPDATE_AVAILABLE=2]="UPDATE_AVAILABLE",Ce[Ce.UPDATE_IN_PROGRESS=3]="UPDATE_IN_PROGRESS",Ce}(i||{}),o=function(Ce){return Ce[Ce.UNKNOWN=0]="UNKNOWN",Ce[Ce.PENDING=1]="PENDING",Ce[Ce.DOWNLOADING=2]="DOWNLOADING",Ce[Ce.INSTALLING=3]="INSTALLING",Ce[Ce.INSTALLED=4]="INSTALLED",Ce[Ce.FAILED=5]="FAILED",Ce[Ce.CANCELED=6]="CANCELED",Ce[Ce.DOWNLOADED=11]="DOWNLOADED",Ce}(o||{}),D=function(Ce){return Ce[Ce.OK=0]="OK",Ce[Ce.CANCELED=1]="CANCELED",Ce[Ce.FAILED=2]="FAILED",Ce[Ce.NOT_AVAILABLE=3]="NOT_AVAILABLE",Ce[Ce.NOT_ALLOWED=4]="NOT_ALLOWED",Ce[Ce.INFO_MISSING=5]="INFO_MISSING",Ce}(D||{})},9596($t,ot,b){"use strict";b.d(ot,{d:()=>o,w:()=>i});const i=typeof window<"u"?window:void 0,o=typeof document<"u"?document:void 0},9786($t,ot,b){"use strict";b.d(ot,{Y:()=>D,l:()=>Ce});var i=b(1026);let o=null;function D(De){if(i.$.useDeprecatedSynchronousErrorHandling){const B=!o;if(B&&(o={errorThrown:!1,error:null}),De(),B){const{errorThrown:Pe,error:Ge}=o;if(o=null,Pe)throw Ge}}else De()}function Ce(De){i.$.useDeprecatedSynchronousErrorHandling&&o&&(o.errorThrown=!0,o.error=De)}},9858($t,ot,b){"use strict";b.d(ot,{y:()=>o});var i=b(8071);function o(D){return(0,i.T)(D?.then)}},9974($t,ot,b){"use strict";b.d(ot,{N:()=>D,S:()=>o});var i=b(8071);function o(Ce){return(0,i.T)(Ce?.lift)}function D(Ce){return De=>{if(o(De))return De.lift(function(B){try{return Ce(B,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}}},$t=>{$t($t.s=4540)}]);