"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6524],{152(V,R,f){f.d(R,{B:()=>O});var T=f(8839),F=f(9974),b=f(4360);function O(k,N=T.E){return(0,F.N)((e,c)=>{let P=null,D=null,a=null;const p=()=>{if(P){P.unsubscribe(),P=null;const d=D;D=null,c.next(d)}};function u(){const d=a+k,h=N.now();if(h<d)return P=this.schedule(void 0,d-h),void c.add(P);p()}e.subscribe((0,b._)(c,d=>{D=d,a=N.now(),P||(P=N.schedule(u,k),c.add(P))},()=>{p(),c.complete()},void 0,()=>{D=P=null}))})}},6524(V,R,f){f.d(R,{CleanupPageModule:()=>ge});var T=f(2200),F=f(4341),b=f(7343),O=f(8132),k=f(467),N=f(152),e=f(3664),c=f(2615),P=f(5921),D=f(3205),a=f(7522),p=f(918),u=f(9187),d=f(7643);function h(l,m){if(1&l&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&l){const s=e.XpG();e.R7$(),e.SpI(" (edited: ",s.getEditedDateTime(),")")}}function E(l,m){1&l&&e.nrm(0,"ion-icon",112)}function M(l,m){if(1&l){const s=e.RV6();e.j41(0,"div",8),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(!o.viewMode&&o.editZone())}),e.nrm(1,"ion-icon",113),e.j41(2,"span",10),e.EFF(3),e.k0s()()}if(2&l){let s;const n=e.XpG();e.R7$(3),e.JRh(n.getZoneName(null==(s=n.cleanupForm.get("zoneNumber"))?null:s.value))}}function w(l,m){if(1&l){const s=e.RV6();e.j41(0,"div",8),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(!o.viewMode&&o.editQuad())}),e.nrm(1,"ion-icon",114),e.j41(2,"span",10),e.EFF(3),e.k0s()()}if(2&l){let s;const n=e.XpG();e.R7$(3),e.SpI("Quad ",n.getQuadDisplay(null==(s=n.cleanupForm.get("quadNumber"))?null:s.value))}}function W(l,m){if(1&l){const s=e.RV6();e.j41(0,"span",115),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.editLocationAdmin())}),e.EFF(1," Edit location "),e.k0s()}}function G(l,m){1&l&&(e.j41(0,"ion-error",116),e.EFF(1," Location is required "),e.k0s())}function S(l,m){if(1&l){const s=e.RV6();e.j41(0,"div",117)(1,"ion-button",118),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.enableEditMode())}),e.nrm(2,"ion-icon",119),e.EFF(3," Edit This Entry "),e.k0s()()}}function x(l,m){1&l&&(e.j41(0,"div",120),e.nrm(1,"ion-icon",121),e.j41(2,"span"),e.EFF(3,"Editing Entry - Changes will replace the original submission"),e.k0s()())}function $(l,m){1&l&&e.nrm(0,"ion-icon",122)}function B(l,m){1&l&&e.nrm(0,"ion-icon",123)}function A(l,m){1&l&&(e.j41(0,"ion-error"),e.EFF(1," Team name is required "),e.k0s())}function L(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.decrementTally("juicePackets"))}),e.nrm(1,"ion-icon",34),e.k0s()}}function q(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.incrementTally("juicePackets"))}),e.nrm(1,"ion-icon",36),e.k0s()}}function X(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.decrementTally("cigaretteButts"))}),e.nrm(1,"ion-icon",34),e.k0s()}}function Y(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.incrementTally("cigaretteButts"))}),e.nrm(1,"ion-icon",36),e.k0s()}}function U(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.decrementTally("foodWrappers"))}),e.nrm(1,"ion-icon",34),e.k0s()}}function Q(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.incrementTally("foodWrappers"))}),e.nrm(1,"ion-icon",36),e.k0s()}}function K(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.decrementTally("takeAwayContainers"))}),e.nrm(1,"ion-icon",34),e.k0s()}}function Z(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.incrementTally("takeAwayContainers"))}),e.nrm(1,"ion-icon",36),e.k0s()}}function H(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.decrementTally("lids"))}),e.nrm(1,"ion-icon",34),e.k0s()}}function J(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.incrementTally("lids"))}),e.nrm(1,"ion-icon",36),e.k0s()}}function ee(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.decrementTally("bottleCaps"))}),e.nrm(1,"ion-icon",34),e.k0s()}}function te(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.incrementTally("bottleCaps"))}),e.nrm(1,"ion-icon",36),e.k0s()}}function ne(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.decrementTally("beverageBottles"))}),e.nrm(1,"ion-icon",34),e.k0s()}}function oe(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.incrementTally("beverageBottles"))}),e.nrm(1,"ion-icon",36),e.k0s()}}function ie(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.decrementTally("straws"))}),e.nrm(1,"ion-icon",34),e.k0s()}}function re(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.incrementTally("straws"))}),e.nrm(1,"ion-icon",36),e.k0s()}}function le(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.decrementTally("forksKnivesSpoons"))}),e.nrm(1,"ion-icon",34),e.k0s()}}function ae(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.incrementTally("forksKnivesSpoons"))}),e.nrm(1,"ion-icon",36),e.k0s()}}function ce(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.decrementTally("bags"))}),e.nrm(1,"ion-icon",34),e.k0s()}}function se(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.incrementTally("bags"))}),e.nrm(1,"ion-icon",36),e.k0s()}}function ue(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.decrementTally("cupsPlates"))}),e.nrm(1,"ion-icon",34),e.k0s()}}function de(l,m){if(1&l){const s=e.RV6();e.j41(0,"ion-button",33),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.incrementTally("cupsPlates"))}),e.nrm(1,"ion-icon",36),e.k0s()}}function me(l,m){if(1&l){const s=e.RV6();e.j41(0,"div",124)(1,"ion-button",125),e.nrm(2,"ion-icon",126),e.EFF(3," Submit Cleanup Activity "),e.k0s(),e.j41(4,"ion-button",127),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.saveDraft())}),e.nrm(5,"ion-icon",128),e.EFF(6," Save Draft "),e.k0s(),e.j41(7,"ion-button",129),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.discardForm())}),e.nrm(8,"ion-icon",130),e.EFF(9," Discard "),e.k0s()()}if(2&l){const s=e.XpG();e.R7$(),e.Y8G("disabled",!s.cleanupForm.valid)}}function pe(l,m){if(1&l){const s=e.RV6();e.j41(0,"div",131)(1,"ion-button",132),e.bIt("click",function(){c.eBV(s);const o=e.XpG();return c.Njj(o.deleteEntry())}),e.nrm(2,"ion-icon",130),e.EFF(3," Delete Entry "),e.k0s()()}}const _e=[{path:"",component:(()=>{var l;class m{forceDeleteDraftFile(n){var o=this;return(0,k.A)(function*(){for(let t=0;t<3;t++)try{yield o.sharedDataService.deleteJsonFile(n),console.log(`Draft file force deleted successfully (attempt ${t+1})`);break}catch(i){if(console.error(`Error force deleting draft file (attempt ${t+1}):`,i),2===t)try{yield o.sharedDataService.writeJsonFile(n,null),console.log("Draft file cleared with null write")}catch(r){console.error("Failed to clear draft file with null write:",r)}yield new Promise(r=>setTimeout(r,100))}})()}constructor(n,o,t,i,r,g,y,_,v,C){this.formBuilder=n,this.alertController=o,this.loadingController=t,this.router=i,this.route=r,this.auth=g,this.cleanupSyncService=y,this.sharedDataService=_,this.entryDeletionService=v,this.siteSyncService=C,this.progress=0,this.cleanupPhoto=null,this.currentDateTime="",this.viewMode=!1,this.currentUser=null,this.currentReportId="",this.loadedReport=null,this.autosaveSub=null,this.isDiscarded=!1,this.isSubmitted=!1,this.isSubmitting=!1,this.isEditMode=!1,this.originalSubmittedBy="",this.availableLocations=[{name:"Ramsar",hasZones:!0,hasQuads:!0,zones:["1","2","3","4","5","6"],quads:Array.from({length:30},(j,I)=>`quad${I+1}`),zoneQuadMap:{1:[1,2,3],2:[13,14,15,16,17,18,20,21,22,23,25,27,28,29],3:[19,26],4:[4,5],5:[6,7,11,12,24,30],6:[8,9,10]}},{name:"Grand Anse",hasZones:!0,hasQuads:!0,zones:["1","2","3","4"],quads:Array.from({length:22},(j,I)=>`ga${I+1}`),zoneQuadMap:{1:[1,2,3,4],2:[5,6,7,8,9,10,21,22],3:[11,12,13,14,15,16,17,18],4:[19,20]}},{name:"Caiman",hasZones:!1,hasQuads:!0,zones:[],quads:["quad1","quad2","quad3","quad4","quad5"]},{name:"Canopy",hasZones:!1,hasQuads:!0,zones:[],quads:["quad1","quad2","quad3","quad4"]},{name:"Petit Barbarons",hasZones:!0,hasQuads:!1,zones:["1","2","3","4"],quads:[]},{name:"Kempinski",hasZones:!1,hasQuads:!1,zones:[],quads:[]},{name:"Roche Caiman",hasZones:!1,hasQuads:!1,zones:[],quads:[]}]}ngOnInit(){var n=this;return(0,k.A)(function*(){n.currentUser=n.auth.getCurrentUser(),n.initializeForm(),n.setCurrentDateTime(),yield n.loadDynamicSites();const o=n.route.snapshot.queryParams;"true"===o.viewMode&&o.reportId?yield n.loadReportForViewing(o.reportId):(n.route.queryParams.subscribe(t=>{t.location&&n.cleanupForm.patchValue({location:t.location}),t.zone&&n.cleanupForm.patchValue({zoneNumber:t.zone}),t.quad&&n.cleanupForm.patchValue({quadNumber:t.quad})}),"true"!==o.fresh&&(yield n.restoreDraftIfAny(),n.setCurrentDateTime()),n.currentReportId||(n.currentReportId=n.cleanupSyncService.generateReportId()),n.subscribeToFormChanges(),navigator.onLine&&n.cleanupSyncService.processPendingQueue().catch(t=>{console.error("CleanupPage: processPendingQueue failed:",t)}))})()}ngOnDestroy(){this.autosaveSub&&(this.autosaveSub.unsubscribe(),this.autosaveSub=null),this.isSubmitted||this.saveDraftOnExit().catch(n=>console.error("CleanupPage: saveDraftOnExit failed:",n))}setCurrentDateTime(n){if(this.cleanupForm){const _=this.cleanupForm.get("date")?.value,v=this.cleanupForm.get("observationTime")?.value;if(_&&v){const[C,j,I]=_.split("-"),[z,fe]=v.split(":");return void(this.currentDateTime=`${I}/${j}/${C}  \u2022  ${z}:${fe}`)}}if(n){const _=this.extractDateTimeFromReportId(n);if(_)return void(this.currentDateTime=_)}const o=new Date,t=String(o.getDate()).padStart(2,"0"),i=String(o.getMonth()+1).padStart(2,"0"),r=o.getFullYear(),g=String(o.getHours()).padStart(2,"0"),y=String(o.getMinutes()).padStart(2,"0");this.currentDateTime=`${t}/${i}/${r}  \u2022  ${g}:${y}`}extractDateTimeFromReportId(n){const o=n.match(/(\d{2})(\d{2})(\d{4})_(\d{2})(\d{2})(\d{2})/);if(o){const[,t,i,r,g,y]=o;return`${t}/${i}/${r}  \u2022  ${g}:${y}`}return null}getCurrentDate(){return(new Date).toISOString().split("T")[0]}editLocation(){var n=this;return(0,k.A)(function*(){yield(yield n.alertController.create({header:"Location",inputs:[{name:"location",type:"text",placeholder:"Enter location",value:n.cleanupForm.get("location")?.value||""}],buttons:[{text:"Cancel",role:"cancel"},{text:"Save",handler:t=>{n.cleanupForm.patchValue({location:t.location})}}]})).present()})()}editZone(){var n=this;return(0,k.A)(function*(){yield(yield n.alertController.create({header:"Zone Number",inputs:[{name:"zoneNumber",type:"text",placeholder:"Enter zone number",value:n.cleanupForm.get("zoneNumber")?.value||""}],buttons:[{text:"Cancel",role:"cancel"},{text:"Save",handler:t=>{n.cleanupForm.patchValue({zoneNumber:t.zoneNumber})}}]})).present()})()}editQuad(){var n=this;return(0,k.A)(function*(){yield(yield n.alertController.create({header:"Quad Number",inputs:[{name:"quadNumber",type:"text",placeholder:"Enter quad number",value:n.cleanupForm.get("quadNumber")?.value||""}],buttons:[{text:"Cancel",role:"cancel"},{text:"Save",handler:t=>{n.cleanupForm.patchValue({quadNumber:t.quadNumber})}}]})).present()})()}getZoneName(n){return n?`Zone ${n}`:""}getQuadDisplay(n){if(!n)return"";const o=n.match(/\d+/);return o?o[0]:""}locationHasZones(){const n=this.cleanupForm.get("location")?.value;return!!n&&["Ramsar","Grand Anse","Petit Barbarons"].includes(n)}locationHasQuads(){const n=this.cleanupForm.get("location")?.value;return!!n&&["Ramsar","Grand Anse","Caiman","Canopy"].includes(n)}editLocationAdmin(){var n=this;return(0,k.A)(function*(){if(!n.currentUser||n.currentUser.level<4)return;const o=yield n.selectLocationStep();if(!o)return;const t=n.availableLocations.find(g=>g.name===o);let i="";if(t?.hasZones&&t.zones.length>0){const g=yield n.selectZoneStep(t);if(null===g)return;i=g}let r="";if(t?.hasQuads&&t.quads.length>0){const g=yield n.selectQuadStep(t,i);if(null===g)return;r=g}n.cleanupForm.patchValue({location:o,zoneNumber:i,quadNumber:r}),n.isEditMode&&n.cleanupForm.markAsDirty()})()}selectLocationStep(){var n=this;return new Promise(function(){var o=(0,k.A)(function*(t){const i=n.cleanupForm.get("location")?.value||"",r=n.availableLocations.map(y=>({name:"location",type:"radio",label:y.name,value:y.name,checked:y.name===i}));yield(yield n.alertController.create({header:"Select Location",cssClass:"location-edit-alert",inputs:r,buttons:[{text:"Cancel",role:"cancel",handler:()=>t(null)},{text:"Next",handler:y=>t(y)}]})).present()});return function(t){return o.apply(this,arguments)}}())}selectZoneStep(n){var o=this;return new Promise(function(){var t=(0,k.A)(function*(i){const r=o.cleanupForm.get("zoneNumber")?.value||"",g=n.zones.map(_=>({name:"zone",type:"radio",label:`Zone ${_}`,value:_,checked:_===r}));yield(yield o.alertController.create({header:"Select Zone",subHeader:n.name,cssClass:"location-edit-alert",inputs:g,buttons:[{text:"Cancel",role:"cancel",handler:()=>i(null)},{text:"Next",handler:_=>i(_)}]})).present()});return function(i){return t.apply(this,arguments)}}())}selectQuadStep(n,o){var t=this;return new Promise(function(){var i=(0,k.A)(function*(r){const g=t.cleanupForm.get("quadNumber")?.value||"";let y=n.quads;if(o&&n.zoneQuadMap&&n.zoneQuadMap[o]){const C=n.zoneQuadMap[o];y=n.quads.filter(j=>{const I=parseInt(t.getQuadDisplay(j));return C.includes(I)})}const _=y.map(C=>({name:"quad",type:"radio",label:`Quad ${t.getQuadDisplay(C)}`,value:C,checked:t.getQuadDisplay(C)===g||C===g}));yield(yield t.alertController.create({header:"Select Quad",subHeader:n.name,cssClass:"location-edit-alert",inputs:_,buttons:[{text:"Cancel",role:"cancel",handler:()=>r(null)},{text:"Save",handler:C=>r(C)}]})).present()});return function(r){return i.apply(this,arguments)}}())}loadDynamicSites(){var n=this;return(0,k.A)(function*(){try{(yield n.siteSyncService.getAllSites()).forEach(t=>{n.availableLocations.some(i=>i.name===t.name)||n.availableLocations.push({name:t.name,hasZones:t.zones&&t.zones.length>0||!1,hasQuads:t.sample_points&&t.sample_points.length>0||!1,zones:t.zones?t.zones.map(i=>i.name?.replace("Zone ","")||i.id):[],quads:t.sample_points?t.sample_points.map(i=>i.id||i.label):[]})})}catch(o){console.error("Error loading dynamic sites:",o)}})()}initializeForm(){const n=this.getCurrentDate(),o=new Date,t=`${String(o.getHours()).padStart(2,"0")}:${String(o.getMinutes()).padStart(2,"0")}`;this.cleanupForm=this.formBuilder.group({date:[n,F.k0.required],observationTime:[t],team:["",F.k0.required],location:["",F.k0.required],zoneNumber:[""],quadNumber:[""],flipFlops:[null],toys:[null],bagsBottles:[null],pens:[null],toothbrushes:[null],lollipopSticks:[null],juicePackets:[null],cigaretteButts:[null],foodWrappers:[null],takeAwayContainers:[null],lids:[null],bottleCaps:[null],beverageBottles:[null],straws:[null],forksKnivesSpoons:[null],bags:[null],cupsPlates:[null],plasticBottle:[null],toothpasteTubes:[null],elasticBands:[null],boxPackaging:[null],wipesPacket:[null],foam:[null],largeFoam:[null],foamPieces:[null],balloons:[null],lighters:[null],householdItems:[null],diapersSanitary:[null],wipes:[null],rubber:[null],biologicalWaste:[null],wovenPlastic:[null],plasticsWeight:[null],lures:[null],fishingLineRopes:[null],nets:[null],buoysFloats:[null],otherFishingGear:[null],fishingGearWeight:[null],hardFragments:[null],softFragments:[null],remnantsWeight:[null],bottles:[null],bulbsLightTubes:[null],foodContainer:[null],glassFragments:[null],drinkingCans:[null],bottleCaps2:[null],aluminumFoil:[null],sheeting:[null],appliances:[null],glassWeight:[null],napkinsToiletPaper:[null],cupsPlates2:[null],cardboard:[null],usedWood:[null],cloth:[null],fiberglass:[null],paperWeight:[null],furniture:[null],appliancesElectronics:[null],treatedWood:[null],constructionDebris:[null],largePlastics:[null],greenWaste:[null],bulkyWeight:[null],totalWeight:[null],comments:[""]}),this.updateProgress()}incrementTally(n){const o=this.cleanupForm.get(n);o&&o.setValue((o.value||0)+1)}decrementTally(n){const o=this.cleanupForm.get(n);o&&o.value>0&&o.setValue(o.value-1)}calculateCategoryTotal(n){return n.reduce((o,t)=>o+(this.cleanupForm.get(t)?.value||0),0)}updateProgress(){const n=this.cleanupForm.value;let o=0,t=3;n.date&&o++,n.team&&o++,n.location&&o++,Object.keys(n).filter(_=>!["date","team","location","comments","totalWeight"].includes(_)&&!_.includes("Weight")).filter(_=>n[_]>0).length>0&&(o++,t++),["plasticsWeight","fishingGearWeight","remnantsWeight","glassWeight","paperWeight","bulkyWeight","totalWeight"].filter(_=>n[_]>0).length>0&&(o++,t++),this.progress=t>0?o/t:0}subscribeToFormChanges(){this.autosaveSub&&this.autosaveSub.unsubscribe(),this.autosaveSub=this.cleanupForm.valueChanges.pipe((0,N.B)(750)).subscribe(()=>{this.isSubmitted||(this.updateProgress(),this.saveDraftOnExit().catch(n=>console.error("CleanupPage: autosave failed:",n)))})}onSubmit(){var n=this;return(0,k.A)(function*(){if(n.isSubmitting)return;if(n.isSubmitting=!0,n.cleanupForm.markAllAsTouched(),!n.cleanupForm.valid)return n.isSubmitting=!1,void(yield(yield n.alertController.create({header:"Incomplete Form",message:"Please fill in all required fields (Location, Team, and Date).",buttons:["OK"]})).present());n.isSubmitted=!0,n.autosaveSub&&(n.autosaveSub.unsubscribe(),n.autosaveSub=null);const o=yield n.loadingController.create({message:"Submitting cleanup data..."});yield o.present();try{const t={...n.cleanupForm.value};t.status={incomplete:!1,sent:!0,pending:!1};const i={formValue:t,coordinates:null,photos:[],existingReportId:n.currentReportId||void 0};n.isEditMode&&(i.originalSubmittedBy=n.originalSubmittedBy);const r=yield n.cleanupSyncService.submitFinal(i);yield o.dismiss();try{n.autosaveSub&&(n.autosaveSub.unsubscribe(),n.autosaveSub=null),yield new Promise(z=>setTimeout(z,1e3));const _=n.cleanupForm.value;yield n.cleanupSyncService.clearDraft(_);const v=(_?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),C=_?.zoneNumber||"",j=_?.quadNumber||"";let I=`cleanup_draft_${v}`;C&&(I+=`_zone${C}`),j&&(I+=`_quad${j}`),yield n.forceDeleteDraftFile(`${I}.json`),n.isSubmitted=!0,console.log("CleanupPage: Draft cleared and form reset successfully")}catch(_){console.error("CleanupPage: Failed to clear draft:",_)}const g=n.isEditMode?r.queued?"Updated data saved locally and queued for upload when online.":"Cleanup activity updated successfully!":r.queued?"Cleanup data saved locally and queued for upload when online.":"Cleanup activity submitted successfully!";yield(yield n.alertController.create({header:"Success",message:g,buttons:[{text:"OK",handler:()=>{n.router.navigate(["/health"])}}]})).present()}catch(t){yield o.dismiss(),console.error("Error submitting cleanup:",t),n.showAlert("Error","Failed to submit cleanup activity. Please try again.")}})()}discardForm(){var n=this;return(0,k.A)(function*(){var t;yield(yield n.alertController.create({header:"Discard Form",message:"Are you sure you want to discard this form? All entered data will be lost.",buttons:[{text:"Cancel",role:"cancel"},{text:"Discard",role:"destructive",handler:(t=(0,k.A)(function*(){n.isDiscarded=!0,n.autosaveSub&&(n.autosaveSub.unsubscribe(),n.autosaveSub=null),yield new Promise(v=>setTimeout(v,1e3));const i=n.cleanupForm.value;yield n.cleanupSyncService.clearDraft(i);const r=(i?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),g=i?.zoneNumber||"",y=i?.quadNumber||"";let _=`cleanup_draft_${r}`;g&&(_+=`_zone${g}`),y&&(_+=`_quad${y}`),yield n.forceDeleteDraftFile(`${_}.json`),yield new Promise(v=>setTimeout(v,200)),n.initializeForm(),n.router.navigate(["/health"])}),function(){return t.apply(this,arguments)})}]})).present()})()}restoreDraftIfAny(){var n=this;return(0,k.A)(function*(){const o=n.route.snapshot.queryParams,t={location:o.location||n.cleanupForm.get("location")?.value,zoneNumber:o.zone||n.cleanupForm.get("zoneNumber")?.value,quadNumber:o.quad||n.cleanupForm.get("quadNumber")?.value},i=yield n.cleanupSyncService.loadDraft(t);if(i)try{i.reportId&&(n.currentReportId=i.reportId),i.form&&n.cleanupForm.patchValue(i.form),n.updateProgress()}catch(r){console.error("CleanupPage: failed to restore draft:",r)}})()}saveDraft(){var n=this;return(0,k.A)(function*(){var t;n.cleanupForm&&(yield(yield n.alertController.create({header:"Save Draft",message:"Are you sure you want to save this form as a draft? You can return to complete it later.",buttons:[{text:"Cancel",role:"cancel"},{text:"Save Draft",handler:(t=(0,k.A)(function*(){try{yield n.saveDraftOnExit(),yield(yield n.alertController.create({header:"Draft Saved",message:"Your form has been saved as a draft. You can access it from the health page.",buttons:[{text:"OK",handler:()=>{n.router.navigate(["/health"])}}]})).present()}catch(i){console.error("Failed to save draft:",i),yield(yield n.alertController.create({header:"Save Failed",message:"Failed to save the draft. Please try again.",buttons:["OK"]})).present()}}),function(){return t.apply(this,arguments)})}]})).present())})()}saveDraftOnExit(){var n=this;return(0,k.A)(function*(){if(!n.cleanupForm||n.viewMode||n.isDiscarded||n.isSubmitted)return;const o=n.cleanupForm.value;(o?.location||o?.team||o?.totalWeight>0)&&(yield n.cleanupSyncService.saveDraft({reportId:n.currentReportId,form:o,coordinates:null,photos:[]}))})()}resetForm(){this.cleanupForm.reset(),this.initializeForm()}showAlert(n,o){var t=this;return(0,k.A)(function*(){yield(yield t.alertController.create({header:n,message:o,buttons:["OK"]})).present()})()}goBack(){this.router.navigate(["/threats"])}setViewMode(n){this.viewMode=n,n?this.cleanupForm.disable():this.cleanupForm.enable()}enableEditMode(){!this.currentUser||this.currentUser.level<4||(this.isEditMode=!0,this.viewMode=!1,this.cleanupForm.enable(),this.originalSubmittedBy=this.loadedReport?.submittedBy||"")}getEditedDateTime(){if(!this.loadedReport)return null;let n=this.loadedReport.editedAt||null;if(!n){const _=this.loadedReport.updatedAt,v=this.loadedReport.createdAt;_&&v&&_!==v&&Math.abs(new Date(_).getTime()-new Date(v).getTime())>5e3&&(n=_)}if(!n)return null;const o=new Date(n);return isNaN(o.getTime())?null:`${o.getDate().toString().padStart(2,"0")}/${(o.getMonth()+1).toString().padStart(2,"0")}/${o.getFullYear()} ${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`}loadReportForViewing(n){var o=this;return(0,k.A)(function*(){try{const t=yield o.cleanupSyncService.getAllReports();console.log("CleanupPage: All reports:",t);const i=t.find(g=>g.report.reportId===n);if(!i)return console.error("CleanupPage: Report not found for viewing:",n),yield(yield o.alertController.create({header:"Report Not Found",message:"The requested report could not be found.",buttons:["OK"]})).present(),void o.router.navigate(["/threats"]);const r=i.report;console.log("CleanupPage: Loading report for viewing:",r),o.loadedReport=r,o.cleanupForm.patchValue({date:r.form.date||"",observationTime:r.form.observationTime||"",team:r.form.team||"",location:r.form.location||"",zoneNumber:r.form.zoneNumber||"",quadNumber:r.form.quadNumber||"",flipFlops:r.form.flipFlops||0,toys:r.form.toys||0,bagsBottles:r.form.bagsBottles||0,pens:r.form.pens||0,toothbrushes:r.form.toothbrushes||0,lollipopSticks:r.form.lollipopSticks||0,juicePackets:r.form.juicePackets||0,cigaretteButts:r.form.cigaretteButts||0,foodWrappers:r.form.foodWrappers||0,takeAwayContainers:r.form.takeAwayContainers||0,lids:r.form.lids||0,bottleCaps:r.form.bottleCaps||0,beverageBottles:r.form.beverageBottles||0,straws:r.form.straws||0,forksKnivesSpoons:r.form.forksKnivesSpoons||0,bags:r.form.bags||0,cupsPlates:r.form.cupsPlates||0,plasticBottle:r.form.plasticBottle||0,toothpasteTubes:r.form.toothpasteTubes||0,elasticBands:r.form.elasticBands||0,boxPackaging:r.form.boxPackaging||0,wipesPacket:r.form.wipesPacket||0,foam:r.form.foam||0,largeFoam:r.form.largeFoam||0,foamPieces:r.form.foamPieces||0,balloons:r.form.balloons||0,lighters:r.form.lighters||0,householdItems:r.form.householdItems||0,diapersSanitary:r.form.diapersSanitary||0,wipes:r.form.wipes||0,rubber:r.form.rubber||0,biologicalWaste:r.form.biologicalWaste||0,wovenPlastic:r.form.wovenPlastic||0,plasticsWeight:r.form.plasticsWeight||0,lures:r.form.lures||0,fishingLineRopes:r.form.fishingLineRopes||0,nets:r.form.nets||0,buoysFloats:r.form.buoysFloats||0,otherFishingGear:r.form.otherFishingGear||0,fishingGearWeight:r.form.fishingGearWeight||0,hardFragments:r.form.hardFragments||0,softFragment:r.form.softFragments||0,remnantsWeight:r.form.remnantsWeight||0,bottles:r.form.bottles||0,bulbsLightTubes:r.form.bulbsLightTubes||0,foodContainer:r.form.foodContainer||0,glassFragments:r.form.glassFragments||0,drinkingCans:r.form.drinkingCans||0,bottleCaps2:r.form.bottleCaps2||0,aluminumFoil:r.form.aluminumFoil||0,sheeting:r.form.sheeting||0,appliances:r.form.appliances||0,glassWeight:r.form.glassWeight||0,napkinsToiletPaper:r.form.napkinsToiletPaper||0,cupsPlates2:r.form.cupsPlates2||0,cardboard:r.form.cardboard||0,usedWood:r.form.usedWood||0,cloth:r.form.cloth||0,fiberglass:r.form.fiberglass||0,paperWeight:r.form.paperWeight||0,furniture:r.form.furniture||0,appliancesElectronics:r.form.appliancesElectronics||0,treatedWood:r.form.treatedWood||0,constructionDebris:r.form.constructionDebris||0,largePlastics:r.form.largePlastics||0,greenWaste:r.form.greenWaste||0,bulkyWeight:r.form.bulkyWeight||0,totalWeight:r.form.totalWeight||0,comments:r.form.comments||""}),o.currentReportId=n,o.setCurrentDateTime(n),o.updateProgress(),o.setViewMode(!0)}catch(t){console.error("CleanupPage: Error loading report for viewing:",t),yield(yield o.alertController.create({header:"Error",message:"Failed to load the report.",buttons:["OK"]})).present(),o.router.navigate(["/threats"])}})()}deleteEntry(){var n=this;return(0,k.A)(function*(){const o=n.auth.getCurrentUser();var i;!o||o.level<4?yield(yield n.alertController.create({header:"Permission Denied",message:"Only Level 4 users can delete entries.",buttons:["OK"]})).present():yield(yield n.alertController.create({header:"Delete Entry",message:"Are you sure you want to permanently delete this entry? This will remove it from the database and back it up to deleted files storage. This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:(i=(0,k.A)(function*(){yield n.performDeletion()}),function(){return i.apply(this,arguments)})}]})).present()})()}performDeletion(){var n=this;return(0,k.A)(function*(){const o=yield n.loadingController.create({message:"Deleting entry..."});yield o.present();try{const t=n.auth.getCurrentUser();yield n.entryDeletionService.deleteEntry({reportId:n.currentReportId,formType:"cleanup",tableName:"cleanup_reports",deletedBy:t?.username||"Unknown",deletedByEmail:t?.email||"",originalSubmittedBy:n.loadedReport?.submittedBy,originalSubmittedAt:n.loadedReport?.createdAt}),yield o.dismiss(),yield(yield n.alertController.create({header:"Success",message:"Entry has been deleted and backed up successfully.",buttons:[{text:"OK",handler:()=>{n.router.navigate(["/threats"])}}]})).present()}catch(t){yield o.dismiss(),console.error("Error deleting entry:",t),yield(yield n.alertController.create({header:"Error",message:"Failed to delete entry. Please try again.",buttons:["OK"]})).present()}})()}static#e=l=()=>(this.\u0275fac=function(o){return new(o||m)(e.rXU(F.ok),e.rXU(b.hG),e.rXU(b.Xi),e.rXU(P.Ix),e.rXU(P.nX),e.rXU(D.N),e.rXU(a.$),e.rXU(p.H),e.rXU(u.C),e.rXU(d.k))},this.\u0275cmp=e.VBU({type:m,selectors:[["app-cleanup"]],standalone:!1,decls:764,vars:42,consts:[[1,"cleanup-green"],["slot","start"],["defaultHref","/threats"],[1,"cleanup-green","compact-toolbar"],[1,"date-time-text"],[4,"ngIf"],[1,"cleanup-green","metadata-toolbar"],[1,"metadata-container"],[1,"metadata-item",3,"click"],["name","location",1,"metadata-icon"],[1,"metadata-label"],["name","alert-circle","class","status-icon required",4,"ngIf"],["class","metadata-item",3,"click",4,"ngIf"],["class","edit-location-link",3,"click",4,"ngIf"],["style","padding: 0 16px; font-size: 0.75rem; color: #e76f51;",4,"ngIf"],["color","light",3,"value"],[1,"progress-text"],[3,"ngSubmit","formGroup"],["class","edit-mode-banner",4,"ngIf"],["class","edit-mode-banner editing",4,"ngIf"],["size","12"],[2,"position","relative"],["position","stacked"],["formControlName","team","type","text","placeholder","Team name or initials"],["name","close-circle","color","danger","style","position: absolute; top: 12px; right: 10px;",4,"ngIf"],["name","checkmark-circle","style","position: absolute; top: 12px; right: 10px; color: #52a676;",4,"ngIf"],["formControlName","comments","rows","2","placeholder","Additional notes"],[1,"plastics-header"],[1,"table-container"],[1,"waste-table"],[1,"section-header"],["colspan","2"],[1,"tally-control"],["size","small","fill","clear",3,"click"],["name","remove"],["type","number","formControlName","flipFlops","min","0","placeholder","0",1,"tally-input"],["name","add"],["type","number","formControlName","toys","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","pens","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","toothbrushes","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","lollipopSticks","min","0","placeholder","0",1,"tally-input"],["size","small","fill","clear",3,"click",4,"ngIf"],["type","number","formControlName","juicePackets","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","cigaretteButts","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","foodWrappers","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","takeAwayContainers","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","lids","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","bottleCaps","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","beverageBottles","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","straws","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","forksKnivesSpoons","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","bags","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","cupsPlates","min","0","placeholder","0",1,"tally-input"],["colspan","2",1,"weight-cell"],["type","number","formControlName","plasticsWeight","placeholder","0",1,"weight-input"],["type","number","formControlName","plasticBottle","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","toothpasteTubes","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","elasticBands","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","boxPackaging","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","wipesPacket","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","largeFoam","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","foamPieces","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","fishingGearWeight","placeholder","0",1,"weight-input"],["type","number","formControlName","balloons","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","lighters","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","householdItems","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","diapersSanitary","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","wipes","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","rubber","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","biologicalWaste","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","wovenPlastic","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","lures","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","fishingLineRopes","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","nets","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","buoysFloats","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","otherFishingGear","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","hardFragments","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","softFragments","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","remnantsWeight","placeholder","0",1,"weight-input"],["colspan","2",1,"total-weight-cell"],[1,"glass-header"],["type","number","formControlName","bottles","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","bulbsLightTubes","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","foodContainer","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","glassFragments","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","glassWeight","placeholder","0",1,"weight-input"],[1,"metal-header"],["type","number","formControlName","drinkingCans","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","bottleCaps2","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","aluminumFoil","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","sheeting","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","appliances","min","0","placeholder","0",1,"tally-input"],[1,"paper-header"],["type","number","formControlName","napkinsToiletPaper","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","cupsPlates2","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","cardboard","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","usedWood","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","cloth","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","fiberglass","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","paperWeight","placeholder","0",1,"weight-input"],[1,"bulky-header"],["type","number","formControlName","furniture","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","constructionDebris","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","appliancesElectronics","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","largePlastics","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","treatedWood","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","greenWaste","min","0","placeholder","0",1,"tally-input"],["type","number","formControlName","bulkyWeight","placeholder","0",1,"weight-input"],[1,"total-header"],["type","number","formControlName","totalWeight","placeholder","0",1,"weight-input"],["class","form-buttons",4,"ngIf"],["class","button-container",4,"ngIf"],["name","alert-circle",1,"status-icon","required"],["name","grid",1,"metadata-icon"],["name","apps",1,"metadata-icon"],[1,"edit-location-link",3,"click"],[2,"padding","0 16px","font-size","0.75rem","color","#e76f51"],[1,"edit-mode-banner"],["expand","block","color","warning",3,"click"],["name","create-outline","slot","start"],[1,"edit-mode-banner","editing"],["name","create-outline"],["name","close-circle","color","danger",2,"position","absolute","top","12px","right","10px"],["name","checkmark-circle",2,"position","absolute","top","12px","right","10px","color","#52a676"],[1,"form-buttons"],["expand","block","type","submit",1,"submit-button",3,"disabled"],["name","checkmark-circle","slot","start"],["expand","block","fill","outline","color","medium",1,"save-draft-button",3,"click"],["name","save-outline","slot","start"],["expand","block","fill","outline",1,"discard-button",3,"click"],["name","trash-outline","slot","start"],[1,"button-container"],["expand","block","color","danger",1,"delete-button",3,"click"]],template:function(o,t){if(1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Wetland Cleanup Activity"),e.k0s()(),e.j41(6,"ion-toolbar",3)(7,"ion-text",4),e.EFF(8),e.DNE(9,h,2,1,"span",5),e.k0s()(),e.j41(10,"ion-toolbar",6)(11,"div",7)(12,"div",8),e.bIt("click",function(){return!t.viewMode&&t.editLocation()}),e.nrm(13,"ion-icon",9),e.j41(14,"span",10),e.EFF(15),e.k0s(),e.DNE(16,E,1,0,"ion-icon",11),e.k0s(),e.DNE(17,M,4,1,"div",12)(18,w,4,1,"div",12)(19,W,2,0,"span",13),e.k0s(),e.DNE(20,G,2,0,"ion-error",14),e.k0s(),e.j41(21,"ion-toolbar",3),e.nrm(22,"ion-progress-bar",15),e.j41(23,"ion-text",16),e.EFF(24),e.k0s()()(),e.j41(25,"ion-content")(26,"form",17),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.DNE(27,S,4,0,"div",18)(28,x,4,0,"div",19),e.j41(29,"ion-card")(30,"ion-card-header",0)(31,"ion-card-title"),e.EFF(32,"General Information"),e.k0s()(),e.j41(33,"ion-card-content")(34,"ion-grid")(35,"ion-row")(36,"ion-col",20)(37,"ion-item",21)(38,"ion-label",22),e.EFF(39,"Team"),e.k0s(),e.nrm(40,"ion-input",23),e.DNE(41,$,1,0,"ion-icon",24)(42,B,1,0,"ion-icon",25)(43,A,2,0,"ion-error",5),e.k0s()()(),e.j41(44,"ion-row")(45,"ion-col")(46,"ion-item")(47,"ion-label",22),e.EFF(48,"Comments"),e.k0s(),e.nrm(49,"ion-textarea",26),e.k0s()()()()()(),e.j41(50,"ion-card")(51,"ion-card-header",27)(52,"ion-card-title"),e.EFF(53,"PLASTICS"),e.k0s()(),e.j41(54,"ion-card-content")(55,"div",28)(56,"table",29)(57,"tbody")(58,"tr",30)(59,"td",31)(60,"strong"),e.EFF(61,"Consumer Items"),e.k0s()()(),e.j41(62,"tr")(63,"td"),e.EFF(64,"Flip flops"),e.k0s(),e.j41(65,"td")(66,"div",32)(67,"ion-button",33),e.bIt("click",function(){return t.decrementTally("flipFlops")}),e.nrm(68,"ion-icon",34),e.k0s(),e.nrm(69,"ion-input",35),e.j41(70,"ion-button",33),e.bIt("click",function(){return t.incrementTally("flipFlops")}),e.nrm(71,"ion-icon",36),e.k0s()()()(),e.j41(72,"tr")(73,"td"),e.EFF(74,"Toys / figurines"),e.k0s(),e.j41(75,"td")(76,"div",32)(77,"ion-button",33),e.bIt("click",function(){return t.decrementTally("toys")}),e.nrm(78,"ion-icon",34),e.k0s(),e.nrm(79,"ion-input",37),e.j41(80,"ion-button",33),e.bIt("click",function(){return t.incrementTally("toys")}),e.nrm(81,"ion-icon",36),e.k0s()()()(),e.j41(82,"tr")(83,"td"),e.EFF(84,"Pens"),e.k0s(),e.j41(85,"td")(86,"div",32)(87,"ion-button",33),e.bIt("click",function(){return t.decrementTally("pens")}),e.nrm(88,"ion-icon",34),e.k0s(),e.nrm(89,"ion-input",38),e.j41(90,"ion-button",33),e.bIt("click",function(){return t.incrementTally("pens")}),e.nrm(91,"ion-icon",36),e.k0s()()()(),e.j41(92,"tr")(93,"td"),e.EFF(94,"Toothbrushes"),e.k0s(),e.j41(95,"td")(96,"div",32)(97,"ion-button",33),e.bIt("click",function(){return t.decrementTally("toothbrushes")}),e.nrm(98,"ion-icon",34),e.k0s(),e.nrm(99,"ion-input",39),e.j41(100,"ion-button",33),e.bIt("click",function(){return t.incrementTally("toothbrushes")}),e.nrm(101,"ion-icon",36),e.k0s()()()(),e.j41(102,"tr")(103,"td"),e.EFF(104,"Lollipop sticks"),e.k0s(),e.j41(105,"td")(106,"div",32)(107,"ion-button",33),e.bIt("click",function(){return t.decrementTally("lollipopSticks")}),e.nrm(108,"ion-icon",34),e.k0s(),e.nrm(109,"ion-input",40),e.j41(110,"ion-button",33),e.bIt("click",function(){return t.incrementTally("lollipopSticks")}),e.nrm(111,"ion-icon",36),e.k0s()()()(),e.j41(112,"tr")(113,"td"),e.EFF(114,"Juice packets"),e.k0s(),e.j41(115,"td")(116,"div",32),e.DNE(117,L,2,0,"ion-button",41),e.nrm(118,"ion-input",42),e.DNE(119,q,2,0,"ion-button",41),e.k0s()()(),e.j41(120,"tr")(121,"td"),e.EFF(122,"Cigarette butts"),e.k0s(),e.j41(123,"td")(124,"div",32),e.DNE(125,X,2,0,"ion-button",41),e.nrm(126,"ion-input",43),e.DNE(127,Y,2,0,"ion-button",41),e.k0s()()(),e.j41(128,"tr")(129,"td"),e.EFF(130,"Food wrappers (candy, chips etc.)"),e.k0s(),e.j41(131,"td")(132,"div",32),e.DNE(133,U,2,0,"ion-button",41),e.nrm(134,"ion-input",44),e.DNE(135,Q,2,0,"ion-button",41),e.k0s()()(),e.j41(136,"tr")(137,"td"),e.EFF(138,"Take away containers"),e.k0s(),e.j41(139,"td")(140,"div",32),e.DNE(141,K,2,0,"ion-button",41),e.nrm(142,"ion-input",45),e.DNE(143,Z,2,0,"ion-button",41),e.k0s()()(),e.j41(144,"tr")(145,"td"),e.EFF(146,"Lids"),e.k0s(),e.j41(147,"td")(148,"div",32),e.DNE(149,H,2,0,"ion-button",41),e.nrm(150,"ion-input",46),e.DNE(151,J,2,0,"ion-button",41),e.k0s()()(),e.j41(152,"tr")(153,"td"),e.EFF(154,"Bottle caps"),e.k0s(),e.j41(155,"td")(156,"div",32),e.DNE(157,ee,2,0,"ion-button",41),e.nrm(158,"ion-input",47),e.DNE(159,te,2,0,"ion-button",41),e.k0s()()(),e.j41(160,"tr")(161,"td"),e.EFF(162,"Beverage bottles"),e.k0s(),e.j41(163,"td")(164,"div",32),e.DNE(165,ne,2,0,"ion-button",41),e.nrm(166,"ion-input",48),e.DNE(167,oe,2,0,"ion-button",41),e.k0s()()(),e.j41(168,"tr")(169,"td"),e.EFF(170,"Straws"),e.k0s(),e.j41(171,"td")(172,"div",32),e.DNE(173,ie,2,0,"ion-button",41),e.nrm(174,"ion-input",49),e.DNE(175,re,2,0,"ion-button",41),e.k0s()()(),e.j41(176,"tr")(177,"td"),e.EFF(178,"Forks, knives, spoons"),e.k0s(),e.j41(179,"td")(180,"div",32),e.DNE(181,le,2,0,"ion-button",41),e.nrm(182,"ion-input",50),e.DNE(183,ae,2,0,"ion-button",41),e.k0s()()(),e.j41(184,"tr")(185,"td"),e.EFF(186,"Bags"),e.k0s(),e.j41(187,"td")(188,"div",32),e.DNE(189,ce,2,0,"ion-button",41),e.nrm(190,"ion-input",51),e.DNE(191,se,2,0,"ion-button",41),e.k0s()()(),e.j41(192,"tr")(193,"td"),e.EFF(194,"Cups and plates"),e.k0s(),e.j41(195,"td")(196,"div",32),e.DNE(197,ue,2,0,"ion-button",41),e.nrm(198,"ion-input",52),e.DNE(199,de,2,0,"ion-button",41),e.k0s()()(),e.j41(200,"tr")(201,"td",53)(202,"strong"),e.EFF(203,"Consumer Weight (kg):"),e.k0s(),e.nrm(204,"ion-input",54),e.k0s()(),e.j41(205,"tr",30)(206,"td",31)(207,"strong"),e.EFF(208,"Packaging"),e.k0s()()(),e.j41(209,"tr")(210,"td"),e.EFF(211,"Plastic bottle (oil, sunscreen, bleach)"),e.k0s(),e.j41(212,"td")(213,"div",32)(214,"ion-button",33),e.bIt("click",function(){return t.decrementTally("plasticBottle")}),e.nrm(215,"ion-icon",34),e.k0s(),e.nrm(216,"ion-input",55),e.j41(217,"ion-button",33),e.bIt("click",function(){return t.incrementTally("plasticBottle")}),e.nrm(218,"ion-icon",36),e.k0s()()()(),e.j41(219,"tr")(220,"td"),e.EFF(221,"Toothpaste tubes"),e.k0s(),e.j41(222,"td")(223,"div",32)(224,"ion-button",33),e.bIt("click",function(){return t.decrementTally("toothpasteTubes")}),e.nrm(225,"ion-icon",34),e.k0s(),e.nrm(226,"ion-input",56),e.j41(227,"ion-button",33),e.bIt("click",function(){return t.incrementTally("toothpasteTubes")}),e.nrm(228,"ion-icon",36),e.k0s()()()(),e.j41(229,"tr")(230,"td"),e.EFF(231,"Elastic bands"),e.k0s(),e.j41(232,"td")(233,"div",32)(234,"ion-button",33),e.bIt("click",function(){return t.decrementTally("elasticBands")}),e.nrm(235,"ion-icon",34),e.k0s(),e.nrm(236,"ion-input",57),e.j41(237,"ion-button",33),e.bIt("click",function(){return t.incrementTally("elasticBands")}),e.nrm(238,"ion-icon",36),e.k0s()()()(),e.j41(239,"tr")(240,"td"),e.EFF(241,"Box packaging"),e.k0s(),e.j41(242,"td")(243,"div",32)(244,"ion-button",33),e.bIt("click",function(){return t.decrementTally("boxPackaging")}),e.nrm(245,"ion-icon",34),e.k0s(),e.nrm(246,"ion-input",58),e.j41(247,"ion-button",33),e.bIt("click",function(){return t.incrementTally("boxPackaging")}),e.nrm(248,"ion-icon",36),e.k0s()()()(),e.j41(249,"tr")(250,"td"),e.EFF(251,"Wipes packet"),e.k0s(),e.j41(252,"td")(253,"div",32)(254,"ion-button",33),e.bIt("click",function(){return t.decrementTally("wipesPacket")}),e.nrm(255,"ion-icon",34),e.k0s(),e.nrm(256,"ion-input",59),e.j41(257,"ion-button",33),e.bIt("click",function(){return t.incrementTally("wipesPacket")}),e.nrm(258,"ion-icon",36),e.k0s()()()(),e.j41(259,"tr")(260,"td",53)(261,"strong"),e.EFF(262,"Packaging Weight (kg):"),e.k0s(),e.nrm(263,"ion-input",54),e.k0s()(),e.j41(264,"tr",30)(265,"td",31)(266,"strong"),e.EFF(267,"Foam"),e.k0s()()(),e.j41(268,"tr")(269,"td"),e.EFF(270,"Large foam"),e.k0s(),e.j41(271,"td")(272,"div",32)(273,"ion-button",33),e.bIt("click",function(){return t.decrementTally("largeFoam")}),e.nrm(274,"ion-icon",34),e.k0s(),e.nrm(275,"ion-input",60),e.j41(276,"ion-button",33),e.bIt("click",function(){return t.incrementTally("largeFoam")}),e.nrm(277,"ion-icon",36),e.k0s()()()(),e.j41(278,"tr")(279,"td"),e.EFF(280,"Foam pieces"),e.k0s(),e.j41(281,"td")(282,"div",32)(283,"ion-button",33),e.bIt("click",function(){return t.decrementTally("foamPieces")}),e.nrm(284,"ion-icon",34),e.k0s(),e.nrm(285,"ion-input",61),e.j41(286,"ion-button",33),e.bIt("click",function(){return t.incrementTally("foamPieces")}),e.nrm(287,"ion-icon",36),e.k0s()()()(),e.j41(288,"tr")(289,"td",53)(290,"strong"),e.EFF(291,"Foam Weight (kg):"),e.k0s(),e.nrm(292,"ion-input",62),e.k0s()(),e.j41(293,"tr",30)(294,"td",31)(295,"strong"),e.EFF(296,"Other Trash"),e.k0s()()(),e.j41(297,"tr")(298,"td"),e.EFF(299,"Balloons (party decorations)"),e.k0s(),e.j41(300,"td")(301,"div",32)(302,"ion-button",33),e.bIt("click",function(){return t.decrementTally("balloons")}),e.nrm(303,"ion-icon",34),e.k0s(),e.nrm(304,"ion-input",63),e.j41(305,"ion-button",33),e.bIt("click",function(){return t.incrementTally("balloons")}),e.nrm(306,"ion-icon",36),e.k0s()()()(),e.j41(307,"tr")(308,"td"),e.EFF(309,"Lighters"),e.k0s(),e.j41(310,"td")(311,"div",32)(312,"ion-button",33),e.bIt("click",function(){return t.decrementTally("lighters")}),e.nrm(313,"ion-icon",34),e.k0s(),e.nrm(314,"ion-input",64),e.j41(315,"ion-button",33),e.bIt("click",function(){return t.incrementTally("lighters")}),e.nrm(316,"ion-icon",36),e.k0s()()()(),e.j41(317,"tr")(318,"td"),e.EFF(319,"Household items"),e.k0s(),e.j41(320,"td")(321,"div",32)(322,"ion-button",33),e.bIt("click",function(){return t.decrementTally("householdItems")}),e.nrm(323,"ion-icon",34),e.k0s(),e.nrm(324,"ion-input",65),e.j41(325,"ion-button",33),e.bIt("click",function(){return t.incrementTally("householdItems")}),e.nrm(326,"ion-icon",36),e.k0s()()()(),e.j41(327,"tr")(328,"td"),e.EFF(329,"Diapers / Sanitary"),e.k0s(),e.j41(330,"td")(331,"div",32)(332,"ion-button",33),e.bIt("click",function(){return t.decrementTally("diapersSanitary")}),e.nrm(333,"ion-icon",34),e.k0s(),e.nrm(334,"ion-input",66),e.j41(335,"ion-button",33),e.bIt("click",function(){return t.incrementTally("diapersSanitary")}),e.nrm(336,"ion-icon",36),e.k0s()()()(),e.j41(337,"tr")(338,"td"),e.EFF(339,"Wipes"),e.k0s(),e.j41(340,"td")(341,"div",32)(342,"ion-button",33),e.bIt("click",function(){return t.decrementTally("wipes")}),e.nrm(343,"ion-icon",34),e.k0s(),e.nrm(344,"ion-input",67),e.j41(345,"ion-button",33),e.bIt("click",function(){return t.incrementTally("wipes")}),e.nrm(346,"ion-icon",36),e.k0s()()()(),e.j41(347,"tr")(348,"td"),e.EFF(349,"Rubber"),e.k0s(),e.j41(350,"td")(351,"div",32)(352,"ion-button",33),e.bIt("click",function(){return t.decrementTally("rubber")}),e.nrm(353,"ion-icon",34),e.k0s(),e.nrm(354,"ion-input",68),e.j41(355,"ion-button",33),e.bIt("click",function(){return t.incrementTally("rubber")}),e.nrm(356,"ion-icon",36),e.k0s()()()(),e.j41(357,"tr")(358,"td"),e.EFF(359,"Biological waste"),e.k0s(),e.j41(360,"td")(361,"div",32)(362,"ion-button",33),e.bIt("click",function(){return t.decrementTally("biologicalWaste")}),e.nrm(363,"ion-icon",34),e.k0s(),e.nrm(364,"ion-input",69),e.j41(365,"ion-button",33),e.bIt("click",function(){return t.incrementTally("biologicalWaste")}),e.nrm(366,"ion-icon",36),e.k0s()()()(),e.j41(367,"tr")(368,"td"),e.EFF(369,"Woven plastics (polypropylene)"),e.k0s(),e.j41(370,"td")(371,"div",32)(372,"ion-button",33),e.bIt("click",function(){return t.decrementTally("wovenPlastic")}),e.nrm(373,"ion-icon",34),e.k0s(),e.nrm(374,"ion-input",70),e.j41(375,"ion-button",33),e.bIt("click",function(){return t.incrementTally("wovenPlastic")}),e.nrm(376,"ion-icon",36),e.k0s()()()(),e.j41(377,"tr")(378,"td",53)(379,"strong"),e.EFF(380,"Other Trash Weight (kg):"),e.k0s(),e.nrm(381,"ion-input",54),e.k0s()(),e.j41(382,"tr",30)(383,"td",31)(384,"strong"),e.EFF(385,"Fishing Gear"),e.k0s()()(),e.j41(386,"tr")(387,"td"),e.EFF(388,"Lures"),e.k0s(),e.j41(389,"td")(390,"div",32)(391,"ion-button",33),e.bIt("click",function(){return t.decrementTally("lures")}),e.nrm(392,"ion-icon",34),e.k0s(),e.nrm(393,"ion-input",71),e.j41(394,"ion-button",33),e.bIt("click",function(){return t.incrementTally("lures")}),e.nrm(395,"ion-icon",36),e.k0s()()()(),e.j41(396,"tr")(397,"td"),e.EFF(398,"Fishing Line / Ropes"),e.k0s(),e.j41(399,"td")(400,"div",32)(401,"ion-button",33),e.bIt("click",function(){return t.decrementTally("fishingLineRopes")}),e.nrm(402,"ion-icon",34),e.k0s(),e.nrm(403,"ion-input",72),e.j41(404,"ion-button",33),e.bIt("click",function(){return t.incrementTally("fishingLineRopes")}),e.nrm(405,"ion-icon",36),e.k0s()()()(),e.j41(406,"tr")(407,"td"),e.EFF(408,"Nets"),e.k0s(),e.j41(409,"td")(410,"div",32)(411,"ion-button",33),e.bIt("click",function(){return t.decrementTally("nets")}),e.nrm(412,"ion-icon",34),e.k0s(),e.nrm(413,"ion-input",73),e.j41(414,"ion-button",33),e.bIt("click",function(){return t.incrementTally("nets")}),e.nrm(415,"ion-icon",36),e.k0s()()()(),e.j41(416,"tr")(417,"td"),e.EFF(418,"Buoys / floats"),e.k0s(),e.j41(419,"td")(420,"div",32)(421,"ion-button",33),e.bIt("click",function(){return t.decrementTally("buoysFloats")}),e.nrm(422,"ion-icon",34),e.k0s(),e.nrm(423,"ion-input",74),e.j41(424,"ion-button",33),e.bIt("click",function(){return t.incrementTally("buoysFloats")}),e.nrm(425,"ion-icon",36),e.k0s()()()(),e.j41(426,"tr")(427,"td"),e.EFF(428,"Other (mix)"),e.k0s(),e.j41(429,"td")(430,"div",32)(431,"ion-button",33),e.bIt("click",function(){return t.decrementTally("otherFishingGear")}),e.nrm(432,"ion-icon",34),e.k0s(),e.nrm(433,"ion-input",75),e.j41(434,"ion-button",33),e.bIt("click",function(){return t.incrementTally("otherFishingGear")}),e.nrm(435,"ion-icon",36),e.k0s()()()(),e.j41(436,"tr")(437,"td",53)(438,"strong"),e.EFF(439,"Fishing Gear Weight (kg):"),e.k0s(),e.nrm(440,"ion-input",62),e.k0s()(),e.j41(441,"tr",30)(442,"td",31)(443,"strong"),e.EFF(444,"Remnants"),e.k0s()()(),e.j41(445,"tr")(446,"td"),e.EFF(447,"Hard fragments"),e.k0s(),e.j41(448,"td")(449,"div",32)(450,"ion-button",33),e.bIt("click",function(){return t.decrementTally("hardFragments")}),e.nrm(451,"ion-icon",34),e.k0s(),e.nrm(452,"ion-input",76),e.j41(453,"ion-button",33),e.bIt("click",function(){return t.incrementTally("hardFragments")}),e.nrm(454,"ion-icon",36),e.k0s()()()(),e.j41(455,"tr")(456,"td"),e.EFF(457,"Soft fragments"),e.k0s(),e.j41(458,"td")(459,"div",32)(460,"ion-button",33),e.bIt("click",function(){return t.decrementTally("softFragments")}),e.nrm(461,"ion-icon",34),e.k0s(),e.nrm(462,"ion-input",77),e.j41(463,"ion-button",33),e.bIt("click",function(){return t.incrementTally("softFragments")}),e.nrm(464,"ion-icon",36),e.k0s()()()(),e.j41(465,"tr")(466,"td",53)(467,"strong"),e.EFF(468,"Remnants Weight (kg):"),e.k0s(),e.nrm(469,"ion-input",78),e.k0s()(),e.j41(470,"tr")(471,"td",79)(472,"strong"),e.EFF(473,"TOTAL PLASTICS WEIGHT (kg):"),e.k0s(),e.nrm(474,"ion-input",54),e.k0s()()()()()()(),e.j41(475,"ion-card")(476,"ion-card-header",80)(477,"ion-card-title"),e.EFF(478,"GLASS"),e.k0s()(),e.j41(479,"ion-card-content")(480,"div",28)(481,"table",29)(482,"thead")(483,"tr")(484,"th"),e.EFF(485,"Item"),e.k0s(),e.j41(486,"th"),e.EFF(487,"Amount"),e.k0s()()(),e.j41(488,"tbody")(489,"tr")(490,"td"),e.EFF(491,"Bottles"),e.k0s(),e.j41(492,"td")(493,"div",32)(494,"ion-button",33),e.bIt("click",function(){return t.decrementTally("bottles")}),e.nrm(495,"ion-icon",34),e.k0s(),e.nrm(496,"ion-input",81),e.j41(497,"ion-button",33),e.bIt("click",function(){return t.incrementTally("bottles")}),e.nrm(498,"ion-icon",36),e.k0s()()()(),e.j41(499,"tr")(500,"td"),e.EFF(501,"Bulbs and light tubes"),e.k0s(),e.j41(502,"td")(503,"div",32)(504,"ion-button",33),e.bIt("click",function(){return t.decrementTally("bulbsLightTubes")}),e.nrm(505,"ion-icon",34),e.k0s(),e.nrm(506,"ion-input",82),e.j41(507,"ion-button",33),e.bIt("click",function(){return t.incrementTally("bulbsLightTubes")}),e.nrm(508,"ion-icon",36),e.k0s()()()(),e.j41(509,"tr")(510,"td"),e.EFF(511,"Food container"),e.k0s(),e.j41(512,"td")(513,"div",32)(514,"ion-button",33),e.bIt("click",function(){return t.decrementTally("foodContainer")}),e.nrm(515,"ion-icon",34),e.k0s(),e.nrm(516,"ion-input",83),e.j41(517,"ion-button",33),e.bIt("click",function(){return t.incrementTally("foodContainer")}),e.nrm(518,"ion-icon",36),e.k0s()()()(),e.j41(519,"tr")(520,"td"),e.EFF(521,"Glass fragments"),e.k0s(),e.j41(522,"td")(523,"div",32)(524,"ion-button",33),e.bIt("click",function(){return t.decrementTally("glassFragments")}),e.nrm(525,"ion-icon",34),e.k0s(),e.nrm(526,"ion-input",84),e.j41(527,"ion-button",33),e.bIt("click",function(){return t.incrementTally("glassFragments")}),e.nrm(528,"ion-icon",36),e.k0s()()()(),e.j41(529,"tr")(530,"td",53)(531,"strong"),e.EFF(532,"Glass Weight (kg):"),e.k0s(),e.nrm(533,"ion-input",85),e.k0s()()()()()()(),e.j41(534,"ion-card")(535,"ion-card-header",86)(536,"ion-card-title"),e.EFF(537,"METAL"),e.k0s()(),e.j41(538,"ion-card-content")(539,"div",28)(540,"table",29)(541,"thead")(542,"tr")(543,"th"),e.EFF(544,"Item"),e.k0s(),e.j41(545,"th"),e.EFF(546,"Amount"),e.k0s()()(),e.j41(547,"tbody")(548,"tr")(549,"td"),e.EFF(550,"Drinking cans"),e.k0s(),e.j41(551,"td")(552,"div",32)(553,"ion-button",33),e.bIt("click",function(){return t.decrementTally("drinkingCans")}),e.nrm(554,"ion-icon",34),e.k0s(),e.nrm(555,"ion-input",87),e.j41(556,"ion-button",33),e.bIt("click",function(){return t.incrementTally("drinkingCans")}),e.nrm(557,"ion-icon",36),e.k0s()()()(),e.j41(558,"tr")(559,"td"),e.EFF(560,"Bottle caps"),e.k0s(),e.j41(561,"td")(562,"div",32)(563,"ion-button",33),e.bIt("click",function(){return t.decrementTally("bottleCaps2")}),e.nrm(564,"ion-icon",34),e.k0s(),e.nrm(565,"ion-input",88),e.j41(566,"ion-button",33),e.bIt("click",function(){return t.incrementTally("bottleCaps2")}),e.nrm(567,"ion-icon",36),e.k0s()()()(),e.j41(568,"tr")(569,"td"),e.EFF(570,"Aluminum foil"),e.k0s(),e.j41(571,"td")(572,"div",32)(573,"ion-button",33),e.bIt("click",function(){return t.decrementTally("aluminumFoil")}),e.nrm(574,"ion-icon",34),e.k0s(),e.nrm(575,"ion-input",89),e.j41(576,"ion-button",33),e.bIt("click",function(){return t.incrementTally("aluminumFoil")}),e.nrm(577,"ion-icon",36),e.k0s()()()(),e.j41(578,"tr")(579,"td"),e.EFF(580,"Sheeting"),e.k0s(),e.j41(581,"td")(582,"div",32)(583,"ion-button",33),e.bIt("click",function(){return t.decrementTally("sheeting")}),e.nrm(584,"ion-icon",34),e.k0s(),e.nrm(585,"ion-input",90),e.j41(586,"ion-button",33),e.bIt("click",function(){return t.incrementTally("sheeting")}),e.nrm(587,"ion-icon",36),e.k0s()()()(),e.j41(588,"tr")(589,"td"),e.EFF(590,"Appliances"),e.k0s(),e.j41(591,"td")(592,"div",32)(593,"ion-button",33),e.bIt("click",function(){return t.decrementTally("appliances")}),e.nrm(594,"ion-icon",34),e.k0s(),e.nrm(595,"ion-input",91),e.j41(596,"ion-button",33),e.bIt("click",function(){return t.incrementTally("appliances")}),e.nrm(597,"ion-icon",36),e.k0s()()()(),e.j41(598,"tr")(599,"td",53)(600,"strong"),e.EFF(601,"Metal Weight (kg):"),e.k0s(),e.nrm(602,"ion-input",85),e.k0s()()()()()()(),e.j41(603,"ion-card")(604,"ion-card-header",92)(605,"ion-card-title"),e.EFF(606,"PAPER AND CARDBOARD"),e.k0s()(),e.j41(607,"ion-card-content")(608,"div",28)(609,"table",29)(610,"tbody")(611,"tr")(612,"td"),e.EFF(613,"Napkins / Toilet paper"),e.k0s(),e.j41(614,"td")(615,"div",32)(616,"ion-button",33),e.bIt("click",function(){return t.decrementTally("napkinsToiletPaper")}),e.nrm(617,"ion-icon",34),e.k0s(),e.nrm(618,"ion-input",93),e.j41(619,"ion-button",33),e.bIt("click",function(){return t.incrementTally("napkinsToiletPaper")}),e.nrm(620,"ion-icon",36),e.k0s()()()(),e.j41(621,"tr")(622,"td"),e.EFF(623,"Cups and plates"),e.k0s(),e.j41(624,"td")(625,"div",32)(626,"ion-button",33),e.bIt("click",function(){return t.decrementTally("cupsPlates2")}),e.nrm(627,"ion-icon",34),e.k0s(),e.nrm(628,"ion-input",94),e.j41(629,"ion-button",33),e.bIt("click",function(){return t.incrementTally("cupsPlates2")}),e.nrm(630,"ion-icon",36),e.k0s()()()(),e.j41(631,"tr")(632,"td"),e.EFF(633,"Cardboard"),e.k0s(),e.j41(634,"td")(635,"div",32)(636,"ion-button",33),e.bIt("click",function(){return t.decrementTally("cardboard")}),e.nrm(637,"ion-icon",34),e.k0s(),e.nrm(638,"ion-input",95),e.j41(639,"ion-button",33),e.bIt("click",function(){return t.incrementTally("cardboard")}),e.nrm(640,"ion-icon",36),e.k0s()()()(),e.j41(641,"tr")(642,"td"),e.EFF(643,"Used wood"),e.k0s(),e.j41(644,"td")(645,"div",32)(646,"ion-button",33),e.bIt("click",function(){return t.decrementTally("usedWood")}),e.nrm(647,"ion-icon",34),e.k0s(),e.nrm(648,"ion-input",96),e.j41(649,"ion-button",33),e.bIt("click",function(){return t.incrementTally("usedWood")}),e.nrm(650,"ion-icon",36),e.k0s()()()(),e.j41(651,"tr")(652,"td"),e.EFF(653,"Cloth"),e.k0s(),e.j41(654,"td")(655,"div",32)(656,"ion-button",33),e.bIt("click",function(){return t.decrementTally("cloth")}),e.nrm(657,"ion-icon",34),e.k0s(),e.nrm(658,"ion-input",97),e.j41(659,"ion-button",33),e.bIt("click",function(){return t.incrementTally("cloth")}),e.nrm(660,"ion-icon",36),e.k0s()()()(),e.j41(661,"tr")(662,"td"),e.EFF(663,"Fiberglass"),e.k0s(),e.j41(664,"td")(665,"div",32)(666,"ion-button",33),e.bIt("click",function(){return t.decrementTally("fiberglass")}),e.nrm(667,"ion-icon",34),e.k0s(),e.nrm(668,"ion-input",98),e.j41(669,"ion-button",33),e.bIt("click",function(){return t.incrementTally("fiberglass")}),e.nrm(670,"ion-icon",36),e.k0s()()()(),e.j41(671,"tr")(672,"td",53)(673,"strong"),e.EFF(674,"Paper & Cardboard Weight (kg):"),e.k0s(),e.nrm(675,"ion-input",99),e.k0s()()()()()()(),e.j41(676,"ion-card")(677,"ion-card-header",100)(678,"ion-card-title"),e.EFF(679,"BULKY WASTE"),e.k0s()(),e.j41(680,"ion-card-content")(681,"div",28)(682,"table",29)(683,"tbody")(684,"tr")(685,"td"),e.EFF(686,"Furniture"),e.k0s(),e.j41(687,"td")(688,"div",32)(689,"ion-button",33),e.bIt("click",function(){return t.decrementTally("furniture")}),e.nrm(690,"ion-icon",34),e.k0s(),e.nrm(691,"ion-input",101),e.j41(692,"ion-button",33),e.bIt("click",function(){return t.incrementTally("furniture")}),e.nrm(693,"ion-icon",36),e.k0s()()()(),e.j41(694,"tr")(695,"td"),e.EFF(696,"Construction debris"),e.k0s(),e.j41(697,"td")(698,"div",32)(699,"ion-button",33),e.bIt("click",function(){return t.decrementTally("constructionDebris")}),e.nrm(700,"ion-icon",34),e.k0s(),e.nrm(701,"ion-input",102),e.j41(702,"ion-button",33),e.bIt("click",function(){return t.incrementTally("constructionDebris")}),e.nrm(703,"ion-icon",36),e.k0s()()()(),e.j41(704,"tr")(705,"td"),e.EFF(706,"Appliances/electronics"),e.k0s(),e.j41(707,"td")(708,"div",32)(709,"ion-button",33),e.bIt("click",function(){return t.decrementTally("appliancesElectronics")}),e.nrm(710,"ion-icon",34),e.k0s(),e.nrm(711,"ion-input",103),e.j41(712,"ion-button",33),e.bIt("click",function(){return t.incrementTally("appliancesElectronics")}),e.nrm(713,"ion-icon",36),e.k0s()()()(),e.j41(714,"tr")(715,"td"),e.EFF(716,"Large plastics"),e.k0s(),e.j41(717,"td")(718,"div",32)(719,"ion-button",33),e.bIt("click",function(){return t.decrementTally("largePlastics")}),e.nrm(720,"ion-icon",34),e.k0s(),e.nrm(721,"ion-input",104),e.j41(722,"ion-button",33),e.bIt("click",function(){return t.incrementTally("largePlastics")}),e.nrm(723,"ion-icon",36),e.k0s()()()(),e.j41(724,"tr")(725,"td"),e.EFF(726,"Treated wood"),e.k0s(),e.j41(727,"td")(728,"div",32)(729,"ion-button",33),e.bIt("click",function(){return t.decrementTally("treatedWood")}),e.nrm(730,"ion-icon",34),e.k0s(),e.nrm(731,"ion-input",105),e.j41(732,"ion-button",33),e.bIt("click",function(){return t.incrementTally("treatedWood")}),e.nrm(733,"ion-icon",36),e.k0s()()()(),e.j41(734,"tr")(735,"td"),e.EFF(736,"Green waste"),e.k0s(),e.j41(737,"td")(738,"div",32)(739,"ion-button",33),e.bIt("click",function(){return t.decrementTally("greenWaste")}),e.nrm(740,"ion-icon",34),e.k0s(),e.nrm(741,"ion-input",106),e.j41(742,"ion-button",33),e.bIt("click",function(){return t.incrementTally("greenWaste")}),e.nrm(743,"ion-icon",36),e.k0s()()()(),e.j41(744,"tr")(745,"td",53)(746,"strong"),e.EFF(747,"Bulky Waste Weight (kg):"),e.k0s(),e.nrm(748,"ion-input",107),e.k0s()()()()()()(),e.j41(749,"ion-card")(750,"ion-card-header",108)(751,"ion-card-title"),e.EFF(752,"ALL TRASH"),e.k0s()(),e.j41(753,"ion-card-content")(754,"div",28)(755,"table",29)(756,"tbody")(757,"tr")(758,"td",79)(759,"strong"),e.EFF(760,"TOTAL WEIGHT (kg):"),e.k0s(),e.nrm(761,"ion-input",109),e.k0s()()()()()()(),e.DNE(762,me,10,1,"div",110)(763,pe,4,0,"div",111),e.k0s()()),2&o){let i,r,g,y,_,v,C,j;e.R7$(8),e.SpI(" ",t.currentDateTime),e.R7$(),e.Y8G("ngIf",(t.viewMode||t.isEditMode)&&t.getEditedDateTime()),e.R7$(6),e.JRh((null==(i=t.cleanupForm.get("location"))?null:i.value)||"Add location"),e.R7$(),e.Y8G("ngIf",!(null!=(r=t.cleanupForm.get("location"))&&r.value||t.viewMode)),e.R7$(),e.Y8G("ngIf",(null==(g=t.cleanupForm.get("zoneNumber"))?null:g.value)&&t.locationHasZones()),e.R7$(),e.Y8G("ngIf",(null==(y=t.cleanupForm.get("quadNumber"))?null:y.value)&&t.locationHasQuads()),e.R7$(),e.Y8G("ngIf",t.isEditMode&&t.currentUser&&t.currentUser.level>=4),e.R7$(),e.Y8G("ngIf",(null==(_=t.cleanupForm.get("location"))?null:_.hasError("required"))&&(null==(_=t.cleanupForm.get("location"))?null:_.touched)),e.R7$(2),e.Y8G("value",t.progress),e.R7$(2),e.SpI(" ",(100*t.progress).toFixed(0),"% Complete "),e.R7$(),e.AVh("view-mode",t.viewMode),e.R7$(),e.Y8G("formGroup",t.cleanupForm),e.R7$(),e.Y8G("ngIf",t.viewMode&&t.currentUser&&t.currentUser.level>=4),e.R7$(),e.Y8G("ngIf",t.isEditMode),e.R7$(13),e.Y8G("ngIf",!(null!=(v=t.cleanupForm.get("team"))&&v.value)),e.R7$(),e.Y8G("ngIf",null==(C=t.cleanupForm.get("team"))?null:C.value),e.R7$(),e.Y8G("ngIf",(null==(j=t.cleanupForm.get("team"))?null:j.hasError("required"))&&(null==(j=t.cleanupForm.get("team"))?null:j.touched)),e.R7$(74),e.Y8G("ngIf",!t.viewMode),e.R7$(2),e.Y8G("ngIf",!t.viewMode),e.R7$(6),e.Y8G("ngIf",!t.viewMode),e.R7$(2),e.Y8G("ngIf",!t.viewMode),e.R7$(6),e.Y8G("ngIf",!t.viewMode),e.R7$(2),e.Y8G("ngIf",!t.viewMode),e.R7$(6),e.Y8G("ngIf",!t.viewMode),e.R7$(2),e.Y8G("ngIf",!t.viewMode),e.R7$(6),e.Y8G("ngIf",!t.viewMode),e.R7$(2),e.Y8G("ngIf",!t.viewMode),e.R7$(6),e.Y8G("ngIf",!t.viewMode),e.R7$(2),e.Y8G("ngIf",!t.viewMode),e.R7$(6),e.Y8G("ngIf",!t.viewMode),e.R7$(2),e.Y8G("ngIf",!t.viewMode),e.R7$(6),e.Y8G("ngIf",!t.viewMode),e.R7$(2),e.Y8G("ngIf",!t.viewMode),e.R7$(6),e.Y8G("ngIf",!t.viewMode),e.R7$(2),e.Y8G("ngIf",!t.viewMode),e.R7$(6),e.Y8G("ngIf",!t.viewMode),e.R7$(2),e.Y8G("ngIf",!t.viewMode),e.R7$(6),e.Y8G("ngIf",!t.viewMode),e.R7$(2),e.Y8G("ngIf",!t.viewMode),e.R7$(563),e.Y8G("ngIf",!t.viewMode),e.R7$(),e.Y8G("ngIf",t.viewMode&&(null==t.currentUser?null:t.currentUser.level)>=4)}},dependencies:[T.bT,F.qT,F.BC,F.cb,F.j4,F.JD,b.Jm,b.QW,b.b_,b.I9,b.ME,b.tN,b.hU,b.W9,b.lO,b.eU,b.iq,b.$w,b.uz,b.he,b.FH,b.ln,b.IO,b.nc,b.BC,b.ai,b.su,b.Gw,b.el,b.T6],styles:[".cleanup-green[_ngcontent-%COMP%]{--background: #4fb3bf;color:#fff}.cleanup-green[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;text-align:center}.cleanup-green.compact-toolbar[_ngcontent-%COMP%]{--min-height: 28px;--padding-top: 5px;--padding-bottom: 5px}.edit-mode-banner[_ngcontent-%COMP%]{padding:.75rem 1rem;margin:.5rem;border-radius:.5rem}.edit-mode-banner[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: .5rem;font-weight:600}.edit-mode-banner.editing[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffc107;display:flex;align-items:center;gap:.5rem;color:#856404;font-weight:500}.edit-mode-banner.editing[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.date-time-text[_ngcontent-%COMP%]{display:block;text-align:center;color:#fffffff2;font-size:14px;padding:0;margin:3px 0;font-weight:400;letter-spacing:.3px;line-height:1.2}.metadata-toolbar[_ngcontent-%COMP%]{--min-height: 40px;--padding-top: 6px;--padding-bottom: 6px}.metadata-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px;padding:0 12px;flex-wrap:wrap}.metadata-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;background:#ffffff26;border-radius:16px;padding:5px 10px;cursor:pointer;transition:all .2s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.metadata-item[_ngcontent-%COMP%]:active{transform:scale(.95);background:#ffffff40}.metadata-icon[_ngcontent-%COMP%]{font-size:14px;color:#ffffffe6;min-width:14px}.metadata-label[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:500;letter-spacing:.2px;white-space:nowrap;max-width:120px;overflow:hidden;text-overflow:ellipsis}.edit-location-link[_ngcontent-%COMP%]{color:#ffffffe6;font-size:11px;text-decoration:underline;cursor:pointer;margin-left:8px;padding:4px 8px}.edit-location-link[_ngcontent-%COMP%]:active{opacity:.7}.status-icon[_ngcontent-%COMP%]{font-size:14px;margin-left:2px}.status-icon.success[_ngcontent-%COMP%]{color:#52a676}.status-icon.required[_ngcontent-%COMP%]{color:#ffd93d;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}.progress-text[_ngcontent-%COMP%]{display:block;text-align:center;color:#fff;font-size:13px;padding:0;margin:0 0 4px;font-weight:400;line-height:1}ion-card[_ngcontent-%COMP%]{margin:16px;border-radius:12px;box-shadow:0 2px 8px #0000001a}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{border-radius:12px 12px 0 0;padding:16px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#fff}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{background:#fff;padding:16px}.cleanup-green[_ngcontent-%COMP%]{--background: #4fb3bf}.plastics-header[_ngcontent-%COMP%]{--background: #D4A73C}.plastics-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#333}.glass-header[_ngcontent-%COMP%]{--background: #4dbba7}.metal-header[_ngcontent-%COMP%]{--background: #52a676}.paper-header[_ngcontent-%COMP%]{--background: #ec7063}.bulky-header[_ngcontent-%COMP%]{--background: #2d8659}.total-header[_ngcontent-%COMP%]{--background: #4fb3bf}.table-container[_ngcontent-%COMP%]{overflow-x:auto;margin:0 -16px}.waste-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.875rem}.waste-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.waste-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 8px;text-align:center;font-weight:600;border:1px solid #ddd;font-size:.875rem}.waste-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #ddd}.waste-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.category-row[_ngcontent-%COMP%]{background:#f4d03f;color:#333;font-weight:700}.waste-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.category-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px}.waste-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover:not(.category-row){background:#f9f9f9}.waste-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;text-align:left;border:1px solid #ddd;vertical-align:middle}.waste-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.weight-cell[_ngcontent-%COMP%]{background:#f0f0f0;font-weight:600}.waste-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.weight-cell[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-right:8px}.waste-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.total-weight-cell[_ngcontent-%COMP%]{background:#e8e8e8;font-weight:700;text-align:center;padding:12px}.tally-control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.tally-control[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 4px;--padding-end: 4px;min-width:32px;height:32px;margin:0}.tally-control[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.tally-control[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:30px;text-align:center;font-weight:600;font-size:.95rem}.tally-control[_ngcontent-%COMP%]   .tally-input[_ngcontent-%COMP%]{max-width:60px;min-width:40px;text-align:center;font-weight:600;font-size:.95rem;--padding-start: 4px;--padding-end: 4px;--padding-top: 4px;--padding-bottom: 4px}.weight-input[_ngcontent-%COMP%]{max-width:120px;display:inline-block;--padding-start: 8px;--padding-end: 8px;font-weight:600}.form-buttons[_ngcontent-%COMP%]{padding:0 16px;margin-top:24px;margin-bottom:32px}.form-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:12px}.form-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-buttons[_ngcontent-%COMP%]   ion-button.save-draft-button[_ngcontent-%COMP%]{margin:10px 0 12px}.form-buttons[_ngcontent-%COMP%]   .save-draft-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-size:1rem;font-weight:500;--background: rgba(107, 124, 122, .1);--border-color: #6b7c7a;--color: #6b7c7a;--background-hover: rgba(107, 124, 122, .2);--background-activated: rgba(107, 124, 122, .3)}.form-buttons[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{margin:0;--border-radius: 8px;height:48px;font-size:1.125rem;font-weight:600;--background: #4fb3bf;--background-hover: #3d8f9a;--background-activated: #3d8f9a}.form-buttons[_ngcontent-%COMP%]   .discard-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-size:1rem;font-weight:500;--color: #e76f51;--border-color: #e76f51;--border-width: 2px;--background-hover: rgba(231, 111, 81, .1);--background-activated: rgba(231, 111, 81, .2);--ripple-color: rgba(231, 111, 81, .3)}.form-buttons[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{margin-top:20px;--background: #d32f2f;--background-hover: #b71c1c;--background-activated: #b71c1c;font-weight:600;height:48px;font-size:1rem}.submit-button[_ngcontent-%COMP%]{margin:24px 16px 32px;--border-radius: 8px;height:48px;font-size:1.125rem;font-weight:600;--background: #4fb3bf;--background-hover: #3d8f9a;--background-activated: #3d8f9a}ion-error[_ngcontent-%COMP%]{color:#e76f51!important;font-size:.75rem!important;margin-top:4px;padding-left:16px}ion-item.item-disabled[_ngcontent-%COMP%], ion-item.item-interactive-disabled[_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important}ion-item.item-disabled[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-item.item-interactive-disabled[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{opacity:1!important;color:#000!important}  .item-disabled,   .item-interactive-disabled{opacity:1!important}  .item-disabled ion-label,   .item-disabled .label-text,   .item-disabled .native-input,   .item-disabled .select-text,   .item-disabled .select-icon,   .item-interactive-disabled ion-label,   .item-interactive-disabled .label-text,   .item-interactive-disabled .native-input,   .item-interactive-disabled .select-text,   .item-interactive-disabled .select-icon{opacity:1!important;color:#000!important}  ion-select.select-disabled{opacity:1!important}  ion-select.select-disabled .select-text,   ion-select.select-disabled .select-icon,   ion-select.select-disabled .select-placeholder{opacity:1!important;color:#000!important}  ion-toggle.toggle-disabled{opacity:1!important}  ion-checkbox.checkbox-disabled{opacity:1!important}  ion-input.input-disabled,   ion-textarea.textarea-disabled{opacity:1!important}  ion-input.input-disabled .native-input,   ion-input.input-disabled .native-textarea,   ion-textarea.textarea-disabled .native-input,   ion-textarea.textarea-disabled .native-textarea{opacity:1!important;color:#000!important;-webkit-text-fill-color:#000!important}  ion-content.view-mode .tally-control ion-button{display:none!important}@media (max-width: 768px){.waste-table[_ngcontent-%COMP%]{font-size:.75rem}.waste-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 4px;font-size:.75rem}.waste-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px;font-size:.75rem}.tally-control[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{min-width:28px;height:28px}.tally-control[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.tally-control[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:24px;font-size:.85rem}}"]}))}return l(),m})()}];let be=(()=>{var l;class m{static#e=l=()=>(this.\u0275fac=function(o){return new(o||m)},this.\u0275mod=e.$C({type:m}),this.\u0275inj=c.G2t({imports:[O.iI.forChild(_e),O.iI]}))}return l(),m})(),ge=(()=>{var l;class m{static#e=l=()=>(this.\u0275fac=function(o){return new(o||m)},this.\u0275mod=e.$C({type:m}),this.\u0275inj=c.G2t({imports:[T.MD,F.YN,F.X1,b.bv,be]}))}return l(),m})()},9187(V,R,f){f.d(R,{C:()=>e});var T=f(467),F=f(2084),b=f(2615),O=f(5029),k=f(918),N=f(8863);let e=(()=>{var c;class P{constructor(a,p,u){this.supabase=a,this.sharedDataService=p,this.monitoringLog=u}deleteEntry(a){var p=this;return(0,T.A)(function*(){console.log("[EntryDeletionService] Starting deletion process for:",a);try{const u=yield p.fetchOriginalEntry(a.tableName,a.reportId);if(!u)throw new Error(`Entry not found in table ${a.tableName} with reportId ${a.reportId}`);console.log("[EntryDeletionService] Original entry fetched:",u);const d=yield p.backupToDeletedFiles(a,u);console.log("[EntryDeletionService] Backup completed:",d),yield p.recordDeletionMetadata(a,d,u),console.log("[EntryDeletionService] Deletion metadata recorded"),yield p.deleteImagesFromBucket(u,a.formType,a.reportId),console.log("[EntryDeletionService] Images deleted from bucket"),yield p.deleteJsonFromStorage(a.formType,a.reportId),console.log("[EntryDeletionService] JSON file deleted from storage"),yield p.deleteFromTable(a.tableName,a.reportId),console.log("[EntryDeletionService] Entry deleted from table"),yield p.deleteLocalFile(a.formType,a.reportId),console.log("[EntryDeletionService] Local file deleted");const h=p.getEntrySummary(u,a.formType);p.monitoringLog.recordFormDeleted(a.deletedBy,a.formType,a.reportId,h),console.log("[EntryDeletionService] \u2705 Deletion process completed successfully")}catch(u){throw console.error("[EntryDeletionService] \u274c Deletion process failed:",u),u}})()}getEntrySummary(a,p){const u=[];return a?.location&&u.push(a.location),a?.zone_number&&u.push(`Z${a.zone_number}`),a?.quad_number&&u.push(`Q${a.quad_number}`),a?.observation_date&&u.push(a.observation_date),u.join(", ")||p}fetchOriginalEntry(a,p){var u=this;return(0,T.A)(function*(){const{data:d,error:h}=yield u.supabase.getClient().from(a).select("*").eq("report_id",p).single();if(h)throw console.error("[EntryDeletionService] Error fetching original entry:",h),h;return d})()}backupToDeletedFiles(a,p){var u=this;return(0,T.A)(function*(){const d=`${a.formType}/${a.reportId}`,h=`${d}/${a.reportId}.json`,E=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),{error:M}=yield u.supabase.getClient().storage.from("deleted_files").upload(h,E);if(M)throw console.error("[EntryDeletionService] Error backing up JSON:",M),M;const w=[],W=u.getImageBucketName(a.formType),G=u.extractImagePathsFromEntry(p,a.formType,a.reportId);for(const S of G)if(S)try{const{data:x,error:$}=yield u.supabase.getClient().storage.from(W).download(S);if($){console.warn("[EntryDeletionService] Could not download image:",S,$);continue}const B=`${d}/${S.split("/").pop()}`,{error:A}=yield u.supabase.getClient().storage.from("deleted_files").upload(B,x);A?console.warn("[EntryDeletionService] Could not backup image:",B,A):w.push(B)}catch(x){console.warn("[EntryDeletionService] Error processing image:",x)}return{backupFolderPath:d,jsonBackupPath:h,imageBackupPaths:w}})()}recordDeletionMetadata(a,p,u){var d=this;return(0,T.A)(function*(){const h={original_entry:u,backup_paths:{json:p.jsonBackupPath,images:p.imageBackupPaths},deletion_timestamp:(0,F.E)()},{error:E}=yield d.supabase.getClient().from("deleted_metadata_files").insert({original_report_id:a.reportId,form_type:a.formType,deleted_by:a.deletedBy,deleted_by_email:a.deletedByEmail,original_submitted_by:a.originalSubmittedBy||u.submittedBy,original_submitted_at:a.originalSubmittedAt||u.createdAt,backup_folder_path:p.backupFolderPath,original_table_name:a.tableName,original_storage_path:d.getStoragePath(a.tableName,a.reportId),metadata:h});if(E)throw console.error("[EntryDeletionService] Error recording deletion metadata:",E),E})()}deleteImagesFromBucket(a,p,u){var d=this;return(0,T.A)(function*(){const h=d.getImageBucketName(p),E=d.extractImagePathsFromEntry(a,p,u);for(const M of E)if(M)try{const{error:w}=yield d.supabase.getClient().storage.from(h).remove([M]);w&&console.warn("[EntryDeletionService] Could not delete image:",M,w)}catch(w){console.warn("[EntryDeletionService] Error deleting image:",w)}})()}deleteJsonFromStorage(a,p){var u=this;return(0,T.A)(function*(){const d=u.getReportsBucketName(a),h=`${p}.json`,{error:E}=yield u.supabase.getClient().storage.from(d).remove([h]);E&&console.warn("[EntryDeletionService] Could not delete JSON from storage:",h,E)})()}deleteFromTable(a,p){var u=this;return(0,T.A)(function*(){const{error:d}=yield u.supabase.getClient().from(a).delete().eq("report_id",p);if(d)throw console.error("[EntryDeletionService] Error deleting from table:",d),d})()}deleteLocalFile(a,p){var u=this;return(0,T.A)(function*(){try{const d=u.getLocalFileName(a,p);yield u.sharedDataService.deleteJsonFile(d)}catch(d){console.warn("[EntryDeletionService] Could not delete local file:",d)}})()}getReportsBucketName(a){return a}getImageBucketName(a){return{"flora-fauna":"flora-fauna-images",biomass:"biomass-images",health:"health-images",outplanting:"outplanting-images",restoration:"restoration-images",cleanup:"cleanup-images",pollution:"pollution-images",disturbances:"disturbances-images"}[a]||`${a}-images`}extractImagePathsFromEntry(a,p,u){const d=[];if("health"===p)return d.push(`${u}/soil.jpg`),d.push(`${u}/predation.jpg`),d.push(`${u}/pollution.jpg`),d;if("pollution"===p){d.push(`${u}/greyWater.jpg`),d.push(`${u}/trash.jpg`),d.push(`${u}/sewage.jpg`);for(let h=1;h<=10;h++)d.push(`${u}/photo_${h}.jpg`);return d}if("disturbances"===p)return d.push(`${u}/harvest.jpg`),d.push(`${u}/clearing.jpg`),d.push(`${u}/construction.jpg`),d.push(`${u}/fallenTree.jpg`),d.push(`${u}/erosion.jpg`),d.push(`${u}/accretion.jpg`),d.push(`${u}/diseases.jpg`),d;for(let h=1;h<=20;h++)d.push(`${u}/photo_${h}.jpg`);return d}getStoragePath(a,p){return`${a}/${p}.json`}getLocalFileName(a,p){return`${p}.json`}static#e=c=()=>(this.\u0275fac=function(p){return new(p||P)(b.KVO(O.L),b.KVO(k.H),b.KVO(N.u))},this.\u0275prov=b.jDH({token:P,factory:P.\u0275fac,providedIn:"root"}))}return c(),P})()}}]);