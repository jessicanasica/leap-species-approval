"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6637],{6637(je,I,d){d.d(I,{LocationHealthPageModule:()=>we});var M=d(2200),b=d(4341),p=d(7343),S=d(8132),g=d(467),O=d(7762),e=d(3664),c=d(2615),F=d(5921),E=d(5032),R=d(8060),Z=d(7643),T=d(3205),H=d(5029),$=d(5010),D=d(7863),q=d(4718),v=d(5676),w=d(8220),k=d(582),j=d(3010),N=d(8736);const h=a=>[a],x=()=>[];function X(a,s){if(1&a&&(e.j41(0,"ion-select-option",17),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t.name),e.R7$(),e.SpI(" ",t.name," ")}}function B(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",35),e.nrm(1,"img",36),e.j41(2,"ion-button",37),e.bIt("click",function(){c.eBV(t);const o=e.XpG(2);return c.Njj(o.removeSitePhoto())}),e.nrm(3,"ion-icon",38),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(),e.Y8G("src",t.sitePhoto,e.B4B)}}function V(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",39),e.nrm(1,"img",40),e.j41(2,"ion-button",37),e.bIt("click",function(){c.eBV(t);const o=e.XpG(2);return c.Njj(o.removeSiteMap())}),e.nrm(3,"ion-icon",38),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(),e.Y8G("src",t.siteMap,e.B4B)}}function Y(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",18)(1,"ion-card",19)(2,"ion-card-content")(3,"h3",20),e.EFF(4,"New Site Information"),e.k0s(),e.j41(5,"p",9),e.EFF(6,"Enter details for the new site"),e.k0s(),e.j41(7,"ion-item",21)(8,"ion-input",22),e.mxI("ngModelChange",function(o){c.eBV(t);const i=e.XpG();return e.DH7(i.newSiteName,o)||(i.newSiteName=o),c.Njj(o)}),e.k0s()(),e.j41(9,"ion-item",21)(10,"ion-input",23),e.mxI("ngModelChange",function(o){c.eBV(t);const i=e.XpG();return e.DH7(i.newSiteDescription,o)||(i.newSiteDescription=o),c.Njj(o)}),e.k0s()(),e.j41(11,"ion-button",24),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.captureGPSCoordinates())}),e.nrm(12,"ion-icon",25),e.EFF(13),e.k0s(),e.j41(14,"ion-row",26)(15,"ion-col",27)(16,"ion-button",28),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.captureSitePhoto())}),e.nrm(17,"ion-icon",29),e.EFF(18),e.k0s()(),e.j41(19,"ion-col",27)(20,"ion-button",28),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.uploadSiteMap())}),e.nrm(21,"ion-icon",30),e.EFF(22),e.k0s()()(),e.DNE(23,B,4,1,"div",31)(24,V,4,1,"div",32),e.nrm(25,"br"),e.j41(26,"ion-button",33),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.submitNewSite())}),e.nrm(27,"ion-icon",34),e.EFF(28," Add New Site "),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(8),e.R50("ngModel",t.newSiteName),e.R7$(2),e.R50("ngModel",t.newSiteDescription),e.R7$(3),e.SpI(" ",t.gpsCoordinates?"GPS Captured: "+t.gpsCoordinates.latitude.toFixed(6)+", "+t.gpsCoordinates.longitude.toFixed(6):"Take GPS Coordinates"," "),e.R7$(5),e.SpI(" ",t.sitePhoto?"Photo Captured":"Take Site Photo"," "),e.R7$(4),e.SpI(" ",t.siteMap?"Map Uploaded":"Upload Site Map"," "),e.R7$(),e.Y8G("ngIf",t.sitePhoto),e.R7$(),e.Y8G("ngIf",t.siteMap),e.R7$(2),e.Y8G("disabled",!t.newSiteName||!t.gpsCoordinates)}}function A(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",35),e.nrm(1,"img",36),e.j41(2,"ion-button",37),e.bIt("click",function(){c.eBV(t);const o=e.XpG(2);return c.Njj(o.removeEditSitePhoto())}),e.nrm(3,"ion-icon",38),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(),e.Y8G("src",t.editSitePhoto,e.B4B)}}function U(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",39),e.nrm(1,"img",40),e.j41(2,"ion-button",37),e.bIt("click",function(){c.eBV(t);const o=e.XpG(2);return c.Njj(o.removeEditSiteMap())}),e.nrm(3,"ion-icon",38),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(),e.Y8G("src",t.editSiteMap,e.B4B)}}function K(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",18)(1,"ion-card",19)(2,"ion-card-content")(3,"div",41)(4,"h3",20),e.EFF(5,"Edit Site Information"),e.k0s(),e.j41(6,"ion-badge",42),e.EFF(7,"Admin Only"),e.k0s()(),e.j41(8,"p",9),e.EFF(9,"Modify site details (L4+ users only)"),e.k0s(),e.j41(10,"ion-item",21)(11,"ion-input",22),e.mxI("ngModelChange",function(o){c.eBV(t);const i=e.XpG();return e.DH7(i.editSiteName,o)||(i.editSiteName=o),c.Njj(o)}),e.k0s()(),e.j41(12,"ion-item",21)(13,"ion-input",43),e.mxI("ngModelChange",function(o){c.eBV(t);const i=e.XpG();return e.DH7(i.editSiteDescription,o)||(i.editSiteDescription=o),c.Njj(o)}),e.k0s()(),e.j41(14,"ion-button",24),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.captureEditGPS())}),e.nrm(15,"ion-icon",25),e.EFF(16),e.k0s(),e.j41(17,"ion-row",26)(18,"ion-col",27)(19,"ion-button",28),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.captureEditSitePhoto())}),e.nrm(20,"ion-icon",29),e.EFF(21),e.k0s()(),e.j41(22,"ion-col",27)(23,"ion-button",28),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.uploadEditSiteMap())}),e.nrm(24,"ion-icon",30),e.EFF(25),e.k0s()()(),e.DNE(26,A,4,1,"div",31)(27,U,4,1,"div",32),e.nrm(28,"br"),e.j41(29,"ion-row",26)(30,"ion-col",27)(31,"ion-button",44),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.cancelEditSite())}),e.nrm(32,"ion-icon",45),e.EFF(33," Cancel "),e.k0s()(),e.j41(34,"ion-col",27)(35,"ion-button",46),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.saveEditSite())}),e.nrm(36,"ion-icon",47),e.EFF(37," Save Changes "),e.k0s()()(),e.j41(38,"ion-row",48)(39,"ion-col",49)(40,"ion-button",50),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.deleteEditSite())}),e.nrm(41,"ion-icon",51),e.EFF(42," Delete Site "),e.k0s()()()()()()}if(2&a){const t=e.XpG();e.R7$(11),e.R50("ngModel",t.editSiteName),e.R7$(2),e.R50("ngModel",t.editSiteDescription),e.R7$(3),e.SpI(" ",t.editGpsCoordinates?"GPS: "+t.editGpsCoordinates.latitude.toFixed(6)+", "+t.editGpsCoordinates.longitude.toFixed(6):"Update GPS Coordinates"," "),e.R7$(5),e.SpI(" ",t.editSitePhoto?"Photo Set":"New Photo"," "),e.R7$(4),e.SpI(" ",t.editSiteMap?"Map Set":"New Map"," "),e.R7$(),e.Y8G("ngIf",t.editSitePhoto),e.R7$(),e.Y8G("ngIf",t.editSiteMap),e.R7$(8),e.Y8G("disabled",!t.editSiteName)}}function Q(a,s){1&a&&(e.j41(0,"span"),e.EFF(1,"Click zones or quads to select"),e.k0s())}function J(a,s){1&a&&(e.j41(0,"span"),e.EFF(1,"Click quads to select"),e.k0s())}function W(a,s){1&a&&(e.j41(0,"span"),e.EFF(1,"Click zones to select"),e.k0s())}function ee(a,s){if(1&a&&(e.j41(0,"div",68),e.nrm(1,"ion-icon",69),e.DNE(2,Q,2,0,"span",70)(3,J,2,0,"span",70)(4,W,2,0,"span",70),e.k0s()),2&a){const t=e.XpG(2);e.R7$(2),e.Y8G("ngIf",t.currentZones.length>0&&t.currentSamplePoints.length>0),e.R7$(),e.Y8G("ngIf",0===t.currentZones.length&&t.currentSamplePoints.length>0),e.R7$(),e.Y8G("ngIf",t.currentZones.length>0&&0===t.currentSamplePoints.length)}}function te(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",71)(1,"ion-button",72),e.bIt("click",function(){c.eBV(t);const o=e.XpG(2);return c.Njj(o.startEditSite())}),e.nrm(2,"ion-icon",73),e.EFF(3," Edit Site (Admin) "),e.k0s()()}}function ne(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-interactive-location-map",74),e.bIt("zoneSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onZoneSelected(o))})("samplePointSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onSamplePointSelected(o))}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("mapImagePath",t.currentMapPath)("zones",t.currentZones)("samplePoints",t.currentSamplePoints)("selectedZones",t.selectedZone?e.eq3(4,h,t.selectedZone):e.lJ4(6,x))}}function oe(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-caiman-interactive-map",75),e.bIt("samplePointSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onSamplePointSelected(o))}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("mapImagePath",t.currentMapPath)("samplePoints",t.currentSamplePoints)("selectedSamplePoints",t.selectedQuad?e.eq3(3,h,t.selectedQuad):e.lJ4(5,x))}}function ie(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-canopy-interactive-map",75),e.bIt("samplePointSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onSamplePointSelected(o))}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("mapImagePath",t.currentMapPath)("samplePoints",t.currentSamplePoints)("selectedSamplePoints",t.selectedQuad?e.eq3(3,h,t.selectedQuad):e.lJ4(5,x))}}function ae(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-grand-anse-interactive-map",76),e.bIt("zoneSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onZoneSelected(o))})("samplePointSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onSamplePointSelected(o))}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("mapImagePath",t.currentMapPath)("zones",t.currentZones)("samplePoints",t.currentSamplePoints)("selectedZones",t.selectedZone?e.eq3(5,h,t.selectedZone):e.lJ4(7,x))("selectedSamplePoints",t.selectedQuad?e.eq3(8,h,t.selectedQuad):e.lJ4(10,x))}}function ce(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-petit-barbarons-interactive-map",77),e.bIt("zoneSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onZoneSelected(o))}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("mapImagePath",t.currentMapPath)("zones",t.currentZones)("selectedZones",t.selectedZone?e.eq3(3,h,t.selectedZone):e.lJ4(5,x))}}function se(a,s){if(1&a&&e.nrm(0,"img",78),2&a){const t=e.XpG(2);e.Y8G("src",t.currentMapPath,e.B4B)("alt",t.selectedLocation+" map")}}function re(a,s){1&a&&(e.j41(0,"h3",20),e.EFF(1," Assessment Details"),e.k0s())}function le(a,s){if(1&a){const t=e.RV6();e.j41(0,"ion-item",21)(1,"ion-input",79),e.mxI("ngModelChange",function(o){c.eBV(t);const i=e.XpG(2);return e.DH7(i.zoneNumber,o)||(i.zoneNumber=o),c.Njj(o)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.AVh("disabled-item","Caiman"===t.selectedLocation||"Canopy"===t.selectedLocation),e.R7$(),e.R50("ngModel",t.zoneNumber),e.Y8G("placeholder","Caiman"===t.selectedLocation||"Canopy"===t.selectedLocation?"Not applicable":"Enter zone number (required)")("disabled","Caiman"===t.selectedLocation||"Canopy"===t.selectedLocation)}}function de(a,s){if(1&a){const t=e.RV6();e.j41(0,"ion-item",21)(1,"ion-input",80),e.mxI("ngModelChange",function(o){c.eBV(t);const i=e.XpG(2);return e.DH7(i.quadNumber,o)||(i.quadNumber=o),c.Njj(o)}),e.bIt("ionInput",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onQuadInput(o))}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(),e.R50("ngModel",t.quadNumber),e.Y8G("disabled","Petit Barbarons"===t.selectedLocation)}}function pe(a,s){if(1&a&&(e.j41(0,"ion-item",21)(1,"ion-label",81),e.EFF(2,"Site Description"),e.k0s(),e.j41(3,"p",82),e.EFF(4),e.k0s()()),2&a){const t=e.XpG(2);e.R7$(4),e.JRh(t.selectedSiteDescription)}}function me(a,s){1&a&&(e.j41(0,"span"),e.EFF(1,"Please select both a zone and quad on the map"),e.k0s())}function _e(a,s){1&a&&(e.j41(0,"span"),e.EFF(1,"Please select a quad on the map"),e.k0s())}function ge(a,s){1&a&&(e.j41(0,"span"),e.EFF(1,"Please select a zone on the map"),e.k0s())}function ue(a,s){if(1&a&&(e.j41(0,"div",83),e.nrm(1,"ion-icon",84),e.DNE(2,me,2,0,"span",70)(3,_e,2,0,"span",70)(4,ge,2,0,"span",70),e.k0s()),2&a){const t=e.XpG(2);e.R7$(2),e.Y8G("ngIf",t.currentZones.length>0&&t.currentSamplePoints.length>0),e.R7$(),e.Y8G("ngIf",0===t.currentZones.length&&t.currentSamplePoints.length>0),e.R7$(),e.Y8G("ngIf",t.currentZones.length>0&&0===t.currentSamplePoints.length)}}function he(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",18),e.DNE(1,ee,5,3,"div",52)(2,te,4,0,"div",53),e.j41(3,"ion-card",54)(4,"ion-card-content",55)(5,"div",56),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.openMapModal())}),e.nrm(6,"ion-icon",57),e.k0s(),e.DNE(7,ne,1,7,"app-interactive-location-map",58)(8,oe,1,6,"app-caiman-interactive-map",59)(9,ie,1,6,"app-canopy-interactive-map",59)(10,ae,1,11,"app-grand-anse-interactive-map",60)(11,ce,1,6,"app-petit-barbarons-interactive-map",61)(12,se,1,2,"img",62),e.k0s()(),e.j41(13,"ion-card",19)(14,"ion-card-content"),e.DNE(15,re,2,0,"h3",63)(16,le,2,5,"ion-item",64)(17,de,2,2,"ion-item",65)(18,pe,5,1,"ion-item",65)(19,ue,5,3,"div",66),e.j41(20,"ion-button",46),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.startAssessment())}),e.nrm(21,"ion-icon",67),e.EFF(22," Start Assessment "),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.showMap&&(t.currentZones.length>0||t.currentSamplePoints.length>0)),e.R7$(),e.Y8G("ngIf",t.canEditSelectedSite()),e.R7$(5),e.Y8G("ngIf",t.currentZones.length>0&&"Ramsar"===t.selectedLocation),e.R7$(),e.Y8G("ngIf","Caiman"===t.selectedLocation),e.R7$(),e.Y8G("ngIf","Canopy"===t.selectedLocation),e.R7$(),e.Y8G("ngIf","Grand Anse"===t.selectedLocation),e.R7$(),e.Y8G("ngIf",t.currentZones.length>0&&"Petit Barbarons"===t.selectedLocation),e.R7$(),e.Y8G("ngIf",0===t.currentZones.length&&"Caiman"!==t.selectedLocation&&"Canopy"!==t.selectedLocation),e.R7$(3),e.Y8G("ngIf","Kempinski"!==t.selectedLocation&&"Roche Caiman"!==t.selectedLocation&&("new"===t.selectedLocation||t.isPredefinedSite(t.selectedLocation))),e.R7$(),e.Y8G("ngIf",!t.showNewSiteForm&&t.currentZones.length>0),e.R7$(),e.Y8G("ngIf",!t.showNewSiteForm&&t.currentSamplePoints.length>0),e.R7$(),e.Y8G("ngIf",t.selectedLocation&&!t.showNewSiteForm&&0===t.currentZones.length&&0===t.currentSamplePoints.length&&t.selectedSiteDescription&&!t.isPredefinedSite(t.selectedLocation)),e.R7$(),e.Y8G("ngIf",t.selectedLocation&&!t.isSelectionValid()&&!t.showNewSiteForm&&(t.currentZones.length>0||t.currentSamplePoints.length>0)),e.R7$(),e.Y8G("disabled",!t.isSelectionValid()&&!t.showNewSiteForm&&(t.currentZones.length>0||t.currentSamplePoints.length>0))}}function xe(a,s){1&a&&(e.j41(0,"div",85)(1,"ion-card",86)(2,"ion-card-content")(3,"div",87),e.nrm(4,"ion-icon",88),e.j41(5,"h4"),e.EFF(6,"How to Begin"),e.k0s()(),e.j41(7,"ul")(8,"li"),e.EFF(9,"Select a "),e.j41(10,"strong",89),e.EFF(11,"known site"),e.k0s(),e.EFF(12," to view its map or enter a "),e.j41(13,"strong",89),e.EFF(14,"new site"),e.k0s(),e.EFF(15," to create a custom location"),e.k0s(),e.j41(16,"li"),e.EFF(17,"Tap the map or fill out new site information to start your assessment"),e.k0s()()()()())}function ye(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-interactive-location-map",102),e.bIt("zoneSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onZoneSelected(o))})("samplePointSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onSamplePointSelected(o))}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("mapImagePath",t.currentMapPath)("zones",t.currentZones)("samplePoints",t.currentSamplePoints)("selectedZones",t.selectedZone?e.eq3(4,h,t.selectedZone):e.lJ4(6,x))}}function Pe(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-caiman-interactive-map",103),e.bIt("samplePointSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onSamplePointSelected(o))}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("mapImagePath",t.currentMapPath)("samplePoints",t.currentSamplePoints)("selectedSamplePoints",t.selectedQuad?e.eq3(3,h,t.selectedQuad):e.lJ4(5,x))}}function fe(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-canopy-interactive-map",103),e.bIt("samplePointSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onSamplePointSelected(o))}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("mapImagePath",t.currentMapPath)("samplePoints",t.currentSamplePoints)("selectedSamplePoints",t.selectedQuad?e.eq3(3,h,t.selectedQuad):e.lJ4(5,x))}}function Ce(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-grand-anse-interactive-map",104),e.bIt("zoneSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onZoneSelected(o))}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("mapImagePath",t.currentMapPath)("zones",t.currentZones)("selectedZones",t.selectedZone?e.eq3(3,h,t.selectedZone):e.lJ4(5,x))}}function Me(a,s){if(1&a){const t=e.RV6();e.j41(0,"app-petit-barbarons-interactive-map",104),e.bIt("zoneSelected",function(o){c.eBV(t);const i=e.XpG(2);return c.Njj(i.onZoneSelected(o))}),e.k0s()}if(2&a){const t=e.XpG(2);e.Y8G("mapImagePath",t.currentMapPath)("zones",t.currentZones)("selectedZones",t.selectedZone?e.eq3(3,h,t.selectedZone):e.lJ4(5,x))}}function be(a,s){if(1&a&&e.nrm(0,"img",105),2&a){const t=e.XpG(2);e.Y8G("src",t.currentMapPath,e.B4B)("alt",t.selectedLocation+" map")}}function Se(a,s){if(1&a){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar",90)(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",91)(5,"ion-button",92),e.bIt("click",function(){c.eBV(t);const o=e.XpG();return c.Njj(o.closeMapModal())}),e.nrm(6,"ion-icon",93),e.k0s()()()(),e.j41(7,"ion-content",94)(8,"div",95)(9,"p",96),e.nrm(10,"ion-icon",97),e.EFF(11," Rotate device for full-screen view "),e.k0s(),e.DNE(12,ye,1,7,"app-interactive-location-map",98)(13,Pe,1,6,"app-caiman-interactive-map",99)(14,fe,1,6,"app-canopy-interactive-map",99)(15,Ce,1,6,"app-grand-anse-interactive-map",100)(16,Me,1,6,"app-petit-barbarons-interactive-map",100)(17,be,1,2,"img",101),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(3),e.SpI("",t.selectedLocation," Map"),e.R7$(9),e.Y8G("ngIf",t.currentZones.length>0&&"Ramsar"===t.selectedLocation),e.R7$(),e.Y8G("ngIf","Caiman"===t.selectedLocation),e.R7$(),e.Y8G("ngIf","Canopy"===t.selectedLocation),e.R7$(),e.Y8G("ngIf",t.currentZones.length>0&&"Grand Anse"===t.selectedLocation),e.R7$(),e.Y8G("ngIf",t.currentZones.length>0&&"Petit Barbarons"===t.selectedLocation),e.R7$(),e.Y8G("ngIf",0===t.currentZones.length&&"Caiman"!==t.selectedLocation&&"Canopy"!==t.selectedLocation)}}const Oe=[{path:"",component:(()=>{var a;class s{constructor(n,o,i,r,l,_,m,y,C,u){this.router=n,this.modalController=o,this.alertController=i,this.platform=r,this.healthSyncService=l,this.siteSyncService=_,this.auth=m,this.supabase=y,this.photoService=C,this.imageCompression=u,this.selectedLocation="",this.showMap=!1,this.currentMapPath="",this.zoneNumber="",this.quadNumber="",this.isMapModalOpen=!1,this.showNewSiteForm=!1,this.newSiteName="",this.newSiteDescription="",this.gpsCoordinates=null,this.sitePhoto=null,this.siteMap=null,this.isEditingSite=!1,this.editSiteName="",this.editSiteDescription="",this.editGpsCoordinates=null,this.editSitePhoto=null,this.editSiteMap=null,this.editingSiteOriginalName="",this.selectedZone="",this.currentZones=[],this.currentSamplePoints=[],this.selectedSiteDescription="",this.currentUser=null,this.userSubscription=null,this.knownSites=[{name:"Ramsar",mapPath:"assets/maps/ramsar_plots.webp",zones:[{id:"zone1",name:"Zone 1",points:[{x:-140,y:75},{x:-110,y:80},{x:-65,y:75},{x:-60,y:88},{x:0,y:106},{x:25,y:100},{x:37,y:87},{x:45,y:91},{x:65,y:93},{x:80,y:110},{x:105,y:112},{x:108,y:120},{x:155,y:133},{x:180,y:155},{x:170,y:160},{x:150,y:150},{x:130,y:142},{x:95,y:158},{x:89,y:170},{x:90,y:200},{x:80,y:220},{x:35,y:230},{x:-30,y:235},{x:-84,y:253},{x:-75,y:190},{x:-80,y:160},{x:-135,y:130},{x:-137,y:93},{x:-145,y:77}]},{id:"zone2",name:"Zone 2",points:[{x:-82,y:273},{x:-70,y:253},{x:-40,y:245},{x:-5,y:240},{x:40,y:233},{x:80,y:222},{x:105,y:200},{x:120,y:190},{x:140,y:175},{x:160,y:165},{x:235,y:170},{x:225,y:180},{x:215,y:190},{x:200,y:230},{x:187,y:240},{x:187,y:255},{x:215,y:300},{x:235,y:320},{x:250,y:340},{x:255,y:380},{x:253,y:400},{x:240,y:420},{x:265,y:445},{x:267,y:468},{x:250,y:483},{x:230,y:480},{x:240,y:455},{x:222,y:445},{x:210,y:430},{x:190,y:440},{x:175,y:425},{x:145,y:425},{x:125,y:433},{x:105,y:420},{x:95,y:390},{x:55,y:335},{x:40,y:335},{x:-10,y:350},{x:-30,y:340},{x:-65,y:315}]},{id:"zone3",name:"Zone 3",points:[{x:-5,y:465},{x:-5,y:457},{x:20,y:470},{x:30,y:473},{x:40,y:475},{x:50,y:470},{x:60,y:473},{x:85,y:468},{x:93,y:455},{x:113,y:463},{x:123,y:458},{x:138,y:470},{x:180,y:465},{x:184,y:469},{x:174,y:488},{x:185,y:505},{x:202,y:515},{x:220,y:492},{x:232,y:490},{x:228,y:524},{x:243,y:546},{x:283,y:554},{x:291,y:551},{x:300,y:558},{x:300,y:564},{x:290,y:562},{x:280,y:567},{x:260,y:567},{x:240,y:569},{x:217,y:566},{x:204,y:557},{x:194,y:557},{x:163,y:540},{x:158,y:525},{x:150,y:510},{x:135,y:505},{x:135,y:500},{x:113,y:500},{x:108,y:495},{x:92,y:495},{x:88,y:490},{x:75,y:484},{x:60,y:484},{x:40,y:483},{x:20,y:477}]},{id:"zone4",name:"Zone 4",points:[{x:382,y:65},{x:386,y:65},{x:401,y:82},{x:423,y:87},{x:427,y:80},{x:437,y:78},{x:450,y:75},{x:460,y:90},{x:475,y:117},{x:491,y:130},{x:485,y:137},{x:453,y:140},{x:450,y:150},{x:425,y:153},{x:351,y:146},{x:337,y:148},{x:317,y:149},{x:321,y:141},{x:321,y:138},{x:313,y:135},{x:310,y:115},{x:330,y:112},{x:340,y:97}]},{id:"zone5",name:"Zone 5",points:[{x:217,y:195},{x:245,y:165},{x:255,y:165},{x:257,y:160},{x:290,y:160},{x:305,y:152},{x:355,y:150},{x:395,y:155},{x:400,y:165},{x:415,y:165},{x:420,y:171},{x:430,y:169},{x:430,y:174},{x:458,y:188},{x:490,y:185},{x:540,y:200},{x:540,y:215},{x:530,y:218},{x:495,y:213},{x:465,y:222},{x:430,y:245},{x:415,y:245},{x:385,y:230},{x:370,y:215},{x:350,y:218},{x:332,y:215},{x:325,y:208},{x:290,y:205},{x:280,y:225},{x:260,y:240},{x:230,y:244},{x:225,y:230},{x:202,y:230}]},{id:"zone6",name:"Zone 6",points:[{x:606,y:100},{x:612,y:100},{x:622,y:108},{x:637,y:106},{x:642,y:112},{x:647,y:110},{x:667,y:112},{x:693,y:114},{x:725,y:105},{x:745,y:123},{x:748,y:165},{x:726,y:185},{x:715,y:195},{x:692,y:214},{x:672,y:210},{x:657,y:212},{x:642,y:232},{x:636,y:232},{x:618,y:202},{x:607,y:218},{x:566,y:191},{x:580,y:170},{x:583,y:162},{x:569,y:141},{x:571,y:129},{x:596,y:125}]}],samplePoints:[{id:"quad1",x:-77,y:110},{id:"quad2",x:-15,y:132},{id:"quad3",x:50,y:150},{id:"quad4",x:352,y:123},{id:"quad5",x:405,y:129},{id:"quad6",x:385,y:165},{id:"quad7",x:441,y:190},{id:"quad8",x:618,y:137},{id:"quad9",x:711,y:125},{id:"quad10",x:690,y:195},{id:"quad11",x:362,y:187},{id:"quad12",x:329,y:182},{id:"quad13",x:107,y:210},{id:"quad14",x:153,y:184},{id:"quad15",x:194,y:210},{id:"quad16",x:12,y:255},{id:"quad17",x:240,y:432},{id:"quad18",x:136,y:423},{id:"quad19",x:233,y:545},{id:"quad20",x:-55,y:290},{id:"quad21",x:197,y:289},{id:"quad22",x:147,y:335},{id:"quad23",x:198,y:361},{id:"quad24",x:235,y:225},{id:"quad25",x:-47,y:253},{id:"quad26",x:182,y:515},{id:"quad27",x:67,y:298},{id:"quad28",x:127,y:370},{id:"quad29",x:158,y:208},{id:"quad30",x:268,y:190}]},{name:"Caiman",mapPath:"assets/maps/Caiman_quad_map.webp",samplePoints:[{id:"quad1",x:506,y:207},{id:"quad2",x:406,y:290},{id:"quad3",x:319,y:348},{id:"quad4",x:321,y:292},{id:"quad5",x:420,y:350,label:"5"}]},{name:"Canopy",mapPath:"assets/maps/Canopy_quad_map.webp",samplePoints:[{id:"quad1",x:340,y:410},{id:"quad2",x:249,y:423},{id:"quad3",x:530,y:319},{id:"quad4",x:355,y:105}]},{name:"Grand Anse",mapPath:"assets/maps/GA_quad_map.webp",zones:[{id:"zone1",name:"Zone 1",points:[{x:-200,y:315},{x:-175,y:300},{x:-145,y:300},{x:-60,y:313},{x:-55,y:323},{x:64,y:290},{x:154,y:290},{x:170,y:285},{x:210,y:298},{x:240,y:293},{x:260,y:298},{x:270,y:293},{x:275,y:294},{x:285,y:350},{x:242,y:345},{x:125,y:370},{x:75,y:374},{x:35,y:374},{x:15,y:382},{x:0,y:405},{x:-5,y:405},{x:-30,y:380},{x:-90,y:390},{x:-105,y:388},{x:-160,y:397},{x:-198,y:407},{x:-250,y:430},{x:-270,y:430}]},{id:"zone2",name:"Zone 2",points:[{x:140,y:148},{x:150,y:147},{x:182,y:113},{x:196,y:118},{x:209,y:131},{x:235,y:128},{x:265,y:105},{x:282,y:100},{x:292,y:105},{x:310,y:100},{x:360,y:115},{x:370,y:123},{x:380,y:120},{x:405,y:165},{x:400,y:197},{x:390,y:203},{x:390,y:223},{x:385,y:228},{x:390,y:268},{x:382,y:275},{x:370,y:275},{x:377,y:295},{x:398,y:298},{x:400,y:305},{x:415,y:307},{x:451,y:315},{x:497,y:340},{x:530,y:390},{x:545,y:405},{x:545,y:415},{x:532,y:433},{x:435,y:375},{x:385,y:350},{x:355,y:343},{x:287,y:350},{x:275,y:295},{x:295,y:290},{x:313,y:257},{x:300,y:247},{x:293,y:227},{x:298,y:222},{x:283,y:212},{x:240,y:215},{x:238,y:227},{x:174,y:243}]},{id:"zone3",name:"Zone 3",points:[{x:400,y:135},{x:425,y:110},{x:435,y:110},{x:462,y:150},{x:485,y:155},{x:490,y:165},{x:520,y:170},{x:520,y:185},{x:535,y:188},{x:560,y:196},{x:575,y:183},{x:670,y:203},{x:688,y:194},{x:741,y:195},{x:733,y:185},{x:733,y:170},{x:740,y:153},{x:760,y:155},{x:767,y:160},{x:758,y:185},{x:767,y:212},{x:802,y:205},{x:832,y:230},{x:830,y:190},{x:850,y:170},{x:927,y:195},{x:925,y:200},{x:955,y:243},{x:955,y:263},{x:945,y:273},{x:872,y:260},{x:872,y:275},{x:845,y:320},{x:835,y:325},{x:777,y:329},{x:725,y:364},{x:680,y:345},{x:680,y:345},{x:680,y:300},{x:665,y:258},{x:635,y:250},{x:605,y:232},{x:595,y:205},{x:583,y:205},{x:583,y:210},{x:535,y:217},{x:523,y:215},{x:500,y:190},{x:480,y:190},{x:450,y:173},{x:420,y:173},{x:408,y:163}]},{id:"zone4",name:"Zone 4",points:[{x:545,y:483},{x:579,y:475},{x:573,y:460},{x:540,y:448},{x:540,y:445},{x:525,y:440},{x:525,y:430},{x:531,y:433},{x:546,y:413},{x:590,y:440},{x:623,y:444},{x:648,y:420},{x:635,y:415},{x:635,y:405},{x:650,y:402},{x:663,y:370},{x:670,y:370},{x:670,y:345},{x:680,y:345},{x:725,y:364},{x:683,y:427},{x:715,y:443},{x:715,y:460},{x:695,y:475},{x:662,y:460},{x:650,y:475},{x:610,y:495},{x:540,y:495}]}],samplePoints:[{id:"ga1",x:130,y:357},{id:"ga2",x:-6,y:356},{id:"ga3",x:60,y:340},{id:"ga4",x:128,y:326},{id:"ga5",x:308,y:304},{id:"ga6",x:353,y:275},{id:"ga7",x:347,y:225},{id:"ga8",x:299,y:193},{id:"ga9",x:368,y:158},{id:"ga10",x:294,y:137},{id:"ga11",x:907,y:259},{id:"ga12",x:850,y:235},{id:"ga13",x:855,y:280},{id:"ga14",x:810,y:304},{id:"ga15",x:736,y:325},{id:"ga16",x:704,y:265},{id:"ga17",x:750,y:239},{id:"ga18",x:650,y:226},{id:"ga19",x:682,y:392},{id:"ga20",x:671,y:447},{id:"ga21",x:447,y:352},{id:"ga22",x:520,y:414}]},{name:"Petit Barbarons",mapPath:"assets/maps/PB_wetland_area_map.webp",zones:[{id:"wetland1",name:"Zone 1",points:[{x:305,y:260},{x:332,y:255},{x:335,y:253},{x:345,y:259},{x:361,y:274},{x:380,y:300},{x:382,y:340},{x:370,y:350},{x:368,y:365},{x:360,y:371},{x:350,y:385},{x:340,y:390},{x:330,y:410},{x:315,y:420},{x:300,y:421},{x:286,y:424},{x:261,y:408},{x:222,y:414},{x:214,y:419},{x:185,y:414},{x:180,y:400},{x:172,y:399},{x:174,y:380},{x:157,y:372},{x:120,y:393},{x:120,y:405},{x:100,y:407},{x:86,y:417},{x:52,y:405},{x:30,y:385},{x:65,y:380},{x:70,y:370},{x:70,y:350},{x:85,y:322},{x:135,y:302},{x:145,y:305},{x:150,y:295},{x:195,y:285},{x:220,y:275},{x:250,y:270},{x:295,y:270}]},{id:"wetland3",name:"Zone 3",points:[{x:420,y:315},{x:433,y:315},{x:445,y:328},{x:480,y:330},{x:500,y:325},{x:560,y:335},{x:580,y:335},{x:602,y:341},{x:610,y:333},{x:630,y:335},{x:644,y:352},{x:648,y:382},{x:643,y:392},{x:603,y:390},{x:500,y:405},{x:460,y:405},{x:451,y:415},{x:432,y:418},{x:382,y:398},{x:382,y:378}]},{id:"wetland2",name:"Zone 2",points:[{x:350,y:10},{x:357,y:39},{x:409,y:68},{x:411,y:77},{x:402,y:90},{x:410,y:118},{x:383,y:155},{x:388,y:185},{x:376,y:202},{x:380,y:212},{x:382,y:222},{x:372,y:234},{x:280,y:210},{x:190,y:140},{x:182,y:140},{x:182,y:130},{x:187,y:125},{x:201,y:124},{x:220,y:105},{x:220,y:75},{x:231,y:63},{x:258,y:60},{x:272,y:50},{x:272,y:36},{x:290,y:28},{x:300,y:30},{x:320,y:30},{x:332,y:7}]},{id:"wetland4",name:"Zone 4",points:[{x:650,y:320},{x:665,y:300},{x:725,y:287},{x:736,y:280},{x:756,y:282},{x:776,y:287},{x:790,y:295},{x:810,y:293},{x:825,y:300},{x:810,y:320},{x:817,y:350},{x:850,y:378},{x:888,y:430},{x:888,y:450},{x:840,y:575},{x:788,y:575},{x:772,y:525},{x:755,y:500},{x:757,y:489},{x:754,y:470},{x:734,y:450},{x:733,y:430},{x:735,y:421},{x:727,y:412},{x:720,y:393},{x:667,y:355}]}]},{name:"Kempinski",mapPath:"assets/maps/kempinski_map.webp"},{name:"Roche Caiman",mapPath:"assets/maps/SARC.webp"}]}ngOnInit(){this.loadDynamicSites(),this.userSubscription=this.auth.currentUser$.subscribe(n=>{this.currentUser=n})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}ionViewWillEnter(){this.selectedLocation="",this.showMap=!1,this.currentMapPath="",this.zoneNumber="",this.quadNumber="",this.showNewSiteForm=!1,this.newSiteName="",this.newSiteDescription="",this.isMapModalOpen=!1,this.selectedZone="",this.currentZones=[]}goBack(){this.router.navigate(["/health"])}onLocationChange(){if("new"===this.selectedLocation)this.showNewSiteForm=!0,this.showMap=!1,this.newSiteName="",this.newSiteDescription="",this.currentZones=[],this.currentSamplePoints=[],this.selectedZone="";else if(this.selectedLocation){const n=this.knownSites.find(o=>o.name===this.selectedLocation);n&&(this.currentMapPath=n.mapPath,this.currentZones=n.zones||[],this.currentSamplePoints=n.samplePoints||[],this.showMap=!0,this.showNewSiteForm=!1,this.selectedZone="",this.selectedSiteDescription=n.description||"")}else this.showMap=!1,this.showNewSiteForm=!1,this.currentZones=[],this.currentSamplePoints=[],this.selectedZone="",this.selectedSiteDescription=""}onZoneSelected(n){if(this.selectedZone===n)this.selectedZone="",this.zoneNumber="";else if(this.selectedZone&&this.selectedZone!==n&&(this.quadNumber=""),this.selectedZone=n,"Petit Barbarons"===this.selectedLocation){const o=this.currentZones.find(i=>i.id===n);if(o&&o.name){const i=o.name.match(/\d+/);this.zoneNumber=i?i[0]:""}else this.zoneNumber=""}else{const o=n.replace("zone","");this.zoneNumber=o}}onSamplePointSelected(n){console.log("Sample point selected:",n),this.quadNumber=this.getQuadDisplay(n.label||n.id),("Ramsar"===this.selectedLocation||"Grand Anse"===this.selectedLocation)&&this.setZoneFromQuad(this.quadNumber)}setZoneFromQuad(n){if(!n||!this.selectedLocation)return;const o=parseInt(n);let i;"Ramsar"===this.selectedLocation?[1,2,3].includes(o)?i="1":[13,14,15,16,17,18,20,21,22,23,25,27,28,29].includes(o)?i="2":[26,19].includes(o)?i="3":[4,5].includes(o)?i="4":[6,7,11,12,24,30].includes(o)?i="5":[8,9,10].includes(o)&&(i="6"):"Grand Anse"===this.selectedLocation&&([1,2,3,4].includes(o)?i="1":[5,6,7,8,9,10,21,22].includes(o)?i="2":[11,12,13,14,15,16,17,18].includes(o)?i="3":[19,20].includes(o)&&(i="4")),i&&(this.zoneNumber=i,this.selectedZone=`zone${i}`)}onQuadInput(n){const o=n.target.value,i=o.replace(/\D/g,"");o!==i&&(this.quadNumber=i)}getZoneName(n){return n?`Zone ${n}`:""}getQuadDisplay(n){if(!n)return"";const o=n.match(/\d+/);return o?o[0]:""}isPredefinedSite(n){return["Ramsar","Grand Anse","Caiman","Roche Caiman","Canopy","Petit Barbarons","Kempinski"].includes(n)}isSelectionValid(){if(!this.selectedLocation||"new"===this.selectedLocation)return!0;const n=this.knownSites.find(r=>r.name===this.selectedLocation);if(!n)return!1;const o=n.zones&&n.zones.length>0,i=n.samplePoints&&n.samplePoints.length>0;return"Ramsar"===this.selectedLocation||"Grand Anse"===this.selectedLocation?!(!this.zoneNumber||!this.quadNumber):"Caiman"===this.selectedLocation||"Canopy"===this.selectedLocation?!!this.quadNumber:"Petit Barbarons"===this.selectedLocation?!!this.zoneNumber:o&&i?!(!this.zoneNumber||!this.quadNumber):o?!!this.zoneNumber:!i||!!this.quadNumber}openMapModal(){this.isMapModalOpen=!0}closeMapModal(){this.isMapModalOpen=!1}startAssessment(){var n=this;return(0,g.A)(function*(){const o="new"===n.selectedLocation?n.newSiteName:n.selectedLocation;if(o){const i={location:o,zoneNumber:n.zoneNumber,quadNumber:n.quadNumber};if(yield n.healthSyncService.loadDraft(i)){let l=o;n.zoneNumber&&(l+=` - Zone ${n.zoneNumber}`),n.quadNumber&&(l+=` - Quad ${n.quadNumber}`),yield(yield n.alertController.create({header:"Draft Found for This Location",message:`You have an unfinished health assessment for ${l}. What would you like to do?`,buttons:[{text:"Keep editing previous draft",handler:()=>{n.router.navigate(["/health-form"],{queryParams:{location:o,zone:n.zoneNumber,quad:n.quadNumber}})}},{text:"Start New (deletes existing draft)",handler:(m=(0,g.A)(function*(){yield n.healthSyncService.clearDraft(i),n.router.navigate(["/health-form"],{queryParams:{location:o,zone:n.zoneNumber,quad:n.quadNumber,fresh:"true"}})}),function(){return m.apply(this,arguments)})},{text:"Cancel",role:"cancel"}]})).present()}else n.router.navigate(["/health-form"],{queryParams:{location:o,zone:n.zoneNumber,quad:n.quadNumber}})}var m})()}loadDynamicSites(){var n=this;return(0,g.A)(function*(){try{(yield n.siteSyncService.getAllSites()).forEach(i=>{const r={name:i.name,mapPath:i.map_path||i.site_photo||"assets/maps/generic_map.jpg",zones:i.zones||[],samplePoints:i.sample_points||[],description:i.description||""};n.knownSites.some(l=>l.name===i.name)||n.knownSites.push(r)})}catch(o){console.error("Error loading dynamic sites:",o)}})()}captureGPSCoordinates(){var n=this;return(0,g.A)(function*(){try{const o=yield O.L.getCurrentPosition();n.gpsCoordinates={latitude:o.coords.latitude,longitude:o.coords.longitude}}catch(o){console.error("Error getting GPS coordinates:",o),yield(yield n.alertController.create({header:"GPS Error",message:"Could not get GPS coordinates. Please ensure location services are enabled.",buttons:["OK"]})).present()}})()}captureSitePhoto(){var n=this;return(0,g.A)(function*(){try{const o=yield n.photoService.TakePicture(),r=yield(yield fetch(o)).blob(),l=new File([r],"site_photo.jpg",{type:"image/jpeg"}),_=n.newSiteName.trim().replace(/\s+/g,"_"),m=new Date,u=`site-photos/${_}_photo_${String(m.getDate()).padStart(2,"0")}${String(m.getMonth()+1).padStart(2,"0")}${m.getFullYear()}.jpg`,{error:P}=yield n.supabase.getClient().storage.from("site-images").upload(u,l);if(P)throw P;const{data:{publicUrl:f}}=n.supabase.getClient().storage.from("site-images").getPublicUrl(u);n.sitePhoto=f,console.log("Site photo uploaded:",f)}catch(o){console.error("Error capturing photo:",o),yield(yield n.alertController.create({header:"Camera Error",message:"Failed to capture photo. Please try again.",buttons:["OK"]})).present()}})()}uploadSiteMap(){var n=this;return(0,g.A)(function*(){const o=document.createElement("input");o.type="file",o.accept="image/png,image/jpeg,image/jpg",o.onchange=function(){var i=(0,g.A)(function*(r){const l=r.target.files[0];if(l)try{console.log("\u{1f4c1} File selected for upload:",l.name,`Size: ${(l.size/1048576).toFixed(2)}MB`),console.log("\u{1f5dc}\ufe0f Compressing uploaded image...");const _=yield n.imageCompression.compressFile(l),m=l.size,y=_.size,C=n.imageCompression.getCompressionPercentage(m,y);console.log(`\u{1f5dc}\ufe0f Image compressed: ${(m/1048576).toFixed(2)}MB \u2192 ${(y/1048576).toFixed(2)}MB (${C}% reduction)`);const u=_.name.split(".").pop(),P=n.newSiteName.trim().replace(/\s+/g,"_"),f=new Date,L=`site-maps/${P}_map_${String(f.getDate()).padStart(2,"0")}${String(f.getMonth()+1).padStart(2,"0")}${f.getFullYear()}.${u}`,{error:G}=yield n.supabase.getClient().storage.from("site-images").upload(L,_);if(G)throw G;const{data:{publicUrl:z}}=n.supabase.getClient().storage.from("site-images").getPublicUrl(L);n.siteMap=z,console.log("Site map uploaded:",z)}catch(_){console.error("Error uploading site map:",_),yield(yield n.alertController.create({header:"Upload Failed",message:"Failed to upload site map. Please try again.",buttons:["OK"]})).present()}});return function(r){return i.apply(this,arguments)}}(),o.click()})()}removeSitePhoto(){this.sitePhoto=null}removeSiteMap(){this.siteMap=null}submitNewSite(){var n=this;return(0,g.A)(function*(){if(n.newSiteName.trim())if(n.gpsCoordinates)if(yield n.siteSyncService.siteExists(n.newSiteName.trim()))yield(yield n.alertController.create({header:"Site Already Exists",message:"A site with this name already exists. Please choose a different name.",buttons:["OK"]})).present();else try{const i=n.auth.getCurrentUser()||{email:"unknown",level:1,organization:"unknown"},r={name:n.newSiteName.trim(),description:n.newSiteDescription.trim(),gps_latitude:n.gpsCoordinates?.latitude,gps_longitude:n.gpsCoordinates?.longitude,added_by:i.email||"unknown",map_path:n.siteMap||n.sitePhoto||"assets/maps/generic_map.jpg",site_photo:n.sitePhoto||void 0,site_map:n.siteMap||void 0};yield n.siteSyncService.addNewSite(r),n.knownSites.push({name:r.name,mapPath:r.map_path,zones:[],samplePoints:[]}),n.newSiteName="",n.newSiteDescription="",n.gpsCoordinates=null,n.sitePhoto=null,n.siteMap=null,n.showNewSiteForm=!1;let m="";m=(i.level||1)>=4?`The site "${r.name}" has been added and will be available to all users.`:`The site "${r.name}" has been added locally. Permission request has been submitted and will be reviewed by an administrator.`,yield(yield n.alertController.create({header:"Site Added Successfully",message:m,buttons:["OK"]})).present(),n.selectedLocation=r.name,n.onLocationChange()}catch(i){console.error("Error adding new site:",i),yield(yield n.alertController.create({header:"Error",message:"Failed to add the new site. Please try again.",buttons:["OK"]})).present()}else yield(yield n.alertController.create({header:"GPS Required",message:"GPS coordinates are required for new sites. Please capture GPS coordinates first.",buttons:["OK"]})).present()})()}isL4User(){return this.currentUser&&this.currentUser.level>=4}canEditSelectedSite(){return this.isL4User()&&!!this.selectedLocation&&!this.isPredefinedSite(this.selectedLocation)}startEditSite(){if(!this.canEditSelectedSite())return;const n=this.knownSites.find(o=>o.name===this.selectedLocation);n&&(this.isEditingSite=!0,this.editingSiteOriginalName=n.name,this.editSiteName=n.name,this.editSiteDescription=n.description||"",this.editGpsCoordinates=n.gpsCoordinates||null,this.editSitePhoto=null,this.editSiteMap=null,this.loadSiteMediaForEdit(n.name))}loadSiteMediaForEdit(n){var o=this;return(0,g.A)(function*(){try{const r=(yield o.siteSyncService.getAllSites()).find(l=>l.name===n);r&&(o.editSitePhoto=r.site_photo||null,o.editSiteMap=r.site_map||r.map_path||null)}catch(i){console.error("Error loading site media for edit:",i)}})()}cancelEditSite(){this.isEditingSite=!1,this.editSiteName="",this.editSiteDescription="",this.editGpsCoordinates=null,this.editSitePhoto=null,this.editSiteMap=null,this.editingSiteOriginalName=""}captureEditGPS(){var n=this;return(0,g.A)(function*(){try{const o=yield O.L.getCurrentPosition();n.editGpsCoordinates={latitude:o.coords.latitude,longitude:o.coords.longitude}}catch(o){console.error("Error getting GPS coordinates:",o),yield(yield n.alertController.create({header:"GPS Error",message:"Could not get GPS coordinates. Please ensure location services are enabled.",buttons:["OK"]})).present()}})()}captureEditSitePhoto(){var n=this;return(0,g.A)(function*(){try{const o=yield n.photoService.TakePicture(),r=yield(yield fetch(o)).blob(),l=new File([r],"site_photo.jpg",{type:"image/jpeg"}),_=n.editSiteName.trim().replace(/\s+/g,"_"),m=new Date,u=`site-photos/${_}_photo_${String(m.getDate()).padStart(2,"0")}${String(m.getMonth()+1).padStart(2,"0")}${m.getFullYear()}.jpg`,{error:P}=yield n.supabase.getClient().storage.from("site-images").upload(u,l);if(P)throw P;const{data:{publicUrl:f}}=n.supabase.getClient().storage.from("site-images").getPublicUrl(u);n.editSitePhoto=f}catch(o){console.error("Error capturing photo:",o),yield(yield n.alertController.create({header:"Camera Error",message:"Failed to capture photo. Please try again.",buttons:["OK"]})).present()}})()}uploadEditSiteMap(){var n=this;return(0,g.A)(function*(){const o=document.createElement("input");o.type="file",o.accept="image/png,image/jpeg,image/jpg",o.onchange=function(){var i=(0,g.A)(function*(r){const l=r.target.files[0];if(l)try{const _=yield n.imageCompression.compressFile(l),m=_.name.split(".").pop(),u=`site-maps/${n.editSiteName.trim().replace(/\s+/g,"_")}_map_${Date.now()}.${m}`,{error:P}=yield n.supabase.getClient().storage.from("site-images").upload(u,_);if(P)throw P;const{data:{publicUrl:f}}=n.supabase.getClient().storage.from("site-images").getPublicUrl(u);n.editSiteMap=f}catch(_){console.error("Error uploading site map:",_),yield(yield n.alertController.create({header:"Upload Failed",message:"Failed to upload site map. Please try again.",buttons:["OK"]})).present()}});return function(r){return i.apply(this,arguments)}}(),o.click()})()}removeEditSitePhoto(){this.editSitePhoto=null}removeEditSiteMap(){this.editSiteMap=null}saveEditSite(){var n=this;return(0,g.A)(function*(){if(n.editSiteName.trim())try{const o={name:n.editSiteName.trim(),description:n.editSiteDescription.trim()};n.editGpsCoordinates&&(o.gps_latitude=n.editGpsCoordinates.latitude,o.gps_longitude=n.editGpsCoordinates.longitude),n.editSitePhoto&&(o.site_photo=n.editSitePhoto),n.editSiteMap&&(o.site_map=n.editSiteMap,o.map_path=n.editSiteMap),yield n.siteSyncService.updateSite(n.editingSiteOriginalName,o);const i=n.knownSites.findIndex(l=>l.name===n.editingSiteOriginalName);-1!==i&&(n.knownSites[i]={...n.knownSites[i],name:n.editSiteName.trim(),description:n.editSiteDescription.trim(),mapPath:n.editSiteMap||n.knownSites[i].mapPath,gpsCoordinates:n.editGpsCoordinates||n.knownSites[i].gpsCoordinates}),n.editingSiteOriginalName!==n.editSiteName.trim()&&(n.selectedLocation=n.editSiteName.trim()),n.selectedSiteDescription=n.editSiteDescription.trim(),n.editSiteMap&&(n.currentMapPath=n.editSiteMap),n.cancelEditSite(),yield(yield n.alertController.create({header:"Site Updated",message:"The site information has been updated successfully.",buttons:["OK"]})).present()}catch(o){console.error("Error updating site:",o),yield(yield n.alertController.create({header:"Update Failed",message:"Failed to update site. Please try again.",buttons:["OK"]})).present()}else yield(yield n.alertController.create({header:"Name Required",message:"Site name is required.",buttons:["OK"]})).present()})()}deleteEditSite(){var n=this;return(0,g.A)(function*(){var i;yield(yield n.alertController.create({header:"Delete Site",message:`Are you sure you want to delete "${n.editingSiteOriginalName}"? This action cannot be undone.`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:(i=(0,g.A)(function*(){try{yield n.siteSyncService.deleteSite(n.editingSiteOriginalName),n.knownSites=n.knownSites.filter(l=>l.name!==n.editingSiteOriginalName),n.selectedLocation===n.editingSiteOriginalName&&(n.selectedLocation="",n.selectedSiteDescription="",n.currentMapPath=""),n.cancelEditSite(),yield(yield n.alertController.create({header:"Site Deleted",message:"The site has been deleted successfully.",buttons:["OK"]})).present()}catch(r){console.error("Error deleting site:",r),yield(yield n.alertController.create({header:"Delete Failed",message:"Failed to delete site. Please try again.",buttons:["OK"]})).present()}}),function(){return i.apply(this,arguments)})}]})).present()})()}static#e=a=()=>(this.\u0275fac=function(o){return new(o||s)(e.rXU(F.Ix),e.rXU(p.W3),e.rXU(p.hG),e.rXU(E.OD),e.rXU(R.r),e.rXU(Z.k),e.rXU(T.N),e.rXU(H.L),e.rXU($.I),e.rXU(D.L))},this.\u0275cmp=e.VBU({type:s,selectors:[["app-location-health"]],standalone:!1,decls:28,vars:8,consts:[[1,"location-selection-bg",3,"fullscreen"],[1,"page-header","emerald-gradient"],[1,"header-content"],["name","chevron-back",1,"back-icon",3,"click"],["name","location-outline",1,"page-icon"],[1,"header-text"],[1,"selection-section"],[1,"selection-card"],[1,"card-title"],[1,"card-subtitle"],["lines","none",1,"location-select-item"],["label","Choose Location","labelPlacement","floating","interface","popover",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["value","new"],["class","map-section",4,"ngIf"],["class","instructions-section",4,"ngIf"],["cssClass","fullscreen-map-modal",3,"didDismiss","isOpen"],[3,"value"],[1,"map-section"],[1,"details-card"],[1,"details-title"],["lines","none",1,"detail-input-item"],["label","Site Name","labelPlacement","floating","placeholder","Enter site name (required)",3,"ngModelChange","ngModel"],["label","Location Description","labelPlacement","floating","placeholder","Enter location description (optional)",3,"ngModelChange","ngModel"],["expand","block",1,"gps-button",3,"click"],["name","location-outline","slot","start"],[1,"button-row"],["size","6"],["expand","block",1,"coastal-blue-button",3,"click"],["name","camera-outline","slot","start"],["name","map-outline","slot","start"],["class","photo-preview",4,"ngIf"],["class","map-preview",4,"ngIf"],["expand","block",1,"add-site-button",3,"click","disabled"],["name","add-circle-outline","slot","start"],[1,"photo-preview"],["alt","Site photo",1,"preview-image",3,"src"],["fill","clear","color","danger",3,"click"],["name","trash-outline","slot","icon-only"],[1,"map-preview"],["alt","Site map",1,"preview-image",3,"src"],[1,"edit-header"],["color","warning"],["label","Description","labelPlacement","floating","placeholder","Enter description (optional)",3,"ngModelChange","ngModel"],["expand","block","color","medium",3,"click"],["name","close-outline","slot","start"],["expand","block",1,"start-button",3,"click","disabled"],["name","checkmark-outline","slot","start"],[1,"button-row","delete-row"],["size","12"],["expand","block","fill","outline","color","danger",3,"click"],["name","trash-outline","slot","start"],["class","map-hint",4,"ngIf"],["class","admin-edit-button",4,"ngIf"],[1,"map-card"],[1,"map-content"],[1,"map-expand-button",3,"click"],["name","expand-outline"],[3,"mapImagePath","zones","samplePoints","selectedZones","zoneSelected","samplePointSelected",4,"ngIf"],[3,"mapImagePath","samplePoints","selectedSamplePoints","samplePointSelected",4,"ngIf"],[3,"mapImagePath","zones","samplePoints","selectedZones","selectedSamplePoints","zoneSelected","samplePointSelected",4,"ngIf"],[3,"mapImagePath","zones","selectedZones","zoneSelected",4,"ngIf"],["class","site-map",3,"src","alt",4,"ngIf"],["class","details-title",4,"ngIf"],["lines","none","class","detail-input-item",3,"disabled-item",4,"ngIf"],["lines","none","class","detail-input-item",4,"ngIf"],["class","selection-warning",4,"ngIf"],["name","clipboard-outline","slot","start"],[1,"map-hint"],["name","hand-left-outline"],[4,"ngIf"],[1,"admin-edit-button"],["size","small","fill","outline","color","warning",3,"click"],["name","pencil-outline","slot","start"],[3,"zoneSelected","samplePointSelected","mapImagePath","zones","samplePoints","selectedZones"],[3,"samplePointSelected","mapImagePath","samplePoints","selectedSamplePoints"],[3,"zoneSelected","samplePointSelected","mapImagePath","zones","samplePoints","selectedZones","selectedSamplePoints"],[3,"zoneSelected","mapImagePath","zones","selectedZones"],[1,"site-map",3,"src","alt"],["label","Zone","labelPlacement","floating",3,"ngModelChange","ngModel","placeholder","disabled"],["label","Quad Number","labelPlacement","floating","placeholder","Enter quad number (optional)",3,"ngModelChange","ionInput","ngModel","disabled"],["position","stacked",1,"ion-text-wrap"],[1,"site-description"],[1,"selection-warning"],["name","alert-circle-outline"],[1,"instructions-section"],[1,"info-card"],[1,"info-header"],["name","information-circle-outline",1,"info-icon"],[1,"green-text"],[1,"map-modal-toolbar"],["slot","end"],[3,"click"],["name","close","slot","icon-only"],[1,"map-modal-content"],[1,"fullscreen-map-container"],[1,"rotation-hint"],["name","phone-portrait-outline"],["class","fullscreen-map",3,"mapImagePath","zones","samplePoints","selectedZones","zoneSelected","samplePointSelected",4,"ngIf"],["class","fullscreen-map",3,"mapImagePath","samplePoints","selectedSamplePoints","samplePointSelected",4,"ngIf"],["class","fullscreen-map",3,"mapImagePath","zones","selectedZones","zoneSelected",4,"ngIf"],["class","fullscreen-map","appPinchZoom","",3,"src","alt",4,"ngIf"],[1,"fullscreen-map",3,"zoneSelected","samplePointSelected","mapImagePath","zones","samplePoints","selectedZones"],[1,"fullscreen-map",3,"samplePointSelected","mapImagePath","samplePoints","selectedSamplePoints"],[1,"fullscreen-map",3,"zoneSelected","mapImagePath","zones","selectedZones"],["appPinchZoom","",1,"fullscreen-map",3,"src","alt"]],template:function(o,i){1&o&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-icon",3),e.bIt("click",function(){return i.goBack()}),e.k0s(),e.nrm(4,"ion-icon",4),e.j41(5,"div",5)(6,"h1"),e.EFF(7,"Select Location"),e.k0s(),e.j41(8,"p"),e.EFF(9,"Choose a site to begin assessment"),e.k0s()()()(),e.j41(10,"div",6)(11,"ion-card",7)(12,"ion-card-content")(13,"h3",8),e.EFF(14,"Assessment Location"),e.k0s(),e.j41(15,"p",9),e.EFF(16,"Select a known site or create a new one"),e.k0s(),e.j41(17,"ion-item",10)(18,"ion-select",11),e.mxI("ngModelChange",function(l){return e.DH7(i.selectedLocation,l)||(i.selectedLocation=l),l}),e.bIt("ionChange",function(){return i.onLocationChange()}),e.DNE(19,X,2,2,"ion-select-option",12),e.j41(20,"ion-select-option",13),e.EFF(21,"\u2795 New Site"),e.k0s()()()()()(),e.DNE(22,Y,29,8,"div",14)(23,K,43,8,"div",14)(24,he,23,14,"div",14)(25,xe,18,0,"div",15),e.j41(26,"ion-modal",16),e.bIt("didDismiss",function(){return i.closeMapModal()}),e.DNE(27,Se,18,7,"ng-template"),e.k0s()()),2&o&&(e.Y8G("fullscreen",!0),e.R7$(18),e.R50("ngModel",i.selectedLocation),e.R7$(),e.Y8G("ngForOf",i.knownSites),e.R7$(3),e.Y8G("ngIf",i.showNewSiteForm),e.R7$(),e.Y8G("ngIf",i.isEditingSite),e.R7$(),e.Y8G("ngIf",i.showMap&&!i.isEditingSite),e.R7$(),e.Y8G("ngIf",!i.showMap&&!i.showNewSiteForm&&!i.selectedLocation),e.R7$(),e.Y8G("isOpen",i.isMapModalOpen))},dependencies:[M.Sq,M.bT,b.BC,b.vS,p.In,p.Jm,p.QW,p.b_,p.I9,p.hU,p.W9,p.eU,p.iq,p.$w,p.uz,p.he,p.ln,p.Nm,p.Ip,p.BC,p.ai,p.Sb,p.Je,p.Gw,q.h,v.P,w.x,k.m,j.f,N.k],styles:['@charset "UTF-8";.location-selection-bg[_ngcontent-%COMP%]{--background: #ffffff}.page-header[_ngcontent-%COMP%]{padding:1.25rem;box-shadow:0 2px 8px #52a67626;color:#fff}.page-header.emerald-gradient[_ngcontent-%COMP%]{background:#4fb3bf}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .back-icon[_ngcontent-%COMP%]{font-size:1.5rem;cursor:pointer;transition:transform .2s}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .back-icon[_ngcontent-%COMP%]:hover{transform:translate(-4px)}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-icon[_ngcontent-%COMP%]{font-size:1.75rem}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{flex:1}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin:0 0 .25rem}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;margin:0;opacity:.9}.selection-section[_ngcontent-%COMP%]{padding:1.25rem 1.25rem 1rem}.selection-section[_ngcontent-%COMP%]   .selection-card[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 6px #0000001a;margin:0}.selection-section[_ngcontent-%COMP%]   .selection-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:1.25rem}.selection-section[_ngcontent-%COMP%]   .selection-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#0d3d2f;margin:0 0 .4rem}.selection-section[_ngcontent-%COMP%]   .selection-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .card-subtitle[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7c7a;margin:0 0 1.25rem}.selection-section[_ngcontent-%COMP%]   .selection-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .location-select-item[_ngcontent-%COMP%]{--background: #ffffff;--border-radius: .75rem;--padding-start: 1rem;--padding-end: 1rem;--min-height: 48px;border:2px solid #4fb3bf;border-radius:.75rem;margin:0;display:flex;align-items:center}.selection-section[_ngcontent-%COMP%]   .selection-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .location-select-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{--padding-top: 0;--padding-bottom: 0;font-weight:500;color:#0d3d2f;width:100%}.map-section[_ngcontent-%COMP%]{padding:0 1.25rem 1.25rem}.map-section[_ngcontent-%COMP%]   .map-hint[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;background:linear-gradient(135deg,#52a676,#459465);color:#fff;padding:.75rem 1.5rem;border-radius:2rem;margin:0 auto 1rem;max-width:fit-content;box-shadow:0 2px 8px #52a6764d;font-weight:500;font-size:.9rem}.map-section[_ngcontent-%COMP%]   .map-hint[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.map-section[_ngcontent-%COMP%]   .map-card[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 6px #0000001a;margin:0 0 1rem;overflow:hidden;transition:all .3s ease}.map-section[_ngcontent-%COMP%]   .map-card[_ngcontent-%COMP%]   .map-content[_ngcontent-%COMP%]{padding:0;position:relative}.map-section[_ngcontent-%COMP%]   .map-card[_ngcontent-%COMP%]   .map-content[_ngcontent-%COMP%]   .map-hint[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;background:linear-gradient(135deg,#52a676,#459465);color:#fff;padding:.75rem 1.5rem;border-radius:2rem;margin:0 auto 1rem;max-width:fit-content;box-shadow:0 2px 8px #52a6764d;font-weight:500;font-size:.9rem}.map-section[_ngcontent-%COMP%]   .map-card[_ngcontent-%COMP%]   .map-content[_ngcontent-%COMP%]   .map-hint[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.map-section[_ngcontent-%COMP%]   .map-card[_ngcontent-%COMP%]   .map-content[_ngcontent-%COMP%]   .map-expand-button[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1rem;background:#4fb3bff2;color:#fff;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #0003;z-index:10;cursor:pointer;transition:all .2s ease}.map-section[_ngcontent-%COMP%]   .map-card[_ngcontent-%COMP%]   .map-content[_ngcontent-%COMP%]   .map-expand-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.map-section[_ngcontent-%COMP%]   .map-card[_ngcontent-%COMP%]   .map-content[_ngcontent-%COMP%]   .map-expand-button[_ngcontent-%COMP%]:hover{background:#4fb3bf;transform:scale(1.1)}.map-section[_ngcontent-%COMP%]   .map-card[_ngcontent-%COMP%]   .map-content[_ngcontent-%COMP%]   .map-expand-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.map-section[_ngcontent-%COMP%]   .map-card[_ngcontent-%COMP%]   .map-content[_ngcontent-%COMP%]   .site-map[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 6px #0000001a;margin:0}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:1.25rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .details-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#0d3d2f;margin:0 0 1rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .site-description[_ngcontent-%COMP%]{color:#475569;font-size:.95rem;line-height:1.5;margin:0;padding:.5rem 0}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .detail-input-item[_ngcontent-%COMP%]{--background: #ffffff;--border-radius: .75rem;--padding-start: 1rem;--padding-end: 1rem;margin-bottom:1rem;border:1px solid #e0e0e0;border-radius:.75rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .detail-input-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-top: .5rem;--padding-bottom: .5rem;font-weight:500;color:#0d3d2f}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .detail-input-item[_ngcontent-%COMP%]   .zone-display[_ngcontent-%COMP%]{padding:.25rem 0;margin-top:-.25rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .detail-input-item[_ngcontent-%COMP%]   .zone-display[_ngcontent-%COMP%]   .zone-name[_ngcontent-%COMP%]{font-size:.85rem;color:#0d3d2f;font-weight:600;background:#0d3d2f1a;padding:.25rem .5rem;border-radius:.25rem;display:inline-block}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .detail-input-item[_ngcontent-%COMP%]   .quad-display[_ngcontent-%COMP%]{padding:.25rem 0;margin-top:-.25rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .detail-input-item[_ngcontent-%COMP%]   .quad-display[_ngcontent-%COMP%]   .quad-name[_ngcontent-%COMP%]{font-size:.85rem;color:#0d3d2f;font-weight:600;background:#0d3d2f1a;padding:.25rem .5rem;border-radius:.25rem;display:inline-block}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .selection-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem;background:#ffc1071a;border:1px solid rgba(255,193,7,.5);border-radius:.5rem;margin:.5rem 0;color:#856404;font-size:.9rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .selection-warning[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.25rem;flex-shrink:0}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .gps-button[_ngcontent-%COMP%]{--background: #e76f51;--border-radius: .75rem;font-weight:600;text-transform:none;margin-top:.5rem;margin-bottom:.5rem;height:3rem;font-size:.9rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .gps-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:.5rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .add-site-button[_ngcontent-%COMP%]{--background: #2d8659;--border-radius: .75rem;font-weight:600;text-transform:none;margin-top:.5rem;height:3rem;font-size:.9rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .add-site-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.25rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .add-site-button[_ngcontent-%COMP%]:hover{--background: #246d49}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .coastal-blue-button[_ngcontent-%COMP%]{--background: #4fb3bf;--border-radius: .75rem;font-weight:600;text-transform:none;height:3rem;font-size:.9rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .coastal-blue-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.25rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .coastal-blue-button[_ngcontent-%COMP%]:hover{--background: #3d919c}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]{--background: var(--fresh-leaf, #52a676);--border-radius: .75rem;font-weight:600;text-transform:none;margin-top:.5rem;height:3rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.25rem}.map-section[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]:disabled{--background: #cccccc;opacity:.5}.instructions-section[_ngcontent-%COMP%]{padding:0 1.25rem 1.5rem}.instructions-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{border-radius:1rem;background:#4fb3bf1a;border:2px solid rgba(79,179,191,.3);box-shadow:none;margin:0}.instructions-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:1.25rem}.instructions-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:.75rem}.instructions-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:1.25rem;color:#4fb3bf;flex-shrink:0}.instructions-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#0d3d2f;margin:0}.instructions-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;text-align:left}.instructions-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#0d3d2f;font-size:.875rem;position:relative;padding:.4rem 0 .4rem 1.5rem}.instructions-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";color:#4fb3bf;font-weight:700;font-size:1.5rem;position:absolute;left:0;top:.25rem}.instructions-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2d8659;font-weight:600}.instructions-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong.green-text[_ngcontent-%COMP%]{color:#2d8659}.map-modal-toolbar[_ngcontent-%COMP%]{--background: var(--fresh-leaf, #52a676);--color: white}.map-modal-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:600}.map-modal-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: white}.map-modal-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.map-modal-content[_ngcontent-%COMP%]{--background: #0d3d2f}.map-modal-content[_ngcontent-%COMP%]   .fullscreen-map-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:.5rem;overflow:auto}.map-modal-content[_ngcontent-%COMP%]   .fullscreen-map-container[_ngcontent-%COMP%]   .rotation-hint[_ngcontent-%COMP%]{display:none;align-items:center;gap:.5rem;color:#fffc;font-size:.875rem;margin-bottom:.75rem;font-style:italic}.map-modal-content[_ngcontent-%COMP%]   .fullscreen-map-container[_ngcontent-%COMP%]   .rotation-hint[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.25rem}@media screen and (max-width: 768px) and (orientation: portrait){.map-modal-content[_ngcontent-%COMP%]   .fullscreen-map-container[_ngcontent-%COMP%]   .rotation-hint[_ngcontent-%COMP%]{display:flex}}.map-modal-content[_ngcontent-%COMP%]   .fullscreen-map-container[_ngcontent-%COMP%]   .fullscreen-map[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain;border-radius:.5rem;box-shadow:0 8px 24px #0000004d;touch-action:none;user-select:none;-webkit-user-select:none}@media screen and (orientation: landscape){.map-modal-content[_ngcontent-%COMP%]   .fullscreen-map-container[_ngcontent-%COMP%]   .fullscreen-map[_ngcontent-%COMP%]{width:100%;max-height:calc(100vh - 60px)}}@media screen and (orientation: portrait){.map-modal-content[_ngcontent-%COMP%]   .fullscreen-map-container[_ngcontent-%COMP%]   .fullscreen-map[_ngcontent-%COMP%]{width:100%;max-height:calc(100vh - 60px)}}.disabled-item[_ngcontent-%COMP%]{opacity:.6}.disabled-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: #999;--placeholder-color: #bbb}.add-site-button[_ngcontent-%COMP%]{--background: var(--fresh-leaf, #52a676);--background-hover: #459562;--background-activated: #3d7f54;margin-bottom:.5rem}.add-site-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:.5rem}.admin-edit-button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:.75rem}.admin-edit-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: .5rem;font-size:.85rem;font-weight:500;text-transform:none}.edit-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.edit-header[_ngcontent-%COMP%]   .details-title[_ngcontent-%COMP%]{margin:0!important}.edit-header[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:.7rem;padding:.25rem .5rem}.button-row[_ngcontent-%COMP%]{margin-top:.75rem}.delete-row[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #eee}.photo-preview[_ngcontent-%COMP%], .map-preview[_ngcontent-%COMP%]{position:relative;margin-top:10px;text-align:center}.photo-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%], .map-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{max-width:100%;max-height:200px;border-radius:8px;box-shadow:0 2px 8px #0000001a}.photo-preview[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], .map-preview[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;--background: rgba(255, 255, 255, .9);--color: #eb445a;--border-radius: 50%;width:36px;height:36px}.photo-preview[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .map-preview[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}']}))}return a(),s})()}];let ve=(()=>{var a;class s{static#e=a=()=>(this.\u0275fac=function(o){return new(o||s)},this.\u0275mod=e.$C({type:s}),this.\u0275inj=c.G2t({imports:[S.iI.forChild(Oe),S.iI]}))}return a(),s})(),we=(()=>{var a;class s{static#e=a=()=>(this.\u0275fac=function(o){return new(o||s)},this.\u0275mod=e.$C({type:s}),this.\u0275inj=c.G2t({imports:[M.MD,b.YN,p.bv,ve,v.P,w.x,k.m,j.f,N.k]}))}return a(),s})()}}]);