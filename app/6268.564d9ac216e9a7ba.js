"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6268],{6268(Nt,U,f){f.d(U,{FloraFaunaPageModule:()=>Ft});var v=f(2200),b=f(4341),p=f(7343),N=f(8132),g=f(467),e=f(3664),s=f(2615),S=f(4718);function J(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",15),e.bIt("click",function(n){const a=s.eBV(o).index;return e.XpG(2).goTo(a),s.Njj(n.stopPropagation())}),e.k0s()}if(2&i){const o=l.index,t=e.XpG(2);e.AVh("active",o===t.currentIndex)}}function q(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",8)(1,"button",9),e.bIt("click",function(n){return s.eBV(o),e.XpG().previous(),s.Njj(n.stopPropagation())}),e.nrm(2,"ion-icon",10),e.k0s(),e.j41(3,"div",11),e.DNE(4,J,1,2,"span",12),e.k0s(),e.j41(5,"button",13),e.bIt("click",function(n){return s.eBV(o),e.XpG().next(),s.Njj(n.stopPropagation())}),e.nrm(6,"ion-icon",14),e.k0s()()}if(2&i){const o=e.XpG();e.R7$(4),e.Y8G("ngForOf",o.images)}}let K=(()=>{var i;class l{constructor(t){this.modalController=t,this.images=[],this.vernacularName="",this.scientificName="",this.currentIndex=0,this.rotatedLeftImages=new Set(["assets/fauna/NS_Common_greenshank3.webp"]),this.rotatedRightImages=new Set(["assets/fauna/NS_Red_mangrove_crab2.webp"])}close(){this.modalController.dismiss()}getCurrentImage(){return this.images[this.currentIndex]||""}getRotationClass(){const t=this.getCurrentImage();return this.rotatedLeftImages.has(t)?"rotated-left":this.rotatedRightImages.has(t)?"rotated-right":""}next(){this.currentIndex=(this.currentIndex+1)%this.images.length}previous(){this.currentIndex=(this.currentIndex-1+this.images.length)%this.images.length}goTo(t){this.currentIndex=t}static#e=i=()=>(this.\u0275fac=function(n){return new(n||l)(e.rXU(p.W3))},this.\u0275cmp=e.VBU({type:l,selectors:[["app-species-slideshow"]],inputs:{images:"images",vernacularName:"vernacularName",scientificName:"scientificName"},standalone:!1,decls:13,vars:6,consts:[[1,"slideshow-overlay",3,"click"],[1,"slideshow-close",3,"click"],["name","close"],[1,"slideshow-content",3,"click"],[1,"slideshow-image-container",3,"ngClass"],["appPinchZoom","",3,"contextmenu","src","alt"],[1,"slideshow-info"],["class","slideshow-controls",4,"ngIf"],[1,"slideshow-controls"],[1,"nav-button","prev",3,"click"],["name","chevron-back"],[1,"slideshow-indicators"],["class","indicator-dot",3,"active","click",4,"ngFor","ngForOf"],[1,"nav-button","next",3,"click"],["name","chevron-forward"],[1,"indicator-dot",3,"click"]],template:function(n,a){1&n&&(e.j41(0,"div",0),e.bIt("click",function(){return a.close()}),e.j41(1,"div",1),e.bIt("click",function(){return a.close()}),e.nrm(2,"ion-icon",2),e.k0s(),e.j41(3,"div",3),e.bIt("click",function(c){return c.stopPropagation()}),e.j41(4,"div",4)(5,"img",5),e.bIt("contextmenu",function(c){return c.preventDefault(),c.stopPropagation()}),e.k0s()(),e.j41(6,"div",6)(7,"h3"),e.EFF(8),e.k0s(),e.j41(9,"p")(10,"em"),e.EFF(11),e.k0s()()(),e.DNE(12,q,7,1,"div",7),e.k0s()()),2&n&&(e.R7$(4),e.Y8G("ngClass",a.getRotationClass()),e.R7$(),e.Y8G("src",a.getCurrentImage(),e.B4B)("alt",a.scientificName),e.R7$(3),e.JRh(a.vernacularName),e.R7$(3),e.JRh(a.scientificName),e.R7$(),e.Y8G("ngIf",a.images.length>1))},dependencies:[v.YU,v.Sq,v.bT,p.iq,S.h],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}.slideshow-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000f2;display:flex;align-items:center;justify-content:center}.slideshow-close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;width:40px;height:40px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;z-index:10001}.slideshow-close[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff}.slideshow-close[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.slideshow-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;padding:20px}.slideshow-image-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;width:100%;max-width:90vw;max-height:70vh;margin-bottom:20px;overflow:hidden;position:relative}.slideshow-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;border-radius:8px;box-shadow:0 4px 20px #00000080;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:none}@media screen and (max-width: 768px){.slideshow-image-container.rotated-left[_ngcontent-%COMP%]{transform:rotate(-90deg);width:auto;height:100%}.slideshow-image-container.rotated-right[_ngcontent-%COMP%]{transform:rotate(90deg);width:auto;height:100%}}@media screen and (min-width: 769px){.slideshow-image-container.rotated-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotate(-90deg);max-width:none;max-height:none;height:100%;width:auto;position:absolute;image-orientation:none}.slideshow-image-container.rotated-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotate(90deg);max-width:none;max-height:none;height:100%;width:auto;position:absolute;image-orientation:none}}.slideshow-info[_ngcontent-%COMP%]{text-align:center;color:#fff;margin-bottom:20px}.slideshow-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0 0 8px}.slideshow-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0;opacity:.8}.slideshow-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:20px}.slideshow-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{background:#fff3;border:none;border-radius:50%;width:48px;height:48px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.slideshow-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff}.slideshow-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.slideshow-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.slideshow-controls[_ngcontent-%COMP%]   .slideshow-indicators[_ngcontent-%COMP%]{display:flex;gap:8px}.slideshow-controls[_ngcontent-%COMP%]   .slideshow-indicators[_ngcontent-%COMP%]   .indicator-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:#ffffff4d;cursor:pointer;transition:all .3s ease}.slideshow-controls[_ngcontent-%COMP%]   .slideshow-indicators[_ngcontent-%COMP%]   .indicator-dot.active[_ngcontent-%COMP%]{background:#fff;transform:scale(1.3)}.slideshow-controls[_ngcontent-%COMP%]   .slideshow-indicators[_ngcontent-%COMP%]   .indicator-dot[_ngcontent-%COMP%]:hover{background:#ffffff80}"]}))}return i(),l})();var W=f(4356),I=f(3205),R=f(5010),T=f(6845),F=f(7314);function H(i,l){if(1&i&&(e.j41(0,"ion-toolbar",20)(1,"ion-text",21),e.EFF(2),e.nI1(3,"t"),e.k0s()()),2&i){const o=e.XpG();e.R7$(2),e.Lme(" ",o.getSelectedCount()," ",e.bMT(3,2,"species selected")," ")}}function Q(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-button",22),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.toggleAddSpeciesForm())}),e.nrm(1,"ion-icon",23),e.EFF(2),e.nI1(3,"t"),e.nI1(4,"t"),e.nI1(5,"t"),e.nI1(6,"t"),e.k0s()}if(2&i){const o=e.XpG();e.R7$(2),e.E5c(" ",e.bMT(3,3,"Add New")," ","flora"===o.type?e.bMT(4,5,"Flora"):e.bMT(5,7,"Fauna")," ",e.bMT(6,9,"Species")," ")}}function Z(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",43),e.nrm(1,"img",44),e.nI1(2,"t"),e.j41(3,"ion-button",45),e.bIt("click",function(){const n=s.eBV(o).index,a=e.XpG(2);return s.Njj(a.removeSpeciesPhoto(n))}),e.nrm(4,"ion-icon",46),e.k0s()()}if(2&i){const o=l.$implicit;e.R7$(),e.Y8G("src",o,e.B4B)("alt",e.bMT(2,2,"Species photo"))}}function ee(i,l){1&i&&e.nrm(0,"ion-icon",51)}function te(i,l){1&i&&e.nrm(0,"ion-spinner",52)}function ne(i,l){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"Add Photo")))}function ae(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",47),e.bIt("click",function(){s.eBV(o);const n=e.XpG(2);return s.Njj(n.captureSpeciesPhoto())}),e.DNE(1,ee,1,0,"ion-icon",48)(2,te,1,0,"ion-spinner",49)(3,ne,3,3,"span",50),e.k0s()}if(2&i){const o=e.XpG(2);e.R7$(),e.Y8G("ngIf",!o.isUploadingPhoto),e.R7$(),e.Y8G("ngIf",o.isUploadingPhoto),e.R7$(),e.Y8G("ngIf",!o.isUploadingPhoto)}}function oe(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",24)(1,"div",25)(2,"h3"),e.EFF(3),e.nI1(4,"t"),e.nI1(5,"t"),e.nI1(6,"t"),e.nI1(7,"t"),e.k0s(),e.j41(8,"ion-button",26),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.toggleAddSpeciesForm())}),e.nrm(9,"ion-icon",3),e.k0s()(),e.j41(10,"div",27)(11,"div",28)(12,"ion-label",29),e.EFF(13),e.nI1(14,"t"),e.j41(15,"span",30),e.EFF(16,"*"),e.k0s(),e.j41(17,"span",31),e.EFF(18),e.nI1(19,"t"),e.k0s()(),e.j41(20,"div",32),e.DNE(21,Z,5,4,"div",33)(22,ae,4,3,"div",34),e.k0s()(),e.j41(23,"div",35)(24,"ion-label",29),e.EFF(25),e.nI1(26,"t"),e.j41(27,"ion-icon",36),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.showInfoTooltip("scientific"))}),e.k0s()(),e.j41(28,"ion-input",37),e.mxI("ngModelChange",function(n){s.eBV(o);const a=e.XpG();return e.DH7(a.newSpeciesScientificName,n)||(a.newSpeciesScientificName=n),s.Njj(n)}),e.k0s()(),e.j41(29,"div",35)(30,"ion-label",29),e.EFF(31),e.nI1(32,"t"),e.j41(33,"ion-icon",36),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.showInfoTooltip("common"))}),e.k0s()(),e.j41(34,"ion-input",38),e.mxI("ngModelChange",function(n){s.eBV(o);const a=e.XpG();return e.DH7(a.newSpeciesCommonName,n)||(a.newSpeciesCommonName=n),s.Njj(n)}),e.k0s()(),e.j41(35,"div",35)(36,"ion-label",29),e.EFF(37),e.nI1(38,"t"),e.j41(39,"ion-icon",36),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.showInfoTooltip("creole"))}),e.k0s()(),e.j41(40,"ion-input",39),e.mxI("ngModelChange",function(n){s.eBV(o);const a=e.XpG();return e.DH7(a.newSpeciesCreoleName,n)||(a.newSpeciesCreoleName=n),s.Njj(n)}),e.k0s()(),e.j41(41,"div",35)(42,"ion-label",29),e.EFF(43),e.nI1(44,"t"),e.j41(45,"span",30),e.EFF(46,"*"),e.k0s()(),e.j41(47,"ion-textarea",40),e.nI1(48,"t"),e.mxI("ngModelChange",function(n){s.eBV(o);const a=e.XpG();return e.DH7(a.newSpeciesDescription,n)||(a.newSpeciesDescription=n),s.Njj(n)}),e.k0s()(),e.j41(49,"ion-button",41),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.submitNewSpecies())}),e.nrm(50,"ion-icon",42),e.EFF(51),e.nI1(52,"t"),e.k0s()()()}if(2&i){const o=e.XpG();e.R7$(3),e.E5c("",e.bMT(4,18,"Add New")," ","flora"===o.type?e.bMT(5,20,"Flora"):e.bMT(6,22,"Fauna")," ",e.bMT(7,24,"Species")),e.R7$(10),e.SpI(" ",e.bMT(14,26,"Photos")," "),e.R7$(5),e.SpI("(",e.bMT(19,28,"1-3 photos required"),")"),e.R7$(3),e.Y8G("ngForOf",o.newSpeciesPhotos),e.R7$(),e.Y8G("ngIf",o.newSpeciesPhotos.length<3),e.R7$(3),e.SpI(" ",e.bMT(26,30,"Scientific Name")," "),e.R7$(3),e.R50("ngModel",o.newSpeciesScientificName),e.R7$(3),e.SpI(" ",e.bMT(32,32,"Common Name (English)")," "),e.R7$(3),e.R50("ngModel",o.newSpeciesCommonName),e.R7$(3),e.SpI(" ",e.bMT(38,34,"Creole Name")," "),e.R7$(3),e.R50("ngModel",o.newSpeciesCreoleName),e.R7$(3),e.SpI(" ",e.bMT(44,36,"Description")," "),e.R7$(4),e.R50("ngModel",o.newSpeciesDescription),e.Y8G("placeholder",e.bMT(48,38,"Describe the species (required)")),e.R7$(2),e.Y8G("disabled",!o.canSubmitNewSpecies()),e.R7$(2),e.SpI(" ",e.bMT(52,40,"Add Species")," ")}}function ie(i,l){if(1&i&&e.nrm(0,"span",71),2&i){const o=l.index,t=e.XpG(2).$implicit;e.AVh("active",o===t.currentImageIndex)}}function se(i,l){if(1&i&&(e.j41(0,"div",69),e.DNE(1,ie,1,2,"span",70),e.k0s()),2&i){const o=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",o.imagePath)}}function re(i,l){1&i&&(e.j41(0,"span",72),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"Pending")))}function ce(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-button",73),e.bIt("click",function(n){s.eBV(o);const a=e.XpG().$implicit;return e.XpG().startEditSpecies(a),s.Njj(n.stopPropagation())}),e.nrm(1,"ion-icon",74),e.k0s()}}function le(i,l){1&i&&(e.j41(0,"span",75),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"Custom")))}function de(i,l){if(1&i&&(e.j41(0,"span",76),e.EFF(1),e.k0s()),2&i){const o=e.XpG().$implicit;e.R7$(),e.JRh(o.group)}}function pe(i,l){if(1&i&&(e.j41(0,"span",77),e.EFF(1),e.k0s()),2&i){const o=e.XpG().$implicit;e.R7$(),e.JRh(o.category)}}function ue(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",53),e.bIt("click",function(){const n=s.eBV(o).$implicit,a=e.XpG();return s.Njj(a.toggleSpecies(n))})("touchstart",function(n){const a=s.eBV(o).$implicit,r=e.XpG();return s.Njj(r.onTouchStart(a,n))})("touchend",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.onTouchEnd())})("touchmove",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.onTouchEnd())})("mousedown",function(n){const a=s.eBV(o).$implicit,r=e.XpG();return s.Njj(r.onTouchStart(a,n))})("mouseup",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.onTouchEnd())})("mouseleave",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.onTouchEnd())}),e.j41(1,"div",54)(2,"img",55),e.bIt("contextmenu",function(n){return s.eBV(o),n.preventDefault(),s.Njj(n.stopPropagation())}),e.k0s(),e.DNE(3,se,2,1,"div",56)(4,re,3,3,"span",57)(5,ce,2,0,"ion-button",58),e.k0s(),e.j41(6,"div",59)(7,"div",60)(8,"strong"),e.EFF(9),e.k0s(),e.DNE(10,le,3,3,"span",61),e.k0s(),e.j41(11,"div",62)(12,"em"),e.EFF(13),e.k0s()(),e.j41(14,"div",63)(15,"span",64),e.EFF(16),e.k0s(),e.DNE(17,de,2,1,"span",65)(18,pe,2,1,"span",66),e.k0s()(),e.j41(19,"div",67),e.nrm(20,"ion-checkbox",68),e.k0s()()}if(2&i){const o=l.$implicit,t=e.XpG();e.AVh("selected",o.selected)("custom-species",o.isCustom),e.R7$(),e.Y8G("ngClass",t.getImageRotationClass(o)),e.R7$(),e.Y8G("src",t.getCurrentImagePath(o),e.B4B)("alt",o.scientificName),e.R7$(),e.Y8G("ngIf",t.isArrayWithMultipleImages(o.imagePath)),e.R7$(),e.Y8G("ngIf",o.pendingApproval),e.R7$(),e.Y8G("ngIf",t.canEditSpecies(o)),e.R7$(4),e.JRh(o.vernacularName),e.R7$(),e.Y8G("ngIf",o.isCustom&&!o.pendingApproval),e.R7$(3),e.JRh(o.scientificName),e.R7$(2),e.BMQ("data-status",o.iucnStatus),e.R7$(),e.JRh(o.iucnStatus),e.R7$(),e.Y8G("ngIf","fauna"===t.type),e.R7$(),e.Y8G("ngIf","flora"===t.type),e.R7$(2),e.Y8G("checked",o.selected)}}function me(i,l){1&i&&(e.j41(0,"div",78),e.nrm(1,"ion-icon",79),e.j41(2,"p"),e.EFF(3),e.nI1(4,"t"),e.k0s()()),2&i&&(e.R7$(3),e.JRh(e.bMT(4,1,"No species found")))}function ge(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",43),e.nrm(1,"img",44),e.nI1(2,"t"),e.j41(3,"ion-button",45),e.bIt("click",function(){const n=s.eBV(o).index,a=e.XpG(2);return s.Njj(a.removeEditSpeciesPhoto(n))}),e.nrm(4,"ion-icon",46),e.k0s()()}if(2&i){const o=l.$implicit;e.R7$(),e.Y8G("src",o,e.B4B)("alt",e.bMT(2,2,"Species photo"))}}function he(i,l){1&i&&e.nrm(0,"ion-icon",51)}function fe(i,l){1&i&&e.nrm(0,"ion-spinner",52)}function _e(i,l){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"Add Photo")))}function be(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",47),e.bIt("click",function(){s.eBV(o);const n=e.XpG(2);return s.Njj(n.captureEditSpeciesPhoto())}),e.DNE(1,he,1,0,"ion-icon",48)(2,fe,1,0,"ion-spinner",49)(3,_e,3,3,"span",50),e.k0s()}if(2&i){const o=e.XpG(2);e.R7$(),e.Y8G("ngIf",!o.isUploadingEditPhoto),e.R7$(),e.Y8G("ngIf",o.isUploadingEditPhoto),e.R7$(),e.Y8G("ngIf",!o.isUploadingEditPhoto)}}function ve(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",80)(1,"div",81)(2,"div",82)(3,"h3"),e.EFF(4),e.nI1(5,"t"),e.k0s(),e.j41(6,"ion-button",26),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.cancelEditSpecies())}),e.nrm(7,"ion-icon",3),e.k0s()(),e.j41(8,"div",83)(9,"div",28)(10,"ion-label",29),e.EFF(11),e.nI1(12,"t"),e.j41(13,"span",30),e.EFF(14,"*"),e.k0s(),e.j41(15,"span",31),e.EFF(16),e.nI1(17,"t"),e.k0s()(),e.j41(18,"div",32),e.DNE(19,ge,5,4,"div",33)(20,be,4,3,"div",34),e.k0s()(),e.j41(21,"div",35)(22,"ion-label",29),e.EFF(23),e.nI1(24,"t"),e.j41(25,"ion-icon",36),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.showInfoTooltip("scientific"))}),e.k0s()(),e.j41(26,"ion-input",37),e.mxI("ngModelChange",function(n){s.eBV(o);const a=e.XpG();return e.DH7(a.editSpeciesScientificName,n)||(a.editSpeciesScientificName=n),s.Njj(n)}),e.k0s()(),e.j41(27,"div",35)(28,"ion-label",29),e.EFF(29),e.nI1(30,"t"),e.j41(31,"ion-icon",36),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.showInfoTooltip("common"))}),e.k0s()(),e.j41(32,"ion-input",38),e.mxI("ngModelChange",function(n){s.eBV(o);const a=e.XpG();return e.DH7(a.editSpeciesCommonName,n)||(a.editSpeciesCommonName=n),s.Njj(n)}),e.k0s()(),e.j41(33,"div",35)(34,"ion-label",29),e.EFF(35),e.nI1(36,"t"),e.j41(37,"ion-icon",36),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.showInfoTooltip("creole"))}),e.k0s()(),e.j41(38,"ion-input",39),e.mxI("ngModelChange",function(n){s.eBV(o);const a=e.XpG();return e.DH7(a.editSpeciesCreoleName,n)||(a.editSpeciesCreoleName=n),s.Njj(n)}),e.k0s()(),e.j41(39,"div",35)(40,"ion-label",29),e.EFF(41),e.nI1(42,"t"),e.j41(43,"span",30),e.EFF(44,"*"),e.k0s()(),e.j41(45,"ion-textarea",40),e.nI1(46,"t"),e.mxI("ngModelChange",function(n){s.eBV(o);const a=e.XpG();return e.DH7(a.editSpeciesDescription,n)||(a.editSpeciesDescription=n),s.Njj(n)}),e.k0s()(),e.j41(47,"div",84)(48,"ion-button",85),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.saveEditSpecies())}),e.nrm(49,"ion-icon",42),e.EFF(50),e.nI1(51,"t"),e.k0s(),e.j41(52,"ion-button",86),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.deleteEditSpecies())}),e.nrm(53,"ion-icon",87),e.EFF(54),e.nI1(55,"t"),e.k0s()()()()()}if(2&i){const o=e.XpG();e.R7$(4),e.JRh(e.bMT(5,17,"Edit Species")),e.R7$(7),e.SpI(" ",e.bMT(12,19,"Photos")," "),e.R7$(5),e.SpI("(",e.bMT(17,21,"1-3 photos required"),")"),e.R7$(3),e.Y8G("ngForOf",o.editSpeciesPhotos),e.R7$(),e.Y8G("ngIf",o.editSpeciesPhotos.length<3),e.R7$(3),e.SpI(" ",e.bMT(24,23,"Scientific Name")," "),e.R7$(3),e.R50("ngModel",o.editSpeciesScientificName),e.R7$(3),e.SpI(" ",e.bMT(30,25,"Common Name (English)")," "),e.R7$(3),e.R50("ngModel",o.editSpeciesCommonName),e.R7$(3),e.SpI(" ",e.bMT(36,27,"Creole Name")," "),e.R7$(3),e.R50("ngModel",o.editSpeciesCreoleName),e.R7$(3),e.SpI(" ",e.bMT(42,29,"Description")," "),e.R7$(4),e.R50("ngModel",o.editSpeciesDescription),e.Y8G("placeholder",e.bMT(46,31,"Describe the species (required)")),e.R7$(3),e.Y8G("disabled",!o.canSaveEditSpecies()),e.R7$(2),e.SpI(" ",e.bMT(51,33,"Save Changes")," "),e.R7$(4),e.SpI(" ",e.bMT(55,35,"Delete Species")," ")}}function Pe(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",103),e.bIt("click",function(n){const a=s.eBV(o).index;return e.XpG(3).goToSlideshowImage(a),s.Njj(n.stopPropagation())}),e.k0s()}if(2&i){const o=l.index,t=e.XpG(3);e.AVh("active",o===t.slideshowImageIndex)}}function Ce(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",96)(1,"button",97),e.bIt("click",function(n){return s.eBV(o),e.XpG(2).previousSlideshowImage(),s.Njj(n.stopPropagation())}),e.nrm(2,"ion-icon",98),e.k0s(),e.j41(3,"div",99),e.DNE(4,Pe,1,2,"span",100),e.k0s(),e.j41(5,"button",101),e.bIt("click",function(n){return s.eBV(o),e.XpG(2).nextSlideshowImage(),s.Njj(n.stopPropagation())}),e.nrm(6,"ion-icon",102),e.k0s()()}if(2&i){const o=e.XpG(2);e.R7$(4),e.Y8G("ngForOf",o.getSlideshowImages())}}function Me(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",88),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.closeSlideshow())}),e.j41(1,"div",89),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.closeSlideshow())}),e.nrm(2,"ion-icon",90),e.k0s(),e.j41(3,"div",91),e.bIt("click",function(n){return s.eBV(o),s.Njj(n.stopPropagation())}),e.j41(4,"div",92)(5,"img",93),e.bIt("contextmenu",function(n){return s.eBV(o),n.preventDefault(),s.Njj(n.stopPropagation())}),e.k0s()(),e.j41(6,"div",94)(7,"h3"),e.EFF(8),e.k0s(),e.j41(9,"p")(10,"em"),e.EFF(11),e.k0s()()(),e.DNE(12,Ce,7,1,"div",95),e.k0s()()}if(2&i){const o=e.XpG();e.R7$(4),e.Y8G("ngClass",o.getSlideshowRotationClass()),e.R7$(),e.Y8G("src",o.getCurrentSlideshowImage(),e.B4B)("alt",null==o.slideshowSpecies?null:o.slideshowSpecies.scientificName),e.R7$(3),e.JRh(null==o.slideshowSpecies?null:o.slideshowSpecies.vernacularName),e.R7$(3),e.JRh(null==o.slideshowSpecies?null:o.slideshowSpecies.scientificName),e.R7$(),e.Y8G("ngIf",o.getSlideshowImageCount()>1)}}let j=(()=>{var i;class l{constructor(t,n,a,r,c,d,u){this.modalController=t,this.alertController=n,this.loadingController=a,this.speciesSyncService=r,this.auth=c,this.photoService=d,this.ts=u,this.excludedSpecies=[],this.userLevel=1,this.speciesList=[],this.filteredSpecies=[],this.searchTerm="",this.imageRotationIntervals=new Map,this.showSlideshow=!1,this.slideshowSpecies=null,this.slideshowImageIndex=0,this.rotatedLeftImages=new Set(["assets/fauna/NS_Common_greenshank3.webp"]),this.rotatedRightImages=new Set(["assets/fauna/NS_Red_mangrove_crab2.webp"]),this.longPressTimer=null,this.longPressTriggered=!1,this.showAddSpeciesForm=!1,this.newSpeciesScientificName="",this.newSpeciesCommonName="",this.newSpeciesCreoleName="",this.newSpeciesDescription="",this.newSpeciesPhotos=[],this.isUploadingPhoto=!1,this.currentUser=null,this.userSubscription=null,this.isEditingSpecies=!1,this.editingSpecies=null,this.editSpeciesId="",this.editSpeciesScientificName="",this.editSpeciesCommonName="",this.editSpeciesCreoleName="",this.editSpeciesDescription="",this.editSpeciesPhotos=[],this.isUploadingEditPhoto=!1,this.floraData=[{scientificName:"Acrostichum aureum",vernacularName:"Fouzer lanmar, Golden Leather Fern",iucnStatus:"LC",category:"Mangrove Associates",imagePath:["assets/flora/NS_Golden leather fern.webp","assets/flora/NS_Golden_leather_fern1.webp","assets/flora/NS_Golden_leather_fern2.webp","assets/flora/NS_Golden_leather_fern3.webp","assets/flora/NS_Golden_leather_fern4.webp","assets/flora/golden_leather_fern1.webp","assets/flora/golden_leather_leaf2.webp"],selected:!1},{scientificName:"Barringtonia asiatica",vernacularName:"Bonnen kare bor-d-mer, Fish poison tree",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/fish_poison_tree2.webp","assets/flora/fish_poison_tree1.webp"],selected:!1},{scientificName:"Calophyllum inophyllum",vernacularName:"Pye takamaka, Takamaka",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/takamaka2.webp","assets/flora/takamaka1.webp","assets/flora/takamaka3.webp"],selected:!1},{scientificName:"Casuarina equisetifolia",vernacularName:"Sed, Casuarina",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/casuarina2.webp","assets/flora/casuarina1.webp"],selected:!1},{scientificName:"Heritiera littoralis",vernacularName:"Bwa-d-tab, Looking glass tree",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/LOOKING_GLASS_TREE.webp","assets/flora/looking_glass_tree3.webp","assets/flora/looking_glass_tree4.webp","assets/flora/looking_glass_tree1.webp"],selected:!1},{scientificName:"Hernandia nymphaeifolia",vernacularName:"Bwa blan, Lantern tree",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/lantern_tree2.webp","assets/flora/lantern_tree1.webp"],selected:!1},{scientificName:"Terminalia catappa",vernacularName:"Bodanmyen, Indian almond",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/indian_almond1.webp","assets/flora/indian_almond2.webp","assets/flora/indian_almond3.webp"],selected:!1},{scientificName:"Thespesia populnea",vernacularName:"Bwa-d-roz, Pacific rosewood",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/NS_Pacific_rosewood1.webp","assets/flora/NS_Pacific_rosewood2.webp","assets/flora/NS_Pacific_rosewood3.webp","assets/flora/pacific_rosewood2.webp","assets/flora/pacific_rosewood1.webp"],selected:!1},{scientificName:"Cocos nucifera",vernacularName:"Pye koko, Coconut palm",iucnStatus:"NE",category:"Coastal Vegetation",imagePath:["assets/flora/coconut1.webp","assets/flora/coconut2.webp"],selected:!1},{scientificName:"Martellidendron hornei",vernacularName:"Vakwa parasol, Horne's pandanus",iucnStatus:"VU",category:"Coastal Vegetation",imagePath:["assets/flora/horne_pandanus1.webp","assets/flora/horne_pandanus2.webp"],selected:!1},{scientificName:"Pandanus balfourii",vernacularName:"Vakwa bordmer, Balfour's Pandanus",iucnStatus:"VU",category:"Coastal Vegetation",imagePath:["assets/flora/NS_BALFOUR_S PANDANUS.webp","assets/flora/NSBalfour-pandanus.webp","assets/flora/NSBalfour1.webp","assets/flora/NSBalfourpandanus2.webp"],selected:!1},{scientificName:"Pandanus sechellarum",vernacularName:"Vakwa maron, Seychelles pandanus",iucnStatus:"NT",category:"Coastal Vegetation",imagePath:["assets/flora/seychelles_pandanus1.webp","assets/flora/seychelles_pandanus2.webp"],selected:!1},{scientificName:"Colubrina asiatica",vernacularName:"Bwa savon, Latherleaf",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/NS_Latherleaf_ Bwa savon.webp","assets/flora/lather_leaf2.webp","assets/flora/lather_leaf1.webp"],selected:!1},{scientificName:"Cordia subcordata",vernacularName:"Porse, Sea trumpet",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/sea_trumpet1.webp","assets/flora/sea_trumpet2.webp","assets/flora/sea_trumpet3.webp","assets/flora/sea_trumpet4.webp"],selected:!1},{scientificName:"Guettarda speciosa",vernacularName:"Bwa kasan bor-d-mer, Beach gardenia",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/beach_gardenia2.webp","assets/flora/beach_gardenia1.webp","assets/flora/beach_gardenia3.webp","assets/flora/beach_gardenia4.webp"],selected:!1},{scientificName:"Hibiscus tiliaceus",vernacularName:"Var, Sea hibiscus",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/sea_hibiscus3.webp","assets/flora/sea_hibiscus2.webp","assets/flora/sea_hibiscus1.webp"],selected:!1},{scientificName:"Leucaena leucocephala",vernacularName:"Kasi, Wild tamarind",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/NS_Wild_tamarind_ Kasi.webp","assets/flora/wild_tamarind1.webp","assets/flora/wild_tamarind2.webp"],selected:!1},{scientificName:"Morinda citrifolia",vernacularName:"Bwa torti, Indian Mulberry",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/indian_mulberry1.webp","assets/flora/wild_mulberry2.webp","assets/flora/wild_mulberry3.webp"],selected:!1},{scientificName:"Pithecellobium unguis-cati",vernacularName:"Kanpes, Cat's claw",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/cat_claw2.webp","assets/flora/cat_claw1.webp","assets/flora/cat_claw3.webp"],selected:!1},{scientificName:"Ricinus communis",vernacularName:"Tantan, Castor oil plant",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/castor_oil_plant1.webp","assets/flora/castor_oil_plant2.webp"],selected:!1},{scientificName:"Scaevola taccada",vernacularName:"Vouloutye, Beach cabbage",iucnStatus:"NE",category:"Coastal Vegetation",imagePath:["assets/flora/beach_cabbage2.webp","assets/flora/beach_cabbage3.webp","assets/flora/beach_cabbage1.webp"],selected:!1},{scientificName:"Turnera ulmifolia",vernacularName:"Koket, Yellow alder",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/yellow_alder3.webp","assets/flora/yellow_alder2.webp","assets/flora/yellow_alder1.webp"],selected:!1},{scientificName:"Derris trifoliata",vernacularName:"Deris, Common derris",iucnStatus:"",category:"Coastal Vegetation",imagePath:["assets/flora/common_derris3.webp","assets/flora/common_derris1.webp","assets/flora/common_derris2.webp","assets/flora/common_derris4.webp"],selected:!1},{scientificName:"Ipomoea pes-caprae",vernacularName:"Patatran, Beach morning glory",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/beach_morning_glory3.webp","assets/flora/beach_morning_glory2.webp","assets/flora/beach_morning_glory1.webp"],selected:!1},{scientificName:"Hymenocallis littoralis",vernacularName:"Lis bor-d-mer, Spider lily",iucnStatus:"NE",category:"Coastal Vegetation",imagePath:["assets/flora/spider_lily1.webp","assets/flora/spider_lily2.webp","assets/flora/spider_lily3.webp"],selected:!1},{scientificName:"Ludwigia octovalvis",vernacularName:"Lerb lanmar, Mexican primrose-willow",iucnStatus:"LC",category:"Coastal Vegetation",imagePath:["assets/flora/mexican_primrose1.webp","assets/flora/mexican_primrose2.webp","assets/flora/mexican_primrose3.webp"],selected:!1},{scientificName:"Stenotaphrum dimidiatum",vernacularName:"Lerb koko, Buffalo grass",iucnStatus:"NE",category:"Coastal Vegetation",imagePath:["assets/flora/buffalo_grass2.webp","assets/flora/buffalo_grass1.webp","assets/flora/buffalo_grass3.webp"],selected:!1},{scientificName:"Adenanthera pavonina",vernacularName:"Pye lagati, Red bead tree",iucnStatus:"LC",category:"Other Vegetation",imagePath:["assets/flora/red_bead_tree1.webp","assets/flora/red_bead_tree2.webp","assets/flora/red_bead_tree3.webp","assets/flora/red_bead_tree4.webp"],selected:!1},{scientificName:"Albizia julibrissin",vernacularName:"Albizya, Silk tree",iucnStatus:"",category:"Other Vegetation",imagePath:"assets/flora/NS_Silk_tree_ Albizya.webp",selected:!1},{scientificName:"Bambusa sp.",vernacularName:"Banbou, Bamboo tree",iucnStatus:"",category:"Other Vegetation",imagePath:["assets/flora/bambou1.webp","assets/flora/bambou2.webp","assets/flora/bambou3.webp"],selected:!1},{scientificName:"Cinnamomum verum",vernacularName:"Kannel, True cinnamon",iucnStatus:"VU",category:"Other Vegetation",imagePath:["assets/flora/cinnamon1.webp","assets/flora/cinnamon2.webp","assets/flora/cinnamon3.webp","assets/flora/cinnamon4.webp"],selected:!1},{scientificName:"Ficus lutea",vernacularName:"Lafous gran fey, Giant-leaved fig",iucnStatus:"LC",category:"Other Vegetation",imagePath:["assets/flora/giant_fig1.webp","assets/flora/giant_fig2.webp","assets/flora/giant_fig3.webp","assets/flora/giant_fig4.webp"],selected:!1},{scientificName:"Tabebuia pallida",vernacularName:"Kalis-di-pap, White cedar",iucnStatus:"LC",category:"Other Vegetation",imagePath:["assets/flora/white_cedar1.webp","assets/flora/white_cedar2.webp","assets/flora/white_cedar3.webp"],selected:!1},{scientificName:"Deckenia nobilis",vernacularName:"Palmis, Cabbage palm",iucnStatus:"VU",category:"Other Vegetation",imagePath:["assets/flora/cabbage_palm1.webp","assets/flora/cabbage_palm3.webp","assets/flora/cabbage_palm2.webp"],selected:!1},{scientificName:"Phoenicophorium borsigianum",vernacularName:"Latannyen fey, Thief palm",iucnStatus:"LC",category:"Other Vegetation",imagePath:["assets/flora/thief_palm1.webp","assets/flora/thief_palm2.webp"],selected:!1},{scientificName:"Verschaffeltia splendida",vernacularName:"Latannyen lat, Stilt palm",iucnStatus:"NT",category:"Other Vegetation",imagePath:["assets/flora/stilt_palm1.webp","assets/flora/stilt_palm2.webp","assets/flora/stilt_palm3.webp","assets/flora/stilt_palm4.webp"],selected:!1},{scientificName:"Chrysobalanus icaco",vernacularName:"Prin-de-Frans, Cocoplum",iucnStatus:"LC",category:"Other Vegetation",imagePath:["assets/flora/cocoplum1.webp","assets/flora/cocoplum2.webp","assets/flora/cocoplum3.webp","assets/flora/cocoplum4.webp"],selected:!1},{scientificName:"Codiaeum variegatum",vernacularName:"Kroton, Garden Croton",iucnStatus:"LC",category:"Other Vegetation",imagePath:["assets/flora/garden_croton1.webp","assets/flora/garden_croton2.webp","assets/flora/garden_croton3.webp","assets/flora/garden_croton4.webp"],selected:!1},{scientificName:"Cordyline fruticosa",vernacularName:"Ti plant",iucnStatus:"LC",category:"Other Vegetation",imagePath:["assets/flora/ti1.webp","assets/flora/ti2.webp","assets/flora/ti3.webp"],selected:!1},{scientificName:"Combretum indicum",vernacularName:"Rangoon creeper",iucnStatus:"",category:"Other Vegetation",imagePath:"assets/flora/NS_Rangoon_creeper.webp",selected:!1},{scientificName:"Ipomoea fistulosa",vernacularName:"Lalyann fler krenm, Pink morning glory",iucnStatus:"NE",category:"Other Vegetation",imagePath:["assets/flora/pink_morning_glory1.webp","assets/flora/pink_morning_glory2.webp","assets/flora/pink_morning_glory3.webp"],selected:!1},{scientificName:"Passiflora foetida",vernacularName:"Bonbonplim, Wild passion flower",iucnStatus:"",category:"Other Vegetation",imagePath:["assets/flora/wild_passion_flower1.webp","assets/flora/wild_passion_flower2.webp","assets/flora/wild_passion_flower3.webp","assets/flora/wild_passion_flower4.webp"],selected:!1},{scientificName:"Alocasia macrorrhizos",vernacularName:"Vya, Giant taro",iucnStatus:"NE",category:"Other Vegetation",imagePath:["assets/flora/NS_Giant_taro1.webp","assets/flora/NS_Giant_taro2.webp","assets/flora/giant_taro2.webp","assets/flora/giant_taro3.webp"],selected:!1},{scientificName:"Musa sp.",vernacularName:"Pye bannann, Banana",iucnStatus:"",category:"Other Vegetation",imagePath:["assets/flora/banana1.webp","assets/flora/banana2.webp","assets/flora/banana3.webp"],selected:!1},{scientificName:"Microsorum scolopendria",vernacularName:"Kapiler, Monarch fern",iucnStatus:"",category:"Other Vegetation",imagePath:["assets/flora/monarch_fern1.webp","assets/flora/monarch_fern2.webp","assets/flora/monarch_fern3.webp","assets/flora/monarch_fern4.webp","assets/flora/NSMonarchfern_Kapiler1.webp","assets/flora/NSMonarchfern_kapiler2.webp"],selected:!1},{scientificName:"Halodule uninervis",vernacularName:"Gomon zerb torti, Narrowleaf seagrass",iucnStatus:"LC",category:"Seagrass",imagePath:["assets/flora/narrowleaf_seagrass1.webp","assets/flora/narrowleaf_seagrass2.webp"],selected:!1},{scientificName:"Halophila ovalis",vernacularName:"Gomon zerb zorey lapen, Spoon seagrass",iucnStatus:"LC",category:"Seagrass",imagePath:["assets/flora/spoon_seagrass1.webp","assets/flora/spoon_seagrass2.webp"],selected:!1},{scientificName:"Halophila stipulacea",vernacularName:"Gomon zerb zorey lapen, Broadleaf seagrass",iucnStatus:"LC",category:"Seagrass",imagePath:["assets/flora/broadleaf_seagrass1.webp","assets/flora/broadleaf_seagrass2.webp"],selected:!1},{scientificName:"Oceana serrulata",vernacularName:"Gomon zerb torti, Serrated ribbon seagrass",iucnStatus:"LC",category:"Seagrass",imagePath:["assets/flora/ribbon_seagrass1.webp","assets/flora/ribbon_seagrass2.webp"],selected:!1},{scientificName:"Syringodium isoetifolium",vernacularName:"Gomon zerb spageti, Noodle seagrass",iucnStatus:"LC",category:"Seagrass",imagePath:["assets/flora/noodle_seagrass1.webp","assets/flora/noodle_seagrass2.webp"],selected:!1}],this.faunaData=[{scientificName:"Pteropus seychellensis",vernacularName:"Sousouri, Seychelles fruit bat",iucnStatus:"LC",group:"Mammal",imagePath:["assets/fauna/seychelles_fruit_bat1.webp","assets/fauna/seychelles_fruit_bat2.webp"],selected:!1},{scientificName:"Coleura seychellensis",vernacularName:"Sousouri bannann, Sheath-tailed bat",iucnStatus:"CR",group:"Mammal",imagePath:["assets/fauna/sheath_tailed_bat1.webp","assets/fauna/sheath_tailed_bat2.webp"],selected:!1},{scientificName:"Mus musculus",vernacularName:"Souri, House mouse",iucnStatus:"",group:"Mammal",imagePath:"assets/fauna/house_mouse1.webp",selected:!1},{scientificName:"Rattus rattus",vernacularName:"Lera, Black rat",iucnStatus:"",group:"Mammal",imagePath:["assets/fauna/black_rat1.webp","assets/fauna/black_rat2.webp"],selected:!1},{scientificName:"Tenrec ecaudatus",vernacularName:"Tang, Tailless tenrec",iucnStatus:"",group:"Mammal",imagePath:["assets/fauna/tailless_tenrec1.webp","assets/fauna/tailless_tenrec2.webp"],selected:!1},{scientificName:"Ardea cinerea",vernacularName:"Floranten sann, Grey heron",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/NS_GREY_HERON.webp","assets/fauna/NS_Grey_heron1.webp","assets/fauna/NS_Grey_heron2.webp"],selected:!1},{scientificName:"Bubulcus ibis",vernacularName:"Madanm paton, Cattle egret",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/NS_CATTLE_EGRET.webp","assets/fauna/NS_Cattle_egret_1.webp","assets/fauna/NS_Cattle_egret_2.webp"],selected:!1},{scientificName:"Butorides striatus",vernacularName:"Manik, Green-backed heron",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/NS_GREEN-BACKED_HERON.webp","assets/fauna/NS_Green-backed_Heron1.webp"],selected:!1},{scientificName:"Nycticorax nycticorax",vernacularName:"Manik lannwit, Black crowned night heron",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/black_crowned_night_heron1.webp","assets/fauna/black_crowned_night_heron2.webp"],selected:!1},{scientificName:"Alectroenas pulcherrima",vernacularName:"Pizon olande, Seychelles blue pigeon",iucnStatus:"LC",group:"Bird",imagePath:"assets/fauna/seychelles_blue_pigeon1.webp",selected:!1},{scientificName:"Geopelia striata",vernacularName:"Tourtrel, Barred ground dove",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/NS_Barred_ground_dove1.webp","assets/fauna/barred_ground_dove1.webp","assets/fauna/barred_ground_dove2.webp"],selected:!1},{scientificName:"Nesoenas picturatus",vernacularName:"Tourtrel de zil, Malagasy turtle dove",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/NS_Malagasy_turtle_dove1.webp","assets/fauna/malagasy_turtle_dove1.webp","assets/fauna/malagasy_turtle_dove2.webp"],selected:!1},{scientificName:"Arenaria interpres",vernacularName:"Bezroz, Ruddy turnstone",iucnStatus:"NT",group:"Bird",imagePath:["assets/fauna/NS_RUDDY_TURNSTONE.webp","assets/fauna/NS_Ruddy_turnstone1.webp","assets/fauna/NS_Ruddy_turnstone2.webp"],selected:!1},{scientificName:"Tringa nebularia",vernacularName:"Kavalye lapat ver, Common greenshank",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/NS_Common_greenshank1.webp","assets/fauna/NS_Common_greenshank2.webp","assets/fauna/NS_Common_greenshank3.webp"],selected:!1},{scientificName:"Numenius phaeopus",vernacularName:"Korbizo, Whimbrel",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/NS_Whimbrel.3.webp"],selected:!1},{scientificName:"Pluvialis squatarola",vernacularName:"Plivye sann, Grey plover",iucnStatus:"VU",group:"Bird",imagePath:["assets/fauna/NS_Grey_plover.webp","assets/fauna/grey_plover1.webp","assets/fauna/grey_plover2.webp"],selected:!1},{scientificName:"Acridotheres tristis",vernacularName:"Marten, Indian myna",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/indian_myna1.webp","assets/fauna/indian_myna2.webp"],selected:!1},{scientificName:"Aerodramus elaphrus",vernacularName:"Zirondel, Seychelles swiftlet",iucnStatus:"VU",group:"Bird",imagePath:"assets/fauna/seychelles_swiftlet1.webp",selected:!1},{scientificName:"Cinnyris dussumieri",vernacularName:"Kolibri sesel, Seychelles sunbird",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/seychelles_sunbird1.webp","assets/fauna/seychelles_sunbird2.webp"],selected:!1},{scientificName:"Collocalia elaphra",vernacularName:"Zirondel, Seychelles cave swiftlet",iucnStatus:"VU",group:"Bird",imagePath:"assets/fauna/collocalia_elaphra1.webp",selected:!1},{scientificName:"Foudia madagascariensis",vernacularName:"Sren, Madagascar fody",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/NS_Madagascar_fody.webp","assets/fauna/NS_Madagascar_fody1.webp","assets/fauna/NS_Madagascar_fody2.webp","assets/fauna/madagascar_fody1.webp","assets/fauna/madagascar_fody2.webp"],selected:!1},{scientificName:"Gallinula chloropus",vernacularName:"Pouldo, Common moorhen",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/NS_COMMON_MOORHEN.webp","assets/fauna/NS_Moorhen_1.webp","assets/fauna/common_moorhen1.webp","assets/fauna/common_moorhen2.webp"],selected:!1},{scientificName:"Hypsipetes crassirostris",vernacularName:"Merl, Seychelles bulbul",iucnStatus:"LC",group:"Bird",imagePath:["assets/fauna/seychelles_bulbul1.webp","assets/fauna/seychelles_bulbul2.webp"],selected:!1},{scientificName:"Tyto alba",vernacularName:"Ibou, Barn owl",iucnStatus:"",group:"Bird",imagePath:["assets/fauna/barn_owl1.webp","assets/fauna/barn_owl2.webp"],selected:!1},{scientificName:"Aetobatus narinari",vernacularName:"Lare sousouri, Spotted eagle ray",iucnStatus:"EN",group:"Fish",imagePath:["assets/fauna/spotted_eagle_ray1.webp","assets/fauna/spotted_eagle_ray2.webp"],selected:!1},{scientificName:"Patinachus sephen",vernacularName:"Lare lafwet, Cowtail stingray",iucnStatus:"VU",group:"Fish",imagePath:["assets/fauna/NS_FEATHERTAIL_SRTINGRAY.webp","assets/fauna/NS_feather_tail_stingray.webp","assets/fauna/NS_feather_tail_stingray2.webp"],selected:!1},{scientificName:"Lutjanus argentimaculatus",vernacularName:"Karp, Mangrove red snapper",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/mangrove_red_snapper1.webp","assets/fauna/mangrove_red_snapper2.webp","assets/fauna/mangrove_red_snapper3.webp"],selected:!1},{scientificName:"Lutjanus fulviflamma",vernacularName:"Ziblo, Black spot snapper",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/black_spot_snapper1.webp","assets/fauna/black_spot_snapper2.webp"],selected:!1},{scientificName:"Lutjanus kasmira",vernacularName:"Madras are, Blue stripe snapper",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/blue_stripe_snapper1.webp","assets/fauna/blue_stripe_snapper2.webp"],selected:!1},{scientificName:"Lutjanus sebae",vernacularName:"Bourzwa, Emperor red snapper",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/emperor_red_snapper1.webp","assets/fauna/emperor_red_snapper2.webp"],selected:!1},{scientificName:"Lethrinus mahsena",vernacularName:"Madanm beri, Sky emperor",iucnStatus:"EN",group:"Fish",imagePath:["assets/fauna/sky_emperor1.webp","assets/fauna/sky_emperor2.webp"],selected:!1},{scientificName:"Lethrinus lentjan",vernacularName:"Zekler, Pink ear emperor",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/pink_ear_emperor1.webp","assets/fauna/pink_ear_emperor2.webp"],selected:!1},{scientificName:"Lethrinus nebulosus",vernacularName:"Kaptenn rouz, Spangled emperor",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/spangled_emperor1.webp","assets/fauna/spangled_emperor2.webp"],selected:!1},{scientificName:"Ophiocara porocephala",vernacularName:"Makanbale, Spangled gudgeon",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/spangled_gudgeon1.webp","assets/fauna/spangled_gudgeon2.webp"],selected:!1},{scientificName:"Periophthalmus argentilineatus",vernacularName:"Kabo soter, Barred mudskipper",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/NS_MUDSKIPPER.webp","assets/fauna/NS_Mudskipper_2.webp"],selected:!1},{scientificName:"Redigobius bikolanus",vernacularName:"Gobi tase, Speckled goby",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/speckled_goby1.webp","assets/fauna/speckled_goby2.webp"],selected:!1},{scientificName:"Ambassis dussumieri",vernacularName:"Ambache de Dussumier, Barehead glassfish",iucnStatus:"LC",group:"Fish",imagePath:"assets/fauna/barehead_glassfish1.webp",selected:!1},{scientificName:"Ambassis urotaenia",vernacularName:"Ambache, Banded-tail glassy perchlet",iucnStatus:"LC",group:"Fish",imagePath:"assets/fauna/banded_tail_glassy_perchlet1.webp",selected:!1},{scientificName:"Epinephelus summana",vernacularName:"Vielle platte, Summan grouper",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/summan_grouper1.webp","assets/fauna/summan_grouper2.webp"],selected:!1},{scientificName:"Gafrarium tumidum",vernacularName:"Palourd, Swollen circe",iucnStatus:"DD",group:"Invertebrate",imagePath:"assets/fauna/swollen_circe1.webp",selected:!1},{scientificName:"Gerres oyena",vernacularName:"Breton, Common silver-biddy",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/common_silver_biddy1.webp","assets/fauna/common_silver_biddy2.webp"],selected:!1},{scientificName:"Kuhlia rupestris",vernacularName:"Carpe, Rock flagtail",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/rock_flagtail1.webp","assets/fauna/rock_flagtail2.webp"],selected:!1},{scientificName:"Monodactylus argenteus",vernacularName:"Breton, Silver moony",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/silver_moony1.webp","assets/fauna/silver_moony2.webp"],selected:!1},{scientificName:"Oreochromis mossambicus",vernacularName:"Tilapya, Mozambique tilapia",iucnStatus:"VU",group:"Fish",imagePath:["assets/fauna/mozambique_tilapia1.webp","assets/fauna/mozambique_tilapia2.webp"],selected:!1},{scientificName:"Pachypanchax playfairii",vernacularName:"Gourzon, Seychelles killifish",iucnStatus:"DD",group:"Fish",imagePath:["assets/fauna/golden_panchax1.webp","assets/fauna/golden_panchax2.webp"],selected:!1},{scientificName:"Parioglossus multiradiatus",vernacularName:"Parioglos Seselwa Are, Multiradiated pygmy goby",iucnStatus:"DD",group:"Fish",imagePath:"assets/fauna/parioglossus_multiradiatus.webp",selected:!1},{scientificName:"Plectorhinchus sordidus",vernacularName:"Marmit, Sordid rubberlip",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/sordid_rubberlip1.webp","assets/fauna/sordid_rubberlip2.webp"],selected:!1},{scientificName:"Sphyraena barracuda",vernacularName:"Tazar, Great barracuda",iucnStatus:"LC",group:"Fish",imagePath:["assets/fauna/great_barracuda1.webp","assets/fauna/great_barracuda2.webp"],selected:!1},{scientificName:"Anguilla bicolor",vernacularName:"Angi, Short-fin eel",iucnStatus:"NT",group:"Fish",imagePath:["assets/fauna/short_fin_eel1.webp","assets/fauna/short_fin_eel2.webp"],selected:!1},{scientificName:"Phelsuma sp.",vernacularName:"Lezar ver, Green gecko",iucnStatus:"LC",group:"Reptile",imagePath:["assets/fauna/NS_Green_gecko1.webp","assets/fauna/NS_Green_gecko2.webp"],selected:!1},{scientificName:"Archaius tigris",vernacularName:"Kameleon, Seychelles tiger chameleon",iucnStatus:"EN",group:"Reptile",imagePath:["assets/fauna/seychelles_tiger_chameleon1.webp","assets/fauna/seychelles_tiger_chameleon2.webp"],selected:!1},{scientificName:"Janetaescincus braueri",vernacularName:"Lezar Later, Brauer's burrowing skink",iucnStatus:"EN",group:"Reptile",imagePath:"assets/fauna/brauer_skink.webp",selected:!1},{scientificName:"Pamelaescincus gardineri",vernacularName:"Lezar later, Gardiner's burrowing skink",iucnStatus:"NT",group:"Reptile",imagePath:"assets/fauna/gardiner_burrowing_skink1.webp",selected:!1},{scientificName:"Trachylepis sechellensis",vernacularName:"Mangouya, Seychelles skink",iucnStatus:"LC",group:"Reptile",imagePath:["assets/fauna/NS_Seychelles_skink1.webp","assets/fauna/NS_Seychelles_skink2.webp","assets/fauna/NS_Seychelles_skink3.webp","assets/fauna/seychelles_skink1.webp","assets/fauna/seychelles_skink2.webp"],selected:!1},{scientificName:"Lamprophis geometricus",vernacularName:"Koulev gri/gro lekay, Seychelles house snake",iucnStatus:"EN",group:"Reptile",imagePath:"assets/fauna/seychelles_house_snake1.webp",selected:!1},{scientificName:"Lycognathophis seychellensis",vernacularName:"Koulev zonn, Seychelles wolf snake",iucnStatus:"EN",group:"Reptile",imagePath:["assets/fauna/seychelles_wolf_snake1.webp","assets/fauna/seychelles_wolf_snake2.webp"],selected:!1},{scientificName:"Ramphotyphlops braminus",vernacularName:"Ti koulev, Brahminy blind snake",iucnStatus:"LC",group:"Reptile",imagePath:["assets/fauna/brahminy_blind_snake1.webp","assets/fauna/brahminy_blind_snake2.webp"],selected:!1},{scientificName:"Pelusios subniger",vernacularName:"Torti labou nwar, Black mud terrapin",iucnStatus:"LC",group:"Reptile",imagePath:"assets/fauna/NS_Black_mud_terrapin.webp",selected:!1},{scientificName:"Pelusios castanoides",vernacularName:"Torti labou zonn, Yellow-bellied mud terrapin",iucnStatus:"LC",group:"Reptile",imagePath:"assets/fauna/NS_YELLOW-BELLIED_MUD_TERRAPIN.webp",selected:!1},{scientificName:"Tachycnemis seychellensis",vernacularName:"Grenouye seselwa, Seychelles tree frog",iucnStatus:"EN",group:"Amphibian",imagePath:["assets/fauna/NS_SEYCHELLES_TREE_FROG.webp","assets/fauna/NS_Seychelles_tree_frog-female.webp","assets/fauna/NS_Seychelles_tree_frog-male.webp"],selected:!1},{scientificName:"Austruca lactea",vernacularName:"Krab semafot, Milky fiddler crab",iucnStatus:"CR",group:"Invertebrate",imagePath:["assets/fauna/NS_FIDDLER_CRAB.webp","assets/fauna/NS_Fiddler_crab_1.webp","assets/fauna/fiddler_crab2.webp"],selected:!1},{scientificName:"Calcinus laevimanus",vernacularName:"Solda, White-clawed hermit crab",iucnStatus:"NE",group:"Invertebrate",imagePath:["assets/fauna/white_clawed_hermit_crab1.webp","assets/fauna/white_clawed_hermit_crab2.webp"],selected:!1},{scientificName:"Cardisoma carnifex",vernacularName:"Tyangoman, Giant mangrove crab",iucnStatus:"NE",group:"Invertebrate",imagePath:["assets/fauna/NS_GIANT_MANGROVE_CRAB.webp","assets/fauna/NS_Giant_Mangrove_Crab.3.webp","assets/fauna/NS_Giant_mangrove_crab1.webp","assets/fauna/NS_Giant_mangrove_crab2.webp"],selected:!1},{scientificName:"Geograpsus stormi",vernacularName:"Pti karkasay, Red nipper crab",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/red_nipper1.webp",selected:!1},{scientificName:"Neosarmatium africanum",vernacularName:"Krab rouz/loulou, Red mangrove crab",iucnStatus:"NE",group:"Invertebrate",imagePath:["assets/fauna/NS_RED_MANGROVE_CRAB.webp","assets/fauna/NS_Red_mangrove_crab1.webp","assets/fauna/NS_Red_mangrove_crab2.webp"],selected:!1},{scientificName:"Grapsus tenuicrustatus",vernacularName:"Karkasay, Thin-shelled rock crab",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/thin_shelled_rock_crab1.webp",selected:!1},{scientificName:"Perisesarma bidens",vernacularName:"Loulou, Red-clawed crab",iucnStatus:"NE",group:"Invertebrate",imagePath:["assets/fauna/red_clawed_crab1.webp","assets/fauna/red_clawed_crab2.webp"],selected:!1},{scientificName:"Scylla serrata",vernacularName:"Krab ble, Giant mud crab",iucnStatus:"NE",group:"Invertebrate",imagePath:["assets/fauna/NS_giant_mud_crab.webp","assets/fauna/giant_mud_crab1.webp","assets/fauna/giant_mud_crab2.webp"],selected:!1},{scientificName:"Sesarmops impressus",vernacularName:"Krab, Impressed shore crab",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/impressed_shore_crab1.webp",selected:!1},{scientificName:"Austruca annulipes",vernacularName:"Krab semafot, Porcelain fiddler crab",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/porcelain_fiddler_crab.webp",selected:!1},{scientificName:"Caridina similis",vernacularName:"Sevret, Freshwater shrimp",iucnStatus:"LC",group:"Invertebrate",imagePath:"assets/fauna/sevret1.webp",selected:!1},{scientificName:"Macrobrachium idae",vernacularName:"Kanmaron, Ida's river prawn",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/ida_river_prawn1.webp",selected:!1},{scientificName:"Macrobrachium lar",vernacularName:"Kanmaron, Tahitian prawn",iucnStatus:"LC",group:"Invertebrate",imagePath:["assets/fauna/tahitian_prawn1.webp","assets/fauna/tahitian_prawn2.webp"],selected:!1},{scientificName:"Marsupenaeus japonicus",vernacularName:"Krevet, Japanese tiger prawn",iucnStatus:"NE",group:"Invertebrate",imagePath:["assets/fauna/japanese_tiger_prawn1.webp","assets/fauna/japonese_tiger_prawn2.webp"],selected:!1},{scientificName:"Palaemon debilis",vernacularName:"Sevret, Feeble shrimp",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/feeble_shrimp1.webp",selected:!1},{scientificName:"Penaeus semisulcatus",vernacularName:"Krevet, Green tiger prawn",iucnStatus:"NE",group:"Invertebrate",imagePath:["assets/fauna/green_tiger_prawn1.webp","assets/fauna/green_tiger_prawn2.webp"],selected:!1},{scientificName:"Anadara antiquata",vernacularName:"Palourd, Antique ark clam",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/antique_ark_clam1.webp",selected:!1},{scientificName:"Ctena divergens",vernacularName:"Kokiye, Tiger clam",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/ctena_divergens2.webp",selected:!1},{scientificName:"Gafrarium pectinatum",vernacularName:"Palourd, Nut clam",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/nut_clam1.webp",selected:!1},{scientificName:"Lissachatina fulica",vernacularName:"Kourpa, Giant african snail",iucnStatus:"",group:"Invertebrate",imagePath:"assets/fauna/giant_african_snail.webp",selected:!1},{scientificName:"Lissachatina immaculata",vernacularName:"Kourpa, Pink-lipped snail",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/pink_lipped_snail1.webp",selected:!1},{scientificName:"Littoraria scabra",vernacularName:"Pti mari, Mangrove periwinkle",iucnStatus:"NE",group:"Invertebrate",imagePath:["assets/fauna/NS_MANGROVE_PERIWINKLE.webp","assets/fauna/mangrove_periwinkle2.webp"],selected:!1},{scientificName:"Quidnipagus palatam",vernacularName:"Tek Tek, Palate tellin",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/palate_tellin1.webp",selected:!1},{scientificName:"Terebralia palustris",vernacularName:"Fizo, Giant mangrove whelk",iucnStatus:"NE",group:"Invertebrate",imagePath:["assets/fauna/NS_MANGROVE_WHELK.webp","assets/fauna/NS_Mangrove_whelk1.webp"],selected:!1},{scientificName:"Anax guttatus",vernacularName:"Sigal, Pale-spotted emperor",iucnStatus:"LC",group:"Invertebrate",imagePath:["assets/fauna/pale_spotted_emperor1.webp","assets/fauna/pale_spotted_emperor2.webp"],selected:!1},{scientificName:"Apis mellifera",vernacularName:"Mous dimyel, Western honeybee",iucnStatus:"DD",group:"Invertebrate",imagePath:["assets/fauna/western_honeybee1.webp","assets/fauna/western_honeybee2.webp"],selected:!1},{scientificName:"Delta alluaudi",vernacularName:"Mous mason, Seychelles potter wasp",iucnStatus:"DD",group:"Invertebrate",imagePath:"assets/fauna/seychelles_wasp1.webp",selected:!1},{scientificName:"Trichonephila inaurata",vernacularName:"Bib, Palm Spider",iucnStatus:"LC",group:"Invertebrate",imagePath:["assets/fauna/NS_SEYCHELLES_PALM_SPIDER.webp","assets/fauna/NS_palm_spider.webp","assets/fauna/palm_spider1.webp"],selected:!1},{scientificName:"Pantala flavescens",vernacularName:"Sigal, Wandering glider",iucnStatus:"LC",group:"Invertebrate",imagePath:["assets/fauna/wandering_glider1.webp","assets/fauna/wandering_glider2.webp"],selected:!1},{scientificName:"Polistes olivaceus",vernacularName:"Mous zonn, Yellow paper wasp",iucnStatus:"NE",group:"Invertebrate",imagePath:"assets/fauna/yellow_paper_wasp1.webp",selected:!1},{scientificName:"Tholymis tillarga",vernacularName:"Sigal, Coral-tailed cloudwing",iucnStatus:"LC",group:"Invertebrate",imagePath:"assets/fauna/coral_tailed_cloudwind1.webp",selected:!1}]}ngOnDestroy(){this.imageRotationIntervals.forEach(t=>clearInterval(t)),this.imageRotationIntervals.clear(),this.userSubscription&&this.userSubscription.unsubscribe()}ngOnInit(){var t=this;return(0,g.A)(function*(){t.userSubscription=t.auth.currentUser$.subscribe(c=>{t.currentUser=c});let n="flora"===t.type?[...t.floraData]:[...t.faunaData];n=[...(yield t.speciesSyncService.getAllSpecies(t.type)).map(c=>({scientificName:c.scientific_name||"",vernacularName:c.vernacular_name||c.description.substring(0,30)+"...",iucnStatus:"NE",category:"flora"===t.type?"User Added":void 0,group:"fauna"===t.type?"User Added":void 0,imagePath:c.image_paths,selected:!1,isCustom:!0,pendingApproval:c.requires_approval&&!c.approved,customSpeciesId:c.id,commonName:c.common_name,creoleName:c.creole_name,description:c.description})),...n],"flora"===t.type&&t.userLevel<3&&(n=n.filter(c=>"Seagrass"!==c.category)),t.speciesList=n.filter(c=>!t.excludedSpecies.includes(c.vernacularName)),t.speciesList.forEach(c=>{Array.isArray(c.imagePath)&&(c.currentImageIndex=0)}),t.filteredSpecies=[...t.speciesList],t.startImageRotation()})()}startImageRotation(){this.imageRotationIntervals.forEach(t=>clearInterval(t)),this.imageRotationIntervals.clear(),this.speciesList.forEach(t=>{if(Array.isArray(t.imagePath)&&t.imagePath.length>1){const n=setInterval(()=>{t.currentImageIndex=((t.currentImageIndex||0)+1)%t.imagePath.length},3e3);this.imageRotationIntervals.set(t.scientificName,n)}})}getCurrentImagePath(t){return Array.isArray(t.imagePath)?t.imagePath[t.currentImageIndex||0]:t.imagePath}isArrayWithMultipleImages(t){return Array.isArray(t)&&t.length>1}filterSpecies(){if(!this.searchTerm.trim())return void(this.filteredSpecies=[...this.speciesList]);const t=this.searchTerm.toLowerCase();this.filteredSpecies=this.speciesList.filter(n=>n.scientificName.toLowerCase().includes(t)||n.vernacularName.toLowerCase().includes(t))}toggleSpecies(t){this.longPressTriggered||(t.selected=!t.selected)}getSelectedCount(){return this.speciesList.filter(t=>t.selected).length}confirm(){const t=this.speciesList.filter(n=>n.selected);this.modalController.dismiss(t,"confirm")}cancel(){this.modalController.dismiss(null,"cancel")}onTouchStart(t,n){this.longPressTriggered=!1,this.longPressTimer=setTimeout(()=>{this.longPressTriggered=!0,this.openSlideshow(t),n&&n.preventDefault&&n.preventDefault()},2e3)}onTouchEnd(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null),setTimeout(()=>{this.longPressTriggered=!1},100)}openSlideshow(t){window.innerWidth>=768?this.openDesktopSlideshow(t):(this.slideshowSpecies=t,this.slideshowImageIndex=0,this.showSlideshow=!0)}openDesktopSlideshow(t){var n=this;return(0,g.A)(function*(){const a=Array.isArray(t.imagePath)?t.imagePath:[t.imagePath];yield(yield n.modalController.create({component:K,componentProps:{images:a,vernacularName:t.vernacularName,scientificName:t.scientificName},cssClass:"fullscreen-slideshow-modal"})).present()})()}closeSlideshow(){this.showSlideshow=!1,this.slideshowSpecies=null,this.slideshowImageIndex=0}getCurrentSlideshowImage(){return this.slideshowSpecies?Array.isArray(this.slideshowSpecies.imagePath)?this.slideshowSpecies.imagePath[this.slideshowImageIndex]:this.slideshowSpecies.imagePath:""}getSlideshowRotationClass(){const t=this.getCurrentSlideshowImage();return this.rotatedLeftImages.has(t)?"rotated-left":this.rotatedRightImages.has(t)?"rotated-right":""}getImageRotationClass(t){const n=this.getCurrentImagePath(t);return this.rotatedLeftImages.has(n)?"rotated-left":this.rotatedRightImages.has(n)?"rotated-right":""}getSlideshowImages(){return this.slideshowSpecies?Array.isArray(this.slideshowSpecies.imagePath)?this.slideshowSpecies.imagePath:[this.slideshowSpecies.imagePath]:[]}getSlideshowImageCount(){return this.getSlideshowImages().length}nextSlideshowImage(){const t=this.getSlideshowImages();this.slideshowImageIndex=(this.slideshowImageIndex+1)%t.length}previousSlideshowImage(){const t=this.getSlideshowImages();this.slideshowImageIndex=(this.slideshowImageIndex-1+t.length)%t.length}goToSlideshowImage(t){this.slideshowImageIndex=t}toggleAddSpeciesForm(){this.showAddSpeciesForm=!this.showAddSpeciesForm,this.showAddSpeciesForm||this.resetAddSpeciesForm()}resetAddSpeciesForm(){this.newSpeciesScientificName="",this.newSpeciesCommonName="",this.newSpeciesCreoleName="",this.newSpeciesDescription="",this.newSpeciesPhotos=[]}showInfoTooltip(t){var n=this;return(0,g.A)(function*(){let a="",r="";switch(t){case"scientific":a="Scientific Name",r='The official two-part Latin name used by scientists worldwide (e.g., "Rhizophora mucronata"). This helps identify the exact species. Leave blank if unknown.';break;case"common":a="Common Name",r='The everyday English name for this species (e.g., "Red Mangrove"). This is the name most people use. Leave blank if unknown.';break;case"creole":a="Creole Name",r='The local Seychellois Creole name for this species (e.g., "Mangliye rouz"). This helps preserve local knowledge. Leave blank if unknown.'}yield(yield n.alertController.create({header:a,message:r,buttons:["OK"]})).present()})()}captureSpeciesPhoto(){var t=this;return(0,g.A)(function*(){if(t.newSpeciesPhotos.length>=3)yield(yield t.alertController.create({header:t.ts.t("Maximum Photos"),message:t.ts.t("You can only add up to 3 photos per species."),buttons:["OK"]})).present();else{t.isUploadingPhoto=!0;try{const n=yield t.photoService.TakePicture();t.newSpeciesPhotos.push(n)}catch(n){console.error("Error capturing photo:",n),yield(yield t.alertController.create({header:t.ts.t("Photo Failed"),message:t.ts.t("Failed to capture photo. Please try again."),buttons:["OK"]})).present()}finally{t.isUploadingPhoto=!1}}})()}removeSpeciesPhoto(t){this.newSpeciesPhotos.splice(t,1)}canSubmitNewSpecies(){return this.newSpeciesPhotos.length>=1&&this.newSpeciesDescription.trim().length>0}submitNewSpecies(){var t=this;return(0,g.A)(function*(){if(!t.canSubmitNewSpecies())return void(yield(yield t.alertController.create({header:t.ts.t("Missing Information"),message:t.ts.t("Please add at least one photo and provide a description."),buttons:["OK"]})).present());if(navigator.onLine)try{yield t.speciesSyncService.forceSync()}catch{}const n=t.newSpeciesScientificName.trim()||t.newSpeciesCommonName.trim()||t.newSpeciesCreoleName.trim();if(n&&(yield t.speciesSyncService.speciesExists(n,t.type))&&!(yield new Promise(d=>{t.alertController.create({header:t.ts.t("Possible Duplicate"),message:`${t.ts.t("A species with a similar name already exists. Do you want to add it anyway?")}`,buttons:[{text:t.ts.t("Cancel"),role:"cancel",handler:()=>d(!1)},{text:t.ts.t("Add Anyway"),handler:()=>d(!0)}]}).then(u=>u.present())})))return;const a=yield t.loadingController.create({message:t.ts.t("Adding new species...")});yield a.present();try{const r=t.auth.getCurrentUser(),c=r?.level||1,d=t.newSpeciesCommonName.trim()||t.newSpeciesCreoleName.trim()||void 0,u={scientific_name:t.newSpeciesScientificName.trim()||void 0,vernacular_name:d,common_name:t.newSpeciesCommonName.trim()||void 0,creole_name:t.newSpeciesCreoleName.trim()||void 0,description:t.newSpeciesDescription.trim(),image_paths:t.newSpeciesPhotos,added_by:r?.email||"unknown",type:t.type},m=yield t.speciesSyncService.addNewSpecies(u),h={scientificName:m.scientific_name||"",vernacularName:m.vernacular_name||m.creole_name||m.description.substring(0,30)+"...",iucnStatus:"NE",category:"flora"===t.type?"User Added":void 0,group:"fauna"===t.type?"User Added":void 0,imagePath:m.image_paths,selected:!1,isCustom:!0,pendingApproval:m.requires_approval&&!m.approved};t.speciesList.unshift(h),t.filteredSpecies=[...t.speciesList],yield a.dismiss();let _="";_=t.ts.t(c>=4?"The species has been added and is now available to all users.":"The species has been added locally and is available for your use. An approval request has been submitted to administrators."),yield(yield t.alertController.create({header:t.ts.t("Species Added"),message:_,buttons:["OK"]})).present(),t.resetAddSpeciesForm(),t.showAddSpeciesForm=!1}catch(r){yield a.dismiss(),console.error("Error adding species:",r),yield(yield t.alertController.create({header:t.ts.t("Error"),message:t.ts.t("Failed to add the new species. Please try again."),buttons:["OK"]})).present()}})()}isL4User(){return this.currentUser?.level>=4}canEditSpecies(t){return this.isL4User()&&!!t.isCustom&&!!t.customSpeciesId}startEditSpecies(t){this.canEditSpecies(t)&&(this.isEditingSpecies=!0,this.editingSpecies=t,this.editSpeciesId=t.customSpeciesId||"",this.editSpeciesScientificName=t.scientificName||"",this.editSpeciesCommonName=t.commonName||"",this.editSpeciesCreoleName=t.creoleName||"",this.editSpeciesDescription=t.description||"",this.editSpeciesPhotos=Array.isArray(t.imagePath)?[...t.imagePath]:[t.imagePath])}cancelEditSpecies(){this.isEditingSpecies=!1,this.editingSpecies=null,this.editSpeciesId="",this.editSpeciesScientificName="",this.editSpeciesCommonName="",this.editSpeciesCreoleName="",this.editSpeciesDescription="",this.editSpeciesPhotos=[]}captureEditSpeciesPhoto(){var t=this;return(0,g.A)(function*(){if(t.editSpeciesPhotos.length>=3)yield(yield t.alertController.create({header:t.ts.t("Maximum Photos"),message:t.ts.t("You can only add up to 3 photos per species."),buttons:["OK"]})).present();else{t.isUploadingEditPhoto=!0;try{const n=yield t.photoService.TakePicture();t.editSpeciesPhotos.push(n)}catch(n){console.error("Error capturing photo:",n),yield(yield t.alertController.create({header:t.ts.t("Photo Failed"),message:t.ts.t("Failed to capture photo. Please try again."),buttons:["OK"]})).present()}finally{t.isUploadingEditPhoto=!1}}})()}removeEditSpeciesPhoto(t){this.editSpeciesPhotos.splice(t,1)}canSaveEditSpecies(){return this.editSpeciesPhotos.length>=1&&this.editSpeciesDescription.trim().length>0}saveEditSpecies(){var t=this;return(0,g.A)(function*(){if(!t.canSaveEditSpecies())return void(yield(yield t.alertController.create({header:t.ts.t("Missing Information"),message:t.ts.t("Please ensure at least one photo and a description are provided."),buttons:["OK"]})).present());const n=yield t.loadingController.create({message:t.ts.t("Saving changes...")});yield n.present();try{const a=t.editSpeciesCommonName.trim()||t.editSpeciesCreoleName.trim()||void 0,r={scientific_name:t.editSpeciesScientificName.trim()||void 0,vernacular_name:a,common_name:t.editSpeciesCommonName.trim()||void 0,creole_name:t.editSpeciesCreoleName.trim()||void 0,description:t.editSpeciesDescription.trim(),image_paths:t.editSpeciesPhotos};yield t.speciesSyncService.updateSpecies(t.editSpeciesId,r);const c=t.speciesList.findIndex(u=>u.customSpeciesId===t.editSpeciesId);-1!==c&&(t.speciesList[c]={...t.speciesList[c],scientificName:r.scientific_name||"",vernacularName:r.vernacular_name||r.description.substring(0,30)+"...",imagePath:r.image_paths,commonName:r.common_name,creoleName:r.creole_name,description:r.description},t.filteredSpecies=[...t.speciesList]),yield n.dismiss(),yield(yield t.alertController.create({header:t.ts.t("Species Updated"),message:t.ts.t("The species has been updated successfully."),buttons:["OK"]})).present(),t.cancelEditSpecies()}catch(a){yield n.dismiss(),console.error("Error updating species:",a),yield(yield t.alertController.create({header:t.ts.t("Error"),message:t.ts.t("Failed to update the species. Please try again."),buttons:["OK"]})).present()}})()}deleteEditSpecies(){var t=this;return(0,g.A)(function*(){var a;yield(yield t.alertController.create({header:t.ts.t("Delete Species"),message:t.ts.t("Are you sure you want to delete this species? This action cannot be undone."),buttons:[{text:t.ts.t("Cancel"),role:"cancel"},{text:t.ts.t("Delete"),role:"destructive",handler:(a=(0,g.A)(function*(){const r=yield t.loadingController.create({message:t.ts.t("Deleting species...")});yield r.present();try{yield t.speciesSyncService.deleteSpecies(t.editSpeciesId),t.speciesList=t.speciesList.filter(d=>d.customSpeciesId!==t.editSpeciesId),t.filteredSpecies=[...t.speciesList],yield r.dismiss(),yield(yield t.alertController.create({header:t.ts.t("Species Deleted"),message:t.ts.t("The species has been deleted successfully."),buttons:["OK"]})).present(),t.cancelEditSpecies()}catch(c){yield r.dismiss(),console.error("Error deleting species:",c),yield(yield t.alertController.create({header:t.ts.t("Error"),message:t.ts.t("Failed to delete the species. Please try again."),buttons:["OK"]})).present()}}),function(){return a.apply(this,arguments)})}]})).present()})()}static#e=i=()=>(this.\u0275fac=function(n){return new(n||l)(e.rXU(p.W3),e.rXU(p.hG),e.rXU(p.Xi),e.rXU(W.h),e.rXU(I.N),e.rXU(R.I),e.rXU(T.L))},this.\u0275cmp=e.VBU({type:l,selectors:[["app-species-selection-modal"]],inputs:{type:"type",excludedSpecies:"excludedSpecies",userLevel:"userLevel"},standalone:!1,decls:38,vars:34,consts:[[1,"green1"],["slot","start"],[3,"click"],["name","close","slot","icon-only"],["slot","end"],[3,"click","disabled"],["name","checkmark","slot","icon-only"],[3,"ngModelChange","ionInput","ngModel","placeholder"],["class","green1 compact-toolbar",4,"ngIf"],[1,"instruction-banner"],["name","information-circle-outline"],[1,"add-species-section"],["expand","block","fill","outline","class","add-species-btn coastal-blue-btn",3,"click",4,"ngIf"],["class","add-species-form",4,"ngIf"],[1,"species-grid"],["class","species-item",3,"selected","custom-species","click","touchstart","touchend","touchmove","mousedown","mouseup","mouseleave",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],["expand","block",3,"click","disabled"],["class","edit-species-overlay",4,"ngIf"],["class","slideshow-overlay",3,"click",4,"ngIf"],[1,"green1","compact-toolbar"],[1,"selection-count"],["expand","block","fill","outline",1,"add-species-btn","coastal-blue-btn",3,"click"],["name","add-circle-outline","slot","start"],[1,"add-species-form"],[1,"form-header"],["fill","clear","size","small",3,"click"],[1,"form-content"],[1,"photo-section"],[1,"section-label"],[1,"required"],[1,"hint"],[1,"photo-grid"],["class","photo-item",4,"ngFor","ngForOf"],["class","add-photo-btn",3,"click",4,"ngIf"],[1,"input-section"],["name","information-circle-outline",1,"info-icon",3,"click"],["placeholder","e.g., Rhizophora mucronata",1,"species-input",3,"ngModelChange","ngModel"],["placeholder","e.g., Red Mangrove",1,"species-input",3,"ngModelChange","ngModel"],["placeholder","e.g., Mangliye rouz",1,"species-input",3,"ngModelChange","ngModel"],["rows","3",1,"species-textarea",3,"ngModelChange","ngModel","placeholder"],["expand","block",1,"submit-species-btn",3,"click","disabled"],["name","checkmark-circle","slot","start"],[1,"photo-item"],[3,"src","alt"],["fill","clear","size","small",1,"remove-photo-btn",3,"click"],["name","close-circle","slot","icon-only"],[1,"add-photo-btn",3,"click"],["name","camera-outline",4,"ngIf"],["name","crescent",4,"ngIf"],[4,"ngIf"],["name","camera-outline"],["name","crescent"],[1,"species-item",3,"click","touchstart","touchend","touchmove","mousedown","mouseup","mouseleave"],[1,"species-image",3,"ngClass"],[3,"contextmenu","src","alt"],["class","image-indicators",4,"ngIf"],["class","pending-badge",4,"ngIf"],["class","edit-species-btn","fill","clear","size","small",3,"click",4,"ngIf"],[1,"species-info"],[1,"species-name"],["class","custom-badge",4,"ngIf"],[1,"species-vernacular"],[1,"species-meta"],[1,"iucn-badge"],["class","group-badge",4,"ngIf"],["class","category-badge",4,"ngIf"],[1,"species-checkbox"],[3,"checked"],[1,"image-indicators"],["class","indicator-dot",3,"active",4,"ngFor","ngForOf"],[1,"indicator-dot"],[1,"pending-badge"],["fill","clear","size","small",1,"edit-species-btn",3,"click"],["name","create-outline","slot","icon-only"],[1,"custom-badge"],[1,"group-badge"],[1,"category-badge"],[1,"no-results"],["name","search-outline"],[1,"edit-species-overlay"],[1,"edit-species-modal"],[1,"edit-species-header"],[1,"edit-species-content"],[1,"edit-species-actions"],["expand","block",1,"save-species-btn",3,"click","disabled"],["expand","block","fill","outline","color","danger",1,"delete-species-btn",3,"click"],["name","trash","slot","start"],[1,"slideshow-overlay",3,"click"],[1,"slideshow-close",3,"click"],["name","close"],[1,"slideshow-content",3,"click"],[1,"slideshow-image-container",3,"ngClass"],["appPinchZoom","",3,"contextmenu","src","alt"],[1,"slideshow-info"],["class","slideshow-controls",4,"ngIf"],[1,"slideshow-controls"],[1,"nav-button","prev",3,"click"],["name","chevron-back"],[1,"slideshow-indicators"],["class","indicator-dot",3,"active","click",4,"ngFor","ngForOf"],[1,"nav-button","next",3,"click"],["name","chevron-forward"],[1,"indicator-dot",3,"click"]],template:function(n,a){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),e.bIt("click",function(){return a.cancel()}),e.nrm(4,"ion-icon",3),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6),e.nI1(7,"t"),e.nI1(8,"t"),e.nI1(9,"t"),e.nI1(10,"t"),e.k0s(),e.j41(11,"ion-buttons",4)(12,"ion-button",5),e.bIt("click",function(){return a.confirm()}),e.nrm(13,"ion-icon",6),e.k0s()()(),e.j41(14,"ion-toolbar",0)(15,"ion-searchbar",7),e.nI1(16,"t"),e.mxI("ngModelChange",function(c){return e.DH7(a.searchTerm,c)||(a.searchTerm=c),c}),e.bIt("ionInput",function(){return a.filterSpecies()}),e.k0s()(),e.DNE(17,H,4,4,"ion-toolbar",8),e.k0s(),e.j41(18,"ion-content")(19,"div",9),e.nrm(20,"ion-icon",10),e.j41(21,"span"),e.EFF(22),e.nI1(23,"t"),e.k0s()(),e.j41(24,"div",11),e.DNE(25,Q,7,11,"ion-button",12)(26,oe,53,42,"div",13),e.k0s(),e.j41(27,"div",14),e.DNE(28,ue,21,18,"div",15),e.k0s(),e.DNE(29,me,5,3,"div",16),e.k0s(),e.j41(30,"ion-footer")(31,"ion-toolbar")(32,"ion-button",17),e.bIt("click",function(){return a.confirm()}),e.EFF(33),e.nI1(34,"t"),e.nI1(35,"t"),e.k0s()()(),e.DNE(36,ve,56,37,"div",18)(37,Me,13,6,"div",19)),2&n&&(e.R7$(6),e.E5c("",e.bMT(7,18,"Select")," ","flora"===a.type?e.bMT(8,20,"Flora"):e.bMT(9,22,"Fauna")," ",e.bMT(10,24,"Species")),e.R7$(6),e.Y8G("disabled",0===a.getSelectedCount()),e.R7$(3),e.R50("ngModel",a.searchTerm),e.Y8G("placeholder",e.bMT(16,26,"Search species...")),e.R7$(2),e.Y8G("ngIf",a.getSelectedCount()>0),e.R7$(5),e.JRh(e.bMT(23,28,"Hold an image for 2 seconds to view in full screen")),e.R7$(3),e.Y8G("ngIf",!a.showAddSpeciesForm),e.R7$(),e.Y8G("ngIf",a.showAddSpeciesForm),e.R7$(2),e.Y8G("ngForOf",a.filteredSpecies),e.R7$(),e.Y8G("ngIf",0===a.filteredSpecies.length),e.R7$(3),e.Y8G("disabled",0===a.getSelectedCount()),e.R7$(),e.E5c(" ",e.bMT(34,30,"Add")," ",a.getSelectedCount()," ",e.bMT(35,32,"Species")," "),e.R7$(3),e.Y8G("ngIf",a.isEditingSpecies),e.R7$(),e.Y8G("ngIf",a.showSlideshow))},dependencies:[v.YU,v.Sq,v.bT,b.BC,b.vS,p.Jm,p.QW,p.eY,p.W9,p.M0,p.eU,p.iq,p.$w,p.he,p.S1,p.w2,p.IO,p.nc,p.BC,p.ai,p.hB,p.Gw,S.h,F.D],styles:[".green1[_ngcontent-%COMP%]{--background: #52a676;color:#fff}.instruction-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background-color:#e3f2fd;border-left:4px solid #2196f3;margin:12px 16px;border-radius:4px;font-size:14px;color:#1565c0}.instruction-banner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.instruction-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1.4}.compact-toolbar[_ngcontent-%COMP%]{--min-height: 40px}.compact-toolbar[_ngcontent-%COMP%]   .selection-count[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:500;padding:8px}.species-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-auto-rows:minmax(80px,auto);gap:12px;padding:16px;align-content:start}.species-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;background:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:10px;cursor:pointer;transition:all .2s ease;gap:10px}.species-item[_ngcontent-%COMP%]:hover{border-color:#52a676;box-shadow:0 2px 8px #52a67633}.species-item.selected[_ngcontent-%COMP%]{border-color:#52a676;background-color:#f0f9f4;box-shadow:0 2px 8px #52a6764d}.species-image[_ngcontent-%COMP%]{width:60px;height:60px;min-width:60px;min-height:60px;overflow:hidden;border-radius:6px;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center;position:relative}.species-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.image-indicators[_ngcontent-%COMP%]{position:absolute;bottom:4px;left:50%;transform:translate(-50%);display:flex;gap:4px;padding:2px 4px;background:#00000080;border-radius:8px}.image-indicators[_ngcontent-%COMP%]   .indicator-dot[_ngcontent-%COMP%]{width:5px;height:5px;border-radius:50%;background:#ffffff80;transition:all .3s ease}.image-indicators[_ngcontent-%COMP%]   .indicator-dot.active[_ngcontent-%COMP%]{background:#fff;width:6px;height:6px}.species-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center}.species-info[_ngcontent-%COMP%]   .species-name[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#333;margin-bottom:3px;line-height:1.2}.species-info[_ngcontent-%COMP%]   .species-name[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}.species-info[_ngcontent-%COMP%]   .species-vernacular[_ngcontent-%COMP%]{font-size:11px;color:#666;margin-bottom:4px;line-height:1.2}.species-info[_ngcontent-%COMP%]   .species-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px;margin-top:2px}.iucn-badge[_ngcontent-%COMP%], .group-badge[_ngcontent-%COMP%], .category-badge[_ngcontent-%COMP%]{font-size:9px;padding:2px 6px;border-radius:3px;font-weight:600;text-transform:uppercase}.iucn-badge[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#666}.iucn-badge[data-status=CR][_ngcontent-%COMP%]{background-color:#d32f2f;color:#fff}.iucn-badge[data-status=EN][_ngcontent-%COMP%]{background-color:#ff6f00;color:#fff}.iucn-badge[data-status=VU][_ngcontent-%COMP%]{background-color:#fbc02d;color:#333}.iucn-badge[data-status=NT][_ngcontent-%COMP%]{background-color:#9ccc65;color:#333}.iucn-badge[data-status=LC][_ngcontent-%COMP%]{background-color:#66bb6a;color:#fff}.iucn-badge[data-status=DD][_ngcontent-%COMP%]{background-color:#9e9e9e;color:#fff}.iucn-badge[data-status=NE][_ngcontent-%COMP%]{background-color:#bdbdbd;color:#666}.group-badge[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.category-badge[_ngcontent-%COMP%]{background-color:#fff3e0;color:#e65100;font-size:8px}.species-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:auto}.species-checkbox[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--size: 20px;--checkbox-background-checked: #4fb3bf;--border-color-checked: #4fb3bf;--checkmark-color: white}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#666}.no-results[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px;opacity:.5}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:0}.slideshow-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000f2;z-index:10000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.slideshow-close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;width:40px;height:40px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;z-index:10001}.slideshow-close[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff}.slideshow-close[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.slideshow-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;padding:20px}.slideshow-image-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;width:100%;max-width:90vw;max-height:70vh;margin-bottom:20px;overflow:hidden;position:relative}.slideshow-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;border-radius:8px;box-shadow:0 4px 20px #00000080;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:none}@media screen and (max-width: 768px){.slideshow-image-container.rotated-left[_ngcontent-%COMP%]{transform:rotate(-90deg);width:auto;height:100%}.slideshow-image-container.rotated-right[_ngcontent-%COMP%]{transform:rotate(90deg);width:auto;height:100%}}@media screen and (min-width: 769px){.slideshow-image-container.rotated-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotate(-90deg);max-width:none;max-height:none;height:100%;width:auto;position:absolute;image-orientation:none}.slideshow-image-container.rotated-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotate(90deg);max-width:none;max-height:none;height:100%;width:auto;position:absolute;image-orientation:none}}.species-image.rotated-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotate(-90deg);object-fit:cover}.species-image.rotated-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotate(90deg);object-fit:cover}.slideshow-info[_ngcontent-%COMP%]{text-align:center;color:#fff;margin-bottom:20px}.slideshow-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0 0 8px}.slideshow-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0;opacity:.8}.slideshow-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:20px}.slideshow-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{background:#fff3;border:none;border-radius:50%;width:48px;height:48px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.slideshow-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#fff}.slideshow-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.slideshow-controls[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.slideshow-controls[_ngcontent-%COMP%]   .slideshow-indicators[_ngcontent-%COMP%]{display:flex;gap:8px}.slideshow-controls[_ngcontent-%COMP%]   .slideshow-indicators[_ngcontent-%COMP%]   .indicator-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:#ffffff4d;cursor:pointer;transition:all .3s ease}.slideshow-controls[_ngcontent-%COMP%]   .slideshow-indicators[_ngcontent-%COMP%]   .indicator-dot.active[_ngcontent-%COMP%]{background:#fff;transform:scale(1.3)}.slideshow-controls[_ngcontent-%COMP%]   .slideshow-indicators[_ngcontent-%COMP%]   .indicator-dot[_ngcontent-%COMP%]:hover{background:#ffffff80}@media (max-width: 768px){.species-grid[_ngcontent-%COMP%]{gap:10px;padding:12px}.species-item[_ngcontent-%COMP%]{padding:8px;gap:8px}}@media (max-width: 480px){.species-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.species-image[_ngcontent-%COMP%]{width:70px;height:70px;min-width:70px;min-height:70px}}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: #4fb3bf;--background-hover: #3a9aa5;--background-activated: #2d8189;--color: white}.add-species-section[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #e0e0e0;background:#fafafa}.add-species-section[_ngcontent-%COMP%]   .add-species-btn[_ngcontent-%COMP%]{--border-color: #52a676;--color: #52a676;font-weight:500}.add-species-section[_ngcontent-%COMP%]   .add-species-btn.coastal-blue-btn[_ngcontent-%COMP%]{--border-color: #4fb3bf;--color: #4fb3bf}.add-species-form[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.add-species-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#52a676;color:#fff}.add-species-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600}.add-species-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: white}.add-species-form[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{padding:16px}.add-species-form[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{display:block;font-weight:600;font-size:.9rem;color:#333;margin-bottom:8px}.add-species-form[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#e74c3c}.add-species-form[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-weight:400;font-size:.8rem;color:#888}.add-species-form[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:1rem;color:#4fb3bf;margin-left:4px;vertical-align:middle;cursor:pointer}.add-species-form[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]:hover{color:#3a9aa6}.add-species-form[_ngcontent-%COMP%]   .photo-section[_ngcontent-%COMP%]{margin-bottom:16px}.add-species-form[_ngcontent-%COMP%]   .photo-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.add-species-form[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{position:relative;width:80px;height:80px;border-radius:8px;overflow:hidden;border:2px solid #52a676}.add-species-form[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.add-species-form[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   .remove-photo-btn[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;--padding-start: 0;--padding-end: 0;--color: #e74c3c;background:#fff;border-radius:50%}.add-species-form[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]{width:80px;height:80px;border:2px dashed #ccc;border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;background:#f9f9f9}.add-species-form[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#888}.add-species-form[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7rem;color:#888;margin-top:4px}.add-species-form[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]:hover{border-color:#52a676;background:#f0f9f4}.add-species-form[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%], .add-species-form[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#52a676}.add-species-form[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]{margin-bottom:16px}.add-species-form[_ngcontent-%COMP%]   .species-input[_ngcontent-%COMP%], .add-species-form[_ngcontent-%COMP%]   .species-textarea[_ngcontent-%COMP%]{--background: #f5f5f5;--padding-start: 12px;--padding-end: 12px;border:1px solid #ddd;border-radius:8px;margin-top:4px}.add-species-form[_ngcontent-%COMP%]   .species-textarea[_ngcontent-%COMP%]{--padding-top: 12px;--padding-bottom: 12px}.add-species-form[_ngcontent-%COMP%]   .submit-species-btn[_ngcontent-%COMP%]{margin-top:8px;--background: #52a676;--background-hover: #478f65;--background-activated: #3d7d58;font-weight:600}.species-item.custom-species[_ngcontent-%COMP%]{border-color:#f0ad4e}.species-item.custom-species.selected[_ngcontent-%COMP%]{background-color:#fef8e8}.species-item[_ngcontent-%COMP%]   .pending-badge[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background:#f0ad4e;color:#fff;font-size:.6rem;padding:2px 6px;border-radius:4px;font-weight:600}.species-item[_ngcontent-%COMP%]   .custom-badge[_ngcontent-%COMP%]{background:#52a676;color:#fff;font-size:.65rem;padding:2px 6px;border-radius:4px;font-weight:500;margin-left:4px}.edit-species-btn[_ngcontent-%COMP%]{position:absolute;top:2px;left:2px;--padding-start: 4px;--padding-end: 4px;--color: white;background:#52a676e6;border-radius:50%;width:24px;height:24px;min-height:24px;z-index:10}.edit-species-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.edit-species-btn[_ngcontent-%COMP%]:hover{background:#52a676}.edit-species-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;z-index:10000;display:flex;align-items:flex-start;justify-content:center;padding:20px;overflow-y:auto;animation:_ngcontent-%COMP%_fadeIn .2s ease}.edit-species-modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:100%;max-width:500px;margin:auto 0;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 8px 32px #0000004d;flex-shrink:0}.edit-species-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:#52a676;color:#fff}.edit-species-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600}.edit-species-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: white}.edit-species-content[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.edit-species-content[_ngcontent-%COMP%]   .photo-section[_ngcontent-%COMP%]{margin-bottom:20px}.edit-species-content[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{display:block;font-weight:600;font-size:.9rem;color:#333;margin-bottom:8px}.edit-species-content[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#e74c3c}.edit-species-content[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-weight:400;font-size:.8rem;color:#888}.edit-species-content[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:1rem;color:#4fb3bf;margin-left:4px;vertical-align:middle;cursor:pointer}.edit-species-content[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]:hover{color:#3a9aa6}.edit-species-content[_ngcontent-%COMP%]   .photo-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.edit-species-content[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{position:relative;width:80px;height:80px;border-radius:8px;overflow:hidden;border:2px solid #52a676}.edit-species-content[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.edit-species-content[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   .remove-photo-btn[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;--padding-start: 0;--padding-end: 0;--color: #e74c3c;background:#fff;border-radius:50%}.edit-species-content[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]{width:80px;height:80px;border:2px dashed #ccc;border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;background:#f9f9f9}.edit-species-content[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#888}.edit-species-content[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7rem;color:#888;margin-top:4px}.edit-species-content[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]:hover{border-color:#52a676;background:#f0f9f4}.edit-species-content[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%], .edit-species-content[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#52a676}.edit-species-content[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]{margin-bottom:16px}.edit-species-content[_ngcontent-%COMP%]   .species-input[_ngcontent-%COMP%], .edit-species-content[_ngcontent-%COMP%]   .species-textarea[_ngcontent-%COMP%]{--background: #f5f5f5;--padding-start: 12px;--padding-end: 12px;border:1px solid #ddd;border-radius:8px;margin-top:4px}.edit-species-content[_ngcontent-%COMP%]   .species-textarea[_ngcontent-%COMP%]{--padding-top: 12px;--padding-bottom: 12px}.edit-species-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:20px}.edit-species-actions[_ngcontent-%COMP%]   .save-species-btn[_ngcontent-%COMP%]{--background: #52a676;--background-hover: #478f65;--background-activated: #3d7d58;font-weight:600}.edit-species-actions[_ngcontent-%COMP%]   .delete-species-btn[_ngcontent-%COMP%]{--border-color: #dc3545;--color: #dc3545;font-weight:600}.edit-species-actions[_ngcontent-%COMP%]   .delete-species-btn[_ngcontent-%COMP%]:hover{--background: rgba(220, 53, 69, .1)}@media (min-width: 768px){.edit-species-overlay[_ngcontent-%COMP%]{padding:40px}.edit-species-modal[_ngcontent-%COMP%]{max-width:700px}.edit-species-content[_ngcontent-%COMP%]{padding:28px 32px}.edit-species-content[_ngcontent-%COMP%]   .photo-grid[_ngcontent-%COMP%]{gap:16px}.edit-species-content[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%], .edit-species-content[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]{width:120px;height:120px}.edit-species-content[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px}.edit-species-content[_ngcontent-%COMP%]   .add-photo-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}.edit-species-content[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]{margin-bottom:20px}.edit-species-content[_ngcontent-%COMP%]   .species-input[_ngcontent-%COMP%], .edit-species-content[_ngcontent-%COMP%]   .species-textarea[_ngcontent-%COMP%]{font-size:1rem}.edit-species-actions[_ngcontent-%COMP%]{flex-direction:row;gap:16px}.edit-species-actions[_ngcontent-%COMP%]   .save-species-btn[_ngcontent-%COMP%], .edit-species-actions[_ngcontent-%COMP%]   .delete-species-btn[_ngcontent-%COMP%]{flex:1}}"]}))}return i(),l})();var we=f(152),E=f(5083),G=f(5415),D=f(5921),ye=f(5858),xe=f(5342),Se=f(1084),Oe=f(918),ke=f(9187),Fe=f(7643);function Ne(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",81),e.bIt("click",function(){s.eBV(o),e.XpG();const n=e.sdS(15);return s.Njj(n.showPicker())}),e.EFF(1),e.k0s()}if(2&i){const o=e.XpG();e.R7$(),e.JRh(o.currentDateDisplay)}}function Ie(i,l){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.JRh(o.currentDateDisplay)}}function Re(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",81),e.bIt("click",function(){s.eBV(o),e.XpG();const n=e.sdS(17);return s.Njj(n.showPicker())}),e.EFF(1),e.k0s()}if(2&i){const o=e.XpG();e.R7$(),e.JRh(o.currentTimeDisplay)}}function Te(i,l){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.JRh(o.currentTimeDisplay)}}function je(i,l){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const o=e.XpG();e.R7$(),e.SpI(" (edited: ",o.getEditedDateTime(),")")}}function Ee(i,l){1&i&&e.nrm(0,"ion-icon",82)}function Ge(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",13),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(!n.viewMode&&n.editZone())}),e.nrm(1,"ion-icon",83),e.j41(2,"span",15),e.EFF(3),e.k0s()()}if(2&i){let o;const t=e.XpG();e.R7$(3),e.JRh(t.getZoneName(null==(o=t.biodiversityForm.get("zoneNumber"))?null:o.value))}}function De(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",13),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(!n.viewMode&&n.editQuad())}),e.nrm(1,"ion-icon",84),e.j41(2,"span",15),e.EFF(3),e.k0s()()}if(2&i){let o;const t=e.XpG();e.R7$(3),e.SpI("Quad ",t.getQuadDisplay(null==(o=t.biodiversityForm.get("quadNumber"))?null:o.value))}}function $e(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",85),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.editLocationAdmin())}),e.EFF(1),e.nI1(2,"t"),e.k0s()}2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Edit location")," "))}function Ae(i,l){1&i&&(e.j41(0,"ion-error",86),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Location is required")," "))}function Ve(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",87)(1,"ion-button",88),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.enableEditMode())}),e.nrm(2,"ion-icon",89),e.EFF(3),e.nI1(4,"t"),e.k0s()()}2&i&&(e.R7$(3),e.SpI(" ",e.bMT(4,1,"Edit This Entry")," "))}function ze(i,l){1&i&&(e.j41(0,"div",90),e.nrm(1,"ion-icon",91),e.j41(2,"span"),e.EFF(3),e.nI1(4,"t"),e.k0s()()),2&i&&(e.R7$(3),e.JRh(e.bMT(4,1,"Editing Entry - Changes will replace the original submission")))}function Be(i,l){1&i&&e.nrm(0,"ion-icon",92)}function Le(i,l){1&i&&e.nrm(0,"ion-icon",93)}function Ye(i,l){1&i&&(e.j41(0,"ion-error"),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Observer name is required")," "))}function Xe(i,l){1&i&&e.nrm(0,"ion-icon",92)}function Ue(i,l){1&i&&e.nrm(0,"ion-icon",93)}function Je(i,l){1&i&&(e.j41(0,"ion-error"),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Weather selection is required")," "))}function qe(i,l){1&i&&e.nrm(0,"ion-icon",92)}function Ke(i,l){1&i&&e.nrm(0,"ion-icon",93)}function We(i,l){1&i&&(e.j41(0,"ion-error"),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Tide selection is required")," "))}function He(i,l){if(1&i){const o=e.RV6();e.j41(0,"tr",94)(1,"td",95)(2,"div",96)(3,"div",97)(4,"strong"),e.EFF(5),e.k0s(),e.j41(6,"small")(7,"em"),e.EFF(8),e.k0s()()(),e.j41(9,"ion-icon",62),e.bIt("click",function(n){const a=s.eBV(o).index,r=e.XpG();return s.Njj(r.showMangroveInfo(n,r.mangroveSpecies[a]))}),e.k0s()()(),e.j41(10,"td")(11,"div",98),e.nrm(12,"ion-input",99),e.j41(13,"div",100)(14,"button",101),e.bIt("click",function(){const n=s.eBV(o).index,a=e.XpG();return s.Njj(a.incrementAdults(n))}),e.EFF(15,"+"),e.k0s(),e.j41(16,"button",102),e.bIt("click",function(){const n=s.eBV(o).index,a=e.XpG();return s.Njj(a.decrementAdults(n))}),e.EFF(17,"\u2212"),e.k0s()()()(),e.j41(18,"td",103),e.nrm(19,"ion-checkbox",104),e.k0s(),e.j41(20,"td",103)(21,"ion-checkbox",105),e.bIt("ionChange",function(n){const a=s.eBV(o).index,r=e.XpG();return s.Njj(r.handleDominantRecruitChange(a,n))}),e.k0s()()()}if(2&i){const o=l.index,t=e.XpG();e.Y8G("formGroupName",o),e.R7$(5),e.JRh(t.mangroveSpecies[o].scientificName),e.R7$(3),e.SpI("(",t.mangroveSpecies[o].commonName,")"),e.R7$(6),e.Y8G("disabled",t.viewMode),e.R7$(2),e.Y8G("disabled",t.viewMode),e.R7$(5),e.AVh("greyed-out",t.isDominantRecruitGreyedOut(o))}}function Qe(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-button",114),e.bIt("click",function(){s.eBV(o);const n=e.XpG().index,a=e.XpG();return s.Njj(a.captureFloraPhoto(n))}),e.nrm(1,"ion-icon",115),e.EFF(2),e.nI1(3,"t"),e.k0s()}2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"Take Photo")," "))}function Ze(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-button",121),e.bIt("click",function(){s.eBV(o);const n=e.XpG(2).index,a=e.XpG();return s.Njj(a.removeFloraPhoto(n))}),e.nrm(1,"ion-icon",122),e.k0s()}}function et(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",116)(1,"div",117)(2,"img",118),e.bIt("click",function(){s.eBV(o);const n=e.XpG().index,a=e.XpG();return s.Njj(a.openFullScreenPhoto(a.floraPhotos[n],"flora"))}),e.k0s(),e.j41(3,"small",119),e.EFF(4),e.nI1(5,"t"),e.k0s()(),e.DNE(6,Ze,2,0,"ion-button",120),e.k0s()}if(2&i){const o=e.XpG().index,t=e.XpG();e.R7$(2),e.Y8G("src",t.floraPhotos[o],e.B4B),e.R7$(2),e.JRh(e.bMT(5,3,"Tap to view full size")),e.R7$(2),e.Y8G("ngIf",!t.viewMode)}}function tt(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-button",123),e.bIt("click",function(){s.eBV(o);const n=e.XpG().index,a=e.XpG();return s.Njj(a.removeFloraRow(n))}),e.nrm(1,"ion-icon",124),e.k0s()}}function nt(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",106)(1,"ion-item")(2,"ion-label",26),e.EFF(3),e.nI1(4,"t"),e.k0s(),e.nrm(5,"ion-input",107),e.nI1(6,"t"),e.k0s(),e.j41(7,"div",108)(8,"ion-item",58)(9,"ion-checkbox",109),e.bIt("ionChange",function(n){const a=s.eBV(o).index,r=e.XpG();return s.Njj(r.handleDominantFloraChange(a,n))}),e.k0s(),e.j41(10,"ion-label"),e.EFF(11),e.nI1(12,"t"),e.k0s()(),e.j41(13,"div",110),e.DNE(14,Qe,4,3,"ion-button",111)(15,et,7,5,"div",112),e.k0s(),e.DNE(16,tt,2,0,"ion-button",113),e.k0s()()}if(2&i){const o=l.index,t=e.XpG();e.Y8G("formGroupName",o),e.R7$(3),e.Lme("",e.bMT(4,10,"Species")," ",o+1),e.R7$(2),e.Y8G("placeholder",e.bMT(6,12,"Enter species name")),e.R7$(4),e.AVh("greyed-out",t.isDominantFloraGreyedOut(o)),e.R7$(2),e.JRh(e.bMT(12,14,"Dominant")),e.R7$(3),e.Y8G("ngIf",!t.floraPhotos[o]&&!t.viewMode),e.R7$(),e.Y8G("ngIf",t.floraPhotos[o]),e.R7$(),e.Y8G("ngIf",!t.viewMode)}}function at(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-button",125),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.addFloraRow())}),e.nrm(1,"ion-icon",126),e.EFF(2),e.nI1(3,"t"),e.k0s()}2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"Add Other Flora Species")," "))}function ot(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-button",114),e.bIt("click",function(){s.eBV(o);const n=e.XpG().index,a=e.XpG();return s.Njj(a.captureFaunaPhoto(n))}),e.nrm(1,"ion-icon",115),e.EFF(2),e.nI1(3,"t"),e.k0s()}2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"Take Photo")," "))}function it(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-button",121),e.bIt("click",function(){s.eBV(o);const n=e.XpG(2).index,a=e.XpG();return s.Njj(a.removeFaunaPhoto(n))}),e.nrm(1,"ion-icon",122),e.k0s()}}function st(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",116)(1,"div",117)(2,"img",129),e.bIt("click",function(){s.eBV(o);const n=e.XpG().index,a=e.XpG();return s.Njj(a.openFullScreenPhoto(a.faunaPhotos[n],"fauna"))}),e.k0s(),e.j41(3,"small",119),e.EFF(4),e.nI1(5,"t"),e.k0s()(),e.DNE(6,it,2,0,"ion-button",120),e.k0s()}if(2&i){const o=e.XpG().index,t=e.XpG();e.R7$(2),e.Y8G("src",t.faunaPhotos[o],e.B4B),e.R7$(2),e.JRh(e.bMT(5,3,"Tap to view full size")),e.R7$(2),e.Y8G("ngIf",!t.viewMode)}}function rt(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-button",123),e.bIt("click",function(){s.eBV(o);const n=e.XpG().index,a=e.XpG();return s.Njj(a.removeFaunaRow(n))}),e.nrm(1,"ion-icon",124),e.k0s()}}function ct(i,l){if(1&i&&(e.j41(0,"div",127)(1,"ion-item")(2,"ion-label",26),e.EFF(3),e.nI1(4,"t"),e.k0s(),e.nrm(5,"ion-input",107),e.nI1(6,"t"),e.k0s(),e.j41(7,"div",128)(8,"div",110),e.DNE(9,ot,4,3,"ion-button",111)(10,st,7,5,"div",112),e.k0s(),e.DNE(11,rt,2,0,"ion-button",113),e.k0s()()),2&i){const o=l.index,t=e.XpG();e.Y8G("formGroupName",o),e.R7$(3),e.Lme("",e.bMT(4,7,"Species")," ",o+1),e.R7$(2),e.Y8G("placeholder",e.bMT(6,9,"Enter animal species")),e.R7$(4),e.Y8G("ngIf",!t.faunaPhotos[o]&&!t.viewMode),e.R7$(),e.Y8G("ngIf",t.faunaPhotos[o]),e.R7$(),e.Y8G("ngIf",!t.viewMode)}}function lt(i,l){if(1&i){const o=e.RV6();e.j41(0,"ion-button",125),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.addFaunaRow())}),e.nrm(1,"ion-icon",126),e.EFF(2),e.nI1(3,"t"),e.k0s()}2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"Add Other Fauna Species")," "))}function dt(i,l){1&i&&(e.j41(0,"ion-item")(1,"ion-label",26),e.EFF(2),e.nI1(3,"t"),e.k0s(),e.nrm(4,"ion-textarea",130),e.nI1(5,"t"),e.k0s()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,2,"Other development observations")),e.R7$(2),e.Y8G("placeholder",e.bMT(5,4,"Enter other observations about development")))}function pt(i,l){1&i&&(e.j41(0,"ion-item",58)(1,"ion-select",131),e.nI1(2,"t"),e.j41(3,"ion-select-option",132),e.EFF(4),e.nI1(5,"t"),e.k0s(),e.j41(6,"ion-select-option",133),e.EFF(7),e.nI1(8,"t"),e.k0s(),e.j41(9,"ion-select-option",134),e.EFF(10),e.nI1(11,"t"),e.k0s()()()),2&i&&(e.R7$(),e.Y8G("placeholder",e.bMT(2,4,"Select disruption types")),e.R7$(3),e.JRh(e.bMT(5,6,"Fallen trees")),e.R7$(3),e.JRh(e.bMT(8,8,"Built up sediment/debris")),e.R7$(3),e.JRh(e.bMT(11,10,"Pollution")))}function ut(i,l){1&i&&(e.j41(0,"ion-item")(1,"ion-label",26),e.EFF(2),e.nI1(3,"t"),e.k0s(),e.nrm(4,"ion-textarea",135),e.nI1(5,"t"),e.k0s()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,2,"Describe water flow conditions")),e.R7$(2),e.Y8G("placeholder",e.bMT(5,4,"Enter water flow description")))}function mt(i,l){1&i&&(e.nrm(0,"ion-textarea",136),e.nI1(1,"t")),2&i&&e.Y8G("placeholder",e.bMT(1,1,"Enter any additional observations, weather conditions, habitat notes, etc."))}function gt(i,l){if(1&i&&e.nrm(0,"ion-textarea",137),2&i){let o;const t=e.XpG();e.Y8G("value",null==(o=t.biodiversityForm.get("otherObservations"))?null:o.value)}}function ht(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",138)(1,"ion-button",139),e.nrm(2,"ion-icon",140),e.EFF(3),e.nI1(4,"t"),e.k0s(),e.j41(5,"ion-button",141),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.saveDraft())}),e.nrm(6,"ion-icon",142),e.EFF(7),e.nI1(8,"t"),e.k0s(),e.j41(9,"ion-button",143),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.discardForm())}),e.nrm(10,"ion-icon",144),e.EFF(11),e.nI1(12,"t"),e.k0s()()}if(2&i){const o=e.XpG();e.R7$(),e.Y8G("disabled",!o.biodiversityForm.valid),e.R7$(2),e.SpI(" ",e.bMT(4,4,"Submit Survey")," "),e.R7$(4),e.SpI(" ",e.bMT(8,6,"Save Draft")," "),e.R7$(4),e.SpI(" ",e.bMT(12,8,"Discard")," ")}}function ft(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",145)(1,"ion-button",146),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.deleteEntry())}),e.nrm(2,"ion-icon",144),e.EFF(3),e.nI1(4,"t"),e.k0s()()}2&i&&(e.R7$(3),e.SpI(" ",e.bMT(4,1,"Delete Entry")," "))}function _t(i,l){if(1&i&&(e.j41(0,"span")(1,"strong"),e.EFF(2),e.nI1(3,"t"),e.k0s(),e.EFF(4),e.nI1(5,"t"),e.k0s()),2&i){const o=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,2,"Distribution in Seychelles"),":"),e.R7$(2),e.SpI(" ",e.bMT(5,4,o.species.distributionSeychelles)," ")}}function bt(i,l){if(1&i&&(e.j41(0,"span")(1,"strong"),e.EFF(2),e.nI1(3,"t"),e.k0s(),e.EFF(4),e.nI1(5,"t"),e.k0s()),2&i){const o=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,2,"Habitat"),":"),e.R7$(2),e.SpI(" ",e.bMT(5,4,o.species.habitat)," ")}}function vt(i,l){if(1&i&&(e.j41(0,"span")(1,"strong"),e.EFF(2),e.nI1(3,"t"),e.k0s(),e.EFF(4),e.nI1(5,"t"),e.k0s()),2&i){const o=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,2,"Identification"),":"),e.R7$(2),e.SpI(" ",e.bMT(5,4,o.species.identification))}}function Pt(i,l){if(1&i&&(e.j41(0,"div",13)(1,"p",14),e.DNE(2,_t,6,6,"span",15)(3,bt,6,6,"span",15)(4,vt,6,6,"span",15),e.k0s()()),2&i){const o=e.XpG();e.R7$(2),e.Y8G("ngIf",o.species.distributionSeychelles),e.R7$(),e.Y8G("ngIf",o.species.habitat),e.R7$(),e.Y8G("ngIf",o.species.identification)}}function Ct(i,l){if(1&i){const o=e.RV6();e.j41(0,"span",22),e.bIt("click",function(){const n=s.eBV(o).index,a=e.XpG(2);return s.Njj(a.goTo(n))}),e.k0s()}if(2&i){const o=l.index,t=e.XpG(2);e.AVh("active",o===t.currentIndex)}}function Mt(i,l){if(1&i){const o=e.RV6();e.j41(0,"div",16)(1,"button",17),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.previous())}),e.nrm(2,"ion-icon",18),e.k0s(),e.j41(3,"div",19),e.DNE(4,Ct,1,2,"span",20),e.k0s(),e.j41(5,"button",17),e.bIt("click",function(){s.eBV(o);const n=e.XpG();return s.Njj(n.next())}),e.nrm(6,"ion-icon",21),e.k0s()()}if(2&i){const o=e.XpG();e.R7$(4),e.Y8G("ngForOf",o.getImages())}}let wt=(()=>{var i;class l{forceDeleteDraftFile(t){var n=this;return(0,g.A)(function*(){for(let a=0;a<3;a++)try{yield n.sharedDataService.deleteJsonFile(t),console.log(`Draft file force deleted successfully (attempt ${a+1})`);break}catch(r){if(console.error(`Error force deleting draft file (attempt ${a+1}):`,r),2===a)try{yield n.sharedDataService.writeJsonFile(t,null),console.log("Draft file cleared with null write")}catch(c){console.error("Failed to clear draft file with null write:",c)}yield new Promise(c=>setTimeout(c,100))}})()}constructor(t,n,a,r,c,d,u,m,h,_,P,M,C,w,O){this.formBuilder=t,this.alertController=n,this.loadingController=a,this.router=r,this.route=c,this.modalController=d,this.weatherService=u,this.tideService=m,this.photoService=h,this.auth=_,this.floraFaunaSyncService=P,this.sharedDataService=M,this.entryDeletionService=C,this.siteSyncService=w,this.ts=O,this.progress=0,this.autosaveSub=null,this.isDiscarded=!1,this.isSubmitted=!1,this.isSubmitting=!1,this.viewMode=!1,this.currentUser=null,this.currentReportId="",this.loadedReport=null,this.isEditMode=!1,this.originalSubmittedBy="",this.mangroveSpecies=[{scientificName:"Mangliye Rouz",commonName:"Red Mangrove",latinName:"Rhizophora mucronata",imagePath:["assets/mangroves/Red-Man.webp","assets/mangroves/Red mangrove1.webp","assets/mangroves/Red mangrove2.webp"],distributionSeychelles:"Native, common in most mangrove areas.",habitat:"Medium low tidal zone.",identification:"Small to medium sized tree, with stilt-like roots and large green leaves with needle tips."},{scientificName:"Mangliye Blan",commonName:"White Mangrove",latinName:"Avicennia marina",imagePath:["assets/mangroves/White-Man.webp","assets/mangroves/White mangrove1.webp","assets/mangroves/White mangrove2.webp"],distributionSeychelles:"Native, most common and widespread species on the granitic islands.",habitat:"Low tidal zone.",identification:"Generally small trees, with thin pencil-like aerial roots and narrow, bright green leaves with silvery-white underside."},{scientificName:"Mangliye Pti Fey",commonName:"Black Mangrove",latinName:"Lumnitzera racemosa",imagePath:["assets/mangroves/Black-Man.webp","assets/mangroves/Black mangrove.webp"],distributionSeychelles:"Native, generally less abundant than other species. Found in the inner and outer islands of Seychelles, including Mah\xe9, Aldabra, and Cosmoledo.",habitat:"Mid-tidal zone.",identification:"Short to medium-sized tree of about 5-8 meters tall, prop roots, small knee-like pneumatophores and sometimes fine aerial roots."},{scientificName:"Mangliye Lat",commonName:"Oriental Mangrove",latinName:"Bruguiera gymnorrhiza",imagePath:["assets/mangroves/Oriental-Man.webp","assets/mangroves/Oriental mangrove1.webp","assets/mangroves/Oriental mangrove2.webp"],distributionSeychelles:"Native, restricted distribution in low numbers.",habitat:"Middle & upper intertidal zone.",identification:"Medium to tall tree, with knee roots and short buttresses, and large green leaves with downward tips."},{scientificName:"Mangliye Pasyans",commonName:"Puzzlenut Mangrove",latinName:"Xylocarpus granatum",imagePath:["assets/mangroves/Puzzlenut-Man.webp","assets/mangroves/Puzzlenut mangrove.webp"],distributionSeychelles:"Native. Generally less abundant than other species. Fairly common in the Port Launay Coastal Wetlands.",habitat:"High tidal zone (landward edge).",identification:"Medium sized, tree growing up to 20m tall, with long snake-like buttress roots spreading out and smooth, flaky light brown bark."},{scientificName:"Mangliye Zonn",commonName:"Yellow Mangrove",latinName:"Ceriops tagal",imagePath:["assets/mangroves/Yellow-Man.webp","assets/mangroves/Yellow mangrove1.webp","assets/mangroves/Yellow mangrove2.webp"],distributionSeychelles:"Native. Generally well distributed on Mahe and Aldabra.",habitat:"Medium-high tidal zone.",identification:"Small to medium sized, bushy-topped tree growing up to 15m tall, with grey-brown bark and pyramid-like buttress roots (sometimes small knee-like roots present)."},{scientificName:"Mangliye Fler",commonName:"Apple Mangrove",latinName:"Sonneratia alba",imagePath:["assets/mangroves/Apple-Man.webp","assets/mangroves/Apple mangrove.webp"],distributionSeychelles:"Native, common and widespread in the granitics (Mahe, Praslin, Silhouette), rare on Aldabra and Cosmoledo.",habitat:"Low tidal zone.",identification:"Relatively tall tree with a broad, spreading canopy, usually 15-20m tall. Has thick cone-shaped aerial roots shooting out of the ground."}],this.floraPhotos={},this.faunaPhotos={},this.selectedDominantRecruitIndex=null,this.selectedDominantFloraIndex=null,this.currentDateTime="",this.currentDateDisplay="",this.currentTimeDisplay="",this.availableLocations=[{name:"Ramsar",hasZones:!0,hasQuads:!0,zones:["1","2","3","4","5","6"],quads:Array.from({length:30},(y,x)=>`quad${x+1}`),zoneQuadMap:{1:[1,2,3],2:[13,14,15,16,17,18,20,21,22,23,25,27,28,29],3:[19,26],4:[4,5],5:[6,7,11,12,24,30],6:[8,9,10]}},{name:"Grand Anse",hasZones:!0,hasQuads:!0,zones:["1","2","3","4"],quads:Array.from({length:22},(y,x)=>`ga${x+1}`),zoneQuadMap:{1:[1,2,3,4],2:[5,6,7,8,9,10,21,22],3:[11,12,13,14,15,16,17,18],4:[19,20]}},{name:"Caiman",hasZones:!1,hasQuads:!0,zones:[],quads:["quad1","quad2","quad3","quad4","quad5"]},{name:"Canopy",hasZones:!1,hasQuads:!0,zones:[],quads:["quad1","quad2","quad3","quad4"]},{name:"Petit Barbarons",hasZones:!0,hasQuads:!1,zones:["1","2","3","4"],quads:[]},{name:"Kempinski",hasZones:!1,hasQuads:!1,zones:[],quads:[]},{name:"Roche Caiman",hasZones:!1,hasQuads:!1,zones:[],quads:[]}],this.selectedLocationForEdit="",this.selectedZoneForEdit="",this.selectedQuadForEdit="",this.maheLatitude=-4.6796,this.maheLongitude=55.4919}ngOnInit(){var t=this;return(0,g.A)(function*(){t.currentUser=t.auth.getCurrentUser(),t.initializeForm(),t.setCurrentDateTime(),t.fetchWeatherAndTide(),yield t.loadDynamicSites();const n=t.route.snapshot.queryParams;"true"===n.viewMode&&n.reportId?yield t.loadReportForViewing(n.reportId):(t.route.queryParams.subscribe(a=>{a.location&&t.biodiversityForm.patchValue({location:a.location}),a.zone&&t.biodiversityForm.patchValue({zoneNumber:a.zone}),a.quad&&t.biodiversityForm.patchValue({quadNumber:a.quad})}),"true"!==n.fresh&&(yield t.restoreDraftIfAny(),t.setCurrentDateTime()),t.currentReportId||(t.currentReportId=t.floraFaunaSyncService.generateReportId()),t.subscribeToFormChanges(),navigator.onLine&&t.floraFaunaSyncService.processPendingQueue().catch(a=>{console.error("FloraFaunaPage: processPendingQueue failed:",a)}))})()}ngOnDestroy(){this.autosaveSub&&(this.autosaveSub.unsubscribe(),this.autosaveSub=null),!this.isSubmitted&&!this.isDiscarded&&this.saveDraftOnExit().catch(t=>console.error("FloraFaunaPage: saveDraftOnExit failed:",t))}setCurrentDateTime(t){if(this.biodiversityForm){const m=this.biodiversityForm.get("observationDate")?.value,h=this.biodiversityForm.get("observationTime")?.value;if(m&&h){const[_,P,M]=m.split("-"),[C,w]=h.split(":");return this.currentDateDisplay=`${M}/${P}/${_}`,this.currentTimeDisplay=`${C}:${w}`,void(this.currentDateTime=`${this.currentDateDisplay}  \u2022  ${this.currentTimeDisplay}`)}}if(t){const m=this.extractDateTimeFromReportId(t);if(m){this.currentDateTime=m;const h=m.split("  \u2022  ");return void(2===h.length&&(this.currentDateDisplay=h[0],this.currentTimeDisplay=h[1]))}}const n=new Date,a=String(n.getDate()).padStart(2,"0"),r=String(n.getMonth()+1).padStart(2,"0"),c=n.getFullYear(),d=String(n.getHours()).padStart(2,"0"),u=String(n.getMinutes()).padStart(2,"0");this.currentDateDisplay=`${a}/${r}/${c}`,this.currentTimeDisplay=`${d}:${u}`,this.currentDateTime=`${this.currentDateDisplay}  \u2022  ${this.currentTimeDisplay}`}extractDateTimeFromReportId(t){const n=t.match(/(\d{2})(\d{2})(\d{4})_(\d{2})(\d{2})(\d{2})/);if(n){const[,a,r,c,d,u]=n;return`${a}/${r}/${c}  \u2022  ${d}:${u}`}return null}getCurrentDate(){return(new Date).toISOString().split("T")[0]}editLocation(){var t=this;return(0,g.A)(function*(){yield(yield t.alertController.create({header:t.ts.t("Location/Site"),inputs:[{name:"location",type:"text",placeholder:t.ts.t("Enter location"),value:t.biodiversityForm.get("location")?.value||""}],buttons:[{text:t.ts.t("Cancel"),role:"cancel"},{text:t.ts.t("Save"),handler:a=>{t.biodiversityForm.patchValue({location:a.location})}}]})).present()})()}editZone(){var t=this;return(0,g.A)(function*(){yield(yield t.alertController.create({header:t.ts.t("Zone Number"),inputs:[{name:"zoneNumber",type:"text",placeholder:t.ts.t("Enter zone number"),value:t.biodiversityForm.get("zoneNumber")?.value||""}],buttons:[{text:t.ts.t("Cancel"),role:"cancel"},{text:t.ts.t("Save"),handler:a=>{t.biodiversityForm.patchValue({zoneNumber:a.zoneNumber})}}]})).present()})()}editQuad(){var t=this;return(0,g.A)(function*(){yield(yield t.alertController.create({header:t.ts.t("Quad Number"),inputs:[{name:"quadNumber",type:"text",placeholder:t.ts.t("Enter quad number"),value:t.biodiversityForm.get("quadNumber")?.value||""}],buttons:[{text:t.ts.t("Cancel"),role:"cancel"},{text:t.ts.t("Save"),handler:a=>{t.biodiversityForm.patchValue({quadNumber:a.quadNumber})}}]})).present()})()}editLocationAdmin(){var t=this;return(0,g.A)(function*(){if(!t.currentUser||t.currentUser.level<4)return;const n=yield t.selectLocationStep();if(!n)return;const a=t.availableLocations.find(d=>d.name===n);let r="";if(a?.hasZones&&a.zones.length>0){const d=yield t.selectZoneStep(a);if(null===d)return;r=d}let c="";if(a?.hasQuads&&a.quads.length>0){const d=yield t.selectQuadStep(a,r);if(null===d)return;c=d}t.biodiversityForm.patchValue({location:n,zoneNumber:r,quadNumber:c}),t.isEditMode&&t.biodiversityForm.markAsDirty()})()}selectLocationStep(){var t=this;return new Promise(function(){var n=(0,g.A)(function*(a){const r=t.biodiversityForm.get("location")?.value||"",c=t.availableLocations.map(u=>({name:"location",type:"radio",label:u.name,value:u.name,checked:u.name===r}));yield(yield t.alertController.create({header:t.ts.t("Select Location"),cssClass:"location-edit-alert",inputs:c,buttons:[{text:t.ts.t("Cancel"),role:"cancel",handler:()=>a(null)},{text:t.ts.t("Next"),handler:u=>a(u)}]})).present()});return function(a){return n.apply(this,arguments)}}())}selectZoneStep(t){var n=this;return new Promise(function(){var a=(0,g.A)(function*(r){const c=n.biodiversityForm.get("zoneNumber")?.value||"",d=t.zones.map(m=>({name:"zone",type:"radio",label:`Zone ${m}`,value:m,checked:m===c}));yield(yield n.alertController.create({header:n.ts.t("Select Zone"),subHeader:t.name,cssClass:"location-edit-alert",inputs:d,buttons:[{text:n.ts.t("Cancel"),role:"cancel",handler:()=>r(null)},{text:n.ts.t("Next"),handler:m=>r(m)}]})).present()});return function(r){return a.apply(this,arguments)}}())}selectQuadStep(t,n){var a=this;return new Promise(function(){var r=(0,g.A)(function*(c){const d=a.biodiversityForm.get("quadNumber")?.value||"";let u=t.quads;if(n&&t.zoneQuadMap&&t.zoneQuadMap[n]){const _=t.zoneQuadMap[n];u=t.quads.filter(P=>{const M=parseInt(a.getQuadDisplay(P));return _.includes(M)})}const m=u.map(_=>({name:"quad",type:"radio",label:`Quad ${a.getQuadDisplay(_)}`,value:_,checked:a.getQuadDisplay(_)===d||_===d}));yield(yield a.alertController.create({header:a.ts.t("Select Quad"),subHeader:t.name,cssClass:"location-edit-alert",inputs:m,buttons:[{text:a.ts.t("Cancel"),role:"cancel",handler:()=>c(null)},{text:a.ts.t("Save"),handler:_=>c(_)}]})).present()});return function(c){return r.apply(this,arguments)}}())}getSelectedLocationConfig(){const t=this.selectedLocationForEdit||this.biodiversityForm.get("location")?.value;return this.availableLocations.find(n=>n.name===t)}loadDynamicSites(){var t=this;return(0,g.A)(function*(){try{(yield t.siteSyncService.getAllSites()).forEach(a=>{t.availableLocations.some(r=>r.name===a.name)||t.availableLocations.push({name:a.name,hasZones:a.zones&&a.zones.length>0||!1,hasQuads:a.sample_points&&a.sample_points.length>0||!1,zones:a.zones?a.zones.map(r=>r.name?.replace("Zone ","")||r.id):[],quads:a.sample_points?a.sample_points.map(r=>r.id||r.label):[]})})}catch(n){console.error("Error loading dynamic sites:",n)}})()}getZoneName(t){return t?`Zone ${t}`:""}getQuadDisplay(t){if(!t)return"";const n=t.match(/\d+/);return n?n[0]:""}locationHasZones(){const t=this.biodiversityForm.get("location")?.value;return!!t&&["Ramsar","Grand Anse","Petit Barbarons"].includes(t)}locationHasQuads(){const t=this.biodiversityForm.get("location")?.value;return!!t&&["Ramsar","Grand Anse","Caiman","Canopy"].includes(t)}initializeForm(){const t=this.getCurrentDate(),n=new Date,a=`${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`;this.biodiversityForm=this.formBuilder.group({observationDate:[t,b.k0.required],observationTime:[a],observer:["",b.k0.required],location:["",b.k0.required],zoneNumber:[""],quadNumber:[""],weather:["",b.k0.required],tide:["",b.k0.required],mangroves:this.formBuilder.array(this.mangroveSpecies.map(()=>this.createMangroveGroup())),otherFlora:this.formBuilder.array([]),fauna:this.formBuilder.array([]),mainRoads:[!1],secondaryRoads:[!1],buildings:[[]],agriculturalFacilities:[!1],farms:[!1],hasDevelopmentOther:[!1],developmentOther:[""],hasWaterFlowDisruption:[!1],waterFlowTypes:[[]],waterFlowDisruption:[""],otherObservations:[""]}),this.initializeDominantRecruitSelection(),this.updateProgress()}fetchWeatherAndTide(){this.weatherService.getWeatherByCoordinates(this.maheLatitude,this.maheLongitude).subscribe({next:t=>{if(t&&t.weather&&t.weather.length>0){const n=this.weatherService.mapWeatherToOption(t.weather[0].main);this.biodiversityForm.patchValue({weather:n}),console.log("Weather auto-populated:",n)}},error:t=>{console.error("Error fetching weather:",t)}}),this.tideService.getTides(this.maheLatitude,this.maheLongitude).subscribe({next:t=>{if(t&&t.extremes){const n=this.tideService.getCurrentTideState(t.extremes);this.biodiversityForm.patchValue({tide:n}),console.log("Tide auto-populated:",n)}},error:t=>{console.error("Error fetching tide:",t)}})}initializeDominantRecruitSelection(){for(let t=0;t<this.mangroves.length;t++)if(this.mangroves.at(t).get("dominantRecruit")?.value){this.selectedDominantRecruitIndex=t;break}for(let t=0;t<this.otherFlora.length;t++)if(this.otherFlora.at(t).get("dominant")?.value){this.selectedDominantFloraIndex=t;break}}createMangroveGroup(){return this.formBuilder.group({numAdults:[null],recruitsPresent:[!1],dominantRecruit:[!1]})}createFloraGroup(){return this.formBuilder.group({species:[""],dominant:[!1],hasPicture:[!1]})}createFaunaGroup(){return this.formBuilder.group({species:[""],hasPicture:[!1]})}get mangroves(){return this.biodiversityForm.get("mangroves")}get otherFlora(){return this.biodiversityForm.get("otherFlora")}get fauna(){return this.biodiversityForm.get("fauna")}addFloraRow(){var t=this;return(0,g.A)(function*(){const n=t.otherFlora.controls.map(d=>d.get("species")?.value).filter(d=>d&&""!==d.trim()),a=yield t.modalController.create({component:j,componentProps:{type:"flora",excludedSpecies:n,userLevel:t.auth.hasMinimumLevel(3)?3:t.auth.hasMinimumLevel(2)?2:1}});yield a.present();const{data:r,role:c}=yield a.onWillDismiss();"confirm"===c&&r&&r.length>0&&(r.forEach(d=>{const u=t.createFloraGroup();u.patchValue({species:d.vernacularName}),t.otherFlora.push(u)}),t.updateProgress())})()}removeFloraRow(t){var n=this;return(0,g.A)(function*(){const a=n.otherFlora.at(t).get("species")?.value||"this species";yield(yield n.alertController.create({header:n.ts.t("Remove Species"),message:`${n.ts.t("Are you sure you want to remove")} ${a}?`,buttons:[{text:n.ts.t("Cancel"),role:"cancel"},{text:n.ts.t("Remove"),role:"destructive",handler:()=>{n.selectedDominantFloraIndex===t?n.selectedDominantFloraIndex=null:null!==n.selectedDominantFloraIndex&&n.selectedDominantFloraIndex>t&&n.selectedDominantFloraIndex--,n.otherFlora.removeAt(t),delete n.floraPhotos[t],n.updateProgress()}}]})).present()})()}isDominantRecruitGreyedOut(t){return null!==this.selectedDominantRecruitIndex&&this.selectedDominantRecruitIndex!==t}incrementAdults(t){const n=this.mangroves.at(t).get("numAdults"),a=n?.value||0;n?.setValue(a+1)}decrementAdults(t){const n=this.mangroves.at(t).get("numAdults"),a=n?.value||0;a>0&&n?.setValue(a-1)}handleDominantRecruitChange(t,n){if(n.detail.checked){for(let a=0;a<this.mangroves.length;a++)a!==t&&this.mangroves.at(a).patchValue({dominantRecruit:!1});this.selectedDominantRecruitIndex=t}else this.selectedDominantRecruitIndex=null}isDominantFloraGreyedOut(t){return null!==this.selectedDominantFloraIndex&&this.selectedDominantFloraIndex!==t}handleDominantFloraChange(t,n){if(n.detail.checked){for(let a=0;a<this.otherFlora.length;a++)a!==t&&this.otherFlora.at(a).patchValue({dominant:!1});this.selectedDominantFloraIndex=t}else this.selectedDominantFloraIndex=null}captureFloraPhoto(t){var n=this;return(0,g.A)(function*(){try{const a=yield n.photoService.TakePicture();a&&(n.floraPhotos[t]=a,n.otherFlora.at(t).patchValue({hasPicture:!0}))}catch(a){console.error("Error capturing flora photo:",a)}})()}addFaunaRow(){var t=this;return(0,g.A)(function*(){const n=t.fauna.controls.map(d=>d.get("species")?.value).filter(d=>d&&""!==d.trim()),a=yield t.modalController.create({component:j,componentProps:{type:"fauna",excludedSpecies:n}});yield a.present();const{data:r,role:c}=yield a.onWillDismiss();"confirm"===c&&r&&r.length>0&&(r.forEach(d=>{const u=t.createFaunaGroup();u.patchValue({species:d.vernacularName}),t.fauna.push(u)}),t.updateProgress())})()}removeFaunaRow(t){var n=this;return(0,g.A)(function*(){const a=n.fauna.at(t).get("species")?.value||"this species";yield(yield n.alertController.create({header:n.ts.t("Remove Species"),message:`${n.ts.t("Are you sure you want to remove")} ${a}?`,buttons:[{text:n.ts.t("Cancel"),role:"cancel"},{text:n.ts.t("Remove"),role:"destructive",handler:()=>{n.fauna.removeAt(t),delete n.faunaPhotos[t],n.updateProgress()}}]})).present()})()}captureFaunaPhoto(t){var n=this;return(0,g.A)(function*(){try{const a=yield n.photoService.TakePicture();a?(n.faunaPhotos[t]=a,n.fauna.at(t).patchValue({hasPicture:!0})):n.showAlert("Photo Error","Failed to capture photo")}catch(a){console.error("Error capturing fauna photo:",a),n.showAlert("Photo Error","Failed to capture photo")}})()}removeFloraPhoto(t){delete this.floraPhotos[t],this.otherFlora.at(t).patchValue({hasPicture:!1})}removeFaunaPhoto(t){delete this.faunaPhotos[t],this.fauna.at(t).patchValue({hasPicture:!1})}updateProgress(){const t=this.biodiversityForm.value;let n=0,a=3;t.observer&&n++,t.location&&n++,n++,t.mangroves.filter(u=>u.numAdults||u.recruitsPresent||u.dominantRecruit).length>0&&(n++,a++),t.otherFlora.filter(u=>u.species).length>0&&(n++,a++),t.fauna.filter(u=>u.species).length>0&&(n++,a++),t.otherObservations&&(n++,a++),this.progress=a>0?n/a:0}subscribeToFormChanges(){this.autosaveSub&&this.autosaveSub.unsubscribe(),this.autosaveSub=this.biodiversityForm.valueChanges.pipe((0,we.B)(750)).subscribe(()=>{this.isSubmitted||this.isDiscarded||(this.updateProgress(),this.saveDraftOnExit().catch(t=>console.error("FloraFaunaPage: autosave failed:",t)))})}onSubmit(){var t=this;return(0,g.A)(function*(){if(t.isSubmitting)return;if(t.isSubmitting=!0,t.biodiversityForm.markAllAsTouched(),!t.biodiversityForm.valid)return t.isSubmitting=!1,void(yield(yield t.alertController.create({header:t.ts.t("Incomplete Form"),message:t.ts.t("Please fill in all required fields (Observer, Location, Weather, and Tide)."),buttons:["OK"]})).present());t.isSubmitted=!0,t.autosaveSub&&(t.autosaveSub.unsubscribe(),t.autosaveSub=null);const n=yield t.loadingController.create({message:t.ts.t("Submitting flora-fauna assessment...")});yield n.present();try{const a=[];Object.values(t.floraPhotos).forEach(h=>{h&&a.push(h)}),Object.values(t.faunaPhotos).forEach(h=>{h&&a.push(h)});const r={...t.biodiversityForm.value};r.status={incomplete:!1,sent:!0,pending:!1};const c={formValue:r,coordinates:null,photos:a,existingReportId:t.currentReportId||void 0};t.isEditMode&&(c.isEditMode=!0,c.originalSubmittedBy=t.originalSubmittedBy);const d=yield t.floraFaunaSyncService.submitFinal(c);yield n.dismiss();try{yield new Promise(w=>setTimeout(w,500));const h=t.biodiversityForm.value;yield t.floraFaunaSyncService.clearDraft(h);const _=(h?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),P=h?.zoneNumber||"",M=h?.quadNumber||"";let C=`flora_fauna_draft_${_}`;P&&(C+=`_zone${P}`),M&&(C+=`_quad${M}`),yield t.forceDeleteDraftFile(`${C}.json`),console.log("FloraFaunaPage: Draft cleared and form reset successfully")}catch(h){console.error("FloraFaunaPage: Failed to clear draft:",h)}const u=t.ts.t(t.isEditMode?d.queued?"Updated assessment saved locally and queued for upload when online.":"Flora-fauna assessment updated successfully!":d.queued?"Flora-fauna assessment saved locally and queued for upload when online.":"Flora-fauna assessment submitted successfully!");yield(yield t.alertController.create({header:t.ts.t("Success"),message:u,buttons:[{text:"OK",handler:()=>{t.router.navigate(["/biodiversity"])}}]})).present()}catch(a){yield n.dismiss(),console.error("Error submitting assessment:",a),yield(yield t.alertController.create({header:t.ts.t("Error"),message:t.ts.t("Failed to submit flora-fauna assessment. Please try again."),buttons:["OK"]})).present()}})()}discardForm(){var t=this;return(0,g.A)(function*(){const n=yield t.alertController.create({header:t.ts.t("Discard Form"),message:t.ts.t("Are you sure you want to discard this form? All entered data will be lost."),buttons:[{text:t.ts.t("Cancel"),role:"cancel"},{text:t.ts.t("Discard"),role:"destructive"}]});yield n.present();const{role:a}=yield n.onDidDismiss();if("destructive"!==a)return;const r=yield t.loadingController.create({message:t.ts.t("Discarding...")});yield r.present(),t.isDiscarded=!0,t.autosaveSub&&(t.autosaveSub.unsubscribe(),t.autosaveSub=null),yield new Promise(c=>setTimeout(c,1e3));try{const c=t.biodiversityForm.value;yield t.floraFaunaSyncService.clearDraft(c);const d=(c?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),u=c?.zoneNumber||"",m=c?.quadNumber||"";let h=`flora_fauna_draft_${d}`;u&&(h+=`_zone${u}`),m&&(h+=`_quad${m}`),yield t.forceDeleteDraftFile(`${h}.json`)}catch(c){console.error("FloraFaunaPage: Error clearing draft during discard:",c)}yield r.dismiss(),t.initializeForm(),t.router.navigate(["/biodiversity"])})()}resetForm(){this.biodiversityForm.reset(),this.floraPhotos={},this.faunaPhotos={},this.selectedDominantRecruitIndex=null,this.selectedDominantFloraIndex=null,this.initializeForm()}showAlert(t,n){var a=this;return(0,g.A)(function*(){yield(yield a.alertController.create({header:t,message:n,buttons:["OK"]})).present()})()}showMangroveInfo(t,n){var a=this;return(0,g.A)(function*(){if(t.stopPropagation(),E.Capacitor.isNativePlatform())try{yield G.Z.lock({orientation:"portrait"})}catch{}const r=yield a.modalController.create({component:yt,componentProps:{species:n},cssClass:"fullheight-info-modal"});r.onDidDismiss().then((0,g.A)(function*(){if(E.Capacitor.isNativePlatform())try{yield G.Z.unlock()}catch{}})),yield r.present()})()}showAdultsDefinition(){var t=this;return(0,g.A)(function*(){yield(yield t.alertController.create({header:t.ts.t("Adult Mangrove Tree"),message:t.ts.t("An adult mangrove tree is typically defined as a tree that has reached reproductive maturity, usually over 1.5 meters in height with a well-developed trunk and canopy. These trees are capable of producing propagules (seeds) and contribute to the forest's reproductive cycle."),buttons:[t.ts.t("OK")]})).present()})()}showRecruitsDefinition(){var t=this;return(0,g.A)(function*(){yield(yield t.alertController.create({header:t.ts.t("Mangrove Recruit"),message:t.ts.t("A mangrove recruit is a young mangrove tree that has successfully established itself after the seedling stage. Recruits are typically between 0.5 and 1.5 meters in height, have developed true leaves, and show signs of independent growth but have not yet reached reproductive maturity."),buttons:[t.ts.t("OK")]})).present()})()}restoreDraftIfAny(){var t=this;return(0,g.A)(function*(){const n=t.route.snapshot.queryParams,a={location:n.location||t.biodiversityForm.get("location")?.value,zoneNumber:n.zone||t.biodiversityForm.get("zoneNumber")?.value,quadNumber:n.quad||t.biodiversityForm.get("quadNumber")?.value},r=yield t.floraFaunaSyncService.loadDraft(a);if(r)try{r.reportId&&(t.currentReportId=r.reportId),r.form&&t.biodiversityForm.patchValue(r.form),r.photos&&r.photos.length>0&&console.log("Draft has",r.photos.length,"photos"),t.updateProgress()}catch(c){console.error("FloraFaunaPage: failed to restore draft:",c)}})()}saveDraft(){var t=this;return(0,g.A)(function*(){if(!t.biodiversityForm)return;const n=yield t.alertController.create({header:t.ts.t("Save Draft"),message:t.ts.t("Are you sure you want to save this form as a draft? You can return to complete it later."),buttons:[{text:t.ts.t("Cancel"),role:"cancel"},{text:t.ts.t("Save Draft"),role:"confirm"}]});yield n.present();const{role:a}=yield n.onDidDismiss();if("confirm"!==a)return;const r=yield t.loadingController.create({message:t.ts.t("Saving draft...")});yield r.present();try{yield t.saveDraftOnExit(),yield r.dismiss();const c=yield t.alertController.create({header:t.ts.t("Draft Saved"),message:t.ts.t("Your form has been saved as a draft. You can access it from the biodiversity page."),buttons:[{text:"OK",role:"confirm"}]});yield c.present(),yield c.onDidDismiss(),t.router.navigate(["/biodiversity"])}catch(c){yield r.dismiss(),console.error("Failed to save draft:",c),yield(yield t.alertController.create({header:t.ts.t("Save Failed"),message:t.ts.t("Failed to save the draft. Please try again."),buttons:["OK"]})).present()}})()}saveDraftOnExit(){var t=this;return(0,g.A)(function*(){if(!t.biodiversityForm||t.viewMode||t.isDiscarded||t.isSubmitted)return;const n=t.biodiversityForm.value;if(!(n?.observer||n?.location||Object.keys(t.floraPhotos).length>0||Object.keys(t.faunaPhotos).length>0))return;const r=[];Object.values(t.floraPhotos).forEach(c=>{c&&r.push(c)}),Object.values(t.faunaPhotos).forEach(c=>{c&&r.push(c)}),yield t.floraFaunaSyncService.saveDraft({reportId:t.currentReportId,form:n,coordinates:null,photos:r})})()}showSecondaryRoadInfo(){var t=this;return(0,g.A)(function*(){yield(yield t.alertController.create({header:t.ts.t("Secondary Roads"),message:t.ts.t("Not paved, for e.g. dirt track"),buttons:["OK"]})).present()})()}goBack(){this.router.navigate(["/biodiversity"])}openFullScreenPhoto(t,n){var a=this;return(0,g.A)(function*(){yield(yield a.modalController.create({component:xt,componentProps:{photoUrl:t,photoType:n},cssClass:"fullscreen-photo-modal"})).present()})()}setViewMode(t){this.viewMode=t,t?(this.biodiversityForm.disable(),this.enableCheckboxControls()):this.biodiversityForm.enable()}enableCheckboxControls(){const t=this.biodiversityForm.get("mangroves");t&&t.controls.forEach(a=>{a.get("recruitsPresent")?.enable(),a.get("dominantRecruit")?.enable()});const n=this.biodiversityForm.get("otherFlora");n&&n.controls.forEach(a=>{a.get("dominant")?.enable()}),this.biodiversityForm.get("mainRoads")?.enable(),this.biodiversityForm.get("secondaryRoads")?.enable(),this.biodiversityForm.get("agriculturalFacilities")?.enable(),this.biodiversityForm.get("farms")?.enable()}enableEditMode(){!this.currentUser||this.currentUser.level<4||(this.isEditMode=!0,this.viewMode=!1,this.biodiversityForm.enable(),this.originalSubmittedBy=this.loadedReport?.submittedBy||"")}getEditedDateTime(){if(!this.loadedReport)return null;let t=this.loadedReport.editedAt||null;if(!t){const m=this.loadedReport.updatedAt,h=this.loadedReport.createdAt;m&&h&&m!==h&&Math.abs(new Date(m).getTime()-new Date(h).getTime())>5e3&&(t=m)}if(!t)return null;const n=new Date(t);return isNaN(n.getTime())?null:`${n.getDate().toString().padStart(2,"0")}/${(n.getMonth()+1).toString().padStart(2,"0")}/${n.getFullYear()} ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`}onDateChanged(t){const n=t.target;n.value&&(this.biodiversityForm.get("observationDate")?.setValue(n.value),this.setCurrentDateTime())}onTimeChanged(t){const n=t.target;n.value&&(this.biodiversityForm.get("observationTime")?.setValue(n.value),this.setCurrentDateTime())}loadReportForViewing(t){var n=this;return(0,g.A)(function*(){try{const a=yield n.floraFaunaSyncService.getAllReports();console.log("FloraFaunaPage: All reports:",a);const r=a.find(d=>d.report.reportId===t);if(!r)return console.error("FloraFaunaPage: Report not found for viewing:",t),yield(yield n.alertController.create({header:n.ts.t("Report Not Found"),message:n.ts.t("The requested report could not be found."),buttons:["OK"]})).present(),void n.router.navigate(["/biodiversity"]);const c=r.report;if(console.log("FloraFaunaPage: Loading report for viewing:",c),n.loadedReport=c,n.biodiversityForm.patchValue({observationDate:c.form.observationDate||"",observationTime:c.form.observationTime||"",observer:c.form.observer||"",location:c.form.location||"",zoneNumber:c.form.zoneNumber||"",quadNumber:c.form.quadNumber||"",weather:c.form.weather||"",tide:c.form.tide||"",mainRoads:c.form.mainRoads||!1,secondaryRoads:c.form.secondaryRoads||!1,buildings:c.form.buildings||[],agriculturalFacilities:c.form.agriculturalFacilities||!1,farms:c.form.farms||!1,hasDevelopmentOther:c.form.hasDevelopmentOther||!1,developmentOther:c.form.developmentOther||"",hasWaterFlowDisruption:c.form.hasWaterFlowDisruption||!1,waterFlowTypes:c.form.waterFlowTypes||[],waterFlowDisruption:c.form.waterFlowDisruption||"",otherObservations:c.form.otherObservations||""}),c.form.mangroves&&Array.isArray(c.form.mangroves)){const d=n.biodiversityForm.get("mangroves");c.form.mangroves.forEach((u,m)=>{d.at(m)&&d.at(m).patchValue({numAdults:u.numAdults,recruitsPresent:u.recruitsPresent||!1,dominantRecruit:u.dominantRecruit||!1})})}if(c.form.otherFlora&&Array.isArray(c.form.otherFlora)){const d=n.biodiversityForm.get("otherFlora");d.clear(),c.form.otherFlora.forEach(u=>{d.push(n.formBuilder.group({species:[u.species||""],dominant:[u.dominant||!1],hasPicture:[u.hasPicture||!1]}))})}if(c.form.fauna&&Array.isArray(c.form.fauna)){const d=n.biodiversityForm.get("fauna");d.clear(),c.form.fauna.forEach(u=>{d.push(n.formBuilder.group({species:[u.species||""],hasPicture:[u.hasPicture||!1]}))})}if(c.photos&&Array.isArray(c.photos)){const d=c.form.otherFlora?.length||0;c.photos.forEach((u,m)=>{u&&(u.startsWith("data:image/")||console.warn("\u26a0\ufe0f FloraFaunaPage: Photo is not base64:",u.substring(0,50)),m<d?n.floraPhotos[m]=u:n.faunaPhotos[m-d]=u)})}n.currentReportId=t,n.setCurrentDateTime(t),n.updateProgress(),n.setViewMode(!0)}catch(a){console.error("FloraFaunaPage: Error loading report for viewing:",a),yield(yield n.alertController.create({header:n.ts.t("Error"),message:n.ts.t("Failed to load the report."),buttons:["OK"]})).present(),n.router.navigate(["/biodiversity"])}})()}deleteEntry(){var t=this;return(0,g.A)(function*(){const n=t.auth.getCurrentUser();var r;!n||n.level<4?yield(yield t.alertController.create({header:t.ts.t("Permission Denied"),message:t.ts.t("Only Level 4 users can delete entries."),buttons:["OK"]})).present():yield(yield t.alertController.create({header:t.ts.t("Delete Entry"),message:t.ts.t("Are you sure you want to permanently delete this entry? This will remove it from the database and back it up to deleted files storage. This action cannot be undone."),buttons:[{text:t.ts.t("Cancel"),role:"cancel"},{text:t.ts.t("Delete"),role:"destructive",handler:(r=(0,g.A)(function*(){yield t.performDeletion()}),function(){return r.apply(this,arguments)})}]})).present()})()}performDeletion(){var t=this;return(0,g.A)(function*(){const n=yield t.loadingController.create({message:t.ts.t("Deleting entry...")});yield n.present();try{const a=t.auth.getCurrentUser();yield t.entryDeletionService.deleteEntry({reportId:t.currentReportId,formType:"flora-fauna",tableName:"flora_fauna_reports",deletedBy:a?.username||"Unknown",deletedByEmail:a?.email||"",originalSubmittedBy:t.loadedReport?.submittedBy,originalSubmittedAt:t.loadedReport?.createdAt}),yield n.dismiss(),yield(yield t.alertController.create({header:t.ts.t("Success"),message:t.ts.t("Entry has been deleted and backed up successfully."),buttons:[{text:"OK",handler:()=>{t.router.navigate(["/biodiversity"])}}]})).present()}catch(a){yield n.dismiss(),console.error("Error deleting entry:",a),yield(yield t.alertController.create({header:t.ts.t("Error"),message:t.ts.t("Failed to delete entry. Please try again."),buttons:["OK"]})).present()}})()}static#e=i=()=>(this.\u0275fac=function(n){return new(n||l)(e.rXU(b.ok),e.rXU(p.hG),e.rXU(p.Xi),e.rXU(D.Ix),e.rXU(D.nX),e.rXU(p.W3),e.rXU(ye.W),e.rXU(xe.m),e.rXU(R.I),e.rXU(I.N),e.rXU(Se.G),e.rXU(Oe.H),e.rXU(ke.C),e.rXU(Fe.k),e.rXU(T.L))},this.\u0275cmp=e.VBU({type:l,selectors:[["app-flora-fauna"]],standalone:!1,decls:260,vars:201,consts:[["dateInput",""],["timeInput",""],[1,"green1"],["slot","start"],[3,"defaultHref"],[1,"green1","compact-toolbar"],[1,"date-time-text"],["style","cursor: pointer;",3,"click",4,"ngIf"],[4,"ngIf"],["type","date",2,"position","absolute","opacity","0","width","0","height","0","pointer-events","none",3,"change","value"],["type","time",2,"position","absolute","opacity","0","width","0","height","0","pointer-events","none",3,"change","value"],[1,"green1","metadata-toolbar"],[1,"metadata-container"],[1,"metadata-item",3,"click"],["name","location",1,"metadata-icon"],[1,"metadata-label"],["name","alert-circle","class","status-icon required",4,"ngIf"],["class","metadata-item",3,"click",4,"ngIf"],["class","edit-location-link",3,"click",4,"ngIf"],["style","padding: 0 16px; font-size: 0.75rem; color: #e76f51;",4,"ngIf"],["color","light",3,"value"],[1,"progress-text"],[3,"ngSubmit","formGroup"],["class","edit-mode-banner",4,"ngIf"],["class","edit-mode-banner editing",4,"ngIf"],[2,"position","relative"],["position","stacked"],["formControlName","observer","type","text",3,"placeholder"],["name","close-circle","color","danger","style","position: absolute; top: 12px; right: 10px;",4,"ngIf"],["name","checkmark-circle","style","position: absolute; top: 12px; right: 10px; color: #52a676;",4,"ngIf"],["formControlName","weather","interface","popover",3,"placeholder"],["value","sunny"],["value","partly_cloudy"],["value","cloudy"],["value","overcast"],["value","rainy"],["value","stormy"],["value","foggy"],["value","windy"],["formControlName","tide","interface","popover",3,"placeholder"],["value","high"],["value","low"],["value","incoming"],["value","outgoing"],[1,"table-container"],[1,"mangrove-table"],[1,"header-with-info"],["name","information-circle-outline",1,"header-info-icon",3,"click"],[1,"header-offset"],["formArrayName","mangroves"],[3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","otherFlora"],["class","flora-row",3,"formGroupName",4,"ngFor","ngForOf"],["expand","block","fill","outline",3,"click",4,"ngIf"],["formArrayName","fauna"],["class","fauna-row",3,"formGroupName",4,"ngFor","ngForOf"],[1,"disturbance-item"],[1,"disturbance-title"],["lines","none"],[1,"checkbox-group"],["formControlName","mainRoads",1,"green-checkbox"],[1,"checkbox-with-info"],["name","information-circle-outline",1,"info-icon",3,"click"],["formControlName","secondaryRoads",1,"green-checkbox"],["formControlName","buildings","multiple","true","interface","popover",3,"placeholder"],["value","Hotel/Restaurant"],["value","Residential buildings"],["value","Commercial buildings"],["formControlName","agriculturalFacilities",1,"green-checkbox"],["formControlName","farms",1,"green-checkbox"],["lines","none",1,"toggle-item"],[1,"toggle-labels"],[1,"toggle-no",3,"hidden"],["formControlName","hasDevelopmentOther",1,"coastal-toggle"],[1,"toggle-yes",3,"hidden"],["formControlName","hasWaterFlowDisruption",1,"coastal-toggle"],["lines","none",4,"ngIf"],["formControlName","otherObservations","rows","6",3,"placeholder",4,"ngIf"],["rows","6","readonly","",3,"value",4,"ngIf"],["class","form-buttons",4,"ngIf"],["class","button-container",4,"ngIf"],[2,"cursor","pointer",3,"click"],["name","alert-circle",1,"status-icon","required"],["name","grid",1,"metadata-icon"],["name","apps",1,"metadata-icon"],[1,"edit-location-link",3,"click"],[2,"padding","0 16px","font-size","0.75rem","color","#e76f51"],[1,"edit-mode-banner"],["expand","block","color","warning",3,"click"],["name","create-outline","slot","start"],[1,"edit-mode-banner","editing"],["name","create-outline"],["name","close-circle","color","danger",2,"position","absolute","top","12px","right","10px"],["name","checkmark-circle",2,"position","absolute","top","12px","right","10px","color","#52a676"],[3,"formGroupName"],[1,"species-cell"],[1,"species-info"],[1,"species-name"],[1,"stepper-input"],["formControlName","numAdults","type","number","min","0","placeholder","0"],[1,"stepper-buttons"],["type","button",1,"stepper-btn","plus",3,"click","disabled"],["type","button",1,"stepper-btn","minus",3,"click","disabled"],[1,"checkbox-cell"],["formControlName","recruitsPresent"],["formControlName","dominantRecruit",3,"ionChange"],[1,"flora-row",3,"formGroupName"],["formControlName","species","type","text",3,"placeholder"],[1,"flora-options"],["formControlName","dominant","slot","start",3,"ionChange"],[1,"photo-section"],["size","small",3,"click",4,"ngIf"],["class","photo-preview",4,"ngIf"],["size","small","color","danger","fill","clear",3,"click",4,"ngIf"],["size","small",3,"click"],["name","camera","slot","start"],[1,"photo-preview"],[1,"photo-wrapper"],["alt","Flora photo",2,"cursor","pointer",3,"click","src"],[1,"click-hint"],["size","small","color","danger",3,"click",4,"ngIf"],["size","small","color","danger",3,"click"],["name","trash","slot","icon-only"],["size","small","color","danger","fill","clear",3,"click"],["name","remove-circle","slot","icon-only"],["expand","block","fill","outline",3,"click"],["name","add-circle","slot","start"],[1,"fauna-row",3,"formGroupName"],[1,"fauna-options"],["alt","Fauna photo",2,"cursor","pointer",3,"click","src"],["formControlName","developmentOther","rows","2",3,"placeholder"],["formControlName","waterFlowTypes","multiple","true","interface","popover",3,"placeholder"],["value","Fallen trees"],["value","Built up sediment/debris"],["value","Pollution"],["formControlName","waterFlowDisruption","rows","2",3,"placeholder"],["formControlName","otherObservations","rows","6",3,"placeholder"],["rows","6","readonly","",3,"value"],[1,"form-buttons"],["expand","block","type","submit",1,"submit-button",3,"disabled"],["name","checkmark-circle","slot","start"],["expand","block","fill","outline","color","medium",1,"save-draft-button",3,"click"],["name","save-outline","slot","start"],["expand","block","fill","outline",1,"discard-button",3,"click"],["name","trash-outline","slot","start"],[1,"button-container"],["expand","block","color","danger",1,"delete-button",3,"click"]],template:function(n,a){if(1&n){const r=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-buttons",3),e.nrm(3,"ion-back-button",4),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"t"),e.k0s()(),e.j41(7,"ion-toolbar",5)(8,"ion-text",6),e.DNE(9,Ne,2,1,"span",7)(10,Ie,2,1,"span",8),e.EFF(11," \xa0 \u2022 \xa0 "),e.DNE(12,Re,2,1,"span",7)(13,Te,2,1,"span",8),e.j41(14,"input",9,0),e.bIt("change",function(d){return s.eBV(r),s.Njj(a.onDateChanged(d))}),e.k0s(),e.j41(16,"input",10,1),e.bIt("change",function(d){return s.eBV(r),s.Njj(a.onTimeChanged(d))}),e.k0s(),e.DNE(18,je,2,1,"span",8),e.k0s()(),e.j41(19,"ion-toolbar",11)(20,"div",12)(21,"div",13),e.bIt("click",function(){return s.eBV(r),s.Njj(!a.viewMode&&a.editLocation())}),e.nrm(22,"ion-icon",14),e.j41(23,"span",15),e.EFF(24),e.nI1(25,"t"),e.k0s(),e.DNE(26,Ee,1,0,"ion-icon",16),e.k0s(),e.DNE(27,Ge,4,1,"div",17)(28,De,4,1,"div",17)(29,$e,3,3,"span",18),e.k0s(),e.DNE(30,Ae,3,3,"ion-error",19),e.k0s(),e.j41(31,"ion-toolbar",5),e.nrm(32,"ion-progress-bar",20),e.j41(33,"ion-text",21),e.EFF(34),e.nI1(35,"t"),e.k0s()()(),e.j41(36,"ion-content")(37,"form",22),e.bIt("ngSubmit",function(){return s.eBV(r),s.Njj(a.onSubmit())}),e.DNE(38,Ve,5,3,"div",23)(39,ze,5,3,"div",24),e.j41(40,"ion-card")(41,"ion-card-header",2)(42,"ion-card-title"),e.EFF(43),e.nI1(44,"t"),e.k0s()(),e.j41(45,"ion-card-content")(46,"ion-item",25)(47,"ion-label",26),e.EFF(48),e.nI1(49,"t"),e.k0s(),e.nrm(50,"ion-input",27),e.nI1(51,"t"),e.DNE(52,Be,1,0,"ion-icon",28)(53,Le,1,0,"ion-icon",29)(54,Ye,3,3,"ion-error",8),e.k0s(),e.j41(55,"ion-item",25)(56,"ion-label",26),e.EFF(57),e.nI1(58,"t"),e.k0s(),e.j41(59,"ion-select",30),e.nI1(60,"t"),e.j41(61,"ion-select-option",31),e.EFF(62),e.nI1(63,"t"),e.k0s(),e.j41(64,"ion-select-option",32),e.EFF(65),e.nI1(66,"t"),e.k0s(),e.j41(67,"ion-select-option",33),e.EFF(68),e.nI1(69,"t"),e.k0s(),e.j41(70,"ion-select-option",34),e.EFF(71),e.nI1(72,"t"),e.k0s(),e.j41(73,"ion-select-option",35),e.EFF(74),e.nI1(75,"t"),e.k0s(),e.j41(76,"ion-select-option",36),e.EFF(77),e.nI1(78,"t"),e.k0s(),e.j41(79,"ion-select-option",37),e.EFF(80),e.nI1(81,"t"),e.k0s(),e.j41(82,"ion-select-option",38),e.EFF(83),e.nI1(84,"t"),e.k0s()(),e.DNE(85,Xe,1,0,"ion-icon",28)(86,Ue,1,0,"ion-icon",29)(87,Je,3,3,"ion-error",8),e.k0s(),e.j41(88,"ion-item",25)(89,"ion-label",26),e.EFF(90),e.nI1(91,"t"),e.k0s(),e.j41(92,"ion-select",39),e.nI1(93,"t"),e.j41(94,"ion-select-option",40),e.EFF(95),e.nI1(96,"t"),e.k0s(),e.j41(97,"ion-select-option",41),e.EFF(98),e.nI1(99,"t"),e.k0s(),e.j41(100,"ion-select-option",42),e.EFF(101),e.nI1(102,"t"),e.k0s(),e.j41(103,"ion-select-option",43),e.EFF(104),e.nI1(105,"t"),e.k0s()(),e.DNE(106,qe,1,0,"ion-icon",28)(107,Ke,1,0,"ion-icon",29)(108,We,3,3,"ion-error",8),e.k0s()()(),e.j41(109,"ion-card")(110,"ion-card-header",2)(111,"ion-card-title"),e.EFF(112),e.nI1(113,"t"),e.k0s()(),e.j41(114,"ion-card-content")(115,"div",44)(116,"table",45)(117,"thead")(118,"tr")(119,"th"),e.EFF(120),e.nI1(121,"t"),e.k0s(),e.j41(122,"th")(123,"div",46)(124,"ion-icon",47),e.bIt("click",function(){return s.eBV(r),s.Njj(a.showAdultsDefinition())}),e.k0s(),e.j41(125,"span"),e.EFF(126),e.nI1(127,"t"),e.nrm(128,"br"),e.j41(129,"small"),e.EFF(130),e.nI1(131,"t"),e.k0s()()()(),e.j41(132,"th")(133,"div",46)(134,"ion-icon",47),e.bIt("click",function(){return s.eBV(r),s.Njj(a.showRecruitsDefinition())}),e.k0s(),e.j41(135,"span"),e.EFF(136),e.nI1(137,"t"),e.k0s()()(),e.j41(138,"th")(139,"div",48),e.EFF(140),e.nI1(141,"t"),e.k0s()()()(),e.j41(142,"tbody",49),e.DNE(143,He,22,7,"tr",50),e.k0s()()()()(),e.j41(144,"ion-card")(145,"ion-card-header",2)(146,"ion-card-title"),e.EFF(147),e.nI1(148,"t"),e.k0s(),e.j41(149,"ion-card-subtitle"),e.EFF(150),e.nI1(151,"t"),e.k0s()(),e.j41(152,"ion-card-content")(153,"div",51),e.DNE(154,nt,17,16,"div",52),e.k0s(),e.DNE(155,at,4,3,"ion-button",53),e.k0s()(),e.j41(156,"ion-card")(157,"ion-card-header",2)(158,"ion-card-title"),e.EFF(159),e.nI1(160,"t"),e.k0s(),e.j41(161,"ion-card-subtitle"),e.EFF(162),e.nI1(163,"t"),e.k0s()(),e.j41(164,"ion-card-content")(165,"div",54),e.DNE(166,ct,12,11,"div",55),e.k0s(),e.DNE(167,lt,4,3,"ion-button",53),e.k0s()(),e.j41(168,"ion-card")(169,"ion-card-header",2)(170,"ion-card-title"),e.EFF(171),e.nI1(172,"t"),e.k0s()(),e.j41(173,"ion-card-content")(174,"div",56)(175,"div",57),e.EFF(176),e.nI1(177,"t"),e.k0s(),e.j41(178,"ion-item",58)(179,"div",59)(180,"ion-checkbox",60),e.EFF(181),e.nI1(182,"t"),e.k0s(),e.j41(183,"div",61)(184,"span"),e.EFF(185),e.nI1(186,"t"),e.k0s(),e.j41(187,"ion-icon",62),e.bIt("click",function(){return s.eBV(r),s.Njj(a.showSecondaryRoadInfo())}),e.k0s(),e.nrm(188,"ion-checkbox",63),e.k0s()()()(),e.j41(189,"div",56)(190,"div",57),e.EFF(191),e.nI1(192,"t"),e.k0s(),e.j41(193,"ion-item",58)(194,"ion-select",64),e.nI1(195,"t"),e.j41(196,"ion-select-option",65),e.EFF(197),e.nI1(198,"t"),e.k0s(),e.j41(199,"ion-select-option",66),e.EFF(200),e.nI1(201,"t"),e.k0s(),e.j41(202,"ion-select-option",67),e.EFF(203),e.nI1(204,"t"),e.k0s()()()(),e.j41(205,"div",56)(206,"div",57),e.EFF(207),e.nI1(208,"t"),e.k0s(),e.j41(209,"ion-item",58)(210,"div",59)(211,"ion-checkbox",68),e.EFF(212),e.nI1(213,"t"),e.k0s(),e.j41(214,"ion-checkbox",69),e.EFF(215),e.nI1(216,"t"),e.k0s()()()(),e.j41(217,"div",56)(218,"div",57),e.EFF(219),e.nI1(220,"t"),e.k0s(),e.j41(221,"ion-item",70)(222,"div",71)(223,"span",72),e.EFF(224),e.nI1(225,"t"),e.k0s(),e.nrm(226,"ion-toggle",73),e.j41(227,"span",74),e.EFF(228),e.nI1(229,"t"),e.k0s()()(),e.DNE(230,dt,6,6,"ion-item",8),e.k0s(),e.j41(231,"div",56)(232,"div",57),e.EFF(233),e.nI1(234,"t"),e.k0s(),e.j41(235,"ion-item",70)(236,"div",71)(237,"span",72),e.EFF(238),e.nI1(239,"t"),e.k0s(),e.nrm(240,"ion-toggle",75),e.j41(241,"span",74),e.EFF(242),e.nI1(243,"t"),e.k0s()()(),e.DNE(244,pt,12,12,"ion-item",76)(245,ut,6,6,"ion-item",8),e.k0s()()(),e.j41(246,"ion-card")(247,"ion-card-header",2)(248,"ion-card-title"),e.EFF(249),e.nI1(250,"t"),e.k0s()(),e.j41(251,"ion-card-content")(252,"ion-item")(253,"ion-label",26),e.EFF(254),e.nI1(255,"t"),e.k0s(),e.DNE(256,mt,2,3,"ion-textarea",77)(257,gt,1,1,"ion-textarea",78),e.k0s()()(),e.DNE(258,ht,13,10,"div",79)(259,ft,5,3,"div",80),e.k0s()()}if(2&n){let r,c,d,u,m,h,_,P,M,C,w,O,y,x,$,k,A,V,z,B,L,Y,X;e.R7$(3),e.Y8G("defaultHref",a.viewMode?"/biodiversity":"/home"),e.R7$(2),e.JRh(e.bMT(6,97,"Biodiversity Monitoring")),e.R7$(4),e.Y8G("ngIf",(null==a.currentUser?null:a.currentUser.level)>=4&&!a.viewMode),e.R7$(),e.Y8G("ngIf",!((null==a.currentUser?null:a.currentUser.level)>=4&&!a.viewMode)),e.R7$(2),e.Y8G("ngIf",(null==a.currentUser?null:a.currentUser.level)>=4&&!a.viewMode),e.R7$(),e.Y8G("ngIf",!((null==a.currentUser?null:a.currentUser.level)>=4&&!a.viewMode)),e.R7$(),e.Y8G("value",null==(r=a.biodiversityForm.get("observationDate"))?null:r.value),e.R7$(2),e.Y8G("value",null==(c=a.biodiversityForm.get("observationTime"))?null:c.value),e.R7$(2),e.Y8G("ngIf",(a.viewMode||a.isEditMode)&&a.getEditedDateTime()),e.R7$(6),e.JRh((null==(d=a.biodiversityForm.get("location"))?null:d.value)||e.bMT(25,99,"Add location")),e.R7$(2),e.Y8G("ngIf",!(null!=(u=a.biodiversityForm.get("location"))&&u.value||a.viewMode)),e.R7$(),e.Y8G("ngIf",(null==(m=a.biodiversityForm.get("zoneNumber"))?null:m.value)&&a.locationHasZones()),e.R7$(),e.Y8G("ngIf",(null==(h=a.biodiversityForm.get("quadNumber"))?null:h.value)&&a.locationHasQuads()),e.R7$(),e.Y8G("ngIf",a.isEditMode&&a.currentUser&&a.currentUser.level>=4),e.R7$(),e.Y8G("ngIf",(null==(_=a.biodiversityForm.get("location"))?null:_.hasError("required"))&&(null==(_=a.biodiversityForm.get("location"))?null:_.touched)),e.R7$(2),e.Y8G("value",a.progress),e.R7$(2),e.Lme(" ",(100*a.progress).toFixed(0),"% ",e.bMT(35,101,"Complete")," "),e.R7$(2),e.AVh("view-mode",a.viewMode),e.R7$(),e.Y8G("formGroup",a.biodiversityForm),e.R7$(),e.Y8G("ngIf",a.viewMode&&a.currentUser&&a.currentUser.level>=4),e.R7$(),e.Y8G("ngIf",a.isEditMode),e.R7$(4),e.JRh(e.bMT(44,103,"Survey Information")),e.R7$(5),e.JRh(e.bMT(49,105,"Observer")),e.R7$(2),e.Y8G("placeholder",e.bMT(51,107,"Enter observer name")),e.R7$(2),e.Y8G("ngIf",!(null!=(P=a.biodiversityForm.get("observer"))&&P.value)),e.R7$(),e.Y8G("ngIf",null==(M=a.biodiversityForm.get("observer"))?null:M.value),e.R7$(),e.Y8G("ngIf",(null==(C=a.biodiversityForm.get("observer"))?null:C.hasError("required"))&&(null==(C=a.biodiversityForm.get("observer"))?null:C.touched)),e.R7$(3),e.JRh(e.bMT(58,109,"Weather")),e.R7$(2),e.Y8G("placeholder",e.bMT(60,111,"Select weather")),e.R7$(3),e.JRh(e.bMT(63,113,"Sunny")),e.R7$(3),e.JRh(e.bMT(66,115,"Partly Cloudy")),e.R7$(3),e.JRh(e.bMT(69,117,"Cloudy")),e.R7$(3),e.JRh(e.bMT(72,119,"Overcast")),e.R7$(3),e.JRh(e.bMT(75,121,"Rainy")),e.R7$(3),e.JRh(e.bMT(78,123,"Stormy")),e.R7$(3),e.JRh(e.bMT(81,125,"Foggy")),e.R7$(3),e.JRh(e.bMT(84,127,"Windy")),e.R7$(2),e.Y8G("ngIf",!(null!=(w=a.biodiversityForm.get("weather"))&&w.value)),e.R7$(),e.Y8G("ngIf",null==(O=a.biodiversityForm.get("weather"))?null:O.value),e.R7$(),e.Y8G("ngIf",(null==(y=a.biodiversityForm.get("weather"))?null:y.hasError("required"))&&(null==(y=a.biodiversityForm.get("weather"))?null:y.touched)),e.R7$(3),e.JRh(e.bMT(91,129,"Tide")),e.R7$(2),e.Y8G("placeholder",e.bMT(93,131,"Select tide")),e.R7$(3),e.JRh(e.bMT(96,133,"High")),e.R7$(3),e.JRh(e.bMT(99,135,"Low")),e.R7$(3),e.JRh(e.bMT(102,137,"Incoming")),e.R7$(3),e.JRh(e.bMT(105,139,"Outgoing")),e.R7$(2),e.Y8G("ngIf",!(null!=(x=a.biodiversityForm.get("tide"))&&x.value)),e.R7$(),e.Y8G("ngIf",null==($=a.biodiversityForm.get("tide"))?null:$.value),e.R7$(),e.Y8G("ngIf",(null==(k=a.biodiversityForm.get("tide"))?null:k.hasError("required"))&&(null==(k=a.biodiversityForm.get("tide"))?null:k.touched)),e.R7$(4),e.JRh(e.bMT(113,141,"Mangroves")),e.R7$(8),e.JRh(e.bMT(121,143,"Species")),e.R7$(6),e.JRh(e.bMT(127,145,"No. Adults")),e.R7$(4),e.SpI("(",e.bMT(131,147,"trees"),")"),e.R7$(6),e.JRh(e.bMT(137,149,"Recruits Present")),e.R7$(4),e.JRh(e.bMT(141,151,"Dominant Recruit")),e.R7$(3),e.Y8G("ngForOf",a.mangroves.controls),e.R7$(4),e.JRh(e.bMT(148,153,"Other Flora")),e.R7$(3),e.JRh(e.bMT(151,155,"Note down species present")),e.R7$(4),e.Y8G("ngForOf",a.otherFlora.controls),e.R7$(),e.Y8G("ngIf",!a.viewMode),e.R7$(4),e.JRh(e.bMT(160,157,"Fauna")),e.R7$(3),e.JRh(e.bMT(163,159,"Note down all animal species seen")),e.R7$(4),e.Y8G("ngForOf",a.fauna.controls),e.R7$(),e.Y8G("ngIf",!a.viewMode),e.R7$(4),e.JRh(e.bMT(172,161,"Description of Quad/Area")),e.R7$(5),e.JRh(e.bMT(177,163,"Roads")),e.R7$(5),e.JRh(e.bMT(182,165,"Main")),e.R7$(4),e.JRh(e.bMT(186,167,"Secondary")),e.R7$(6),e.JRh(e.bMT(192,169,"Buildings")),e.R7$(3),e.Y8G("placeholder",e.bMT(195,171,"Select building types")),e.R7$(3),e.JRh(e.bMT(198,173,"Hotel/Restaurant")),e.R7$(3),e.JRh(e.bMT(201,175,"Residential buildings")),e.R7$(3),e.JRh(e.bMT(204,177,"Commercial buildings")),e.R7$(4),e.JRh(e.bMT(208,179,"Agriculture")),e.R7$(5),e.JRh(e.bMT(213,181,"Agricultural facilities")),e.R7$(3),e.JRh(e.bMT(216,183,"Farms")),e.R7$(4),e.JRh(e.bMT(220,185,"Other development observations?")),e.R7$(4),e.Y8G("hidden",null==(A=a.biodiversityForm.get("hasDevelopmentOther"))?null:A.value),e.R7$(),e.JRh(e.bMT(225,187,"No")),e.R7$(3),e.Y8G("hidden",!(null!=(V=a.biodiversityForm.get("hasDevelopmentOther"))&&V.value)),e.R7$(),e.JRh(e.bMT(229,189,"Yes")),e.R7$(2),e.Y8G("ngIf",null==(z=a.biodiversityForm.get("hasDevelopmentOther"))?null:z.value),e.R7$(3),e.JRh(e.bMT(234,191,"Water flow disrupted?")),e.R7$(4),e.Y8G("hidden",null==(B=a.biodiversityForm.get("hasWaterFlowDisruption"))?null:B.value),e.R7$(),e.JRh(e.bMT(239,193,"No")),e.R7$(3),e.Y8G("hidden",!(null!=(L=a.biodiversityForm.get("hasWaterFlowDisruption"))&&L.value)),e.R7$(),e.JRh(e.bMT(243,195,"Yes")),e.R7$(2),e.Y8G("ngIf",null==(Y=a.biodiversityForm.get("hasWaterFlowDisruption"))?null:Y.value),e.R7$(),e.Y8G("ngIf",null==(X=a.biodiversityForm.get("hasWaterFlowDisruption"))?null:X.value),e.R7$(4),e.JRh(e.bMT(250,197,"Other Observations")),e.R7$(5),e.JRh(e.bMT(255,199,"Additional Notes")),e.R7$(2),e.Y8G("ngIf",!a.viewMode),e.R7$(),e.Y8G("ngIf",a.viewMode),e.R7$(),e.Y8G("ngIf",!a.viewMode),e.R7$(),e.Y8G("ngIf",a.viewMode&&(null==a.currentUser?null:a.currentUser.level)>=4)}},dependencies:[v.Sq,v.bT,b.qT,b.BC,b.cb,b.j4,b.JD,b.$R,b.v8,p.Jm,p.QW,p.b_,p.I9,p.ME,p.HW,p.tN,p.eY,p.W9,p.eU,p.iq,p.$w,p.uz,p.he,p.FH,p.Nm,p.Ip,p.IO,p.nc,p.BC,p.BY,p.ai,p.hB,p.su,p.Je,p.Gw,p.el,p.T6,F.D],styles:[".green1[_ngcontent-%COMP%]{--background: #52a676;color:#fff}.green1[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{--color: white;transition:transform .2s}.green1[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]:hover{transform:translate(-4px)}.green1[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);width:100%;pointer-events:none}.green1.compact-toolbar[_ngcontent-%COMP%]{--min-height: 28px;--padding-top: 5px;--padding-bottom: 5px}.edit-mode-banner[_ngcontent-%COMP%]{padding:.75rem 1rem;margin:.5rem;border-radius:.5rem}.edit-mode-banner[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: .5rem;font-weight:600}.edit-mode-banner.editing[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffc107;display:flex;align-items:center;gap:.5rem;color:#856404;font-weight:500}.edit-mode-banner.editing[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.date-time-text[_ngcontent-%COMP%]{display:block;text-align:center;color:#fffffff2;font-size:14px;padding:0;margin:3px 0;font-weight:400;letter-spacing:.3px;line-height:1.2}.metadata-toolbar[_ngcontent-%COMP%]{--min-height: 40px;--padding-top: 6px;--padding-bottom: 6px}.metadata-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px;padding:0 12px;flex-wrap:wrap}.metadata-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;background:#ffffff26;border-radius:16px;padding:5px 10px;cursor:pointer;transition:all .2s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.metadata-item[_ngcontent-%COMP%]:active{transform:scale(.95);background:#ffffff40}.metadata-icon[_ngcontent-%COMP%]{font-size:14px;color:#ffffffe6;min-width:14px}.metadata-label[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:500;letter-spacing:.2px;white-space:nowrap;max-width:120px;overflow:hidden;text-overflow:ellipsis}.status-icon[_ngcontent-%COMP%]{font-size:14px;margin-left:2px}.status-icon.success[_ngcontent-%COMP%]{color:#52a676}.status-icon.required[_ngcontent-%COMP%]{color:#ffd93d;animation:_ngcontent-%COMP%_pulse 2s infinite}.edit-location-link[_ngcontent-%COMP%]{color:#ffffffe6;font-size:11px;text-decoration:underline;cursor:pointer;margin-left:8px;padding:4px 8px}.edit-location-link[_ngcontent-%COMP%]:active{opacity:.7}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}.progress-text[_ngcontent-%COMP%]{display:block;text-align:center;color:#fff;font-size:13px;padding:0;margin:0 0 4px;font-weight:400;line-height:1}ion-card[_ngcontent-%COMP%]{margin:16px;border-radius:12px;box-shadow:0 2px 8px #0000001a}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{border-radius:12px 12px 0 0;padding:16px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#fff}@media (min-width: 400px) and (max-width: 800px){ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.25rem}}@media (max-width: 399px) and (min-width: 360px){ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 359px){ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:.95rem}}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#ffffffe6;font-size:.875rem;margin-top:4px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{background:#fff;padding:16px}.table-container[_ngcontent-%COMP%]{overflow-x:auto;margin:0 -16px}.mangrove-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:1rem}@media (max-width: 359px){.mangrove-table[_ngcontent-%COMP%]{font-size:.8rem}}.mangrove-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.mangrove-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 8px;text-align:center;font-weight:600;border-bottom:2px solid #ddd}@media (max-width: 359px){.mangrove-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 4px;font-size:.75rem}}.mangrove-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;font-weight:400;font-size:.75rem;color:#666}@media (max-width: 359px){.mangrove-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.65rem}}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #eee}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9f9f9}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px;text-align:center;vertical-align:middle}@media (max-width: 359px){.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 4px}}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.species-cell[_ngcontent-%COMP%]{text-align:left;padding-left:12px}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.species-cell[_ngcontent-%COMP%]   .species-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.species-cell[_ngcontent-%COMP%]   .species-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-weight:600;font-size:1rem;color:#0d3d2f}@media (max-width: 359px){.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.species-cell[_ngcontent-%COMP%]   .species-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.8rem}}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.species-cell[_ngcontent-%COMP%]   .species-name[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:#666;margin-top:2px;font-size:.8rem}@media (max-width: 359px){.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.species-cell[_ngcontent-%COMP%]   .species-name[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.65rem}}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.species-cell[_ngcontent-%COMP%]   .species-name[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.species-cell[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:20px;color:#4fb3bf;cursor:pointer;flex-shrink:0;transition:color .2s ease}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.species-cell[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]:hover{color:#2d8659}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.checkbox-cell[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--size: 24px;--checkbox-background-checked: #4fb3bf;--border-color-checked: #4fb3bf;--checkmark-color: white}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.checkbox-cell[_ngcontent-%COMP%]   ion-checkbox.greyed-out[_ngcontent-%COMP%]{opacity:.4;pointer-events:all}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;text-align:center;border:1px solid #ddd;border-radius:4px;max-width:80px;margin:0 auto}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{max-width:50px;min-width:40px;height:49px;--padding-start: 4px;--padding-end: 4px;border:1px solid #ddd;border-radius:4px;margin:0}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]   .stepper-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]   .stepper-buttons[_ngcontent-%COMP%]   .stepper-btn[_ngcontent-%COMP%]{width:24px;height:22px;border:none;border-radius:4px;font-size:14px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:background-color .2s;background:#f0f0f0;color:#666}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]   .stepper-buttons[_ngcontent-%COMP%]   .stepper-btn.plus[_ngcontent-%COMP%]{background:#4fb3bf;color:#fff}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]   .stepper-buttons[_ngcontent-%COMP%]   .stepper-btn.plus[_ngcontent-%COMP%]:hover:not(:disabled){background:#3a9aa5}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]   .stepper-buttons[_ngcontent-%COMP%]   .stepper-btn.minus[_ngcontent-%COMP%]:hover:not(:disabled){background:#e0e0e0}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]   .stepper-buttons[_ngcontent-%COMP%]   .stepper-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.flora-row[_ngcontent-%COMP%], .fauna-row[_ngcontent-%COMP%]{margin-bottom:20px;padding:12px;background:#f9f9f9;border-radius:8px;border-left:4px solid #52a676}.flora-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .fauna-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;margin-bottom:8px}.flora-options[_ngcontent-%COMP%], .fauna-options[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-top:8px}.flora-options[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .fauna-options[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{flex:0 0 auto;margin:0}.flora-options[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%], .fauna-options[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--checkbox-background-checked: #4fb3bf;--border-color-checked: #4fb3bf;--checkmark-color: white}.photo-section[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:8px}.photo-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;position:relative}.photo-preview[_ngcontent-%COMP%]   .photo-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.photo-preview[_ngcontent-%COMP%]   .photo-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:8px;border:2px solid #52a676;position:relative;z-index:1;transition:transform .2s ease,box-shadow .2s ease;touch-action:manipulation;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.photo-preview[_ngcontent-%COMP%]   .photo-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 12px #2d865966}.photo-preview[_ngcontent-%COMP%]   .photo-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:active{transform:scale(.98)}.photo-preview[_ngcontent-%COMP%]   .photo-wrapper[_ngcontent-%COMP%]   .click-hint[_ngcontent-%COMP%]{font-size:10px;color:#999;font-style:italic;text-align:center;white-space:nowrap}.flora-options[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:not([color=danger]), .fauna-options[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:not([color=danger]){--background: #4fb3bf;--background-hover: #3d9daa;--background-activated: #3d9daa;--color: white}ion-card-content[_ngcontent-%COMP%] > ion-button[fill=outline][_ngcontent-%COMP%]{--border-color: #4fb3bf;--color: #4fb3bf}ion-card-content[_ngcontent-%COMP%] > ion-button[fill=outline][_ngcontent-%COMP%]:hover{--background: rgba(79, 179, 191, .1)}.form-buttons[_ngcontent-%COMP%]{padding:0 16px;margin-top:24px;margin-bottom:32px}.form-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:12px}.form-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-buttons[_ngcontent-%COMP%]   ion-button.save-draft-button[_ngcontent-%COMP%]{margin:10px 0 12px}.form-buttons[_ngcontent-%COMP%]   .save-draft-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-size:1rem;font-weight:500;--background: rgba(107, 124, 122, .1);--border-color: #6b7c7a;--color: #6b7c7a;--background-hover: rgba(107, 124, 122, .2);--background-activated: rgba(107, 124, 122, .3)}.form-buttons[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{margin:0;--border-radius: 8px;height:48px;font-size:1.125rem;font-weight:600;--background: #52a676;--background-hover: #478f65;--background-activated: #478f65}.form-buttons[_ngcontent-%COMP%]   .discard-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-size:1rem;font-weight:500;--color: #e76f51;--border-color: #e76f51;--border-width: 2px;--background-hover: rgba(231, 111, 81, .1);--background-activated: rgba(231, 111, 81, .2);--ripple-color: rgba(231, 111, 81, .3)}.form-buttons[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{margin-top:20px;--background: #d32f2f;--background-hover: #b71c1c;--background-activated: #b71c1c;font-weight:600;height:48px;font-size:1rem}.submit-button[_ngcontent-%COMP%]{margin:24px 16px 32px;--border-radius: 8px;height:48px;font-size:1.125rem;font-weight:600;--background: #52a676;--background-hover: #478f65;--background-activated: #478f65}.disturbance-item[_ngcontent-%COMP%]{padding:12px 0 0}.disturbance-item[_ngcontent-%COMP%]:not(:last-child){margin-bottom:0}.disturbance-title[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:#0d3d2f;margin-bottom:12px}@media (max-width: 359px){.disturbance-title[_ngcontent-%COMP%]{font-size:.92rem;font-weight:700}}.checkbox-group[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center;flex-wrap:wrap}.checkbox-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.95rem;color:#333}@media (max-width: 576px){.checkbox-group[_ngcontent-%COMP%]{gap:12px}}.checkbox-with-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.green-checkbox[_ngcontent-%COMP%]{--checkbox-background-checked: #52a676 !important;--border-color-checked: #52a676 !important;--border-color: #52a676 !important;--color-checked: #52a676 !important;--checkmark-color: white !important;--background: white !important;--size: 20px;margin-right:8px}@media (max-width: 359px){.green-checkbox[_ngcontent-%COMP%]{margin-right:0}}@media (max-width: 359px){.disturbance-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 4px;--padding-end: 4px;--inner-padding-end: 2px;--inner-padding-start: 4px}.disturbance-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.95rem!important;margin-bottom:4px}}ion-select[_ngcontent-%COMP%]{--placeholder-color: #999;--placeholder-opacity: 1;font-size:.95rem;max-width:100%}  ion-popover.select-popover{--width: auto;--min-width: 250px;--max-width: 90vw}  ion-popover.select-popover .popover-content{border-radius:12px;box-shadow:0 4px 16px #00000026}  ion-popover.select-popover ion-list{padding:8px 0}  ion-popover.select-popover ion-item{--padding-start: 16px;--padding-end: 16px;--min-height: 44px;font-size:.95rem}  ion-popover.select-popover ion-checkbox{--size: 20px;margin-right:12px;--checkbox-background-checked: #52a676 !important;--border-color-checked: #52a676 !important;--border-color: #52a676 !important;--color-checked: #52a676 !important;--checkmark-color: white !important;--background: white !important}  ion-popover.select-popover ion-item.item-checkbox-checked{--color: #52a676}  ion-popover.select-popover ion-item.item-checkbox-checked ion-label{color:#52a676!important;font-weight:500}  .select-interface-option{border-radius:8px}.info-icon[_ngcontent-%COMP%]{font-size:20px;color:#4fb3bf;cursor:pointer}.info-icon[_ngcontent-%COMP%]:hover{color:#3d9daa}.info-icon[_ngcontent-%COMP%]:active{transform:scale(.95)}.header-with-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;text-align:center}.header-with-info[_ngcontent-%COMP%]   .header-info-icon[_ngcontent-%COMP%]{font-size:16px;color:#999;cursor:pointer;flex-shrink:0;transition:color .2s ease}.header-with-info[_ngcontent-%COMP%]   .header-info-icon[_ngcontent-%COMP%]:hover{color:#666}.header-with-info[_ngcontent-%COMP%]   .header-info-icon[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 359px){.header-with-info[_ngcontent-%COMP%]{gap:2px}.header-with-info[_ngcontent-%COMP%]   .header-info-icon[_ngcontent-%COMP%]{font-size:14px}.header-with-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .header-with-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem!important}}.header-offset[_ngcontent-%COMP%]{margin-top:20px}@media (max-width: 359px){.header-offset[_ngcontent-%COMP%]{margin-top:16px}}.toggle-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--inner-padding-end: 0;margin-bottom:0;display:flex;align-items:center;justify-content:space-between;gap:16px}.toggle-labels[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0px;position:relative}.toggle-labels[_ngcontent-%COMP%]   .toggle-no[_ngcontent-%COMP%], .toggle-labels[_ngcontent-%COMP%]   .toggle-yes[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;min-width:35px;width:35px;text-align:center;flex-shrink:0}.toggle-labels[_ngcontent-%COMP%]   .toggle-no[_ngcontent-%COMP%]{color:#888;visibility:visible}.toggle-labels[_ngcontent-%COMP%]   .toggle-no[_ngcontent-%COMP%]:not(:last-child){margin-right:5px}.toggle-labels[_ngcontent-%COMP%]   .toggle-yes[_ngcontent-%COMP%]{color:#52a676;visibility:visible}.toggle-labels[_ngcontent-%COMP%]   .toggle-yes[_ngcontent-%COMP%]:not(:first-child){margin-left:5px}.toggle-labels[_ngcontent-%COMP%]   .toggle-no[hidden][_ngcontent-%COMP%], .toggle-labels[_ngcontent-%COMP%]   .toggle-yes[hidden][_ngcontent-%COMP%]{visibility:hidden;display:block!important}.coastal-toggle[_ngcontent-%COMP%]{--background: #ddd;--background-checked: #52a676;--handle-background: white;--handle-background-checked: white;--handle-width: 26px;--handle-height: 26px;--handle-spacing: 3px;width:52px;height:32px;min-width:52px;flex-shrink:0}.coastal-toggle[_ngcontent-%COMP%]::part(track){height:32px;width:52px;border-radius:16px}.coastal-toggle[_ngcontent-%COMP%]::part(handle){width:26px;height:26px}  .fullscreen-photo-modal{--width: 100%;--height: 100%;--border-radius: 0}  .fullscreen-photo-modal .modal-wrapper{position:absolute;top:0;left:0;width:100%;height:100%}ion-error[_ngcontent-%COMP%]{color:#e76f51!important;font-size:.75rem!important;margin-top:4px;padding-left:16px}ion-item.item-disabled[_ngcontent-%COMP%], ion-item.item-interactive-disabled[_ngcontent-%COMP%], ion-item.item-select-disabled[_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important}ion-item.item-disabled[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-item.item-interactive-disabled[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-item.item-select-disabled[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{opacity:1!important;color:#000!important;--color: #000 !important}ion-item.item-disabled[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%], ion-item.item-interactive-disabled[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%], ion-item.item-select-disabled[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important;color:#000!important;--color: #000 !important;--placeholder-color: #000 !important;--placeholder-opacity: 1 !important}ion-item.item-disabled[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%], ion-item.item-interactive-disabled[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%], ion-item.item-select-disabled[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important}ion-item.item-disabled[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%], ion-item.item-interactive-disabled[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%], ion-item.item-select-disabled[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important;--handle-background: #000 !important;--track-background: #ccc !important;--track-background-checked: #000 !important}  .item-disabled,   .item-interactive-disabled,   .item-select-disabled,   ion-item:has(ion-select.select-disabled),   ion-item:has(ion-toggle.toggle-disabled),   ion-item:has(ion-checkbox.checkbox-disabled),   ion-item:has(ion-input.input-disabled){opacity:1!important}  .item-disabled ion-label,   .item-disabled .label-text,   .item-disabled .label-text-wrapper,   .item-disabled .native-input,   .item-disabled .select-text,   .item-disabled .select-icon,   .item-interactive-disabled ion-label,   .item-interactive-disabled .label-text,   .item-interactive-disabled .label-text-wrapper,   .item-interactive-disabled .native-input,   .item-interactive-disabled .select-text,   .item-interactive-disabled .select-icon,   .item-select-disabled ion-label,   .item-select-disabled .label-text,   .item-select-disabled .label-text-wrapper,   .item-select-disabled .native-input,   .item-select-disabled .select-text,   .item-select-disabled .select-icon,   ion-item:has(ion-select.select-disabled) ion-label,   ion-item:has(ion-select.select-disabled) .label-text,   ion-item:has(ion-select.select-disabled) .label-text-wrapper,   ion-item:has(ion-select.select-disabled) .native-input,   ion-item:has(ion-select.select-disabled) .select-text,   ion-item:has(ion-select.select-disabled) .select-icon,   ion-item:has(ion-toggle.toggle-disabled) ion-label,   ion-item:has(ion-toggle.toggle-disabled) .label-text,   ion-item:has(ion-toggle.toggle-disabled) .label-text-wrapper,   ion-item:has(ion-toggle.toggle-disabled) .native-input,   ion-item:has(ion-toggle.toggle-disabled) .select-text,   ion-item:has(ion-toggle.toggle-disabled) .select-icon,   ion-item:has(ion-checkbox.checkbox-disabled) ion-label,   ion-item:has(ion-checkbox.checkbox-disabled) .label-text,   ion-item:has(ion-checkbox.checkbox-disabled) .label-text-wrapper,   ion-item:has(ion-checkbox.checkbox-disabled) .native-input,   ion-item:has(ion-checkbox.checkbox-disabled) .select-text,   ion-item:has(ion-checkbox.checkbox-disabled) .select-icon,   ion-item:has(ion-input.input-disabled) ion-label,   ion-item:has(ion-input.input-disabled) .label-text,   ion-item:has(ion-input.input-disabled) .label-text-wrapper,   ion-item:has(ion-input.input-disabled) .native-input,   ion-item:has(ion-input.input-disabled) .select-text,   ion-item:has(ion-input.input-disabled) .select-icon{opacity:1!important;color:#000!important;--color: #000 !important}  .greyed-out{opacity:1!important}  .checkbox-cell ion-checkbox.greyed-out{opacity:1!important;--checkbox-background-checked: #4fb3bf !important;--border-color-checked: #4fb3bf !important;--checkmark-color: white !important}ion-label[position=stacked][_ngcontent-%COMP%], ion-label.label-stacked[_ngcontent-%COMP%]{opacity:1!important;color:#000!important;--color: #000 !important}ion-select.select-disabled[_ngcontent-%COMP%], ion-select[disabled][_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important;color:#000!important;--color: #000 !important;--placeholder-color: #000 !important;--placeholder-opacity: 1 !important}ion-select.select-disabled[_ngcontent-%COMP%]   .select-text[_ngcontent-%COMP%], ion-select.select-disabled[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%], ion-select.select-disabled[_ngcontent-%COMP%]   .select-placeholder[_ngcontent-%COMP%], ion-select.select-disabled[_ngcontent-%COMP%]   .select-icon-inner[_ngcontent-%COMP%], ion-select[disabled][_ngcontent-%COMP%]   .select-text[_ngcontent-%COMP%], ion-select[disabled][_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%], ion-select[disabled][_ngcontent-%COMP%]   .select-placeholder[_ngcontent-%COMP%], ion-select[disabled][_ngcontent-%COMP%]   .select-icon-inner[_ngcontent-%COMP%]{opacity:1!important;color:#000!important}ion-select.select-disabled[_ngcontent-%COMP%]::part(text), ion-select.select-disabled[_ngcontent-%COMP%]::part(icon), ion-select.select-disabled[_ngcontent-%COMP%]::part(placeholder), ion-select[disabled][_ngcontent-%COMP%]::part(text), ion-select[disabled][_ngcontent-%COMP%]::part(icon), ion-select[disabled][_ngcontent-%COMP%]::part(placeholder){opacity:1!important;color:#000!important}ion-toggle.toggle-disabled[_ngcontent-%COMP%], ion-toggle[disabled][_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important}.checkbox-cell[_ngcontent-%COMP%]   ion-checkbox[disabled][_ngcontent-%COMP%], .checkbox-cell[_ngcontent-%COMP%]   ion-checkbox.checkbox-disabled[_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important;--checkbox-background-checked: #4fb3bf !important;--border-color-checked: #4fb3bf !important;--border-color: #4fb3bf !important;--checkmark-color: white !important}ion-checkbox.green-checkbox[disabled][_ngcontent-%COMP%], ion-checkbox.green-checkbox.checkbox-disabled[_ngcontent-%COMP%], .flora-options[_ngcontent-%COMP%]   ion-checkbox[disabled][_ngcontent-%COMP%], .flora-options[_ngcontent-%COMP%]   ion-checkbox.checkbox-disabled[_ngcontent-%COMP%], .checkbox-group[_ngcontent-%COMP%]   ion-checkbox[disabled][_ngcontent-%COMP%], .checkbox-group[_ngcontent-%COMP%]   ion-checkbox.checkbox-disabled[_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important;--checkbox-background-checked: #52a676 !important;--border-color-checked: #52a676 !important;--border-color: #52a676 !important;--checkmark-color: white !important}ion-item[_ngcontent-%COMP%]:has(ion-checkbox[disabled])   ion-label[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-checkbox.checkbox-disabled)   ion-label[_ngcontent-%COMP%], .flora-options[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .checkbox-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .checkbox-with-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1!important;color:#000!important}ion-checkbox.greyed-out[_ngcontent-%COMP%]{opacity:1!important}ion-item[_ngcontent-%COMP%]:has(ion-checkbox)   ion-label[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-checkbox)   .label-text[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:has(ion-checkbox)   .label-text-wrapper[_ngcontent-%COMP%]{opacity:1!important;color:#000!important;--color: #000 !important}ion-input.input-disabled[_ngcontent-%COMP%], ion-input[disabled][_ngcontent-%COMP%], ion-textarea.textarea-disabled[_ngcontent-%COMP%], ion-textarea[disabled][_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important}ion-input.input-disabled[_ngcontent-%COMP%]   .native-input[_ngcontent-%COMP%], ion-input.input-disabled[_ngcontent-%COMP%]   .native-textarea[_ngcontent-%COMP%], ion-input.input-disabled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], ion-input.input-disabled[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], ion-input[disabled][_ngcontent-%COMP%]   .native-input[_ngcontent-%COMP%], ion-input[disabled][_ngcontent-%COMP%]   .native-textarea[_ngcontent-%COMP%], ion-input[disabled][_ngcontent-%COMP%]   input[_ngcontent-%COMP%], ion-input[disabled][_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], ion-textarea.textarea-disabled[_ngcontent-%COMP%]   .native-input[_ngcontent-%COMP%], ion-textarea.textarea-disabled[_ngcontent-%COMP%]   .native-textarea[_ngcontent-%COMP%], ion-textarea.textarea-disabled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], ion-textarea.textarea-disabled[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], ion-textarea[disabled][_ngcontent-%COMP%]   .native-input[_ngcontent-%COMP%], ion-textarea[disabled][_ngcontent-%COMP%]   .native-textarea[_ngcontent-%COMP%], ion-textarea[disabled][_ngcontent-%COMP%]   input[_ngcontent-%COMP%], ion-textarea[disabled][_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{opacity:1!important;color:#000!important;-webkit-text-fill-color:#000!important}ion-input.input-disabled[_ngcontent-%COMP%]::part(native), ion-input[disabled][_ngcontent-%COMP%]::part(native), ion-textarea.textarea-disabled[_ngcontent-%COMP%]::part(native), ion-textarea[disabled][_ngcontent-%COMP%]::part(native){opacity:1!important;color:#000!important;-webkit-text-fill-color:#000!important}  ion-content.view-mode ion-checkbox{pointer-events:none!important;cursor:default!important}  ion-content.view-mode .flora-options ion-item{pointer-events:none!important}  ion-content.view-mode .checkbox-cell{pointer-events:none!important}  ion-content.view-mode .checkbox-group{pointer-events:none!important}@media (max-width: 768px){.mangrove-table[_ngcontent-%COMP%]{font-size:.875rem}.mangrove-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 4px;font-size:.75rem}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 4px}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.species-cell[_ngcontent-%COMP%]{padding-left:8px;font-size:.75rem}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{max-width:60px}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]{gap:3px}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{max-width:40px;min-width:35px;height:43px}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]   .stepper-buttons[_ngcontent-%COMP%]{gap:4px}.mangrove-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .stepper-input[_ngcontent-%COMP%]   .stepper-buttons[_ngcontent-%COMP%]   .stepper-btn[_ngcontent-%COMP%]{width:20px;height:19px;font-size:12px}}"]}))}return i(),l})(),yt=(()=>{var i;class l{constructor(t){this.modalController=t,this.currentIndex=0,this.rotatedImages=new Set(["assets/mangroves/Red mangrove1.webp","assets/mangroves/Red mangrove2.webp","assets/mangroves/White mangrove2.webp","assets/mangroves/Black mangrove.webp","assets/mangroves/Oriental mangrove1.webp","assets/mangroves/Oriental mangrove2.webp","assets/mangroves/Puzzlenut mangrove.webp","assets/mangroves/Yellow mangrove1.webp","assets/mangroves/Yellow mangrove2.webp","assets/mangroves/Apple mangrove.webp"])}isCurrentImageRotated(){return this.rotatedImages.has(this.getCurrentImage())}getImages(){return Array.isArray(this.species.imagePath)?this.species.imagePath:[this.species.imagePath]}getCurrentImage(){return this.getImages()[this.currentIndex]||""}next(){const t=this.getImages();this.currentIndex=(this.currentIndex+1)%t.length}previous(){const t=this.getImages();this.currentIndex=(this.currentIndex-1+t.length)%t.length}goTo(t){this.currentIndex=t}dismiss(){this.modalController.dismiss()}static#e=i=()=>(this.\u0275fac=function(n){return new(n||l)(e.rXU(p.W3))},this.\u0275cmp=e.VBU({type:l,selectors:[["mangrove-info-modal"]],decls:22,vars:12,consts:[["slot","end"],[3,"click"],["name","close","slot","icon-only"],[1,"ion-padding"],[1,"popover-content"],[1,"common-name"],[1,"latin-name"],["class","description-section",4,"ngIf"],[1,"slideshow-container"],[1,"image-wrapper"],["appPinchZoom","",1,"mangrove-image",3,"src","alt"],["class","slideshow-controls",4,"ngIf"],[1,"zoom-hint"],[1,"description-section"],[1,"description-item"],[4,"ngIf"],[1,"slideshow-controls"],[1,"nav-button",3,"click"],["name","chevron-back"],[1,"slideshow-indicators"],["class","indicator-dot",3,"active","click",4,"ngFor","ngForOf"],["name","chevron-forward"],[1,"indicator-dot",3,"click"]],template:function(n,a){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",0)(5,"ion-button",1),e.bIt("click",function(){return a.dismiss()}),e.nrm(6,"ion-icon",2),e.k0s()()()(),e.j41(7,"ion-content",3)(8,"div",4)(9,"p",5),e.EFF(10),e.k0s(),e.j41(11,"p",6)(12,"em"),e.EFF(13),e.k0s()(),e.DNE(14,Pt,5,3,"div",7),e.j41(15,"div",8)(16,"div",9),e.nrm(17,"img",10),e.k0s(),e.DNE(18,Mt,7,1,"div",11),e.k0s(),e.j41(19,"p",12),e.EFF(20),e.nI1(21,"t"),e.k0s()()()),2&n&&(e.R7$(3),e.JRh(a.species.scientificName),e.R7$(7),e.JRh(a.species.commonName),e.R7$(3),e.JRh(a.species.latinName),e.R7$(),e.Y8G("ngIf",a.species.distributionSeychelles||a.species.habitat||a.species.identification),e.R7$(2),e.AVh("rotated-wrapper",a.isCurrentImageRotated()),e.R7$(),e.Y8G("src",a.getCurrentImage(),e.B4B)("alt",a.species.scientificName),e.R7$(),e.Y8G("ngIf",a.getImages().length>1),e.R7$(2),e.JRh(e.bMT(21,10,"Pinch to zoom \u2022 Double tap to toggle")))},dependencies:[p.bv,p.Jm,p.QW,p.W9,p.eU,p.iq,p.BC,p.ai,v.MD,v.Sq,v.bT,S.h,F.D],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #2d8659;--color: white}ion-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600}ion-button[_ngcontent-%COMP%]{--color: white}ion-content[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0}.popover-content[_ngcontent-%COMP%]{text-align:center;height:100%;display:flex;flex-direction:column;justify-content:flex-start;padding-top:8px;min-height:0;overflow:hidden}.common-name[_ngcontent-%COMP%]{margin:16px 16px 8px;font-size:16px;color:#666;font-weight:500}.latin-name[_ngcontent-%COMP%]{margin:0 16px 16px;font-size:14px;color:#888}.description-section[_ngcontent-%COMP%]{margin:0 16px 12px;padding:8px 10px;background:#f8f9fa;border-radius:8px;text-align:left}.description-item[_ngcontent-%COMP%]{margin:0 0 6px;font-size:12px;line-height:1.4;color:#333}.description-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.description-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#000;font-weight:600}.slideshow-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;min-height:0;overflow:hidden}.image-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;min-height:0;width:100%;overflow:hidden;position:relative}.mangrove-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;image-orientation:none}@media screen and (max-width: 768px){.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]{transform:rotate(-90deg);width:auto;height:100%}.mangrove-image[_ngcontent-%COMP%]{touch-action:none;user-select:none;-webkit-user-select:none}}@media screen and (min-width: 769px){.mangrove-image[_ngcontent-%COMP%]{margin-top:-20px;transition:transform .2s ease,filter .2s ease}.mangrove-image[_ngcontent-%COMP%]:hover{transform:scale(1.02);filter:brightness(1.1)}.mangrove-image[_ngcontent-%COMP%]:active{transform:scale(.98)}.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]   .mangrove-image[_ngcontent-%COMP%]{transform:rotate(-90deg);max-width:none;max-height:none;height:100%;width:auto;position:absolute;margin-top:0}.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]   .mangrove-image[_ngcontent-%COMP%]:hover{transform:rotate(-90deg) scale(1.02)}.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]   .mangrove-image[_ngcontent-%COMP%]:active{transform:rotate(-90deg) scale(.98)}}.slideshow-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:8px 0}.nav-button[_ngcontent-%COMP%]{background:#2d865926;border:none;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.nav-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#2d8659}.nav-button[_ngcontent-%COMP%]:hover{background:#2d865940}.nav-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.slideshow-indicators[_ngcontent-%COMP%]{display:flex;gap:8px}.indicator-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:#2d865940;cursor:pointer;transition:all .3s ease}.indicator-dot.active[_ngcontent-%COMP%]{background:#2d8659;transform:scale(1.3)}.indicator-dot[_ngcontent-%COMP%]:hover{background:#2d865980}.zoom-hint[_ngcontent-%COMP%]{text-align:center;font-size:12px;color:#999;margin:8px 16px;font-style:italic}"]}))}return i(),l})(),xt=(()=>{var i;class l{constructor(t){this.modalController=t}dismiss(){this.modalController.dismiss()}static#e=i=()=>(this.\u0275fac=function(n){return new(n||l)(e.rXU(p.W3))},this.\u0275cmp=e.VBU({type:l,selectors:[["fullscreen-photo-modal"]],decls:4,vars:2,consts:[[1,"fullscreen-container",3,"click"],["fill","clear",1,"close-button",3,"click"],["name","close","slot","icon-only"],["appPinchZoom","",3,"src","alt"]],template:function(n,a){1&n&&(e.j41(0,"div",0),e.bIt("click",function(){return a.dismiss()}),e.j41(1,"ion-button",1),e.bIt("click",function(){return a.dismiss()}),e.nrm(2,"ion-icon",2),e.k0s(),e.nrm(3,"img",3),e.k0s()),2&n&&(e.R7$(3),e.Y8G("src",a.photoUrl,e.B4B)("alt",a.photoType+" photo"))},dependencies:[p.bv,p.Jm,p.iq,v.MD,S.h],styles:[".fullscreen-container[_ngcontent-%COMP%]{width:100vw;height:100vh;background:#000000f2;display:flex;align-items:center;justify-content:center;position:relative}.close-button[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:1000;--color: white;--background: rgba(0, 0, 0, .5);--border-radius: 50%;width:44px;height:44px;font-size:28px}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;touch-action:none;-webkit-user-select:none;user-select:none}"]}))}return i(),l})();const St=[{path:"",component:wt}];let Ot=(()=>{var i;class l{static#e=i=()=>(this.\u0275fac=function(n){return new(n||l)},this.\u0275mod=e.$C({type:l}),this.\u0275inj=s.G2t({imports:[N.iI.forChild(St),N.iI]}))}return i(),l})();var kt=f(4670);let Ft=(()=>{var i;class l{static#e=i=()=>(this.\u0275fac=function(n){return new(n||l)},this.\u0275mod=e.$C({type:l}),this.\u0275inj=s.G2t({imports:[v.MD,b.YN,b.X1,p.bv,Ot,kt.k]}))}return i(),l})()}}]);