"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8061],{4670(F,k,f){f.d(k,{k:()=>m});var v=f(2615),b=f(3664);let m=(()=>{var C;class p{static#t=C=()=>(this.\u0275fac=function(x){return new(x||p)},this.\u0275mod=b.$C({type:p}),this.\u0275inj=v.G2t({}))}return C(),p})()},7314(F,k,f){f.d(k,{D:()=>m});var v=f(3664),b=f(6845);let m=(()=>{var C;class p{constructor(y){this.translationService=y}transform(y){return this.translationService.t(y)}static#t=C=()=>(this.\u0275fac=function(x){return new(x||p)(v.rXU(b.L,16))},this.\u0275pipe=v.EJ8({name:"t",type:p,pure:!1}))}return C(),p})()},8061(F,k,f){f.d(k,{RestorationPageModule:()=>Vt});var v=f(2200),b=f(4341),m=f(7343),C=f(8132),p=f(467),T=f(152),y=f(4718),x=f(5083),w=f(5415),t=f(3664),d=f(2615),j=f(5921),I=f(3205),S=f(6358),D=f(918),$=f(9187),E=f(7643),N=f(6845),G=f(7314);const z=()=>({standalone:!0});function A(i,c){if(1&i){const r=t.RV6();t.j41(0,"span",50),t.bIt("click",function(){d.eBV(r),t.XpG();const n=t.sdS(15);return d.Njj(n.showPicker())}),t.EFF(1),t.k0s()}if(2&i){const r=t.XpG();t.R7$(),t.JRh(r.currentDateDisplay)}}function V(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const r=t.XpG();t.R7$(),t.JRh(r.currentDateDisplay)}}function X(i,c){if(1&i){const r=t.RV6();t.j41(0,"span",50),t.bIt("click",function(){d.eBV(r),t.XpG();const n=t.sdS(17);return d.Njj(n.showPicker())}),t.EFF(1),t.k0s()}if(2&i){const r=t.XpG();t.R7$(),t.JRh(r.currentTimeDisplay)}}function Y(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const r=t.XpG();t.R7$(),t.JRh(r.currentTimeDisplay)}}function B(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const r=t.XpG();t.R7$(),t.SpI(" (edited: ",r.getEditedDateTime(),")")}}function U(i,c){1&i&&t.nrm(0,"ion-icon",51)}function J(i,c){if(1&i){const r=t.RV6();t.j41(0,"div",13),t.bIt("click",function(){d.eBV(r);const n=t.XpG();return d.Njj(!n.viewMode&&n.editZone())}),t.nrm(1,"ion-icon",52),t.j41(2,"span",15),t.EFF(3),t.k0s()()}if(2&i){let r;const e=t.XpG();t.R7$(3),t.JRh(e.getZoneName(null==(r=e.restorationForm.get("zoneNumber"))?null:r.value))}}function q(i,c){if(1&i){const r=t.RV6();t.j41(0,"div",13),t.bIt("click",function(){d.eBV(r);const n=t.XpG();return d.Njj(!n.viewMode&&n.editQuad())}),t.nrm(1,"ion-icon",53),t.j41(2,"span",15),t.EFF(3),t.k0s()()}if(2&i){let r;const e=t.XpG();t.R7$(3),t.SpI("Quad ",e.getQuadDisplay(null==(r=e.restorationForm.get("quadNumber"))?null:r.value))}}function H(i,c){if(1&i){const r=t.RV6();t.j41(0,"span",54),t.bIt("click",function(){d.eBV(r);const n=t.XpG();return d.Njj(n.editLocationAdmin())}),t.EFF(1),t.nI1(2,"t"),t.k0s()}2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Edit location")," "))}function Q(i,c){1&i&&(t.j41(0,"ion-error",55),t.EFF(1),t.nI1(2,"t"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Location is required")," "))}function L(i,c){if(1&i){const r=t.RV6();t.j41(0,"div",56)(1,"ion-button",57),t.bIt("click",function(){d.eBV(r);const n=t.XpG();return d.Njj(n.enableEditMode())}),t.nrm(2,"ion-icon",58),t.EFF(3),t.nI1(4,"t"),t.k0s()()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"Edit This Entry")," "))}function Z(i,c){1&i&&(t.j41(0,"div",59),t.nrm(1,"ion-icon",60),t.j41(2,"span"),t.EFF(3),t.nI1(4,"t"),t.k0s()()),2&i&&(t.R7$(3),t.JRh(t.bMT(4,1,"Editing Entry - Changes will replace the original submission")))}function W(i,c){if(1&i&&(t.j41(0,"ion-card-subtitle"),t.EFF(1),t.nI1(2,"t"),t.nI1(3,"t"),t.k0s()),2&i){const r=t.XpG(2);t.R7$(),t.E5c(" ",t.bMT(2,3,"Check-in")," #",r.currentSequenceNumber," ",t.bMT(3,5,"for ongoing project")," ")}}function K(i,c){1&i&&(t.j41(0,"ion-note",70),t.nrm(1,"ion-icon",71),t.EFF(2),t.nI1(3,"t"),t.k0s()),2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"Restoration activity will be marked as closed and removed from the active restoration monitoring list.")," "))}function tt(i,c){if(1&i){const r=t.RV6();t.j41(0,"ion-card",61)(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3),t.nI1(4,"t"),t.k0s(),t.DNE(5,W,4,7,"ion-card-subtitle",8),t.k0s(),t.j41(6,"ion-card-content")(7,"ion-item",25),t.nrm(8,"ion-icon",62),t.j41(9,"ion-label",63)(10,"h3",64),t.EFF(11),t.nI1(12,"t"),t.k0s(),t.j41(13,"p"),t.EFF(14),t.nI1(15,"t"),t.k0s(),t.j41(16,"p",65),t.EFF(17),t.nI1(18,"t"),t.k0s()(),t.j41(19,"div",66)(20,"strong",67),t.EFF(21),t.nI1(22,"t"),t.nI1(23,"t"),t.k0s(),t.j41(24,"ion-toggle",68),t.mxI("ngModelChange",function(n){d.eBV(r);const o=t.XpG();return t.DH7(o.isProjectOngoing,n)||(o.isProjectOngoing=n),d.Njj(n)}),t.k0s()()(),t.DNE(25,K,4,3,"ion-note",69),t.k0s()()}if(2&i){const r=t.XpG();t.R7$(3),t.JRh(t.bMT(4,11,"Project Status")),t.R7$(2),t.Y8G("ngIf",r.isUpdatingProject),t.R7$(6),t.JRh(t.bMT(12,13,"Keep monitoring activity ongoing")),t.R7$(3),t.JRh(t.bMT(15,15,"Allow future check-ins for the restoration of this specific location.")),t.R7$(3),t.SpI("(",t.bMT(18,17,"Toggle off to close monitoring activity for this specific location."),")"),t.R7$(3),t.xc7("color",r.isProjectOngoing?"#2d8659":"#e76f51"),t.R7$(),t.SpI(" ",r.isProjectOngoing?t.bMT(22,19,"Ongoing"):t.bMT(23,21,"Closed")," "),t.R7$(3),t.R50("ngModel",r.isProjectOngoing),t.Y8G("ngModelOptions",t.lJ4(23,z)),t.R7$(),t.Y8G("ngIf",!r.isProjectOngoing)}}function et(i,c){if(1&i&&(t.j41(0,"div",79)(1,"span",80),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",81),t.EFF(4),t.k0s()()),2&i){const r=t.XpG().index,e=t.XpG();t.R7$(4),t.JRh(e.lastReportData.seedCollection[r]||0)}}function nt(i,c){if(1&i){const r=t.RV6();t.j41(0,"ion-button",82),t.bIt("click",function(){d.eBV(r);const n=t.XpG().index,o=t.XpG();return d.Njj(o.decrementValue("seedCollection",n))}),t.nrm(1,"ion-icon",83),t.k0s()}}function ot(i,c){if(1&i&&t.nrm(0,"input",84),2&i){const r=t.XpG().index;t.Y8G("formControlName",r)}}function it(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const r=t.XpG().index,e=t.XpG();t.R7$(),t.JRh(e.seedCollection.at(r).value)}}function rt(i,c){if(1&i){const r=t.RV6();t.j41(0,"ion-button",82),t.bIt("click",function(){d.eBV(r);const n=t.XpG().index,o=t.XpG();return d.Njj(o.incrementValue("seedCollection",n))}),t.nrm(1,"ion-icon",85),t.k0s()}}function at(i,c){if(1&i){const r=t.RV6();t.j41(0,"div",72)(1,"ion-item")(2,"div",73)(3,"ion-label")(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p")(7,"em"),t.EFF(8),t.k0s()()(),t.j41(9,"ion-icon",74),t.bIt("click",function(n){const o=d.eBV(r).$implicit,a=t.XpG();return d.Njj(a.showMangroveInfo(n,o))}),t.k0s()(),t.j41(10,"div",75),t.DNE(11,et,5,1,"div",34),t.j41(12,"div",76),t.DNE(13,nt,2,0,"ion-button",77)(14,ot,1,1,"input",78)(15,it,2,1,"span",8)(16,rt,2,0,"ion-button",77),t.k0s()()()()}if(2&i){const r=c.$implicit,e=t.XpG();t.R7$(5),t.JRh(r.scientificName),t.R7$(3),t.JRh(r.commonName),t.R7$(3),t.Y8G("ngIf",e.isUpdatingProject&&e.lastReportData),t.R7$(2),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode)}}function st(i,c){if(1&i&&(t.j41(0,"div",79)(1,"span",80),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",81),t.EFF(4),t.k0s()()),2&i){const r=t.XpG();t.R7$(4),t.JRh(r.lastSeedCollectionTotal)}}function ct(i,c){if(1&i&&(t.j41(0,"div",79)(1,"span",80),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",81),t.EFF(4),t.k0s()()),2&i){const r=t.XpG().index,e=t.XpG();t.R7$(4),t.JRh(e.lastReportData.seedsSowed[r]||0)}}function lt(i,c){if(1&i){const r=t.RV6();t.j41(0,"ion-button",82),t.bIt("click",function(){d.eBV(r);const n=t.XpG().index,o=t.XpG();return d.Njj(o.decrementValue("seedsSowed",n))}),t.nrm(1,"ion-icon",83),t.k0s()}}function dt(i,c){if(1&i&&t.nrm(0,"input",84),2&i){const r=t.XpG().index;t.Y8G("formControlName",r)}}function gt(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const r=t.XpG().index,e=t.XpG();t.R7$(),t.JRh(e.seedsSowed.at(r).value)}}function ut(i,c){if(1&i){const r=t.RV6();t.j41(0,"ion-button",82),t.bIt("click",function(){d.eBV(r);const n=t.XpG().index,o=t.XpG();return d.Njj(o.incrementValue("seedsSowed",n))}),t.nrm(1,"ion-icon",85),t.k0s()}}function mt(i,c){if(1&i&&(t.j41(0,"div",72)(1,"ion-item")(2,"div",73)(3,"ion-label")(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p")(7,"em"),t.EFF(8),t.k0s()()()(),t.j41(9,"div",75),t.DNE(10,ct,5,1,"div",34),t.j41(11,"div",76),t.DNE(12,lt,2,0,"ion-button",77)(13,dt,1,1,"input",78)(14,gt,2,1,"span",8)(15,ut,2,0,"ion-button",77),t.k0s()()()()),2&i){const r=c.$implicit,e=t.XpG();t.R7$(5),t.JRh(r.scientificName),t.R7$(3),t.JRh(r.commonName),t.R7$(2),t.Y8G("ngIf",e.isUpdatingProject&&e.lastReportData),t.R7$(2),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode)}}function pt(i,c){if(1&i&&(t.j41(0,"div",79)(1,"span",80),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",81),t.EFF(4),t.k0s()()),2&i){const r=t.XpG();t.R7$(4),t.JRh(r.lastSeedsSowedTotal)}}function _t(i,c){if(1&i&&(t.j41(0,"div",79)(1,"span",80),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",81),t.EFF(4),t.k0s()()),2&i){const r=t.XpG().index,e=t.XpG();t.R7$(4),t.SpI("",e.lastReportData.averageHeight[r]||0," cm")}}function ft(i,c){if(1&i){const r=t.RV6();t.j41(0,"div",72)(1,"ion-item")(2,"div",73)(3,"ion-label")(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p")(7,"em"),t.EFF(8),t.k0s()()(),t.j41(9,"ion-icon",74),t.bIt("click",function(n){const o=d.eBV(r).$implicit,a=t.XpG();return d.Njj(a.showMangroveInfo(n,o))}),t.k0s()(),t.j41(10,"div",86),t.DNE(11,_t,5,1,"div",34),t.j41(12,"ion-input",87),t.bIt("ionChange",function(){const n=d.eBV(r).index,o=t.XpG();return d.Njj(o.onHeightChange(n))}),t.j41(13,"span",41),t.EFF(14,"cm"),t.k0s()()()()()}if(2&i){const r=c.$implicit,e=c.index,n=t.XpG();t.R7$(5),t.JRh(r.scientificName),t.R7$(3),t.JRh(r.commonName),t.R7$(3),t.Y8G("ngIf",n.isUpdatingProject&&n.lastReportData),t.R7$(),t.Y8G("formControl",n.averageHeight.at(e))("readonly",n.viewMode)}}function ht(i,c){if(1&i&&(t.j41(0,"div",79)(1,"span",80),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",81),t.EFF(4),t.k0s()()),2&i){const r=t.XpG();t.R7$(4),t.SpI("",r.lastAverageHeightOverall," cm")}}function bt(i,c){if(1&i&&(t.j41(0,"div",79)(1,"span",80),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",81),t.EFF(4),t.k0s()()),2&i){const r=t.XpG().index,e=t.XpG();t.R7$(4),t.JRh(e.lastReportData.mortality[r]||0)}}function vt(i,c){if(1&i){const r=t.RV6();t.j41(0,"ion-button",82),t.bIt("click",function(){d.eBV(r);const n=t.XpG().index,o=t.XpG();return d.Njj(o.decrementValue("mortality",n))}),t.nrm(1,"ion-icon",83),t.k0s()}}function Pt(i,c){if(1&i&&t.nrm(0,"input",84),2&i){const r=t.XpG().index;t.Y8G("formControlName",r)}}function Mt(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const r=t.XpG().index,e=t.XpG();t.R7$(),t.JRh(e.mortality.at(r).value)}}function Ct(i,c){if(1&i){const r=t.RV6();t.j41(0,"ion-button",82),t.bIt("click",function(){d.eBV(r);const n=t.XpG().index,o=t.XpG();return d.Njj(o.incrementValue("mortality",n))}),t.nrm(1,"ion-icon",85),t.k0s()}}function yt(i,c){if(1&i&&(t.j41(0,"div",72)(1,"ion-item")(2,"div",73)(3,"ion-label")(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p")(7,"em"),t.EFF(8),t.k0s()()()(),t.j41(9,"div",75),t.DNE(10,bt,5,1,"div",34),t.j41(11,"div",76),t.DNE(12,vt,2,0,"ion-button",77)(13,Pt,1,1,"input",78)(14,Mt,2,1,"span",8)(15,Ct,2,0,"ion-button",77),t.k0s()()()()),2&i){const r=c.$implicit,e=t.XpG();t.R7$(5),t.JRh(r.scientificName),t.R7$(3),t.JRh(r.commonName),t.R7$(2),t.Y8G("ngIf",e.isUpdatingProject&&e.lastReportData),t.R7$(2),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode)}}function Ot(i,c){if(1&i&&(t.j41(0,"div",79)(1,"span",80),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",81),t.EFF(4),t.k0s()()),2&i){const r=t.XpG();t.R7$(4),t.JRh(r.lastMortalityTotal)}}function Rt(i,c){if(1&i&&(t.j41(0,"div",79)(1,"span",80),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",81),t.EFF(4),t.k0s()()),2&i){const r=t.XpG().index,e=t.XpG();t.R7$(4),t.JRh(e.lastReportData.outplanting[r]||0)}}function xt(i,c){if(1&i){const r=t.RV6();t.j41(0,"ion-button",82),t.bIt("click",function(){d.eBV(r);const n=t.XpG().index,o=t.XpG();return d.Njj(o.decrementValue("outplanting",n))}),t.nrm(1,"ion-icon",83),t.k0s()}}function kt(i,c){if(1&i&&t.nrm(0,"input",84),2&i){const r=t.XpG().index;t.Y8G("formControlName",r)}}function Ft(i,c){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const r=t.XpG().index,e=t.XpG();t.R7$(),t.JRh(e.outplanting.at(r).value)}}function wt(i,c){if(1&i){const r=t.RV6();t.j41(0,"ion-button",82),t.bIt("click",function(){d.eBV(r);const n=t.XpG().index,o=t.XpG();return d.Njj(o.incrementValue("outplanting",n))}),t.nrm(1,"ion-icon",85),t.k0s()}}function jt(i,c){if(1&i&&(t.j41(0,"div",72)(1,"ion-item")(2,"div",73)(3,"ion-label")(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p")(7,"em"),t.EFF(8),t.k0s()()()(),t.j41(9,"div",75),t.DNE(10,Rt,5,1,"div",34),t.j41(11,"div",76),t.DNE(12,xt,2,0,"ion-button",77)(13,kt,1,1,"input",78)(14,Ft,2,1,"span",8)(15,wt,2,0,"ion-button",77),t.k0s()()()()),2&i){const r=c.$implicit,e=t.XpG();t.R7$(5),t.JRh(r.scientificName),t.R7$(3),t.JRh(r.commonName),t.R7$(2),t.Y8G("ngIf",e.isUpdatingProject&&e.lastReportData),t.R7$(2),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode),t.R7$(),t.Y8G("ngIf",e.viewMode),t.R7$(),t.Y8G("ngIf",!e.viewMode)}}function Tt(i,c){if(1&i&&(t.j41(0,"div",79)(1,"span",80),t.EFF(2,"Last:"),t.k0s(),t.j41(3,"span",81),t.EFF(4),t.k0s()()),2&i){const r=t.XpG();t.R7$(4),t.JRh(r.lastOutplantingTotal)}}function It(i,c){if(1&i){const r=t.RV6();t.j41(0,"div",88)(1,"ion-button",89),t.nrm(2,"ion-icon",90),t.EFF(3),t.nI1(4,"t"),t.k0s(),t.j41(5,"ion-button",91),t.bIt("click",function(){d.eBV(r);const n=t.XpG();return d.Njj(n.saveDraft())}),t.nrm(6,"ion-icon",92),t.EFF(7),t.nI1(8,"t"),t.k0s(),t.j41(9,"ion-button",93),t.bIt("click",function(){d.eBV(r);const n=t.XpG();return d.Njj(n.discardForm())}),t.nrm(10,"ion-icon",94),t.EFF(11),t.nI1(12,"t"),t.k0s()()}if(2&i){const r=t.XpG();t.R7$(),t.Y8G("disabled",!r.restorationForm.valid),t.R7$(2),t.SpI(" ",t.bMT(4,4,"Submit Restoration Monitoring")," "),t.R7$(4),t.SpI(" ",t.bMT(8,6,"Save Draft")," "),t.R7$(4),t.SpI(" ",t.bMT(12,8,"Discard")," ")}}function St(i,c){if(1&i){const r=t.RV6();t.j41(0,"div",95)(1,"ion-button",96),t.bIt("click",function(){d.eBV(r);const n=t.XpG();return d.Njj(n.deleteEntry())}),t.nrm(2,"ion-icon",94),t.EFF(3),t.nI1(4,"t"),t.k0s()()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"Delete Entry")," "))}function Dt(i,c){if(1&i){const r=t.RV6();t.j41(0,"span",17),t.bIt("click",function(){const n=d.eBV(r).index,o=t.XpG(2);return d.Njj(o.goTo(n))}),t.k0s()}if(2&i){const r=c.index,e=t.XpG(2);t.AVh("active",r===e.currentIndex)}}function $t(i,c){if(1&i){const r=t.RV6();t.j41(0,"div",11)(1,"button",12),t.bIt("click",function(){d.eBV(r);const n=t.XpG();return d.Njj(n.previous())}),t.nrm(2,"ion-icon",13),t.k0s(),t.j41(3,"div",14),t.DNE(4,Dt,1,2,"span",15),t.k0s(),t.j41(5,"button",12),t.bIt("click",function(){d.eBV(r);const n=t.XpG();return d.Njj(n.next())}),t.nrm(6,"ion-icon",16),t.k0s()()}if(2&i){const r=t.XpG();t.R7$(4),t.Y8G("ngForOf",r.getImages())}}let Et=(()=>{var i;class c{forceDeleteDraftFile(e){var n=this;return(0,p.A)(function*(){for(let o=0;o<3;o++)try{yield n.sharedDataService.deleteJsonFile(e),console.log(`Draft file force deleted successfully (attempt ${o+1})`);break}catch(a){if(console.error(`Error force deleting draft file (attempt ${o+1}):`,a),2===o)try{yield n.sharedDataService.writeJsonFile(e,null),console.log("Draft file cleared with null write")}catch(s){console.error("Failed to clear draft file with null write:",s)}yield new Promise(s=>setTimeout(s,100))}})()}constructor(e,n,o,a,s,l,g,u,_,h,P,M){this.formBuilder=e,this.alertController=n,this.loadingController=o,this.router=a,this.route=s,this.modalController=l,this.auth=g,this.restorationSyncService=u,this.sharedDataService=_,this.entryDeletionService=h,this.siteSyncService=P,this.ts=M,this.progress=0,this.restorationPhoto=null,this.currentDateTime="",this.currentDateDisplay="",this.currentTimeDisplay="",this.viewMode=!1,this.currentUser=null,this.currentReportId="",this.loadedReport=null,this.autosaveSub=null,this.isDiscarded=!1,this.isSubmitted=!1,this.isSubmitting=!1,this.isEditMode=!1,this.originalSubmittedBy="",this.isProjectOngoing=!0,this.isUpdatingProject=!1,this.currentProjectKey=null,this.currentSequenceNumber=1,this.parentReportId=null,this.lastReportData=null,this.mangroveSpecies=[{scientificName:"Mangliye Rouz",commonName:"Red Mangrove",latinName:"Rhizophora mucronata",imagePath:["assets/mangroves/Red-Man.webp","assets/mangroves/Red mangrove1.webp","assets/mangroves/Red mangrove2.webp"]},{scientificName:"Mangliye Blan",commonName:"White Mangrove",latinName:"Avicennia marina",imagePath:["assets/mangroves/White-Man.webp","assets/mangroves/White mangrove1.webp","assets/mangroves/White mangrove2.webp"]},{scientificName:"Mangliye Zonn",commonName:"Yellow Mangrove",latinName:"Ceriops tagal",imagePath:["assets/mangroves/Yellow-Man.webp","assets/mangroves/Yellow mangrove1.webp","assets/mangroves/Yellow mangrove2.webp"]},{scientificName:"Mangliye Pti Fey",commonName:"Black Mangrove",latinName:"Lumnitzera racemosa",imagePath:["assets/mangroves/Black-Man.webp","assets/mangroves/Black mangrove.webp"]},{scientificName:"Mangliye Lat",commonName:"Oriental Mangrove",latinName:"Bruguiera gymnorrhiza",imagePath:["assets/mangroves/Oriental-Man.webp","assets/mangroves/Oriental mangrove1.webp","assets/mangroves/Oriental mangrove2.webp"]},{scientificName:"Mangliye Fler",commonName:"Apple Mangrove",latinName:"Sonneratia alba",imagePath:["assets/mangroves/Apple-Man.webp","assets/mangroves/Apple mangrove.webp"]},{scientificName:"Mangliye Pasyans",commonName:"Puzzlenut Mangrove",latinName:"Xylocarpus granatum",imagePath:["assets/mangroves/Puzzlenut-Man.webp","assets/mangroves/Puzzlenut mangrove.webp"]}],this.availableLocations=[{name:"Ramsar",hasZones:!0,hasQuads:!0,zones:["1","2","3","4","5","6"],quads:Array.from({length:30},(O,R)=>`quad${R+1}`),zoneQuadMap:{1:[1,2,3],2:[13,14,15,16,17,18,20,21,22,23,25,27,28,29],3:[19,26],4:[4,5],5:[6,7,11,12,24,30],6:[8,9,10]}},{name:"Grand Anse",hasZones:!0,hasQuads:!0,zones:["1","2","3","4"],quads:Array.from({length:22},(O,R)=>`ga${R+1}`),zoneQuadMap:{1:[1,2,3,4],2:[5,6,7,8,9,10,21,22],3:[11,12,13,14,15,16,17,18],4:[19,20]}},{name:"Caiman",hasZones:!1,hasQuads:!0,zones:[],quads:["quad1","quad2","quad3","quad4","quad5"]},{name:"Canopy",hasZones:!1,hasQuads:!0,zones:[],quads:["quad1","quad2","quad3","quad4"]},{name:"Petit Barbarons",hasZones:!0,hasQuads:!1,zones:["1","2","3","4"],quads:[]},{name:"Kempinski",hasZones:!1,hasQuads:!1,zones:[],quads:[]},{name:"Roche Caiman",hasZones:!1,hasQuads:!1,zones:[],quads:[]}]}ngOnInit(){var e=this;return(0,p.A)(function*(){e.currentUser=e.auth.getCurrentUser(),e.initializeForm(),e.setCurrentDateTime(),yield e.loadDynamicSites();const n=e.route.snapshot.queryParams;if("true"!==n.viewMode||!n.reportId)return"true"===n.editMode&&n.reportId?(yield e.loadReportForViewing(n.reportId),void e.enableEditMode()):(n.projectKey&&(yield e.loadProjectForContinuation(n.projectKey),e.isUpdatingProject=!0),e.route.queryParams.subscribe(o=>{o.location&&e.restorationForm.patchValue({site:o.location}),o.zone&&e.restorationForm.patchValue({zoneNumber:o.zone}),o.quad&&e.restorationForm.patchValue({quadNumber:o.quad})}),"true"!==n.fresh&&(yield e.restoreDraftIfAny(),e.setCurrentDateTime()),e.currentReportId||(e.currentReportId=e.restorationSyncService.generateReportId()),e.subscribeToFormChanges(),void(navigator.onLine&&e.restorationSyncService.processPendingQueue().catch(o=>{console.error("RestorationPage: processPendingQueue failed:",o)})));yield e.loadReportForViewing(n.reportId)})()}ngOnDestroy(){this.autosaveSub&&(this.autosaveSub.unsubscribe(),this.autosaveSub=null),!this.isSubmitted&&!this.isDiscarded&&this.saveDraftOnExit().catch(e=>console.error("RestorationPage: saveDraftOnExit failed:",e))}setCurrentDateTime(e){if(this.restorationForm){const u=this.restorationForm.get("date")?.value,_=this.restorationForm.get("observationTime")?.value;if(u&&_){const[h,P,M]=u.split("-"),[O,R]=_.split(":");return this.currentDateDisplay=`${M}/${P}/${h}`,this.currentTimeDisplay=`${O}:${R}`,void(this.currentDateTime=`${this.currentDateDisplay}  \u2022  ${this.currentTimeDisplay}`)}}if(e){const u=this.extractDateTimeFromReportId(e);if(u){this.currentDateTime=u;const _=u.split("  \u2022  ");return void(2===_.length&&(this.currentDateDisplay=_[0],this.currentTimeDisplay=_[1]))}}const n=new Date,o=String(n.getDate()).padStart(2,"0"),a=String(n.getMonth()+1).padStart(2,"0"),s=n.getFullYear(),l=String(n.getHours()).padStart(2,"0"),g=String(n.getMinutes()).padStart(2,"0");this.currentDateDisplay=`${o}/${a}/${s}`,this.currentTimeDisplay=`${l}:${g}`,this.currentDateTime=`${this.currentDateDisplay}  \u2022  ${this.currentTimeDisplay}`}extractDateTimeFromReportId(e){const n=e.match(/(\d{2})(\d{2})(\d{4})_(\d{2})(\d{2})(\d{2})/);if(n){const[,o,a,s,l,g]=n;return`${o}/${a}/${s}  \u2022  ${l}:${g}`}return null}getCurrentDate(){return(new Date).toISOString().split("T")[0]}editSite(){var e=this;return(0,p.A)(function*(){yield(yield e.alertController.create({header:e.ts.t("Site Location"),inputs:[{name:"site",type:"text",placeholder:e.ts.t("Enter site location"),value:e.restorationForm.get("site")?.value||""}],buttons:[{text:e.ts.t("Cancel"),role:"cancel"},{text:e.ts.t("Save"),handler:o=>{e.restorationForm.patchValue({site:o.site})}}]})).present()})()}editZone(){var e=this;return(0,p.A)(function*(){yield(yield e.alertController.create({header:e.ts.t("Zone Number"),inputs:[{name:"zoneNumber",type:"text",placeholder:e.ts.t("Enter zone number"),value:e.restorationForm.get("zoneNumber")?.value||""}],buttons:[{text:e.ts.t("Cancel"),role:"cancel"},{text:e.ts.t("Save"),handler:o=>{e.restorationForm.patchValue({zoneNumber:o.zoneNumber})}}]})).present()})()}editQuad(){var e=this;return(0,p.A)(function*(){yield(yield e.alertController.create({header:e.ts.t("Quad Number"),inputs:[{name:"quadNumber",type:"text",placeholder:e.ts.t("Enter quad number"),value:e.restorationForm.get("quadNumber")?.value||""}],buttons:[{text:e.ts.t("Cancel"),role:"cancel"},{text:e.ts.t("Save"),handler:o=>{e.restorationForm.patchValue({quadNumber:o.quadNumber})}}]})).present()})()}getZoneName(e){return e?`Zone ${e}`:""}getQuadDisplay(e){if(!e)return"";const n=e.match(/\d+/);return n?n[0]:""}locationHasZones(){const e=this.restorationForm.get("site")?.value;return!!e&&["Ramsar","Grand Anse","Petit Barbarons"].includes(e)}locationHasQuads(){const e=this.restorationForm.get("site")?.value;return!!e&&["Ramsar","Grand Anse","Caiman","Canopy"].includes(e)}editLocationAdmin(){var e=this;return(0,p.A)(function*(){if(!e.currentUser||e.currentUser.level<4)return;const n=yield e.selectLocationStep();if(!n)return;const o=e.availableLocations.find(l=>l.name===n);let a="";if(o?.hasZones&&o.zones.length>0){const l=yield e.selectZoneStep(o);if(null===l)return;a=l}let s="";if(o?.hasQuads&&o.quads.length>0){const l=yield e.selectQuadStep(o,a);if(null===l)return;s=l}e.restorationForm.patchValue({site:n,zoneNumber:a,quadNumber:s}),e.isEditMode&&e.restorationForm.markAsDirty()})()}selectLocationStep(){var e=this;return new Promise(function(){var n=(0,p.A)(function*(o){const a=e.restorationForm.get("site")?.value||"",s=e.availableLocations.map(g=>({name:"location",type:"radio",label:g.name,value:g.name,checked:g.name===a}));yield(yield e.alertController.create({header:e.ts.t("Select Location"),cssClass:"location-edit-alert",inputs:s,buttons:[{text:e.ts.t("Cancel"),role:"cancel",handler:()=>o(null)},{text:e.ts.t("Next"),handler:g=>o(g)}]})).present()});return function(o){return n.apply(this,arguments)}}())}selectZoneStep(e){var n=this;return new Promise(function(){var o=(0,p.A)(function*(a){const s=n.restorationForm.get("zoneNumber")?.value||"",l=e.zones.map(u=>({name:"zone",type:"radio",label:`Zone ${u}`,value:u,checked:u===s}));yield(yield n.alertController.create({header:n.ts.t("Select Zone"),subHeader:e.name,cssClass:"location-edit-alert",inputs:l,buttons:[{text:n.ts.t("Cancel"),role:"cancel",handler:()=>a(null)},{text:n.ts.t("Next"),handler:u=>a(u)}]})).present()});return function(a){return o.apply(this,arguments)}}())}selectQuadStep(e,n){var o=this;return new Promise(function(){var a=(0,p.A)(function*(s){const l=o.restorationForm.get("quadNumber")?.value||"";let g=e.quads;if(n&&e.zoneQuadMap&&e.zoneQuadMap[n]){const h=e.zoneQuadMap[n];g=e.quads.filter(P=>{const M=parseInt(o.getQuadDisplay(P));return h.includes(M)})}const u=g.map(h=>({name:"quad",type:"radio",label:`Quad ${o.getQuadDisplay(h)}`,value:h,checked:o.getQuadDisplay(h)===l||h===l}));yield(yield o.alertController.create({header:o.ts.t("Select Quad"),subHeader:e.name,cssClass:"location-edit-alert",inputs:u,buttons:[{text:o.ts.t("Cancel"),role:"cancel",handler:()=>s(null)},{text:o.ts.t("Save"),handler:h=>s(h)}]})).present()});return function(s){return a.apply(this,arguments)}}())}loadDynamicSites(){var e=this;return(0,p.A)(function*(){try{(yield e.siteSyncService.getAllSites()).forEach(o=>{e.availableLocations.some(a=>a.name===o.name)||e.availableLocations.push({name:o.name,hasZones:o.zones&&o.zones.length>0||!1,hasQuads:o.sample_points&&o.sample_points.length>0||!1,zones:o.zones?o.zones.map(a=>a.name?.replace("Zone ","")||a.id):[],quads:o.sample_points?o.sample_points.map(a=>a.id||a.label):[]})})}catch(n){console.error("Error loading dynamic sites:",n)}})()}initializeForm(){const e=this.getCurrentDate(),n=new Date,o=`${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`;this.restorationForm=this.formBuilder.group({site:["",b.k0.required],zoneNumber:[""],quadNumber:[""],date:[e,b.k0.required],observationTime:[o],outplanting:this.formBuilder.array(this.mangroveSpecies.map(()=>[null])),seedCollection:this.formBuilder.array(this.mangroveSpecies.map(()=>[null])),seedsSowed:this.formBuilder.array(this.mangroveSpecies.map(()=>[null])),averageHeight:this.formBuilder.array(this.mangroveSpecies.map(()=>[null])),mortality:this.formBuilder.array(this.mangroveSpecies.map(()=>[null])),notes:[""]}),this.updateProgress()}get outplanting(){return this.restorationForm.get("outplanting")}get seedCollection(){return this.restorationForm.get("seedCollection")}get seedsSowed(){return this.restorationForm.get("seedsSowed")}get averageHeight(){return this.restorationForm.get("averageHeight")}get mortality(){return this.restorationForm.get("mortality")}get outplantingTotal(){return this.outplanting.value.reduce((e,n)=>e+(Number(n)||0),0)}get seedCollectionTotal(){return this.seedCollection.value.reduce((e,n)=>e+(Number(n)||0),0)}get seedsSowedTotal(){return this.seedsSowed.value.reduce((e,n)=>e+(Number(n)||0),0)}get averageHeightOverall(){const e=this.averageHeight.value.filter(o=>o>0);return 0===e.length?"0.0":(e.reduce((o,a)=>o+(Number(a)||0),0)/e.length).toFixed(1)}get mortalityTotal(){return this.mortality.value.reduce((e,n)=>e+(Number(n)||0),0)}get lastSeedCollectionTotal(){return this.lastReportData?.seedCollection.reduce((e,n)=>e+(n||0),0)||0}get lastSeedsSowedTotal(){return this.lastReportData?.seedsSowed.reduce((e,n)=>e+(n||0),0)||0}get lastAverageHeightOverall(){if(!this.lastReportData)return"0.0";const e=this.lastReportData.averageHeight.filter(o=>o>0);return 0===e.length?"0.0":(e.reduce((o,a)=>o+(a||0),0)/e.length).toFixed(1)}get lastMortalityTotal(){return this.lastReportData?.mortality.reduce((e,n)=>e+(n||0),0)||0}get lastOutplantingTotal(){return this.lastReportData?.outplanting.reduce((e,n)=>e+(n||0),0)||0}updateProgress(){const e=this.restorationForm.value;let n=0,o=2;e.site&&n++,e.date&&n++,this.outplantingTotal>0&&(n++,o++),this.seedCollectionTotal>0&&(n++,o++),this.seedsSowedTotal>0&&(n++,o++),this.averageHeight.value.some(s=>s>0)&&(n++,o++),this.mortalityTotal>0&&(n++,o++),e.notes&&(n++,o++),this.progress=o>0?n/o:0}subscribeToFormChanges(){this.autosaveSub&&this.autosaveSub.unsubscribe(),this.autosaveSub=this.restorationForm.valueChanges.pipe((0,T.B)(750)).subscribe(()=>{this.isSubmitted||this.isDiscarded||(this.updateProgress(),this.saveDraftOnExit().catch(e=>console.error("RestorationPage: autosave failed:",e)))})}incrementValue(e,n,o=1){const a=this.restorationForm.get(e);if(a&&a.at(n)){const s=a.at(n).value||0;a.at(n).setValue(Number((s+o).toFixed(1)))}}decrementValue(e,n,o=1){const a=this.restorationForm.get(e);if(a&&a.at(n)){const s=a.at(n).value||0;s>0&&a.at(n).setValue(Math.max(0,Number((s-o).toFixed(1))))}}onHeightChange(e){const n=this.averageHeight.at(e).value;if(null!=n){const o=Number(n);!isNaN(o)&&o>=0?this.averageHeight.at(e).setValue(Number(o.toFixed(1))):this.averageHeight.at(e).setValue(0)}}onSubmit(){var e=this;return(0,p.A)(function*(){if(e.isSubmitting)return;if(e.isSubmitting=!0,e.restorationForm.markAllAsTouched(),!e.restorationForm.valid)return e.isSubmitting=!1,void(yield(yield e.alertController.create({header:e.ts.t("Incomplete Form"),message:e.ts.t("Please fill in all required fields (Site and Date)."),buttons:["OK"]})).present());e.isSubmitted=!0,e.autosaveSub&&(e.autosaveSub.unsubscribe(),e.autosaveSub=null);const n=yield e.loadingController.create({message:e.ts.t("Submitting restoration monitoring data...")});yield n.present();try{const o={...e.restorationForm.value,outplantingTotal:e.outplantingTotal,seedCollectionTotal:e.seedCollectionTotal,seedsSowedTotal:e.seedsSowedTotal,averageHeightOverall:e.averageHeightOverall,mortalityTotal:e.mortalityTotal};o.status={incomplete:!1,sent:!0,pending:!1};let a=e.currentProjectKey;if(!a){const _=o.site||"Unknown",h=o.zoneNumber||"",P=o.quadNumber||"";a=`REST${Array.from({length:3},()=>String.fromCharCode(65+Math.floor(26*Math.random()))).join("")}_${_.replace(/[^a-zA-Z0-9]/g,"_")}${h?"_Zone"+h:""}${P?"_Quad"+P:""}`}const s={formValue:o,coordinates:null,photos:[],project_key:a,sequence_number:e.currentSequenceNumber,parent_report_id:e.parentReportId||void 0,is_ongoing:e.isProjectOngoing,existingReportId:e.currentReportId||void 0};e.isEditMode&&(s.originalSubmittedBy=e.originalSubmittedBy);const l=yield e.restorationSyncService.submitFinal(s);yield n.dismiss();try{e.autosaveSub&&(e.autosaveSub.unsubscribe(),e.autosaveSub=null),yield new Promise(R=>setTimeout(R,1e3));const _=e.restorationForm.value;yield e.restorationSyncService.clearDraft(_);const h=(_?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),P=_?.zoneNumber||"",M=_?.quadNumber||"";let O=`restoration_draft_${h}`;P&&(O+=`_zone${P}`),M&&(O+=`_quad${M}`),yield e.forceDeleteDraftFile(`${O}.json`),e.isSubmitted=!0,console.log("RestorationPage: Draft cleared and form reset successfully")}catch(_){console.error("RestorationPage: Failed to clear draft:",_)}const g=e.ts.t(e.isEditMode?l.queued?"Updated data saved locally and queued for upload when online.":"Restoration data updated successfully!":l.queued?"Restoration data saved locally and queued for upload when online.":"Restoration monitoring data submitted successfully!");yield(yield e.alertController.create({header:e.ts.t("Success"),message:g,buttons:[{text:"OK",handler:()=>{e.router.navigate(["/health"])}}]})).present()}catch(o){yield n.dismiss(),console.error("Error submitting monitoring data:",o),yield(yield e.alertController.create({header:e.ts.t("Error"),message:e.ts.t("Failed to submit restoration monitoring data. Please try again."),buttons:["OK"]})).present()}})()}discardForm(){var e=this;return(0,p.A)(function*(){const n=yield e.alertController.create({header:e.ts.t("Discard Form"),message:e.ts.t("Are you sure you want to discard this form? All entered data will be lost."),buttons:[{text:e.ts.t("Cancel"),role:"cancel"},{text:e.ts.t("Discard"),role:"destructive"}]});yield n.present();const{role:o}=yield n.onDidDismiss();if("destructive"!==o)return;const a=yield e.loadingController.create({message:e.ts.t("Discarding...")});yield a.present(),e.isDiscarded=!0,e.autosaveSub&&(e.autosaveSub.unsubscribe(),e.autosaveSub=null),yield new Promise(s=>setTimeout(s,1e3));try{const s=e.restorationForm.value;yield e.restorationSyncService.clearDraft(s);const l=(s?.location||"unknown").replace(/[^a-zA-Z0-9]/g,"_"),g=s?.zoneNumber||"",u=s?.quadNumber||"";let _=`restoration_draft_${l}`;g&&(_+=`_zone${g}`),u&&(_+=`_quad${u}`),yield e.forceDeleteDraftFile(`${_}.json`)}catch(s){console.error("RestorationPage: Error clearing draft during discard:",s)}yield a.dismiss(),e.initializeForm(),e.router.navigate(["/health"])})()}restoreDraftIfAny(){var e=this;return(0,p.A)(function*(){const n=e.route.snapshot.queryParams,o={site:n.location||e.restorationForm.get("site")?.value,zoneNumber:n.zone||e.restorationForm.get("zoneNumber")?.value,quadNumber:n.quad||e.restorationForm.get("quadNumber")?.value},a=yield e.restorationSyncService.loadDraft(o);if(a)try{a.reportId&&(e.currentReportId=a.reportId),a.form&&e.restorationForm.patchValue(a.form),e.updateProgress()}catch(s){console.error("RestorationPage: failed to restore draft:",s)}})()}saveDraft(){var e=this;return(0,p.A)(function*(){if(!e.restorationForm)return;const n=yield e.alertController.create({header:e.ts.t("Save Draft"),message:e.ts.t("Are you sure you want to save this form as a draft? You can return to complete it later."),buttons:[{text:e.ts.t("Cancel"),role:"cancel"},{text:e.ts.t("Save Draft"),role:"confirm"}]});yield n.present();const{role:o}=yield n.onDidDismiss();if("confirm"!==o)return;const a=yield e.loadingController.create({message:e.ts.t("Saving draft...")});yield a.present();try{yield e.saveDraftOnExit(),yield a.dismiss();const s=yield e.alertController.create({header:e.ts.t("Draft Saved"),message:e.ts.t("Your form has been saved as a draft. You can access it from the health page."),buttons:[{text:"OK",role:"confirm"}]});yield s.present(),yield s.onDidDismiss(),e.router.navigate(["/health"])}catch(s){yield a.dismiss(),console.error("Failed to save draft:",s),yield(yield e.alertController.create({header:e.ts.t("Save Failed"),message:e.ts.t("Failed to save the draft. Please try again."),buttons:["OK"]})).present()}})()}saveDraftOnExit(){var e=this;return(0,p.A)(function*(){if(!e.restorationForm||e.viewMode||e.isDiscarded||e.isSubmitted)return;const n=e.restorationForm.value;(n?.site||e.outplantingTotal>0||e.seedCollectionTotal>0||e.seedsSowedTotal>0)&&(yield e.restorationSyncService.saveDraft({reportId:e.currentReportId,form:{...n,outplantingTotal:e.outplantingTotal,seedCollectionTotal:e.seedCollectionTotal,seedsSowedTotal:e.seedsSowedTotal,averageHeightOverall:e.averageHeightOverall,mortalityTotal:e.mortalityTotal},coordinates:null,photos:[]}))})()}showMangroveInfo(e,n){var o=this;return(0,p.A)(function*(){if(e.stopPropagation(),x.Capacitor.isNativePlatform())try{yield w.Z.lock({orientation:"portrait"})}catch{}const a=yield o.modalController.create({component:Nt,componentProps:{species:n},cssClass:"fullheight-info-modal"});a.onDidDismiss().then((0,p.A)(function*(){if(x.Capacitor.isNativePlatform())try{yield w.Z.unlock()}catch{}})),yield a.present()})()}setViewMode(e){this.viewMode=e,e?this.restorationForm.disable():this.restorationForm.enable()}enableEditMode(){!this.currentUser||this.currentUser.level<4||(this.isEditMode=!0,this.viewMode=!1,this.restorationForm.enable(),this.originalSubmittedBy=this.loadedReport?.submittedBy||"")}getEditedDateTime(){if(!this.loadedReport)return null;let e=this.loadedReport.editedAt||null;if(!e){const u=this.loadedReport.updatedAt,_=this.loadedReport.createdAt;u&&_&&u!==_&&Math.abs(new Date(u).getTime()-new Date(_).getTime())>5e3&&(e=u)}if(!e)return null;const n=new Date(e);return isNaN(n.getTime())?null:`${n.getDate().toString().padStart(2,"0")}/${(n.getMonth()+1).toString().padStart(2,"0")}/${n.getFullYear()} ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`}onDateChanged(e){const n=e.target;n.value&&(this.restorationForm.get("date")?.setValue(n.value),this.setCurrentDateTime())}onTimeChanged(e){const n=e.target;n.value&&(this.restorationForm.get("observationTime")?.setValue(n.value),this.setCurrentDateTime())}loadProjectForContinuation(e){var n=this;return(0,p.A)(function*(){try{const a=(yield n.restorationSyncService.getAllReports()).filter(g=>g.report.project_key===e||g.report.reportId===e);if(0===a.length)return void console.error("RestorationPage: No reports found for project:",e);const l=a.reduce((g,u)=>(u.report.sequence_number||1)>(g.report.sequence_number||1)?u:g).report;console.log("RestorationPage: Loading project for continuation:",l),n.currentProjectKey=e,n.currentSequenceNumber=(l.sequence_number||1)+1,n.parentReportId=l.reportId,n.isProjectOngoing=!1!==l.is_ongoing,n.lastReportData={outplanting:l.form.outplanting||n.mangroveSpecies.map(()=>null),seedCollection:l.form.seedCollection||n.mangroveSpecies.map(()=>null),seedsSowed:l.form.seedsSowed||n.mangroveSpecies.map(()=>null),averageHeight:l.form.averageHeight||n.mangroveSpecies.map(()=>null),mortality:l.form.mortality||n.mangroveSpecies.map(()=>null),notes:l.form.notes||"",date:l.form.date||""},n.restorationForm.patchValue({site:l.form.site||"",date:n.getCurrentDate(),zoneNumber:l.form.zoneNumber||"",quadNumber:l.form.quadNumber||"",notes:""})}catch(o){console.error("RestorationPage: Error loading project for continuation:",o)}})()}loadReportForViewing(e){var n=this;return(0,p.A)(function*(){try{const o=yield n.restorationSyncService.getAllReports();console.log("RestorationPage: All reports:",o);const a=o.find(l=>l.report.reportId===e);if(!a)return console.error("RestorationPage: Report not found for viewing:",e),yield(yield n.alertController.create({header:n.ts.t("Report Not Found"),message:n.ts.t("The requested report could not be found."),buttons:["OK"]})).present(),void n.router.navigate(["/health"]);const s=a.report;if(console.log("RestorationPage: Loading report for viewing:",s),n.loadedReport=s,n.restorationForm.patchValue({site:s.form.site||"",date:s.form.date||"",observationTime:s.form.observationTime||"",zoneNumber:s.form.zoneNumber||"",quadNumber:s.form.quadNumber||"",notes:s.form.notes||""}),s.form.outplanting&&Array.isArray(s.form.outplanting)){const l=n.restorationForm.get("outplanting");s.form.outplanting.forEach((g,u)=>{l.at(u)&&l.at(u).patchValue(void 0!==g?g:null)})}if(s.form.seedCollection&&Array.isArray(s.form.seedCollection)){const l=n.restorationForm.get("seedCollection");s.form.seedCollection.forEach((g,u)=>{l.at(u)&&l.at(u).patchValue(void 0!==g?g:null)})}if(s.form.seedsSowed&&Array.isArray(s.form.seedsSowed)){const l=n.restorationForm.get("seedsSowed");s.form.seedsSowed.forEach((g,u)=>{l.at(u)&&l.at(u).patchValue(void 0!==g?g:null)})}if(s.form.averageHeight&&Array.isArray(s.form.averageHeight)){const l=n.restorationForm.get("averageHeight");s.form.averageHeight.forEach((g,u)=>{l.at(u)&&l.at(u).patchValue(void 0!==g?g:null)})}if(s.form.mortality&&Array.isArray(s.form.mortality)){const l=n.restorationForm.get("mortality");s.form.mortality.forEach((g,u)=>{l.at(u)&&l.at(u).patchValue(void 0!==g?g:null)})}n.currentReportId=e,n.setCurrentDateTime(e),n.updateProgress(),n.setViewMode(!0)}catch(o){console.error("RestorationPage: Error loading report for viewing:",o),yield(yield n.alertController.create({header:n.ts.t("Error"),message:n.ts.t("Failed to load the report."),buttons:["OK"]})).present(),n.router.navigate(["/health"])}})()}deleteEntry(){var e=this;return(0,p.A)(function*(){const n=e.auth.getCurrentUser();var a;!n||n.level<4?yield(yield e.alertController.create({header:e.ts.t("Permission Denied"),message:e.ts.t("Only Level 4 users can delete entries."),buttons:["OK"]})).present():yield(yield e.alertController.create({header:e.ts.t("Delete Entry"),message:e.ts.t("Are you sure you want to permanently delete this entry? This will remove it from the database and back it up to deleted files storage. This action cannot be undone."),buttons:[{text:e.ts.t("Cancel"),role:"cancel"},{text:e.ts.t("Delete"),role:"destructive",handler:(a=(0,p.A)(function*(){yield e.performDeletion()}),function(){return a.apply(this,arguments)})}]})).present()})()}performDeletion(){var e=this;return(0,p.A)(function*(){const n=yield e.loadingController.create({message:e.ts.t("Deleting entry...")});yield n.present();try{const o=e.auth.getCurrentUser();yield e.entryDeletionService.deleteEntry({reportId:e.currentReportId,formType:"restoration",tableName:"restoration_reports",deletedBy:o?.username||"Unknown",deletedByEmail:o?.email||"",originalSubmittedBy:e.loadedReport?.submittedBy,originalSubmittedAt:e.loadedReport?.createdAt}),yield n.dismiss(),yield(yield e.alertController.create({header:e.ts.t("Success"),message:e.ts.t("Entry has been deleted and backed up successfully."),buttons:[{text:"OK",handler:()=>{e.router.navigate(["/health"])}}]})).present()}catch(o){yield n.dismiss(),console.error("Error deleting entry:",o),yield(yield e.alertController.create({header:e.ts.t("Error"),message:e.ts.t("Failed to delete entry. Please try again."),buttons:["OK"]})).present()}})()}static#t=i=()=>(this.\u0275fac=function(n){return new(n||c)(t.rXU(b.ok),t.rXU(m.hG),t.rXU(m.Xi),t.rXU(j.Ix),t.rXU(j.nX),t.rXU(m.W3),t.rXU(I.N),t.rXU(S.T),t.rXU(D.H),t.rXU($.C),t.rXU(E.k),t.rXU(N.L))},this.\u0275cmp=t.VBU({type:c,selectors:[["app-restoration"]],standalone:!1,decls:159,vars:103,consts:[["dateInput",""],["timeInput",""],[1,"restoration-green"],["slot","start"],["defaultHref","/health"],[1,"restoration-green","compact-toolbar"],[1,"date-time-text"],["style","cursor: pointer;",3,"click",4,"ngIf"],[4,"ngIf"],["type","date",2,"position","absolute","opacity","0","width","0","height","0","pointer-events","none",3,"change","value"],["type","time",2,"position","absolute","opacity","0","width","0","height","0","pointer-events","none",3,"change","value"],[1,"restoration-green","metadata-toolbar"],[1,"metadata-container"],[1,"metadata-item",3,"click"],["name","location",1,"metadata-icon"],[1,"metadata-label"],["name","alert-circle","class","status-icon required",4,"ngIf"],["class","metadata-item",3,"click",4,"ngIf"],["class","edit-location-link",3,"click",4,"ngIf"],["style","padding: 0 16px; font-size: 0.75rem; color: #e76f51;",4,"ngIf"],["color","light",3,"value"],[1,"progress-text"],[3,"ngSubmit","formGroup"],["class","edit-mode-banner",4,"ngIf"],["class","edit-mode-banner editing",4,"ngIf"],["lines","none"],[1,"info-note"],["name","information-circle",2,"color","#2d8659"],["class","status-card",4,"ngIf"],[1,"seed-collection-header"],["formArrayName","seedCollection",1,"species-list"],["class","species-row",4,"ngFor","ngForOf"],[1,"total-row"],[1,"total-value-section"],["class","last-value",4,"ngIf"],["readonly","",1,"total-input",3,"value"],[1,"sowing-header"],[1,"section-label"],["formArrayName","seedsSowed",1,"species-list"],[1,"growth-header"],["formArrayName","averageHeight",1,"species-list"],["slot","end"],[1,"mortality-header"],["formArrayName","mortality",1,"species-list"],[1,"outplanting-header"],["formArrayName","outplanting",1,"species-list"],["position","stacked"],["formControlName","notes","rows","4",3,"placeholder"],["class","form-buttons",4,"ngIf"],["class","button-container",4,"ngIf"],[2,"cursor","pointer",3,"click"],["name","alert-circle",1,"status-icon","required"],["name","grid",1,"metadata-icon"],["name","apps",1,"metadata-icon"],[1,"edit-location-link",3,"click"],[2,"padding","0 16px","font-size","0.75rem","color","#e76f51"],[1,"edit-mode-banner"],["expand","block","color","warning",3,"click"],["name","create-outline","slot","start"],[1,"edit-mode-banner","editing"],["name","create-outline"],[1,"status-card"],["name","leaf-outline","slot","start",1,"toggle-icon"],[2,"min-width","70%","margin-right","15px"],[2,"width","100%"],[2,"margin-top","12px"],[2,"display","flex","flex-direction","column","align-items","center","flex-shrink","0","margin-right","15px"],[2,"font-size","0.8rem","margin-bottom","4px"],[1,"restoration-toggle",2,"--handle-border-radius","50%","--track-border-radius","15px","width","50px",3,"ngModelChange","ngModel","ngModelOptions"],["class","status-note warning",4,"ngIf"],[1,"status-note","warning"],["name","information-circle-outline"],[1,"species-row"],[1,"species-info"],["name","information-circle-outline","color","medium",1,"info-icon",3,"click"],[1,"value-section"],[1,"tally-control"],["size","small","fill","clear",3,"click",4,"ngIf"],["type","number","min","0","class","tally-input","placeholder","0",3,"formControlName",4,"ngIf"],[1,"last-value"],[1,"last-label"],[1,"last-number"],["size","small","fill","clear",3,"click"],["name","remove"],["type","number","min","0","placeholder","0",1,"tally-input",3,"formControlName"],["name","add"],[1,"value-section","height-section"],["type","number","step","0.1","min","0","placeholder","0.0",1,"height-input-simple",3,"ionChange","formControl","readonly"],[1,"form-buttons"],["expand","block","type","submit",1,"submit-button",3,"disabled"],["name","checkmark-circle","slot","start"],["expand","block","fill","outline","color","medium",1,"save-draft-button",3,"click"],["name","save-outline","slot","start"],["expand","block","fill","outline",1,"discard-button",3,"click"],["name","trash-outline","slot","start"],[1,"button-container"],["expand","block","color","danger",1,"delete-button",3,"click"]],template:function(n,o){if(1&n){const a=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-buttons",3),t.nrm(3,"ion-back-button",4),t.k0s(),t.j41(4,"ion-title"),t.EFF(5),t.nI1(6,"t"),t.k0s()(),t.j41(7,"ion-toolbar",5)(8,"ion-text",6),t.DNE(9,A,2,1,"span",7)(10,V,2,1,"span",8),t.EFF(11," \xa0 \u2022 \xa0 "),t.DNE(12,X,2,1,"span",7)(13,Y,2,1,"span",8),t.j41(14,"input",9,0),t.bIt("change",function(l){return d.eBV(a),d.Njj(o.onDateChanged(l))}),t.k0s(),t.j41(16,"input",10,1),t.bIt("change",function(l){return d.eBV(a),d.Njj(o.onTimeChanged(l))}),t.k0s(),t.DNE(18,B,2,1,"span",8),t.k0s()(),t.j41(19,"ion-toolbar",11)(20,"div",12)(21,"div",13),t.bIt("click",function(){return d.eBV(a),d.Njj(!o.viewMode&&o.editSite())}),t.nrm(22,"ion-icon",14),t.j41(23,"span",15),t.EFF(24),t.nI1(25,"t"),t.k0s(),t.DNE(26,U,1,0,"ion-icon",16),t.k0s(),t.DNE(27,J,4,1,"div",17)(28,q,4,1,"div",17)(29,H,3,3,"span",18),t.k0s(),t.DNE(30,Q,3,3,"ion-error",19),t.k0s(),t.j41(31,"ion-toolbar",5),t.nrm(32,"ion-progress-bar",20),t.j41(33,"ion-text",21),t.EFF(34),t.nI1(35,"t"),t.k0s()()(),t.j41(36,"ion-content")(37,"form",22),t.bIt("ngSubmit",function(){return d.eBV(a),d.Njj(o.onSubmit())}),t.DNE(38,L,5,3,"div",23)(39,Z,5,3,"div",24),t.j41(40,"ion-card")(41,"ion-card-content")(42,"ion-item",25)(43,"ion-label",26),t.nrm(44,"ion-icon",27),t.EFF(45),t.nI1(46,"t"),t.k0s()()()(),t.DNE(47,tt,26,24,"ion-card",28),t.j41(48,"ion-card")(49,"ion-card-header",29)(50,"ion-card-title"),t.EFF(51),t.nI1(52,"t"),t.k0s(),t.j41(53,"ion-card-subtitle"),t.EFF(54),t.nI1(55,"t"),t.k0s()(),t.j41(56,"ion-card-content")(57,"div",30),t.DNE(58,at,17,7,"div",31),t.k0s(),t.j41(59,"ion-item",32)(60,"ion-label")(61,"strong"),t.EFF(62),t.nI1(63,"t"),t.k0s()(),t.j41(64,"div",33),t.DNE(65,st,5,1,"div",34),t.nrm(66,"ion-input",35),t.k0s()()()(),t.j41(67,"ion-card")(68,"ion-card-header",36)(69,"ion-card-title"),t.EFF(70),t.nI1(71,"t"),t.k0s()(),t.j41(72,"ion-card-content")(73,"ion-label",37),t.EFF(74),t.nI1(75,"t"),t.k0s(),t.j41(76,"div",38),t.DNE(77,mt,16,7,"div",31),t.k0s(),t.j41(78,"ion-item",32)(79,"ion-label")(80,"strong"),t.EFF(81),t.nI1(82,"t"),t.k0s()(),t.j41(83,"div",33),t.DNE(84,pt,5,1,"div",34),t.nrm(85,"ion-input",35),t.k0s()()()(),t.j41(86,"ion-card")(87,"ion-card-header",39)(88,"ion-card-title"),t.EFF(89),t.nI1(90,"t"),t.k0s(),t.j41(91,"ion-card-subtitle"),t.EFF(92),t.nI1(93,"t"),t.k0s()(),t.j41(94,"ion-card-content")(95,"div",40),t.DNE(96,ft,15,5,"div",31),t.k0s(),t.j41(97,"ion-item",32)(98,"ion-label")(99,"strong"),t.EFF(100),t.nI1(101,"t"),t.k0s()(),t.j41(102,"div",33),t.DNE(103,ht,5,1,"div",34),t.j41(104,"ion-input",35)(105,"span",41),t.EFF(106,"cm"),t.k0s()()()()()(),t.j41(107,"ion-card")(108,"ion-card-header",42)(109,"ion-card-title"),t.EFF(110),t.nI1(111,"t"),t.k0s(),t.j41(112,"ion-card-subtitle"),t.EFF(113),t.nI1(114,"t"),t.k0s()(),t.j41(115,"ion-card-content")(116,"div",43),t.DNE(117,yt,16,7,"div",31),t.k0s(),t.j41(118,"ion-item",32)(119,"ion-label")(120,"strong"),t.EFF(121),t.nI1(122,"t"),t.k0s()(),t.j41(123,"div",33),t.DNE(124,Ot,5,1,"div",34),t.nrm(125,"ion-input",35),t.k0s()()()(),t.j41(126,"ion-card")(127,"ion-card-header",44)(128,"ion-card-title"),t.EFF(129),t.nI1(130,"t"),t.k0s(),t.j41(131,"ion-card-subtitle"),t.EFF(132),t.nI1(133,"t"),t.k0s()(),t.j41(134,"ion-card-content")(135,"div",45),t.DNE(136,jt,16,7,"div",31),t.k0s(),t.j41(137,"ion-item",32)(138,"ion-label")(139,"strong"),t.EFF(140),t.nI1(141,"t"),t.k0s()(),t.j41(142,"div",33),t.DNE(143,Tt,5,1,"div",34),t.nrm(144,"ion-input",35),t.k0s()()()(),t.j41(145,"ion-card")(146,"ion-card-header",2)(147,"ion-card-title"),t.EFF(148),t.nI1(149,"t"),t.k0s()(),t.j41(150,"ion-card-content")(151,"ion-item")(152,"ion-label",46),t.EFF(153),t.nI1(154,"t"),t.k0s(),t.nrm(155,"ion-textarea",47),t.nI1(156,"t"),t.k0s()()(),t.DNE(157,It,13,10,"div",48)(158,St,5,3,"div",49),t.k0s()()}if(2&n){let a,s,l,g,u,_,h;t.R7$(5),t.JRh(t.bMT(6,59,"Restoration Monitoring")),t.R7$(4),t.Y8G("ngIf",(null==o.currentUser?null:o.currentUser.level)>=4&&!o.viewMode),t.R7$(),t.Y8G("ngIf",!((null==o.currentUser?null:o.currentUser.level)>=4&&!o.viewMode)),t.R7$(2),t.Y8G("ngIf",(null==o.currentUser?null:o.currentUser.level)>=4&&!o.viewMode),t.R7$(),t.Y8G("ngIf",!((null==o.currentUser?null:o.currentUser.level)>=4&&!o.viewMode)),t.R7$(),t.Y8G("value",null==(a=o.restorationForm.get("date"))?null:a.value),t.R7$(2),t.Y8G("value",null==(s=o.restorationForm.get("observationTime"))?null:s.value),t.R7$(2),t.Y8G("ngIf",(o.viewMode||o.isEditMode)&&o.getEditedDateTime()),t.R7$(6),t.JRh((null==(l=o.restorationForm.get("site"))?null:l.value)||t.bMT(25,61,"Add location")),t.R7$(2),t.Y8G("ngIf",!(null!=(g=o.restorationForm.get("site"))&&g.value||o.viewMode)),t.R7$(),t.Y8G("ngIf",(null==(u=o.restorationForm.get("zoneNumber"))?null:u.value)&&o.locationHasZones()),t.R7$(),t.Y8G("ngIf",(null==(_=o.restorationForm.get("quadNumber"))?null:_.value)&&o.locationHasQuads()),t.R7$(),t.Y8G("ngIf",o.isEditMode&&o.currentUser&&o.currentUser.level>=4),t.R7$(),t.Y8G("ngIf",(null==(h=o.restorationForm.get("site"))?null:h.hasError("required"))&&(null==(h=o.restorationForm.get("site"))?null:h.touched)),t.R7$(2),t.Y8G("value",o.progress),t.R7$(2),t.Lme(" ",(100*o.progress).toFixed(0),"% ",t.bMT(35,63,"Complete")," "),t.R7$(2),t.AVh("view-mode",o.viewMode),t.R7$(),t.Y8G("formGroup",o.restorationForm),t.R7$(),t.Y8G("ngIf",o.viewMode&&o.currentUser&&o.currentUser.level>=4),t.R7$(),t.Y8G("ngIf",o.isEditMode),t.R7$(6),t.SpI(" ",t.bMT(46,65,"Minimum monitoring frequency: every two weeks")," "),t.R7$(2),t.Y8G("ngIf",!o.viewMode),t.R7$(4),t.JRh(t.bMT(52,67,"Seed Collection")),t.R7$(3),t.JRh(t.bMT(55,69,"Number of Species Collected")),t.R7$(4),t.Y8G("ngForOf",o.mangroveSpecies),t.R7$(4),t.JRh(t.bMT(63,71,"Total")),t.R7$(3),t.Y8G("ngIf",o.isUpdatingProject&&o.lastReportData),t.R7$(),t.Y8G("value",o.seedCollectionTotal),t.R7$(4),t.JRh(t.bMT(71,73,"Sowing")),t.R7$(4),t.JRh(t.bMT(75,75,"Number of Seeds Sowed per Species")),t.R7$(3),t.Y8G("ngForOf",o.mangroveSpecies),t.R7$(4),t.JRh(t.bMT(82,77,"Total")),t.R7$(3),t.Y8G("ngIf",o.isUpdatingProject&&o.lastReportData),t.R7$(),t.Y8G("value",o.seedsSowedTotal),t.R7$(4),t.JRh(t.bMT(90,79,"Growth Monitoring")),t.R7$(3),t.JRh(t.bMT(93,81,"Average Height per Species (cm)")),t.R7$(4),t.Y8G("ngForOf",o.mangroveSpecies),t.R7$(4),t.JRh(t.bMT(101,83,"Average Overall")),t.R7$(3),t.Y8G("ngIf",o.isUpdatingProject&&o.lastReportData),t.R7$(),t.Y8G("value",o.averageHeightOverall),t.R7$(6),t.JRh(t.bMT(111,85,"Mortality per Species")),t.R7$(3),t.JRh(t.bMT(114,87,"Number of Dead/Failed Individuals")),t.R7$(4),t.Y8G("ngForOf",o.mangroveSpecies),t.R7$(4),t.JRh(t.bMT(122,89,"Total")),t.R7$(3),t.Y8G("ngIf",o.isUpdatingProject&&o.lastReportData),t.R7$(),t.Y8G("value",o.mortalityTotal),t.R7$(4),t.JRh(t.bMT(130,91,"Outplanting")),t.R7$(3),t.JRh(t.bMT(133,93,"Number of Individuals Outplanted per Species")),t.R7$(4),t.Y8G("ngForOf",o.mangroveSpecies),t.R7$(4),t.JRh(t.bMT(141,95,"Total")),t.R7$(3),t.Y8G("ngIf",o.isUpdatingProject&&o.lastReportData),t.R7$(),t.Y8G("value",o.outplantingTotal),t.R7$(4),t.JRh(t.bMT(149,97,"Additional Notes")),t.R7$(5),t.JRh(t.bMT(154,99,"Observations")),t.R7$(2),t.Y8G("placeholder",t.bMT(156,101,"Enter any observations about growth patterns, environmental conditions, or issues encountered")),t.R7$(2),t.Y8G("ngIf",!o.viewMode),t.R7$(),t.Y8G("ngIf",o.viewMode&&(null==o.currentUser?null:o.currentUser.level)>=4)}},dependencies:[v.Sq,v.bT,b.qT,b.me,b.Q0,b.BC,b.cb,b.VZ,b.vS,b.l_,b.j4,b.JD,b.v8,m.Jm,m.QW,m.b_,m.I9,m.ME,m.HW,m.tN,m.W9,m.eU,m.iq,m.$w,m.uz,m.he,m.JI,m.FH,m.IO,m.nc,m.BC,m.BY,m.ai,m.hB,m.su,m.Gw,m.el,m.T6,G.D],styles:[".restoration-green[_ngcontent-%COMP%]{--background: #2d8659;color:#fff}.restoration-green[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{--color: white;transition:transform .2s}.restoration-green[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]:hover{transform:translate(-4px)}.restoration-green[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);width:100%;pointer-events:none}.restoration-green.compact-toolbar[_ngcontent-%COMP%]{--min-height: 28px;--padding-top: 5px;--padding-bottom: 5px}.edit-mode-banner[_ngcontent-%COMP%]{padding:.75rem 1rem;margin:.5rem;border-radius:.5rem}.edit-mode-banner[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: .5rem;font-weight:600}.edit-mode-banner.editing[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffc107;display:flex;align-items:center;gap:.5rem;color:#856404;font-weight:500}.edit-mode-banner.editing[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.date-time-text[_ngcontent-%COMP%]{display:block;text-align:center;color:#fffffff2;font-size:14px;padding:0;margin:3px 0;font-weight:400;letter-spacing:.3px;line-height:1.2}.metadata-toolbar[_ngcontent-%COMP%]{--min-height: 40px;--padding-top: 6px;--padding-bottom: 6px}.metadata-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px;padding:0 12px;flex-wrap:wrap}.metadata-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;background:#ffffff26;border-radius:16px;padding:5px 10px;cursor:pointer;transition:all .2s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.metadata-item[_ngcontent-%COMP%]:active{transform:scale(.95);background:#ffffff40}.metadata-icon[_ngcontent-%COMP%]{font-size:14px;color:#ffffffe6;min-width:14px}.metadata-label[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:500;letter-spacing:.2px;white-space:nowrap;max-width:120px;overflow:hidden;text-overflow:ellipsis}.edit-location-link[_ngcontent-%COMP%]{color:#ffffffe6;font-size:11px;text-decoration:underline;cursor:pointer;margin-left:8px;padding:4px 8px}.edit-location-link[_ngcontent-%COMP%]:active{opacity:.7}.status-icon[_ngcontent-%COMP%]{font-size:14px;margin-left:2px}.status-icon.success[_ngcontent-%COMP%]{color:#52a676}.status-icon.required[_ngcontent-%COMP%]{color:#ffd93d;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}.progress-text[_ngcontent-%COMP%]{display:block;text-align:center;color:#fff;font-size:13px;padding:0;margin:0 0 4px;font-weight:400;line-height:1}ion-card[_ngcontent-%COMP%]{margin:16px;border-radius:12px;box-shadow:0 2px 8px #0000001a}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{border-radius:12px 12px 0 0;padding:16px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#fff}@media (min-width: 400px) and (max-width: 800px){ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.25rem}}@media (max-width: 399px) and (min-width: 360px){ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 359px){ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:.95rem}}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#fffffff2;font-size:.875rem;margin-top:4px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{background:#fff;padding:16px}.outplanting-header[_ngcontent-%COMP%]{--background: #52a676 !important;--background-opacity: 1}.outplanting-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%], .outplanting-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#333}.seed-collection-header[_ngcontent-%COMP%]{--background: #4fb3bf !important;--background-opacity: 1}.seed-collection-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%], .seed-collection-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#fff}.sowing-header[_ngcontent-%COMP%]{--background: #4dbba7 !important;--background-opacity: 1}.sowing-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#333}.growth-header[_ngcontent-%COMP%]{--background: #D4A73C !important;--background-opacity: 1}.growth-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%], .growth-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#333}.mortality-header[_ngcontent-%COMP%]{--background: #e76f51 !important;--background-opacity: 1}.mortality-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%], .mortality-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#333}.info-note[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#4fb3bf;font-size:.875rem;padding:8px 0}.info-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.section-label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#0d3d2f;margin:16px 0 8px;font-size:.95rem}.species-list[_ngcontent-%COMP%]{margin-top:8px}.species-row[_ngcontent-%COMP%]{margin-bottom:8px}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;--background: #f9f9f9;border-radius:8px;margin-bottom:8px}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .species-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex:1;min-width:170px}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .height-input-simple[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;text-align:center;max-width:140px;font-weight:500;margin-left:auto}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .height-input-simple.item-interactive[_ngcontent-%COMP%]{--background: #f5f5f5;--border-color: #ddd;--border-radius: 8px}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .height-input-simple[readonly][_ngcontent-%COMP%]{--background: transparent;pointer-events:none}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;color:#0d3d2f;margin:0 0 4px;font-size:.95rem}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7c7a;font-size:.8rem;font-style:italic;margin:0}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:1.3rem;flex-shrink:0;margin-right:10px;cursor:pointer}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]:hover{opacity:.7}.species-input[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;max-width:120px;text-align:center;font-weight:600;border:1px solid #ddd;border-radius:6px;margin-left:8px}.value-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.value-section.height-section[_ngcontent-%COMP%]{gap:8px}.total-value-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.last-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-width:50px;padding:4px 8px;background:#f5f5f5;border-radius:6px;border:1px solid #e0e0e0}.last-value[_ngcontent-%COMP%]   .last-label[_ngcontent-%COMP%]{font-size:.65rem;color:#888;text-transform:uppercase;letter-spacing:.5px}.last-value[_ngcontent-%COMP%]   .last-number[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#6b7c7a}.tally-control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.tally-control[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 4px;--padding-end: 4px;min-width:32px;height:32px;margin:0}.tally-control[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.tally-control[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:30px;text-align:center;font-weight:600;font-size:.95rem}.tally-control[_ngcontent-%COMP%]   .placeholder-value[_ngcontent-%COMP%]{color:#999;font-weight:400}.tally-control[_ngcontent-%COMP%]   .tally-input[_ngcontent-%COMP%]{width:50px;text-align:center;font-weight:600;font-size:.95rem;border:1px solid #ccc;border-radius:4px;padding:4px;appearance:textfield}.tally-control[_ngcontent-%COMP%]   .tally-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .tally-control[_ngcontent-%COMP%]   .tally-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.total-row[_ngcontent-%COMP%]{background:#e8f8f5!important;border-top:2px solid #2d8659;margin-top:12px;padding:8px 0;--background: #e8f8f5}.total-row[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#2d8659;font-size:1rem}.total-input[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;max-width:120px;text-align:center;font-weight:700;color:#2d8659;border:2px solid #2d8659;border-radius:6px;background:#fff;margin-left:8px}ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;margin-bottom:12px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:8px}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;border:1px solid #ddd;border-radius:8px;margin-top:4px}ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--padding-top: 12px;--padding-bottom: 12px}.form-buttons[_ngcontent-%COMP%]{padding:0 16px;margin-top:24px;margin-bottom:32px}.form-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:12px}.form-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-buttons[_ngcontent-%COMP%]   ion-button.save-draft-button[_ngcontent-%COMP%]{margin:10px 0 12px}.form-buttons[_ngcontent-%COMP%]   .save-draft-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-size:1rem;font-weight:500;--background: rgba(107, 124, 122, .1);--border-color: #6b7c7a;--color: #6b7c7a;--background-hover: rgba(107, 124, 122, .2);--background-activated: rgba(107, 124, 122, .3)}.form-buttons[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{margin:0;--border-radius: 8px;height:48px;font-size:1.125rem;font-weight:600;--background: #2d8659;--background-hover: #256e47;--background-activated: #256e47}.form-buttons[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]:disabled{opacity:.5}.form-buttons[_ngcontent-%COMP%]   .discard-button[_ngcontent-%COMP%]{--border-radius: 8px;height:48px;font-size:1rem;font-weight:500;--color: #e76f51;--border-color: #e76f51;--border-width: 2px;--background-hover: rgba(231, 111, 81, .1);--background-activated: rgba(231, 111, 81, .2);--ripple-color: rgba(231, 111, 81, .3)}.form-buttons[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{margin-top:20px;--background: #d32f2f;--background-hover: #b71c1c;--background-activated: #b71c1c;font-weight:600;height:48px;font-size:1rem}.submit-button[_ngcontent-%COMP%]{margin:24px 16px 32px;--border-radius: 8px;height:48px;font-size:1.125rem;font-weight:600;--background: #2d8659;--background-hover: #256e47;--background-activated: #256e47}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.5}@media (max-width: 359px){.submit-button[_ngcontent-%COMP%]{font-size:1rem!important}}ion-error[_ngcontent-%COMP%]{color:#e76f51!important;font-size:.75rem!important;margin-top:4px;padding-left:16px}.view-mode[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%], .view-mode   [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%], .view-mode[_nghost-%COMP%]   ion-input[_ngcontent-%COMP%], .view-mode   [_nghost-%COMP%]   ion-input[_ngcontent-%COMP%], .view-mode[_nghost-%COMP%]   ion-textarea[_ngcontent-%COMP%], .view-mode   [_nghost-%COMP%]   ion-textarea[_ngcontent-%COMP%], .view-mode[_nghost-%COMP%]   ion-select[_ngcontent-%COMP%], .view-mode   [_nghost-%COMP%]   ion-select[_ngcontent-%COMP%], .view-mode[_nghost-%COMP%]   ion-toggle[_ngcontent-%COMP%], .view-mode   [_nghost-%COMP%]   ion-toggle[_ngcontent-%COMP%], .view-mode[_nghost-%COMP%]   ion-checkbox[_ngcontent-%COMP%], .view-mode   [_nghost-%COMP%]   ion-checkbox[_ngcontent-%COMP%], .view-mode[_nghost-%COMP%]   ion-label[_ngcontent-%COMP%], .view-mode   [_nghost-%COMP%]   ion-label[_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important;color:#000!important;--color: #000 !important}ion-item.item-disabled[_ngcontent-%COMP%], ion-item.item-interactive-disabled[_ngcontent-%COMP%]{opacity:1!important;--opacity: 1 !important}ion-item.item-disabled[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-item.item-interactive-disabled[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{opacity:1!important;color:#000!important}  .item-disabled,   .item-interactive-disabled{opacity:1!important}  .item-disabled ion-label,   .item-disabled .label-text,   .item-disabled .native-input,   .item-disabled .select-text,   .item-disabled .select-icon,   .item-interactive-disabled ion-label,   .item-interactive-disabled .label-text,   .item-interactive-disabled .native-input,   .item-interactive-disabled .select-text,   .item-interactive-disabled .select-icon{opacity:1!important;color:#000!important}  ion-select.select-disabled{opacity:1!important}  ion-select.select-disabled .select-text,   ion-select.select-disabled .select-icon,   ion-select.select-disabled .select-placeholder{opacity:1!important;color:#000!important}  ion-toggle.toggle-disabled{opacity:1!important}  ion-checkbox.checkbox-disabled{opacity:1!important}  ion-input.input-disabled,   ion-textarea.textarea-disabled{opacity:1!important}  ion-input.input-disabled .native-input,   ion-input.input-disabled .native-textarea,   ion-textarea.textarea-disabled .native-input,   ion-textarea.textarea-disabled .native-textarea{opacity:1!important;color:#000!important;-webkit-text-fill-color:#000!important}@media (max-width: 768px){.species-input[_ngcontent-%COMP%], .total-input[_ngcontent-%COMP%]{max-width:100px;font-size:.9rem}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.85rem}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}ion-card[_ngcontent-%COMP%]{margin:12px}.status-card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{font-size:.8rem!important}.status-card[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem!important}.status-card[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem!important}.status-card[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{color:#888;font-size:.7rem!important;font-style:italic;margin-top:12px}}@media (max-width: 480px){ion-card[_ngcontent-%COMP%]{margin:8px}ion-card-content[_ngcontent-%COMP%]{padding:12px 8px!important}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 4px;--inner-padding-end: 4px}.species-info[_ngcontent-%COMP%]{min-width:100px!important;gap:4px!important}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.8rem}.species-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem}.info-icon[_ngcontent-%COMP%]{font-size:1rem!important}.tally-control[_ngcontent-%COMP%]{gap:4px}.tally-control[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{min-width:28px;height:28px}.tally-control[_ngcontent-%COMP%]   .tally-input[_ngcontent-%COMP%]{width:40px;padding:2px;font-size:.85rem}.height-input-simple[_ngcontent-%COMP%]{max-width:100px!important;font-size:.85rem}.value-section[_ngcontent-%COMP%]{gap:6px}.last-value[_ngcontent-%COMP%]{min-width:50px;padding:2px 4px}.last-value[_ngcontent-%COMP%]   .last-label[_ngcontent-%COMP%]{font-size:.6rem}.last-value[_ngcontent-%COMP%]   .last-number[_ngcontent-%COMP%]{font-size:.75rem}.total-row[_ngcontent-%COMP%]{--padding-end: 10px}.total-row[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.9rem}.total-input[_ngcontent-%COMP%]{max-width:90px!important}}.status-card[_ngcontent-%COMP%]{margin:16px;box-shadow:0 2px 8px #2d865926}.status-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.status-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#2d8659;font-size:1.1rem;font-weight:600}.status-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#666;font-size:.875rem;margin-top:4px}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{color:#2d8659;font-size:1.5rem;margin-right:8px}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.938rem;font-weight:500;color:#333;margin:0 0 4px}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.813rem;color:#666;margin:0}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{--handle-width: 26px;--handle-height: 26px;--handle-border-radius: 50%;--track-border-radius: 15px}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .status-note[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-top:12px;padding:8px 12px;background:#f0f9f4;border-radius:8px;font-size:.813rem;color:#2d8659}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .status-note.warning[_ngcontent-%COMP%]{background:#fff3e0;color:#e76f51}.status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .status-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1rem;flex-shrink:0}ion-toggle.restoration-toggle[_ngcontent-%COMP%]{--track-background: #e0e0e0;--track-background-checked: #e0e0e0;--handle-background: #ffffff;--handle-background-checked: #2d8659;--handle-border-radius: 50% !important;--track-border-radius: 15px !important}ion-toggle.restoration-toggle[_ngcontent-%COMP%]::part(handle){border-radius:50%!important}ion-toggle.restoration-toggle[_ngcontent-%COMP%]::part(track){border-radius:15px!important}"]}))}return i(),c})(),Nt=(()=>{var i;class c{constructor(e){this.modalController=e,this.currentIndex=0,this.rotatedImages=new Set(["assets/mangroves/Red mangrove1.webp","assets/mangroves/Red mangrove2.webp","assets/mangroves/White mangrove2.webp","assets/mangroves/Black mangrove.webp","assets/mangroves/Oriental mangrove1.webp","assets/mangroves/Oriental mangrove2.webp","assets/mangroves/Puzzlenut mangrove.webp","assets/mangroves/Yellow mangrove1.webp","assets/mangroves/Yellow mangrove2.webp","assets/mangroves/Apple mangrove.webp"])}isCurrentImageRotated(){return this.rotatedImages.has(this.getCurrentImage())}getImages(){return Array.isArray(this.species.imagePath)?this.species.imagePath:[this.species.imagePath]}getCurrentImage(){return this.getImages()[this.currentIndex]||""}next(){const e=this.getImages();this.currentIndex=(this.currentIndex+1)%e.length}previous(){const e=this.getImages();this.currentIndex=(this.currentIndex-1+e.length)%e.length}goTo(e){this.currentIndex=e}dismiss(){this.modalController.dismiss()}static#t=i=()=>(this.\u0275fac=function(n){return new(n||c)(t.rXU(m.W3))},this.\u0275cmp=t.VBU({type:c,selectors:[["mangrove-info-modal"]],decls:18,vars:8,consts:[["slot","end"],[3,"click"],["name","close","slot","icon-only"],[1,"ion-padding"],[1,"popover-content"],[1,"common-name"],[1,"latin-name"],[1,"slideshow-container"],[1,"image-wrapper"],["appPinchZoom","",1,"mangrove-image",3,"src","alt"],["class","slideshow-controls",4,"ngIf"],[1,"slideshow-controls"],[1,"nav-button",3,"click"],["name","chevron-back"],[1,"slideshow-indicators"],["class","indicator-dot",3,"active","click",4,"ngFor","ngForOf"],["name","chevron-forward"],[1,"indicator-dot",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s(),t.j41(4,"ion-buttons",0)(5,"ion-button",1),t.bIt("click",function(){return o.dismiss()}),t.nrm(6,"ion-icon",2),t.k0s()()()(),t.j41(7,"ion-content",3)(8,"div",4)(9,"p",5),t.EFF(10),t.k0s(),t.j41(11,"p",6)(12,"em"),t.EFF(13),t.k0s()(),t.j41(14,"div",7)(15,"div",8),t.nrm(16,"img",9),t.k0s(),t.DNE(17,$t,7,1,"div",10),t.k0s()()()),2&n&&(t.R7$(3),t.JRh(o.species.scientificName),t.R7$(7),t.JRh(o.species.commonName),t.R7$(3),t.JRh(o.species.latinName),t.R7$(2),t.AVh("rotated-wrapper",o.isCurrentImageRotated()),t.R7$(),t.Y8G("src",o.getCurrentImage(),t.B4B)("alt",o.species.scientificName),t.R7$(),t.Y8G("ngIf",o.getImages().length>1))},dependencies:[m.bv,m.Jm,m.QW,m.W9,m.eU,m.iq,m.BC,m.ai,v.MD,v.Sq,v.bT,y.h],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #2d8659;--color: white}ion-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600}ion-button[_ngcontent-%COMP%]{--color: white}ion-content[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0}.popover-content[_ngcontent-%COMP%]{text-align:center;height:100%;display:flex;flex-direction:column;justify-content:flex-start;padding-top:20px;min-height:0;overflow:hidden}.common-name[_ngcontent-%COMP%]{margin:16px 16px 8px;font-size:16px;color:#666;font-weight:500}.latin-name[_ngcontent-%COMP%]{margin:0 16px 16px;font-size:14px;color:#888}.slideshow-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;min-height:0;overflow:hidden}.image-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;min-height:0;width:100%;overflow:hidden;position:relative}.mangrove-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;image-orientation:none}@media screen and (max-width: 768px){.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]{transform:rotate(-90deg);width:auto;height:100%}.mangrove-image[_ngcontent-%COMP%]{touch-action:none;user-select:none;-webkit-user-select:none}}@media screen and (min-width: 769px){.mangrove-image[_ngcontent-%COMP%]{margin-top:-20px;transition:transform .2s ease,filter .2s ease}.mangrove-image[_ngcontent-%COMP%]:hover{transform:scale(1.02);filter:brightness(1.1)}.mangrove-image[_ngcontent-%COMP%]:active{transform:scale(.98)}.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]   .mangrove-image[_ngcontent-%COMP%]{transform:rotate(-90deg);max-width:none;max-height:none;height:100%;width:auto;position:absolute;margin-top:0}.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]   .mangrove-image[_ngcontent-%COMP%]:hover{transform:rotate(-90deg) scale(1.02)}.image-wrapper.rotated-wrapper[_ngcontent-%COMP%]   .mangrove-image[_ngcontent-%COMP%]:active{transform:rotate(-90deg) scale(.98)}}.slideshow-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:8px 0}.nav-button[_ngcontent-%COMP%]{background:#2d865926;border:none;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.nav-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#2d8659}.nav-button[_ngcontent-%COMP%]:hover{background:#2d865940}.nav-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.slideshow-indicators[_ngcontent-%COMP%]{display:flex;gap:8px}.indicator-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:#2d865940;cursor:pointer;transition:all .3s ease}.indicator-dot.active[_ngcontent-%COMP%]{background:#2d8659;transform:scale(1.3)}.indicator-dot[_ngcontent-%COMP%]:hover{background:#2d865980}"]}))}return i(),c})();const Gt=[{path:"",component:Et}];let zt=(()=>{var i;class c{static#t=i=()=>(this.\u0275fac=function(n){return new(n||c)},this.\u0275mod=t.$C({type:c}),this.\u0275inj=d.G2t({imports:[C.iI.forChild(Gt),C.iI]}))}return i(),c})();var At=f(4670);let Vt=(()=>{var i;class c{static#t=i=()=>(this.\u0275fac=function(n){return new(n||c)},this.\u0275mod=t.$C({type:c}),this.\u0275inj=d.G2t({imports:[v.MD,b.YN,b.X1,m.bv,zt,At.k]}))}return i(),c})()}}]);